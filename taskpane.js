/*! For license information please see taskpane.js.LICENSE.txt */
(self.webpackChunkoffice_addin_taskpane_react=self.webpackChunkoffice_addin_taskpane_react||[]).push([[926],{251:function(e,t){t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,l=(1<<a)-1,c=l>>1,u=-7,d=r?n-1:0,m=r?-1:1,p=e[t+d];for(d+=m,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=m,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=m,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,l,c=8*o-n-1,u=(1<<c)-1,d=u>>1,m=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?m/l:m*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,n),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;e[r+p]=255&a,p+=h,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;e[r+p]=255&s,p+=h,s/=256,c-=8);e[r+p-h]|=128*f}},5338:function(e,t,r){"use strict";var i=r(40961);t.H=i.createRoot,i.hydrateRoot},5656:function(e,t,r){"use strict";Object.defineProperty(t,"qg",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"GP",{enumerable:!0,get:function(){return n.default}});var i=o(r(79272)),n=o(r(46859));function o(e){return e&&e.__esModule?e:{default:e}}},7463:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var i=r-1>>>1,n=e[i];if(!(0<o(n,t)))break e;e[i]=t,e[r]=n,r=i}}function i(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,n=e.length,s=n>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,r))c<n&&0>o(u,l)?(e[i]=u,e[c]=r,i=c):(e[i]=l,e[a]=r,i=a);else{if(!(c<n&&0>o(u,r)))break e;e[i]=u,e[c]=r,i=c}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,m=null,p=3,h=!1,f=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)n(u);else{if(!(t.startTime<=e))break;n(u),t.sortIndex=t.expirationTime,r(c,t)}t=i(u)}}function x(e){if(g=!1,_(e),!f)if(null!==i(c))f=!0,P(w);else{var t=i(u);null!==t&&D(x,t.startTime-e)}}function w(e,r){f=!1,g&&(g=!1,b(E),E=-1),h=!0;var o=p;try{for(_(r),m=i(c);null!==m&&(!(m.expirationTime>r)||e&&!A());){var s=m.callback;if("function"==typeof s){m.callback=null,p=m.priorityLevel;var a=s(m.expirationTime<=r);r=t.unstable_now(),"function"==typeof a?m.callback=a:m===i(c)&&n(c),_(r)}else n(c);m=i(c)}if(null!==m)var l=!0;else{var d=i(u);null!==d&&D(x,d.startTime-r),l=!1}return l}finally{m=null,p=o,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,k=!1,T=null,E=-1,S=5,I=-1;function A(){return!(t.unstable_now()-I<S)}function O(){if(null!==T){var e=t.unstable_now();I=e;var r=!0;try{r=T(!0,e)}finally{r?C():(k=!1,T=null)}}else k=!1}if("function"==typeof y)C=function(){y(O)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=O,C=function(){R.postMessage(null)}}else C=function(){v(O,0)};function P(e){T=e,k||(k=!0,C())}function D(e,r){E=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:n,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,r(u,e),null===i(c)&&e===i(u)&&(g?(b(E),E=-1):g=!0,D(x,o-s))):(e.sortIndex=a,r(c,e),f||h||(f=!0,P(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},14306:function(e,t,r){"use strict";var i={};r.r(i),r.d(i,{currentVersion:function(){return up},retrieveLastVersion:function(){return pp},retrieveVersion:function(){return dp},save:function(){return hp},undo:function(){return mp}});var n={};r.r(n),r.d(n,{defaultOptions:function(){return xp},options:function(){return wp}});var o={};r.r(o),r.d(o,{dataTypeOf:function(){return kp},typeOf:function(){return Cp}});var s={};r.r(s),r.d(s,{applyGraph:function(){return Tp},removeGraph:function(){return Ep}});var a={};r.r(a),r.d(a,{DataParser:function(){return qp},FormatParser:function(){return Up},TypeParser:function(){return Hp}});var l={};r.r(l),r.d(l,{clean:function(){return nh}});var c={};r.r(c),r.d(c,{add:function(){return vh},addDataParser:function(){return mh},addTypeParser:function(){return Bp},chain:function(){return Hh},chainAsync:function(){return Uh},chainLink:function(){return qh},chainLinkAsync:function(){return Gh},data:function(){return uh},dataAsync:function(){return dh},get:function(){return bh},has:function(){return _h},hasDataParser:function(){return ph},hasTypeParser:function(){return Mp},list:function(){return xh},listDataParser:function(){return fh},listTypeParser:function(){return zp},remove:function(){return yh},removeDataParser:function(){return hh},removeTypeParser:function(){return Lp},treeTypeParser:function(){return Fp},type:function(){return Dp},typeMatcher:function(){return jp},util:function(){return Wh}});var u={};r.r(u),r.d(u,{add:function(){return Vh},addAsync:function(){return Kh},reset:function(){return Jh},set:function(){return $h},setAsync:function(){return Yh}});var d={};r.r(d),r.d(d,{sort:function(){return tf}});var m={};r.r(m),r.d(m,{add:function(){return nf},format:function(){return lf},has:function(){return sf},list:function(){return af},register:function(){return rf},remove:function(){return of}});var p={};r.r(p),r.d(p,{format:function(){return uf},get:function(){return df},getIds:function(){return cf}});var h={};r.r(h),r.d(h,{async:function(){return mf},validateOptions:function(){return _p},validateOutputOptions:function(){return yp}});var f={};r.r(f),r.d(f,{add:function(){return gf},get:function(){return _f},has:function(){return bf},htmlDict:function(){return xf},list:function(){return yf},register:function(){return ff},remove:function(){return vf},textDict:function(){return wf}});var g={};r.r(g),r.d(g,{add:function(){return kf},get:function(){return Tf},has:function(){return Ef},list:function(){return If},remove:function(){return Sf}});var v={};r.r(v),r.d(v,{parse:function(){return Rf}});var b={};r.r(b),r.d(b,{default:function(){return Df},parse:function(){return Df}});var y={};r.r(y),r.d(y,{parse:function(){return Bf}});var _={};r.r(_),r.d(_,{parse:function(){return Mf}});var x={};r.r(x),r.d(x,{argumentCommands:function(){return ng},commands:function(){return Zf},defaultStrings:function(){return eg},diacritics:function(){return Xf},fieldTypes:function(){return Jf},formatting:function(){return ig},formattingCommands:function(){return rg},formattingEnvs:function(){return tg},ligaturePattern:function(){return og},ligatures:function(){return sg},mathCommands:function(){return Qf},mathScriptFormatting:function(){return ag},mathScripts:function(){return lg},required:function(){return Yf},sentenceCaseLanguages:function(){return cg}});var w=r(96540),C=r.t(w,2),k=r(5338);const T=()=>{const e={};return function(t,r){void 0===e[t.id]&&(t.insertCSSRules(r),e[t.id]=!0)}};function E(e){for(var t,r=0,i=0,n=e.length;n>=4;++i,n-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}function S(e){return e.reduce(function(e,t){var r=t[0],i=t[1];return e[r]=i,e[i]=r,e},{})}function I(e){return"number"==typeof e}function A(e,t){return-1!==e.indexOf(t)}function O(e,t,r,i){return t+(n=r,0===parseFloat(n)?n:"-"===n[0]?n.slice(1):"-"+n)+i;var n}function N(e){return e.replace(/ +/g," ").split(" ").map(function(e){return e.trim()}).filter(Boolean).reduce(function(e,t){var r=e.list,i=e.state,n=(t.match(/\(/g)||[]).length,o=(t.match(/\)/g)||[]).length;return i.parensDepth>0?r[r.length-1]=r[r.length-1]+" "+t:r.push(t),i.parensDepth+=n-o,{list:r,state:i}},{list:[],state:{parensDepth:0}}).list}function R(e){var t=N(e);if(t.length<=3||t.length>4)return e;var r=t[0],i=t[1],n=t[2];return[r,t[3],n,i].join(" ")}var P={padding:function(e){var t=e.value;return I(t)?t:R(t)},textShadow:function(e){var t=function(e){for(var t=[],r=0,i=0,n=!1;i<e.length;)n||","!==e[i]?"("===e[i]?(n=!0,i++):")"===e[i]?(n=!1,i++):i++:(t.push(e.substring(r,i).trim()),r=++i);return r!=i&&t.push(e.substring(r,i+1)),t}(e.value).map(function(e){return e.replace(/(^|\s)(-*)([.|\d]+)/,function(e,t,r,i){return"0"===i?e:t+(""===r?"-":"")+i})});return t.join(",")},borderColor:function(e){return R(e.value)},borderRadius:function(e){var t=e.value;if(I(t))return t;if(A(t,"/")){var r=t.split("/"),i=r[0],n=r[1];return P.borderRadius({value:i.trim()})+" / "+P.borderRadius({value:n.trim()})}var o=N(t);switch(o.length){case 2:return o.reverse().join(" ");case 4:var s=o[0],a=o[1],l=o[2];return[a,s,o[3],l].join(" ");default:return t}},background:function(e){var t=e.value,r=e.valuesToConvert,i=e.isRtl,n=e.bgImgDirectionRegex,o=e.bgPosDirectionRegex;if(I(t))return t;var s=t.replace(/(url\(.*?\))|(rgba?\(.*?\))|(hsl\(.*?\))|(#[a-fA-F0-9]+)|((^| )(\D)+( |$))/g,"").trim();return t=t.replace(s,P.backgroundPosition({value:s,valuesToConvert:r,isRtl:i,bgPosDirectionRegex:o})),P.backgroundImage({value:t,valuesToConvert:r,bgImgDirectionRegex:n})},backgroundImage:function(e){var t=e.value,r=e.valuesToConvert,i=e.bgImgDirectionRegex;return A(t,"url(")||A(t,"linear-gradient(")?t.replace(i,function(e,t,i){return e.replace(i,r[i])}):t},backgroundPosition:function(e){var t=e.value,r=e.valuesToConvert,i=e.isRtl,n=e.bgPosDirectionRegex;return t.replace(i?/^((-|\d|\.)+%)/:null,function(e,t){return function(e){var t=e.indexOf(".");if(-1===t)e=100-parseFloat(e)+"%";else{var r=e.length-t-2;e=(e=100-parseFloat(e)).toFixed(r)+"%"}return e}(t)}).replace(n,function(e){return r[e]})},backgroundPositionX:function(e){var t=e.value,r=e.valuesToConvert,i=e.isRtl,n=e.bgPosDirectionRegex;return I(t)?t:P.backgroundPosition({value:t,valuesToConvert:r,isRtl:i,bgPosDirectionRegex:n})},transition:function(e){var t=e.value,r=e.propertiesToConvert;return t.split(/,\s*/g).map(function(e){var t=e.split(" ");return t[0]=r[t[0]]||t[0],t.join(" ")}).join(", ")},transitionProperty:function(e){var t=e.value,r=e.propertiesToConvert;return t.split(/,\s*/g).map(function(e){return r[e]||e}).join(", ")},transform:function(e){var t=e.value,r="[^\\u0020-\\u007e]",i="(?:(?:(?:\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f])",n="((?:-?(?:[0-9]*\\.[0-9]+|[0-9]+)(?:\\s*(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)|-?(?:[_a-z]|"+r+"|"+i+")(?:[_a-z0-9-]|"+r+"|"+i+")*)?)|(?:inherit|auto))",o=new RegExp("(translateX\\s*\\(\\s*)"+n+"(\\s*\\))","gi"),s=new RegExp("(translate\\s*\\(\\s*)"+n+"((?:\\s*,\\s*"+n+"){0,1}\\s*\\))","gi"),a=new RegExp("(translate3d\\s*\\(\\s*)"+n+"((?:\\s*,\\s*"+n+"){0,2}\\s*\\))","gi"),l=new RegExp("(rotate[ZY]?\\s*\\(\\s*)"+n+"(\\s*\\))","gi");return t.replace(o,O).replace(s,O).replace(a,O).replace(l,O)}};P.objectPosition=P.backgroundPosition,P.margin=P.padding,P.borderWidth=P.padding,P.boxShadow=P.textShadow,P.webkitBoxShadow=P.boxShadow,P.mozBoxShadow=P.boxShadow,P.WebkitBoxShadow=P.boxShadow,P.MozBoxShadow=P.boxShadow,P.borderStyle=P.borderColor,P.webkitTransform=P.transform,P.mozTransform=P.transform,P.WebkitTransform=P.transform,P.MozTransform=P.transform,P.transformOrigin=P.backgroundPosition,P.webkitTransformOrigin=P.transformOrigin,P.mozTransformOrigin=P.transformOrigin,P.WebkitTransformOrigin=P.transformOrigin,P.MozTransformOrigin=P.transformOrigin,P.webkitTransition=P.transition,P.mozTransition=P.transition,P.WebkitTransition=P.transition,P.MozTransition=P.transition,P.webkitTransitionProperty=P.transitionProperty,P.mozTransitionProperty=P.transitionProperty,P.WebkitTransitionProperty=P.transitionProperty,P.MozTransitionProperty=P.transitionProperty,P["text-shadow"]=P.textShadow,P["border-color"]=P.borderColor,P["border-radius"]=P.borderRadius,P["background-image"]=P.backgroundImage,P["background-position"]=P.backgroundPosition,P["background-position-x"]=P.backgroundPositionX,P["object-position"]=P.objectPosition,P["border-width"]=P.padding,P["box-shadow"]=P.textShadow,P["-webkit-box-shadow"]=P.textShadow,P["-moz-box-shadow"]=P.textShadow,P["border-style"]=P.borderColor,P["-webkit-transform"]=P.transform,P["-moz-transform"]=P.transform,P["transform-origin"]=P.transformOrigin,P["-webkit-transform-origin"]=P.transformOrigin,P["-moz-transform-origin"]=P.transformOrigin,P["-webkit-transition"]=P.transition,P["-moz-transition"]=P.transition,P["transition-property"]=P.transitionProperty,P["-webkit-transition-property"]=P.transitionProperty,P["-moz-transition-property"]=P.transitionProperty;var D=S([["paddingLeft","paddingRight"],["marginLeft","marginRight"],["left","right"],["borderLeft","borderRight"],["borderLeftColor","borderRightColor"],["borderLeftStyle","borderRightStyle"],["borderLeftWidth","borderRightWidth"],["borderTopLeftRadius","borderTopRightRadius"],["borderBottomLeftRadius","borderBottomRightRadius"],["padding-left","padding-right"],["margin-left","margin-right"],["border-left","border-right"],["border-left-color","border-right-color"],["border-left-style","border-right-style"],["border-left-width","border-right-width"],["border-top-left-radius","border-top-right-radius"],["border-bottom-left-radius","border-bottom-right-radius"]]),B=["content"],M=S([["ltr","rtl"],["left","right"],["w-resize","e-resize"],["sw-resize","se-resize"],["nw-resize","ne-resize"]]),L=new RegExp("(^|\\W|_)((ltr)|(rtl)|(left)|(right))(\\W|_|$)","g"),z=new RegExp("(left)|(right)");function F(e){return Object.keys(e).reduce(function(t,r){var i=e[r];if("string"==typeof i&&(i=i.trim()),A(B,r))return t[r]=i,t;var n=j(r,i),o=n.key,s=n.value;return t[o]=s,t},Array.isArray(e)?[]:{})}function j(e,t){var r,i=/\/\*\s?@noflip\s?\*\//.test(t),n=i?e:D[r=e]||r,o=i?t:function(e,t){if(!function(e){return!("boolean"==typeof e||function(e){return null==e}(e))}(t))return t;if((r=t)&&"object"==typeof r)return F(t);var r,i,n=I(t),o=function(e){return"function"==typeof e}(t),s=n||o?t:t.replace(/ !important.*?$/,""),a=!n&&s.length!==t.length,l=P[e];return i=l?l({value:s,valuesToConvert:M,propertiesToConvert:D,isRtl:!0,bgImgDirectionRegex:L,bgPosDirectionRegex:z}):M[s]||s,a?i+" !important":i}(n,t);return{key:n,value:o}}const H="undefined"==typeof window?r.g:window,q="@griffel/";function U(e,t){return H[Symbol.for(q+e)]||(H[Symbol.for(q+e)]=t),H[Symbol.for(q+e)]}const G=U("DEFINITION_LOOKUP_TABLE",{}),W="data-make-styles-bucket",V={all:1,borderColor:1,borderStyle:1,borderWidth:1,borderBlock:1,borderBlockEnd:1,borderBlockStart:1,borderInline:1,borderInlineEnd:1,borderInlineStart:1},K="DO_NOT_USE_DIRECTLY: @griffel/reset-value",$=/[A-Z]/g,Y=/^ms-/,J={};function X(e){return"-"+e.toLowerCase()}function Z(e){if(Object.prototype.hasOwnProperty.call(J,e))return J[e];if("--"===e.substr(0,2))return e;const t=e.replace($,X);return J[e]=Y.test(t)?"-"+t:t}function Q(e){return"&"===e.charAt(0)?e.slice(1):e}var ee="-moz-",te="-webkit-",re="comm",ie="rule",ne="decl",oe="@layer",se=Math.abs,ae=String.fromCharCode,le=Object.assign;function ce(e){return e.trim()}function ue(e,t){return(e=t.exec(e))?e[0]:e}function de(e,t,r){return e.replace(t,r)}function me(e,t,r){return e.indexOf(t,r)}function pe(e,t){return 0|e.charCodeAt(t)}function he(e,t,r){return e.slice(t,r)}function fe(e){return e.length}function ge(e){return e.length}function ve(e,t){return t.push(e),e}function be(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function ye(e,t,r,i){switch(e.type){case oe:if(e.children.length)break;case"@import":case"@namespace":case ne:return e.return=e.return||e.value;case re:return"";case"@keyframes":return e.return=e.value+"{"+be(e.children,i)+"}";case ie:if(!fe(e.value=e.props.join(",")))return""}return fe(r=be(e.children,i))?e.return=e.value+"{"+r+"}":""}var _e=1,xe=1,we=0,Ce=0,ke=0,Te="";function Ee(e,t,r,i,n,o,s,a){return{value:e,root:t,parent:r,type:i,props:n,children:o,line:_e,column:xe,length:s,return:"",siblings:a}}function Se(e,t){return le(Ee("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Ie(){return ke=Ce>0?pe(Te,--Ce):0,xe--,10===ke&&(xe=1,_e--),ke}function Ae(){return ke=Ce<we?pe(Te,Ce++):0,xe++,10===ke&&(xe=1,_e++),ke}function Oe(){return pe(Te,Ce)}function Ne(){return Ce}function Re(e,t){return he(Te,e,t)}function Pe(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function De(e){return _e=xe=1,we=fe(Te=e),Ce=0,[]}function Be(e){return Te="",e}function Me(e){return ce(Re(Ce-1,Fe(91===e?e+2:40===e?e+1:e)))}function Le(e){for(;(ke=Oe())&&ke<33;)Ae();return Pe(e)>2||Pe(ke)>3?"":" "}function ze(e,t){for(;--t&&Ae()&&!(ke<48||ke>102||ke>57&&ke<65||ke>70&&ke<97););return Re(e,Ne()+(t<6&&32==Oe()&&32==Ae()))}function Fe(e){for(;Ae();)switch(ke){case e:return Ce;case 34:case 39:34!==e&&39!==e&&Fe(ke);break;case 40:41===e&&Fe(e);break;case 92:Ae()}return Ce}function je(e,t){for(;Ae()&&e+ke!==57&&(e+ke!==84||47!==Oe()););return"/*"+Re(t,Ce-1)+"*"+ae(47===e?e:Ae())}function He(e){for(;!Pe(Oe());)Ae();return Re(e,Ce)}function qe(e){return Be(Ue("",null,null,null,[""],e=De(e),0,[0],e))}function Ue(e,t,r,i,n,o,s,a,l){for(var c=0,u=0,d=s,m=0,p=0,h=0,f=1,g=1,v=1,b=0,y="",_=n,x=o,w=i,C=y;g;)switch(h=b,b=Ae()){case 40:if(108!=h&&58==pe(C,d-1)){-1!=me(C+=de(Me(b),"&","&\f"),"&\f",se(c?a[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:C+=Me(b);break;case 9:case 10:case 13:case 32:C+=Le(h);break;case 92:C+=ze(Ne()-1,7);continue;case 47:switch(Oe()){case 42:case 47:ve(We(je(Ae(),Ne()),t,r,l),l),5!=Pe(h||1)&&5!=Pe(Oe()||1)||!fe(C)||" "===he(C,-1,void 0)||(C+=" ");break;default:C+="/"}break;case 123*f:a[c++]=fe(C)*v;case 125*f:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:-1==v&&(C=de(C,/\f/g,"")),p>0&&(fe(C)-d||0===f&&47===h)&&ve(p>32?Ve(C+";",i,r,d-1,l):Ve(de(C," ","")+";",i,r,d-2,l),l);break;case 59:C+=";";default:if(ve(w=Ge(C,t,r,c,u,n,a,y,_=[],x=[],d,o),o),123===b)if(0===u)Ue(C,t,w,w,_,o,d,a,x);else{switch(m){case 99:if(110===pe(C,3))break;case 108:if(97===pe(C,2))break;default:u=0;case 100:case 109:case 115:}u?Ue(e,w,w,i&&ve(Ge(e,w,w,0,0,n,a,y,n,_=[],d,x),x),n,x,d,a,i?_:x):Ue(C,w,w,w,[""],x,0,a,x)}}c=u=p=0,f=v=1,y=C="",d=s;break;case 58:d=1+fe(C),p=h;default:if(f<1)if(123==b)--f;else if(125==b&&0==f++&&125==Ie())continue;switch(C+=ae(b),b*f){case 38:v=u>0?1:(C+="\f",-1);break;case 44:a[c++]=(fe(C)-1)*v,v=1;break;case 64:45===Oe()&&(C+=Me(Ae())),m=Oe(),u=d=fe(y=C+=He(Ne())),b++;break;case 45:45===h&&2==fe(C)&&(f=0)}}return o}function Ge(e,t,r,i,n,o,s,a,l,c,u,d){for(var m=n-1,p=0===n?o:[""],h=ge(p),f=0,g=0,v=0;f<i;++f)for(var b=0,y=he(e,m+1,m=se(g=s[f])),_=e;b<h;++b)(_=ce(g>0?p[b]+" "+y:de(y,/&\f/g,p[b])))&&(l[v++]=_);return Ee(e,t,r,0===n?ie:a,l,c,u,d)}function We(e,t,r,i){return Ee(e,t,r,re,ae(ke),he(e,2,-2),0,i)}function Ve(e,t,r,i,n){return Ee(e,t,r,ne,he(e,0,i),he(e,i+1,-1),i,n)}function Ke(e){var t=ge(e);return function(r,i,n,o){for(var s="",a=0;a<t;a++)s+=e[a](r,i,n,o)||"";return s}}function $e(e){return function(t){t.root||(t=t.return)&&e(t)}}const Ye=e=>{if(e.type===ie){if("string"==typeof e.props)return;e.props=e.props.map(e=>-1===e.indexOf(":global(")?e:function(e){return Be(function(e){for(;Ae();)switch(Pe(ke)){case 0:ve(He(Ce-1),e);break;case 2:ve(Me(ke),e);break;default:ve(ae(ke),e)}return e}(De(e)))}(e).reduce((e,t,r,i)=>{if(""===t)return e;if(":"===t&&"global"===i[r+1]){const t=i[r+2].slice(1,-1)+" ";return e.unshift(t),i[r+1]="",i[r+2]="",e}return e.push(t),e},[]).join(""))}};function Je(e,t,r){switch(function(e,t){return 45^pe(e,0)?(((t<<2^pe(e,0))<<2^pe(e,1))<<2^pe(e,2))<<2^pe(e,3):0}(e,t)){case 5103:return te+"print-"+e+e;case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:return te+e+e;case 4215:if(102===pe(e,9))return te+e+e;if(116===pe(e,t+1))return te+e+e;break;case 4789:return ee+e+e;case 5349:case 4246:case 6968:return te+e+ee+e+e;case 6187:if(!ue(e,/grab/))return de(de(de(e,/(zoom-|grab)/,te+"$1"),/(image-set)/,te+"$1"),e,"")+e;case 5495:case 3959:return de(e,/(image-set\([^]*)/,te+"$1$`$1");case 4095:case 3583:case 4068:case 2532:return de(e,/(.+)-inline(.+)/,te+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fe(e)-1-t>6)switch(pe(e,t+1)){case 102:if(108===pe(e,t+3))return de(e,/(.+:)(.+)-([^]+)/,"$1"+te+"$2-$3$1"+ee+(108==pe(e,t+3)?"$3":"$2-$3"))+e;case 115:return~me(e,"stretch")?Je(de(e,"stretch","fill-available"),t)+e:e}}return e}function Xe(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case ne:return void(e.return=Je(e.value,e.length));case ie:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(ue(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return be([Se(e,{props:[de(t,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return be([Se(e,{props:[de(t,/:(plac\w+)/,":"+te+"input-$1")]}),Se(e,{props:[de(t,/:(plac\w+)/,":-moz-$1")]})],i)}return""})}}const Ze=e=>{(function(e){switch(e.type){case"@container":case"@media":case"@supports":case oe:return!0}return!1})(e)&&Array.isArray(e.children)&&e.children.sort((e,t)=>e.props[0]>t.props[0]?1:-1)};const Qe=/,( *[^ &])/g;function et(e,t,r){let i=t;return r.length>0&&(i=r.reduceRight((e,t)=>{return`${r=t,"&"+Q(r.replace(Qe,",&$1"))} { ${e} }`;var r},t)),`${e}{${i}}`}function tt(e,t){const{className:r,selectors:i,property:n,rtlClassName:o,rtlProperty:s,rtlValue:a,value:l}=e,{container:c,layer:u,media:d,supports:m}=t;let p=et(`.${r}`,Array.isArray(l)?`${l.map(e=>`${Z(n)}: ${e}`).join(";")};`:`${Z(n)}: ${l};`,i);return s&&o&&(p+=et(`.${o}`,Array.isArray(a)?`${a.map(e=>`${Z(s)}: ${e}`).join(";")};`:`${Z(s)}: ${a};`,i)),d&&(p=`@media ${d} { ${p} }`),u&&(p=`@layer ${u} { ${p} }`),m&&(p=`@supports ${m} { ${p} }`),c&&(p=`@container ${c} { ${p} }`),function(e){const t=[];return be(qe(e),Ke([Ye,Ze,Xe,ye,$e(e=>t.push(e))])),t}(p)}function rt(e){let t="";for(const r in e){const i=e[r];if("string"!=typeof i&&"number"!=typeof i){if(Array.isArray(i))for(const e of i)t+=Z(r)+":"+e+";"}else t+=Z(r)+":"+i+";"}return t}function it(e){let t="";for(const r in e)t+=`${r}{${rt(e[r])}}`;return t}function nt(e,t){const r=[];return be(qe(`@keyframes ${e} {${t}}`),Ke([ye,Xe,$e(e=>r.push(e))])),r}const ot={animation:[-1,["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimeline","animationTimingFunction"]],animationRange:[-1,["animationRangeEnd","animationRangeStart"]],background:[-2,["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPosition","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"]],backgroundPosition:[-1,["backgroundPositionX","backgroundPositionY"]],border:[-2,["borderBottom","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderTop","borderTopColor","borderTopStyle","borderTopWidth"]],borderBottom:[-1,["borderBottomColor","borderBottomStyle","borderBottomWidth"]],borderImage:[-1,["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"]],borderLeft:[-1,["borderLeftColor","borderLeftStyle","borderLeftWidth"]],borderRadius:[-1,["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"]],borderRight:[-1,["borderRightColor","borderRightStyle","borderRightWidth"]],borderTop:[-1,["borderTopColor","borderTopStyle","borderTopWidth"]],caret:[-1,["caretColor","caretShape"]],columnRule:[-1,["columnRuleColor","columnRuleStyle","columnRuleWidth"]],columns:[-1,["columnCount","columnWidth"]],containIntrinsicSize:[-1,["containIntrinsicHeight","containIntrinsicWidth"]],container:[-1,["containerName","containerType"]],flex:[-1,["flexBasis","flexGrow","flexShrink"]],flexFlow:[-1,["flexDirection","flexWrap"]],font:[-1,["fontFamily","fontSize","fontStretch","fontStyle","fontVariant","fontWeight","lineHeight"]],gap:[-1,["columnGap","rowGap"]],grid:[-1,["columnGap","gridAutoColumns","gridAutoFlow","gridAutoRows","gridColumnGap","gridRowGap","gridTemplateAreas","gridTemplateColumns","gridTemplateRows","rowGap"]],gridArea:[-1,["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"]],gridColumn:[-1,["gridColumnEnd","gridColumnStart"]],gridRow:[-1,["gridRowEnd","gridRowStart"]],gridTemplate:[-1,["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"]],inset:[-1,["bottom","left","right","top"]],insetBlock:[-1,["insetBlockEnd","insetBlockStart"]],insetInline:[-1,["insetInlineEnd","insetInlineStart"]],listStyle:[-1,["listStyleImage","listStylePosition","listStyleType"]],margin:[-1,["marginBottom","marginLeft","marginRight","marginTop"]],marginBlock:[-1,["marginBlockEnd","marginBlockStart"]],marginInline:[-1,["marginInlineEnd","marginInlineStart"]],mask:[-1,["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPosition","maskRepeat","maskSize"]],maskBorder:[-1,["maskBorderMode","maskBorderOutset","maskBorderRepeat","maskBorderSlice","maskBorderSource","maskBorderWidth"]],offset:[-1,["offsetAnchor","offsetDistance","offsetPath","offsetPosition","offsetRotate"]],outline:[-1,["outlineColor","outlineStyle","outlineWidth"]],overflow:[-1,["overflowX","overflowY"]],overscrollBehavior:[-1,["overscrollBehaviorX","overscrollBehaviorY"]],padding:[-1,["paddingBottom","paddingLeft","paddingRight","paddingTop"]],paddingBlock:[-1,["paddingBlockEnd","paddingBlockStart"]],paddingInline:[-1,["paddingInlineEnd","paddingInlineStart"]],placeContent:[-1,["alignContent","justifyContent"]],placeItems:[-1,["alignItems","justifyItems"]],placeSelf:[-1,["alignSelf","justifySelf"]],scrollMargin:[-1,["scrollMarginBottom","scrollMarginLeft","scrollMarginRight","scrollMarginTop"]],scrollMarginBlock:[-1,["scrollMarginBlockEnd","scrollMarginBlockStart"]],scrollMarginInline:[-1,["scrollMarginInlineEnd","scrollMarginInlineStart"]],scrollPadding:[-1,["scrollPaddingBottom","scrollPaddingLeft","scrollPaddingRight","scrollPaddingTop"]],scrollPaddingBlock:[-1,["scrollPaddingBlockEnd","scrollPaddingBlockStart"]],scrollPaddingInline:[-1,["scrollPaddingInlineEnd","scrollPaddingInlineStart"]],scrollTimeline:[-1,["scrollTimelineAxis","scrollTimelineName"]],textDecoration:[-1,["textDecorationColor","textDecorationLine","textDecorationStyle","textDecorationThickness"]],textEmphasis:[-1,["textEmphasisColor","textEmphasisStyle"]],transition:[-1,["transitionBehavior","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"]],viewTimeline:[-1,["viewTimelineAxis","viewTimelineName"]]};function st(e,t){return 0===e.length?t:`${e} and ${t}`}function at(e){return"@media"===e.substr(0,6)}function lt(e){return"@layer"===e.substr(0,6)}const ct=/^(:|\[|>|&)/;function ut(e){return ct.test(e)}function dt(e){return"@supports"===e.substr(0,9)}function mt(e){return"@container"===e.substring(0,10)}function pt(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}const ht={"us-w":"w","us-v":"i",nk:"l",si:"v",cu:"f",ve:"h",ti:"a"};function ft(e,t){if(t.media)return"m";if(t.layer||t.supports)return"t";if(t.container)return"c";if(e.length>0){const t=e[0].trim();if(58===t.charCodeAt(0))return ht[t.slice(4,8)]||ht[t.slice(3,5)]||"d"}return"d"}function gt(e,t){return e?t+e:e}function vt(e){return gt(e.container,"c")+gt(e.media,"m")+gt(e.layer,"l")+gt(e.supports,"s")}function bt(e,t,r){const i=E(e+vt(r)+t),n=i.charCodeAt(0);return n>=48&&n<=57?String.fromCharCode(n+17)+i.slice(1):i}function yt({property:e,selector:t,salt:r,value:i},n){return"f"+E(r+t+vt(n)+e+i.trim())}function _t(e){return e===K}function xt(e){return e.replace(/>\s+/g,">")}function wt(e,t){}function Ct(e,t){}function kt(e){return ot[e]}function Tt(e){var t;return null!==(t=null==e?void 0:e[0])&&void 0!==t?t:0}function Et(e,t,r,i){e[t]=i?[r,i]:r}function St(e,t){return t.length>0?[e,Object.fromEntries(t)]:e}function It(e,t,r,i,n,o){var s;const a=[];0!==o&&a.push(["p",o]),"m"===t&&n&&a.push(["m",n]),null!==(s=e[t])&&void 0!==s||(e[t]=[]),r&&e[t].push(St(r,a)),i&&e[t].push(St(i,a))}function At(e,t="",r=[],i={container:"",layer:"",media:"",supports:""},n={},o={},s){for(const a in e){if(V.hasOwnProperty(a)){Ct(0,e[a]);continue}const l=e[a];if(null!=l){if(_t(l)){Et(n,bt(xt(r.join("")),a,i),0,void 0);continue}if("string"==typeof l||"number"==typeof l){const e=xt(r.join("")),c=kt(a);if(c){const e=c[1],s=Object.fromEntries(e.map(e=>[e,K]));At(s,t,r,i,n,o)}const u=bt(e,a,i),d=yt({value:l.toString(),salt:t,selector:e,property:a},i),m=s&&{key:a,value:s}||j(a,l),p=m.key!==a||m.value!==l,h=p?yt({value:m.value.toString(),property:m.key,salt:t,selector:e},i):void 0,f=p?{rtlClassName:h,rtlProperty:m.key,rtlValue:m.value}:void 0,g=ft(r,i),[v,b]=tt(Object.assign({className:d,selectors:r,property:a,value:l},f),i);Et(n,u,d,h),It(o,g,v,b,i.media,Tt(c))}else if("animationName"===a){const e=Array.isArray(l)?l:[l],s=[],a=[];for(const t of e){const e=it(t),r=it(F(t)),n="f"+E(e);let l;const c=nt(n,e);let u=[];e===r?l=n:(l="f"+E(r),u=nt(l,r));for(let e=0;e<c.length;e++)It(o,"k",c[e],u[e],i.media,0);s.push(n),a.push(l)}At({animationName:s.join(", ")},t,r,i,n,o,a.join(", "))}else if(Array.isArray(l)){if(0===l.length)continue;const e=xt(r.join("")),s=kt(a);if(s){const e=s[1],a=Object.fromEntries(e.map(e=>[e,K]));At(a,t,r,i,n,o)}const c=bt(e,a,i),u=yt({value:l.map(e=>(null!=e?e:"").toString()).join(";"),salt:t,selector:e,property:a},i),d=l.map(e=>j(a,e));if(d.some(e=>e.key!==d[0].key))continue;const m=d[0].key!==a||d.some((e,t)=>e.value!==l[t]),p=m?yt({value:d.map(e=>{var t;return(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"").toString()}).join(";"),salt:t,property:d[0].key,selector:e},i):void 0,h=m?{rtlClassName:p,rtlProperty:d[0].key,rtlValue:d.map(e=>e.value)}:void 0,f=ft(r,i),[g,v]=tt(Object.assign({className:u,selectors:r,property:a,value:l},h),i);Et(n,c,u,p),It(o,f,g,v,i.media,Tt(s))}else if(pt(l))if(ut(a))At(l,t,r.concat(Q(a)),i,n,o);else if(at(a)){const e=st(i.media,a.slice(6).trim());At(l,t,r,Object.assign({},i,{media:e}),n,o)}else if(lt(a)){const e=(i.layer?`${i.layer}.`:"")+a.slice(6).trim();At(l,t,r,Object.assign({},i,{layer:e}),n,o)}else if(dt(a)){const e=st(i.supports,a.slice(9).trim());At(l,t,r,Object.assign({},i,{supports:e}),n,o)}else if(mt(a)){const e=a.slice(10).trim();At(l,t,r,Object.assign({},i,{container:e}),n,o)}else wt()}}return[n,o]}function Ot(e,t,r=[]){return"___"+function(e){const t=e.length;if(7===t)return e;for(let r=t;r<7;r++)e+="0";return e}(E(e+t))}function Nt(e,t){let r="",i="";for(const n in e){const o=e[n];if(0===o){i+=n+" ";continue}const s=Array.isArray(o),a="rtl"===t?(s?o[1]:o)+" ":(s?o[0]:o)+" ";r+=a,i+=a}return[r.slice(0,-1),i.slice(0,-1)]}function Rt(e,t){const r={};for(const i in e){const[n,o]=Nt(e[i],t);if(""===o){r[i]="";continue}const s=Ot(o,t),a=s+(""===n?"":" "+n);G[s]=[e[i],t],r[i]=a}return r}const Pt=C.useInsertionEffect?C.useInsertionEffect:void 0,Dt=()=>{const e={};return function(t,r){Pt&&"undefined"!=typeof window&&window.document&&window.document.createElement?Pt(()=>{t.insertCSSRules(r)},[t,r]):void 0===e[t.id]&&(t.insertCSSRules(r),e[t.id]=!0)}};function Bt(e){return Array.isArray(e)?e:[e]}const Mt=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"].reduce((e,t,r)=>(e[t]=r,e),{});function Lt(e,t,r,i,n={}){var o,s;const a="m"===e,l=null!==(o=n.m)&&void 0!==o?o:"0",c=null!==(s=n.p)&&void 0!==s?s:0,u=function(e,t,r){return("m"===e?e+t:e)+r}(e,l,c);if(!i.stylesheets[u]){const o=t&&t.createElement("style"),s=function(e,t,r,i){const n=[];if(i[W]=t,i["data-priority"]=String(r),e)for(const t in i)e.setAttribute(t,i[t]);return{elementAttributes:i,insertRule:function(t){return(null==e?void 0:e.sheet)?e.sheet.insertRule(t,e.sheet.cssRules.length):n.push(t)},element:e,bucketName:t,cssRules(){return(null==e?void 0:e.sheet)?Array.from(e.sheet.cssRules).map(e=>e.cssText):n}}}(o,e,c,Object.assign({},i.styleElementAttributes,a&&{media:l}));i.stylesheets[u]=s,(null==t?void 0:t.head)&&o&&t.head.insertBefore(o,function(e,t,r,i,n={}){var o,s;const a=Mt[r],l=null!==(o=n.m)&&void 0!==o?o:"",c=null!==(s=n.p)&&void 0!==s?s:0;let u=e=>a-Mt[e.getAttribute(W)],d=e.head.querySelectorAll(`[${W}]`);if("m"===r){const t=e.head.querySelectorAll(`[${W}="${r}"]`);t.length&&(d=t,u=e=>i.compareMediaQueries(l,e.media))}const m=e=>function(e,t,r){var i,n;return t+(null!==(i=r.m)&&void 0!==i?i:"")===e.getAttribute(W)+(null!==(n=e.media)&&void 0!==n?n:"")}(e,r,n)?c-Number(e.getAttribute("data-priority")):u(e),p=d.length;let h=p-1;for(;h>=0;){const e=d.item(h);if(m(e)>0)return e.nextSibling;h--}return p>0?d.item(0):t?t.nextSibling:null}(t,r,e,i,n))}return i.stylesheets[u]}function zt(e,t){try{e.insertRule(t)}catch(e){}}let Ft=0;const jt=(e,t)=>e<t?-1:e>t?1:0;function Ht(e=("undefined"==typeof document?void 0:document),t={}){const{classNameHashSalt:r,unstable_filterCSSRule:i,insertionPoint:n,styleElementAttributes:o,compareMediaQueries:s=jt}=t,a={classNameHashSalt:r,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(o),compareMediaQueries:s,id:"d"+Ft++,insertCSSRules(t){for(const r in t){const o=t[r];for(let t=0,s=o.length;t<s;t++){const[s,l]=Bt(o[t]),c=Lt(r,e,n||null,a,l);a.insertionCache[s]||(a.insertionCache[s]=r,i?i(s)&&zt(c,s):zt(c,s))}}}};return a}const qt=w.createContext(Ht());function Ut(){return w.useContext(qt)}const Gt=w.createContext("ltr"),Wt=({children:e,dir:t})=>w.createElement(Gt.Provider,{value:t},e);function Vt(){return w.useContext(Gt)}function Kt(e){const t=function(e,t=T){const r=t();let i=null,n=null,o=null,s=null;return function(t){const{dir:a,renderer:l}=t;null===i&&([i,n]=function(e,t=""){const r={},i={};for(const n in e){const o=e[n],[s,a]=At(o,t);r[n]=s,Object.keys(a).forEach(e=>{i[e]=(i[e]||[]).concat(a[e])})}return[r,i]}(e,l.classNameHashSalt));const c="ltr"===a;return c?null===o&&(o=Rt(i,a)):null===s&&(s=Rt(i,a)),r(l,n),c?o:s}}(e,Dt);return function(){const e=Vt(),r=Ut();return t({dir:e,renderer:r})}}var $t="undefined"!=typeof WeakRef,Yt=class{constructor(e){$t&&"object"==typeof e?this._weakRef=new WeakRef(e):this._instance=e}deref(){var e,t;let r;return this._weakRef?(r=null==(e=this._weakRef)?void 0:e.deref(),r||delete this._weakRef):(r=this._instance,(null==(t=null==r?void 0:r.isDisposed)?void 0:t.call(r))&&delete this._instance),r}},Jt="keyborg:focusin",Xt="keyborg:focusout",Zt=!1;function Qt(e){const t=e.focus;t.__keyborgNativeFocus?t.__keyborgNativeFocus.call(e):e.focus()}var er=0,tr=class{constructor(e,t){this._isNavigatingWithKeyboard_DO_NOT_USE=!1,this._onFocusIn=e=>{if(this._isMouseOrTouchUsedTimer)return;if(this.isNavigatingWithKeyboard)return;const t=e.detail;t.relatedTarget&&(t.isFocusedProgrammatically||void 0===t.isFocusedProgrammatically||(this.isNavigatingWithKeyboard=!0))},this._onMouseDown=e=>{0===e.buttons||0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY||this._onMouseOrTouch()},this._onMouseOrTouch=()=>{const e=this._win;e&&(this._isMouseOrTouchUsedTimer&&e.clearTimeout(this._isMouseOrTouchUsedTimer),this._isMouseOrTouchUsedTimer=e.setTimeout(()=>{delete this._isMouseOrTouchUsedTimer},1e3)),this.isNavigatingWithKeyboard=!1},this._onKeyDown=e=>{this.isNavigatingWithKeyboard?this._shouldDismissKeyboardNavigation(e)&&this._scheduleDismiss():this._shouldTriggerKeyboardNavigation(e)&&(this.isNavigatingWithKeyboard=!0)},this.id="c"+ ++er,this._win=e;const r=e.document;if(t){const e=t.triggerKeys,r=t.dismissKeys;(null==e?void 0:e.length)&&(this._triggerKeys=new Set(e)),(null==r?void 0:r.length)&&(this._dismissKeys=new Set(r))}r.addEventListener(Jt,this._onFocusIn,!0),r.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("keydown",this._onKeyDown,!0),r.addEventListener("touchstart",this._onMouseOrTouch,!0),r.addEventListener("touchend",this._onMouseOrTouch,!0),r.addEventListener("touchcancel",this._onMouseOrTouch,!0),function(e){const t=e;Zt||(Zt=function(e){const t=e.HTMLElement,r=t.prototype.focus;let i=!1;return t.prototype.focus=function(){i=!0},e.document.createElement("button").focus(),t.prototype.focus=r,i}(t));const r=t.HTMLElement.prototype.focus;if(r.__keyborgNativeFocus)return;t.HTMLElement.prototype.focus=l;const i=new Set,n=e=>{const t=e.target;if(!t)return;const r=new CustomEvent(Xt,{cancelable:!0,bubbles:!0,composed:!0,detail:{originalEvent:e}});t.dispatchEvent(r)},o=e=>{const t=e.target;if(!t)return;let r=e.composedPath()[0];const a=new Set;for(;r;)r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?(a.add(r),r=r.host):r=r.parentNode;for(const e of i){const t=e.deref();t&&a.has(t)||(i.delete(e),t&&(t.removeEventListener("focusin",o,!0),t.removeEventListener("focusout",n,!0)))}s(t,e.relatedTarget||void 0)},s=(e,t,r)=>{var s;const l=e.shadowRoot;if(l){for(const e of i)if(e.deref()===l)return;return l.addEventListener("focusin",o,!0),l.addEventListener("focusout",n,!0),void i.add(new Yt(l))}const c={relatedTarget:t,originalEvent:r},u=new CustomEvent(Jt,{cancelable:!0,bubbles:!0,composed:!0,detail:c});u.details=c,(Zt||a.lastFocusedProgrammatically)&&(c.isFocusedProgrammatically=e===(null==(s=a.lastFocusedProgrammatically)?void 0:s.deref()),a.lastFocusedProgrammatically=void 0),e.dispatchEvent(u)},a=t.__keyborgData={focusInHandler:o,focusOutHandler:n,shadowTargets:i};function l(){const e=t.__keyborgData;return e&&(e.lastFocusedProgrammatically=new Yt(this)),r.apply(this,arguments)}t.document.addEventListener("focusin",t.__keyborgData.focusInHandler,!0),t.document.addEventListener("focusout",t.__keyborgData.focusOutHandler,!0);let c=t.document.activeElement;for(;c&&c.shadowRoot;)s(c),c=c.shadowRoot.activeElement;l.__keyborgNativeFocus=r}(e)}get isNavigatingWithKeyboard(){return this._isNavigatingWithKeyboard_DO_NOT_USE}set isNavigatingWithKeyboard(e){this._isNavigatingWithKeyboard_DO_NOT_USE!==e&&(this._isNavigatingWithKeyboard_DO_NOT_USE=e,this.update())}dispose(){const e=this._win;if(e){this._isMouseOrTouchUsedTimer&&(e.clearTimeout(this._isMouseOrTouchUsedTimer),this._isMouseOrTouchUsedTimer=void 0),this._dismissTimer&&(e.clearTimeout(this._dismissTimer),this._dismissTimer=void 0),function(e){const t=e,r=t.HTMLElement.prototype,i=r.focus.__keyborgNativeFocus,n=t.__keyborgData;if(n){t.document.removeEventListener("focusin",n.focusInHandler,!0),t.document.removeEventListener("focusout",n.focusOutHandler,!0);for(const e of n.shadowTargets){const t=e.deref();t&&(t.removeEventListener("focusin",n.focusInHandler,!0),t.removeEventListener("focusout",n.focusOutHandler,!0))}n.shadowTargets.clear(),delete t.__keyborgData}i&&(r.focus=i)}(e);const t=e.document;t.removeEventListener(Jt,this._onFocusIn,!0),t.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("keydown",this._onKeyDown,!0),t.removeEventListener("touchstart",this._onMouseOrTouch,!0),t.removeEventListener("touchend",this._onMouseOrTouch,!0),t.removeEventListener("touchcancel",this._onMouseOrTouch,!0),delete this._win}}isDisposed(){return!!this._win}update(){var e,t;const r=null==(t=null==(e=this._win)?void 0:e.__keyborg)?void 0:t.refs;if(r)for(const e of Object.keys(r))rr.update(r[e],this.isNavigatingWithKeyboard)}_shouldTriggerKeyboardNavigation(e){var t;if("Tab"===e.key)return!0;const r=null==(t=this._win)?void 0:t.document.activeElement,i=!this._triggerKeys||this._triggerKeys.has(e.keyCode),n=r&&("INPUT"===r.tagName||"TEXTAREA"===r.tagName||r.isContentEditable);return i&&!n}_shouldDismissKeyboardNavigation(e){var t;return null==(t=this._dismissKeys)?void 0:t.has(e.keyCode)}_scheduleDismiss(){const e=this._win;if(e){this._dismissTimer&&(e.clearTimeout(this._dismissTimer),this._dismissTimer=void 0);const t=e.document.activeElement;this._dismissTimer=e.setTimeout(()=>{this._dismissTimer=void 0;const r=e.document.activeElement;t&&r&&t===r&&(this.isNavigatingWithKeyboard=!1)},500)}}},rr=class e{constructor(e,t){this._cb=[],this._id="k"+ ++er,this._win=e;const r=e.__keyborg;r?(this._core=r.core,r.refs[this._id]=this):(this._core=new tr(e,t),e.__keyborg={core:this._core,refs:{[this._id]:this}})}static create(t,r){return new e(t,r)}static dispose(e){e.dispose()}static update(e,t){e._cb.forEach(e=>e(t))}dispose(){var e;const t=null==(e=this._win)?void 0:e.__keyborg;(null==t?void 0:t.refs[this._id])&&(delete t.refs[this._id],0===Object.keys(t.refs).length&&(t.core.dispose(),delete this._win.__keyborg)),this._cb=[],delete this._core,delete this._win}isNavigatingWithKeyboard(){var e;return!!(null==(e=this._core)?void 0:e.isNavigatingWithKeyboard)}subscribe(e){this._cb.push(e)}unsubscribe(e){const t=this._cb.indexOf(e);t>=0&&this._cb.splice(t,1)}setVal(e){this._core&&(this._core.isNavigatingWithKeyboard=e)}};function ir(e,t){return rr.create(e,t)}function nr(e){rr.dispose(e)}const or="data-tabster",sr=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]","details > summary","audio[controls]","video[controls]"].join(", "),ar=1,lr=2,cr=3;function ur(e,t){var r;return null===(r=e.storageEntry(t))||void 0===r?void 0:r.tabster}function dr(e,t,r){var i,n;const o=r||e._noop?void 0:t.getAttribute(or);let s,a=e.storageEntry(t);if(o){if(o===(null===(i=null==a?void 0:a.attr)||void 0===i?void 0:i.string))return;try{const e=JSON.parse(o);if("object"!=typeof e)throw new Error(`Value is not a JSON object, got '${o}'.`);s={string:o,object:e}}catch(e){}}else if(!a)return;a||(a=e.storageEntry(t,!0)),a.tabster||(a.tabster={});const l=a.tabster||{},c=(null===(n=a.attr)||void 0===n?void 0:n.object)||{},u=(null==s?void 0:s.object)||{};for(const r of Object.keys(c))if(!u[r]){if("root"===r){const t=l[r];t&&e.root.onRoot(t,!0)}switch(r){case"deloser":case"root":case"groupper":case"modalizer":case"restorer":case"mover":const i=l[r];i&&(i.dispose(),delete l[r]);break;case"observed":delete l[r],e.observedElement&&e.observedElement.onObservedElementUpdate(t);break;case"focusable":case"outline":case"uncontrolled":case"sys":delete l[r]}}for(const r of Object.keys(u)){const i=u.sys;switch(r){case"deloser":l.deloser?l.deloser.setProps(u.deloser):e.deloser&&(l.deloser=e.deloser.createDeloser(t,u.deloser));break;case"root":l.root?l.root.setProps(u.root):l.root=e.root.createRoot(t,u.root,i),e.root.onRoot(l.root);break;case"modalizer":l.modalizer?l.modalizer.setProps(u.modalizer):e.modalizer&&(l.modalizer=e.modalizer.createModalizer(t,u.modalizer,i));break;case"restorer":l.restorer?l.restorer.setProps(u.restorer):e.restorer&&u.restorer&&(l.restorer=e.restorer.createRestorer(t,u.restorer));break;case"focusable":l.focusable=u.focusable;break;case"groupper":l.groupper?l.groupper.setProps(u.groupper):e.groupper&&(l.groupper=e.groupper.createGroupper(t,u.groupper,i));break;case"mover":l.mover?l.mover.setProps(u.mover):e.mover&&(l.mover=e.mover.createMover(t,u.mover,i));break;case"observed":e.observedElement&&(l.observed=u.observed,e.observedElement.onObservedElementUpdate(t));break;case"uncontrolled":l.uncontrolled=u.uncontrolled;break;case"outline":e.outline&&(l.outline=u.outline);break;case"sys":l.sys=u.sys;break;default:console.error(`Unknown key '${r}' in data-tabster attribute value.`)}}s?a.attr=s:(0===Object.keys(l).length&&(delete a.tabster,delete a.attr),e.storageEntry(t,!1))}const mr="tabster:mover:movefocus",pr="tabster:mover:memorized-element",hr="undefined"!=typeof CustomEvent?CustomEvent:function(){};class fr extends hr{constructor(e,t){super(e,{bubbles:!0,cancelable:!0,composed:!0,detail:t}),this.details=t}}class gr extends fr{constructor(e){super("tabster:focusin",e)}}class vr extends fr{constructor(e){super("tabster:focusout",e)}}class br extends fr{constructor(e){super("tabster:movefocus",e)}}class yr extends fr{constructor(e){super("tabster:mover:state",e)}}class _r extends fr{constructor(e){super("tabster:root:focus",e)}}class xr extends fr{constructor(e){super("tabster:root:blur",e)}}const wr={createMutationObserver:e=>new MutationObserver(e),createTreeWalker:(e,t,r,i)=>e.createTreeWalker(t,r,i),getParentNode:e=>e?e.parentNode:null,getParentElement:e=>e?e.parentElement:null,nodeContains:(e,t)=>!(!t||!(null==e?void 0:e.contains(t))),getActiveElement:e=>e.activeElement,querySelector:(e,t)=>e.querySelector(t),querySelectorAll:(e,t)=>Array.prototype.slice.call(e.querySelectorAll(t),0),getElementById:(e,t)=>e.getElementById(t),getFirstChild:e=>(null==e?void 0:e.firstChild)||null,getLastChild:e=>(null==e?void 0:e.lastChild)||null,getNextSibling:e=>(null==e?void 0:e.nextSibling)||null,getPreviousSibling:e=>(null==e?void 0:e.previousSibling)||null,getFirstElementChild:e=>(null==e?void 0:e.firstElementChild)||null,getLastElementChild:e=>(null==e?void 0:e.lastElementChild)||null,getNextElementSibling:e=>(null==e?void 0:e.nextElementSibling)||null,getPreviousElementSibling:e=>(null==e?void 0:e.previousElementSibling)||null,appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,r)=>e.insertBefore(t,r),getSelection:e=>{var t;return(null===(t=e.ownerDocument)||void 0===t?void 0:t.getSelection())||null},getElementsByName:(e,t)=>e.ownerDocument.getElementsByName(t)};let Cr;const kr="undefined"!=typeof DOMRect?DOMRect:class{constructor(e,t,r,i){this.left=e||0,this.top=t||0,this.right=(e||0)+(r||0),this.bottom=(t||0)+(i||0)}};let Tr=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),Cr=!1}catch(e){Cr=!0}function Er(e){const t=e();let r=t.__tabsterInstanceContext;return r||(r={elementByUId:{},basics:{Promise:t.Promise||void 0,WeakRef:t.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},t.__tabsterInstanceContext=r),r}class Sr{constructor(e){this._target=e}deref(){return this._target}static cleanup(e,t){return!e._target||!(!t&&zr(e._target.ownerDocument,e._target))&&(delete e._target,!0)}}class Ir{constructor(e,t,r){const i=Er(e);let n;i.WeakRef?n=new i.WeakRef(t):(n=new Sr(t),i.fakeWeakRefs.push(n)),this._ref=n,this._data=r}get(){const e=this._ref;let t;return e&&(t=e.deref(),t||delete this._ref),t}getData(){return this._data}}function Ar(e,t){const r=Er(e);r.fakeWeakRefs=r.fakeWeakRefs.filter(e=>!Sr.cleanup(e,t))}function Or(e){const t=Er(e);t.fakeWeakRefsStarted||(t.fakeWeakRefsStarted=!0,t.WeakRef=function(e){return e.basics.WeakRef}(t)),t.fakeWeakRefsTimer||(t.fakeWeakRefsTimer=e().setTimeout(()=>{t.fakeWeakRefsTimer=void 0,Ar(e),Or(e)},12e4))}function Nr(e,t,r){if(t.nodeType!==Node.ELEMENT_NODE)return;const i=Cr?r:{acceptNode:r};return wr.createTreeWalker(e,t,NodeFilter.SHOW_ELEMENT,i,!1)}function Rr(e,t){let r=t.__tabsterCacheId;const i=Er(e),n=r?i.containerBoundingRectCache[r]:void 0;if(n)return n.rect;const o=t.ownerDocument&&t.ownerDocument.documentElement;if(!o)return new kr;let s=0,a=0,l=o.clientWidth,c=o.clientHeight;if(t!==o){const e=t.getBoundingClientRect();s=Math.max(s,e.left),a=Math.max(a,e.top),l=Math.min(l,e.right),c=Math.min(c,e.bottom)}const u=new kr(s<l?s:-1,a<c?a:-1,s<l?l-s:0,a<c?c-a:0);return r||(r="r-"+ ++i.lastContainerBoundingRectCacheId,t.__tabsterCacheId=r),i.containerBoundingRectCache[r]={rect:u,element:t},i.containerBoundingRectCacheTimer||(i.containerBoundingRectCacheTimer=window.setTimeout(()=>{i.containerBoundingRectCacheTimer=void 0;for(const e of Object.keys(i.containerBoundingRectCache))delete i.containerBoundingRectCache[e].element.__tabsterCacheId;i.containerBoundingRectCache={}},50)),u}function Pr(e,t,r){const i=Dr(t);if(!i)return!1;const n=Rr(e,i),o=t.getBoundingClientRect(),s=o.height*(1-r),a=Math.max(0,n.top-o.top)+Math.max(0,o.bottom-n.bottom);return 0===a||a<=s}function Dr(e){const t=e.ownerDocument;if(t){for(let t=wr.getParentElement(e);t;t=wr.getParentElement(t))if(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)return t;return t.documentElement}return null}function Br(e){return!!e.__shouldIgnoreFocus}function Mr(e,t){const r=Er(e);let i=t.__tabsterElementUID;return i||(i=t.__tabsterElementUID=function(e){const t=new Uint32Array(4);if(e.crypto&&e.crypto.getRandomValues)e.crypto.getRandomValues(t);else if(e.msCrypto&&e.msCrypto.getRandomValues)e.msCrypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=4294967295*Math.random();const r=[];for(let e=0;e<t.length;e++)r.push(t[e].toString(36));return r.push("|"),r.push((++Tr).toString(36)),r.push("|"),r.push(Date.now().toString(36)),r.join("")}(e())),!r.elementByUId[i]&&zr(t.ownerDocument,t)&&(r.elementByUId[i]=new Ir(e,t)),i}function Lr(e,t){const r=Er(e);for(const e of Object.keys(r.elementByUId)){const i=r.elementByUId[e],n=i&&i.get();n&&t&&!wr.nodeContains(t,n)||delete r.elementByUId[e]}}function zr(e,t){return wr.nodeContains(null==e?void 0:e.body,t)}function Fr(e,t){const r=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector;return r&&r.call(e,t)}let jr=0;class Hr{constructor(e,t,r){const i=e.getWindow;this._tabster=e,this._element=new Ir(i,t),this._props={...r},this.id="i"+ ++jr}getElement(){return this._element.get()}getProps(){return this._props}setProps(e){this._props={...e}}}class qr{constructor(e,t,r,i,n){var o;this._focusIn=e=>{if(this._fixedTarget){const e=this._fixedTarget.get();return void(e&&Qt(e))}const t=this.input;if(this.onFocusIn&&t){const r=e.relatedTarget;this.onFocusIn(this,this._isBackward(!0,t,r),r)}},this._focusOut=e=>{if(this._fixedTarget)return;this.useDefaultAction=!1;const t=this.input;if(this.onFocusOut&&t){const r=e.relatedTarget;this.onFocusOut(this,this._isBackward(!1,t,r),r)}};const s=e(),a=s.document.createElement("i");a.tabIndex=0,a.setAttribute("role","none"),a.setAttribute("data-tabster-dummy",""),a.setAttribute("aria-hidden","true");const l=a.style;l.position="fixed",l.width=l.height="1px",l.opacity="0.001",l.zIndex="-1",l.setProperty("content-visibility","hidden"),function(e){e.__shouldIgnoreFocus=!0}(a),this.input=a,this.isFirst=r.isFirst,this.isOutside=t,this._isPhantom=null!==(o=r.isPhantom)&&void 0!==o&&o,this._fixedTarget=n,a.addEventListener("focusin",this._focusIn),a.addEventListener("focusout",this._focusOut),a.__tabsterDummyContainer=i,this._isPhantom&&(this._disposeTimer=s.setTimeout(()=>{delete this._disposeTimer,this.dispose()},0),this._clearDisposeTimeout=()=>{this._disposeTimer&&(s.clearTimeout(this._disposeTimer),delete this._disposeTimer),delete this._clearDisposeTimeout})}dispose(){var e;this._clearDisposeTimeout&&this._clearDisposeTimeout();const t=this.input;t&&(delete this._fixedTarget,delete this.onFocusIn,delete this.onFocusOut,delete this.input,t.removeEventListener("focusin",this._focusIn),t.removeEventListener("focusout",this._focusOut),delete t.__tabsterDummyContainer,null===(e=wr.getParentNode(t))||void 0===e||e.removeChild(t))}setTopLeft(e,t){var r;const i=null===(r=this.input)||void 0===r?void 0:r.style;i&&(i.top=`${e}px`,i.left=`${t}px`)}_isBackward(e,t,r){return e&&!r?!this.isFirst:!!(r&&t.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING)}}class Ur{constructor(e,t,r,i,n,o){this._element=t,this._instance=new Wr(e,t,this,r,i,n,o)}_setHandlers(e,t){this._onFocusIn=e,this._onFocusOut=t}moveOut(e){var t;null===(t=this._instance)||void 0===t||t.moveOut(e)}moveOutWithDefaultAction(e,t){var r;null===(r=this._instance)||void 0===r||r.moveOutWithDefaultAction(e,t)}getHandler(e){return e?this._onFocusIn:this._onFocusOut}setTabbable(e){var t;null===(t=this._instance)||void 0===t||t.setTabbable(this,e)}dispose(){this._instance&&(this._instance.dispose(this),delete this._instance),delete this._onFocusIn,delete this._onFocusOut}static moveWithPhantomDummy(e,t,r,i,n){const o=new qr(e.getWindow,!0,{isPhantom:!0,isFirst:!0}).input;if(o){let s,a;if("BODY"===t.tagName)s=t,a=r&&i||!r&&!i?wr.getFirstElementChild(t):null;else{let n,o;r&&(!i||i&&!e.focusable.isFocusable(t,!1,!0,!0))?(s=t,a=i?t.firstElementChild:null):(s=wr.getParentElement(t),a=r&&i||!r&&!i?t:wr.getNextElementSibling(t));do{n=r&&i||!r&&!i?wr.getPreviousElementSibling(a):a,o=$r(n),o===t?a=r&&i||!r&&!i?n:wr.getNextElementSibling(n):o=null}while(o)}(null==s?void 0:s.dispatchEvent(new br({by:"root",owner:s,next:null,relatedEvent:n})))&&(wr.insertBefore(s,o,a),Qt(o))}}static addPhantomDummyWithTarget(e,t,r,i){const n=new qr(e.getWindow,!0,{isPhantom:!0,isFirst:!0},void 0,new Ir(e.getWindow,i)).input;if(n){let e,i;t.querySelector(sr)&&!r?(e=t,i=wr.getFirstElementChild(t)):(e=wr.getParentElement(t),i=r?t:wr.getNextElementSibling(t)),e&&wr.insertBefore(e,n,i)}}}class Gr{constructor(e){this._updateQueue=new Set,this._lastUpdateQueueTime=0,this._changedParents=new WeakSet,this._dummyElements=[],this._dummyCallbacks=new WeakMap,this._domChanged=e=>{var t;this._changedParents.has(e)||(this._changedParents.add(e),this._updateDummyInputsTimer||(this._updateDummyInputsTimer=null===(t=this._win)||void 0===t?void 0:t.call(this).setTimeout(()=>{delete this._updateDummyInputsTimer;for(const e of this._dummyElements){const t=e.get();if(t){const e=this._dummyCallbacks.get(t);if(e){const r=wr.getParentNode(t);r&&!this._changedParents.has(r)||e()}}}this._changedParents=new WeakSet},100)))},this._win=e}add(e,t){!this._dummyCallbacks.has(e)&&this._win&&(this._dummyElements.push(new Ir(this._win,e)),this._dummyCallbacks.set(e,t),this.domChanged=this._domChanged)}remove(e){this._dummyElements=this._dummyElements.filter(t=>{const r=t.get();return r&&r!==e}),this._dummyCallbacks.delete(e),0===this._dummyElements.length&&delete this.domChanged}dispose(){var e;const t=null===(e=this._win)||void 0===e?void 0:e.call(this);this._updateTimer&&(null==t||t.clearTimeout(this._updateTimer),delete this._updateTimer),this._updateDummyInputsTimer&&(null==t||t.clearTimeout(this._updateDummyInputsTimer),delete this._updateDummyInputsTimer),this._changedParents=new WeakSet,this._dummyCallbacks=new WeakMap,this._dummyElements=[],this._updateQueue.clear(),delete this.domChanged,delete this._win}updatePositions(e){this._win&&(this._updateQueue.add(e),this._lastUpdateQueueTime=Date.now(),this._scheduledUpdatePositions())}_scheduledUpdatePositions(){var e;this._updateTimer||(this._updateTimer=null===(e=this._win)||void 0===e?void 0:e.call(this).setTimeout(()=>{if(delete this._updateTimer,this._lastUpdateQueueTime+100<=Date.now()){const e=new Map,t=[];for(const r of this._updateQueue)t.push(r(e));this._updateQueue.clear();for(const e of t)e();e.clear()}else this._scheduledUpdatePositions()},100))}}class Wr{constructor(e,t,r,i,n,o,s){this._wrappers=[],this._isOutside=!1,this._transformElements=new Set,this._onFocusIn=(e,t,r)=>{this._onFocus(!0,e,t,r)},this._onFocusOut=(e,t,r)=>{this._onFocus(!1,e,t,r)},this.moveOut=e=>{var t;const r=this._firstDummy,i=this._lastDummy;if(r&&i){this._ensurePosition();const n=r.input,o=i.input,s=null===(t=this._element)||void 0===t?void 0:t.get();if(n&&o&&s){let t;e?(n.tabIndex=0,t=n):(o.tabIndex=0,t=o),t&&Qt(t)}}},this.moveOutWithDefaultAction=(e,t)=>{var r;const i=this._firstDummy,n=this._lastDummy;if(i&&n){this._ensurePosition();const o=i.input,s=n.input,a=null===(r=this._element)||void 0===r?void 0:r.get();if(o&&s&&a){let r;e?!i.isOutside&&this._tabster.focusable.isFocusable(a,!0,!0,!0)?r=a:(i.useDefaultAction=!0,o.tabIndex=0,r=o):(n.useDefaultAction=!0,s.tabIndex=0,r=s),r&&a.dispatchEvent(new br({by:"root",owner:a,next:null,relatedEvent:t}))&&Qt(r)}}},this.setTabbable=(e,t)=>{var r,i;for(const r of this._wrappers)if(r.manager===e){r.tabbable=t;break}const n=this._getCurrent();if(n){const e=n.tabbable?0:-1;let t=null===(r=this._firstDummy)||void 0===r?void 0:r.input;t&&(t.tabIndex=e),t=null===(i=this._lastDummy)||void 0===i?void 0:i.input,t&&(t.tabIndex=e)}},this._addDummyInputs=()=>{this._addTimer||(this._addTimer=this._getWindow().setTimeout(()=>{delete this._addTimer,this._ensurePosition(),this._addTransformOffsets()},0))},this._addTransformOffsets=()=>{this._tabster._dummyObserver.updatePositions(this._computeTransformOffsets)},this._computeTransformOffsets=e=>{var t,r;const i=(null===(t=this._firstDummy)||void 0===t?void 0:t.input)||(null===(r=this._lastDummy)||void 0===r?void 0:r.input),n=this._transformElements,o=new Set;let s=0,a=0;const l=this._getWindow();for(let t=i;t&&t.nodeType===Node.ELEMENT_NODE;t=wr.getParentElement(t)){let r=e.get(t);if(void 0===r){const i=l.getComputedStyle(t).transform;i&&"none"!==i&&(r={scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),e.set(t,r||null)}r&&(o.add(t),n.has(t)||t.addEventListener("scroll",this._addTransformOffsets),s+=r.scrollTop,a+=r.scrollLeft)}for(const e of n)o.has(e)||e.removeEventListener("scroll",this._addTransformOffsets);return this._transformElements=o,()=>{var e,t;null===(e=this._firstDummy)||void 0===e||e.setTopLeft(s,a),null===(t=this._lastDummy)||void 0===t||t.setTopLeft(s,a)}};const a=t.get();if(!a)throw new Error("No element");this._tabster=e,this._getWindow=e.getWindow,this._callForDefaultAction=s;const l=a.__tabsterDummy;if((l||this)._wrappers.push({manager:r,priority:i,tabbable:!0}),l)return l;a.__tabsterDummy=this;const c=null==n?void 0:n.dummyInputsPosition,u=a.tagName;this._isOutside=c?2===c:(o||"UL"===u||"OL"===u||"TABLE"===u)&&!("LI"===u||"TD"===u||"TH"===u),this._firstDummy=new qr(this._getWindow,this._isOutside,{isFirst:!0},t),this._lastDummy=new qr(this._getWindow,this._isOutside,{isFirst:!1},t);const d=this._firstDummy.input;d&&e._dummyObserver.add(d,this._addDummyInputs),this._firstDummy.onFocusIn=this._onFocusIn,this._firstDummy.onFocusOut=this._onFocusOut,this._lastDummy.onFocusIn=this._onFocusIn,this._lastDummy.onFocusOut=this._onFocusOut,this._element=t,this._addDummyInputs()}dispose(e,t){var r,i,n,o;if(0===(this._wrappers=this._wrappers.filter(r=>r.manager!==e&&!t)).length){delete(null===(r=this._element)||void 0===r?void 0:r.get()).__tabsterDummy;for(const e of this._transformElements)e.removeEventListener("scroll",this._addTransformOffsets);this._transformElements.clear();const e=this._getWindow();this._addTimer&&(e.clearTimeout(this._addTimer),delete this._addTimer);const t=null===(i=this._firstDummy)||void 0===i?void 0:i.input;t&&this._tabster._dummyObserver.remove(t),null===(n=this._firstDummy)||void 0===n||n.dispose(),null===(o=this._lastDummy)||void 0===o||o.dispose()}}_onFocus(e,t,r,i){var n;const o=this._getCurrent();!o||t.useDefaultAction&&!this._callForDefaultAction||null===(n=o.manager.getHandler(e))||void 0===n||n(t,r,i)}_getCurrent(){return this._wrappers.sort((e,t)=>e.tabbable!==t.tabbable?e.tabbable?-1:1:e.priority-t.priority),this._wrappers[0]}_ensurePosition(){var e,t,r;const i=null===(e=this._element)||void 0===e?void 0:e.get(),n=null===(t=this._firstDummy)||void 0===t?void 0:t.input,o=null===(r=this._lastDummy)||void 0===r?void 0:r.input;if(i&&n&&o)if(this._isOutside){const e=wr.getParentNode(i);if(e){const t=wr.getNextSibling(i);t!==o&&wr.insertBefore(e,o,t),wr.getPreviousElementSibling(i)!==n&&wr.insertBefore(e,n,i)}}else{wr.getLastElementChild(i)!==o&&wr.appendChild(i,o);const e=wr.getFirstElementChild(i);e&&e!==n&&e.parentNode&&wr.insertBefore(e.parentNode,n,e)}}}function Vr(e){let t=null;for(let r=wr.getLastElementChild(e);r;r=wr.getLastElementChild(r))t=r;return t||void 0}function Kr(e){return"INPUT"===e.tagName&&!!e.name&&"radio"===e.type}function $r(e){var t;return(null===(t=null==e?void 0:e.__tabsterDummyContainer)||void 0===t?void 0:t.get())||null}function Yr(e,t){const r=JSON.stringify(e);return!0===t?r:{[or]:r}}class Jr extends Ur{constructor(e,t,r,i){super(e,t,1,i,void 0,!0),this._onDummyInputFocus=e=>{var t;if(e.useDefaultAction)this._setFocused(!1);else{this._tabster.keyboardNavigation.setNavigatingWithKeyboard(!0);const r=this._element.get();if(r){this._setFocused(!0);const t=this._tabster.focusedElement.getFirstOrLastTabbable(e.isFirst,{container:r,ignoreAccessibility:!0});if(t)return void Qt(t)}null===(t=e.input)||void 0===t||t.blur()}},this._setHandlers(this._onDummyInputFocus),this._tabster=e,this._setFocused=r}}class Xr extends Hr{constructor(e,t,r,i,n){super(e,t,i),this._isFocused=!1,this._setFocused=e=>{var t;if(this._setFocusedTimer&&(this._tabster.getWindow().clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._isFocused===e)return;const r=this._element.get();r&&(e?(this._isFocused=!0,null===(t=this._dummyManager)||void 0===t||t.setTabbable(!1),r.dispatchEvent(new _r({element:r}))):this._setFocusedTimer=this._tabster.getWindow().setTimeout(()=>{var e;delete this._setFocusedTimer,this._isFocused=!1,null===(e=this._dummyManager)||void 0===e||e.setTabbable(!0),r.dispatchEvent(new xr({element:r}))},0))},this._onFocusIn=e=>{const t=this._tabster.getParent,r=this._element.get();let i=e.composedPath()[0];do{if(i===r)return void this._setFocused(!0);i=i&&t(i)}while(i)},this._onFocusOut=()=>{this._setFocused(!1)},this._onDispose=r;const o=e.getWindow;this.uid=Mr(o,t),this._sys=n,(e.controlTab||e.rootDummyInputs)&&this.addDummyInputs();const s=o().document;s.addEventListener(Jt,this._onFocusIn),s.addEventListener(Xt,this._onFocusOut),this._add()}addDummyInputs(){this._dummyManager||(this._dummyManager=new Jr(this._tabster,this._element,this._setFocused,this._sys))}dispose(){var e;this._onDispose(this);const t=this._tabster.getWindow(),r=t.document;r.removeEventListener(Jt,this._onFocusIn),r.removeEventListener(Xt,this._onFocusOut),this._setFocusedTimer&&(t.clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),null===(e=this._dummyManager)||void 0===e||e.dispose(),this._remove()}moveOutWithDefaultAction(e,t){const r=this._dummyManager;if(r)r.moveOutWithDefaultAction(e,t);else{const r=this.getElement();r&&Jr.moveWithPhantomDummy(this._tabster,r,!0,e,t)}}_add(){}_remove(){}}class Zr{constructor(e,t){this._autoRootWaiting=!1,this._roots={},this._forceDummy=!1,this.rootById={},this._autoRootCreate=()=>{var e;const t=this._win().document,r=t.body;if(r){this._autoRootUnwait(t);const i=this._autoRoot;if(i)return function(e,t,r){let i;if(r){const t=e.getAttribute(or);if(t)try{i=JSON.parse(t)}catch(e){}}i||(i={}),function(e,t){for(const r of Object.keys(t)){const i=t[r];i?e[r]=i:delete e[r]}}(i,t),Object.keys(i).length>0?e.setAttribute(or,Yr(i,!0)):e.removeAttribute(or)}(r,{root:i},!0),dr(this._tabster,r),null===(e=ur(this._tabster,r))||void 0===e?void 0:e.root}else this._autoRootWaiting||(this._autoRootWaiting=!0,t.addEventListener("readystatechange",this._autoRootCreate))},this._onRootDispose=e=>{delete this._roots[e.id]},this._tabster=e,this._win=e.getWindow,this._autoRoot=t,e.queueInit(()=>{this._autoRoot&&this._autoRootCreate()})}_autoRootUnwait(e){e.removeEventListener("readystatechange",this._autoRootCreate),this._autoRootWaiting=!1}dispose(){const e=this._win();this._autoRootUnwait(e.document),delete this._autoRoot,Object.keys(this._roots).forEach(e=>{this._roots[e]&&(this._roots[e].dispose(),delete this._roots[e])}),this.rootById={}}createRoot(e,t,r){const i=new Xr(this._tabster,e,this._onRootDispose,t,r);return this._roots[i.id]=i,this._forceDummy&&i.addDummyInputs(),i}addDummyInputs(){this._forceDummy=!0;const e=this._roots;for(const t of Object.keys(e))e[t].addDummyInputs()}static getRootByUId(e,t){const r=e().__tabsterInstance;return r&&r.root.rootById[t]}static getTabsterContext(e,t,r){var i,n,o,s;if(void 0===r&&(r={}),!t.ownerDocument)return;const{checkRtl:a,referenceElement:l}=r,c=e.getParent;let u,d,m,p;e.drainInitQueue();let h,f,g,v,b=!1,y=l||t;const _={};for(;y&&(!u||a);){const r=ur(e,y);if(a&&void 0===g){const e=y.dir;e&&(g="rtl"===e.toLowerCase())}if(!r){y=c(y);continue}const s=y.tagName;(r.uncontrolled||"IFRAME"===s||"WEBVIEW"===s)&&e.focusable.isVisible(y)&&(v=y),p||!(null===(i=r.focusable)||void 0===i?void 0:i.excludeFromMover)||m||(b=!0);const l=r.modalizer,x=r.groupper,w=r.mover;!d&&l&&(d=l),m||!x||d&&!l||(d?(!x.isActive()&&x.getProps().tabbability&&d.userId!==(null===(n=e.modalizer)||void 0===n?void 0:n.activeId)&&(d=void 0,m=x),f=x):m=x),p||!w||d&&!l||x&&y===t||!y.contains(t)||(p=w,h=!!m&&m!==x),r.root&&(u=r.root),(null===(o=r.focusable)||void 0===o?void 0:o.ignoreKeydown)&&Object.assign(_,r.focusable.ignoreKeydown),y=c(y)}if(!u){const r=e.root;r._autoRoot&&(null===(s=t.ownerDocument)||void 0===s?void 0:s.body)&&(u=r._autoRootCreate())}return m&&!p&&(h=!0),u?{root:u,modalizer:d,groupper:m,mover:p,groupperBeforeMover:h,modalizerInGroupper:f,rtl:a?!!g:void 0,uncontrolled:v,excludedFromMover:b,ignoreKeydown:e=>!!_[e.key]}:void 0}static getRoot(e,t){var r;const i=e.getParent;for(let n=t;n;n=i(n)){const t=null===(r=ur(e,n))||void 0===r?void 0:r.root;if(t)return t}}onRoot(e,t){t?delete this.rootById[e.uid]:this.rootById[e.uid]=e}}class Qr{constructor(){this._callbacks=[]}dispose(){this._callbacks=[],delete this._val}subscribe(e){const t=this._callbacks;t.indexOf(e)<0&&t.push(e)}subscribeFirst(e){const t=this._callbacks,r=t.indexOf(e);r>=0&&t.splice(r,1),t.unshift(e)}unsubscribe(e){const t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}setVal(e,t){this._val!==e&&(this._val=e,this._callCallbacks(e,t))}getVal(){return this._val}trigger(e,t){this._callCallbacks(e,t)}_callCallbacks(e,t){this._callbacks.forEach(r=>r(e,t))}}class ei{constructor(e){this._tabster=e}dispose(){}getProps(e){const t=ur(this._tabster,e);return t&&t.focusable||{}}isFocusable(e,t,r,i){return!(!Fr(e,sr)||!t&&-1===e.tabIndex)&&(r||this.isVisible(e))&&(i||this.isAccessible(e))}isVisible(e){if(!e.ownerDocument||e.nodeType!==Node.ELEMENT_NODE)return!1;if(function(e){var t,r;const i=e.ownerDocument,n=null===(t=i.defaultView)||void 0===t?void 0:t.getComputedStyle(e);if(null===e.offsetParent&&i.body!==e&&"fixed"!==(null==n?void 0:n.position))return!0;if("hidden"===(null==n?void 0:n.visibility))return!0;if("fixed"===(null==n?void 0:n.position)){if("none"===n.display)return!0;if(null===(null===(r=e.parentElement)||void 0===r?void 0:r.offsetParent)&&i.body!==e.parentElement)return!0}return!1}(e))return!1;const t=e.ownerDocument.body.getBoundingClientRect();return 0!==t.width||0!==t.height}isAccessible(e){var t;for(let r=e;r;r=wr.getParentElement(r)){const e=ur(this._tabster,r);if(this._isHidden(r))return!1;if(!(null===(t=null==e?void 0:e.focusable)||void 0===t?void 0:t.ignoreAriaDisabled)&&this._isDisabled(r))return!1}return!0}_isDisabled(e){return e.hasAttribute("disabled")}_isHidden(e){var t;const r=e.getAttribute("aria-hidden");return!(!r||"true"!==r.toLowerCase()||(null===(t=this._tabster.modalizer)||void 0===t?void 0:t.isAugmented(e)))}findFirst(e,t){return this.findElement({...e},t)}findLast(e,t){return this.findElement({isBackward:!0,...e},t)}findNext(e,t){return this.findElement({...e},t)}findPrev(e,t){return this.findElement({...e,isBackward:!0},t)}findDefault(e,t){return this.findElement({...e,acceptCondition:t=>this.isFocusable(t,e.includeProgrammaticallyFocusable)&&!!this.getProps(t).isDefault},t)||null}findAll(e){return this._findElements(!0,e)||[]}findElement(e,t){const r=this._findElements(!1,e,t);return r?r[0]:r}_findElements(e,t,r){var i,n,o;const{container:s,currentElement:a=null,includeProgrammaticallyFocusable:l,useActiveModalizer:c,ignoreAccessibility:u,modalizerId:d,isBackward:m,onElement:p}=t;r||(r={});const h=[];let{acceptCondition:f}=t;const g=!!f;if(!s)return null;f||(f=e=>this.isFocusable(e,l,!1,u));const v={container:s,modalizerUserId:void 0===d&&c?null===(i=this._tabster.modalizer)||void 0===i?void 0:i.activeId:d||(null===(o=null===(n=Zr.getTabsterContext(this._tabster,s))||void 0===n?void 0:n.modalizer)||void 0===o?void 0:o.userId),from:a||s,isBackward:m,isFindAll:e,acceptCondition:f,hasCustomCondition:g,includeProgrammaticallyFocusable:l,ignoreAccessibility:u,cachedGrouppers:{},cachedRadioGroups:{}},b=Nr(s.ownerDocument,s,e=>this._acceptElement(e,v));if(!b)return null;const y=t=>{var i,n;const o=null!==(i=v.foundElement)&&void 0!==i?i:v.foundBackward;return o&&h.push(o),e?!(o&&(v.found=!1,delete v.foundElement,delete v.foundBackward,delete v.fromCtx,v.from=o,p&&!p(o))||!o&&!t):(o&&r&&(r.uncontrolled=null===(n=Zr.getTabsterContext(this._tabster,o))||void 0===n?void 0:n.uncontrolled),!(!t||o))};if(a||(r.outOfDOMOrder=!0),a&&wr.nodeContains(s,a))b.currentNode=a;else if(m){const e=Vr(s);if(!e)return null;if(this._acceptElement(e,v)===NodeFilter.FILTER_ACCEPT&&!y(!0))return v.skippedFocusable&&(r.outOfDOMOrder=!0),h;b.currentNode=e}do{m?b.previousNode():b.nextNode()}while(y());return v.skippedFocusable&&(r.outOfDOMOrder=!0),h.length?h:null}_acceptElement(e,t){var r,i,n;if(t.found)return NodeFilter.FILTER_ACCEPT;const o=t.foundBackward;if(o&&(e===o||!wr.nodeContains(o,e)))return t.found=!0,t.foundElement=o,NodeFilter.FILTER_ACCEPT;const s=t.container;if(e===s)return NodeFilter.FILTER_SKIP;if(!wr.nodeContains(s,e))return NodeFilter.FILTER_REJECT;if($r(e))return NodeFilter.FILTER_REJECT;if(wr.nodeContains(t.rejectElementsFrom,e))return NodeFilter.FILTER_REJECT;const a=t.currentCtx=Zr.getTabsterContext(this._tabster,e);if(!a)return NodeFilter.FILTER_SKIP;if(Br(e))return this.isFocusable(e,void 0,!0,!0)&&(t.skippedFocusable=!0),NodeFilter.FILTER_SKIP;if(!t.hasCustomCondition&&("IFRAME"===e.tagName||"WEBVIEW"===e.tagName))return this.isVisible(e)&&(null===(r=a.modalizer)||void 0===r?void 0:r.userId)===(null===(i=this._tabster.modalizer)||void 0===i?void 0:i.activeId)?(t.found=!0,t.rejectElementsFrom=t.foundElement=e,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT;if(!t.ignoreAccessibility&&!this.isAccessible(e))return this.isFocusable(e,!1,!0,!0)&&(t.skippedFocusable=!0),NodeFilter.FILTER_REJECT;let l,c=t.fromCtx;c||(c=t.fromCtx=Zr.getTabsterContext(this._tabster,t.from));const u=null==c?void 0:c.mover;let d=a.groupper,m=a.mover;if(l=null===(n=this._tabster.modalizer)||void 0===n?void 0:n.acceptElement(e,t),void 0!==l&&(t.skippedFocusable=!0),void 0===l&&(d||m||u)){const r=null==d?void 0:d.getElement(),i=null==u?void 0:u.getElement();let n=null==m?void 0:m.getElement();if(n&&wr.nodeContains(i,n)&&wr.nodeContains(s,i)&&(!r||!m||wr.nodeContains(i,r))&&(m=u,n=i),r)if(r!==s&&wr.nodeContains(s,r)){if(!wr.nodeContains(r,e))return NodeFilter.FILTER_REJECT}else d=void 0;if(n)if(wr.nodeContains(s,n)){if(!wr.nodeContains(n,e))return NodeFilter.FILTER_REJECT}else m=void 0;d&&m&&(n&&r&&!wr.nodeContains(r,n)?m=void 0:d=void 0),d&&(l=d.acceptElement(e,t)),m&&(l=m.acceptElement(e,t))}if(void 0===l&&(l=t.acceptCondition(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP,l===NodeFilter.FILTER_SKIP&&this.isFocusable(e,!1,!0,!0)&&(t.skippedFocusable=!0)),l===NodeFilter.FILTER_ACCEPT&&!t.found){if(!t.isFindAll&&Kr(e)&&!e.checked){const r=e.name;let i=t.cachedRadioGroups[r];if(i||(i=function(e){if(!Kr(e))return;const t=e.name;let r,i=Array.from(wr.getElementsByName(e,t));return i=i.filter(e=>!!Kr(e)&&(e.checked&&(r=e),!0)),{name:t,buttons:new Set(i),checked:r}}(e),i&&(t.cachedRadioGroups[r]=i)),(null==i?void 0:i.checked)&&i.checked!==e)return NodeFilter.FILTER_SKIP}t.isBackward?(t.foundBackward=e,l=NodeFilter.FILTER_SKIP):(t.found=!0,t.foundElement=e)}return l}}const ti="Home",ri="ArrowLeft",ii="ArrowUp",ni="ArrowRight",oi="ArrowDown",si={[lr]:0,[cr]:1,[ar]:2};class ai extends Qr{constructor(e,t){super(),this._init=()=>{const e=this._win(),t=e.document;t.addEventListener(Jt,this._onFocusIn,!0),t.addEventListener(Xt,this._onFocusOut,!0),e.addEventListener("keydown",this._onKeyDown,!0);const r=wr.getActiveElement(t);r&&r!==t.body&&this._setFocusedElement(r),this.subscribe(this._onChanged)},this._onFocusIn=e=>{const t=e.composedPath()[0];t&&this._setFocusedElement(t,e.detail.relatedTarget,e.detail.isFocusedProgrammatically)},this._onFocusOut=e=>{var t;this._setFocusedElement(void 0,null===(t=e.detail)||void 0===t?void 0:t.originalEvent.relatedTarget)},this._validateFocusedElement=e=>{},this._onKeyDown=e=>{if("Tab"!==e.key||e.ctrlKey)return;const t=this.getVal();if(!t||!t.ownerDocument||"true"===t.contentEditable)return;const r=this._tabster,i=r.controlTab,n=Zr.getTabsterContext(r,t);if(!n||n.ignoreKeydown(e))return;const o=e.shiftKey,s=ai.findNextTabbable(r,n,void 0,t,void 0,o,!0),a=n.root.getElement();if(!a)return;const l=null==s?void 0:s.element,c=function(e,t){var r;const i=e.getParent;let n=t;do{const t=null===(r=ur(e,n))||void 0===r?void 0:r.uncontrolled;if(t&&e.uncontrolled.isUncontrolledCompletely(n,!!t.completely))return n;n=i(n)}while(n)}(r,t);if(l){const u=s.uncontrolled;if(n.uncontrolled||wr.nodeContains(u,t)){if(!s.outOfDOMOrder&&u===n.uncontrolled||c&&!wr.nodeContains(c,l))return;return void Ur.addPhantomDummyWithTarget(r,t,o,l)}if(u&&r.focusable.isVisible(u)||"IFRAME"===l.tagName&&r.focusable.isVisible(l))return void(a.dispatchEvent(new br({by:"root",owner:a,next:l,relatedEvent:e}))&&Ur.moveWithPhantomDummy(r,null!=u?u:l,!1,o,e));(i||(null==s?void 0:s.outOfDOMOrder))&&a.dispatchEvent(new br({by:"root",owner:a,next:l,relatedEvent:e}))&&(e.preventDefault(),e.stopImmediatePropagation(),Qt(l))}else!c&&a.dispatchEvent(new br({by:"root",owner:a,next:null,relatedEvent:e}))&&n.root.moveOutWithDefaultAction(o,e)},this._onChanged=(e,t)=>{var r,i;if(e)e.dispatchEvent(new gr(t));else{const e=null===(r=this._lastVal)||void 0===r?void 0:r.get();if(e){const r={...t},n=Zr.getTabsterContext(this._tabster,e),o=null===(i=null==n?void 0:n.modalizer)||void 0===i?void 0:i.userId;o&&(r.modalizerId=o),e.dispatchEvent(new vr(r))}}},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){super.dispose();const e=this._win(),t=e.document;t.removeEventListener(Jt,this._onFocusIn,!0),t.removeEventListener(Xt,this._onFocusOut,!0),e.removeEventListener("keydown",this._onKeyDown,!0),this.unsubscribe(this._onChanged);const r=this._asyncFocus;r&&(e.clearTimeout(r.timeout),delete this._asyncFocus),delete ai._lastResetElement,delete this._nextVal,delete this._lastVal}static forgetMemorized(e,t){var r,i;let n=ai._lastResetElement,o=n&&n.get();o&&wr.nodeContains(t,o)&&delete ai._lastResetElement,o=null===(i=null===(r=e._nextVal)||void 0===r?void 0:r.element)||void 0===i?void 0:i.get(),o&&wr.nodeContains(t,o)&&delete e._nextVal,n=e._lastVal,o=n&&n.get(),o&&wr.nodeContains(t,o)&&delete e._lastVal}getFocusedElement(){return this.getVal()}getLastFocusedElement(){var e;let t=null===(e=this._lastVal)||void 0===e?void 0:e.get();return(!t||t&&!zr(t.ownerDocument,t))&&(this._lastVal=t=void 0),t}focus(e,t,r,i){return!!this._tabster.focusable.isFocusable(e,t,!1,r)&&(e.focus({preventScroll:i}),!0)}focusDefault(e){const t=this._tabster.focusable.findDefault({container:e});return!!t&&(this._tabster.focusedElement.focus(t),!0)}getFirstOrLastTabbable(e,t){var r;const{container:i,ignoreAccessibility:n}=t;let o;if(i){const t=Zr.getTabsterContext(this._tabster,i);t&&(o=null===(r=ai.findNextTabbable(this._tabster,t,i,void 0,void 0,!e,n))||void 0===r?void 0:r.element)}return o&&!wr.nodeContains(i,o)&&(o=void 0),o||void 0}_focusFirstOrLast(e,t){const r=this.getFirstOrLastTabbable(e,t);return!!r&&(this.focus(r,!1,!0),!0)}focusFirst(e){return this._focusFirstOrLast(!0,e)}focusLast(e){return this._focusFirstOrLast(!1,e)}resetFocus(e){if(!this._tabster.focusable.isVisible(e))return!1;if(this._tabster.focusable.isFocusable(e,!0,!0,!0))this.focus(e);else{const t=e.getAttribute("tabindex"),r=e.getAttribute("aria-hidden");e.tabIndex=-1,e.setAttribute("aria-hidden","true"),ai._lastResetElement=new Ir(this._win,e),this.focus(e,!0,!0),this._setOrRemoveAttribute(e,"tabindex",t),this._setOrRemoveAttribute(e,"aria-hidden",r)}return!0}requestAsyncFocus(e,t,r){const i=this._tabster.getWindow(),n=this._asyncFocus;if(n){if(si[e]>si[n.source])return;i.clearTimeout(n.timeout)}this._asyncFocus={source:e,callback:t,timeout:i.setTimeout(()=>{this._asyncFocus=void 0,t()},r)}}cancelAsyncFocus(e){const t=this._asyncFocus;(null==t?void 0:t.source)===e&&(this._tabster.getWindow().clearTimeout(t.timeout),this._asyncFocus=void 0)}_setOrRemoveAttribute(e,t,r){null===r?e.removeAttribute(t):e.setAttribute(t,r)}_setFocusedElement(e,t,r){var i,n;if(this._tabster._noop)return;const o={relatedTarget:t};if(e){const t=null===(i=ai._lastResetElement)||void 0===i?void 0:i.get();if(ai._lastResetElement=void 0,t===e||Br(e))return;o.isFocusedProgrammatically=r;const s=Zr.getTabsterContext(this._tabster,e),a=null===(n=null==s?void 0:s.modalizer)||void 0===n?void 0:n.userId;a&&(o.modalizerId=a)}const s=this._nextVal={element:e?new Ir(this._win,e):void 0,detail:o};e&&e!==this._val&&this._validateFocusedElement(e),this._nextVal===s&&this.setVal(e,o),this._nextVal=void 0}setVal(e,t){super.setVal(e,t),e&&(this._lastVal=new Ir(this._win,e))}static findNextTabbable(e,t,r,i,n,o,s){const a=r||t.root.getElement();if(!a)return null;let l=null;const c=ai._isTabbingTimer,u=e.getWindow();c&&u.clearTimeout(c),ai.isTabbing=!0,ai._isTabbingTimer=u.setTimeout(()=>{delete ai._isTabbingTimer,ai.isTabbing=!1},0);const d=t.modalizer,m=t.groupper,p=t.mover,h=t=>{if(l=t.findNextTabbable(i,n,o,s),i&&!(null==l?void 0:l.element)){const n=t!==d&&wr.getParentElement(t.getElement());if(n){const a=Zr.getTabsterContext(e,i,{referenceElement:n});if(a){const i=t.getElement(),c=o?i:i&&Vr(i)||i;c&&(l=ai.findNextTabbable(e,a,r,c,n,o,s),l&&(l.outOfDOMOrder=!0))}}}};if(m&&p)h(t.groupperBeforeMover?m:p);else if(m)h(m);else if(p)h(p);else if(d)h(d);else{const t={container:a,currentElement:i,referenceElement:n,ignoreAccessibility:s,useActiveModalizer:!0},r={},c=e.focusable[o?"findPrev":"findNext"](t,r);l={element:c,outOfDOMOrder:r.outOfDOMOrder,uncontrolled:r.uncontrolled}}return l}}ai.isTabbing=!1;class li extends Qr{constructor(e){super(),this._onChange=e=>{this.setVal(e,void 0)},this._keyborg=ir(e()),this._keyborg.subscribe(this._onChange)}dispose(){super.dispose(),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),nr(this._keyborg),delete this._keyborg)}setNavigatingWithKeyboard(e){var t;null===(t=this._keyborg)||void 0===t||t.setVal(e)}isNavigatingWithKeyboard(){var e;return!!(null===(e=this._keyborg)||void 0===e?void 0:e.isNavigatingWithKeyboard())}}const ci=["input","textarea","*[contenteditable]"].join(", ");class ui extends Ur{constructor(e,t,r,i){super(t,e,3,i),this._onFocusDummyInput=e=>{var t,r;const i=this._element.get(),n=e.input;if(i&&n){const o=Zr.getTabsterContext(this._tabster,i);let s;o&&(s=null===(t=ai.findNextTabbable(this._tabster,o,void 0,n,void 0,!e.isFirst,!0))||void 0===t?void 0:t.element);const a=null===(r=this._getMemorized())||void 0===r?void 0:r.get();a&&this._tabster.focusable.isFocusable(a)&&(s=a),s&&Qt(s)}},this._tabster=t,this._getMemorized=r,this._setHandlers(this._onFocusDummyInput)}}class di extends Hr{constructor(e,t,r,i,n){var o;super(e,t,i),this._visible={},this._onIntersection=e=>{for(const t of e){const e=t.target,r=Mr(this._win,e);let i,n=this._fullyVisible;if(t.intersectionRatio>=.25?(i=t.intersectionRatio>=.75?2:1,2===i&&(n=r)):i=0,this._visible[r]!==i){void 0===i?(delete this._visible[r],n===r&&delete this._fullyVisible):(this._visible[r]=i,this._fullyVisible=n);const t=this.getState(e);t&&e.dispatchEvent(new yr(t))}}},this._win=e.getWindow,this.visibilityTolerance=null!==(o=i.visibilityTolerance)&&void 0!==o?o:.8,(this._props.trackState||this._props.visibilityAware)&&(this._intersectionObserver=new IntersectionObserver(this._onIntersection,{threshold:[0,.25,.5,.75,1]}),this._observeState()),this._onDispose=r;e.controlTab||(this.dummyManager=new ui(this._element,e,()=>i.memorizeCurrent?this._current:void 0,n))}dispose(){var e;this._onDispose(this),this._intersectionObserver&&(this._intersectionObserver.disconnect(),delete this._intersectionObserver),delete this._current,delete this._fullyVisible,delete this._allElements,delete this._updateQueue,this._unobserve&&(this._unobserve(),delete this._unobserve);const t=this._win();this._setCurrentTimer&&(t.clearTimeout(this._setCurrentTimer),delete this._setCurrentTimer),this._updateTimer&&(t.clearTimeout(this._updateTimer),delete this._updateTimer),null===(e=this.dummyManager)||void 0===e||e.dispose(),delete this.dummyManager}setCurrent(e){this._current=e?new Ir(this._win,e):void 0,!this._props.trackState&&!this._props.visibilityAware||this._setCurrentTimer||(this._setCurrentTimer=this._win().setTimeout(()=>{var e;delete this._setCurrentTimer;const t=[];this._current!==this._prevCurrent&&(t.push(this._current),t.push(this._prevCurrent),this._prevCurrent=this._current);for(const r of t){const t=null==r?void 0:r.get();if(t&&(null===(e=this._allElements)||void 0===e?void 0:e.get(t))===this){const e=this._props;if(t&&(void 0!==e.visibilityAware||e.trackState)){const e=this.getState(t);e&&t.dispatchEvent(new yr(e))}}}}))}getCurrent(){var e;return(null===(e=this._current)||void 0===e?void 0:e.get())||null}findNextTabbable(e,t,r,i){const n=this.getElement(),o=n&&$r(e)===n;if(!n)return null;let s,a=null,l=!1;if(this._props.tabbable||o||e&&!wr.nodeContains(n,e)){const o={currentElement:e,referenceElement:t,container:n,ignoreAccessibility:i,useActiveModalizer:!0},c={};a=this._tabster.focusable[r?"findPrev":"findNext"](o,c),l=!!c.outOfDOMOrder,s=c.uncontrolled}return{element:a,uncontrolled:s,outOfDOMOrder:l}}acceptElement(e,t){var r,i;if(!ai.isTabbing)return(null===(r=t.currentCtx)||void 0===r?void 0:r.excludedFromMover)?NodeFilter.FILTER_REJECT:void 0;const{memorizeCurrent:n,visibilityAware:o,hasDefault:s=!0}=this._props,a=this.getElement();if(a&&(n||o||s)&&(!wr.nodeContains(a,t.from)||$r(t.from)===a)){let e;if(n){const r=null===(i=this._current)||void 0===i?void 0:i.get();r&&t.acceptCondition(r)&&(e=r)}if(!e&&s&&(e=this._tabster.focusable.findDefault({container:a,useActiveModalizer:!0})),!e&&o&&(e=this._tabster.focusable.findElement({container:a,useActiveModalizer:!0,isBackward:t.isBackward,acceptCondition:e=>{var r;const i=Mr(this._win,e),n=this._visible[i];return a!==e&&!!(null===(r=this._allElements)||void 0===r?void 0:r.get(e))&&t.acceptCondition(e)&&(2===n||1===n&&(1===o||!this._fullyVisible))}})),e)return t.found=!0,t.foundElement=e,t.rejectElementsFrom=a,t.skippedFocusable=!0,NodeFilter.FILTER_ACCEPT}}_observeState(){const e=this.getElement();if(this._unobserve||!e||"undefined"==typeof MutationObserver)return;const t=this._win(),r=this._allElements=new WeakMap,i=this._tabster.focusable;let n=this._updateQueue=[];const o=wr.createMutationObserver(e=>{for(const t of e){const e=t.target,r=t.removedNodes,i=t.addedNodes;if("attributes"===t.type)"tabindex"===t.attributeName&&n.push({element:e,type:2});else{for(let e=0;e<r.length;e++)n.push({element:r[e],type:3});for(let e=0;e<i.length;e++)n.push({element:i[e],type:1})}}u()}),s=(e,t)=>{var i,n;const o=r.get(e);o&&t&&(null===(i=this._intersectionObserver)||void 0===i||i.unobserve(e),r.delete(e)),o||t||(r.set(e,this),null===(n=this._intersectionObserver)||void 0===n||n.observe(e))},a=e=>{const t=i.isFocusable(e);r.get(e)?t||s(e,!0):t&&s(e)},l=e=>{const{mover:r}=d(e);if(r&&r!==this){if(r.getElement()!==e||!i.isFocusable(e))return;s(e)}const n=Nr(t.document,e,e=>{const{mover:t,groupper:r}=d(e);if(t&&t!==this)return NodeFilter.FILTER_REJECT;const n=null==r?void 0:r.getFirst(!0);return r&&r.getElement()!==e&&n&&n!==e?NodeFilter.FILTER_REJECT:(i.isFocusable(e)&&s(e),NodeFilter.FILTER_SKIP)});if(n)for(n.currentNode=e;n.nextNode(););},c=e=>{r.get(e)&&s(e,!0);for(let t=wr.getFirstElementChild(e);t;t=wr.getNextElementSibling(t))c(t)},u=()=>{!this._updateTimer&&n.length&&(this._updateTimer=t.setTimeout(()=>{delete this._updateTimer;for(const{element:e,type:t}of n)switch(t){case 2:a(e);break;case 1:l(e);break;case 3:c(e)}n=this._updateQueue=[]},0))},d=e=>{const t={};for(let r=e;r;r=wr.getParentElement(r)){const e=ur(this._tabster,r);if(e&&(e.groupper&&!t.groupper&&(t.groupper=e.groupper),e.mover)){t.mover=e.mover;break}}return t};n.push({element:e,type:1}),u(),o.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=()=>{o.disconnect()}}getState(e){const t=Mr(this._win,e);if(t in this._visible){const r=this._visible[t]||0;return{isCurrent:this._current?this._current.get()===e:void 0,visibility:r}}}}class mi{constructor(e,t){this._init=()=>{const e=this._win();e.addEventListener("keydown",this._onKeyDown,!0),e.addEventListener(mr,this._onMoveFocus),e.addEventListener(pr,this._onMemorizedElement),this._tabster.focusedElement.subscribe(this._onFocus)},this._onMoverDispose=e=>{delete this._movers[e.id]},this._onFocus=e=>{var t;let r=e,i=e;for(let n=wr.getParentElement(e);n;n=wr.getParentElement(n)){const e=null===(t=ur(this._tabster,n))||void 0===t?void 0:t.mover;e&&(e.setCurrent(i),r=void 0),!r&&this._tabster.focusable.isFocusable(n)&&(r=i=n)}},this._onKeyDown=async e=>{var t;if(this._ignoredInputTimer&&(this._win().clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1),e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;const r=e.key;let i;if(r===oi?i=2:r===ni?i=4:r===ii?i=1:r===ri?i=3:"PageDown"===r?i=6:"PageUp"===r?i=5:r===ti?i=7:"End"===r&&(i=8),!i)return;const n=this._tabster.focusedElement.getFocusedElement();n&&!await this._isIgnoredInput(n,r)&&this._moveFocus(n,i,e)},this._onMoveFocus=e=>{var t;const r=e.composedPath()[0],i=null===(t=e.detail)||void 0===t?void 0:t.key;r&&void 0!==i&&!e.defaultPrevented&&(this._moveFocus(r,i),e.stopImmediatePropagation())},this._onMemorizedElement=e=>{var t;const r=e.composedPath()[0];let i=null===(t=e.detail)||void 0===t?void 0:t.memorizedElement;if(r){const t=Zr.getTabsterContext(this._tabster,r),n=null==t?void 0:t.mover;n&&(i&&!wr.nodeContains(n.getElement(),i)&&(i=void 0),n.setCurrent(i),e.stopImmediatePropagation())}},this._tabster=e,this._win=t,this._movers={},e.queueInit(this._init)}dispose(){var e;const t=this._win();this._tabster.focusedElement.unsubscribe(this._onFocus),null===(e=this._ignoredInputResolve)||void 0===e||e.call(this,!1),this._ignoredInputTimer&&(t.clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),t.removeEventListener("keydown",this._onKeyDown,!0),t.removeEventListener(mr,this._onMoveFocus),t.removeEventListener(pr,this._onMemorizedElement),Object.keys(this._movers).forEach(e=>{this._movers[e]&&(this._movers[e].dispose(),delete this._movers[e])})}createMover(e,t,r){const i=new di(this._tabster,e,this._onMoverDispose,t,r);return this._movers[i.id]=i,i}moveFocus(e,t){return this._moveFocus(e,t)}_moveFocus(e,t,r){var i,n;const o=this._tabster,s=Zr.getTabsterContext(o,e,{checkRtl:!0});if(!s||!s.mover||s.excludedFromMover||r&&s.ignoreKeydown(r))return null;const a=s.mover,l=a.getElement();if(s.groupperBeforeMover){const e=s.groupper;if(!e||e.isActive(!0))return null;for(let t=wr.getParentElement(e.getElement());t&&t!==l;t=wr.getParentElement(t))if(null===(n=null===(i=ur(o,t))||void 0===i?void 0:i.groupper)||void 0===n?void 0:n.isActive(!0))return null}if(!l)return null;const c=o.focusable,u=a.getProps(),d=u.direction||0,m=0===d,p=m||1===d,h=m||2===d,f=4===d,g=f||3===d,v=u.cyclic;let b,y,_,x=0,w=0;if(g&&(_=e.getBoundingClientRect(),x=Math.ceil(_.left),w=Math.floor(_.right)),s.rtl&&(4===t?t=3:3===t&&(t=4)),2===t&&p||4===t&&(h||g))if(b=c.findNext({currentElement:e,container:l,useActiveModalizer:!0}),b&&g){const e=Math.ceil(b.getBoundingClientRect().left);!f&&w>e&&(b=void 0)}else!b&&v&&(b=c.findFirst({container:l,useActiveModalizer:!0}));else if(1===t&&p||3===t&&(h||g))if(b=c.findPrev({currentElement:e,container:l,useActiveModalizer:!0}),b&&g){const e=Math.floor(b.getBoundingClientRect().right);!f&&e>x&&(b=void 0)}else!b&&v&&(b=c.findLast({container:l,useActiveModalizer:!0}));else if(7===t)g?c.findElement({container:l,currentElement:e,useActiveModalizer:!0,isBackward:!0,acceptCondition:t=>{var r;if(!c.isFocusable(t))return!1;const i=Math.ceil(null!==(r=t.getBoundingClientRect().left)&&void 0!==r?r:0);return t!==e&&x<=i||(b=t,!1)}}):b=c.findFirst({container:l,useActiveModalizer:!0});else if(8===t)g?c.findElement({container:l,currentElement:e,useActiveModalizer:!0,acceptCondition:t=>{var r;if(!c.isFocusable(t))return!1;const i=Math.ceil(null!==(r=t.getBoundingClientRect().left)&&void 0!==r?r:0);return t!==e&&x>=i||(b=t,!1)}}):b=c.findLast({container:l,useActiveModalizer:!0});else if(5===t){if(c.findElement({currentElement:e,container:l,useActiveModalizer:!0,isBackward:!0,acceptCondition:e=>!(!c.isFocusable(e)||Pr(this._win,e,a.visibilityTolerance)&&(b=e,1))}),g&&b){const e=Math.ceil(b.getBoundingClientRect().left);c.findElement({currentElement:b,container:l,useActiveModalizer:!0,acceptCondition:t=>{if(!c.isFocusable(t))return!1;const r=Math.ceil(t.getBoundingClientRect().left);return x<r||e>=r||(b=t,!1)}})}y=!1}else if(6===t){if(c.findElement({currentElement:e,container:l,useActiveModalizer:!0,acceptCondition:e=>!(!c.isFocusable(e)||Pr(this._win,e,a.visibilityTolerance)&&(b=e,1))}),g&&b){const e=Math.ceil(b.getBoundingClientRect().left);c.findElement({currentElement:b,container:l,useActiveModalizer:!0,isBackward:!0,acceptCondition:t=>{if(!c.isFocusable(t))return!1;const r=Math.ceil(t.getBoundingClientRect().left);return x>r||e<=r||(b=t,!1)}})}y=!0}else if(g){const r=1===t,i=x,n=Math.ceil(_.top),o=w,s=Math.floor(_.bottom);let a,u,d=0;c.findAll({container:l,currentElement:e,isBackward:r,onElement:e=>{const t=e.getBoundingClientRect(),l=Math.ceil(t.left),c=Math.ceil(t.top),m=Math.floor(t.right),p=Math.floor(t.bottom);if(r&&n<p||!r&&s>c)return!0;const h=Math.ceil(Math.min(o,m))-Math.floor(Math.max(i,l)),f=Math.ceil(Math.min(o-i,m-l));if(h>0&&f>=h){const t=h/f;t>d&&(a=e,d=t)}else if(0===d){const t=function(e,t,r,i,n,o,s,a){const l=r<n?n-r:s<e?e-s:0,c=i<o?o-i:a<t?t-a:0;return 0===l?c:0===c?l:Math.sqrt(l*l+c*c)}(i,n,o,s,l,c,m,p);(void 0===u||t<u)&&(u=t,a=e)}else if(d>0)return!1;return!0}}),b=a}return b&&(!r||r&&l.dispatchEvent(new br({by:"mover",owner:l,next:b,relatedEvent:r})))?(void 0!==y&&function(e,t,r){const i=Dr(t);if(i){const n=Rr(e,i),o=t.getBoundingClientRect();i.scrollTop+=r?o.top-n.top:o.bottom-n.bottom}}(this._win,b,y),r&&(r.preventDefault(),r.stopImmediatePropagation()),Qt(b),b):null}async _isIgnoredInput(e,t){if("true"===e.getAttribute("aria-expanded")&&e.hasAttribute("aria-activedescendant"))return!0;if(Fr(e,ci)){let r,i=0,n=0,o=0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName){const r=e.type,s=e.value;if(o=(s||"").length,"email"===r||"number"===r){if(o){const r=wr.getSelection(e);if(r){const e=r.toString().length,i=t===ri||t===ii;if(r.modify("extend",i?"backward":"forward","character"),e!==r.toString().length)return r.modify("extend",i?"forward":"backward","character"),!0;o=0}}}else{const t=e.selectionStart;if(null===t)return"hidden"===r;i=t||0,n=e.selectionEnd||0}}else"true"===e.contentEditable&&(r=new(function(e){const t=Er(e);if(t.basics.Promise)return t.basics.Promise;throw new Error("No Promise defined.")}(this._win))(t=>{this._ignoredInputResolve=e=>{delete this._ignoredInputResolve,t(e)};const r=this._win();this._ignoredInputTimer&&r.clearTimeout(this._ignoredInputTimer);const{anchorNode:s,focusNode:a,anchorOffset:l,focusOffset:c}=wr.getSelection(e)||{};this._ignoredInputTimer=r.setTimeout(()=>{var t,r,u;delete this._ignoredInputTimer;const{anchorNode:d,focusNode:m,anchorOffset:p,focusOffset:h}=wr.getSelection(e)||{};if(d===s&&m===a&&p===l&&h===c){if(i=p||0,n=h||0,o=(null===(r=e.textContent)||void 0===r?void 0:r.length)||0,d&&m&&wr.nodeContains(e,d)&&wr.nodeContains(e,m)&&d!==e){let t=!1;const r=e=>{if(e===d)t=!0;else if(e===m)return!0;const o=e.textContent;if(o&&!wr.getFirstChild(e)){const e=o.length;t?m!==d&&(n+=e):(i+=e,n+=e)}let s=!1;for(let t=wr.getFirstChild(e);t&&!s;t=t.nextSibling)s=r(t);return s};r(e)}null===(u=this._ignoredInputResolve)||void 0===u||u.call(this,!0)}else null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1)},0)}));if(r&&!await r)return!0;if(i!==n)return!0;if(i>0&&(t===ri||t===ii||t===ti))return!0;if(i<o&&(t===ni||t===oi||"End"===t))return!0}return!1}}class pi{constructor(e){this._isUncontrolledCompletely=e}isUncontrolledCompletely(e,t){var r;const i=null===(r=this._isUncontrolledCompletely)||void 0===r?void 0:r.call(this,e,t);return void 0===i?t:i}}class hi{constructor(e){this._stack=[],this._getWindow=e}push(e){var t;(null===(t=this._stack[this._stack.length-1])||void 0===t?void 0:t.get())!==e&&(this._stack.length>hi.DEPTH&&this._stack.shift(),this._stack.push(new Ir(this._getWindow,e)))}pop(e){var t;void 0===e&&(e=()=>!0);const r=this._getWindow().document;for(let i=this._stack.length-1;i>=0;i--){const i=null===(t=this._stack.pop())||void 0===t?void 0:t.get();if(i&&wr.nodeContains(r.body,wr.getParentElement(i))&&e(i))return i}}}hi.DEPTH=10;class fi{static _overrideAttachShadow(e){const t=e.Element.prototype.attachShadow;t.__origAttachShadow||(Element.prototype.attachShadow=function(e){const r=t.call(this,e);for(const e of fi._shadowObservers)e._addSubObserver(r);return r},Element.prototype.attachShadow.__origAttachShadow=t)}constructor(e){this._isObserving=!1,this._callbackWrapper=(e,t)=>{for(const t of e)if("childList"===t.type){const e=t.removedNodes,r=t.addedNodes;for(let t=0;t<e.length;t++)this._walkShadows(e[t],!0);for(let e=0;e<r.length;e++)this._walkShadows(r[e])}this._callback(e,t)},this._callback=e,this._observer=new MutationObserver(this._callbackWrapper),this._subObservers=new Map}_addSubObserver(e){if(this._options&&this._callback&&!this._subObservers.has(e)&&this._options.subtree&&function(e,t){var r,i;if(!e||!t)return!1;let n=t;for(;n;){if(n===e)return!0;n="function"!=typeof n.assignedElements&&(null===(r=n.assignedSlot)||void 0===r?void 0:r.parentNode)?null===(i=n.assignedSlot)||void 0===i?void 0:i.parentNode:n.nodeType===document.DOCUMENT_FRAGMENT_NODE?n.host:n.parentNode}return!1}(this._root,e)){const t=new MutationObserver(this._callbackWrapper);this._subObservers.set(e,t),this._isObserving&&t.observe(e,this._options),this._walkShadows(e)}}disconnect(){this._isObserving=!1,delete this._options,fi._shadowObservers.delete(this);for(const e of this._subObservers.values())e.disconnect();this._subObservers.clear(),this._observer.disconnect()}observe(e,t){const r=e.nodeType===Node.DOCUMENT_NODE?e:e.ownerDocument,i=null==r?void 0:r.defaultView;r&&i&&(fi._overrideAttachShadow(i),fi._shadowObservers.add(this),this._root=e,this._options=t,this._isObserving=!0,this._observer.observe(e,t),this._walkShadows(e))}_walkShadows(e,t){const r=e.nodeType===Node.DOCUMENT_NODE?e:e.ownerDocument;if(!r)return;if(e===r)e=r.body;else{const t=e.shadowRoot;if(t)return void this._addSubObserver(t)}const i=r.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{if(e.nodeType===Node.ELEMENT_NODE)if(t){const t=this._subObservers.get(e);t&&(t.disconnect(),this._subObservers.delete(e))}else{const t=e.shadowRoot;t&&this._addSubObserver(t)}return NodeFilter.FILTER_SKIP}});i.nextNode()}takeRecords(){const e=this._observer.takeRecords();for(const t of this._subObservers.values())e.push(...t.takeRecords());return e}}fi._shadowObservers=new Set;class gi{constructor(e){this.keyboardNavigation=e.keyboardNavigation,this.focusedElement=e.focusedElement,this.focusable=e.focusable,this.root=e.root,this.uncontrolled=e.uncontrolled,this.core=e}}class vi{constructor(e,t){var r,i;this._forgetMemorizedElements=[],this._wrappers=new Set,this._initQueue=[],this._version="8.5.6",this._noop=!1,this.getWindow=()=>{if(!this._win)throw new Error("Using disposed Tabster.");return this._win},this._storage=function(e){const t=e.__tabsterInstanceContext;return new((null==t?void 0:t.basics.WeakMap)||WeakMap)}(e),this._win=e;const n=this.getWindow;(null==t?void 0:t.DOMAPI)&&function(e){for(const t of Object.keys(e))wr[t]=e[t]}({...t.DOMAPI}),this.keyboardNavigation=new li(n),this.focusedElement=new ai(this,n),this.focusable=new ei(this),this.root=new Zr(this,null==t?void 0:t.autoRoot),this.uncontrolled=new pi((null==t?void 0:t.checkUncontrolledCompletely)||(null==t?void 0:t.checkUncontrolledTrappingFocus)),this.controlTab=null===(r=null==t?void 0:t.controlTab)||void 0===r||r,this.rootDummyInputs=!!(null==t?void 0:t.rootDummyInputs),this._dummyObserver=new Gr(n),this.getParent=null!==(i=null==t?void 0:t.getParent)&&void 0!==i?i:wr.getParentNode,this.internal={stopObserver:()=>{this._unobserve&&(this._unobserve(),delete this._unobserve)},resumeObserver:e=>{if(!this._unobserve){const t=n().document;this._unobserve=function(e,t,r,i){if("undefined"==typeof MutationObserver)return()=>{};const n=t.getWindow;let o;function s(t,r){o||(o=Er(n).elementByUId),a(t,r);const i=Nr(e,t,e=>a(e,r));if(i)for(;i.nextNode(););}function a(e,i){var s;if(!e.getAttribute)return NodeFilter.FILTER_SKIP;const a=e.__tabsterElementUID;return a&&o&&(i?delete o[a]:null!==(s=o[a])&&void 0!==s||(o[a]=new Ir(n,e))),(ur(t,e)||e.hasAttribute(or))&&r(t,e,i),NodeFilter.FILTER_SKIP}const l=wr.createMutationObserver(e=>{var i,n,o,a,l;const c=new Set;for(const l of e){const e=l.target,u=l.removedNodes,d=l.addedNodes;if("attributes"===l.type)l.attributeName===or&&(c.has(e)||r(t,e));else{for(let r=0;r<u.length;r++){const o=u[r];c.add(o),s(o,!0),null===(n=(i=t._dummyObserver).domChanged)||void 0===n||n.call(i,e)}for(let r=0;r<d.length;r++)s(d[r]),null===(a=(o=t._dummyObserver).domChanged)||void 0===a||a.call(o,e)}}c.clear(),null===(l=t.modalizer)||void 0===l||l.hiddenUpdate()});return i&&s(n().document.body),l.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[or]}),()=>{l.disconnect()}}(t,this,dr,e)}}},Or(n),this.queueInit(()=>{this.internal.resumeObserver(!0)})}_mergeProps(e){var t;e&&(this.getParent=null!==(t=e.getParent)&&void 0!==t?t:this.getParent)}createTabster(e,t){const r=new gi(this);return e||this._wrappers.add(r),this._mergeProps(t),r}disposeTabster(e,t){t?this._wrappers.clear():this._wrappers.delete(e),0===this._wrappers.size&&this.dispose()}dispose(){var e,t,r,i,n,o,s,a;this.internal.stopObserver();const l=this._win;null==l||l.clearTimeout(this._initTimer),delete this._initTimer,this._initQueue=[],this._forgetMemorizedElements=[],l&&this._forgetMemorizedTimer&&(l.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),null===(e=this.outline)||void 0===e||e.dispose(),null===(t=this.crossOrigin)||void 0===t||t.dispose(),null===(r=this.deloser)||void 0===r||r.dispose(),null===(i=this.groupper)||void 0===i||i.dispose(),null===(n=this.mover)||void 0===n||n.dispose(),null===(o=this.modalizer)||void 0===o||o.dispose(),null===(s=this.observedElement)||void 0===s||s.dispose(),null===(a=this.restorer)||void 0===a||a.dispose(),this.keyboardNavigation.dispose(),this.focusable.dispose(),this.focusedElement.dispose(),this.root.dispose(),this._dummyObserver.dispose(),function(e){const t=Er(e);t.fakeWeakRefsStarted=!1,t.fakeWeakRefsTimer&&(e().clearTimeout(t.fakeWeakRefsTimer),t.fakeWeakRefsTimer=void 0,t.fakeWeakRefs=[])}(this.getWindow),Lr(this.getWindow),this._storage=new WeakMap,this._wrappers.clear(),l&&(function(e){const t=e.__tabsterInstanceContext;t&&(t.elementByUId={},delete t.WeakRef,t.containerBoundingRectCache={},t.containerBoundingRectCacheTimer&&e.clearTimeout(t.containerBoundingRectCacheTimer),t.fakeWeakRefsTimer&&e.clearTimeout(t.fakeWeakRefsTimer),t.fakeWeakRefs=[],delete e.__tabsterInstanceContext)}(l),delete l.__tabsterInstance,delete this._win)}storageEntry(e,t){const r=this._storage;let i=r.get(e);return i?!1===t&&0===Object.keys(i).length&&r.delete(e):!0===t&&(i={},r.set(e,i)),i}forceCleanup(){this._win&&(this._forgetMemorizedElements.push(this._win.document.body),this._forgetMemorizedTimer||(this._forgetMemorizedTimer=this._win.setTimeout(()=>{delete this._forgetMemorizedTimer;for(let e=this._forgetMemorizedElements.shift();e;e=this._forgetMemorizedElements.shift())Lr(this.getWindow,e),ai.forgetMemorized(this.focusedElement,e)},0),Ar(this.getWindow,!0)))}queueInit(e){var t;this._win&&(this._initQueue.push(e),this._initTimer||(this._initTimer=null===(t=this._win)||void 0===t?void 0:t.setTimeout(()=>{delete this._initTimer,this.drainInitQueue()},0)))}drainInitQueue(){if(!this._win)return;const e=this._initQueue;this._initQueue=[],e.forEach(e=>e())}}function bi(e){const t=e.core;return t.mover||(t.mover=new mi(t,t.getWindow)),t.mover}const yi=w.createContext(void 0),_i={targetDocument:"object"==typeof document?document:void 0,dir:"ltr"},xi=yi.Provider;function wi(){var e;return null!==(e=w.useContext(yi))&&void 0!==e?e:_i}function Ci(e,t={}){if(!e)return null;if(!t.skipVirtual){const t=function(e){return(t=e)&&t._virtual&&e._virtual.parent||null;var t}(e);if(t)return t}const r=e.parentNode;return r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r}function ki(){return"undefined"!=typeof window&&!(!window.document||!window.document.createElement)}const Ti=ki()?w.useLayoutEffect:w.useEffect,Ei=e=>e;function Si(e=Ei){const{targetDocument:t}=wi(),r=w.useRef(null);return Ti(()=>{const i=function(e){const t=(null==e?void 0:e.defaultView)||void 0,r=null==t?void 0:t.__tabsterShadowDOMAPI;if(t)return function(e,t){let r=function(e){return e.__tabsterInstance}(e);return r?r.createTabster(!1,t):(r=new vi(e,t),e.__tabsterInstance=r,r.createTabster())}(t,{autoRoot:{},controlTab:!1,getParent:Ci,checkUncontrolledTrappingFocus:e=>{var t;return!!(null===(t=e.firstElementChild)||void 0===t?void 0:t.hasAttribute("data-is-focus-trap-zone-bumper"))},DOMAPI:r})}(t);if(i)return r.current=e(i),()=>{!function(e){e.core.disposeTabster(e,void 0)}(i),r.current=null}},[t,e]),r}const Ii=e=>{Si();const t=Yr(e,!0);return w.useMemo(()=>({[or]:t}),[t])};function Ai(e){switch(e){case"horizontal":return 2;case"grid":return 3;case"grid-linear":return 4;case"both":return 0;default:return 1}}const Oi=e=>{const[t,r]=w.useState(()=>void 0===e.defaultState?e.initialState:"function"==typeof e.defaultState?e.defaultState():e.defaultState),i=w.useRef(e.state);w.useEffect(()=>{i.current=e.state},[e.state]);const n=w.useCallback(e=>{(function(e){return"function"==typeof e})(e)&&e(i.current)},[]);return Ni(e.state)?[e.state,n]:[t,r]},Ni=e=>{const[t]=w.useState(()=>void 0!==e);return t},Ri=e=>{const t=w.useRef(()=>{throw new Error("Cannot call an event handler while rendering")});return Ti(()=>{t.current=e},[e]),w.useCallback((...e)=>(0,t.current)(...e),[t])},Pi=Symbol.for("fui.slotRenderFunction"),Di=Symbol.for("fui.slotElementType"),Bi=Symbol.for("fui.slotClassNameProp");function Mi(e,t){const{defaultProps:r,elementType:i}=t,n=function(e){return"string"==typeof e||"number"==typeof e||zi(e)||w.isValidElement(e)?{children:e}:e}(e),o={...r,...n,[Di]:i,[Bi]:null==n?void 0:n.className};return n&&"function"==typeof n.children&&(o[Pi]=n.children,o.children=null==r?void 0:r.children),o}function Li(e,t){if(null!==e&&(void 0!==e||t.renderByDefault))return Mi(e,t)}const zi=e=>"object"==typeof e&&null!==e&&Symbol.iterator in e,Fi=(...e)=>{const t={};for(const r of e){const e=Array.isArray(r)?r:Object.keys(r);for(const r of e)t[r]=1}return t},ji=Fi(["onAuxClick","onAnimationEnd","onAnimationStart","onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),Hi=Fi(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),qi=Fi(["itemID","itemProp","itemRef","itemScope","itemType"]),Ui=Fi(Hi,ji,qi),Gi=Fi(Ui,["form"]),Wi=Fi(Ui,["height","loop","muted","preload","src","width"]),Vi=Fi(Wi,["poster"]),Ki=Fi(Ui,["start"]),$i=Fi(Ui,["value"]),Yi=Fi(Ui,["download","href","hrefLang","media","rel","target","type"]),Ji=Fi(Ui,["dateTime"]),Xi=Fi(Ui,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),Zi={label:Gi,audio:Wi,video:Vi,ol:Ki,li:$i,a:Yi,button:Xi,input:Fi(Xi,["accept","alt","autoCorrect","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),textarea:Fi(Xi,["autoCapitalize","cols","dirname","form","maxLength","placeholder","readOnly","required","rows","wrap"]),select:Fi(Xi,["form","multiple","required"]),option:Fi(Ui,["selected","value"]),table:Fi(Ui,["cellPadding","cellSpacing"]),tr:Ui,th:Fi(Ui,["colSpan","rowSpan","scope"]),td:Fi(Ui,["colSpan","headers","rowSpan","scope"]),colGroup:Fi(Ui,["span"]),col:Fi(Ui,["span"]),fieldset:Fi(Ui,["disabled","form"]),form:Fi(Ui,["acceptCharset","action","encType","encType","method","noValidate","target"]),iframe:Fi(Ui,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]),img:Fi(Ui,["alt","crossOrigin","height","src","srcSet","useMap","width"]),time:Ji,dialog:Fi(Ui,["open","onCancel","onClose"])};function Qi(e,t,r){const i=e&&Zi[e]||Ui;return i.as=1,function(e,t,r){const i=Array.isArray(t),n={},o=Object.keys(e);for(const s of o)!(!i&&t[s]||i&&t.indexOf(s)>=0||0===s.indexOf("data-")||0===s.indexOf("aria-"))||r&&-1!==(null==r?void 0:r.indexOf(s))||(n[s]=e[s]);return n}(t,i,r)}const en=({primarySlotTagName:e,props:t,excludedPropNames:r})=>({root:{style:t.style,className:t.className},primary:Qi(e,t,[...r||[],"style","className"])}),tn=(e,t,r)=>{var i;return Qi(null!==(i=t.as)&&void 0!==i?i:e,t,r)};function rn(...e){const t=w.useCallback(r=>{t.current=r;for(const t of e)"function"==typeof t?t(r):t&&(t.current=r)},[...e]);return t}function nn(e){return Boolean(null==e?void 0:e.hasOwnProperty(Di))}function on(e,t){return function(r,i,n,o,s){return nn(i)?t(function(e,t){return{...t,[Di]:e}}(r,i),null,n,o,s):nn(r)?t(r,i,n,o,s):e(r,i,n,o,s)}}function sn(e){const{as:t,[Bi]:r,[Di]:i,[Pi]:n,...o}=e,s=o,a="string"==typeof i&&null!=t?t:i;return"string"!=typeof a&&t&&(s.as=t),{elementType:a,props:s,renderFunction:n}}r(44363);var an=r(74848);const ln=r.t(an,2),cn=on(ln.jsx,(e,t,r)=>{const{elementType:i,renderFunction:n,props:o}=sn(e),s={...o,...t};return n?ln.jsx(w.Fragment,{children:n(i,s)},r):ln.jsx(i,s,r)}),un=on(ln.jsxs,(e,t,r)=>{const{elementType:i,renderFunction:n,props:o}=sn(e),s={...o,...t};return n?ln.jsx(w.Fragment,{children:n(i,{...s,children:ln.jsxs(w.Fragment,{children:s.children},void 0)})},r):ln.jsxs(i,s,r)});var dn=r(69982);const mn=e=>{const t=w.createContext({value:{current:e},version:{current:-1},listeners:[]});var r;return t.Provider=(r=t.Provider,e=>{const t=w.useRef(e.value),i=w.useRef(0),n=w.useRef();return n.current||(n.current={value:t,version:i,listeners:[]}),Ti(()=>{t.current=e.value,i.current+=1,(0,dn.unstable_runWithPriority)(dn.unstable_NormalPriority,()=>{n.current.listeners.forEach(t=>{t([i.current,e.value])})})},[e.value]),w.createElement(r,{value:n.current},e.children)}),delete t.Consumer,t},pn=(e,t)=>{const r=w.useContext(e),{value:{current:i},version:{current:n},listeners:o}=r,s=t(i),[a,l]=w.useState([i,s]),c=e=>{l(r=>{if(!e)return[i,s];if(e[0]<=n)return Object.is(r[1],s)?r:[i,s];try{if(Object.is(r[0],e[1]))return r;const i=t(e[1]);return Object.is(r[1],i)?r:[e[1],i]}catch(e){}return[r[0],r[1]]})};Object.is(a[1],s)||c(void 0);const u=Ri(c);return Ti(()=>(o.push(u),()=>{const e=o.indexOf(u);o.splice(e,1)}),[u,o]),a[1]},hn={appearance:"transparent",reserveSelectedTabSpace:!0,selectTabOnFocus:!1,disabled:!1,selectedValue:void 0,onRegister:()=>{},onUnregister:()=>{},onSelect:()=>{},getRegisteredTabs:()=>({registeredTabs:{}}),size:"medium",vertical:!1},fn=mn(void 0),gn=fn.Provider,vn=e=>pn(fn,(t=hn)=>e(t));function bn(e,t,r=T){const i=r();let n=null,o=null;return function(r){const{dir:s,renderer:a}=r,l="ltr"===s;return l?null===n&&(n=Rt(e,s)):null===o&&(o=Rt(e,s)),i(a,t),l?n:o}}function yn(e,t){const r=bn(e,t,Dt);return function(){const e=Vt(),t=Ut();return r({dir:e,renderer:t})}}const _n={};function xn(){let e=null,t="",r="";const i=new Array(arguments.length);for(let e=0;e<arguments.length;e++){const n=arguments[e];if("string"==typeof n&&""!==n){const o=n.indexOf("___");if(-1===o)t+=n+" ";else{const s=n.substr(o,10);o>0&&(t+=n.slice(0,o)),r+=s,i[e]=s}}}if(""===r)return t.slice(0,-1);const n=_n[r];if(void 0!==n)return t+n;const o=[];for(let t=0;t<arguments.length;t++){const r=i[t];if(r){const t=G[r];t&&(o.push(t[0]),e=t[1])}}const s=Object.assign.apply(Object,[{}].concat(o)),[a,l]=Nt(s,e),c=Ot(l,e,i),u=c+" "+a;return _n[r]=u,G[c]=[s,e],t+u}const wn=yn({root:{mc9l5x:"f22iagw",Beiy3e4:"f1063pyq",Bnnss6s:"fi64zpg",Eh141a:"flvyvdh",qhf8xq:"f10pi13n"},horizontal:{Bt984gj:"f1q9h2pe",Beiy3e4:"f1063pyq"},vertical:{Bt984gj:"f1q9h2pe",Beiy3e4:"f1vx9l62"},roundedSmall:{i8kkvl:0,Belr9w4:0,rmohyg:"f1eyhf9v"},rounded:{i8kkvl:0,Belr9w4:0,rmohyg:"faqewft"}},{d:[".f22iagw{display:flex;}",".f1063pyq{flex-direction:row;}",".fi64zpg{flex-shrink:0;}",".flvyvdh{flex-wrap:nowrap;}",".f10pi13n{position:relative;}",".f1q9h2pe{align-items:stretch;}",".f1vx9l62{flex-direction:column;}",[".f1eyhf9v{gap:var(--spacingHorizontalSNudge);}",{p:-1}],[".faqewft{gap:var(--spacingHorizontalS);}",{p:-1}]]}),Cn=w.createContext(void 0),kn=()=>{},Tn=Cn.Provider,En=e=>{var t,r;return null!==(r=null===(t=w.useContext(Cn))||void 0===t?void 0:t[e])&&void 0!==r?r:kn},Sn=w.forwardRef((e,t)=>{const r=((e,t)=>{const{appearance:r="transparent",reserveSelectedTabSpace:i=!0,disabled:n=!1,onTabSelect:o,selectTabOnFocus:s=!1,size:a="medium",vertical:l=!1}=e,c=w.useRef(null),u=((e={})=>{const{circular:t,axis:r,memorizeCurrent:i=!0,tabbable:n,ignoreDefaultKeydown:o,unstable_hasDefault:s}=e;return Si(bi),Ii({mover:{cyclic:!!t,direction:Ai(null!=r?r:"vertical"),memorizeCurrent:i,tabbable:n,hasDefault:s},...o&&{focusable:{ignoreKeydown:o}}})})({circular:!0,axis:l?"vertical":"horizontal",memorizeCurrent:!1,unstable_hasDefault:!0}),[d,m]=Oi({state:e.selectedValue,defaultState:e.defaultSelectedValue,initialState:void 0}),p=w.useRef(void 0),h=w.useRef(void 0);w.useEffect(()=>{h.current=p.current,p.current=d},[d]);const f=Ri((e,t)=>{m(t.value),null==o||o(e,t)}),g=w.useRef({}),v=Ri(e=>{const t=JSON.stringify(e.value);g.current[t]=e}),b=Ri(e=>{delete g.current[JSON.stringify(e.value)]}),y=w.useCallback(()=>({selectedValue:p.current,previousSelectedValue:h.current,registeredTabs:g.current}),[]);return{components:{root:"div"},root:Mi(tn("div",{ref:rn(t,c),role:"tablist","aria-orientation":l?"vertical":"horizontal",...u,...e}),{elementType:"div"}),appearance:r,reserveSelectedTabSpace:i,disabled:n,selectTabOnFocus:s,selectedValue:d,size:a,vertical:l,onRegister:v,onUnregister:b,onSelect:f,getRegisteredTabs:y}})(e,t),i=function(e){const{appearance:t,reserveSelectedTabSpace:r,disabled:i,selectTabOnFocus:n,selectedValue:o,onRegister:s,onUnregister:a,onSelect:l,getRegisteredTabs:c,size:u,vertical:d}=e;return{tabList:{appearance:t,reserveSelectedTabSpace:r,disabled:i,selectTabOnFocus:n,selectedValue:o,onSelect:l,onRegister:s,onUnregister:a,getRegisteredTabs:c,size:u,vertical:d}}}(r);return(e=>{const{appearance:t,vertical:r,size:i}=e,n=wn(),o="subtle-circular"===t||"filled-circular"===t;e.root.className=xn("fui-TabList",n.root,r?n.vertical:n.horizontal,o&&("small"===i?n.roundedSmall:n.rounded),e.root.className)})(r),En("useTabListStyles_unstable")(r),((e,t)=>cn(e.root,{children:cn(gn,{value:t.tabList,children:e.root.children})}))(r,i)});function In(e,t){return(...r)=>{null==e||e(...r),null==t||t(...r)}}function An(e,t){const r=w.useRef(void 0),i=w.useCallback((i,n)=>(void 0!==r.current&&t(r.current),r.current=e(i,n),r.current),[t,e]),n=w.useCallback(()=>{void 0!==r.current&&(t(r.current),r.current=void 0)},[t]);return w.useEffect(()=>n,[n]),[i,n]}Sn.displayName="TabList";const On=e=>(e(0),0),Nn=e=>e,Rn="--fui-Tab__indicator--offset",Pn="--fui-Tab__indicator--scale",Dn=yn({base:{B68tc82:0,Bmxbyg5:0,Bpg54ce:"f1gl81tg"},animated:{Ba2ppi3:"fhwpy7i",F2fol1:"f6zz20j",B1dyfl9:"f1ai4sc1",B0vmy72:"f9qxlq5",u9bimw:"f1aql376"},horizontal:{sjv3b2:["fug4aj8","f1i5xzg7"],b1kco5:"f1q7ujh"},vertical:{sjv3b2:"f1hqboyk",b1kco5:"f1dxupa6"}},{d:[[".f1gl81tg{overflow:visible;}",{p:-1}],".fhwpy7i::after{transition-property:transform;}",".f6zz20j::after{transition-duration:var(--durationSlow);}",".f1ai4sc1::after{transition-timing-function:var(--curveDecelerateMax);}",".fug4aj8::after{transform-origin:left;}",".f1i5xzg7::after{transform-origin:right;}",".f1q7ujh::after{transform:translateX(var(--fui-Tab__indicator--offset)) scaleX(var(--fui-Tab__indicator--scale));}",".f1hqboyk::after{transform-origin:top;}",".f1dxupa6::after{transform:translateY(var(--fui-Tab__indicator--offset)) scaleY(var(--fui-Tab__indicator--scale));}"],m:[["@media (prefers-reduced-motion: reduce){.f9qxlq5::after{transition-property:none;}}",{m:"(prefers-reduced-motion: reduce)"}],["@media (prefers-reduced-motion: reduce){.f1aql376::after{transition-duration:0.01ms;}}",{m:"(prefers-reduced-motion: reduce)"}]]}),Bn=(e,t)=>{var r;const i=Mn(t)?null===(r=e[JSON.stringify(t)])||void 0===r?void 0:r.ref.current:void 0;return i?(e=>{if(e){var t;const r=(null===(t=e.parentElement)||void 0===t?void 0:t.getBoundingClientRect())||{x:0,y:0,width:0,height:0},i=e.getBoundingClientRect();return{x:i.x-r.x,y:i.y-r.y,width:i.width,height:i.height}}})(i):void 0},Mn=e=>null!=e,Ln=yn({root:{Bt984gj:"f122n59",mc9l5x:"f13qh94s",Bnnss6s:"fi64zpg",Bxotwcr:"f1u07yai",Budl1dq:"frn2hmy",wkccdc:"f1olsevy",oeaueh:"f1s6fcnf",qhf8xq:"f10pi13n"},button:{Bt984gj:"f122n59",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f3bhgqh",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",Bceei9c:"f1k6fduh",mc9l5x:"f13qh94s",Bnnss6s:"fi64zpg",Bxotwcr:"f1u07yai",Budl1dq:"frn2hmy",wkccdc:"f1olsevy",Bahqtrf:"fk6fouc",Bg96gwp:"f1i3iumi",oeaueh:"f1s6fcnf",qhf8xq:"f10pi13n",B68tc82:0,Bmxbyg5:0,Bpg54ce:"f1a3p1vp",B9bfxx9:"f1cxpek8"},horizontal:{Brf1p80:"f4d9j23"},vertical:{Brf1p80:"f1s9ku6b"},smallHorizontal:{i8kkvl:"f14mj54c",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1wmopi4"},smallVertical:{i8kkvl:"f14mj54c",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f12or63q"},mediumHorizontal:{i8kkvl:"f1rjii52",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1w08f2p"},mediumVertical:{i8kkvl:"f1rjii52",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"fymxs25"},largeHorizontal:{i8kkvl:"f1rjii52",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1ssfvub"},largeVertical:{i8kkvl:"f1rjii52",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"fwkd1rq"},transparent:{De3pzq:"f1c21dwh",B95qlz1:"f9rvdkv",B7xitij:"f1051ucx",Bptxc3x:"fmmjozx",Bwqhzpy:"fqhzt5g",iyk698:"f7l5cgy",cl4aha:"fpkze5g",B0q3jbp:"f1iywnoi",Be9ayug:"f9n45c4"},subtle:{De3pzq:"fhovq9v",B95qlz1:"f1bifk9c",B7xitij:"fo6hitd",Bptxc3x:"fmmjozx",Bwqhzpy:"fqhzt5g",iyk698:"f7l5cgy",cl4aha:"fpkze5g",B0q3jbp:"f1iywnoi",Be9ayug:"f9n45c4"},disabledCursor:{Bceei9c:"fdrzuqr"},disabled:{De3pzq:"f1c21dwh",Bptxc3x:"fato7r6",cl4aha:"fao1bnu"},selected:{Bptxc3x:"f1cadz5z",Bwqhzpy:"fwhdxxj",iyk698:"fintccb",cl4aha:"ffplhdr",B0q3jbp:"fjo17wb",Be9ayug:"f148789c"}},{d:[".f122n59{align-items:center;}",".f13qh94s{display:grid;}",".fi64zpg{flex-shrink:0;}",".f1u07yai{grid-auto-flow:column;}",".frn2hmy{grid-template-columns:auto;}",".f1olsevy{grid-template-rows:auto;}",".f1s6fcnf{outline-style:none;}",".f10pi13n{position:relative;}",[".f3bhgqh{border:none;}",{p:-2}],[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".f1k6fduh{cursor:pointer;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",[".f1a3p1vp{overflow:hidden;}",{p:-1}],".f1cxpek8{text-transform:none;}",".f4d9j23{justify-content:center;}",".f1s9ku6b{justify-content:start;}",".f14mj54c{column-gap:var(--spacingHorizontalXXS);}",[".f1wmopi4{padding:var(--spacingVerticalSNudge) var(--spacingHorizontalSNudge);}",{p:-1}],[".f12or63q{padding:var(--spacingVerticalXXS) var(--spacingHorizontalSNudge);}",{p:-1}],".f1rjii52{column-gap:var(--spacingHorizontalSNudge);}",[".f1w08f2p{padding:var(--spacingVerticalM) var(--spacingHorizontalMNudge);}",{p:-1}],[".fymxs25{padding:var(--spacingVerticalSNudge) var(--spacingHorizontalMNudge);}",{p:-1}],[".f1ssfvub{padding:var(--spacingVerticalL) var(--spacingHorizontalMNudge);}",{p:-1}],[".fwkd1rq{padding:var(--spacingVerticalS) var(--spacingHorizontalMNudge);}",{p:-1}],".f1c21dwh{background-color:var(--colorTransparentBackground);}",".f9rvdkv:enabled:hover{background-color:var(--colorTransparentBackgroundHover);}",".f1051ucx:enabled:active{background-color:var(--colorTransparentBackgroundPressed);}",".fmmjozx .fui-Tab__icon{color:var(--colorNeutralForeground2);}",".fqhzt5g:enabled:hover .fui-Tab__icon{color:var(--colorNeutralForeground2Hover);}",".f7l5cgy:enabled:active .fui-Tab__icon{color:var(--colorNeutralForeground2Pressed);}",".fpkze5g .fui-Tab__content{color:var(--colorNeutralForeground2);}",".f1iywnoi:enabled:hover .fui-Tab__content{color:var(--colorNeutralForeground2Hover);}",".f9n45c4:enabled:active .fui-Tab__content{color:var(--colorNeutralForeground2Pressed);}",".fhovq9v{background-color:var(--colorSubtleBackground);}",".f1bifk9c:enabled:hover{background-color:var(--colorSubtleBackgroundHover);}",".fo6hitd:enabled:active{background-color:var(--colorSubtleBackgroundPressed);}",".fdrzuqr{cursor:not-allowed;}",".fato7r6 .fui-Tab__icon{color:var(--colorNeutralForegroundDisabled);}",".fao1bnu .fui-Tab__content{color:var(--colorNeutralForegroundDisabled);}",".f1cadz5z .fui-Tab__icon{color:var(--colorCompoundBrandForeground1);}",".fwhdxxj:enabled:hover .fui-Tab__icon{color:var(--colorCompoundBrandForeground1Hover);}",".fintccb:enabled:active .fui-Tab__icon{color:var(--colorCompoundBrandForeground1Pressed);}",".ffplhdr .fui-Tab__content{color:var(--colorNeutralForeground1);}",".fjo17wb:enabled:hover .fui-Tab__content{color:var(--colorNeutralForeground1Hover);}",".f148789c:enabled:active .fui-Tab__content{color:var(--colorNeutralForeground1Pressed);}"]}),zn=yn({base:{Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"f44lkw9",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fp7rvkm",Bptxc3x:"ftorr8m",cl4aha:"f16lqpmv"},small:{Dbcxam:0,rjzwhg:0,Bblux5w:"fzklhed"},medium:{Dbcxam:0,rjzwhg:0,Bblux5w:"f1j721cc"},large:{Dbcxam:0,rjzwhg:0,Bblux5w:"frx9knr"},subtle:{De3pzq:"fhovq9v",sj55zd:"fkfq4zb",B95qlz1:"f1bifk9c",Eo63ln:0,r9osk6:0,Itrz8y:0,zeg6vx:0,l65xgk:0,Bw4olcx:0,Folb0i:0,I2h8y4:0,Bgxgoyi:0,Bvlkotb:0,Fwyncl:0,Byh5edv:0,Becqvjq:0,uumbiq:0,B73q3dg:0,Bblwbaf:0,B0ezav:"ft57sj0",r4wkhp:"f1fcoy83",B7xitij:"fo6hitd",d3wsvi:0,Hdqn7s:0,zu5y1p:0,owqphb:0,g9c53k:0,Btmu08z:0,Bthxvy6:0,gluvuq:0,tb88gp:0,wns6jk:0,kdfdk4:0,Bbw008l:0,Bayi1ib:0,B1kkfu3:0,J1oqyp:0,kem6az:0,goa3yj:"fhn220o",p743kt:"f15qf7sh",uu68id:0,Bxeuatn:0,felo30:0,Bc736ss:0,Bhz882k:0,n51gp8:0,Eshu5l:0,Bk6ri7n:0,v49c4f:0,Bn1d65q:0,c4eypz:0,v3aym:0,hft9gk:0,Bjwas2f:0,Bk5ld8o:0,gwxt9v:0,B6k8go:"f130w16x"},subtleSelected:{De3pzq:"f16xkysk",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f1c2pc3t",sj55zd:"faj9fo0",B95qlz1:"fsm7zmf",Eo63ln:0,r9osk6:0,Itrz8y:0,zeg6vx:0,l65xgk:0,Bw4olcx:0,Folb0i:0,I2h8y4:0,Bgxgoyi:0,Bvlkotb:0,Fwyncl:0,Byh5edv:0,Becqvjq:0,uumbiq:0,B73q3dg:0,Bblwbaf:0,B0ezav:"f1wo0sfq",r4wkhp:"f1afuynh",B7xitij:"f94ddyl",d3wsvi:0,Hdqn7s:0,zu5y1p:0,owqphb:0,g9c53k:0,Btmu08z:0,Bthxvy6:0,gluvuq:0,tb88gp:0,wns6jk:0,kdfdk4:0,Bbw008l:0,Bayi1ib:0,B1kkfu3:0,J1oqyp:0,kem6az:0,goa3yj:"fmle6oo",p743kt:"f1d3itm4",uu68id:0,Bxeuatn:0,felo30:0,Bc736ss:0,Bhz882k:0,n51gp8:0,Eshu5l:0,Bk6ri7n:0,v49c4f:0,Bn1d65q:0,c4eypz:0,v3aym:0,hft9gk:0,Bjwas2f:0,Bk5ld8o:0,gwxt9v:0,B6k8go:"f19qjb1h"},subtleDisabled:{De3pzq:"fhovq9v",sj55zd:"f1s2aq7o"},subtleDisabledSelected:{De3pzq:"f1bg9a2p",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fegtqic",sj55zd:"f1s2aq7o"},filled:{De3pzq:"f16xq7d1",sj55zd:"fkfq4zb",B95qlz1:"fwwxidx",r4wkhp:"f1fcoy83",B7xitij:"f14i52sd",p743kt:"f15qf7sh",Bw5j0gk:"f159yq2d",Baikq8m:"ful0ncq",B2ndh17:"f2rulcp",w0x64w:"f19p5z4e",Bdzpij4:"fo1bcu3"},filledSelected:{De3pzq:"ffp7eso",sj55zd:"f1phragk",B95qlz1:"f1lm9dni",r4wkhp:"f1mn5ei1",B7xitij:"f1g6ncd0",p743kt:"fl71aob",bml8oc:"f13s88zn",qew46a:"f16zjd40",B84x17g:"f1mr3uue",Jetwu1:"f196ywdt"},filledDisabled:{De3pzq:"f1bg9a2p",sj55zd:"f1s2aq7o"},filledDisabledSelected:{De3pzq:"f1bg9a2p",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fegtqic",sj55zd:"f1s2aq7o"}},{d:[[".f44lkw9{border-radius:var(--borderRadiusCircular);}",{p:-1}],[".fp7rvkm{border:solid var(--strokeWidthThin) var(--colorTransparentStroke);}",{p:-2}],".ftorr8m .fui-Tab__icon{color:inherit;}",".f16lqpmv .fui-Tab__content{color:inherit;}",[".fzklhed{padding-block:calc(var(--spacingVerticalXXS) - var(--strokeWidthThin));}",{p:-1}],[".f1j721cc{padding-block:calc(var(--spacingVerticalSNudge) - var(--strokeWidthThin));}",{p:-1}],[".frx9knr{padding-block:calc(var(--spacingVerticalS) - var(--strokeWidthThin));}",{p:-1}],".fhovq9v{background-color:var(--colorSubtleBackground);}",".fkfq4zb{color:var(--colorNeutralForeground2);}",".f1bifk9c:enabled:hover{background-color:var(--colorSubtleBackgroundHover);}",[".ft57sj0:enabled:hover{border:solid var(--strokeWidthThin) var(--colorNeutralStroke1Hover);}",{p:-2}],".f1fcoy83:enabled:hover{color:var(--colorNeutralForeground2Hover);}",".fo6hitd:enabled:active{background-color:var(--colorSubtleBackgroundPressed);}",[".fhn220o:enabled:active{border:solid var(--strokeWidthThin) var(--colorNeutralStroke1Pressed);}",{p:-2}],".f15qf7sh:enabled:active{color:var(--colorNeutralForeground2Pressed);}",".f16xkysk{background-color:var(--colorBrandBackground2);}",[".f1c2pc3t{border:solid var(--strokeWidthThin) var(--colorCompoundBrandStroke);}",{p:-2}],".faj9fo0{color:var(--colorBrandForeground2);}",".fsm7zmf:enabled:hover{background-color:var(--colorBrandBackground2Hover);}",[".f1wo0sfq:enabled:hover{border:solid var(--strokeWidthThin) var(--colorCompoundBrandStrokeHover);}",{p:-2}],".f1afuynh:enabled:hover{color:var(--colorBrandForeground2Hover);}",".f94ddyl:enabled:active{background-color:var(--colorBrandBackground2Pressed);}",[".fmle6oo:enabled:active{border:solid var(--strokeWidthThin) var(--colorCompoundBrandStrokePressed);}",{p:-2}],".f1d3itm4:enabled:active{color:var(--colorBrandForeground2Pressed);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".f1bg9a2p{background-color:var(--colorNeutralBackgroundDisabled);}",[".fegtqic{border:solid var(--strokeWidthThin) var(--colorNeutralStrokeDisabled);}",{p:-2}],".f16xq7d1{background-color:var(--colorNeutralBackground3);}",".fwwxidx:enabled:hover{background-color:var(--colorNeutralBackground3Hover);}",".f14i52sd:enabled:active{background-color:var(--colorNeutralBackground3Pressed);}",".ffp7eso{background-color:var(--colorBrandBackground);}",".f1phragk{color:var(--colorNeutralForegroundOnBrand);}",".f1lm9dni:enabled:hover{background-color:var(--colorBrandBackgroundHover);}",".f1mn5ei1:enabled:hover{color:var(--colorNeutralForegroundOnBrand);}",".f1g6ncd0:enabled:active{background-color:var(--colorBrandBackgroundPressed);}",".fl71aob:enabled:active{color:var(--colorNeutralForegroundOnBrand);}",[".fegtqic{border:solid var(--strokeWidthThin) var(--colorNeutralStrokeDisabled);}",{p:-2}]],m:[["@media (forced-colors: active){.f130w16x{border:solid var(--strokeWidthThin) Canvas;}}",{p:-2,m:"(forced-colors: active)"}],["@media (forced-colors: active){.f19qjb1h{border:solid var(--strokeWidthThin) Highlight;}}",{p:-2,m:"(forced-colors: active)"}],["@media (forced-colors: active){.f159yq2d:enabled:hover{background-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.ful0ncq:enabled:hover{forced-color-adjust:none;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f2rulcp:enabled:hover .fui-Tab__content{color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f19p5z4e:enabled:hover .fui-Icon-filled{color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fo1bcu3:enabled:hover .fui-Icon-regular{color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f13s88zn:enabled{background-color:ButtonText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f16zjd40:enabled .fui-Tab__content{color:ButtonFace;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1mr3uue:enabled .fui-Tab__content{forced-color-adjust:none;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f196ywdt:enabled .fui-Tab__icon{color:ButtonFace;}}",{m:"(forced-colors: active)"}]]}),Fn=yn({base:{B8q5s1w:"f8hki3x",Bci5o5g:["f1d2448m","ffh67wi"],n8qw10:"f1bjia2o",Bdrgwmp:["ffh67wi","f1d2448m"],Bn4voq9:"f1p7hgxw",Bfpq7zp:"f1way5bb",g9k6zt:"f9znhxp",j6ew2k:["fqa318h","fqa318h"],Bhxq17a:"f1vjpng2"},circular:{B8q5s1w:"f8hki3x",Bci5o5g:["f1d2448m","ffh67wi"],n8qw10:"f1bjia2o",Bdrgwmp:["ffh67wi","f1d2448m"],Bn4voq9:"f1p7hgxw",Bfpq7zp:"f1way5bb",g9k6zt:"f9znhxp",j6ew2k:["fzgyhws","fqxug60"],Bhxq17a:"f1vjpng2"}},{d:[".f8hki3x[data-fui-focus-visible]{border-top-color:transparent;}",".f1d2448m[data-fui-focus-visible]{border-right-color:transparent;}",".ffh67wi[data-fui-focus-visible]{border-left-color:transparent;}",".f1bjia2o[data-fui-focus-visible]{border-bottom-color:transparent;}",".f1p7hgxw[data-fui-focus-visible]{outline-width:var(--strokeWidthThick);}",".f1way5bb[data-fui-focus-visible]{outline-color:transparent;}",".f9znhxp[data-fui-focus-visible]{outline-style:solid;}",".fqa318h[data-fui-focus-visible]{box-shadow:var(--shadow4),0 0 0 var(--strokeWidthThick) var(--colorStrokeFocus2);}",".f1vjpng2[data-fui-focus-visible]{z-index:1;}",".fzgyhws[data-fui-focus-visible]{box-shadow:var(--shadow4),0 0 0 var(--strokeWidthThick) var(--colorStrokeFocus2),0 0 0 var(--strokeWidthThin) var(--colorNeutralStrokeOnBrand) inset;}",".fqxug60[data-fui-focus-visible]{box-shadow:var(--shadow4),0 0 0 var(--strokeWidthThick) var(--colorStrokeFocus2),0 0 0 var(--strokeWidthThin) var(--colorNeutralStrokeOnBrand) inset;}"]}),jn=yn({base:{az7l2e:"fhw179n",vqofr:0,Bv4n3vi:0,Bgqb9hq:0,B0uxbk8:0,Bf3jju6:"fg9j5n4",amg5m6:"f1kmhr4c",zkfqfm:"fl1ydde",Bkydozb:"f1y7maxz",Bka2azo:0,vzq8l0:0,csmgbd:0,Br4ovkg:0,aelrif:"fceyvr4",y36c18:"f16cxu0",B1ctymy:"f1nwgacf",Bgvrrv0:"f15ovonk",ddr6p5:"fvje46l"},disabled:{az7l2e:"f1ut20fw",Bkydozb:"fhrzcfn",Bgvrrv0:"f1v15rkt",ddr6p5:"f3nwrnk"},smallHorizontal:{lawp4y:"fchca7p",Baz25je:"f1r53b5e",Fbdkly:["f1s6rxz5","fo35v8s"],mdwyqc:["fo35v8s","f1s6rxz5"]},smallVertical:{lawp4y:"fze4zud",Fbdkly:["f1fzr1x6","f1f351id"],Bciustq:"fdp32p8",Ccq8qp:"f1aij3q"},mediumHorizontal:{lawp4y:"fchca7p",Baz25je:"f1s2r9ax",Fbdkly:["f1o0nnkk","fxb7rol"],mdwyqc:["fxb7rol","f1o0nnkk"]},mediumVertical:{lawp4y:"f17jracn",Fbdkly:["f1fzr1x6","f1f351id"],Bciustq:"f117lcb2",Ccq8qp:"f1aij3q"},largeHorizontal:{lawp4y:"fchca7p",Baz25je:"f1s2r9ax",Fbdkly:["f1o0nnkk","fxb7rol"],mdwyqc:["fxb7rol","f1o0nnkk"]},largeVertical:{lawp4y:"fel9d3z",Fbdkly:["f1fzr1x6","f1f351id"],Bciustq:"f6vqlre",Ccq8qp:"f1aij3q"}},{h:[".fhw179n:hover::before{background-color:var(--colorNeutralStroke1Hover);}",[".fg9j5n4:hover::before{border-radius:var(--borderRadiusCircular);}",{p:-1}],'.f1kmhr4c:hover::before{content:"";}',".fl1ydde:hover::before{position:absolute;}",".f1ut20fw:hover::before{background-color:var(--colorTransparentStroke);}"],a:[".f1y7maxz:active::before{background-color:var(--colorNeutralStroke1Pressed);}",[".fceyvr4:active::before{border-radius:var(--borderRadiusCircular);}",{p:-1}],'.f16cxu0:active::before{content:"";}',".f1nwgacf:active::before{position:absolute;}",".fhrzcfn:active::before{background-color:var(--colorTransparentStroke);}"],m:[["@media (forced-colors: active){.f15ovonk:hover::before{background-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fvje46l:active::before{background-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1v15rkt:hover::before{background-color:transparent;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f3nwrnk:active::before{background-color:transparent;}}",{m:"(forced-colors: active)"}]],d:[".fchca7p::before{bottom:0;}",".f1r53b5e::before{height:var(--strokeWidthThick);}",".f1s6rxz5::before{left:var(--spacingHorizontalSNudge);}",".fo35v8s::before{right:var(--spacingHorizontalSNudge);}",".fze4zud::before{bottom:var(--spacingVerticalXS);}",".f1fzr1x6::before{left:0;}",".f1f351id::before{right:0;}",".fdp32p8::before{top:var(--spacingVerticalXS);}",".f1aij3q::before{width:var(--strokeWidthThicker);}",".f1s2r9ax::before{height:var(--strokeWidthThicker);}",".f1o0nnkk::before{left:var(--spacingHorizontalM);}",".fxb7rol::before{right:var(--spacingHorizontalM);}",".f17jracn::before{bottom:var(--spacingVerticalS);}",".f117lcb2::before{top:var(--spacingVerticalS);}",".fel9d3z::before{bottom:var(--spacingVerticalMNudge);}",".f6vqlre::before{top:var(--spacingVerticalMNudge);}"]}),Hn=yn({base:{Bjyk6c5:"f1rp0jgh",d9w3h3:0,B3778ie:0,B4j8arr:0,Bl18szs:0,Blrzh8d:"f3b9emi",Bsft5z2:"f13zj6fq",E3zdtr:"f1mdlcz9"},selected:{Bjyk6c5:"f1ksivud",Bej4dhw:"f1476jrx",B7wqxwa:"f18q216b",f7digc:"fy7ktjt",Bvuzv5k:"f1033yux",k4sdgo:"fkh9b8o"},disabled:{Bjyk6c5:"f13lkzet"},smallHorizontal:{By385i5:"fo72kxq",Dlnsje:"f9bb2ob",Eqx8gd:["f1q70ajw","f18rbzdx"],B1piin3:["f18rbzdx","f1q70ajw"]},smallVertical:{By385i5:"fqbue9b",Eqx8gd:["f1n6gb5g","f15yvnhg"],bn5sak:"fk1klkt",a2br6o:"f1o25lip"},mediumHorizontal:{By385i5:"fo72kxq",Dlnsje:"f1vx7lu8",Eqx8gd:["fna7m5n","f1oxpfwv"],B1piin3:["f1oxpfwv","fna7m5n"]},mediumVertical:{By385i5:"fipylg0",Eqx8gd:["f1n6gb5g","f15yvnhg"],bn5sak:"fqchiol",a2br6o:"f1o25lip"},largeHorizontal:{By385i5:"fo72kxq",Dlnsje:"f1vx7lu8",Eqx8gd:["fna7m5n","f1oxpfwv"],B1piin3:["f1oxpfwv","fna7m5n"]},largeVertical:{By385i5:"f1w7dm5g",Eqx8gd:["f1n6gb5g","f15yvnhg"],bn5sak:"f1p6em4m",a2br6o:"f1o25lip"}},{d:[".f1rp0jgh::after{background-color:var(--colorTransparentStroke);}",[".f3b9emi::after{border-radius:var(--borderRadiusCircular);}",{p:-1}],'.f13zj6fq::after{content:"";}',".f1mdlcz9::after{position:absolute;}",".f1ksivud::after{background-color:var(--colorCompoundBrandStroke);}",".f1476jrx:enabled:hover::after{background-color:var(--colorCompoundBrandStrokeHover);}",".f18q216b:enabled:active::after{background-color:var(--colorCompoundBrandStrokePressed);}",".f13lkzet::after{background-color:var(--colorNeutralForegroundDisabled);}",".fo72kxq::after{bottom:0;}",".f9bb2ob::after{height:var(--strokeWidthThick);}",".f1q70ajw::after{left:var(--spacingHorizontalSNudge);}",".f18rbzdx::after{right:var(--spacingHorizontalSNudge);}",".fqbue9b::after{bottom:var(--spacingVerticalXS);}",".f1n6gb5g::after{left:0;}",".f15yvnhg::after{right:0;}",".fk1klkt::after{top:var(--spacingVerticalXS);}",".f1o25lip::after{width:var(--strokeWidthThicker);}",".f1vx7lu8::after{height:var(--strokeWidthThicker);}",".fna7m5n::after{left:var(--spacingHorizontalM);}",".f1oxpfwv::after{right:var(--spacingHorizontalM);}",".fipylg0::after{bottom:var(--spacingVerticalS);}",".fqchiol::after{top:var(--spacingVerticalS);}",".f1w7dm5g::after{bottom:var(--spacingVerticalMNudge);}",".f1p6em4m::after{top:var(--spacingVerticalMNudge);}"],m:[["@media (forced-colors: active){.fy7ktjt::after{background-color:ButtonText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1033yux:enabled:hover::after{background-color:ButtonText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fkh9b8o:enabled:active::after{background-color:ButtonText;}}",{m:"(forced-colors: active)"}]]}),qn=yn({base:{Br312pm:"fwpfdsa",Ijaq50:"f16hsg94",Bt984gj:"f122n59",mc9l5x:"ftuwxu6",Brf1p80:"f4d9j23",B68tc82:0,Bmxbyg5:0,Bpg54ce:"f1a3p1vp",D0sxk3:"f16u1re",t6yez3:"f8bsbmo"},small:{Be2twd7:"fe5j1ua",Bqenvij:"fjamq6b",a9b677:"f64fuq3"},medium:{Be2twd7:"fe5j1ua",Bqenvij:"fjamq6b",a9b677:"f64fuq3"},large:{Be2twd7:"f1rt2boy",Bqenvij:"frvgh55",a9b677:"fq4mcun"},selected:{D0sxk3:"fxoiby5",t6yez3:"f15q0o9g"}},{d:[".fwpfdsa{grid-column-start:1;}",".f16hsg94{grid-row-start:1;}",".f122n59{align-items:center;}",".ftuwxu6{display:inline-flex;}",".f4d9j23{justify-content:center;}",[".f1a3p1vp{overflow:hidden;}",{p:-1}],".f16u1re .fui-Icon-filled{display:none;}",".f8bsbmo .fui-Icon-regular{display:inline;}",".fe5j1ua{font-size:20px;}",".fjamq6b{height:20px;}",".f64fuq3{width:20px;}",".f1rt2boy{font-size:24px;}",".frvgh55{height:24px;}",".fq4mcun{width:24px;}",".fxoiby5 .fui-Icon-filled{display:inline;}",".f15q0o9g .fui-Icon-regular{display:none;}"]}),Un=yn({base:{Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"figsok6",Bg96gwp:"f1i3iumi",B68tc82:0,Bmxbyg5:0,Bpg54ce:"f1a3p1vp",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1bwptpd"},selected:{Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"fl43uef",Bg96gwp:"f1i3iumi"},large:{Bahqtrf:"fk6fouc",Be2twd7:"fod5ikn",Bhrd7zp:"figsok6",Bg96gwp:"faaz57k"},largeSelected:{Bahqtrf:"fk6fouc",Be2twd7:"fod5ikn",Bhrd7zp:"fl43uef",Bg96gwp:"faaz57k"},noIconBefore:{Br312pm:"fwpfdsa",Ijaq50:"f16hsg94"},iconBefore:{Br312pm:"fd46tj4",Ijaq50:"f16hsg94"},placeholder:{Bcdw1i0:"fd7fpy0"}},{d:[".fk6fouc{font-family:var(--fontFamilyBase);}",".fkhj508{font-size:var(--fontSizeBase300);}",".figsok6{font-weight:var(--fontWeightRegular);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",[".f1a3p1vp{overflow:hidden;}",{p:-1}],[".f1bwptpd{padding:var(--spacingVerticalNone) var(--spacingHorizontalXXS);}",{p:-1}],".fl43uef{font-weight:var(--fontWeightSemibold);}",".fod5ikn{font-size:var(--fontSizeBase400);}",".faaz57k{line-height:var(--lineHeightBase400);}",".fwpfdsa{grid-column-start:1;}",".f16hsg94{grid-row-start:1;}",".fd46tj4{grid-column-start:2;}",".fd7fpy0{visibility:hidden;}"]}),Gn=e=>{const t=Ln(),r=jn(),i=Hn(),{appearance:n,disabled:o,selected:s,size:a,vertical:l}=e,c=["fui-Tab",t.root];return"subtle-circular"!==n&&"filled-circular"!==n&&c.push(r.base,"small"===a&&(l?r.smallVertical:r.smallHorizontal),"medium"===a&&(l?r.mediumVertical:r.mediumHorizontal),"large"===a&&(l?r.largeVertical:r.largeHorizontal),o&&r.disabled,s&&i.base,s&&!o&&i.selected,s&&"small"===a&&(l?i.smallVertical:i.smallHorizontal),s&&"medium"===a&&(l?i.mediumVertical:i.mediumHorizontal),s&&"large"===a&&(l?i.largeVertical:i.largeHorizontal),s&&o&&i.disabled),e.root.className=xn(...c,e.root.className),(e=>{const{disabled:t,selected:r,vertical:i}=e,n=Dn(),[o,s]=w.useState(),[a,l]=w.useState({offset:0,scale:1}),c=vn(e=>e.getRegisteredTabs),[u]=function(){const{targetDocument:e}=wi(),t=null==e?void 0:e.defaultView;return An(t?t.requestAnimationFrame:On,t?t.cancelAnimationFrame:Nn)}();if(r){const{previousSelectedValue:e,selectedValue:t,registeredTabs:r}=c();if(Mn(e)&&o!==e){const n=Bn(r,e),o=Bn(r,t);if(o&&n){const t=i?n.y-o.y:n.x-o.x,r=i?n.height/o.height:n.width/o.width;l({offset:t,scale:r}),s(e),u(()=>l({offset:0,scale:1}))}}}else Mn(o)&&s(void 0);if(t)return e;const d=0===a.offset&&1===a.scale;e.root.className=xn(e.root.className,r&&n.base,r&&d&&n.animated,r&&(i?n.vertical:n.horizontal));const m={[Rn]:`${a.offset}px`,[Pn]:`${a.scale}`};e.root.style={...m,...e.root.style}})(e),e},Wn=w.forwardRef((e,t)=>{const r=((e,t)=>{const{content:r,disabled:i=!1,icon:n,onClick:o,onFocus:s,value:a}=e,l=vn(e=>e.appearance),c=vn(e=>e.reserveSelectedTabSpace),u=vn(e=>e.selectTabOnFocus),d=vn(e=>e.disabled),m=vn(e=>e.selectedValue===a),p=vn(e=>e.onRegister),h=vn(e=>e.onUnregister),f=vn(e=>e.onSelect),g=vn(e=>e.size),v=vn(e=>!!e.vertical),b=d||i,y=w.useRef(null),_=e=>f(e,{value:a}),x=Ri(In(o,_)),C=Ri(In(s,_)),k=Ii({focusable:{isDefault:m}});w.useEffect(()=>(p({value:a,ref:y}),()=>{h({value:a,ref:y})}),[p,h,y,a]);const T=Li(n,{elementType:"span"}),E=Mi(r,{defaultProps:{children:e.children},elementType:"span"}),S=r&&"object"==typeof r?function(e,t){const r={};for(const i in e)-1===t.indexOf(i)&&e.hasOwnProperty(i)&&(r[i]=e[i]);return r}(r,["ref"]):r,I=Boolean((null==T?void 0:T.children)&&!E.children);return{components:{root:"button",icon:"span",content:"span",contentReservedSpace:"span"},root:Mi(tn("button",{ref:rn(t,y),role:"tab",type:"button","aria-selected":b?void 0:`${m}`,...k,...e,disabled:b,onClick:x,onFocus:u?C:s}),{elementType:"button"}),icon:T,iconOnly:I,content:E,contentReservedSpace:Li(S,{renderByDefault:!m&&!I&&c,defaultProps:{children:e.children},elementType:"span"}),appearance:l,disabled:b,selected:m,size:g,value:a,vertical:v}})(e,t);return(e=>{Gn(e),((e,t)=>{const r=Ln(),i=Fn(),n=zn(),{appearance:o,disabled:s,selected:a,size:l,vertical:c}=e,u="subtle-circular"===o,d="filled-circular"===o,m=u||d,p=[n.base,i.circular,"small"===l&&n.small,"medium"===l&&n.medium,"large"===l&&n.large,u&&n.subtle,a&&u&&n.subtleSelected,s&&u&&n.subtleDisabled,a&&s&&u&&n.subtleDisabledSelected,d&&n.filled,a&&d&&n.filledSelected,s&&d&&n.filledDisabled,a&&s&&d&&n.filledDisabledSelected],h=[i.base,!s&&"subtle"===o&&r.subtle,!s&&"transparent"===o&&r.transparent,!s&&a&&r.selected,s&&r.disabled];t.className=xn(r.button,c?r.vertical:r.horizontal,"small"===l&&(c?r.smallVertical:r.smallHorizontal),"medium"===l&&(c?r.mediumVertical:r.mediumHorizontal),"large"===l&&(c?r.largeVertical:r.largeHorizontal),...m?p:h,s&&r.disabledCursor,t.className)})(e,e.root),(e=>{const t=qn(),r=Un(),{selected:i,size:n}=e;e.icon&&(e.icon.className=xn("fui-Tab__icon",t.base,t[n],i&&t.selected,e.icon.className)),e.contentReservedSpace&&(e.contentReservedSpace.className=xn("fui-Tab__content--reserved-space",r.base,"large"===n?r.largeSelected:r.selected,e.icon?r.iconBefore:r.noIconBefore,r.placeholder,e.content.className),e.contentReservedSpaceClassName=e.contentReservedSpace.className),e.content.className=xn("fui-Tab__content",r.base,"large"===n&&r.large,i&&("large"===n?r.largeSelected:r.selected),e.icon?r.iconBefore:r.noIconBefore,e.content.className)})(e)})(r),En("useTabStyles_unstable")(r),(e=>un(e.root,{children:[e.icon&&cn(e.icon,{}),!e.iconOnly&&cn(e.content,{}),e.contentReservedSpace&&cn(e.contentReservedSpace,{})]}))(r)});Wn.displayName="Tab";const Vn=w.createContext(void 0);function Kn(e,t){return function(e,t,r){if(!e)return t;t={...t};const{generatedControlId:i,hintId:n,labelFor:o,labelId:s,required:a,validationMessageId:l,validationState:c}=e;var u,d,m,p,h,f,g,v,b,y,_,x,w;(i&&(null!==(d=(u=t).id)&&void 0!==d||(u.id=i)),!s||(null==r?void 0:r.supportsLabelFor)&&o===t.id||null!==(h=(m=t)[p="aria-labelledby"])&&void 0!==h||(m[p]=s),(l||n)&&(t["aria-describedby"]=[l,n,null==t?void 0:t["aria-describedby"]].filter(Boolean).join(" ")),"error"===c&&(null!==(g=(f=t)["aria-invalid"])&&void 0!==g||(f["aria-invalid"]=!0)),a)&&((null==r?void 0:r.supportsRequired)?null!==(_=(y=t).required)&&void 0!==_||(y.required=!0):null!==(w=(x=t)["aria-required"])&&void 0!==w||(x["aria-required"]=!0));return(null==r?void 0:r.supportsSize)&&(null!==(b=(v=t).size)&&void 0!==b||(v.size=e.size)),t}(w.useContext(Vn),e,t)}Vn.Provider;const $n=w.createContext(void 0),Yn=$n.Provider;function Jn(){var e;return null!==(e=w.useContext($n))&&void 0!==e?e:{}}function Xn(e,t,r){const i=function(e,t,r,i=T){const n=i();return function(i){const{dir:o,renderer:s}=i,a="ltr"===o?e:t||e;return n(s,Array.isArray(r)?{r:r}:r),a}}(e,t,r,Dt);return function(){const e=Vt(),t=Ut();return i({dir:e,renderer:t})}}const Zn=Xn("r1oeeo9n","r9sxh5",{r:[".r1oeeo9n{display:inline-flex;align-items:center;flex-wrap:nowrap;gap:var(--spacingHorizontalXXS);border-radius:var(--borderRadiusMedium);position:relative;box-sizing:border-box;vertical-align:middle;min-height:32px;font-family:var(--fontFamilyBase);font-size:var(--fontSizeBase300);font-weight:var(--fontWeightRegular);line-height:var(--lineHeightBase300);background-color:var(--colorNeutralBackground1);border:1px solid var(--colorNeutralStroke1);border-bottom-color:var(--colorNeutralStrokeAccessible);}",'.r1oeeo9n::after{box-sizing:border-box;content:"";position:absolute;left:-1px;bottom:-1px;right:-1px;height:max(2px, var(--borderRadiusMedium));border-bottom-left-radius:var(--borderRadiusMedium);border-bottom-right-radius:var(--borderRadiusMedium);border-bottom:2px solid var(--colorCompoundBrandStroke);clip-path:inset(calc(100% - 2px) 0 0 0);transform:scaleX(0);transition-property:transform;transition-duration:var(--durationUltraFast);transition-delay:var(--curveAccelerateMid);}',".r1oeeo9n:focus-within::after{transform:scaleX(1);transition-property:transform;transition-duration:var(--durationNormal);transition-delay:var(--curveDecelerateMid);}",".r1oeeo9n:focus-within:active::after{border-bottom-color:var(--colorCompoundBrandStrokePressed);}",".r1oeeo9n:focus-within{outline:2px solid transparent;}",".r9sxh5{display:inline-flex;align-items:center;flex-wrap:nowrap;gap:var(--spacingHorizontalXXS);border-radius:var(--borderRadiusMedium);position:relative;box-sizing:border-box;vertical-align:middle;min-height:32px;font-family:var(--fontFamilyBase);font-size:var(--fontSizeBase300);font-weight:var(--fontWeightRegular);line-height:var(--lineHeightBase300);background-color:var(--colorNeutralBackground1);border:1px solid var(--colorNeutralStroke1);border-bottom-color:var(--colorNeutralStrokeAccessible);}",'.r9sxh5::after{box-sizing:border-box;content:"";position:absolute;right:-1px;bottom:-1px;left:-1px;height:max(2px, var(--borderRadiusMedium));border-bottom-right-radius:var(--borderRadiusMedium);border-bottom-left-radius:var(--borderRadiusMedium);border-bottom:2px solid var(--colorCompoundBrandStroke);clip-path:inset(calc(100% - 2px) 0 0 0);transform:scaleX(0);transition-property:transform;transition-duration:var(--durationUltraFast);transition-delay:var(--curveAccelerateMid);}',".r9sxh5:focus-within::after{transform:scaleX(1);transition-property:transform;transition-duration:var(--durationNormal);transition-delay:var(--curveDecelerateMid);}",".r9sxh5:focus-within:active::after{border-bottom-color:var(--colorCompoundBrandStrokePressed);}",".r9sxh5:focus-within{outline:2px solid transparent;}"],s:["@media screen and (prefers-reduced-motion: reduce){.r1oeeo9n::after{transition-duration:0.01ms;transition-delay:0.01ms;}}","@media screen and (prefers-reduced-motion: reduce){.r1oeeo9n:focus-within::after{transition-duration:0.01ms;transition-delay:0.01ms;}}","@media screen and (prefers-reduced-motion: reduce){.r9sxh5::after{transition-duration:0.01ms;transition-delay:0.01ms;}}","@media screen and (prefers-reduced-motion: reduce){.r9sxh5:focus-within::after{transition-duration:0.01ms;transition-delay:0.01ms;}}"]}),Qn=yn({small:{sshi5w:"f1pha7fy",Bahqtrf:"fk6fouc",Be2twd7:"fy9rknc",Bhrd7zp:"figsok6",Bg96gwp:"fwrc4pm"},medium:{},large:{sshi5w:"f1w5jphr",Bahqtrf:"fk6fouc",Be2twd7:"fod5ikn",Bhrd7zp:"figsok6",Bg96gwp:"faaz57k",i8kkvl:0,Belr9w4:0,rmohyg:"f1eyhf9v"},outline:{},outlineInteractive:{Bgoe8wy:"fvcxoqz",Bwzppfd:["f1ub3y4t","f1m52nbi"],oetu4i:"f1l4zc64",gg5e9n:["f1m52nbi","f1ub3y4t"],Drbcw7:"f8vnjqi",udz0bu:["fz1etlk","f1hc16gm"],Be8ivqh:"f1klwx88",ofdepl:["f1hc16gm","fz1etlk"]},underline:{De3pzq:"f1c21dwh",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"fokr779",icvyot:"f1ern45e",vrafjx:["f1n71otn","f1deefiw"],wvpqe5:["f1deefiw","f1n71otn"],Eqx8gd:["f1n6gb5g","f15yvnhg"],B1piin3:["f15yvnhg","f1n6gb5g"]},underlineInteractive:{oetu4i:"f1l4zc64",Be8ivqh:"f1klwx88",d9w3h3:0,B3778ie:0,B4j8arr:0,Bl18szs:0,Blrzh8d:"f2ale1x"},filled:{g2u3we:"fghlq4f",h3c5rm:["f1gn591s","fjscplz"],B9xav0g:"fb073pr",zhjwy3:["fjscplz","f1gn591s"]},filledInteractive:{q7v0qe:"ftmjh5b",kmh5ft:["f17blpuu","fsrcdbj"],nagaa4:"f1tpwn32",B1yhkcb:["fsrcdbj","f17blpuu"]},invalid:{tvckwq:"fs4k3qj",gk2u95:["fcee079","fmyw78r"],hhx65j:"f1fgmyf4",Bxowmz0:["fmyw78r","fcee079"]},"filled-darker":{De3pzq:"f16xq7d1"},"filled-lighter":{De3pzq:"fxugw4r"},"filled-darker-shadow":{De3pzq:"f16xq7d1",E5pizo:"fyed02w"},"filled-lighter-shadow":{De3pzq:"fxugw4r",E5pizo:"fyed02w"},disabled:{Bceei9c:"fdrzuqr",De3pzq:"f1c21dwh",g2u3we:"f1jj8ep1",h3c5rm:["f15xbau","fy0fskl"],B9xav0g:"f4ikngz",zhjwy3:["fy0fskl","f15xbau"],Bjwas2f:"fg455y9",Bn1d65q:["f1rvyvqg","f14g86mu"],Bxeuatn:"f1cwzwz",n51gp8:["f14g86mu","f1rvyvqg"],Bsft5z2:"fhr9occ",Bduesf4:"f99w1ws"},smallWithContentBefore:{uwmqm3:["fk8j09s","fdw0yi8"]},smallWithContentAfter:{z189sj:["fdw0yi8","fk8j09s"]},mediumWithContentBefore:{uwmqm3:["f1ng84yb","f11gcy0p"]},mediumWithContentAfter:{z189sj:["f11gcy0p","f1ng84yb"]},largeWithContentBefore:{uwmqm3:["f1uw59to","fw5db7e"]},largeWithContentAfter:{z189sj:["fw5db7e","f1uw59to"]}},{d:[".f1pha7fy{min-height:24px;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".fy9rknc{font-size:var(--fontSizeBase200);}",".figsok6{font-weight:var(--fontWeightRegular);}",".fwrc4pm{line-height:var(--lineHeightBase200);}",".f1w5jphr{min-height:40px;}",".fod5ikn{font-size:var(--fontSizeBase400);}",".faaz57k{line-height:var(--lineHeightBase400);}",[".f1eyhf9v{gap:var(--spacingHorizontalSNudge);}",{p:-1}],".f1c21dwh{background-color:var(--colorTransparentBackground);}",[".fokr779{border-radius:0;}",{p:-1}],".f1ern45e{border-top-style:none;}",".f1n71otn{border-right-style:none;}",".f1deefiw{border-left-style:none;}",".f1n6gb5g::after{left:0;}",".f15yvnhg::after{right:0;}",[".f2ale1x::after{border-radius:0;}",{p:-1}],".fghlq4f{border-top-color:var(--colorTransparentStroke);}",".f1gn591s{border-right-color:var(--colorTransparentStroke);}",".fjscplz{border-left-color:var(--colorTransparentStroke);}",".fb073pr{border-bottom-color:var(--colorTransparentStroke);}",".fs4k3qj:not(:focus-within),.fs4k3qj:hover:not(:focus-within){border-top-color:var(--colorPaletteRedBorder2);}",".fcee079:not(:focus-within),.fcee079:hover:not(:focus-within){border-right-color:var(--colorPaletteRedBorder2);}",".fmyw78r:not(:focus-within),.fmyw78r:hover:not(:focus-within){border-left-color:var(--colorPaletteRedBorder2);}",".f1fgmyf4:not(:focus-within),.f1fgmyf4:hover:not(:focus-within){border-bottom-color:var(--colorPaletteRedBorder2);}",".f16xq7d1{background-color:var(--colorNeutralBackground3);}",".fxugw4r{background-color:var(--colorNeutralBackground1);}",".fyed02w{box-shadow:var(--shadow2);}",".fdrzuqr{cursor:not-allowed;}",".f1jj8ep1{border-top-color:var(--colorNeutralStrokeDisabled);}",".f15xbau{border-right-color:var(--colorNeutralStrokeDisabled);}",".fy0fskl{border-left-color:var(--colorNeutralStrokeDisabled);}",".f4ikngz{border-bottom-color:var(--colorNeutralStrokeDisabled);}",".fhr9occ::after{content:unset;}",".fk8j09s{padding-left:var(--spacingHorizontalSNudge);}",".fdw0yi8{padding-right:var(--spacingHorizontalSNudge);}",".f1ng84yb{padding-left:var(--spacingHorizontalMNudge);}",".f11gcy0p{padding-right:var(--spacingHorizontalMNudge);}",".f1uw59to{padding-left:var(--spacingHorizontalM);}",".fw5db7e{padding-right:var(--spacingHorizontalM);}"],h:[".fvcxoqz:hover{border-top-color:var(--colorNeutralStroke1Hover);}",".f1ub3y4t:hover{border-right-color:var(--colorNeutralStroke1Hover);}",".f1m52nbi:hover{border-left-color:var(--colorNeutralStroke1Hover);}",".f1l4zc64:hover{border-bottom-color:var(--colorNeutralStrokeAccessibleHover);}",".ftmjh5b:hover,.ftmjh5b:focus-within{border-top-color:var(--colorTransparentStrokeInteractive);}",".f17blpuu:hover,.f17blpuu:focus-within{border-right-color:var(--colorTransparentStrokeInteractive);}",".fsrcdbj:hover,.fsrcdbj:focus-within{border-left-color:var(--colorTransparentStrokeInteractive);}",".f1tpwn32:hover,.f1tpwn32:focus-within{border-bottom-color:var(--colorTransparentStrokeInteractive);}"],a:[".f8vnjqi:active,.f8vnjqi:focus-within{border-top-color:var(--colorNeutralStroke1Pressed);}",".fz1etlk:active,.fz1etlk:focus-within{border-right-color:var(--colorNeutralStroke1Pressed);}",".f1hc16gm:active,.f1hc16gm:focus-within{border-left-color:var(--colorNeutralStroke1Pressed);}",".f1klwx88:active,.f1klwx88:focus-within{border-bottom-color:var(--colorNeutralStrokeAccessiblePressed);}"],m:[["@media (forced-colors: active){.fg455y9{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f14g86mu{border-left-color:GrayText;}.f1rvyvqg{border-right-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1cwzwz{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}]],w:[".f99w1ws:focus-within{outline-style:none;}"]}),eo=Xn("r12stul0",null,[".r12stul0{align-self:stretch;box-sizing:border-box;flex-grow:1;min-width:0;border-style:none;padding:0 var(--spacingHorizontalM);color:var(--colorNeutralForeground1);background-color:transparent;outline-style:none;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;}",".r12stul0::-webkit-input-placeholder{color:var(--colorNeutralForeground4);opacity:1;}",".r12stul0::-moz-placeholder{color:var(--colorNeutralForeground4);opacity:1;}",".r12stul0::placeholder{color:var(--colorNeutralForeground4);opacity:1;}"]),to=yn({small:{uwmqm3:["f1f5gg8d","f1vdfbxk"],z189sj:["f1vdfbxk","f1f5gg8d"]},medium:{},large:{uwmqm3:["fnphzt9","flt1dlf"],z189sj:["flt1dlf","fnphzt9"]},smallWithContentBefore:{uwmqm3:["fgiv446","ffczdla"]},smallWithContentAfter:{z189sj:["ffczdla","fgiv446"]},mediumWithContentBefore:{uwmqm3:["fgiv446","ffczdla"]},mediumWithContentAfter:{z189sj:["ffczdla","fgiv446"]},largeWithContentBefore:{uwmqm3:["fk8j09s","fdw0yi8"]},largeWithContentAfter:{z189sj:["fdw0yi8","fk8j09s"]},disabled:{sj55zd:"f1s2aq7o",De3pzq:"f1c21dwh",Bceei9c:"fdrzuqr",yvdlaj:"fahhnxm"}},{d:[".f1f5gg8d{padding-left:var(--spacingHorizontalS);}",".f1vdfbxk{padding-right:var(--spacingHorizontalS);}",".fnphzt9{padding-left:calc(var(--spacingHorizontalM) + var(--spacingHorizontalSNudge));}",".flt1dlf{padding-right:calc(var(--spacingHorizontalM) + var(--spacingHorizontalSNudge));}",".fgiv446{padding-left:var(--spacingHorizontalXXS);}",".ffczdla{padding-right:var(--spacingHorizontalXXS);}",".fk8j09s{padding-left:var(--spacingHorizontalSNudge);}",".fdw0yi8{padding-right:var(--spacingHorizontalSNudge);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".f1c21dwh{background-color:var(--colorTransparentBackground);}",".fdrzuqr{cursor:not-allowed;}",".fahhnxm::-webkit-input-placeholder{color:var(--colorNeutralForegroundDisabled);}",".fahhnxm::-moz-placeholder{color:var(--colorNeutralForegroundDisabled);}"]}),ro=Xn("r1572tok",null,[".r1572tok{box-sizing:border-box;color:var(--colorNeutralForeground3);display:flex;}",".r1572tok>svg{font-size:20px;}"]),io=yn({disabled:{sj55zd:"f1s2aq7o"},small:{Duoase:"f3qv9w"},medium:{},large:{Duoase:"f16u2scb"}},{d:[".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".f3qv9w>svg{font-size:16px;}",".f16u2scb>svg{font-size:24px;}"]}),no=w.forwardRef((e,t)=>{const r=((e,t)=>{e=Kn(e,{supportsLabelFor:!0,supportsRequired:!0,supportsSize:!0});const r=Jn();var i;const{size:n="medium",appearance:o=(null!==(i=r.inputDefaultAppearance)&&void 0!==i?i:"outline"),onChange:s}=e,[a,l]=Oi({state:e.value,defaultState:e.defaultValue,initialState:""}),c=en({props:e,primarySlotTagName:"input",excludedPropNames:["size","onChange","value","defaultValue"]}),u={size:n,appearance:o,components:{root:"span",input:"input",contentBefore:"span",contentAfter:"span"},input:Mi(e.input,{defaultProps:{type:"text",ref:t,...c.primary},elementType:"input"}),contentAfter:Li(e.contentAfter,{elementType:"span"}),contentBefore:Li(e.contentBefore,{elementType:"span"}),root:Mi(e.root,{defaultProps:c.root,elementType:"span"})};return u.input.value=a,u.input.onChange=Ri(e=>{const t=e.target.value;null==s||s(e,{value:t}),l(t)}),u})(e,t);return(e=>{const{size:t,appearance:r}=e,i=e.input.disabled,n="true"==`${e.input["aria-invalid"]}`,o=r.startsWith("filled"),s=Qn(),a=to(),l=io();e.root.className=xn("fui-Input",Zn(),s[t],e.contentBefore&&s[`${t}WithContentBefore`],e.contentAfter&&s[`${t}WithContentAfter`],s[r],!i&&"outline"===r&&s.outlineInteractive,!i&&"underline"===r&&s.underlineInteractive,!i&&o&&s.filledInteractive,o&&s.filled,!i&&n&&s.invalid,i&&s.disabled,e.root.className),e.input.className=xn("fui-Input__input",eo(),a[t],e.contentBefore&&a[`${t}WithContentBefore`],e.contentAfter&&a[`${t}WithContentAfter`],i&&a.disabled,e.input.className);const c=[ro(),i&&l.disabled,l[t]];e.contentBefore&&(e.contentBefore.className=xn("fui-Input__contentBefore",...c,e.contentBefore.className)),e.contentAfter&&(e.contentAfter.className=xn("fui-Input__contentAfter",...c,e.contentAfter.className))})(r),En("useInputStyles_unstable")(r),(e=>un(e.root,{children:[e.contentBefore&&cn(e.contentBefore,{}),cn(e.input,{}),e.contentAfter&&cn(e.contentAfter,{})]}))(r)});function oo(){const{targetDocument:e}=wi(),t=w.useRef(null);return w.useEffect(()=>{const r=null==e?void 0:e.defaultView;if(r){const e=ir(r);return t.current=e,()=>{nr(e),t.current=null}}},[e]),t}function so(e){const t=oo(),r=Ri(e);w.useEffect(()=>{const e=t.current;if(e){const t=e=>{r(e)};return e.subscribe(t),t(e.isNavigatingWithKeyboard()),()=>{e.unsubscribe(t)}}},[t,r])}function ao(e,t){var r;const i=e;var n;return Boolean((null==i||null===(r=i.ownerDocument)||void 0===r?void 0:r.defaultView)&&i instanceof i.ownerDocument.defaultView[null!==(n=null==t?void 0:t.constructorName)&&void 0!==n?n:"HTMLElement"])}no.displayName="Input";const lo="data-activedescendant",co="data-activedescendant-focusvisible",uo=e=>{if(!e)return;const t=mo(e.parentElement);if(!t)return;const{offsetHeight:r}=e,i=po(e,t),{scrollMarginTop:n,scrollMarginBottom:o}=ho(e),{offsetHeight:s,scrollTop:a}=t,l=i+r+o>a+s;i-n<a?t.scrollTo(0,i-n-2):l&&t.scrollTo(0,i+r+o-s+2)},mo=e=>e?e.scrollHeight>e.offsetHeight?e:mo(e.parentElement):null,po=(e,t)=>e&&e!==t?e.contains(t)?-1*t.offsetTop:e.offsetTop+po(e.offsetParent,t):0,ho=e=>{var t;const r=null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView;if(!r)return{scrollMarginTop:0,scrollMarginBottom:0};const i=r.getComputedStyle(e);var n,o;return{scrollMarginTop:null!==(n=fo(i.scrollMarginTop))&&void 0!==n?n:fo(i.scrollMarginBlockStart),scrollMarginBottom:null!==(o=fo(i.scrollMarginBottom))&&void 0!==o?o:fo(i.scrollMarginBlockEnd)}},fo=e=>e?parseInt(e,10):0;function go(e){const{imperativeRef:t,matchOption:r}=e,i=w.useRef(!1),n=w.useRef(!0),o=w.useRef(null),s=w.useRef(null),a=w.useRef(null),l=w.useRef(!0),c=w.useCallback(()=>{var e;null===(e=a.current)||void 0===e||e.removeAttribute("aria-activedescendant")},[]),u=w.useCallback(e=>{var t;e&&(o.current=e),l.current&&o.current&&(null===(t=a.current)||void 0===t||t.setAttribute("aria-activedescendant",o.current))},[]);so(e=>{i.current=e;const t=f();t&&(e&&n.current?t.setAttribute(co,""):t.removeAttribute(co))});const d=Ri(r),m=w.useRef(null),{optionWalker:p,listboxCallbackRef:h}=function(e){const{matchOption:t}=e,{targetDocument:r}=wi(),i=w.useRef(null),n=w.useRef(null),o=w.useCallback(e=>ao(e)&&t(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP,[t]),s=w.useCallback(e=>{e&&r?(n.current=e,i.current=r.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,o)):(n.current=null,i.current=null)},[r,o]);return{optionWalker:w.useMemo(()=>({first:()=>i.current&&n.current?(i.current.currentNode=n.current,i.current.firstChild()):null,last:()=>i.current&&n.current?(i.current.currentNode=n.current,i.current.lastChild()):null,next:()=>i.current?i.current.nextNode():null,prev:()=>i.current?i.current.previousNode():null,find:(e,t)=>{if(!i.current||!n.current)return null;const o=t?null==r?void 0:r.getElementById(t):null;i.current.currentNode=null!=o?o:n.current;let s=i.current.currentNode;for(;s&&!e(s.id);)s=i.current.nextNode();return s},setCurrent:e=>{i.current&&(i.current.currentNode=e)}}),[r]),listboxCallbackRef:s}}({matchOption:d}),f=w.useCallback(()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.querySelector(`#${o.current}`)},[m]),g=w.useCallback(e=>{n.current=e;const t=f();t&&(e&&i.current?t.setAttribute(co,""):t.removeAttribute(co))},[f]),v=w.useCallback(()=>{const e=f();var t;return e&&(e.removeAttribute(lo),e.removeAttribute(co)),c(),s.current=o.current,o.current=null,null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null},[f,c]),b=w.useCallback(e=>{if(!e)return;const t=v();uo(e),u(e.id),e.setAttribute(lo,""),i.current&&n.current&&e.setAttribute(co,"");const r=(o={id:e.id,previousId:t},new CustomEvent("activedescendantchange",{bubbles:!0,cancelable:!1,composed:!0,detail:o}));var o;e.dispatchEvent(r)},[v,u]),y=w.useMemo(()=>({first:({passive:e}={})=>{const t=p.first();return e||b(t),null==t?void 0:t.id},last:({passive:e}={})=>{const t=p.last();return e||b(t),null==t?void 0:t.id},next:({passive:e}={})=>{const t=f();if(!t)return;p.setCurrent(t);const r=p.next();return e||b(r),null==r?void 0:r.id},prev:({passive:e}={})=>{const t=f();if(!t)return;p.setCurrent(t);const r=p.prev();return e||b(r),null==r?void 0:r.id},blur:()=>{v()},active:()=>{var e;return null===(e=f())||void 0===e?void 0:e.id},focus:e=>{if(!m.current)return;const t=m.current.querySelector(`#${e}`);t&&b(t)},focusLastActive:()=>{if(!m.current||!s.current)return;const e=m.current.querySelector(`#${s.current}`);return e?(b(e),!0):void 0},find(e,{passive:t,startFrom:r}={}){const i=p.find(e,r);return t||b(i),null==i?void 0:i.id},scrollActiveIntoView:()=>{if(!m.current)return;const e=f();e&&uo(e)},showAttributes(){l.current=!0,u()},hideAttributes(){l.current=!1,c()},showFocusVisibleAttributes(){g(!0)},hideFocusVisibleAttributes(){g(!1)}}),[p,m,u,c,b,v,f,g]);return w.useImperativeHandle(t,()=>y),{listboxRef:rn(m,h),activeParentRef:a,controller:y}}const vo=w.createContext(void 0),bo={},yo=vo.Provider,_o=yn({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"]}),xo=yn({root:{ycbfsm:"fg4l7m0"}},{t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),wo=(e,t,r,i)=>{const n="1em"===t?"20":t,o=w.forwardRef((e,o)=>{const s=xo(),a=((e,t)=>{const{title:r,primaryFill:i="currentColor",...n}=e,o={...n,title:void 0,fill:i},s=_o(),a=(()=>{const e=w.useContext(vo);return null!=e?e:bo})();return o.className=xn(s.root,(null==t?void 0:t.flipInRtl)&&"rtl"===(null==a?void 0:a.textDirection)&&s.rtl,o.className),r&&(o["aria-label"]=r),o["aria-label"]||o["aria-labelledby"]?o.role="img":o["aria-hidden"]=!0,o})(e,{flipInRtl:null==i?void 0:i.flipInRtl}),l={...a,className:xn(a.className,s.root),ref:o,width:t,height:t,viewBox:`0 0 ${n} ${n}`,xmlns:"http://www.w3.org/2000/svg"};return"string"==typeof r?w.createElement("svg",{...l,dangerouslySetInnerHTML:{__html:r}}):w.createElement("svg",l,...r.map(e=>w.createElement("path",{d:e,fill:l.fill})))});return o.displayName=e,o},Co=wo("CheckmarkFilled","1em",["M7.03 13.9 3.56 10a.75.75 0 0 0-1.12 1l4 4.5c.29.32.79.34 1.09.03l10.5-10.5a.75.75 0 0 0-1.06-1.06l-9.94 9.94Z"]),ko=wo("ChevronDownRegular","1em",["M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 0 1-.78 0L4.15 8.35a.5.5 0 1 1 .7-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0Z"]),To=wo("DismissRegular","1em",["m4.09 4.22.06-.07a.5.5 0 0 1 .63-.06l.07.06L10 9.29l5.15-5.14a.5.5 0 0 1 .63-.06l.07.06c.18.17.2.44.06.63l-.06.07L10.71 10l5.14 5.15c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L10 10.71l-5.15 5.14a.5.5 0 0 1-.63.06l-.07-.06a.5.5 0 0 1-.06-.63l.06-.07L9.29 10 4.15 4.85a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]),Eo=(e,t)=>!!(null==e?void 0:e.contains(t)),So="fuiframefocus";var Io=r(40961);const Ao=()=>{const e=w.useRef(new Map),t=w.useMemo(()=>({getCount:()=>e.current.size,getOptionAtIndex:()=>{},getIndexOfId:()=>-1,getOptionById:t=>e.current.get(t),getOptionsMatchingText:t=>Array.from(e.current.values()).filter(({text:e})=>t(e)),getOptionsMatchingValue:t=>{const r=[];for(const i of e.current.values())t(i.value)&&r.push(i);return r}}),[]),r=w.useCallback(t=>(e.current.set(t.id,t),()=>e.current.delete(t.id)),[]);return{...t,options:Array.from(e.current.values()),registerOption:r}},Oo=e=>{const{defaultSelectedOptions:t,multiselect:r,onOptionSelect:i}=e,[n,o]=Oi({state:e.selectedOptions,defaultState:t,initialState:[]});return{clearSelection:e=>{o([]),null==i||i(e,{optionValue:void 0,optionText:void 0,selectedOptions:[]})},selectOption:w.useCallback((e,t)=>{if(t.disabled)return;let s=[t.value];if(r){const e=n.findIndex(e=>e===t.value);s=e>-1?[...n.slice(0,e),...n.slice(e+1)]:[...n,t.value]}o(s),null==i||i(e,{optionValue:t.value,optionText:t.text,selectedOptions:s})},[i,r,n,o]),selectedOptions:n}},No={above:{position:"above",align:"center"},"above-start":{position:"above",align:"start"},"above-end":{position:"above",align:"end"},below:{position:"below",align:"center"},"below-start":{position:"below",align:"start"},"below-end":{position:"below",align:"end"},before:{position:"before",align:"center"},"before-top":{position:"before",align:"top"},"before-bottom":{position:"before",align:"bottom"},after:{position:"after",align:"center"},"after-top":{position:"after",align:"top"},"after-bottom":{position:"after",align:"bottom"}};function Ro(e){return null==e?{}:"string"==typeof e?No[e]:e}const Po="data-popper-is-intersecting",Do="data-popper-escaped",Bo="data-popper-reference-hidden",Mo="fui-positioningend",Lo=["top","right","bottom","left"],zo=Math.min,Fo=Math.max,jo=Math.round,Ho=(Math.floor,e=>({x:e,y:e})),qo={left:"right",right:"left",bottom:"top",top:"bottom"},Uo={start:"end",end:"start"};function Go(e,t,r){return Fo(e,zo(t,r))}function Wo(e,t){return"function"==typeof e?e(t):e}function Vo(e){return e.split("-")[0]}function Ko(e){return e.split("-")[1]}function $o(e){return"x"===e?"y":"x"}function Yo(e){return"y"===e?"height":"width"}const Jo=new Set(["top","bottom"]);function Xo(e){return Jo.has(Vo(e))?"y":"x"}function Zo(e){return $o(Xo(e))}function Qo(e){return e.replace(/start|end/g,e=>Uo[e])}const es=["left","right"],ts=["right","left"],rs=["top","bottom"],is=["bottom","top"];function ns(e){return e.replace(/left|right|bottom|top/g,e=>qo[e])}function os(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ss(e){const{x:t,y:r,width:i,height:n}=e;return{width:i,height:n,top:r,left:t,right:t+i,bottom:r+n,x:t,y:r}}function as(e,t,r){let{reference:i,floating:n}=e;const o=Xo(t),s=Zo(t),a=Yo(s),l=Vo(t),c="y"===o,u=i.x+i.width/2-n.width/2,d=i.y+i.height/2-n.height/2,m=i[a]/2-n[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-n.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-n.width,y:d};break;default:p={x:i.x,y:i.y}}switch(Ko(t)){case"start":p[s]-=m*(r&&c?-1:1);break;case"end":p[s]+=m*(r&&c?-1:1)}return p}async function ls(e,t){var r;void 0===t&&(t={});const{x:i,y:n,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:m=!1,padding:p=0}=Wo(t,e),h=os(p),f=a[m?"floating"===d?"reference":"floating":d],g=ss(await o.getClippingRect({element:null==(r=await(null==o.isElement?void 0:o.isElement(f)))||r?f:f.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:i,y:n,width:s.floating.width,height:s.floating.height}:s.reference,b=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),y=await(null==o.isElement?void 0:o.isElement(b))&&await(null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},_=ss(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:l}):v);return{top:(g.top-_.top+h.top)/y.y,bottom:(_.bottom-g.bottom+h.bottom)/y.y,left:(g.left-_.left+h.left)/y.x,right:(_.right-g.right+h.right)/y.x}}function cs(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function us(e){return Lo.some(t=>e[t]>=0)}const ds=new Set(["left","top"]);function ms(){return"undefined"!=typeof window}function ps(e){return gs(e)?(e.nodeName||"").toLowerCase():"#document"}function hs(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function fs(e){var t;return null==(t=(gs(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function gs(e){return!!ms()&&(e instanceof Node||e instanceof hs(e).Node)}function vs(e){return!!ms()&&(e instanceof Element||e instanceof hs(e).Element)}function bs(e){return!!ms()&&(e instanceof HTMLElement||e instanceof hs(e).HTMLElement)}function ys(e){return!(!ms()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof hs(e).ShadowRoot)}const _s=new Set(["inline","contents"]);function xs(e){const{overflow:t,overflowX:r,overflowY:i,display:n}=Ps(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!_s.has(n)}const ws=new Set(["table","td","th"]);function Cs(e){return ws.has(ps(e))}const ks=[":popover-open",":modal"];function Ts(e){return ks.some(t=>{try{return e.matches(t)}catch(e){return!1}})}const Es=["transform","translate","scale","rotate","perspective"],Ss=["transform","translate","scale","rotate","perspective","filter"],Is=["paint","layout","strict","content"];function As(e){const t=Os(),r=vs(e)?Ps(e):e;return Es.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||Ss.some(e=>(r.willChange||"").includes(e))||Is.some(e=>(r.contain||"").includes(e))}function Os(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ns=new Set(["html","body","#document"]);function Rs(e){return Ns.has(ps(e))}function Ps(e){return hs(e).getComputedStyle(e)}function Ds(e){return vs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bs(e){if("html"===ps(e))return e;const t=e.assignedSlot||e.parentNode||ys(e)&&e.host||fs(e);return ys(t)?t.host:t}function Ms(e){const t=Bs(e);return Rs(t)?e.ownerDocument?e.ownerDocument.body:e.body:bs(t)&&xs(t)?t:Ms(t)}function Ls(e,t,r){var i;void 0===t&&(t=[]),void 0===r&&(r=!0);const n=Ms(e),o=n===(null==(i=e.ownerDocument)?void 0:i.body),s=hs(n);if(o){const e=zs(s);return t.concat(s,s.visualViewport||[],xs(n)?n:[],e&&r?Ls(e):[])}return t.concat(n,Ls(n,[],r))}function zs(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Fs(e){const t=Ps(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const n=bs(e),o=n?e.offsetWidth:r,s=n?e.offsetHeight:i,a=jo(r)!==o||jo(i)!==s;return a&&(r=o,i=s),{width:r,height:i,$:a}}function js(e){return vs(e)?e:e.contextElement}function Hs(e){const t=js(e);if(!bs(t))return Ho(1);const r=t.getBoundingClientRect(),{width:i,height:n,$:o}=Fs(t);let s=(o?jo(r.width):r.width)/i,a=(o?jo(r.height):r.height)/n;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const qs=Ho(0);function Us(e){const t=hs(e);return Os()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:qs}function Gs(e,t,r,i){void 0===t&&(t=!1),void 0===r&&(r=!1);const n=e.getBoundingClientRect(),o=js(e);let s=Ho(1);t&&(i?vs(i)&&(s=Hs(i)):s=Hs(e));const a=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==hs(e))&&t}(o,r,i)?Us(o):Ho(0);let l=(n.left+a.x)/s.x,c=(n.top+a.y)/s.y,u=n.width/s.x,d=n.height/s.y;if(o){const e=hs(o),t=i&&vs(i)?hs(i):i;let r=e,n=zs(r);for(;n&&i&&t!==r;){const e=Hs(n),t=n.getBoundingClientRect(),i=Ps(n),o=t.left+(n.clientLeft+parseFloat(i.paddingLeft))*e.x,s=t.top+(n.clientTop+parseFloat(i.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=s,r=hs(n),n=zs(r)}}return ss({width:u,height:d,x:l,y:c})}function Ws(e,t){const r=Ds(e).scrollLeft;return t?t.left+r:Gs(fs(e)).left+r}function Vs(e,t){const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-Ws(e,r),y:r.top+t.scrollTop}}const Ks=new Set(["absolute","fixed"]);function $s(e,t,r){let i;if("viewport"===t)i=function(e,t){const r=hs(e),i=fs(e),n=r.visualViewport;let o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(n){o=n.width,s=n.height;const e=Os();(!e||e&&"fixed"===t)&&(a=n.offsetLeft,l=n.offsetTop)}const c=Ws(i);if(c<=0){const e=i.ownerDocument,t=e.body,r=getComputedStyle(t),n="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,s=Math.abs(i.clientWidth-t.clientWidth-n);s<=25&&(o-=s)}else c<=25&&(o+=c);return{width:o,height:s,x:a,y:l}}(e,r);else if("document"===t)i=function(e){const t=fs(e),r=Ds(e),i=e.ownerDocument.body,n=Fo(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=Fo(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let s=-r.scrollLeft+Ws(e);const a=-r.scrollTop;return"rtl"===Ps(i).direction&&(s+=Fo(t.clientWidth,i.clientWidth)-n),{width:n,height:o,x:s,y:a}}(fs(e));else if(vs(t))i=function(e,t){const r=Gs(e,!0,"fixed"===t),i=r.top+e.clientTop,n=r.left+e.clientLeft,o=bs(e)?Hs(e):Ho(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:n*o.x,y:i*o.y}}(t,r);else{const r=Us(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return ss(i)}function Ys(e,t){const r=Bs(e);return!(r===t||!vs(r)||Rs(r))&&("fixed"===Ps(r).position||Ys(r,t))}function Js(e,t,r){const i=bs(t),n=fs(t),o="fixed"===r,s=Gs(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Ho(0);function c(){l.x=Ws(n)}if(i||!i&&!o)if(("body"!==ps(t)||xs(n))&&(a=Ds(t)),i){const e=Gs(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&c();o&&!i&&n&&c();const u=!n||i||o?Ho(0):Vs(n,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}function Xs(e){return"static"===Ps(e).position}function Zs(e,t){if(!bs(e)||"fixed"===Ps(e).position)return null;if(t)return t(e);let r=e.offsetParent;return fs(e)===r&&(r=r.ownerDocument.body),r}function Qs(e,t){const r=hs(e);if(Ts(e))return r;if(!bs(e)){let t=Bs(e);for(;t&&!Rs(t);){if(vs(t)&&!Xs(t))return t;t=Bs(t)}return r}let i=Zs(e,t);for(;i&&Cs(i)&&Xs(i);)i=Zs(i,t);return i&&Rs(i)&&Xs(i)&&!As(i)?r:i||function(e){let t=Bs(e);for(;bs(t)&&!Rs(t);){if(As(t))return t;if(Ts(t))return null;t=Bs(t)}return null}(e)||r}const ea={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:i,strategy:n}=e;const o="fixed"===n,s=fs(i),a=!!t&&Ts(t.floating);if(i===s||a&&o)return r;let l={scrollLeft:0,scrollTop:0},c=Ho(1);const u=Ho(0),d=bs(i);if((d||!d&&!o)&&(("body"!==ps(i)||xs(s))&&(l=Ds(i)),bs(i))){const e=Gs(i);c=Hs(i),u.x=e.x+i.clientLeft,u.y=e.y+i.clientTop}const m=!s||d||o?Ho(0):Vs(s,l);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:r.y*c.y-l.scrollTop*c.y+u.y+m.y}},getDocumentElement:fs,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:i,strategy:n}=e;const o="clippingAncestors"===r?Ts(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let i=Ls(e,[],!1).filter(e=>vs(e)&&"body"!==ps(e)),n=null;const o="fixed"===Ps(e).position;let s=o?Bs(e):e;for(;vs(s)&&!Rs(s);){const t=Ps(s),r=As(s);r||"fixed"!==t.position||(n=null),(o?!r&&!n:!r&&"static"===t.position&&n&&Ks.has(n.position)||xs(s)&&!r&&Ys(e,s))?i=i.filter(e=>e!==s):n=t,s=Bs(s)}return t.set(e,i),i}(t,this._c):[].concat(r),s=[...o,i],a=s[0],l=s.reduce((e,r)=>{const i=$s(t,r,n);return e.top=Fo(i.top,e.top),e.right=zo(i.right,e.right),e.bottom=zo(i.bottom,e.bottom),e.left=Fo(i.left,e.left),e},$s(t,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Qs,getElementRects:async function(e){const t=this.getOffsetParent||Qs,r=this.getDimensions,i=await r(e.floating);return{reference:Js(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=Fs(e);return{width:t,height:r}},getScale:Hs,isElement:vs,isRTL:function(e){return"rtl"===Ps(e).direction}},ta=ls,ra=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:n,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:f=!0,...g}=Wo(e,t);if(null!=(r=o.arrow)&&r.alignmentOffset)return{};const v=Vo(n),b=Xo(a),y=Vo(a)===a,_=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=m||(y||!f?[ns(a)]:function(e){const t=ns(e);return[Qo(e),t,Qo(t)]}(a)),w="none"!==h;!m&&w&&x.push(...function(e,t,r,i){const n=Ko(e);let o=function(e,t,r){switch(e){case"top":case"bottom":return r?t?ts:es:t?es:ts;case"left":case"right":return t?rs:is;default:return[]}}(Vo(e),"start"===r,i);return n&&(o=o.map(e=>e+"-"+n),t&&(o=o.concat(o.map(Qo)))),o}(a,f,h,_));const C=[a,...x],k=await ls(t,g),T=[];let E=(null==(i=o.flip)?void 0:i.overflows)||[];if(u&&T.push(k[v]),d){const e=function(e,t,r){void 0===r&&(r=!1);const i=Ko(e),n=Zo(e),o=Yo(n);let s="x"===n?i===(r?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=ns(s)),[s,ns(s)]}(n,s,_);T.push(k[e[0]],k[e[1]])}if(E=[...E,{placement:n,overflows:T}],!T.every(e=>e<=0)){var S,I;const e=((null==(S=o.flip)?void 0:S.index)||0)+1,t=C[e];if(t&&("alignment"!==d||b===Xo(t)||E.every(e=>Xo(e.placement)!==b||e.overflows[0]>0)))return{data:{index:e,overflows:E},reset:{placement:t}};let r=null==(I=E.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:I.placement;if(!r)switch(p){case"bestFit":{var A;const e=null==(A=E.filter(e=>{if(w){const t=Xo(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:A[0];e&&(r=e);break}case"initialPlacement":r=a}if(n!==r)return{reset:{placement:r}}}return{}}}},ia=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...n}=Wo(e,t);switch(i){case"referenceHidden":{const e=cs(await ls(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:us(e)}}}case"escaped":{const e=cs(await ls(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:us(e)}}}default:return{}}}}},na=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:n,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Wo(e,t)||{};if(null==c)return{};const d=os(u),m={x:r,y:i},p=Zo(n),h=Yo(p),f=await s.getDimensions(c),g="y"===p,v=g?"top":"left",b=g?"bottom":"right",y=g?"clientHeight":"clientWidth",_=o.reference[h]+o.reference[p]-m[p]-o.floating[h],x=m[p]-o.reference[p],w=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let C=w?w[y]:0;C&&await(null==s.isElement?void 0:s.isElement(w))||(C=a.floating[y]||o.floating[h]);const k=_/2-x/2,T=C/2-f[h]/2-1,E=zo(d[v],T),S=zo(d[b],T),I=E,A=C-f[h]-S,O=C/2-f[h]/2+k,N=Go(I,O,A),R=!l.arrow&&null!=Ko(n)&&O!==N&&o.reference[h]/2-(O<I?E:S)-f[h]/2<0,P=R?O<I?O-I:O-A:0;return{[p]:m[p]+P,data:{[p]:N,centerOffset:O-N-P,...R&&{alignmentOffset:P}},reset:R}}}),oa=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:n,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Wo(e,t),u={x:r,y:i},d=Xo(n),m=$o(d);let p=u[m],h=u[d];const f=Wo(a,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===m?"height":"width",t=o.reference[m]-o.floating[e]+g.mainAxis,r=o.reference[m]+o.reference[e]-g.mainAxis;p<t?p=t:p>r&&(p=r)}if(c){var v,b;const e="y"===m?"width":"height",t=ds.has(Vo(n)),r=o.reference[d]-o.floating[e]+(t&&(null==(v=s.offset)?void 0:v[d])||0)+(t?0:g.crossAxis),i=o.reference[d]+o.reference[e]+(t?0:(null==(b=s.offset)?void 0:b[d])||0)-(t?g.crossAxis:0);h<r?h=r:h>i&&(h=i)}return{[m]:p,[d]:h}}}};var sa=r(64583).Promise;const aa=e=>{const t=e&&(e=>"HTML"===e.nodeName?e:e.parentNode||e.host)(e);if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}const{overflow:r,overflowX:i,overflowY:n}=(e=>{var t;if(1!==e.nodeType)return{};const r=null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView;return r?r.getComputedStyle(e,null):{}})(t);return/(auto|scroll|overlay)/.test(r+n+i)?t:aa(t)};function la(e){const t=[];let r=e;for(;r;){const i=aa(r);if(e.ownerDocument.body===i){t.push(i);break}if("BODY"===i.nodeName&&i!==e.ownerDocument.body)break;t.push(i),r=i}return t}function ca(e){let t=!1;const{container:r,target:i,arrow:n,strategy:o,middleware:s,placement:a,useTransform:l=!0,disableUpdateOnResize:c=!1}=e,u=r.ownerDocument.defaultView;if(!i||!r||!u)return{updatePosition:()=>{},dispose:()=>{}};const d=c?null:function(e){return new e.ResizeObserver(e=>{e.every(e=>e.contentRect.width>0&&e.contentRect.height>0)&&f()})}(u);let m=!0;const p=new Set;Object.assign(r.style,{position:"fixed",left:0,top:0,margin:0});const h=()=>{t||(m&&(la(r).forEach(e=>p.add(e)),ao(i)&&la(i).forEach(e=>p.add(e)),p.forEach(e=>{e.addEventListener("scroll",f,{passive:!0})}),null==d||d.observe(r),ao(i)&&(null==d||d.observe(i)),m=!1),Object.assign(r.style,{position:o}),((e,t,r)=>{const i=new Map,n={platform:ea,...r},o={...n.platform,_c:i};return(async(e,t,r)=>{const{placement:i="bottom",strategy:n="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:n}),{x:u,y:d}=as(c,i,l),m=i,p={},h=0;for(let r=0;r<a.length;r++){const{name:o,fn:f}=a[r],{x:g,y:v,data:b,reset:y}=await f({x:u,y:d,initialPlacement:i,placement:m,strategy:n,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,p={...p,[o]:{...p[o],...b}},y&&h<=50&&(h++,"object"==typeof y&&(y.placement&&(m=y.placement),y.rects&&(c=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:n}):y.rects),({x:u,y:d}=as(c,m,l))),r=-1)}return{x:u,y:d,placement:m,strategy:n,middlewareData:p}})(e,t,{...n,platform:o})})(i,r,{placement:a,middleware:s,strategy:o}).then(({x:e,y:i,middlewareData:s,placement:a})=>{t||(function(e){const{arrow:t,middlewareData:r}=e;if(!r.arrow||!t)return;const{x:i,y:n}=r.arrow;Object.assign(t.style,{left:null!=i?`${i}px`:"",top:null!=n?`${n}px`:""})}({arrow:n,middlewareData:s}),function(e){var t,r,i;const{container:n,placement:o,middlewareData:s,strategy:a,lowPPI:l,coordinates:c,useTransform:u=!0}=e;if(!n)return;n.setAttribute("data-popper-placement",o),n.removeAttribute(Po),s.intersectionObserver.intersecting&&n.setAttribute(Po,""),n.removeAttribute(Do),(null===(t=s.hide)||void 0===t?void 0:t.escaped)&&n.setAttribute(Do,""),n.removeAttribute(Bo),(null===(r=s.hide)||void 0===r?void 0:r.referenceHidden)&&n.setAttribute(Bo,"");const d=(null===(i=n.ownerDocument.defaultView)||void 0===i?void 0:i.devicePixelRatio)||1,m=Math.round(c.x*d)/d,p=Math.round(c.y*d)/d;Object.assign(n.style,{position:a}),u?Object.assign(n.style,{transform:l?`translate(${m}px, ${p}px)`:`translate3d(${m}px, ${p}px, 0)`}):Object.assign(n.style,{left:`${m}px`,top:`${p}px`})}({container:r,middlewareData:s,placement:a,coordinates:{x:e,y:i},lowPPI:((null==u?void 0:u.devicePixelRatio)||1)<=1,strategy:o,useTransform:l}),r.dispatchEvent(new CustomEvent(Mo)))}).catch(e=>{}))},f=function(){let e;return()=>(e||(e=new sa(t=>{sa.resolve().then(()=>{e=void 0,t(h())})})),e)}();return u&&(u.addEventListener("scroll",f,{passive:!0}),u.addEventListener("resize",f)),f(),{updatePosition:f,dispose:()=>{t=!0,u&&(u.removeEventListener("scroll",f),u.removeEventListener("resize",f)),p.forEach(e=>{e.removeEventListener("scroll",f)}),p.clear(),null==d||d.disconnect()}}}function ua(e,t){if("window"===t)return null==e?void 0:e.ownerDocument.documentElement;if("clippingParents"===t)return"clippingAncestors";if("scrollParent"===t){let t=aa(e);return"BODY"===t.nodeName&&(t=null==e?void 0:e.ownerDocument.documentElement),t}return t}function da(e,t){if("number"==typeof e)return e;const{start:r,end:i,...n}=e,o=n,s=t?"end":"start",a=t?"start":"end";return e[s]&&(o.left=e[s]),e[a]&&(o.right=e[a]),o}const ma=e=>({name:"resetMaxSize",fn({middlewareData:t,elements:r}){var i;if(null===(i=t.resetMaxSize)||void 0===i?void 0:i.maxSizeAlreadyReset)return{};const{applyMaxWidth:n,applyMaxHeight:o}=e;return n&&(r.floating.style.removeProperty("box-sizing"),r.floating.style.removeProperty("max-width"),r.floating.style.removeProperty("width")),o&&(r.floating.style.removeProperty("box-sizing"),r.floating.style.removeProperty("max-height"),r.floating.style.removeProperty("height")),{data:{maxSizeAlreadyReset:!0},reset:{rects:!0}}}});function pa(e,t){const{container:r,overflowBoundary:i,overflowBoundaryPadding:n,isRtl:o}=t;return function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:n,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=Wo(e,t),u=await ls(t,c),d=Vo(n),m=Ko(n),p="y"===Xo(n),{width:h,height:f}=o.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=m===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,g="end"===m?"top":"bottom");const b=f-u.top-u.bottom,y=h-u.left-u.right,_=zo(f-u[g],b),x=zo(h-u[v],y),w=!t.middlewareData.shift;let C=_,k=x;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(k=y),null!=(i=t.middlewareData.shift)&&i.enabled.y&&(C=b),w&&!m){const e=Fo(u.left,0),t=Fo(u.right,0),r=Fo(u.top,0),i=Fo(u.bottom,0);p?k=h-2*(0!==e||0!==t?e+t:Fo(u.left,u.right)):C=f-2*(0!==r||0!==i?r+i:Fo(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:C});const T=await s.getDimensions(a.floating);return h!==T.width||f!==T.height?{reset:{rects:!0}}:{}}}}({...n&&{padding:da(n,o)},...i&&{altBoundary:!0,boundary:ua(r,i)},apply({availableHeight:t,availableWidth:r,elements:i,rects:n}){const o=(e,t,r)=>{if(e&&(i.floating.style.setProperty("box-sizing","border-box"),i.floating.style.setProperty(`max-${t}`,`${r}px`),n.floating[t]>r)){i.floating.style.setProperty(t,`${r}px`);const e="width"===t?"x":"y";i.floating.style.getPropertyValue(`overflow-${e}`)||i.floating.style.setProperty(`overflow-${e}`,"auto")}},{applyMaxWidth:s,applyMaxHeight:a}=e;o(s,"width",r),o(a,"height",t)}})}const ha="--fui-match-target-size";function fa(e){const t=e.split("-");return{side:t[0],alignment:t[1]}}function ga(e){const t=(r=e)?"number"==typeof r||"object"==typeof r?r:({rects:{floating:e,reference:t},placement:i})=>{const{position:n,alignment:o}=(e=>{const{side:t,alignment:r}=fa(e),i={top:"above",bottom:"below",right:"after",left:"before"}[t],n=r&&(e=>"above"===e||"below"===e?{start:"start",end:"end"}:{start:"top",end:"bottom"})(i)[r];return{position:i,alignment:n}})(i);return r({positionedRect:e,targetRect:t,position:n,alignment:o})}:r;var r;return function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:n,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:r,platform:i,elements:n}=e,o=await(null==i.isRTL?void 0:i.isRTL(n.floating)),s=Vo(r),a=Ko(r),l="y"===Xo(r),c=ds.has(s)?-1:1,u=o&&l?-1:1,d=Wo(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof h&&(p="end"===a?-1*h:h),l?{x:p*u,y:m*c}:{x:m*c,y:p*u}}(t,e);return s===(null==(r=a.offset)?void 0:r.placement)&&null!=(i=a.arrow)&&i.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:s}}}}}(t)}const va=(e,t,r)=>{const i=((e,t)=>{const r="above"===e||"below"===e,i="top"===t||"bottom"===t;return r&&i||!r&&!i})(t,e)?"center":e,n=t&&(e=>({above:"top",below:"bottom",before:e?"right":"left",after:e?"left":"right"}))(r)[t],o=i&&{start:"start",end:"end",top:"start",bottom:"end",center:void 0}[i];return n&&o?`${n}-${o}`:n};function ba(e){const{hasScrollableElement:t,flipBoundary:r,container:i,fallbackPositions:n=[],isRtl:o}=e,s=n.reduce((e,t)=>{const{position:r,align:i}=Ro(t),n=va(i,r,o);return n&&e.push(n),e},[]);return ra({...t&&{boundary:"clippingAncestors"},...r&&{altBoundary:!0,boundary:ua(i,r)},fallbackStrategy:"bestFit",...s.length&&{fallbackPlacements:s}})}function ya(e){const{hasScrollableElement:t,shiftToCoverTarget:r,disableTether:i,overflowBoundary:n,container:o,overflowBoundaryPadding:s,isRtl:a}=e;return function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:n}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=Wo(e,t),c={x:r,y:i},u=await ls(t,l),d=Xo(Vo(n)),m=$o(d);let p=c[m],h=c[d];if(o){const e="y"===m?"bottom":"right";p=Go(p+u["y"===m?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";h=Go(h+u["y"===d?"top":"left"],h,h-u[e])}const f=a.fn({...t,[m]:p,[d]:h});return{...f,data:{x:f.x-r,y:f.y-i,enabled:{[m]:o,[d]:s}}}}}}({...t&&{boundary:"clippingAncestors"},...r&&{crossAxis:!0,limiter:oa({crossAxis:!0,mainAxis:!1})},...i&&{crossAxis:"all"===i,limiter:oa({crossAxis:"all"!==i,mainAxis:!1})},...s&&{padding:da(s,a)},...n&&{altBoundary:!0,boundary:ua(o,n)}})}const _a=({options:e})=>e,xa=w.createContext(void 0);function wa(e,t,r){const i=w.useRef(!0),[n]=w.useState(()=>({value:e,callback:t,facade:{get current(){return n.value},set current(e){const t=n.value;if(t!==e){if(n.value=e,r&&i.current)return;n.callback(e,t)}}}}));return Ti(()=>{i.current=!1},[]),n.callback=t,n.facade}function Ca(e){const{positioning:t}=e,r={position:"below",align:"start",offset:{crossAxis:0,mainAxis:2},fallbackPositions:["above","after","after-top","before","before-top"],matchTargetSize:"width",autoSize:!0,...Ro(t)},{targetRef:i,containerRef:n}=function(e){const t=w.useRef(null),r=w.useRef(null),i=w.useRef(null),n=w.useRef(null),o=w.useRef(null),{enabled:s=!0}=e,a=function(e){const{dir:t,targetDocument:r}=wi(),i="rtl"===t,n=function(e,t){const{align:r,arrowPadding:i,autoSize:n,coverTarget:o,disableUpdateOnResize:s,flipBoundary:a,offset:l,overflowBoundary:c,pinned:u,position:d,unstable_disableTether:m,strategy:p,overflowBoundaryPadding:h,fallbackPositions:f,useTransform:g,matchTargetSize:v,shiftToCoverTarget:b}=t;return w.useCallback((t,y)=>e({container:t,arrow:y,options:{autoSize:n,disableUpdateOnResize:s,matchTargetSize:v,offset:l,strategy:p,coverTarget:o,flipBoundary:a,overflowBoundary:c,useTransform:g,overflowBoundaryPadding:h,pinned:u,arrowPadding:i,align:r,fallbackPositions:f,shiftToCoverTarget:b,position:d,unstable_disableTether:m}}),[n,s,v,l,p,o,a,c,g,h,u,i,r,f,b,d,m,e])}(null!==(o=w.useContext(xa))&&void 0!==o?o:_a,e);var o;const{positionFixed:s}=e;return w.useCallback((e,t)=>{const r=(e=>{var t;const r=aa(e);return!!r&&r!==(null===(t=r.ownerDocument)||void 0===t?void 0:t.body)})(e),o=n(e,t),{autoSize:a,disableUpdateOnResize:l,matchTargetSize:c,offset:u,coverTarget:d,flipBoundary:m,overflowBoundary:p,useTransform:h,overflowBoundaryPadding:f,pinned:g,position:v,arrowPadding:b,strategy:y,align:_,fallbackPositions:x,shiftToCoverTarget:w,unstable_disableTether:C}=o,k=(e=>{switch(e){case"always":case!0:return{applyMaxWidth:!0,applyMaxHeight:!0};case"width-always":case"width":return{applyMaxWidth:!0,applyMaxHeight:!1};case"height-always":case"height":return{applyMaxWidth:!1,applyMaxHeight:!0};default:return!1}})(a),T=[k&&ma(k),c&&{name:"matchTargetSize",fn:async e=>{const{rects:{reference:t,floating:r},elements:{floating:i},middlewareData:{matchTargetSize:{matchTargetSizeAttempt:n=!1}={}}}=e;if(t.width===r.width||n)return{};const{width:o}=t;return i.style.setProperty(ha,`${o}px`),i.style.width||(i.style.width=`var(${ha})`),{data:{matchTargetSizeAttempt:!0},reset:{rects:!0}}}},u&&ga(u),d&&{name:"coverTarget",fn:e=>{const{placement:t,rects:r,x:i,y:n}=e,o={x:i,y:n};switch(fa(t).side){case"bottom":o.y-=r.reference.height;break;case"top":o.y+=r.reference.height;break;case"left":o.x+=r.reference.width;break;case"right":o.x-=r.reference.width}return o}},!g&&ba({container:e,flipBoundary:m,hasScrollableElement:r,isRtl:i,fallbackPositions:x}),ya({container:e,hasScrollableElement:r,overflowBoundary:p,disableTether:C,overflowBoundaryPadding:f,isRtl:i,shiftToCoverTarget:w}),k&&pa(k,{container:e,overflowBoundary:p,overflowBoundaryPadding:f,isRtl:i}),{name:"intersectionObserver",fn:async e=>{const t=e.rects.floating,r=await ta(e,{altBoundary:!0}),i=r.top<t.height&&r.top>0,n=r.bottom<t.height&&r.bottom>0;return{data:{intersecting:i||n}}}},t&&na({element:t,padding:b}),ia({strategy:"referenceHidden"}),ia({strategy:"escaped"}),!1].filter(Boolean);return{placement:va(_,v,i),middleware:T,strategy:(null!=y?y:s)?"fixed":"absolute",disableUpdateOnResize:l,useTransform:h}},[n,i,r,s])}(e),l=w.useCallback(()=>{var e;t.current&&t.current.dispose(),t.current=null;const l=null!==(e=i.current)&&void 0!==e?e:r.current;s&&ki()&&l&&n.current&&(t.current=ca({container:n.current,target:l,arrow:o.current,...a(n.current,o.current)}))},[s,a]),c=Ri(e=>{i.current=e,l()});w.useImperativeHandle(e.positioningRef,()=>({updatePosition:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.updatePosition()},setTarget:t=>{e.target,c(t)}}),[e.target,c]),Ti(()=>{var t;c(null!==(t=e.target)&&void 0!==t?t:null)},[e.target,c]),Ti(()=>{l()},[l]);const u=wa(null,e=>{r.current!==e&&(r.current=e,l())}),d=Ri(()=>{var t;return null===(t=e.onPositioningEnd)||void 0===t?void 0:t.call(e)});return{targetRef:u,containerRef:wa(null,e=>{var t;n.current!==e&&(null===(t=n.current)||void 0===t||t.removeEventListener(Mo,d),null==e||e.addEventListener(Mo,d),n.current=e,l())}),arrowRef:wa(null,e=>{o.current!==e&&(o.current=e,l())})}}(r);return[n,i]}function ka(e){const t=w.useContext(e);return!!t.version&&-1!==t.version.current}xa.Provider;const Ta=()=>{},Ea={controller:{active:Ta,blur:Ta,find:Ta,first:Ta,focus:Ta,focusLastActive:Ta,scrollActiveIntoView:Ta,last:Ta,next:Ta,prev:Ta,showAttributes:Ta,hideAttributes:Ta,showFocusVisibleAttributes:Ta,hideFocusVisibleAttributes:Ta}},Sa=w.createContext(void 0),Ia=Sa.Provider,Aa=()=>{var e;return null!==(e=w.useContext(Sa))&&void 0!==e?e:Ea},Oa="Enter",Na=" ",Ra="ArrowDown",Pa="ArrowUp";function Da(e,t={}){const{open:r=!0,multiselect:i=!1}=t,n=e.key,{altKey:o,ctrlKey:s,key:a,metaKey:l}=e;return 1!==a.length||n===Na||o||s||l?r?n===Pa&&o||n===Oa||!i&&n===Na?"CloseSelect":i&&n===Na?"Select":"Escape"===n?"Close":n===Ra?"Next":n===Pa?"Previous":"Home"===n?"First":"End"===n?"Last":"PageUp"===n?"PageUp":"PageDown"===n?"PageDown":"Tab"===n?"Tab":"None":n===Ra||n===Pa||n===Oa||n===Na?"Open":"None":"Type"}const Ba="fui-Option",Ma=yn({root:{Bt984gj:"f122n59",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",sj55zd:"f19n0e5",i8kkvl:"f1ufnopg",Bceei9c:"f1k6fduh",mc9l5x:"f22iagw",Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bg96gwp:"f1i3iumi",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"fm5eomj",qhf8xq:"f10pi13n",Jwef8y:"f1knas48",Bi91k9c:"feu1g3u",zqbkvg:"fo79ri9",h82x05:["f1osiabc","f1e8le25"],cqj998:"f1yusjty",j3hlsh:["f1e8le25","f1osiabc"],ecr2s2:"fb40n2d",lj723h:"f1g4hkjv",Btxx2vb:"f1lnr2zp",sltcwy:["f1ogfk9z","f1g7j8ec"],dnwvvm:"fiuf46r",Blyvkvs:["f1g7j8ec","f1ogfk9z"]},active:{Bowz1zl:"f11vrvdw",oxogb1:"f17hxjb7",Ix2sn8:"f1dha69c",q7v32p:"f1lm7500",B7cbj04:0,Bewtojm:0,b50fsz:0,B1wzb3v:0,Bqwk70n:0,B37u8z8:0,avt0cx:0,f0sref:0,B9fkznv:0,Be3o27t:0,Bertapg:0,B53xpsf:0,Bsv72rj:0,B39dzdd:0,Btq9bd3:0,Bqfxd14:0,atup0s:"fo7xqb",Fffuxt:0,Bttcd12:0,Beitzug:0,Bqougee:0,B86i8pi:"f1kurthe",Bhijsxg:"fwq15dy",kktds4:"f1pb3wry",Bmau3bo:["ftjv2f4","f1flhb1f"],npektv:["f1flhb1f","ftjv2f4"]},disabled:{sj55zd:"f1s2aq7o",Jwef8y:"f9ql6rf",Bi91k9c:"fvgxktp",zqbkvg:"f185j3qj",h82x05:["f1dligi3","f1vydzie"],cqj998:"fjw1di3",j3hlsh:["f1vydzie","f1dligi3"],ecr2s2:"fgj9um3",lj723h:"f19wldhg",Btxx2vb:"f1ss0kt2",sltcwy:["f1t6oli3","fjy9ci8"],dnwvvm:"fresaxk",Blyvkvs:["fjy9ci8","f1t6oli3"],Bbusuzp:"f1dcs8yz"},selected:{},checkIcon:{Bnnss6s:"fi64zpg",Be2twd7:"fod5ikn",Frg6f3:["f18b9hdq","fn6qj8t"],t21cq0:["f1xk557c","f1h9en5y"],Bcdw1i0:"fd7fpy0",Bo70h7d:"fvc9v3g"},selectedCheck:{Bcdw1i0:"f1022m68"},multiselectCheck:{Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f1l3cf7o",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"fq9zq91",B7ck84d:"f1ewtqcl",mc9l5x:"f22iagw",Bt984gj:"f122n59",Brf1p80:"f4d9j23",Bkfmm31:"f1w9h62z",Be2twd7:"f1ugzwwg",Bqenvij:"fd461yt",a9b677:"fjw5fx7",Bcdw1i0:"f1022m68"},selectedMultiselectCheck:{De3pzq:"ftywsgz",sj55zd:"fqpbvvt",g2u3we:"f3xi7mh",h3c5rm:["ftovhe4","f1wczvin"],B9xav0g:"f68vbr6",zhjwy3:["f1wczvin","ftovhe4"]},checkDisabled:{sj55zd:"f1s2aq7o",Bbusuzp:"f1dcs8yz"},multiselectCheckDisabled:{g2u3we:"f1r1t4y1",h3c5rm:["fmj8ijw","figx54m"],B9xav0g:"f360ss8",zhjwy3:["figx54m","fmj8ijw"]}},{d:[".f122n59{align-items:center;}",[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".f19n0e5{color:var(--colorNeutralForeground1);}",".f1ufnopg{column-gap:var(--spacingHorizontalXS);}",".f1k6fduh{cursor:pointer;}",".f22iagw{display:flex;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".fkhj508{font-size:var(--fontSizeBase300);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",[".fm5eomj{padding:var(--spacingVerticalSNudge) var(--spacingHorizontalS);}",{p:-1}],".f10pi13n{position:relative;}",'.f11vrvdw[data-activedescendant-focusvisible]::after{content:"";}',".f17hxjb7[data-activedescendant-focusvisible]::after{position:absolute;}",".f1dha69c[data-activedescendant-focusvisible]::after{pointer-events:none;}",".f1lm7500[data-activedescendant-focusvisible]::after{z-index:1;}",[".fo7xqb[data-activedescendant-focusvisible]::after{border:2px solid var(--colorStrokeFocus2);}",{p:-2}],[".f1kurthe[data-activedescendant-focusvisible]::after{border-radius:var(--borderRadiusMedium);}",{p:-1}],".fwq15dy[data-activedescendant-focusvisible]::after{top:-2px;}",".f1pb3wry[data-activedescendant-focusvisible]::after{bottom:-2px;}",".ftjv2f4[data-activedescendant-focusvisible]::after{left:-2px;}",".f1flhb1f[data-activedescendant-focusvisible]::after{right:-2px;}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".fi64zpg{flex-shrink:0;}",".fod5ikn{font-size:var(--fontSizeBase400);}",".f18b9hdq{margin-left:calc(var(--spacingHorizontalXXS) * -1);}",".fn6qj8t{margin-right:calc(var(--spacingHorizontalXXS) * -1);}",".f1xk557c{margin-right:var(--spacingHorizontalXXS);}",".f1h9en5y{margin-left:var(--spacingHorizontalXXS);}",".fd7fpy0{visibility:hidden;}",".fvc9v3g svg{display:block;}",".f1022m68{visibility:visible;}",[".f1l3cf7o{border:var(--strokeWidthThin) solid var(--colorNeutralStrokeAccessible);}",{p:-2}],[".fq9zq91{border-radius:var(--borderRadiusSmall);}",{p:-1}],".f1ewtqcl{box-sizing:border-box;}",".f4d9j23{justify-content:center;}",".f1w9h62z{fill:currentColor;}",".f1ugzwwg{font-size:12px;}",".fd461yt{height:16px;}",".fjw5fx7{width:16px;}",".ftywsgz{background-color:var(--colorCompoundBrandBackground);}",".fqpbvvt{color:var(--colorNeutralForegroundInverted);}",".f3xi7mh{border-top-color:var(--colorCompoundBrandBackground);}",".ftovhe4{border-right-color:var(--colorCompoundBrandBackground);}",".f1wczvin{border-left-color:var(--colorCompoundBrandBackground);}",".f68vbr6{border-bottom-color:var(--colorCompoundBrandBackground);}",".f1r1t4y1{border-top-color:var(--colorNeutralForegroundDisabled);}",".fmj8ijw{border-right-color:var(--colorNeutralForegroundDisabled);}",".figx54m{border-left-color:var(--colorNeutralForegroundDisabled);}",".f360ss8{border-bottom-color:var(--colorNeutralForegroundDisabled);}"],h:[".f1knas48:hover{background-color:var(--colorNeutralBackground1Hover);}",".feu1g3u:hover{color:var(--colorNeutralForeground1Hover);}",".fo79ri9:hover .fui-Option__checkIcon{border-top-color:var(--colorNeutralForeground1Hover);}",".f1osiabc:hover .fui-Option__checkIcon{border-right-color:var(--colorNeutralForeground1Hover);}",".f1e8le25:hover .fui-Option__checkIcon{border-left-color:var(--colorNeutralForeground1Hover);}",".f1yusjty:hover .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForeground1Hover);}",".f9ql6rf:hover{background-color:var(--colorTransparentBackground);}",".fvgxktp:hover{color:var(--colorNeutralForegroundDisabled);}",".f185j3qj:hover .fui-Option__checkIcon{border-top-color:var(--colorNeutralForegroundDisabled);}",".f1dligi3:hover .fui-Option__checkIcon{border-right-color:var(--colorNeutralForegroundDisabled);}",".f1vydzie:hover .fui-Option__checkIcon{border-left-color:var(--colorNeutralForegroundDisabled);}",".fjw1di3:hover .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForegroundDisabled);}"],a:[".fb40n2d:active{background-color:var(--colorNeutralBackground1Pressed);}",".f1g4hkjv:active{color:var(--colorNeutralForeground1Pressed);}",".f1lnr2zp:active .fui-Option__checkIcon{border-top-color:var(--colorNeutralForeground1Hover);}",".f1ogfk9z:active .fui-Option__checkIcon{border-right-color:var(--colorNeutralForeground1Hover);}",".f1g7j8ec:active .fui-Option__checkIcon{border-left-color:var(--colorNeutralForeground1Hover);}",".fiuf46r:active .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForeground1Hover);}",".fgj9um3:active{background-color:var(--colorTransparentBackground);}",".f19wldhg:active{color:var(--colorNeutralForegroundDisabled);}",".f1ss0kt2:active .fui-Option__checkIcon{border-top-color:var(--colorNeutralForegroundDisabled);}",".f1t6oli3:active .fui-Option__checkIcon{border-right-color:var(--colorNeutralForegroundDisabled);}",".fjy9ci8:active .fui-Option__checkIcon{border-left-color:var(--colorNeutralForegroundDisabled);}",".fresaxk:active .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForegroundDisabled);}"],m:[["@media (forced-colors: active){.f1dcs8yz{color:GrayText;}}",{m:"(forced-colors: active)"}]]}),La={activeOption:void 0,focusVisible:!1,multiselect:!1,getOptionById(){},getOptionsMatchingValue(){return[]},registerOption(){return()=>{}},selectedOptions:[],onOptionClick(){},onActiveDescendantChange(){},selectOption(){},setActiveOption(){}},za=mn(void 0),Fa=e=>pn(za,(t=La)=>e(t)),ja=(za.Provider,{activeOption:void 0,focusVisible:!1,setActiveOption:()=>null}),Ha=yn({root:{De3pzq:"fxugw4r",B7ck84d:"f1ewtqcl",mc9l5x:"f22iagw",Beiy3e4:"f1vx9l62",Bf4jedk:"f3hsy1e",Bmxbyg5:"f5zp4f",Bw0xxkn:0,oeaueh:0,Bpd4iqm:0,Befb4lg:"f1iepc6i",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1t35pdg",Belr9w4:"fiut8dr"}},{d:[".fxugw4r{background-color:var(--colorNeutralBackground1);}",".f1ewtqcl{box-sizing:border-box;}",".f22iagw{display:flex;}",".f1vx9l62{flex-direction:column;}",".f3hsy1e{min-width:160px;}",".f5zp4f{overflow-y:auto;}",[".f1iepc6i{outline:1px solid var(--colorTransparentStroke);}",{p:-1}],[".f1t35pdg{padding:var(--spacingHorizontalXS);}",{p:-1}],".fiut8dr{row-gap:var(--spacingHorizontalXXS);}"]}),qa=w.forwardRef((e,t)=>{const r=((e,t)=>{const{multiselect:r,disableAutoFocus:i=!1}=e,n=Ao(),{listboxRef:o,activeParentRef:s,controller:a}=go({matchOption:e=>e.classList.contains(Ba)}),l=ka(za),c=Fa(e=>e.onActiveDescendantChange),u=Fa(e=>e.getOptionById),d=Fa(e=>e.getOptionsMatchingValue),m=l?u:n.getOptionById,p=l?d:n.getOptionsMatchingValue,h=w.useMemo(()=>{let e=null;const t=e=>{null==c||c(e)};return r=>{r?(e=r,e.addEventListener("activedescendantchange",t)):null==e||e.removeEventListener("activedescendantchange",t)}},[c]),[f,g]=w.useState(!1);so(g);const v=Aa(),b=!!w.useContext(Sa),y=b?v.controller:a,{clearSelection:_,selectedOptions:x,selectOption:C}=Oo(e),k=Fa(e=>e.selectedOptions),T=Fa(e=>e.selectOption),E=l?{selectedOptions:k,selectOption:T,...ja}:{selectedOptions:x,selectOption:C,...ja};w.useEffect(()=>{if(!b){if(y.hideFocusVisibleAttributes(),!i)if(!r&&E.selectedOptions.length>0){const e=p(e=>e===E.selectedOptions[0]).pop();(null==e?void 0:e.id)&&y.focus(e.id)}else y.first();return()=>{y.blur()}}},[]);const S=w.useCallback(()=>{b||(y.showFocusVisibleAttributes(),f&&y.scrollActiveIntoView())},[y,b,f]),I=w.useCallback(()=>{b||y.hideFocusVisibleAttributes()},[y,b]),A={components:{root:"div"},root:Mi(tn("div",{ref:rn(t,s,o,h),role:r?"menu":"listbox",tabIndex:0,...e}),{elementType:"div"}),standalone:!l,multiselect:r,clearSelection:_,activeDescendantController:y,onActiveDescendantChange:c,...n,...E};return A.root.onKeyDown=Ri(In(A.root.onKeyDown,e=>{const t=Da(e,{open:!0}),r=y.active(),i=r?m(r):null;switch(t){case"First":case"Last":case"Next":case"Previous":case"PageDown":case"PageUp":case"CloseSelect":case"Select":e.preventDefault()}switch(t){case"Next":i?y.next():y.first();break;case"Previous":i?y.prev():y.first();break;case"PageUp":case"First":y.first();break;case"PageDown":case"Last":y.last();break;case"Select":case"CloseSelect":i&&C(e,i)}})),A.root.onFocus=Ri(In(A.root.onFocus,S)),A.root.onBlur=Ri(In(A.root.onBlur,I)),A})(e,t),i=function(e){const t=ka(za),{getOptionById:r,getOptionsMatchingValue:i,multiselect:n,registerOption:o,selectedOptions:s,selectOption:a,activeDescendantController:l}=e,c=Fa(e=>e.registerOption);return{listbox:{activeOption:void 0,focusVisible:!1,getOptionById:r,getOptionsMatchingValue:i,multiselect:n,registerOption:t?c:o,selectedOptions:s,selectOption:a,setActiveOption:()=>{},onOptionClick:Fa(e=>e.onOptionClick),onActiveDescendantChange:Fa(e=>e.onActiveDescendantChange)},activeDescendant:w.useMemo(()=>({controller:l}),[l])}}(r);return(e=>{const t=Ha();e.root.className=xn("fui-Listbox",t.root,e.root.className)})(r),En("useListboxStyles_unstable")(r),((e,t)=>cn(Ia,{value:t.activeDescendant,children:cn(za.Provider,{value:t.listbox,children:cn(e.root,{})})}))(r,i)});qa.displayName="Listbox";const Ua={current:0},Ga=w.createContext(void 0);const Wa=w.createContext(void 0);function Va(e="fui-",t){const r=null!==(o=w.useContext(Ga))&&void 0!==o?o:Ua,i=w.useContext(Wa)||"",n=C.useId;var o;if(n){const r=n(),o=w.useMemo(()=>r.replace(/:/g,""),[r]);return t||`${i}${e}${o}`}return w.useMemo(()=>t||`${i}${e}${++r.current}`,[i,e,t,r])}Wa.Provider;const Ka=e=>-1,$a=e=>{};function Ya(e,t,r){const{state:{open:i,setOpen:n,setHasFocus:o},defaultProps:s,elementType:a,activeDescendantController:l}=r,c=Mi(e,{defaultProps:{type:"text","aria-expanded":i,role:"combobox",..."object"==typeof s&&s},elementType:a}),u=w.useRef(null);return c.ref=rn(u,c.ref,t),c.onBlur=In(e=>{n(e,!1),o(!1)},c.onBlur),c.onFocus=In(e=>{e.target===e.currentTarget&&o(!0)},c.onFocus),c.onClick=In(e=>{n(e,!i)},c.onClick),c.onKeyDown=In(function(e){const{activeDescendantController:t,getOptionById:r,setOpen:i,selectOption:n,multiselect:o,open:s}=e,a=w.useCallback(()=>{const e=t.active();return e?r(e):void 0},[t,r]),l=function(){const e=oo();return w.useCallback(t=>{var r;null===(r=e.current)||void 0===r||r.setVal(t)},[e])}();return Ri(e=>{const r=Da(e,{open:s,multiselect:o}),c=a();switch(r){case"First":case"Last":case"Next":case"Previous":case"PageDown":case"PageUp":case"Open":case"Close":case"CloseSelect":case"Select":e.preventDefault()}switch(l(!0),r){case"First":t.first();break;case"Last":t.last();break;case"Next":(e=>{e?t.next():t.first()})(c);break;case"Previous":(e=>{e?t.prev():t.first()})(c);break;case"PageDown":(()=>{for(let e=0;e<10;e++)t.next()})();break;case"PageUp":(()=>{for(let e=0;e<10;e++)t.prev()})();break;case"Open":i(e,!0);break;case"Close":e.stopPropagation(),i(e,!1);break;case"CloseSelect":!o&&!(null==c?void 0:c.disabled)&&i(e,!1);case"Select":c&&n(e,c);break;case"Tab":!o&&c&&n(e,c)}})}({activeDescendantController:l,...r.state}),c.onKeyDown),c}const Ja=(e,t)=>{var r;e=Kn(e,{supportsLabelFor:!0,supportsSize:!0});const{listboxRef:i,activeParentRef:n,controller:o}=go({matchOption:e=>e.classList.contains(Ba)}),s=(e=>{const{appearance:t="outline",disableAutoFocus:r,children:i,clearable:n=!1,editable:o=!1,inlinePopup:s=!1,mountNode:a,multiselect:l,onOpenChange:c,size:u="medium",activeDescendantController:d,freeform:m=!1,disabled:p=!1,onActiveOptionChange:h=null}=e,f=Ao(),{getOptionsMatchingValue:g}=f,{getOptionById:v}=f,b=w.useCallback(()=>{const e=d.active();return e?v(e):void 0},[d,v]),y=b(),_=w.useCallback(e=>{let t;"function"==typeof e&&(t=e(b())),t?d.focus(t.id):d.blur()},[d,b]),[x,C]=w.useState(!1),[k,T]=w.useState(!1),E=w.useRef(!1),S=function(){const e=w.useRef(!0);return w.useEffect(()=>{e.current&&(e.current=!1)},[]),e.current}(),[I,A]=Oi({state:e.value,initialState:void 0}),{selectedOptions:O,selectOption:N,clearSelection:R}=Oo(e),P=w.useCallback((e,t)=>{Io.unstable_batchedUpdates(()=>{A(void 0),N(e,t)})},[A,N]),D=w.useMemo(()=>{if(void 0!==I)return I;if(S&&void 0!==e.defaultValue)return e.defaultValue;const t=g(e=>O.includes(e)).map(e=>e.text);return l?o?"":t.join(", "):t[0]},[I,o,g,l,O]),[B,M]=Oi({state:e.open,defaultState:e.defaultOpen,initialState:!1}),L=w.useCallback((e,t)=>{p||(null==c||c(e,{open:t}),Io.unstable_batchedUpdates(()=>{t||m||A(void 0),M(t)}))},[c,M,A,m,p]);w.useEffect(()=>{if(B){if(!l&&O.length>0){const e=g(e=>e===O[0]).pop();(null==e?void 0:e.id)&&d.focus(e.id)}}else d.blur()},[B,d]),w.useEffect(()=>{!B||r||d.active()||d.first()},[B,i,r,d,v]);const z=Ri(e=>{const t=e.detail.previousId?f.getOptionById(e.detail.previousId):null,r=f.getOptionById(e.detail.id);null==h||h(e,{event:e,type:"change",previousOption:t,nextOption:r})});return{...f,freeform:m,disabled:p,selectOption:P,clearSelection:R,selectedOptions:O,activeOption:y,appearance:t,clearable:n,focusVisible:x,ignoreNextBlur:E,inlinePopup:s,mountNode:a,open:B,hasFocus:k,setActiveOption:_,setFocusVisible:C,setHasFocus:T,setOpen:L,setValue:A,size:u,value:D,multiselect:l,onOptionClick:Ri(e=>{l||L(e,!1)}),onActiveDescendantChange:z}})({...e,activeDescendantController:o,freeform:!1}),{clearable:a,clearSelection:l,disabled:c,hasFocus:u,multiselect:d,open:m,selectedOptions:p,setOpen:h}=s,{primary:f,root:g}=en({props:e,primarySlotTagName:"button",excludedPropNames:["children"]}),[v,b]=Ca(e),y=w.useRef(null),_=function(e,t,r){const{state:{multiselect:i},triggerRef:n,defaultProps:o}=r,s=Va("fluent-listbox",null===(a=e)||"object"!=typeof a||Array.isArray(a)||w.isValidElement(a)?void 0:e.id);var a;const l=Li(e,{renderByDefault:!0,elementType:qa,defaultProps:{id:s,multiselect:i,tabIndex:void 0,...o}}),c=Kn({id:s},{supportsLabelFor:!0});l&&!l["aria-label"]&&!l["aria-labelledby"]&&c["aria-labelledby"]&&(l["aria-labelledby"]=c["aria-labelledby"]);const u=Ri(In(e=>{e.preventDefault()},null==l?void 0:l.onMouseDown)),d=Ri(In(e=>{var t;e.preventDefault(),null===(t=n.current)||void 0===t||t.focus()},null==l?void 0:l.onClick)),m=rn(null==l?void 0:l.ref,t);return l&&(l.ref=m,l.onMouseDown=u,l.onClick=d),l}(e.listbox,rn(v,i),{state:s,triggerRef:y,defaultProps:{children:e.children}}),{targetDocument:x}=wi();var C;(e=>{const{targetDocument:t}=wi(),r=null==t?void 0:t.defaultView,{refs:i,callback:n,element:o,disabled:s,disabledFocusOnIframe:a,contains:l=Eo}=e,c=w.useRef(void 0);(e=>{const{disabled:t,element:r,callback:i,contains:n=Eo,pollDuration:o=100,refs:s}=e,a=w.useRef(),l=Ri(e=>{s.every(t=>!n(t.current||null,e.target))&&!t&&i(e)});w.useEffect(()=>{if(!t)return null==r||r.addEventListener(So,l,!0),()=>{null==r||r.removeEventListener(So,l,!0)}},[r,t,l]),w.useEffect(()=>{var e;if(!t)return a.current=null==r||null===(e=r.defaultView)||void 0===e?void 0:e.setInterval(()=>{const e=null==r?void 0:r.activeElement;if("IFRAME"===(null==e?void 0:e.tagName)||"WEBVIEW"===(null==e?void 0:e.tagName)){const t=new CustomEvent(So,{bubbles:!0});e.dispatchEvent(t)}},o),()=>{var e;null==r||null===(e=r.defaultView)||void 0===e||e.clearTimeout(a.current)}},[r,t,o])})({element:o,disabled:a||s,callback:n,refs:i,contains:l});const u=w.useRef(!1),d=Ri(e=>{if(u.current)return void(u.current=!1);const t=e.composedPath()[0],r=i.every(e=>!l(e.current||null,t));r&&!s&&n(e)}),m=Ri(e=>{u.current=i.some(t=>l(t.current||null,e.target))});w.useEffect(()=>{if(s)return;let e=(e=>{var t,r,i;if(e)return"object"==typeof e.window&&e.window===e?e.event:null!==(i=null===(r=e.ownerDocument)||void 0===r||null===(t=r.defaultView)||void 0===t?void 0:t.event)&&void 0!==i?i:void 0})(r);const t=t=>{t!==e?d(t):e=void 0};return null==o||o.addEventListener("click",t,!0),null==o||o.addEventListener("touchstart",t,!0),null==o||o.addEventListener("contextmenu",t,!0),null==o||o.addEventListener("mousedown",m,!0),c.current=null==r?void 0:r.setTimeout(()=>{e=void 0},1),()=>{null==o||o.removeEventListener("click",t,!0),null==o||o.removeEventListener("touchstart",t,!0),null==o||o.removeEventListener("contextmenu",t,!0),null==o||o.removeEventListener("mousedown",m,!0),null==r||r.clearTimeout(c.current),e=void 0}},[d,o,s,m,r])})({element:x,callback:e=>h(e,!1),refs:[y,v,b],disabled:!m});const k=function(e,t,r){const{state:{open:i,setOpen:n,getOptionById:o},defaultProps:s,activeDescendantController:a}=r,l=w.useRef(""),[c,u]=function(){const{targetDocument:e}=wi(),t=null==e?void 0:e.defaultView;return An(t?t.setTimeout:Ka,t?t.clearTimeout:$a)}(),d=(e,t={startFromNext:!1})=>{const{startFromNext:r}=t,i=a.active();return a.find(t=>{const r=o(t);return!!r&&e(r.text)},{startFrom:r?a.next({passive:!0}):i})||a.find(t=>{const r=o(t);return!!r&&e(r.text)})},m=Ya(e,t,{state:r.state,defaultProps:s,elementType:"button",activeDescendantController:a});return m.onKeyDown=In(e=>{u(),"Type"===Da(e)&&(l.current+=e.key.toLowerCase(),c(()=>{l.current=""},500),i&&(d(e=>0===e.toLocaleLowerCase().indexOf(l.current),{startFromNext:1===l.current.length})||function(e){for(let t=1;t<e.length;t++)if(e[t]!==e[t-1])return!1;return!0}(l.current)&&d(e=>0===e.toLocaleLowerCase().indexOf(l.current[0]),{startFromNext:!0})||a.blur()),!i&&n(e,!0))},m.onKeyDown),m}(null!==(C=e.button)&&void 0!==C?C:{},rn(y,n,t),{state:s,defaultProps:{type:"button",tabIndex:f.disabled?void 0:0,children:s.value||e.placeholder,"aria-controls":m?null==_?void 0:_.id:void 0,...f},activeDescendantController:o}),T=Mi(e.root,{defaultProps:{"aria-owns":!e.inlinePopup&&m?null==_?void 0:_.id:void 0,children:e.children,...g},elementType:"div"});T.ref=rn(T.ref,b);const E=p.length>0&&!c&&a&&!d,S={components:{root:"div",button:"button",clearButton:"button",expandIcon:"span",listbox:qa},root:T,button:k,listbox:m||u?_:void 0,clearButton:Li(e.clearButton,{defaultProps:{"aria-label":"Clear selection",children:w.createElement(To,null),tabIndex:E?0:void 0,type:"button"},elementType:"button",renderByDefault:!0}),expandIcon:Li(e.expandIcon,{renderByDefault:!0,defaultProps:{children:w.createElement(ko,null)},elementType:"span"}),placeholderVisible:!s.value&&!!e.placeholder,showClearButton:E,activeDescendantController:o,...s},I=Ri(In(null===(r=S.clearButton)||void 0===r?void 0:r.onClick,e=>{var t;l(e),null===(t=y.current)||void 0===t||t.focus()}));return S.clearButton&&(S.clearButton.onClick=I),d&&(S.clearButton=void 0),S};function Xa(e,t){e&&Object.assign(e,{_virtual:{parent:t}})}const Za=w.createContext(void 0);Za.Provider;const Qa=w.createContext(void 0),el=Qa.Provider,tl="data-fui-focus-visible";function rl(e,t){if(il(e))return()=>{};const r={current:void 0},i=ir(t);function n(e){i.isNavigatingWithKeyboard()&&ao(e)&&(r.current=e,e.setAttribute(tl,""))}function o(){r.current&&(r.current.removeAttribute(tl),r.current=void 0)}i.subscribe(e=>{e?n(t.document.activeElement):o()});const s=e=>{o(),n(e.composedPath()[0])},a=t=>{(!t.relatedTarget||ao(t.relatedTarget)&&!e.contains(t.relatedTarget))&&o()};return e.addEventListener(Jt,s),e.addEventListener("focusout",a),e.focusVisible=!0,e.contains(t.document.activeElement)&&n(t.document.activeElement),()=>{o(),e.removeEventListener(Jt,s),e.removeEventListener("focusout",a),e.focusVisible=void 0,nr(i)}}function il(e){return!!e&&(!!e.focusVisible||il(null==e?void 0:e.parentElement))}function nl(e={}){const t=wi(),r=w.useRef(null);var i;const n=null!==(i=e.targetDocument)&&void 0!==i?i:t.targetDocument;return w.useEffect(()=>{if((null==n?void 0:n.defaultView)&&r.current)return rl(r.current,n.defaultView)},[r,n]),r}const ol=yn({root:{qhf8xq:"f1euv43f",Bhzewxz:"f15twtuk",oyh7mz:["f1vgc2s3","f1e31b4d"],j35jbq:["f1e31b4d","f1vgc2s3"],Bj3rh1h:"f494woh"}},{d:[".f1euv43f{position:absolute;}",".f15twtuk{top:0;}",".f1vgc2s3{left:0;}",".f1e31b4d{right:0;}",".f494woh{z-index:1000000;}"]}),sl=C.useInsertionEffect,al=()=>{let e;return{get:function(t,r){return e||(r&&(e=t.ownerDocument.createElement("div"),t.appendChild(e)),e)},dispose:function(){e&&(e.remove(),e=void 0)}}},ll=sl?e=>{const{className:t,dir:r,focusVisibleRef:i,targetNode:n}=e,[o]=w.useState(al),s=w.useMemo(()=>void 0===n||e.disabled?null:new Proxy({},{get(e,t){if("nodeType"===t)return Node.ELEMENT_NODE;if("remove"===t){const e=o.get(n,!1);return e&&0===e.childNodes.length&&o.dispose(),()=>{}}const r=o.get(n,!0),i=r?r[t]:void 0;return"function"==typeof i?i.bind(r):i},set(e,t,r){const i="_virtual"===t||"focusVisible"===t,s=i?o.get(n,!1):o.get(n,!0);return!(!i||s)||!!s&&(Object.assign(s,{[t]:r}),!0)}}),[o,n,e.disabled]);return sl(()=>{if(!s)return;const e=t.split(" ").filter(Boolean);return s.classList.add(...e),s.setAttribute("dir",r),s.setAttribute("data-portal-node","true"),i.current=s,()=>{s.classList.remove(...e),s.removeAttribute("dir")}},[t,r,s,i]),w.useEffect(()=>()=>{null==s||s.remove()},[s]),s}:e=>{const{className:t,dir:r,focusVisibleRef:i,targetNode:n}=e,o=w.useMemo(()=>{if(void 0===n||e.disabled)return null;const t=n.ownerDocument.createElement("div");return n.appendChild(t),t},[n,e.disabled]);return w.useMemo(()=>{o&&(o.className=t,o.setAttribute("dir",r),o.setAttribute("data-portal-node","true"),i.current=o)},[t,r,o,i]),w.useEffect(()=>()=>{null==o||o.remove()},[o]),o},cl=e=>{const{element:t,className:r}=function(e){return ao(e)?{element:e}:"object"==typeof e?null===e?{element:null}:e:{}}(e.mountNode),i=w.useRef(null),n=(e=>{const{targetDocument:t,dir:r}=wi(),i=w.useContext(Za),n=nl(),o=ol(),s=null!==(a=w.useContext(Qa))&&void 0!==a?a:"";var a;const l={dir:r,disabled:e.disabled,focusVisibleRef:n,className:xn(s,o.root,e.className),targetNode:null!=i?i:null==t?void 0:t.body};return ll(l)})({disabled:!!t,className:r}),o=null!=t?t:n,s={children:e.children,mountNode:o,virtualParentRootRef:i};return w.useEffect(()=>{if(!o)return;const e=i.current,t=o.contains(e);return e&&!t?(Xa(o,e),()=>{Xa(o,void 0)}):void 0},[i,o]),s},ul=e=>{return t=cl(e),w.createElement("span",{hidden:!0,ref:t.virtualParentRootRef},t.mountNode&&Io.createPortal(w.createElement(w.Fragment,null,t.children,w.createElement("span",{hidden:!0})),t.mountNode));var t};ul.displayName="Portal";const dl=mn({activeOption:void 0,appearance:"outline",focusVisible:!1,open:!1,registerOption(){return()=>{}},selectedOptions:[],selectOption(){},setActiveOption(){},setOpen(){},size:"medium"}),ml=(dl.Provider,"fui-Dropdown"),pl=yn({root:{Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",B7ck84d:"f1ewtqcl",mc9l5x:"ftuwxu6",Bf4jedk:"f1exfvgq",qhf8xq:"f10pi13n",ha4doy:"fmrv4ls",Bbr2w1p:"f14a1fxs",Bduesf4:"f3e99gv",Bpq79vn:"fhljsf7",li1rpt:"f1gw3sf2",Bsft5z2:"f13zj6fq",E3zdtr:"f1mdlcz9",Eqx8gd:["f1a7op3","f1cjjd47"],By385i5:"f1gboi2j",B1piin3:["f1cjjd47","f1a7op3"],Dlnsje:"ffyw7fx",d9w3h3:["f1kp91vd","f1ibwz09"],B3778ie:["f1ibwz09","f1kp91vd"],B1q35kw:0,Bw17bha:0,Bcgy8vk:0,Bjuhk93:"f1mnjydx",Gjdm7m:"f13evtba",b1kco5:"f1yk9hq",Ba2ppi3:"fhwpy7i",F2fol1:"f14ee0xe",lck23g:"f1xhbsuh",df92cz:"fv8e3ye",I188md:"ftb5wc6",umuwi5:"fjw5xc1",Blcqepd:"f1xdyd5c",nplu4u:"fatpbeo",Bioka5o:"fb7uyps",H713fs:"f1cmft4k",B9ooomg:"f1x58t8o",Bercvud:"f1ibeo51",Bz04dq9:"f132nw8t",Budl3uf:"f1htdosj"},listbox:{B7ck84d:"f1ewtqcl",E5pizo:"f1hg901r",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",Bxyxcbc:"fmmk62d"},listboxCollapsed:{mc9l5x:"fjseox"},inlineListbox:{Bj3rh1h:"f19g0ac"},button:{Bt984gj:"f122n59",De3pzq:"f1c21dwh",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f3bhgqh",B7ck84d:"f1ewtqcl",sj55zd:"f19n0e5",i8kkvl:"f14mj54c",Bceei9c:"f1k6fduh",mc9l5x:"f13qh94s",Bahqtrf:"fk6fouc",Budl1dq:"f12nh0o2",Brf1p80:"f1869bpl",fsow6f:["f1o700av","fes3tcz"],a9b677:"fly5x3f",Brovlpu:"ftqa4ok"},placeholder:{sj55zd:"fxc4j92"},small:{Bahqtrf:"fk6fouc",Be2twd7:"fy9rknc",Bhrd7zp:"figsok6",Bg96gwp:"fwrc4pm",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:["fye6m5k","f3cq2dl"]},medium:{Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"figsok6",Bg96gwp:"f1i3iumi",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:["f14ev680","f58uxzw"]},large:{i8kkvl:"f1rjii52",Bahqtrf:"fk6fouc",Be2twd7:"fod5ikn",Bhrd7zp:"figsok6",Bg96gwp:"faaz57k",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:["f139mn7i","f1v3q0m"]},outline:{De3pzq:"fxugw4r",Bgfg5da:0,B9xav0g:"f1c1zstj",oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fhz96rm"},outlineInteractive:{Bgoe8wy:"fvcxoqz",Bwzppfd:["f1ub3y4t","f1m52nbi"],oetu4i:"f1l4zc64",gg5e9n:["f1m52nbi","f1ub3y4t"],B6oc9vd:"fvs00aa",ak43y8:["f1assf6x","f4ruux4"],wmxk5l:"f1z0osm6",B50zh58:["f4ruux4","f1assf6x"],Bvq3b66:"f1b473iu",Brahy3i:["f381qr8","ft4skwv"],zoxjo1:"f1qzcrsd",an54nd:["ft4skwv","f381qr8"]},underline:{De3pzq:"f1c21dwh",B9xav0g:0,oivjwe:0,Bn0qgzm:0,Bgfg5da:"f9ez7ne",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"fokr779"},"filled-lighter":{De3pzq:"fxugw4r",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fs2rfia"},"filled-darker":{De3pzq:"f16xq7d1",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fs2rfia"},invalid:{tvckwq:"fs4k3qj",gk2u95:["fcee079","fmyw78r"],hhx65j:"f1fgmyf4",Bxowmz0:["fmyw78r","fcee079"]},invalidUnderline:{hhx65j:"f1fgmyf4"},disabled:{Bceei9c:"fdrzuqr",De3pzq:"f1c21dwh",g2u3we:"f1jj8ep1",h3c5rm:["f15xbau","fy0fskl"],B9xav0g:"f4ikngz",zhjwy3:["fy0fskl","f15xbau"],Bjwas2f:"fg455y9",Bn1d65q:["f1rvyvqg","f14g86mu"],Bxeuatn:"f1cwzwz",n51gp8:["f14g86mu","f1rvyvqg"]},disabledText:{sj55zd:"f1s2aq7o",Bceei9c:"fdrzuqr"},hidden:{mc9l5x:"fjseox"}},{d:[[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".f1ewtqcl{box-sizing:border-box;}",".ftuwxu6{display:inline-flex;}",".f1exfvgq{min-width:250px;}",".f10pi13n{position:relative;}",".fmrv4ls{vertical-align:middle;}",".f1gw3sf2::after{box-sizing:border-box;}",'.f13zj6fq::after{content:"";}',".f1mdlcz9::after{position:absolute;}",".f1a7op3::after{left:-1px;}",".f1cjjd47::after{right:-1px;}",".f1gboi2j::after{bottom:-1px;}",".ffyw7fx::after{height:max(var(--strokeWidthThick), var(--borderRadiusMedium));}",".f1kp91vd::after{border-bottom-left-radius:var(--borderRadiusMedium);}",".f1ibwz09::after{border-bottom-right-radius:var(--borderRadiusMedium);}",[".f1mnjydx::after{border-bottom:var(--strokeWidthThick) solid var(--colorCompoundBrandStroke);}",{p:-1}],".f13evtba::after{clip-path:inset(calc(100% - 2px) 0 0 0);}",".f1yk9hq::after{transform:scaleX(0);}",".fhwpy7i::after{transition-property:transform;}",".f14ee0xe::after{transition-duration:var(--durationUltraFast);}",".f1xhbsuh::after{transition-delay:var(--curveAccelerateMid);}",".f1hg901r{box-shadow:var(--shadow16);}",[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".fmmk62d{max-height:80vh;}",".fjseox{display:none;}",".f19g0ac{z-index:1;}",".f122n59{align-items:center;}",".f1c21dwh{background-color:var(--colorTransparentBackground);}",[".f3bhgqh{border:none;}",{p:-2}],".f19n0e5{color:var(--colorNeutralForeground1);}",".f14mj54c{column-gap:var(--spacingHorizontalXXS);}",".f1k6fduh{cursor:pointer;}",".f13qh94s{display:grid;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".f12nh0o2{grid-template-columns:[content] 1fr [icon] auto [end];}",".f1869bpl{justify-content:space-between;}",".f1o700av{text-align:left;}",".fes3tcz{text-align:right;}",".fly5x3f{width:100%;}",".fxc4j92{color:var(--colorNeutralForeground4);}",".fy9rknc{font-size:var(--fontSizeBase200);}",".figsok6{font-weight:var(--fontWeightRegular);}",".fwrc4pm{line-height:var(--lineHeightBase200);}",[".fye6m5k{padding:3px var(--spacingHorizontalSNudge) 3px calc(var(--spacingHorizontalSNudge) + var(--spacingHorizontalXXS));}",{p:-1}],[".f3cq2dl{padding:3px calc(var(--spacingHorizontalSNudge) + var(--spacingHorizontalXXS)) 3px var(--spacingHorizontalSNudge);}",{p:-1}],".fkhj508{font-size:var(--fontSizeBase300);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",[".f14ev680{padding:5px var(--spacingHorizontalMNudge) 5px calc(var(--spacingHorizontalMNudge) + var(--spacingHorizontalXXS));}",{p:-1}],[".f58uxzw{padding:5px calc(var(--spacingHorizontalMNudge) + var(--spacingHorizontalXXS)) 5px var(--spacingHorizontalMNudge);}",{p:-1}],".f1rjii52{column-gap:var(--spacingHorizontalSNudge);}",".fod5ikn{font-size:var(--fontSizeBase400);}",".faaz57k{line-height:var(--lineHeightBase400);}",[".f139mn7i{padding:7px var(--spacingHorizontalM) 7px calc(var(--spacingHorizontalM) + var(--spacingHorizontalSNudge));}",{p:-1}],[".f1v3q0m{padding:7px calc(var(--spacingHorizontalM) + var(--spacingHorizontalSNudge)) 7px var(--spacingHorizontalM);}",{p:-1}],".fxugw4r{background-color:var(--colorNeutralBackground1);}",[".fhz96rm{border:var(--strokeWidthThin) solid var(--colorNeutralStroke1);}",{p:-2}],".f1c1zstj{border-bottom-color:var(--colorNeutralStrokeAccessible);}",[".f9ez7ne{border-bottom:var(--strokeWidthThin) solid var(--colorNeutralStrokeAccessible);}",{p:-1}],[".fokr779{border-radius:0;}",{p:-1}],[".fs2rfia{border:var(--strokeWidthThin) solid transparent;}",{p:-2}],".f16xq7d1{background-color:var(--colorNeutralBackground3);}",[".fs2rfia{border:var(--strokeWidthThin) solid transparent;}",{p:-2}],".fs4k3qj:not(:focus-within),.fs4k3qj:hover:not(:focus-within){border-top-color:var(--colorPaletteRedBorder2);}",".fcee079:not(:focus-within),.fcee079:hover:not(:focus-within){border-right-color:var(--colorPaletteRedBorder2);}",".fmyw78r:not(:focus-within),.fmyw78r:hover:not(:focus-within){border-left-color:var(--colorPaletteRedBorder2);}",".f1fgmyf4:not(:focus-within),.f1fgmyf4:hover:not(:focus-within){border-bottom-color:var(--colorPaletteRedBorder2);}",".fdrzuqr{cursor:not-allowed;}",".f1jj8ep1{border-top-color:var(--colorNeutralStrokeDisabled);}",".f15xbau{border-right-color:var(--colorNeutralStrokeDisabled);}",".fy0fskl{border-left-color:var(--colorNeutralStrokeDisabled);}",".f4ikngz{border-bottom-color:var(--colorNeutralStrokeDisabled);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}"],w:[".f14a1fxs:focus-within{outline-width:2px;}",".f3e99gv:focus-within{outline-style:solid;}",".fhljsf7:focus-within{outline-color:transparent;}",".fjw5xc1:focus-within::after{transform:scaleX(1);}",".f1xdyd5c:focus-within::after{transition-property:transform;}",".fatpbeo:focus-within::after{transition-duration:var(--durationNormal);}",".fb7uyps:focus-within::after{transition-delay:var(--curveDecelerateMid);}",".f1ibeo51:focus-within:active::after{border-bottom-color:var(--colorCompoundBrandStrokePressed);}",".f1b473iu:focus-within{border-top-color:var(--colorNeutralStroke1Pressed);}",".f381qr8:focus-within{border-right-color:var(--colorNeutralStroke1Pressed);}",".ft4skwv:focus-within{border-left-color:var(--colorNeutralStroke1Pressed);}",".f1qzcrsd:focus-within{border-bottom-color:var(--colorNeutralStrokeAccessiblePressed);}"],m:[["@media screen and (prefers-reduced-motion: reduce){.fv8e3ye::after{transition-duration:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.ftb5wc6::after{transition-delay:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.f1cmft4k:focus-within::after{transition-duration:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.f1x58t8o:focus-within::after{transition-delay:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media (forced-colors: active){.fg455y9{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f14g86mu{border-left-color:GrayText;}.f1rvyvqg{border-right-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1cwzwz{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}]],t:["@supports selector(:has(*)){.f132nw8t:has(.fui-Dropdown__clearButton:focus)::after{border-bottom-color:initial;}}","@supports selector(:has(*)){.f1htdosj:has(.fui-Dropdown__clearButton:focus)::after{transform:scaleX(0);}}"],f:[".ftqa4ok:focus{outline-style:none;}"],h:[".fvcxoqz:hover{border-top-color:var(--colorNeutralStroke1Hover);}",".f1ub3y4t:hover{border-right-color:var(--colorNeutralStroke1Hover);}",".f1m52nbi:hover{border-left-color:var(--colorNeutralStroke1Hover);}",".f1l4zc64:hover{border-bottom-color:var(--colorNeutralStrokeAccessibleHover);}"],a:[".fvs00aa:active{border-top-color:var(--colorNeutralStroke1Pressed);}",".f1assf6x:active{border-right-color:var(--colorNeutralStroke1Pressed);}",".f4ruux4:active{border-left-color:var(--colorNeutralStroke1Pressed);}",".f1z0osm6:active{border-bottom-color:var(--colorNeutralStrokeAccessiblePressed);}"]}),hl=yn({icon:{B7ck84d:"f1ewtqcl",sj55zd:"fxkbij4",mc9l5x:"ftgm304",Be2twd7:"f1pp30po",Br312pm:"f12w6cgp",Bw0ie65:"f8bv1bt",Bo70h7d:"fvc9v3g"},small:{Be2twd7:"f4ybsrx",Frg6f3:["f1h9en5y","f1xk557c"]},medium:{Be2twd7:"fe5j1ua",Frg6f3:["f1h9en5y","f1xk557c"]},large:{Be2twd7:"f1rt2boy",Frg6f3:["f1t5qyk5","f1ikr372"]},disabled:{sj55zd:"f1s2aq7o"}},{d:[".f1ewtqcl{box-sizing:border-box;}",".fxkbij4{color:var(--colorNeutralStrokeAccessible);}",".ftgm304{display:block;}",".f1pp30po{font-size:var(--fontSizeBase500);}",".f12w6cgp{grid-column-start:icon;}",".f8bv1bt{grid-column-end:end;}",".fvc9v3g svg{display:block;}",".f4ybsrx{font-size:16px;}",".f1h9en5y{margin-left:var(--spacingHorizontalXXS);}",".f1xk557c{margin-right:var(--spacingHorizontalXXS);}",".fe5j1ua{font-size:20px;}",".f1rt2boy{font-size:24px;}",".f1t5qyk5{margin-left:var(--spacingHorizontalSNudge);}",".f1ikr372{margin-right:var(--spacingHorizontalSNudge);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}"]}),fl=Xn("rticfuj","r1vp6jef",{r:[".rticfuj{align-self:center;background-color:var(--colorTransparentBackground);border:none;cursor:pointer;height:fit-content;margin:0;margin-right:var(--spacingHorizontalMNudge);padding:0;position:relative;}",".rticfuj:focus{outline-style:none;}",".rticfuj:focus-visible{outline-style:none;}",".rticfuj[data-fui-focus-visible]{border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;border-left-color:transparent;}",'.rticfuj[data-fui-focus-visible]::after{content:"";position:absolute;pointer-events:none;z-index:1;border:2px solid var(--colorStrokeFocus2);border-radius:var(--borderRadiusMedium);top:calc(2px * -1);right:calc(2px * -1);bottom:calc(2px * -1);left:calc(2px * -1);}',".r1vp6jef{align-self:center;background-color:var(--colorTransparentBackground);border:none;cursor:pointer;height:fit-content;margin:0;margin-left:var(--spacingHorizontalMNudge);padding:0;position:relative;}",".r1vp6jef:focus{outline-style:none;}",".r1vp6jef:focus-visible{outline-style:none;}",".r1vp6jef[data-fui-focus-visible]{border-top-color:transparent;border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;}",'.r1vp6jef[data-fui-focus-visible]::after{content:"";position:absolute;pointer-events:none;z-index:1;border:2px solid var(--colorStrokeFocus2);border-radius:var(--borderRadiusMedium);top:calc(2px * -1);left:calc(2px * -1);bottom:calc(2px * -1);right:calc(2px * -1);}'],s:["@media (forced-colors: active){.rticfuj[data-fui-focus-visible]::after{border-top-color:Highlight;border-right-color:Highlight;border-bottom-color:Highlight;border-left-color:Highlight;}}","@media (forced-colors: active){.r1vp6jef[data-fui-focus-visible]::after{border-top-color:Highlight;border-left-color:Highlight;border-bottom-color:Highlight;border-right-color:Highlight;}}"]}),gl=w.forwardRef((e,t)=>{const r=Ja(e,t),i=function(e){const{appearance:t,open:r,getOptionById:i,getOptionsMatchingValue:n,registerOption:o,selectedOptions:s,selectOption:a,setOpen:l,size:c,activeDescendantController:u,onOptionClick:d,onActiveDescendantChange:m}=e,p={activeOption:void 0,focusVisible:!1,getOptionById:i,getOptionsMatchingValue:n,registerOption:o,selectedOptions:s,selectOption:a,setActiveOption:()=>null,onOptionClick:d,onActiveDescendantChange:m};return{combobox:{activeOption:void 0,appearance:t,focusVisible:!1,open:r,registerOption:o,selectedOptions:s,selectOption:a,setActiveOption:()=>null,setOpen:l,size:c},activeDescendant:w.useMemo(()=>({controller:u}),[u]),listbox:p}}(r);return(e=>{const{appearance:t,open:r,placeholderVisible:i,showClearButton:n,size:o}=e,s="true"==`${e.button["aria-invalid"]}`,a=e.button.disabled,l=pl(),c=hl(),u=fl();e.root.className=xn(ml,l.root,l[t],!a&&"outline"===t&&l.outlineInteractive,s&&"underline"!==t&&l.invalid,s&&"underline"===t&&l.invalidUnderline,a&&l.disabled,e.root.className),e.button.className=xn("fui-Dropdown__button",l.button,l[o],i&&l.placeholder,a&&l.disabledText,e.button.className),e.listbox&&(e.listbox.className=xn("fui-Dropdown__listbox",l.listbox,e.inlinePopup&&l.inlineListbox,!r&&l.listboxCollapsed,e.listbox.className)),e.expandIcon&&(e.expandIcon.className=xn("fui-Dropdown__expandIcon",c.icon,c[o],a&&c.disabled,n&&l.hidden,e.expandIcon.className)),e.clearButton&&(e.clearButton.className=xn("fui-Dropdown__clearButton",u,c.icon,c[o],a&&c.disabled,!n&&l.hidden,e.clearButton.className))})(r),En("useDropdownStyles_unstable")(r),((e,t)=>cn(e.root,{children:cn(Ia,{value:t.activeDescendant,children:cn(za.Provider,{value:t.listbox,children:un(dl.Provider,{value:t.combobox,children:[un(e.button,{children:[e.button.children,e.expandIcon&&cn(e.expandIcon,{})]}),e.clearButton&&cn(e.clearButton,{}),e.listbox&&(e.inlinePopup?cn(e.listbox,{}):cn(ul,{mountNode:e.mountNode,children:cn(e.listbox,{})}))]})})})}))(r,i)});gl.displayName="Dropdown";const vl=wo("Checkmark12Filled","12",["M9.76 3.2c.3.29.32.76.04 1.06l-4.25 4.5a.75.75 0 0 1-1.08.02L2.22 6.53a.75.75 0 0 1 1.06-1.06l1.7 1.7L8.7 3.24a.75.75 0 0 1 1.06-.04Z"]),bl=w.forwardRef((e,t)=>{const r=((e,t)=>{const{children:r,disabled:i,text:n,value:o}=e,s=w.useRef(null),a=function(e,t){if(void 0!==e)return e;let r="",i=!1;return w.Children.forEach(t,e=>{"string"==typeof e?r+=e:i=!0}),i&&console.warn("Provide a `text` prop to Option components when they contain non-string children."),r}(n,r),l=null!=o?o:a,c=Va("fluent-option",e.id),u=w.useMemo(()=>({id:c,disabled:i,text:a,value:l}),[c,i,a,l]),{controller:d}=Aa(),m=Fa(e=>e.multiselect),p=Fa(e=>e.registerOption),h=Fa(e=>{const t=e.selectedOptions;return void 0!==l&&void 0!==t.find(e=>e===l)}),f=Fa(e=>e.selectOption),g=Fa(e=>e.onOptionClick);let v=w.createElement(Co,null);m&&(v=h?w.createElement(vl,null):""),w.useEffect(()=>{if(c&&s.current)return p(u,s.current)},[c,u,p]);const b=m?{role:"menuitemcheckbox","aria-checked":h}:{role:"option","aria-selected":h};return{components:{root:"div",checkIcon:"span"},root:Mi(tn("div",{ref:rn(t,s),"aria-disabled":i?"true":void 0,id:c,...b,...e,onClick:t=>{var r;i?t.preventDefault():(d.focus(c),f(t,u),g(t),null===(r=e.onClick)||void 0===r||r.call(e,t))}}),{elementType:"div"}),checkIcon:Li(e.checkIcon,{renderByDefault:!0,defaultProps:{"aria-hidden":"true",children:v},elementType:"span"}),disabled:i,multiselect:m,selected:h,focusVisible:!1,active:!1}})(e,t);return(e=>{const{disabled:t,multiselect:r,selected:i}=e,n=Ma();e.root.className=xn(Ba,n.root,n.active,t&&n.disabled,i&&n.selected,e.root.className),e.checkIcon&&(e.checkIcon.className=xn("fui-Option__checkIcon",n.checkIcon,r&&n.multiselectCheck,i&&n.selectedCheck,i&&r&&n.selectedMultiselectCheck,t&&n.checkDisabled,t&&r&&n.multiselectCheckDisabled,e.checkIcon.className))})(r),En("useOptionStyles_unstable")(r),(e=>un(e.root,{children:[e.checkIcon&&cn(e.checkIcon,{}),e.root.children]}))(r)});function yl(e,t){const{disabled:r,disabledFocusable:i=!1,"aria-disabled":n,onClick:o,onKeyDown:s,onKeyUp:a,...l}=null!=t?t:{},c="string"==typeof n?"true"===n:n,u=r||i||c,d=Ri(e=>{u?(e.preventDefault(),e.stopPropagation()):null==o||o(e)}),m=Ri(e=>{if(null==s||s(e),e.isDefaultPrevented())return;const t=e.key;if(u&&(t===Oa||t===Na))return e.preventDefault(),void e.stopPropagation();t!==Na?t===Oa&&(e.preventDefault(),e.currentTarget.click()):e.preventDefault()}),p=Ri(e=>{if(null==a||a(e),e.isDefaultPrevented())return;const t=e.key;if(u&&(t===Oa||t===Na))return e.preventDefault(),void e.stopPropagation();t===Na&&(e.preventDefault(),e.currentTarget.click())});if("button"===e||void 0===e)return{...l,disabled:r&&!i,"aria-disabled":!!i||c,onClick:i?void 0:d,onKeyUp:i?void 0:a,onKeyDown:i?void 0:s};{const t=!!l.href;let n=t?void 0:"button";!n&&u&&(n="link");const o={role:n,tabIndex:i||!t&&!r?0:void 0,...l,onClick:d,onKeyUp:p,onKeyDown:m,"aria-disabled":u};return"a"===e&&u&&(o.href=void 0),o}}bl.displayName="Option";const _l=w.createContext(void 0),xl={},wl=(_l.Provider,(e,t)=>{const{size:r}=null!==(i=w.useContext(_l))&&void 0!==i?i:xl;var i;const{appearance:n="secondary",as:o="button",disabled:s=!1,disabledFocusable:a=!1,icon:l,iconPosition:c="before",shape:u="rounded",size:d=(null!=r?r:"medium")}=e,m=Li(l,{elementType:"span"});return{appearance:n,disabled:s,disabledFocusable:a,iconPosition:c,shape:u,size:d,iconOnly:Boolean((null==m?void 0:m.children)&&!e.children),components:{root:"button",icon:"span"},root:Mi(tn(o,yl(e.as,e)),{elementType:"button",defaultProps:{ref:t,type:"button"===o?"button":void 0}}),icon:m}}),Cl=Xn("r1alrhcs",null,{r:[".r1alrhcs{align-items:center;box-sizing:border-box;display:inline-flex;justify-content:center;text-decoration-line:none;vertical-align:middle;margin:0;overflow:hidden;background-color:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1);border:var(--strokeWidthThin) solid var(--colorNeutralStroke1);font-family:var(--fontFamilyBase);outline-style:none;padding:5px var(--spacingHorizontalM);min-width:96px;border-radius:var(--borderRadiusMedium);font-size:var(--fontSizeBase300);font-weight:var(--fontWeightSemibold);line-height:var(--lineHeightBase300);transition-duration:var(--durationFaster);transition-property:background,border,color;transition-timing-function:var(--curveEasyEase);}",".r1alrhcs:hover{background-color:var(--colorNeutralBackground1Hover);border-color:var(--colorNeutralStroke1Hover);color:var(--colorNeutralForeground1Hover);cursor:pointer;}",".r1alrhcs:hover:active{background-color:var(--colorNeutralBackground1Pressed);border-color:var(--colorNeutralStroke1Pressed);color:var(--colorNeutralForeground1Pressed);outline-style:none;}",".r1alrhcs[data-fui-focus-visible]{border-color:var(--colorStrokeFocus2);border-radius:var(--borderRadiusMedium);border-width:1px;outline:var(--strokeWidthThick) solid var(--colorTransparentStroke);box-shadow:0 0 0 var(--strokeWidthThin) var(--colorStrokeFocus2) inset;z-index:1;}"],s:["@media screen and (prefers-reduced-motion: reduce){.r1alrhcs{transition-duration:0.01ms;}}","@media (forced-colors: active){.r1alrhcs:focus{border-color:ButtonText;}.r1alrhcs:hover{background-color:HighlightText;border-color:Highlight;color:Highlight;forced-color-adjust:none;}.r1alrhcs:hover:active{background-color:HighlightText;border-color:Highlight;color:Highlight;forced-color-adjust:none;}}","@supports (-moz-appearance:button){.r1alrhcs[data-fui-focus-visible]{box-shadow:0 0 0 calc(var(--strokeWidthThin) + 0.25px) var(--colorStrokeFocus2) inset;}}"]}),kl=Xn("rywnvv2",null,[".rywnvv2{align-items:center;display:inline-flex;justify-content:center;font-size:20px;height:20px;width:20px;--fui-Button__icon--spacing:var(--spacingHorizontalSNudge);}"]),Tl=yn({outline:{De3pzq:"f1c21dwh",Jwef8y:"fjxutwb",iro3zm:"fwiml72"},primary:{De3pzq:"ffp7eso",g2u3we:"f1p3nwhy",h3c5rm:["f11589ue","f1pdflbu"],B9xav0g:"f1q5o8ev",zhjwy3:["f1pdflbu","f11589ue"],sj55zd:"f1phragk",Jwef8y:"f15wkkf3",Bgoe8wy:"f1s2uweq",Bwzppfd:["fr80ssc","fecsdlb"],oetu4i:"f1ukrpxl",gg5e9n:["fecsdlb","fr80ssc"],Bi91k9c:"f1rq72xc",iro3zm:"fnp9lpt",b661bw:"f1h0usnq",Bk6r4ia:["fs4ktlq","fx2bmrt"],B9zn80p:"f16h9ulv",Bpld233:["fx2bmrt","fs4ktlq"],B2d53fq:"f1d6v5y2",Bsw6fvg:"f1rirnrt",Bjwas2f:"f1uu00uk",Bn1d65q:["fkvaka8","f9a0qzu"],Bxeuatn:"f1ux7til",n51gp8:["f9a0qzu","fkvaka8"],Bbusuzp:"f1lkg8j3",ycbfsm:"fkc42ay",Bqrx1nm:"fq7113v",pgvf35:"ff1wgvm",Bh7lczh:["fiob0tu","f1x4h75k"],dpv3f4:"f1j6scgf",Bpnjhaq:["f1x4h75k","fiob0tu"],ze5xyy:"f4xjyn1",g2kj27:"fbgcvur",Bf756sw:"f1ks1yx8",Bow2dr7:["f1o6qegi","fmxjhhp"],Bvhedfk:"fcnxywj",Gye4lf:["fmxjhhp","f1o6qegi"],pc6evw:"f9ddjv3"},secondary:{},subtle:{De3pzq:"fhovq9v",g2u3we:"f1p3nwhy",h3c5rm:["f11589ue","f1pdflbu"],B9xav0g:"f1q5o8ev",zhjwy3:["f1pdflbu","f11589ue"],sj55zd:"fkfq4zb",Jwef8y:"f1t94bn6",Bgoe8wy:"f1s2uweq",Bwzppfd:["fr80ssc","fecsdlb"],oetu4i:"f1ukrpxl",gg5e9n:["fecsdlb","fr80ssc"],Bi91k9c:"fnwyq0v",Bk3fhr4:"ft1hn21",Bmfj8id:"fuxngvv",Bbdnnc7:"fy5bs14",iro3zm:"fsv2rcd",b661bw:"f1h0usnq",Bk6r4ia:["fs4ktlq","fx2bmrt"],B9zn80p:"f16h9ulv",Bpld233:["fx2bmrt","fs4ktlq"],B2d53fq:"f1omzyqd",em6i61:"f1dfjoow",vm6p8p:"f1j98vj9",x3br3k:"fj8yq94",ze5xyy:"f4xjyn1",Bx3q9su:"f1et0tmh",pc6evw:"f9ddjv3",xd2cci:"f1wi8ngl"},transparent:{De3pzq:"f1c21dwh",g2u3we:"f1p3nwhy",h3c5rm:["f11589ue","f1pdflbu"],B9xav0g:"f1q5o8ev",zhjwy3:["f1pdflbu","f11589ue"],sj55zd:"fkfq4zb",Jwef8y:"fjxutwb",Bgoe8wy:"f1s2uweq",Bwzppfd:["fr80ssc","fecsdlb"],oetu4i:"f1ukrpxl",gg5e9n:["fecsdlb","fr80ssc"],Bi91k9c:"f139oj5f",Bk3fhr4:"ft1hn21",Bmfj8id:"fuxngvv",iro3zm:"fwiml72",b661bw:"f1h0usnq",Bk6r4ia:["fs4ktlq","fx2bmrt"],B9zn80p:"f16h9ulv",Bpld233:["fx2bmrt","fs4ktlq"],B2d53fq:"f1fg1p5m",em6i61:"f1dfjoow",vm6p8p:"f1j98vj9",Bqrx1nm:"f1tme0vf",ze5xyy:"f4xjyn1",g2kj27:"f18onu3q",pc6evw:"f9ddjv3"},circular:{Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"f44lkw9"},rounded:{},square:{Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"f1fabniw"},small:{Bf4jedk:"fh7ncta",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"fneth5b",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",Be2twd7:"fy9rknc",Bhrd7zp:"figsok6",Bg96gwp:"fwrc4pm"},smallWithIcon:{Byoj8tv:"f1brlhvm",z8tnut:"f1sl3k7w"},medium:{},large:{Bf4jedk:"f14es27b",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f4db1ww",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",Be2twd7:"fod5ikn",Bhrd7zp:"fl43uef",Bg96gwp:"faaz57k"},largeWithIcon:{Byoj8tv:"fy7v416",z8tnut:"f1a1bwwz"}},{d:[".f1c21dwh{background-color:var(--colorTransparentBackground);}",".ffp7eso{background-color:var(--colorBrandBackground);}",".f1p3nwhy{border-top-color:transparent;}",".f11589ue{border-right-color:transparent;}",".f1pdflbu{border-left-color:transparent;}",".f1q5o8ev{border-bottom-color:transparent;}",".f1phragk{color:var(--colorNeutralForegroundOnBrand);}",".fhovq9v{background-color:var(--colorSubtleBackground);}",".fkfq4zb{color:var(--colorNeutralForeground2);}",[".f44lkw9{border-radius:var(--borderRadiusCircular);}",{p:-1}],[".f1fabniw{border-radius:var(--borderRadiusNone);}",{p:-1}],".fh7ncta{min-width:64px;}",[".fneth5b{padding:3px var(--spacingHorizontalS);}",{p:-1}],[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".fy9rknc{font-size:var(--fontSizeBase200);}",".figsok6{font-weight:var(--fontWeightRegular);}",".fwrc4pm{line-height:var(--lineHeightBase200);}",".f1brlhvm{padding-bottom:1px;}",".f1sl3k7w{padding-top:1px;}",".f14es27b{min-width:96px;}",[".f4db1ww{padding:8px var(--spacingHorizontalL);}",{p:-1}],[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".fod5ikn{font-size:var(--fontSizeBase400);}",".fl43uef{font-weight:var(--fontWeightSemibold);}",".faaz57k{line-height:var(--lineHeightBase400);}",".fy7v416{padding-bottom:7px;}",".f1a1bwwz{padding-top:7px;}"],h:[".fjxutwb:hover{background-color:var(--colorTransparentBackgroundHover);}",".fwiml72:hover:active{background-color:var(--colorTransparentBackgroundPressed);}",".f15wkkf3:hover{background-color:var(--colorBrandBackgroundHover);}",".f1s2uweq:hover{border-top-color:transparent;}",".fr80ssc:hover{border-right-color:transparent;}",".fecsdlb:hover{border-left-color:transparent;}",".f1ukrpxl:hover{border-bottom-color:transparent;}",".f1rq72xc:hover{color:var(--colorNeutralForegroundOnBrand);}",".fnp9lpt:hover:active{background-color:var(--colorBrandBackgroundPressed);}",".f1h0usnq:hover:active{border-top-color:transparent;}",".fs4ktlq:hover:active{border-right-color:transparent;}",".fx2bmrt:hover:active{border-left-color:transparent;}",".f16h9ulv:hover:active{border-bottom-color:transparent;}",".f1d6v5y2:hover:active{color:var(--colorNeutralForegroundOnBrand);}",".f1t94bn6:hover{background-color:var(--colorSubtleBackgroundHover);}",".fnwyq0v:hover{color:var(--colorNeutralForeground2Hover);}",".ft1hn21:hover .fui-Icon-filled{display:inline;}",".fuxngvv:hover .fui-Icon-regular{display:none;}",".fy5bs14:hover .fui-Button__icon{color:var(--colorNeutralForeground2BrandHover);}",".fsv2rcd:hover:active{background-color:var(--colorSubtleBackgroundPressed);}",".f1omzyqd:hover:active{color:var(--colorNeutralForeground2Pressed);}",".f1dfjoow:hover:active .fui-Icon-filled{display:inline;}",".f1j98vj9:hover:active .fui-Icon-regular{display:none;}",".fj8yq94:hover:active .fui-Button__icon{color:var(--colorNeutralForeground2BrandPressed);}",".f139oj5f:hover{color:var(--colorNeutralForeground2BrandHover);}",".f1fg1p5m:hover:active{color:var(--colorNeutralForeground2BrandPressed);}"],m:[["@media (forced-colors: active){.f1rirnrt{background-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1uu00uk{border-top-color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f9a0qzu{border-left-color:HighlightText;}.fkvaka8{border-right-color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1ux7til{border-bottom-color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1lkg8j3{color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fkc42ay{forced-color-adjust:none;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fq7113v:hover{background-color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.ff1wgvm:hover{border-top-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1x4h75k:hover{border-left-color:Highlight;}.fiob0tu:hover{border-right-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1j6scgf:hover{border-bottom-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f4xjyn1:hover{color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fbgcvur:hover:active{background-color:HighlightText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1ks1yx8:hover:active{border-top-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1o6qegi:hover:active{border-right-color:Highlight;}.fmxjhhp:hover:active{border-left-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fcnxywj:hover:active{border-bottom-color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f9ddjv3:hover:active{color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1et0tmh:hover .fui-Button__icon{color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1wi8ngl:hover:active .fui-Button__icon{color:Highlight;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1tme0vf:hover{background-color:var(--colorTransparentBackground);}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f18onu3q:hover:active{background-color:var(--colorTransparentBackground);}}",{m:"(forced-colors: active)"}]]}),El=yn({base:{De3pzq:"f1bg9a2p",g2u3we:"f1jj8ep1",h3c5rm:["f15xbau","fy0fskl"],B9xav0g:"f4ikngz",zhjwy3:["fy0fskl","f15xbau"],sj55zd:"f1s2aq7o",Bceei9c:"fdrzuqr",Bfinmwp:"f15x8b5r",Jwef8y:"f1falr9n",Bgoe8wy:"f12mpcsy",Bwzppfd:["f1gwvigk","f18rmfxp"],oetu4i:"f1jnshp0",gg5e9n:["f18rmfxp","f1gwvigk"],Bi91k9c:"fvgxktp",eoavqd:"fphbwmw",Bk3fhr4:"f19vpps7",Bmfj8id:"fv5swzo",Bbdnnc7:"f1al02dq",iro3zm:"f1t6o4dc",b661bw:"f10ztigi",Bk6r4ia:["f1ft5sdu","f1gzf82w"],B9zn80p:"f12zbtn2",Bpld233:["f1gzf82w","f1ft5sdu"],B2d53fq:"fcvwxyo",c3iz72:"f8w4c43",em6i61:"f1ol4fw6",vm6p8p:"f1q1lw4e",x3br3k:"f1dwjv2g"},highContrast:{Bsw6fvg:"f4lkoma",Bjwas2f:"fg455y9",Bn1d65q:["f1rvyvqg","f14g86mu"],Bxeuatn:"f1cwzwz",n51gp8:["f14g86mu","f1rvyvqg"],Bbusuzp:"f1dcs8yz",Bm2fdqk:"fuigjrg",G867l3:"fjwq6ea",gdbnj:["f1lr3nhc","f1mbxvi6"],mxns5l:"fn5gmvv",o3nasb:["f1mbxvi6","f1lr3nhc"],Bqrx1nm:"f1vmkb5g",pgvf35:"f53ppgq",Bh7lczh:["f1663y11","f80fkiy"],dpv3f4:"f18v5270",Bpnjhaq:["f80fkiy","f1663y11"],ze5xyy:"f1kc2mi9",Bx3q9su:"f4dhi0o",g2kj27:"f1y0svfh",Bf756sw:"fihuait",Bow2dr7:["fnxhupq","fyd6l6x"],Bvhedfk:"fx507ft",Gye4lf:["fyd6l6x","fnxhupq"],pc6evw:"fb3rf2x",xd2cci:"fequ9m0"},outline:{De3pzq:"f1c21dwh",Jwef8y:"f9ql6rf",iro3zm:"f3h1zc4"},primary:{g2u3we:"f1p3nwhy",h3c5rm:["f11589ue","f1pdflbu"],B9xav0g:"f1q5o8ev",zhjwy3:["f1pdflbu","f11589ue"],Bgoe8wy:"f1s2uweq",Bwzppfd:["fr80ssc","fecsdlb"],oetu4i:"f1ukrpxl",gg5e9n:["fecsdlb","fr80ssc"],b661bw:"f1h0usnq",Bk6r4ia:["fs4ktlq","fx2bmrt"],B9zn80p:"f16h9ulv",Bpld233:["fx2bmrt","fs4ktlq"]},secondary:{},subtle:{De3pzq:"f1c21dwh",g2u3we:"f1p3nwhy",h3c5rm:["f11589ue","f1pdflbu"],B9xav0g:"f1q5o8ev",zhjwy3:["f1pdflbu","f11589ue"],Jwef8y:"f9ql6rf",Bgoe8wy:"f1s2uweq",Bwzppfd:["fr80ssc","fecsdlb"],oetu4i:"f1ukrpxl",gg5e9n:["fecsdlb","fr80ssc"],iro3zm:"f3h1zc4",b661bw:"f1h0usnq",Bk6r4ia:["fs4ktlq","fx2bmrt"],B9zn80p:"f16h9ulv",Bpld233:["fx2bmrt","fs4ktlq"]},transparent:{De3pzq:"f1c21dwh",g2u3we:"f1p3nwhy",h3c5rm:["f11589ue","f1pdflbu"],B9xav0g:"f1q5o8ev",zhjwy3:["f1pdflbu","f11589ue"],Jwef8y:"f9ql6rf",Bgoe8wy:"f1s2uweq",Bwzppfd:["fr80ssc","fecsdlb"],oetu4i:"f1ukrpxl",gg5e9n:["fecsdlb","fr80ssc"],iro3zm:"f3h1zc4",b661bw:"f1h0usnq",Bk6r4ia:["fs4ktlq","fx2bmrt"],B9zn80p:"f16h9ulv",Bpld233:["fx2bmrt","fs4ktlq"]}},{d:[".f1bg9a2p{background-color:var(--colorNeutralBackgroundDisabled);}",".f1jj8ep1{border-top-color:var(--colorNeutralStrokeDisabled);}",".f15xbau{border-right-color:var(--colorNeutralStrokeDisabled);}",".fy0fskl{border-left-color:var(--colorNeutralStrokeDisabled);}",".f4ikngz{border-bottom-color:var(--colorNeutralStrokeDisabled);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".fdrzuqr{cursor:not-allowed;}",".f15x8b5r .fui-Button__icon{color:var(--colorNeutralForegroundDisabled);}",".f1c21dwh{background-color:var(--colorTransparentBackground);}",".f1p3nwhy{border-top-color:transparent;}",".f11589ue{border-right-color:transparent;}",".f1pdflbu{border-left-color:transparent;}",".f1q5o8ev{border-bottom-color:transparent;}"],h:[".f1falr9n:hover{background-color:var(--colorNeutralBackgroundDisabled);}",".f12mpcsy:hover{border-top-color:var(--colorNeutralStrokeDisabled);}",".f1gwvigk:hover{border-right-color:var(--colorNeutralStrokeDisabled);}",".f18rmfxp:hover{border-left-color:var(--colorNeutralStrokeDisabled);}",".f1jnshp0:hover{border-bottom-color:var(--colorNeutralStrokeDisabled);}",".fvgxktp:hover{color:var(--colorNeutralForegroundDisabled);}",".fphbwmw:hover{cursor:not-allowed;}",".f19vpps7:hover .fui-Icon-filled{display:none;}",".fv5swzo:hover .fui-Icon-regular{display:inline;}",".f1al02dq:hover .fui-Button__icon{color:var(--colorNeutralForegroundDisabled);}",".f1t6o4dc:hover:active{background-color:var(--colorNeutralBackgroundDisabled);}",".f10ztigi:hover:active{border-top-color:var(--colorNeutralStrokeDisabled);}",".f1ft5sdu:hover:active{border-right-color:var(--colorNeutralStrokeDisabled);}",".f1gzf82w:hover:active{border-left-color:var(--colorNeutralStrokeDisabled);}",".f12zbtn2:hover:active{border-bottom-color:var(--colorNeutralStrokeDisabled);}",".fcvwxyo:hover:active{color:var(--colorNeutralForegroundDisabled);}",".f8w4c43:hover:active{cursor:not-allowed;}",".f1ol4fw6:hover:active .fui-Icon-filled{display:none;}",".f1q1lw4e:hover:active .fui-Icon-regular{display:inline;}",".f1dwjv2g:hover:active .fui-Button__icon{color:var(--colorNeutralForegroundDisabled);}",".f9ql6rf:hover{background-color:var(--colorTransparentBackground);}",".f3h1zc4:hover:active{background-color:var(--colorTransparentBackground);}",".f1s2uweq:hover{border-top-color:transparent;}",".fr80ssc:hover{border-right-color:transparent;}",".fecsdlb:hover{border-left-color:transparent;}",".f1ukrpxl:hover{border-bottom-color:transparent;}",".f1h0usnq:hover:active{border-top-color:transparent;}",".fs4ktlq:hover:active{border-right-color:transparent;}",".fx2bmrt:hover:active{border-left-color:transparent;}",".f16h9ulv:hover:active{border-bottom-color:transparent;}"],m:[["@media (forced-colors: active){.f4lkoma{background-color:ButtonFace;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fg455y9{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f14g86mu{border-left-color:GrayText;}.f1rvyvqg{border-right-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1cwzwz{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1dcs8yz{color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fuigjrg .fui-Button__icon{color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fjwq6ea:focus{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1lr3nhc:focus{border-right-color:GrayText;}.f1mbxvi6:focus{border-left-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fn5gmvv:focus{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1vmkb5g:hover{background-color:ButtonFace;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f53ppgq:hover{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1663y11:hover{border-right-color:GrayText;}.f80fkiy:hover{border-left-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f18v5270:hover{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1kc2mi9:hover{color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f4dhi0o:hover .fui-Button__icon{color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1y0svfh:hover:active{background-color:ButtonFace;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fihuait:hover:active{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fnxhupq:hover:active{border-right-color:GrayText;}.fyd6l6x:hover:active{border-left-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fx507ft:hover:active{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fb3rf2x:hover:active{color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.fequ9m0:hover:active .fui-Button__icon{color:GrayText;}}",{m:"(forced-colors: active)"}]]}),Sl=yn({circular:{Bw81rd7:0,kdpuga:0,dm238s:0,B6xbmo0:0,B3whbx2:"f1062rbf"},rounded:{},square:{Bw81rd7:0,kdpuga:0,dm238s:0,B6xbmo0:0,B3whbx2:"fj0ryk1"},primary:{B8q5s1w:"f17t0x8g",Bci5o5g:["f194v5ow","fk7jm04"],n8qw10:"f1qgg65p",Bdrgwmp:["fk7jm04","f194v5ow"],j6ew2k:["fhgccpy","fjo7pq6"],he4mth:"f32wu9k",Byr4aka:"fu5nqqq",lks7q5:["f13prjl2","f1nl83rv"],Bnan3qt:"f1czftr5",k1dn9:["f1nl83rv","f13prjl2"],Boium3a:["f12k37oa","fdnykm2"],tm8e47:"fr96u23"},small:{Bw81rd7:0,kdpuga:0,dm238s:0,B6xbmo0:0,B3whbx2:"fazmxh"},medium:{},large:{Bw81rd7:0,kdpuga:0,dm238s:0,B6xbmo0:0,B3whbx2:"f1b6alqh"}},{d:[[".f1062rbf[data-fui-focus-visible]{border-radius:var(--borderRadiusCircular);}",{p:-1}],[".fj0ryk1[data-fui-focus-visible]{border-radius:var(--borderRadiusNone);}",{p:-1}],".f17t0x8g[data-fui-focus-visible]{border-top-color:var(--colorStrokeFocus2);}",".f194v5ow[data-fui-focus-visible]{border-right-color:var(--colorStrokeFocus2);}",".fk7jm04[data-fui-focus-visible]{border-left-color:var(--colorStrokeFocus2);}",".f1qgg65p[data-fui-focus-visible]{border-bottom-color:var(--colorStrokeFocus2);}",".fhgccpy[data-fui-focus-visible]{box-shadow:var(--shadow2),0 0 0 var(--strokeWidthThin) var(--colorStrokeFocus2) inset,0 0 0 var(--strokeWidthThick) var(--colorNeutralForegroundOnBrand) inset;}",".fjo7pq6[data-fui-focus-visible]{box-shadow:var(--shadow2),0 0 0 var(--strokeWidthThin) var(--colorStrokeFocus2) inset,0 0 0 var(--strokeWidthThick) var(--colorNeutralForegroundOnBrand) inset;}",".f32wu9k[data-fui-focus-visible]:hover{box-shadow:var(--shadow2),0 0 0 var(--strokeWidthThin) var(--colorStrokeFocus2) inset;}",".fu5nqqq[data-fui-focus-visible]:hover{border-top-color:var(--colorStrokeFocus2);}",".f13prjl2[data-fui-focus-visible]:hover{border-right-color:var(--colorStrokeFocus2);}",".f1nl83rv[data-fui-focus-visible]:hover{border-left-color:var(--colorStrokeFocus2);}",".f1czftr5[data-fui-focus-visible]:hover{border-bottom-color:var(--colorStrokeFocus2);}",[".fazmxh[data-fui-focus-visible]{border-radius:var(--borderRadiusSmall);}",{p:-1}],[".f1b6alqh[data-fui-focus-visible]{border-radius:var(--borderRadiusLarge);}",{p:-1}]],t:["@supports (-moz-appearance:button){.f12k37oa[data-fui-focus-visible]{box-shadow:var(--shadow2),0 0 0 calc(var(--strokeWidthThin) + 0.25px) var(--colorStrokeFocus2) inset,0 0 0 var(--strokeWidthThick) var(--colorNeutralForegroundOnBrand) inset;}.fdnykm2[data-fui-focus-visible]{box-shadow:var(--shadow2),0 0 0 calc(var(--strokeWidthThin) + 0.25px) var(--colorStrokeFocus2) inset,0 0 0 var(--strokeWidthThick) var(--colorNeutralForegroundOnBrand) inset;}}","@supports (-moz-appearance:button){.fr96u23[data-fui-focus-visible]:hover{box-shadow:var(--shadow2),0 0 0 calc(var(--strokeWidthThin) + 0.25px) var(--colorStrokeFocus2) inset;}}"]}),Il=yn({small:{Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"fu97m5z",Bf4jedk:"f17fgpbq",B2u0y6b:"f1jt17bm"},medium:{Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f18ktai2",Bf4jedk:"fwbmr0d",B2u0y6b:"f44c6la"},large:{Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1hbd1aw",Bf4jedk:"f12clzc2",B2u0y6b:"fjy1crr"}},{d:[[".fu97m5z{padding:1px;}",{p:-1}],".f17fgpbq{min-width:24px;}",".f1jt17bm{max-width:24px;}",[".f18ktai2{padding:5px;}",{p:-1}],".fwbmr0d{min-width:32px;}",".f44c6la{max-width:32px;}",[".f1hbd1aw{padding:7px;}",{p:-1}],".f12clzc2{min-width:40px;}",".fjy1crr{max-width:40px;}"]}),Al=yn({small:{Be2twd7:"fe5j1ua",Bqenvij:"fjamq6b",a9b677:"f64fuq3",Bqrlyyl:"fbaiahx"},medium:{},large:{Be2twd7:"f1rt2boy",Bqenvij:"frvgh55",a9b677:"fq4mcun",Bqrlyyl:"f1exjqw5"},before:{t21cq0:["f1nizpg2","f1a695kz"]},after:{Frg6f3:["f1a695kz","f1nizpg2"]}},{d:[".fe5j1ua{font-size:20px;}",".fjamq6b{height:20px;}",".f64fuq3{width:20px;}",".fbaiahx{--fui-Button__icon--spacing:var(--spacingHorizontalXS);}",".f1rt2boy{font-size:24px;}",".frvgh55{height:24px;}",".fq4mcun{width:24px;}",".f1exjqw5{--fui-Button__icon--spacing:var(--spacingHorizontalSNudge);}",".f1nizpg2{margin-right:var(--fui-Button__icon--spacing);}",".f1a695kz{margin-left:var(--fui-Button__icon--spacing);}"]}),Ol=w.forwardRef((e,t)=>{const r=wl(e,t);return(e=>{const t=Cl(),r=kl(),i=Tl(),n=El(),o=Sl(),s=Il(),a=Al(),{appearance:l,disabled:c,disabledFocusable:u,icon:d,iconOnly:m,iconPosition:p,shape:h,size:f}=e;e.root.className=xn("fui-Button",t,l&&i[l],i[f],d&&"small"===f&&i.smallWithIcon,d&&"large"===f&&i.largeWithIcon,i[h],(c||u)&&n.base,(c||u)&&n.highContrast,l&&(c||u)&&n[l],"primary"===l&&o.primary,o[f],o[h],m&&s[f],e.root.className),e.icon&&(e.icon.className=xn("fui-Button__icon",r,!!e.root.children&&a[p],a[f],e.icon.className))})(r),En("useButtonStyles_unstable")(r),(e=>{const{iconOnly:t,iconPosition:r}=e;return un(e.root,{children:["after"!==r&&e.icon&&cn(e.icon,{}),!t&&e.root.children,"after"===r&&e.icon&&cn(e.icon,{})]})})(r)});Ol.displayName="Button";const Nl=wo("Search24Regular","24",["M15.1 16.16a8 8 0 1 1 1.06-1.06l4.62 4.62a.75.75 0 1 1-1.06 1.06l-4.62-4.62ZM16.5 10a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"]),Rl=wo("ArrowSync24Regular","24",["M16.25 5.18c-.25.33-.19.8.14 1.05a7.24 7.24 0 0 1-3.6 12.98l.68-.68a.75.75 0 0 0-.98-1.13l-.08.07-2 2a.75.75 0 0 0-.07.98l.07.08 2 2a.75.75 0 0 0 1.13-.98l-.07-.08-.75-.75A8.75 8.75 0 0 0 17.3 5.04a.75.75 0 0 0-1.05.14Zm-5.72-3.71c-.3.3-.3.77 0 1.06l.75.75a8.75 8.75 0 0 0-4.85 15.47.75.75 0 1 0 .96-1.16A7.23 7.23 0 0 1 11.2 4.8l-.68.68a.75.75 0 1 0 1.06 1.06l2-2c.3-.3.3-.77 0-1.06l-2-2a.75.75 0 0 0-1.06 0Z"],{flipInRtl:!0});var Pl=r(64583).Promise,Dl=function(e,t,r,i){return new(r||(r=Pl))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};class Bl{static loadLibrary(){return Dl(this,void 0,void 0,function*(){const e=yield OfficeRuntime.storage.getItem("library");return e?JSON.parse(e):[]})}static saveLibrary(e){return Dl(this,void 0,void 0,function*(){yield OfficeRuntime.storage.setItem("library",JSON.stringify(e))})}static loadSettings(){return Dl(this,void 0,void 0,function*(){const e=yield OfficeRuntime.storage.getItem("settings");return e?JSON.parse(e):null})}static saveSettings(e){return Dl(this,void 0,void 0,function*(){yield OfficeRuntime.storage.setItem("settings",JSON.stringify(e))})}static loadRecentKeys(){return Dl(this,void 0,void 0,function*(){const e=yield OfficeRuntime.storage.getItem("recentKeys");return e?JSON.parse(e):[]})}static saveRecentKeys(e){return Dl(this,void 0,void 0,function*(){yield OfficeRuntime.storage.setItem("recentKeys",JSON.stringify(e))})}}const Ml="JIS-Cite",Ll="JIS-Bibliography";var zl=r(64583).Promise,Fl=function(e,t,r,i){return new(r||(r=zl))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};class jl{static getDocument(){return Fl(this,void 0,void 0,function*(){return Word.run(e=>Fl(this,void 0,void 0,function*(){const t=e.document;return yield e.sync(),t}))})}static findOrCreateBibliographyCC(){return Fl(this,void 0,void 0,function*(){const e=yield this.getDocument();return Word.run(t=>Fl(this,void 0,void 0,function*(){const r=e.contentControls;r.load("items"),yield t.sync();let i=r.items.find(e=>e.title===Ll);return i||(i=e.body.insertContentControl(),i.title=Ll,i.tag="msocj:bib",i.appearance=Word.ContentControlAppearance.boundingBox,i.color="#CCCCCC"),yield t.sync(),i}))})}static createCiteCCAtSelection(e,t){return Fl(this,void 0,void 0,function*(){return Word.run(r=>Fl(this,void 0,void 0,function*(){const i=r.document.getSelection();let n=null;try{n=i.insertContentControl()}catch(e){let t;console.error("insertContentControl at selection failed, falling back",e);try{t=i.insertParagraph("",Word.InsertLocation.after)}catch(e){console.error("insertParagraph after selection failed, inserting at document end",e),t=r.document.body.insertParagraph("",Word.InsertLocation.end)}n=t.getRange("Whole").insertContentControl()}try{if(!n){n=r.document.body.insertParagraph("",Word.InsertLocation.end).getRange("Whole").insertContentControl()}return n.title=Ml,n.tag=JSON.stringify(e),n.insertText(t,Word.InsertLocation.replace),n.appearance=Word.ContentControlAppearance.boundingBox,yield r.sync(),n}catch(i){return console.error("Final insertion failed, try body.end direct insertion",i),n=r.document.body.insertParagraph(t,Word.InsertLocation.end).getRange("Whole").insertContentControl(),n.title=Ml,n.tag=JSON.stringify(e),yield r.sync(),n}}))})}static enumerateCiteCCs(){return Fl(this,void 0,void 0,function*(){const e=yield this.getDocument();return Word.run(t=>Fl(this,void 0,void 0,function*(){const r=e.contentControls;return r.load("items"),yield t.sync(),r.items.filter(e=>e.title===Ml)}))})}}var Hl=r(37828),ql=r.n(Hl);function Ul(e,t,r){function i(r,i){var n;Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(n=r._zod).traits??(n.traits=new Set),r._zod.traits.add(e),t(r,i);for(const e in s.prototype)e in r||Object.defineProperty(r,e,{value:s.prototype[e].bind(r)});r._zod.constr=s,r._zod.def=i}const n=r?.Parent??Object;class o extends n{}function s(e){var t;const n=r?.Parent?new o:this;i(n,e),(t=n._zod).deferred??(t.deferred=[]);for(const e of n._zod.deferred)e();return n}return Object.defineProperty(o,"name",{value:e}),Object.defineProperty(s,"init",{value:i}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(r?.Parent&&t instanceof r.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}Object.freeze({status:"aborted"}),Symbol("zod_brand");class Gl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Wl extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Vl={};function Kl(e){return e&&Object.assign(Vl,e),Vl}const $l=/^[cC][^\s-]{8,}$/,Yl=/^[0-9a-z]+$/,Jl=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Xl=/^[0-9a-vA-V]{20}$/,Zl=/^[A-Za-z0-9]{27}$/,Ql=/^[a-zA-Z0-9_-]{21}$/,ec=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,tc=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rc=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ic=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,nc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,sc=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ac=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lc=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cc=/^[A-Za-z0-9_-]*$/,uc=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,dc=/^\+(?:[0-9]){6,14}[0-9]$/,mc="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",pc=new RegExp(`^${mc}$`);function hc(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const fc=/^\d+$/,gc=/^-?\d+(?:\.\d+)?/i,vc=/^[^A-Z]*$/,bc=/^[^a-z]*$/;function yc(e,t){return"bigint"==typeof t?t.toString():t}function _c(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function xc(e){return null==e}function wc(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}r(64583).Promise;const Cc=Symbol("evaluating");function kc(e,t,r){let i;Object.defineProperty(e,t,{get(){if(i!==Cc)return void 0===i&&(i=Cc,i=r()),i},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function Tc(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ec(...e){const t={};for(const r of e){const e=Object.getOwnPropertyDescriptors(r);Object.assign(t,e)}return Object.defineProperties({},t)}function Sc(e){return JSON.stringify(e)}const Ic="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ac(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const Oc=_c(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function Nc(e){if(!1===Ac(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!1!==Ac(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function Rc(e){return Nc(e)?{...e}:e}const Pc=new Set(["string","number","symbol"]);function Dc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bc(e,t,r){const i=new e._zod.constr(t??e._zod.def);return t&&!r?.parent||(i._zod.parent=e),i}function Mc(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}new Set(["string","number","bigint","boolean","symbol","undefined"]);const Lc={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function zc(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(!0!==e.issues[r]?.continue)return!0;return!1}function Fc(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function jc(e){return"string"==typeof e?e:e?.message}function Hc(e,t,r){const i={...e,path:e.path??[]};if(!e.message){const n=jc(e.inst?._zod.def?.error?.(e))??jc(t?.error?.(e))??jc(r.customError?.(e))??jc(r.localeError?.(e))??"Invalid input";i.message=n}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function qc(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function Uc(...e){const[t,r,i]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:i}:{...t}}r(64583).Promise;const Gc=Ul("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Wc={number:"number",bigint:"bigint",object:"date"},Vc=Ul("$ZodCheckLessThan",(e,t)=>{Gc.init(e,t);const r=Wc[typeof t.value];e._zod.onattach.push(e=>{const r=e._zod.bag,i=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:r,code:"too_big",maximum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Kc=Ul("$ZodCheckGreaterThan",(e,t)=>{Gc.init(e,t);const r=Wc[typeof t.value];e._zod.onattach.push(e=>{const r=e._zod.bag,i=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:r,code:"too_small",minimum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),$c=Ul("$ZodCheckMultipleOf",(e,t)=>{Gc.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===function(e,t){const r=(e.toString().split(".")[1]||"").length,i=t.toString();let n=(i.split(".")[1]||"").length;if(0===n&&/\d?e-\d?/.test(i)){const e=i.match(/\d?e-(\d?)/);e?.[1]&&(n=Number.parseInt(e[1]))}const o=r>n?r:n;return Number.parseInt(e.toFixed(o).replace(".",""))%Number.parseInt(t.toFixed(o).replace(".",""))/10**o}(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Yc=Ul("$ZodCheckNumberFormat",(e,t)=>{Gc.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),i=r?"int":"number",[n,o]=Lc[t.format];e._zod.onattach.push(e=>{const i=e._zod.bag;i.format=t.format,i.minimum=n,i.maximum=o,r&&(i.pattern=fc)}),e._zod.check=s=>{const a=s.value;if(r){if(!Number.isInteger(a))return void s.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort}))}a<n&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:e})}}),Jc=Ul("$ZodCheckMaxLength",(e,t)=>{var r;Gc.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!xc(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const i=r.value;if(i.length<=t.maximum)return;const n=qc(i);r.issues.push({origin:n,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Xc=Ul("$ZodCheckMinLength",(e,t)=>{var r;Gc.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!xc(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const i=r.value;if(i.length>=t.minimum)return;const n=qc(i);r.issues.push({origin:n,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Zc=Ul("$ZodCheckLengthEquals",(e,t)=>{var r;Gc.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!xc(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{const i=r.value,n=i.length;if(n===t.length)return;const o=qc(i),s=n>t.length;r.issues.push({origin:o,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Qc=Ul("$ZodCheckStringFormat",(e,t)=>{var r,i;Gc.init(e,t),e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),eu=Ul("$ZodCheckRegex",(e,t)=>{Qc.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),tu=Ul("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=vc),Qc.init(e,t)}),ru=Ul("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=bc),Qc.init(e,t)}),iu=Ul("$ZodCheckIncludes",(e,t)=>{Gc.init(e,t);const r=Dc(t.includes),i=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=i,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),nu=Ul("$ZodCheckStartsWith",(e,t)=>{Gc.init(e,t);const r=new RegExp(`^${Dc(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),ou=Ul("$ZodCheckEndsWith",(e,t)=>{Gc.init(e,t);const r=new RegExp(`.*${Dc(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),su=Ul("$ZodCheckOverwrite",(e,t)=>{Gc.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class au{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length)),i=t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e);for(const e of i)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const lu=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,yc,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},cu=Ul("$ZodError",lu),uu=Ul("$ZodError",lu,{Parent:Error});var du=r(64583).Promise;const mu=e=>(t,r,i,n)=>{const o=i?Object.assign(i,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},o);if(s instanceof du)throw new Gl;if(s.issues.length){const t=new(n?.Err??e)(s.issues.map(e=>Hc(e,o,Kl())));throw Ic(t,n?.callee),t}return s.value},pu=e=>async(t,r,i,n)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},o);if(s instanceof du&&(s=await s),s.issues.length){const t=new(n?.Err??e)(s.issues.map(e=>Hc(e,o,Kl())));throw Ic(t,n?.callee),t}return s.value},hu=e=>(t,r,i)=>{const n=i?{...i,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},n);if(o instanceof du)throw new Gl;return o.issues.length?{success:!1,error:new(e??cu)(o.issues.map(e=>Hc(e,n,Kl())))}:{success:!0,data:o.value}},fu=hu(uu),gu=e=>async(t,r,i)=>{const n=i?Object.assign(i,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},n);return o instanceof du&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>Hc(e,n,Kl())))}:{success:!0,data:o.value}},vu=gu(uu),bu=e=>(t,r,i)=>{const n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return mu(e)(t,r,n)},yu=e=>(t,r,i)=>mu(e)(t,r,i),_u=e=>async(t,r,i)=>{const n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return pu(e)(t,r,n)},xu=e=>async(t,r,i)=>pu(e)(t,r,i),wu=e=>(t,r,i)=>{const n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return hu(e)(t,r,n)},Cu=e=>(t,r,i)=>hu(e)(t,r,i),ku=e=>async(t,r,i)=>{const n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return gu(e)(t,r,n)},Tu=e=>async(t,r,i)=>gu(e)(t,r,i),Eu={major:4,minor:1,patch:5};var Su=r(64583).Promise;const Iu=Ul("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Eu;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const t of i)for(const r of t._zod.onattach)r(e);if(0===i.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,r)=>{let i,n=zc(e);for(const o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(n)continue;const t=e.issues.length,s=o._zod.check(e);if(s instanceof Su&&!1===r?.async)throw new Gl;if(i||s instanceof Su)i=(i??Su.resolve()).then(async()=>{await s,e.issues.length!==t&&(n||(n=zc(e,t)))});else{if(e.issues.length===t)continue;n||(n=zc(e,t))}}return i?i.then(()=>e):e},r=(r,n,o)=>{if(zc(r))return r.aborted=!0,r;const s=t(n,i,o);if(s instanceof Su){if(!1===o.async)throw new Gl;return s.then(t=>e._zod.parse(t,o))}return e._zod.parse(s,o)};e._zod.run=(n,o)=>{if(o.skipChecks)return e._zod.parse(n,o);if("backward"===o.direction){const t=e._zod.parse({value:n.value,issues:[]},{...o,skipChecks:!0});return t instanceof Su?t.then(e=>r(e,n,o)):r(t,n,o)}const s=e._zod.parse(n,o);if(s instanceof Su){if(!1===o.async)throw new Gl;return s.then(e=>t(e,i,o))}return t(s,i,o)}}e["~standard"]={validate:t=>{try{const r=fu(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return vu(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Au=Ul("$ZodString",(e,t)=>{var r;Iu.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(r=e._zod.bag,new RegExp(`^${r?`[\\s\\S]{${r?.minimum??0},${r?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=String(r.value)}catch(i){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ou=Ul("$ZodStringFormat",(e,t)=>{Qc.init(e,t),Au.init(e,t)}),Nu=Ul("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=tc),Ou.init(e,t)}),Ru=Ul("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=rc(e))}else t.pattern??(t.pattern=rc());Ou.init(e,t)}),Pu=Ul("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=ic),Ou.init(e,t)}),Du=Ul("$ZodURL",(e,t)=>{Ou.init(e,t),e._zod.check=r=>{try{const i=r.value.trim(),n=new URL(i);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:uc.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),void(t.normalize?r.value=n.href:r.value=i)}catch(i){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Bu=Ul("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ou.init(e,t)}),Mu=Ul("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Ql),Ou.init(e,t)}),Lu=Ul("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=$l),Ou.init(e,t)}),zu=Ul("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Yl),Ou.init(e,t)}),Fu=Ul("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Jl),Ou.init(e,t)}),ju=Ul("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Xl),Ou.init(e,t)}),Hu=Ul("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Zl),Ou.init(e,t)}),qu=Ul("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=hc({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${r.join("|")})`;return new RegExp(`^${mc}T(?:${i})$`)}(t)),Ou.init(e,t)}),Uu=Ul("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=pc),Ou.init(e,t)}),Gu=Ul("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${hc(t)}$`)),Ou.init(e,t)}),Wu=Ul("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ec),Ou.init(e,t)}),Vu=Ul("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=nc),Ou.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),Ku=Ul("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=oc),Ou.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),$u=Ul("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=sc),Ou.init(e,t)}),Yu=Ul("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=ac),Ou.init(e,t),e._zod.check=r=>{const[i,n]=r.value.split("/");try{if(!n)throw new Error;const e=Number(n);if(`${e}`!==n)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${i}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Ju(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const Xu=Ul("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=lc),Ou.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Ju(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}}),Zu=Ul("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=cc),Ou.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{(function(e){if(!cc.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Ju(t.padEnd(4*Math.ceil(t.length/4),"="))})(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Qu=Ul("$ZodE164",(e,t)=>{t.pattern??(t.pattern=dc),Ou.init(e,t)}),ed=Ul("$ZodJWT",(e,t)=>{Ou.init(e,t),e._zod.check=r=>{(function(e,t=null){try{const r=e.split(".");if(3!==r.length)return!1;const[i]=r;if(!i)return!1;const n=JSON.parse(atob(i));return!("typ"in n&&"JWT"!==n?.typ||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch{return!1}})(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),td=Ul("$ZodNumber",(e,t)=>{Iu.init(e,t),e._zod.pattern=e._zod.bag.pattern??gc,e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}const n=r.value;if("number"==typeof n&&!Number.isNaN(n)&&Number.isFinite(n))return r;const o="number"==typeof n?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...o?{received:o}:{}}),r}}),rd=Ul("$ZodNumber",(e,t)=>{Yc.init(e,t),td.init(e,t)}),id=Ul("$ZodAny",(e,t)=>{Iu.init(e,t),e._zod.parse=e=>e}),nd=Ul("$ZodUnknown",(e,t)=>{Iu.init(e,t),e._zod.parse=e=>e}),od=Ul("$ZodNever",(e,t)=>{Iu.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function sd(e,t,r){e.issues.length&&t.issues.push(...Fc(r,e.issues)),t.value[r]=e.value}const ad=Ul("$ZodArray",(e,t)=>{Iu.init(e,t),e._zod.parse=(r,i)=>{const n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);const o=[];for(let e=0;e<n.length;e++){const s=n[e],a=t.element._zod.run({value:s,issues:[]},i);a instanceof Su?o.push(a.then(t=>sd(t,r,e))):sd(a,r,e)}return o.length?Su.all(o).then(()=>r):r}});function ld(e,t,r,i){e.issues.length&&t.issues.push(...Fc(r,e.issues)),void 0===e.value?r in i&&(t.value[r]=void 0):t.value[r]=e.value}function cd(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape[r]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const r=(i=e.shape,Object.keys(i).filter(e=>"optional"===i[e]._zod.optin&&"optional"===i[e]._zod.optout));var i;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function ud(e,t,r,i,n,o){const s=[],a=n.keySet,l=n.catchall._zod,c=l.def.type;for(const n of Object.keys(t)){if(a.has(n))continue;if("never"===c){s.push(n);continue}const o=l.run({value:t[n],issues:[]},i);o instanceof Su?e.push(o.then(e=>ld(e,r,n,t))):ld(o,r,n,t)}return s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:o}),e.length?Su.all(e).then(()=>r):r}const dd=Ul("$ZodObject",(e,t)=>{Iu.init(e,t);const r=_c(()=>cd(t));kc(e._zod,"propValues",()=>{const e=t.shape,r={};for(const t in e){const i=e[t]._zod;if(i.values){r[t]??(r[t]=new Set);for(const e of i.values)r[t].add(e)}}return r});const i=Ac,n=t.catchall;let o;e._zod.parse=(t,s)=>{o??(o=r.value);const a=t.value;if(!i(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};const l=[],c=o.shape;for(const e of o.keys){const r=c[e]._zod.run({value:a[e],issues:[]},s);r instanceof Su?l.push(r.then(r=>ld(r,t,e,a))):ld(r,t,e,a)}return n?ud(l,a,t,s,r.value,e):l.length?Su.all(l).then(()=>t):t}}),md=Ul("$ZodObjectJIT",(e,t)=>{dd.init(e,t);const r=e._zod.parse,i=_c(()=>cd(t));let n;const o=Ac,s=!Vl.jitless,a=s&&Oc.value,l=t.catchall;let c;e._zod.parse=(u,d)=>{c??(c=i.value);const m=u.value;return o(m)?s&&a&&!1===d?.async&&!0!==d.jitless?(n||(n=(e=>{const t=new au(["shape","payload","ctx"]),r=i.value,n=e=>{const t=Sc(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const o=Object.create(null);let s=0;for(const e of r.keys)o[e]="key_"+s++;t.write("const newResult = {}");for(const e of r.keys){const r=o[e],i=Sc(e);t.write(`const ${r} = ${n(e)};`),t.write(`\n        if (${r}.issues.length) {\n          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${i}, ...iss.path] : [${i}]\n          })));\n        }\n        \n        if (${r}.value === undefined) {\n          if (${i} in input) {\n            newResult[${i}] = undefined;\n          }\n        } else {\n          newResult[${i}] = ${r}.value;\n        }\n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const a=t.compile();return(t,r)=>a(e,t,r)})(t.shape)),u=n(u,d),l?ud([],m,u,d,c,e):u):r(u,d):(u.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),u)}});function pd(e,t,r,i){for(const r of e)if(0===r.issues.length)return t.value=r.value,t;const n=e.filter(e=>!zc(e));return 1===n.length?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>Hc(e,i,Kl())))}),t)}const hd=Ul("$ZodUnion",(e,t)=>{Iu.init(e,t),kc(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),kc(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),kc(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),kc(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>wc(e.source)).join("|")})$`)}});const r=1===t.options.length,i=t.options[0]._zod.run;e._zod.parse=(n,o)=>{if(r)return i(n,o);let s=!1;const a=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},o);if(t instanceof Su)a.push(t),s=!0;else{if(0===t.issues.length)return t;a.push(t)}}return s?Su.all(a).then(t=>pd(t,n,e,o)):pd(a,n,e,o)}}),fd=Ul("$ZodIntersection",(e,t)=>{Iu.init(e,t),e._zod.parse=(e,r)=>{const i=e.value,n=t.left._zod.run({value:i,issues:[]},r),o=t.right._zod.run({value:i,issues:[]},r);return n instanceof Su||o instanceof Su?Su.all([n,o]).then(([t,r])=>vd(e,t,r)):vd(e,n,o)}});function gd(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(Nc(e)&&Nc(t)){const r=Object.keys(t),i=Object.keys(e).filter(e=>-1!==r.indexOf(e)),n={...e,...t};for(const r of i){const i=gd(e[r],t[r]);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n[r]=i.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let i=0;i<e.length;i++){const n=gd(e[i],t[i]);if(!n.valid)return{valid:!1,mergeErrorPath:[i,...n.mergeErrorPath]};r.push(n.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function vd(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),zc(e))return e;const i=gd(t.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const bd=Ul("$ZodEnum",(e,t)=>{Iu.init(e,t);const r=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=new RegExp(`^(${r.filter(e=>Pc.has(typeof e)).map(e=>"string"==typeof e?Dc(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{const o=t.value;return i.has(o)||t.issues.push({code:"invalid_value",values:r,input:o,inst:e}),t}}),yd=Ul("$ZodTransform",(e,t)=>{Iu.init(e,t),e._zod.parse=(r,i)=>{if("backward"===i.direction)throw new Wl(e.constructor.name);const n=t.transform(r.value,r);if(i.async)return(n instanceof Su?n:Su.resolve(n)).then(e=>(r.value=e,r));if(n instanceof Su)throw new Gl;return r.value=n,r}});function _d(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const xd=Ul("$ZodOptional",(e,t)=>{Iu.init(e,t),e._zod.optin="optional",e._zod.optout="optional",kc(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),kc(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${wc(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){const i=t.innerType._zod.run(e,r);return i instanceof Su?i.then(t=>_d(t,e.value)):_d(i,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),wd=Ul("$ZodNullable",(e,t)=>{Iu.init(e,t),kc(e._zod,"optin",()=>t.innerType._zod.optin),kc(e._zod,"optout",()=>t.innerType._zod.optout),kc(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${wc(e.source)}|null)$`):void 0}),kc(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),Cd=Ul("$ZodDefault",(e,t)=>{Iu.init(e,t),e._zod.optin="optional",kc(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;const i=t.innerType._zod.run(e,r);return i instanceof Su?i.then(e=>kd(e,t)):kd(i,t)}});function kd(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Td=Ul("$ZodPrefault",(e,t)=>{Iu.init(e,t),e._zod.optin="optional",kc(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),Ed=Ul("$ZodNonOptional",(e,t)=>{Iu.init(e,t),kc(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,i)=>{const n=t.innerType._zod.run(r,i);return n instanceof Su?n.then(t=>Sd(t,e)):Sd(n,e)}});function Sd(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Id=Ul("$ZodCatch",(e,t)=>{Iu.init(e,t),kc(e._zod,"optin",()=>t.innerType._zod.optin),kc(e._zod,"optout",()=>t.innerType._zod.optout),kc(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);const i=t.innerType._zod.run(e,r);return i instanceof Su?i.then(i=>(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>Hc(e,r,Kl()))},input:e.value}),e.issues=[]),e)):(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>Hc(e,r,Kl()))},input:e.value}),e.issues=[]),e)}}),Ad=Ul("$ZodPipe",(e,t)=>{Iu.init(e,t),kc(e._zod,"values",()=>t.in._zod.values),kc(e._zod,"optin",()=>t.in._zod.optin),kc(e._zod,"optout",()=>t.out._zod.optout),kc(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){const i=t.out._zod.run(e,r);return i instanceof Su?i.then(e=>Od(e,t.in,r)):Od(i,t.in,r)}const i=t.in._zod.run(e,r);return i instanceof Su?i.then(e=>Od(e,t.out,r)):Od(i,t.out,r)}});function Od(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Nd=Ul("$ZodReadonly",(e,t)=>{Iu.init(e,t),kc(e._zod,"propValues",()=>t.innerType._zod.propValues),kc(e._zod,"values",()=>t.innerType._zod.values),kc(e._zod,"optin",()=>t.innerType._zod.optin),kc(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);const i=t.innerType._zod.run(e,r);return i instanceof Su?i.then(Rd):Rd(i)}});function Rd(e){return e.value=Object.freeze(e.value),e}const Pd=Ul("$ZodCustom",(e,t)=>{Gc.init(e,t),Iu.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{const i=r.value,n=t.fn(i);if(n instanceof Su)return n.then(t=>Dd(t,r,i,e));Dd(n,r,i,e)}});function Dd(e,t,r,i){if(!e){const e={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(e.params=i._zod.def.params),t.issues.push(Uc(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class Bd{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Md(){return new Bd}const Ld=Md();function zd(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Mc(t)})}function Fd(e,t){return new Vc({check:"less_than",...Mc(t),value:e,inclusive:!1})}function jd(e,t){return new Vc({check:"less_than",...Mc(t),value:e,inclusive:!0})}function Hd(e,t){return new Kc({check:"greater_than",...Mc(t),value:e,inclusive:!1})}function qd(e,t){return new Kc({check:"greater_than",...Mc(t),value:e,inclusive:!0})}function Ud(e,t){return new $c({check:"multiple_of",...Mc(t),value:e})}function Gd(e,t){return new Jc({check:"max_length",...Mc(t),maximum:e})}function Wd(e,t){return new Xc({check:"min_length",...Mc(t),minimum:e})}function Vd(e,t){return new Zc({check:"length_equals",...Mc(t),length:e})}function Kd(e){return new su({check:"overwrite",tx:e})}const $d=Ul("ZodISODateTime",(e,t)=>{qu.init(e,t),vm.init(e,t)});const Yd=Ul("ZodISODate",(e,t)=>{Uu.init(e,t),vm.init(e,t)});const Jd=Ul("ZodISOTime",(e,t)=>{Gu.init(e,t),vm.init(e,t)});const Xd=Ul("ZodISODuration",(e,t)=>{Wu.init(e,t),vm.init(e,t)});const Zd=(e,t)=>{cu.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const r=t||function(e){return e.message},i={_errors:[]},n=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>n({issues:e}));else if("invalid_key"===t.code)n({issues:t.issues});else if("invalid_element"===t.code)n({issues:t.issues});else if(0===t.path.length)i._errors.push(r(t));else{let e=i,n=0;for(;n<t.path.length;){const i=t.path[n];n===t.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(r(t))):e[i]=e[i]||{_errors:[]},e=e[i],n++}}};return n(e),i}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const r={},i=[];for(const n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):i.push(t(n));return{formErrors:i,fieldErrors:r}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,yc,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,yc,2)}},isEmpty:{get(){return 0===e.issues.length}}})},Qd=(Ul("ZodError",Zd),Ul("ZodError",Zd,{Parent:Error})),em=mu(Qd),tm=pu(Qd),rm=hu(Qd),im=gu(Qd),nm=bu(Qd),om=yu(Qd),sm=_u(Qd),am=xu(Qd),lm=wu(Qd),cm=Cu(Qd),um=ku(Qd),dm=Tu(Qd);var mm=r(64583).Promise;const pm=Ul("ZodType",(e,t)=>(Iu.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>Bc(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>em(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>rm(e,t,r),e.parseAsync=async(t,r)=>tm(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>im(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>nm(e,t,r),e.decode=(t,r)=>om(e,t,r),e.encodeAsync=async(t,r)=>sm(e,t,r),e.decodeAsync=async(t,r)=>am(e,t,r),e.safeEncode=(t,r)=>lm(e,t,r),e.safeDecode=(t,r)=>cm(e,t,r),e.safeEncodeAsync=async(t,r)=>um(e,t,r),e.safeDecodeAsync=async(t,r)=>dm(e,t,r),e.refine=(t,r)=>e.check(function(e,t={}){return function(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Mc(r)})}(cp,e,t)}(t,r)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new Gc({check:"custom",...Mc(void 0)});return t._zod.check=e,t}(r=>(r.addIssue=e=>{if("string"==typeof e)r.issues.push(Uc(e,r.value,t._zod.def));else{const i=e;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),r.issues.push(Uc(i))}},e(r.value,r)));return t}(t)),e.overwrite=t=>e.check(Kd(t)),e.optional=()=>Qm(e),e.nullable=()=>tp(e),e.nullish=()=>Qm(tp(e)),e.nonoptional=t=>function(e,t){return new np({type:"nonoptional",innerType:e,...Mc(t)})}(e,t),e.array=()=>Wm(e),e.or=t=>function(e,t){return new $m({type:"union",options:e,...Mc(t)})}([e,t]),e.and=t=>new Ym({type:"intersection",left:e,right:t}),e.transform=t=>ap(e,new Xm({type:"transform",transform:t})),e.default=t=>{return r=t,new rp({type:"default",innerType:e,get defaultValue(){return"function"==typeof r?r():Rc(r)}});var r},e.prefault=t=>{return r=t,new ip({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof r?r():Rc(r)}});var r},e.catch=t=>{return new op({type:"catch",innerType:e,catchValue:"function"==typeof(r=t)?r:()=>r});var r},e.pipe=t=>ap(e,t),e.readonly=()=>new lp({type:"readonly",innerType:e}),e.describe=t=>{const r=e.clone();return Ld.add(r,{description:t}),r},Object.defineProperty(e,"description",{get(){return Ld.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(0===t.length)return Ld.get(e);const r=e.clone();return Ld.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),hm=Ul("_ZodString",(e,t)=>{Au.init(e,t),pm.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new eu({check:"string_format",format:"regex",...Mc(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new iu({check:"string_format",format:"includes",...Mc(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new nu({check:"string_format",format:"starts_with",...Mc(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new ou({check:"string_format",format:"ends_with",...Mc(t),suffix:e})}(...t)),e.min=(...t)=>e.check(Wd(...t)),e.max=(...t)=>e.check(Gd(...t)),e.length=(...t)=>e.check(Vd(...t)),e.nonempty=(...t)=>e.check(Wd(1,...t)),e.lowercase=t=>e.check(function(e){return new tu({check:"string_format",format:"lowercase",...Mc(e)})}(t)),e.uppercase=t=>e.check(function(e){return new ru({check:"string_format",format:"uppercase",...Mc(e)})}(t)),e.trim=()=>e.check(Kd(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return Kd(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(Kd(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(Kd(e=>e.toUpperCase()))}),fm=Ul("ZodString",(e,t)=>{Au.init(e,t),hm.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Mc(t)})}(bm,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Mc(t)})}(xm,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Mc(t)})}(Mm,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Mc(t)})}(wm,t)),e.guid=t=>e.check(zd(ym,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Mc(t)})}(_m,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Mc(t)})}(_m,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Mc(t)})}(_m,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Mc(t)})}(_m,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Mc(t)})}(Cm,t)),e.guid=t=>e.check(zd(ym,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Mc(t)})}(km,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Mc(t)})}(Tm,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Mc(t)})}(Em,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Mc(t)})}(Pm,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Mc(t)})}(Dm,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Mc(t)})}(Sm,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Mc(t)})}(Im,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Mc(t)})}(Am,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Mc(t)})}(Om,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Mc(t)})}(Nm,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Mc(t)})}(Rm,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Mc(t)})}(Bm,t)),e.datetime=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Mc(t)})}($d,e)}(t)),e.date=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...Mc(t)})}(Yd,e)}(t)),e.time=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Mc(t)})}(Jd,e)}(t)),e.duration=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...Mc(t)})}(Xd,e)}(t))});function gm(e){return function(e,t){return new e({type:"string",...Mc(t)})}(fm,e)}const vm=Ul("ZodStringFormat",(e,t)=>{Ou.init(e,t),hm.init(e,t)}),bm=Ul("ZodEmail",(e,t)=>{Pu.init(e,t),vm.init(e,t)}),ym=Ul("ZodGUID",(e,t)=>{Nu.init(e,t),vm.init(e,t)}),_m=Ul("ZodUUID",(e,t)=>{Ru.init(e,t),vm.init(e,t)}),xm=Ul("ZodURL",(e,t)=>{Du.init(e,t),vm.init(e,t)}),wm=Ul("ZodEmoji",(e,t)=>{Bu.init(e,t),vm.init(e,t)}),Cm=Ul("ZodNanoID",(e,t)=>{Mu.init(e,t),vm.init(e,t)}),km=Ul("ZodCUID",(e,t)=>{Lu.init(e,t),vm.init(e,t)}),Tm=Ul("ZodCUID2",(e,t)=>{zu.init(e,t),vm.init(e,t)}),Em=Ul("ZodULID",(e,t)=>{Fu.init(e,t),vm.init(e,t)}),Sm=Ul("ZodXID",(e,t)=>{ju.init(e,t),vm.init(e,t)}),Im=Ul("ZodKSUID",(e,t)=>{Hu.init(e,t),vm.init(e,t)}),Am=Ul("ZodIPv4",(e,t)=>{Vu.init(e,t),vm.init(e,t)}),Om=Ul("ZodIPv6",(e,t)=>{Ku.init(e,t),vm.init(e,t)}),Nm=Ul("ZodCIDRv4",(e,t)=>{$u.init(e,t),vm.init(e,t)}),Rm=Ul("ZodCIDRv6",(e,t)=>{Yu.init(e,t),vm.init(e,t)}),Pm=Ul("ZodBase64",(e,t)=>{Xu.init(e,t),vm.init(e,t)}),Dm=Ul("ZodBase64URL",(e,t)=>{Zu.init(e,t),vm.init(e,t)}),Bm=Ul("ZodE164",(e,t)=>{Qu.init(e,t),vm.init(e,t)}),Mm=Ul("ZodJWT",(e,t)=>{ed.init(e,t),vm.init(e,t)}),Lm=Ul("ZodNumber",(e,t)=>{td.init(e,t),pm.init(e,t),e.gt=(t,r)=>e.check(Hd(t,r)),e.gte=(t,r)=>e.check(qd(t,r)),e.min=(t,r)=>e.check(qd(t,r)),e.lt=(t,r)=>e.check(Fd(t,r)),e.lte=(t,r)=>e.check(jd(t,r)),e.max=(t,r)=>e.check(jd(t,r)),e.int=t=>e.check(Fm(t)),e.safe=t=>e.check(Fm(t)),e.positive=t=>e.check(Hd(0,t)),e.nonnegative=t=>e.check(qd(0,t)),e.negative=t=>e.check(Fd(0,t)),e.nonpositive=t=>e.check(jd(0,t)),e.multipleOf=(t,r)=>e.check(Ud(t,r)),e.step=(t,r)=>e.check(Ud(t,r)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});const zm=Ul("ZodNumberFormat",(e,t)=>{rd.init(e,t),Lm.init(e,t)});function Fm(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Mc(t)})}(zm,e)}const jm=Ul("ZodAny",(e,t)=>{id.init(e,t),pm.init(e,t)}),Hm=Ul("ZodUnknown",(e,t)=>{nd.init(e,t),pm.init(e,t)});function qm(){return new Hm({type:"unknown"})}const Um=Ul("ZodNever",(e,t)=>{od.init(e,t),pm.init(e,t)});const Gm=Ul("ZodArray",(e,t)=>{ad.init(e,t),pm.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(Wd(t,r)),e.nonempty=t=>e.check(Wd(1,t)),e.max=(t,r)=>e.check(Gd(t,r)),e.length=(t,r)=>e.check(Vd(t,r)),e.unwrap=()=>e.element});function Wm(e,t){return function(e,t,r){return new e({type:"array",element:t,...Mc(r)})}(Gm,e,t)}const Vm=Ul("ZodObject",(e,t)=>{md.init(e,t),pm.init(e,t),kc(e,"shape",()=>t.shape),e.keyof=()=>function(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new Jm({type:"enum",entries:r,...Mc(t)})}(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:qm()}),e.loose=()=>e.clone({...e._zod.def,catchall:qm()}),e.strict=()=>{return e.clone({...e._zod.def,catchall:function(e,t){return new e({type:"never",...Mc(t)})}(Um,t)});var t},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!Nc(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=Ec(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return Tc(this,"shape",r),r},checks:[]});return Bc(e,i)}(e,t),e.safeExtend=t=>function(e,t){if(!Nc(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return Tc(this,"shape",r),r},checks:e._zod.def.checks};return Bc(e,r)}(e,t),e.merge=t=>function(e,t){const r=Ec(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Tc(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Bc(e,r)}(e,t),e.pick=t=>function(e,t){const r=e._zod.def;return Bc(e,Ec(e._zod.def,{get shape(){const e={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(e[i]=r.shape[i])}return Tc(this,"shape",e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const r=e._zod.def,i=Ec(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete i[e]}return Tc(this,"shape",i),i},checks:[]});return Bc(e,i)}(e,t),e.partial=(...t)=>function(e,t,r){const i=Ec(t._zod.def,{get shape(){const i=t._zod.def.shape,n={...i};if(r)for(const t in r){if(!(t in i))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(n[t]=e?new e({type:"optional",innerType:i[t]}):i[t])}else for(const t in i)n[t]=e?new e({type:"optional",innerType:i[t]}):i[t];return Tc(this,"shape",n),n},checks:[]});return Bc(t,i)}(Zm,e,t[0]),e.required=(...t)=>function(e,t,r){const i=Ec(t._zod.def,{get shape(){const i=t._zod.def.shape,n={...i};if(r)for(const t in r){if(!(t in n))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(n[t]=new e({type:"nonoptional",innerType:i[t]}))}else for(const t in i)n[t]=new e({type:"nonoptional",innerType:i[t]});return Tc(this,"shape",n),n},checks:[]});return Bc(t,i)}(np,e,t[0])});function Km(e,t){const r={type:"object",get shape(){var t;return Tc(this,"shape",e?(t=e,Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))):{}),this.shape},...Mc(t)};return new Vm(r)}const $m=Ul("ZodUnion",(e,t)=>{hd.init(e,t),pm.init(e,t),e.options=t.options});const Ym=Ul("ZodIntersection",(e,t)=>{fd.init(e,t),pm.init(e,t)}),Jm=Ul("ZodEnum",(e,t)=>{bd.init(e,t),pm.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(e,i)=>{const n={};for(const i of e){if(!r.has(i))throw new Error(`Key ${i} not found in enum`);n[i]=t.entries[i]}return new Jm({...t,checks:[],...Mc(i),entries:n})},e.exclude=(e,i)=>{const n={...t.entries};for(const t of e){if(!r.has(t))throw new Error(`Key ${t} not found in enum`);delete n[t]}return new Jm({...t,checks:[],...Mc(i),entries:n})}});const Xm=Ul("ZodTransform",(e,t)=>{yd.init(e,t),pm.init(e,t),e._zod.parse=(r,i)=>{if("backward"===i.direction)throw new Wl(e.constructor.name);r.addIssue=i=>{if("string"==typeof i)r.issues.push(Uc(i,r.value,t));else{const t=i;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),r.issues.push(Uc(t))}};const n=t.transform(r.value,r);return n instanceof mm?n.then(e=>(r.value=e,r)):(r.value=n,r)}});const Zm=Ul("ZodOptional",(e,t)=>{xd.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Qm(e){return new Zm({type:"optional",innerType:e})}const ep=Ul("ZodNullable",(e,t)=>{wd.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tp(e){return new ep({type:"nullable",innerType:e})}const rp=Ul("ZodDefault",(e,t)=>{Cd.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),ip=Ul("ZodPrefault",(e,t)=>{Td.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType}),np=Ul("ZodNonOptional",(e,t)=>{Ed.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType}),op=Ul("ZodCatch",(e,t)=>{Id.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),sp=Ul("ZodPipe",(e,t)=>{Ad.init(e,t),pm.init(e,t),e.in=t.in,e.out=t.out});function ap(e,t){return new sp({type:"pipe",in:e,out:t})}const lp=Ul("ZodReadonly",(e,t)=>{Nd.init(e,t),pm.init(e,t),e.unwrap=()=>e._zod.def.innerType}),cp=Ul("ZodCustom",(e,t)=>{Pd.init(e,t),pm.init(e,t)});function up(){return this.log.length}function dp(e=1){if(e<=0||e>this.currentVersion())return null;{const[t,r]=this.log[e-1],i=new this.constructor(JSON.parse(t),JSON.parse(r));return i.log=this.log.slice(0,e),i}}function mp(e=1){return this.retrieveVersion(this.currentVersion()-e)}function pp(){return this.retrieveVersion(this.currentVersion())}function hp(){return this.log.push([JSON.stringify(this.data),JSON.stringify(this._options)]),this}const fp=["real","string"],gp=["json","html","string","rtf"],vp=["csl","bibtex","bibtxt","citation-*","ris","ndjson"],bp=["string","function"];function yp(e){if("object"!=typeof e)throw new TypeError("Options not an object!");const{format:t,type:r,style:i,lang:n,append:o,prepend:s}=e;if(t&&!fp.includes(t))throw new TypeError(`Option format ("${t}") should be one of: ${fp}`);if(r&&!gp.includes(r))throw new TypeError(`Option type ("${r}") should be one of: ${gp}`);if(i&&!vp.includes(i)&&!/^citation/.test(i))throw new TypeError(`Option style ("${i}") should be one of: ${vp}`);if(n&&"string"!=typeof n)throw new TypeError("Option lang should be a string, but is a "+typeof n);if(s&&!bp.includes(typeof s))throw new TypeError("Option prepend should be a string or a function, but is a "+typeof s);if(o&&!bp.includes(typeof o))throw new TypeError("Option append should be a string or a function, but is a "+typeof o);if(/^citation/.test(i)&&"json"===r)throw new Error(`Combination type/style of json/citation-* is not valid: ${r}/${i}`);return!0}function _p(e){if("object"!=typeof e)throw new TypeError("Options should be an object");if(e.output)yp(e.output);else{if(e.maxChainLength&&"number"!=typeof e.maxChainLength)throw new TypeError("Option maxChainLength should be a number");if(e.forceType&&"string"!=typeof e.forceType)throw new TypeError("Option forceType should be a string");if(null!=e.generateGraph&&"boolean"!=typeof e.generateGraph)throw new TypeError("Option generateGraph should be a boolean");if(null!=e.strict&&"boolean"!=typeof e.strict)throw new TypeError("Option strict should be a boolean");if(null!=e.target&&"string"!=typeof e.target)throw new TypeError("Option target should be a boolean")}return!0}const xp={format:"real",type:"json",style:"csl",lang:"en-US"};function wp(e,t){return yp(e),t&&this.save(),Object.assign(this._options,e),this}function Cp(e){switch(e){case void 0:return"Undefined";case null:return"Null";default:return e.constructor.name}}function kp(e){switch(typeof e){case"string":return"String";case"object":if(Array.isArray(e))return"Array";if("Object"===Cp(e))return"SimpleObject";if("Null"!==Cp(e))return"ComplexObject";default:return"Primitive"}}function Tp(e,t){if(e._graph){const r=t.findIndex(({type:e})=>"@else/list+object"===e);-1!==r&&t.splice(r+1,0,...e._graph.slice(0,-1))}return e._graph=t,e}function Ep(e){return delete e._graph,e}const Sp={_output(e,t,r){this._log.push(t,r),this._levels.indexOf(e)<this._levels.indexOf(this.level)||this._console.log(t,...r)},_console:null,_log:[],_levels:["http","debug","unmapped","info","warn","error","silent"],level:"silent"};for(const e of Sp._levels)Sp[e]=(t,...r)=>Sp._output(e,t,r);"function"==typeof console.Console?Sp._console=new console.Console(process.stderr):Sp._console=console;var Ip=Sp;const Ap={},Op={},Np={};function Rp(e,t){switch(t){case"Array":return 0===e.length||e.every(e=>"@csl/object"===Dp(e))?"@csl/list+object":"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object";default:return"@invalid"}}function Pp(e=[],t){for(const r of e)if(Ap[r].predicate(t))return Pp(Ap[r].extensions,t)||r}function Dp(e){const t=kp(e);return"Array"===t&&0===e.length?Rp(e,t):Pp(Op[t],e)||Rp(e,t)}function Bp(e,{dataType:t,predicate:r,extends:i}){let n=[];e in Np&&(n=Np[e],delete Np[e],Ip.debug("[core]",`Subclasses "${n}" finally registered to parent type "${e}"`));const o={predicate:r,extensions:n};if(Ap[e]=o,i){const t=Ap[i];t?t.extensions.push(e):(Np[i]||(Np[i]=[]),Np[i].push(e),Ip.debug("[core]",`Subclass "${e}" is waiting on parent type "${i}"`))}else(Op[t]||(Op[t]=[])).push(e)}function Mp(e){return Object.prototype.hasOwnProperty.call(Ap,e)}function Lp(e){delete Ap[e];const t=[...Object.keys(Op).map(e=>Op[e]),...Object.keys(Ap).map(e=>Ap[e].extensions).filter(e=>e.length>0)];t.forEach(t=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)})}function zp(){return Object.keys(Ap)}function Fp(){const e=t=>({name:t,children:Ap[t].extensions.map(e)});return{name:"Type tree",children:Object.keys(Op).map(t=>({name:t,children:Op[t].map(e)}))}}const jp=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/;class Hp{constructor(e){var t,r,i;t=this,i=["String","Array","SimpleObject","ComplexObject","Primitive"],(r=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(r="validDataTypes"))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,this.data=e}validateDataType(){const e=this.data.dataType;if(e&&!this.validDataTypes.includes(e))throw new RangeError(`dataType was ${e}; expected one of ${this.validDataTypes}`)}validateParseType(){const e=this.data.predicate;if(e&&!(e instanceof RegExp||"function"==typeof e))throw new TypeError(`predicate was ${typeof e}; expected RegExp or function`)}validateTokenList(){const e=this.data.tokenList;if(e&&"object"!=typeof e)throw new TypeError(`tokenList was ${typeof e}; expected object or RegExp`)}validatePropertyConstraint(){const e=this.data.propertyConstraint;if(e&&"object"!=typeof e)throw new TypeError(`propertyConstraint was ${typeof e}; expected array or object`)}validateElementConstraint(){const e=this.data.elementConstraint;if(e&&"string"!=typeof e)throw new TypeError(`elementConstraint was ${typeof e}; expected string`)}validateExtends(){const e=this.data.extends;if(e&&"string"!=typeof e)throw new TypeError(`extends was ${typeof e}; expected string`)}validate(){if(null===this.data||"object"!=typeof this.data)throw new TypeError(`typeParser was ${typeof this.data}; expected object`);this.validateDataType(),this.validateParseType(),this.validateTokenList(),this.validatePropertyConstraint(),this.validateElementConstraint(),this.validateExtends()}parseTokenList(){let e=this.data.tokenList;if(!e)return[];e instanceof RegExp&&(e={token:e});const{token:t,split:r=/\s+/,trim:i=!0,every:n=!0}=e,o=n?"every":"some";return[e=>(e=>i?e.trim():e)(e).split(r)[o](e=>t.test(e))]}parsePropertyConstraint(){return[].concat(this.data.propertyConstraint||[]).map(({props:e,match:t,value:r})=>{switch(e=[].concat(e),t){case"any":case"some":return t=>e.some(e=>e in t&&(!r||r(t[e])));case"none":return t=>!e.some(e=>e in t&&(!r||r(t[e])));default:return t=>e.every(e=>e in t&&(!r||r(t[e])))}})}parseElementConstraint(){const e=this.data.elementConstraint;return e?[t=>t.every(t=>Dp(t)===e)]:[]}parsePredicate(){return this.data.predicate instanceof RegExp?[this.data.predicate.test.bind(this.data.predicate)]:this.data.predicate?[this.data.predicate]:[]}getCombinedPredicate(){const e=[...this.parsePredicate(),...this.parseTokenList(),...this.parsePropertyConstraint(),...this.parseElementConstraint()];return 0===e.length?()=>!0:1===e.length?e[0]:t=>e.every(e=>e(t))}getDataType(){return this.data.dataType?this.data.dataType:this.data.predicate instanceof RegExp||this.data.tokenList?"String":this.data.elementConstraint?"Array":"Primitive"}get dataType(){return this.getDataType()}get predicate(){return this.getCombinedPredicate()}get extends(){return this.data.extends}}class qp{constructor(e,{async:t}={}){this.parser=e,this.async=t}validate(){const e=this.parser;if("function"!=typeof e)throw new TypeError(`parser was ${typeof e}; expected function`)}}class Up{constructor(e,t={}){this.format=e,t.parseType&&(this.typeParser=new Hp(t.parseType)),t.parse&&(this.dataParser=new qp(t.parse,{async:!1})),t.parseAsync&&(this.asyncDataParser=new qp(t.parseAsync,{async:!0}))}validateFormat(){const e=this.format;if(!jp.test(e))throw new TypeError(`format name was "${e}"; didn't match expected pattern`)}validate(){this.validateFormat(),this.typeParser&&this.typeParser.validate(),this.dataParser&&this.dataParser.validate(),this.asyncDataParser&&this.asyncDataParser.validate()}}var Gp=r(5656);function Wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function Vp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(r),!0).forEach(function(t){Kp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kp(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $p=1,Yp=2,Jp=3,Xp=4,Zp={article:!0,"article-journal":!0,"article-magazine":!0,"article-newspaper":!0,bill:!0,book:!0,broadcast:!0,chapter:!0,classic:!0,collection:!0,dataset:!0,document:!0,entry:!0,"entry-dictionary":!0,"entry-encyclopedia":!0,event:!0,figure:!0,graphic:!0,hearing:!0,interview:!0,legal_case:!0,legislation:!0,manuscript:!0,map:!0,motion_picture:!0,musical_score:!0,pamphlet:!0,"paper-conference":!0,patent:!0,performance:!0,periodical:!0,personal_communication:!0,post:!0,"post-weblog":!0,regulation:!0,report:!0,review:!0,"review-book":!0,software:!0,song:!0,speech:!0,standard:!0,thesis:!0,treaty:!0,webpage:!0,"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference",dissertation:"thesis"},Qp={author:Yp,chair:Yp,"collection-editor":Yp,compiler:Yp,composer:Yp,"container-author":Yp,contributor:Yp,curator:Yp,director:Yp,editor:Yp,"editorial-director":Yp,"executive-producer":Yp,guest:Yp,host:Yp,interviewer:Yp,illustrator:Yp,narrator:Yp,organizer:Yp,"original-author":Yp,performer:Yp,producer:Yp,"reviewed-author":Yp,recipient:Yp,"script-writer":Yp,"series-creator":Yp,translator:Yp,accessed:Jp,"available-date":Jp,container:Jp,"event-date":Jp,issued:Jp,"original-date":Jp,submitted:Jp,type:Xp,categories:"object",custom:"object",id:["string","number"],language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_collection:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-key":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",division:"string",DOI:"string",edition:["string","number"],event:"string","event-title":"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string","part-number":["string","number"],"part-title":"string",PMCID:"string",PMID:"string",printing:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string","reviewed-genre":"string",scale:"string",section:"string",source:"string",status:"string",supplement:["string","number"],title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"volume-title":"string","volume-title-short":"string","year-suffix":"string"};function eh(e,t){return"object"==typeof e&&null!==e&&(e.literal||e.given||e.family)?((e.ORCID||e.orcid||e._ORCID)&&(delete(e=Vp({_orcid:e.ORCID||e.orcid||e._ORCID},e)).ORCID,delete e.orcid,delete e._ORCID),e):t&&"string"==typeof e?(0,Gp.qg)(e):void 0}function th(e,t){return e.every(e=>"number"==typeof e)?e:!t||e.some(e=>isNaN(parseInt(e)))?void 0:e.map(e=>parseInt(e))}function rh(e,t){if(e=ih("language",e,t),!0===Zp[e])return e;if(t){if(e in Zp)return Zp[e];if(e.toLowerCase()!==e)return rh(e.toLowerCase(),t)}}function ih(e,t,r){const i=[].concat(Qp[e]);switch(Qp[e]){case $p:return eh(t,r);case Yp:return function(e,t){if(e instanceof Array){const r=e.map(e=>eh(e,t)).filter(Boolean);return r.length?r:void 0}}(t,r);case Jp:return function(e,t){const r="date-parts";if("object"==typeof e&&null!==e){if(e[r]instanceof Array&&e[r].every(e=>e instanceof Array)){const i=e[r].map(e=>th(e,t)).filter(Boolean);return i.length?Vp(Vp({},e),{},{"date-parts":i}):void 0}if(e instanceof Array&&e.every(e=>e[r]instanceof Array)){const i=e.map(e=>th(e[r],t)).filter(Boolean);return i.length?{"date-parts":i}:void 0}if(e[r]instanceof Array){const i=th(e[r],t);return i&&{"date-parts":[i]}}return"literal"in e||"raw"in e?e:void 0}}(t,r);case Xp:return rh(t,r)}if(r){if("string"==typeof t&&i.includes("number")&&!i.includes("string")&&!isNaN(+t))return parseFloat(t);if("number"==typeof t&&i.includes("string")&&!i.includes("number"))return t.toString();if(Array.isArray(t)&&t.length)return ih(e,t[0],r)}if(i.includes(typeof t))return t}function nh(e,t=!0){return e.map(function(e){const r={};for(const i in e){const n=ih(i,e[i],t);void 0!==n&&(r[i]=n)}return r})}var oh=r(64583).Promise;const sh={},ah={},lh={"@csl/object":e=>[e],"@csl/list+object":e=>e,"@else/list+object":e=>e.map(e=>uh(e,Dp(e))).flat(),"@invalid":()=>{throw new Error("This format is not supported or recognized")}},ch={"@else/list+object":e=>oh.all(e.map(e=>dh(e,Dp(e)))).then(e=>e.flat())};function uh(e,t){if("function"==typeof sh[t])return sh[t](e);if("function"==typeof lh[t])return lh[t](e);throw new TypeError(`No synchronous parser found for ${t}`)}async function dh(e,t){if("function"==typeof ah[t])return ah[t](e);if("function"==typeof ch[t])return ch[t](e);if(ph(t,!1))return uh(e,t);throw new TypeError(`No parser found for ${t}`)}function mh(e,{parser:t,async:r}){r?ah[e]=t:sh[e]=t}function ph(e,t){return t?ah[e]||ch[e]:sh[e]||lh[e]}function hh(e,t){delete(t?ah:sh)[e]}function fh(e){return Object.keys(e?ah:sh)}const gh={};function vh(e,t){const r=new Up(e,t);r.validate();const i=gh[e]||(gh[e]={});r.typeParser&&(Bp(e,r.typeParser),i.type=!0),r.dataParser&&(mh(e,r.dataParser),i.data=!0),r.asyncDataParser&&(mh(e,r.asyncDataParser),i.asyncData=!0),t.outputs&&(i.outputs=t.outputs)}function bh(e){return gh[e]}function yh(e){const t=gh[e];t&&(t.type&&Lp(e),t.data&&hh(e),t.asyncData&&hh(e,!0),delete gh[e])}function _h(e){return e in gh}function xh(){return Object.keys(gh)}function wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function Ch(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wh(Object(r),!0).forEach(function(t){kh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kh(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Th(e){return Array.isArray(e)?e.map(Th):("event"in(e=Ch({},e))&&(e["event-title"]=e.event,delete e.event),"book"===e.type&&"version"in e&&(e.type="software"),e)}function Eh(e){return Array.isArray(e)?e.map(Eh):("event-title"in(e=Ch({},e))&&(e.event=e["event-title"],delete e["event-title"]),"software"===e.type&&(e.type="book"),e)}function Sh(e,t=new Set){if("object"!=typeof e||null===e||e.constructor!==Object&&e.constructor!==Array)return e;if(t.has(e))throw new TypeError("Recursively copying circular structure");let r;if(t.add(e),e.constructor===Array)r=e.map(e=>Sh(e,t));else{const i={};for(const r in e)i[r]=Sh(e[r],t);r=i}return t.delete(e),r}var Ih=Sh,Ah=(r(81411),r(42681)),Oh=r.n(Ah);const Nh="undefined"!=typeof location&&"undefined"!=typeof navigator,{fetch:Rh,Headers:Ph}="function"==typeof fetch&&Nh?{fetch:fetch,Headers:Headers}:Oh()();let Dh="Citation.js/0.7.18";"undefined"!=typeof process&&process&&process.release&&"node"===process.release.name&&process.version&&(Dh+=` Node.js/${process.version}`);var Bh=function(e,t){let r;for(;void 0===r||e.includes(r);)r=`${t}${Math.random().toString().slice(2)}`;return r},Mh=class{constructor(e={}){this.data=e}set(e,t){return this.data[e]=t,this}add(...e){return this.set(...e)}delete(e){return delete this.data[e],this}remove(...e){return this.delete(...e)}get(e){return this.data[e]}has(e){return Object.prototype.hasOwnProperty.call(this.data,e)}list(){return Object.keys(this.data)}};class Lh{constructor(e,t){this.rules=e,this.defaultState=t,this.mainRule=Object.keys(e)[0],this.log=[]}parse(e,t){return this.lexer=e,this.token=this.lexer.next(),this.state=Sh(this.defaultState),this.log=[],this.consumeRule(t||this.mainRule)}matchEndOfFile(){return!this.token}matchToken(e){return this.token&&e===this.token.type}consumeToken(e,t){const r=this.token;if(!e||r&&r.type===e)return this.token=this.lexer.next(),r;if(!t){const t=r?`"${r.type}"`:"EOF",i=new SyntaxError(this.lexer.formatError(r,`expected "${e}", got ${t}`));throw i.message+=` (${this.log.join("->")})`,i}}consumeRule(e){this.log.push(e);const t=this.rules[e].call(this);return this.log.pop(),t}}function zh(e,t){return t=t===Fh.CONVERT_TO_SOURCE,e=e.map(e=>function(e,t){let r,i,n,o;if("string"==typeof e)r=i=e;else{if(!e)return null;r=t?e.target:e.source,i=t?e.source:e.target,e.convert&&(n=t?e.convert.toSource:e.convert.toTarget),e.when&&(o=t?e.when.target:e.when.source,null!=o&&(o=function(e){return function(t){return"boolean"==typeof e?e:Object.keys(e).every(r=>{const i=e[r];return!0===i?r in t:!1===i?!(r in t):"function"==typeof i?i(t[r]):Array.isArray(i)?i.includes(t[r]):t[r]===i})}}(o)))}return r=[].concat(r).filter(Boolean),i=[].concat(i).filter(Boolean),{inputProp:r,outputProp:i,convert:n,condition:o}}(e,t)).filter(Boolean),function(t){const r={};for(const{inputProp:i,outputProp:n,convert:o,condition:s}of e){if(0===n.length)continue;if(s&&!s(t))continue;if(0!==i.length&&i.every(e=>!(e in t)))continue;let e=i.map(e=>t[e]);if(o)try{const r=o.apply(t,e);e=1===n.length?[r]:r}catch(e){throw new Error(`Failed to convert ${i} to ${n}`,{cause:e})}n.forEach((t,i)=>{const n=e[i];void 0!==n&&(r[t]=n)})}return r}}class Fh{constructor(e){this.convertToSource=zh(e,Fh.CONVERT_TO_SOURCE),this.convertToTarget=zh(e,Fh.CONVERT_TO_TARGET)}}Fh.CONVERT_TO_SOURCE=Symbol("convert to source"),Fh.CONVERT_TO_TARGET=Symbol("convert to target");class jh{constructor(e,t={}){this.options=Object.assign({generateGraph:!0,forceType:Dp(e),maxChainLength:10,strict:!0,target:"@csl/list+object"},t),this.type=this.options.forceType,this.data="object"==typeof e?Ih(e):e,this.graph=[{type:this.type,data:e}],this.iteration=0}iterate(){if(0!==this.iteration){const e=bh(this.type);e&&e.outputs?this.type=e.outputs:this.type=Dp(this.data),this.graph.push({type:this.type})}return!this.error&&this.type!==this.options.target&&(this.iteration>=this.options.maxChainLength?(this.error=new RangeError(`Max. number of parsing iterations reached (${e=this.graph,e.reduce((e,t)=>{const r=e[e.length-1];return r&&r.type===t.type?r.count=r.count+1||2:e.push(t),e},[]).map(e=>(e.count>1?e.count+"x ":"")+e.type).join(" -> ")})`),!1):(this.iteration++,!0));var e}end(){if(this.error){if(Ip.error("[core]",this.error.message),!1!==this.options.strict)throw this.error;return[]}return"@csl/list+object"===this.options.target?Th(this.data).map(this.options.generateGraph?e=>Tp(e,this.graph):Ep):this.data}}const Hh=(...e)=>{const t=new jh(...e);for(;t.iterate();)try{t.data=uh(t.data,t.type)}catch(e){t.error=e}return t.end()},qh=e=>{const t=Dp(e);return uh(t.match(/array|object/)?Ih(e):e,t)},Uh=async(...e)=>{const t=new jh(...e);for(;t.iterate();)t.data=await dh(t.data,t.type).catch(e=>{t.error=e});return t.end()},Gh=async e=>{const t=Dp(e);return dh(t.match(/array|object/)?Ih(e):e,t)},Wh=Object.assign({},o,s,a,l);function Vh(e,t={},r=!1){return!0!==t&&!0!==r||this.save(),this.data.push(...Hh(e,t)),this.data.filter(e=>!Object.prototype.hasOwnProperty.call(e,"id")).forEach(e=>{e.id=Bh(this.getIds(),"temp_id_")}),this}async function Kh(e,t={},r=!1){return!0!==t&&!0!==r||this.save(),this.data.push(...await Uh(e,t)),this.data.filter(e=>!Object.prototype.hasOwnProperty.call(e,"id")).forEach(e=>{e.id=Bh(this.getIds(),"temp_id_")}),this}function $h(e,t={},r=!1){return!0!==t&&!0!==r||this.save(),this.data=[],"boolean"!=typeof t?this.add(e,t):this.add(e)}async function Yh(e,t={},r=!1){return!0!==t&&!0!==r||this.save(),this.data=[],"boolean"!=typeof t?this.addAsync(e,t):this.addAsync(e)}function Jh(e){return e&&this.save(),this.data=[],this._options={},this}function Xh(e){if("citation-label"in e)return e["citation-label"];let t="";return e.author&&(t+=e.author[0].family||e.author[0].literal),e.issued&&e.issued["date-parts"]&&e.issued["date-parts"][0]&&(t+=e.issued["date-parts"][0][0]),e["year-suffix"]?t+=e["year-suffix"]:e.title&&(t+=e.title.replace(/<\/?.*?>/g,"").match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),t}var Zh={label(e){return e.reduce((e,t)=>(e[t.id]=Xh(t),e),{})}};function Qh(e,t,r="label"===t){let i=r?Xh(e):e[t];switch(t){case"author":case"editor":return i.map(e=>e.literal||e.family||(0,Gp.GP)(e));case"accessed":case"issued":return i["date-parts"][0];case"page":return i.split("-").map(e=>parseInt(e));case"edition":case"issue":case"volume":return i=parseInt(i),isNaN(i)?-1/0:i;default:return i||-1/0}}function ef(e,t,r,i=/^!/.test(r)){const n=Qh(e,r=r.replace(/^!/,"")),o=Qh(t,r);return(i?-1:1)*(n>o?1:n<o?-1:0)}function tf(e=[],t){return t&&this.save(),this.data.sort("function"==typeof e?e:function(...e){return(t,r)=>{const i=e.slice();let n=0;for(;!n&&i.length;)n=ef(t,r,i.shift());return n}}(...e,"label")),this}const rf=new Mh;function nf(e,t){!function(e,t){if("string"!=typeof e)throw new TypeError("Invalid output format name, expected string, got "+typeof e);if("function"!=typeof t)throw new TypeError("Invalid formatter, expected function, got "+typeof t)}(e,t),rf.set(e,t)}function of(e){rf.remove(e)}function sf(e){return rf.has(e)}function af(){return rf.list()}function lf(e,t,...r){if(!rf.has(e))throw new Error(`Output format "${e}" unavailable`);return rf.get(e)(t,...r)}function cf(){return this.data.map(e=>e.id)}function uf(e,...t){return lf(e,nh(this.data),...t)}function df(e={}){yp(e);const t=Object.assign({},this.defaultOptions,this._options.output,e),{type:r,style:i}=t,[n,o]=i.split("-"),s="citation"===n?"bibliography":"csl"===n?"data":n,a="string"===r?"text":"json"===r?"object":r;let l;switch(s){case"bibliography":{const{lang:e,append:r,prepend:i}=t;l={template:o,lang:e,format:a,append:r,prepend:i};break}case"data":case"bibtex":case"bibtxt":case"ndjson":case"ris":l={type:a};break;default:throw new Error(`Invalid style "${s}"`)}const c=this.format(s,Object.assign(l,e._newOptions)),{format:u}=t;if("real"===u&&"html"===a&&"undefined"!=typeof document&&"function"==typeof document.createElement){const e=document.createElement("div");return e.innerHTML=c,e.firstChild}return"string"===u&&"object"==typeof c?JSON.stringify(c):c}var mf=function(e,t,r){"function"!=typeof t||r||(r=t,t=void 0);const i=(new this).setAsync(e,t);return"function"==typeof r?void i.then(r):i};function pf(e,t={}){return this instanceof pf?(this._options=t,this.log=[],this.data=[],this.set(e,t),this.options(t),this):new pf(e,t)}Object.assign(pf.prototype,i,n,u,d,p),pf.prototype[Symbol.iterator]=function*(){yield*this.data},Object.assign(pf,h);var hf=pf;const ff=new Mh({html:{bibliographyContainer:['<div class="csl-bib-body">',"</div>"],entry:['<div class="csl-entry">',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["","\n"],entry:["","\n"],list:["\n",""],listItem:["\t","\n"]}});function gf(e,t){!function(e,t){if("string"!=typeof e)throw new TypeError("Invalid dict name, expected string, got "+typeof e);if("object"!=typeof t)throw new TypeError("Invalid dict, expected object, got "+typeof t);for(const e in t){const r=t[e];if(!Array.isArray(r)||r.some(e=>"string"!=typeof e))throw new TypeError(`Invalid dict entry "${e}", expected array of strings`)}}(e,t),ff.set(e,t)}function vf(e){ff.remove(e)}function bf(e){return ff.has(e)}function yf(){return ff.list()}function _f(e){if(!ff.has(e))throw new Error(`Dict "${e}" unavailable`);return ff.get(e)}const xf={wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"},wf={wr_start:"",wr_end:"\n",en_start:"",en_end:"\n",ul_start:"\n",ul_end:"",li_start:"\t",li_end:"\n"},Cf={};function kf(e,t){Cf[e]=t}function Tf(e){return Cf[e]}function Ef(e){return Object.prototype.hasOwnProperty.call(Cf,e)}function Sf(e){delete Cf[e]}function If(){return Object.keys(Cf)}const Af={input:c,output:m,dict:f,config:g},Of={};function Nf(e,t={}){const r=Of[e]={};for(const i in t){if("config"===i){r.config={[e]:t.config},Af.config.add(e,t.config);continue}const n=r[i]={},o=t[i];for(const e in o){const t=o[e];n[e]=!0,Af[i].add(e,t)}}}function Rf(){return[]}const Pf=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']];function Df(e){if("string"!=typeof e)return JSON.parse(e);try{return JSON.parse(e)}catch(t){return Ip.debug("[plugin-common]","Invalid JSON, switching to experimental parser"),Pf.forEach(([t,r])=>{e=e.replace(t,r)}),JSON.parse(e)}}function Bf(e){return e.val()||e.text()||e.html()}function Mf(e){return e.value||e.textContent}const Lf={"@empty/text":{parse:Rf,parseType:{dataType:"String",predicate:e=>""===e}},"@empty/whitespace+text":{parse:Rf,parseType:{dataType:"String",predicate:/^\s+$/}},"@empty":{parse:Rf,parseType:{dataType:"Primitive",predicate:e=>null==e}},"@else/json":{parse:Df,parseType:{dataType:"String",predicate:/^\s*(\{[\S\s]*\}|\[[\S\s]*\])\s*$/}},"@else/url":{parseType:{dataType:"String",predicate:/^https?:\/\/(([\w-]+\.)*[\w-]+)(:\d+)?(\/[^?/]*)*(\?[^#]*)?(#.*)?$/i}},"@else/jquery":{parse:Bf,parseType:{dataType:"ComplexObject",predicate(e){return"undefined"!=typeof jQuery&&e instanceof jQuery}}},"@else/html":{parse:Mf,parseType:{dataType:"ComplexObject",predicate(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}}}};function zf(e,t,r){return e+(t<r.length-1?",":"")}function Ff(e,t){const r=Array.isArray(e);let i;return i=r?e.map(e=>jf(e,t)):Object.keys(e).filter(t=>JSON.stringify(e[t])).map(r=>`"${r}": ${jf(e[r],t)}`),i=i.map(zf).map(e=>t.listItem.join(e)),i=t.list.join(i.join("")),r?`[${i}]`:`{${i}}`}function jf(e,t){return"object"==typeof e&&null!==e?0===e.length?"[]":0===Object.keys(e).length?"{}":Ff(e,t):JSON.stringify(e)}var Hf={data(e,{type:t,format:r=t||"text",version:i="1.0.2"}={}){return i<"1.0.2"&&(e=Eh(e)),"object"===r?Ih(e):"text"===r?JSON.stringify(e,null,2):(Ip.warn("[core]","This feature (JSON output with special formatting) is unstable. See https://github.com/larsgw/citation.js/issues/144"),function(e,t){let r=e.map(e=>Ff(e,t));return r=r.map(zf).map(e=>t.entry.join(e)),r=r.join(""),t.bibliographyContainer.join(`[${r}]`)}(e,_f(r)))},ndjson(e,{version:t="1.0.2"}={}){return t<"1.0.2"&&(e=Eh(e)),e.map(e=>JSON.stringify(e)).join("\n")}};Nf("@else",{input:Lf,output:Object.assign({},Hf,Zh)});var qf=r(70887),Uf=r.n(qf),Gf=JSON.parse('{"source":{"article":"article-journal","book":"book","mvbook":"book","inbook":"chapter","bookinbook":"book","booklet":"book","collection":"book","mvcollection":"book","incollection":"chapter","dataset":"dataset","manual":"report","misc":"document","online":"webpage","patent":"patent","periodical":"periodical","proceedings":"book","mvproceedings":"book","inproceedings":"paper-conference","reference":"book","mvreference":"book","inreference":"entry","report":"report","software":"software","thesis":"thesis","unpublished":"manuscript","artwork":"graphic","audio":"song","image":"figure","jurisdiction":"legal_case","legislation":"legislation","legal":"treaty","letter":"personal_communication","movie":"motion_picture","music":"musical_score","performance":"performance","review":"review","standard":"standard","video":"motion_picture","conference":"paper-conference","electronic":"webpage","mastersthesis":"thesis","phdthesis":"thesis","techreport":"report","www":"webpage"},"target":{"article":"article","article-journal":"article","article-magazine":"article","article-newspaper":"article","bill":"legislation","book":"book","broadcast":"audio","chapter":"inbook","classic":"unpublished","collection":"misc","dataset":"dataset","document":"misc","entry":"inreference","entry-dictionary":"inreference","entry-encyclopedia":"inreference","event":"misc","figure":"artwork","graphic":"artwork","hearing":"legal","interview":"audio","legal_case":"jurisdiction","legislation":"legislation","manuscript":"unpublished","motion_picture":"movie","musical_score":"music","paper-conference":"inproceedings","patent":"patent","performance":"performance","periodical":"periodical","personal_communication":"letter","post":"online","post-weblog":"online","regulation":"legal","report":"report","review":"review","review-book":"review","software":"software","song":"music","speech":"audio","standard":"standard","thesis":"thesis","treaty":"legal","webpage":"online"}}'),Wf=JSON.parse('{"source":{"article":"article-journal","book":"book","booklet":"book","conference":"paper-conference","inbook":"chapter","incollection":"chapter","inproceedings":"paper-conference","manual":"report","mastersthesis":"thesis","misc":"document","phdthesis":"thesis","proceedings":"book","techreport":"report","unpublished":"manuscript"},"target":{"article":"article","article-journal":"article","article-magazine":"article","article-newspaper":"article","book":"book","chapter":"inbook","manuscript":"unpublished","paper-conference":"inproceedings","report":"techreport","review":"article","review-book":"article"}}'),Vf=JSON.parse('{"biblatex":{"article":["author","title","journaltitle",["year","date"]],"book":["author","title",["year","date"]],"mvbook":["author","title",["year","date"]],"inbook":["author","title","booktitle",["year","date"]],"booklet":[["author","editor"],"title",["year","date"]],"collection":["editor","title",["year","date"]],"mvcollection":["editor","title",["year","date"]],"incollection":["author","title","booktitle",["year","date"]],"dataset":[["author","editor"],"title",["year","date"]],"online":[["author","editor"],"title",["year","date"],["doi","eprint","url"]],"patent":["author","title","number",["year","date"]],"periodical":["editor","title",["year","date"]],"proceedings":["title",["year","date"]],"mvproceedings":["title",["year","date"]],"inproceedings":["author","title","booktitle",["year","date"]],"report":["author","title","type","institution",["year","date"]],"thesis":["author","title","type","institution",["year","date"]],"unpublished":["author","title",["year","date"]],"conference":["author","title","booktitle",["year","date"]],"electronic":[["author","editor"],"title",["year","date"],["doi","eprint","url"]],"mastersthesis":["author","title","institution",["year","date"]],"phdthesis":["author","title","institution",["year","date"]],"techreport":["author","title","institution",["year","date"]],"www":[["author","editor"],"title",["year","date"],["doi","eprint","url"]]},"bibtex":{"article":["author","title","journal","year"],"book":[["author","editor"],"title","publisher","year"],"booklet":["title"],"inbook":[["author","editor"],"title",["chapter","pages"],"publisher","year"],"incollection":["author","title","booktitle","publisher","year"],"inproceedings":["author","title","booktitle","year"],"mastersthesis":["author","title","school","year"],"phdthesis":["author","title","school","year"],"proceedings":["title","year"],"techreport":["author","title","institution","year"],"unpublished":["author","title","note"]}}'),Kf=JSON.parse('{"abstract":["field","literal"],"addendum":["field","literal"],"afterword":["list","name"],"annotation":["field","literal"],"annotator":["list","name"],"author":["list","name"],"authortype":["field","key"],"bookauthor":["list","name"],"bookpagination":["field","key"],"booksubtitle":["field","literal"],"booktitle":["field","title"],"booktitleaddon":["field","literal"],"chapter":["field","literal"],"commentator":["list","name"],"date":["field","date"],"doi":["field","verbatim"],"edition":["field","literal"],"editor":["list","name"],"editora":["list","name"],"editorb":["list","name"],"editorc":["list","name"],"editortype":["field","key"],"editoratype":["field","key"],"editorbtype":["field","key"],"editorctype":["field","key"],"eid":["field","literal"],"entrysubtype":["field","literal"],"eprint":["field","verbatim"],"eprintclass":["field","literal"],"eprinttype":["field","literal"],"eventdate":["field","date"],"eventtitle":["field","title"],"eventtitleaddon":["field","literal"],"file":["field","verbatim"],"foreword":["list","name"],"holder":["list","name"],"howpublished":["field","literal"],"indextitle":["field","literal"],"institution":["list","literal"],"introduction":["list","name"],"isan":["field","literal"],"isbn":["field","literal"],"ismn":["field","literal"],"isrn":["field","literal"],"issn":["field","literal"],"issue":["field","literal"],"issuesubtitle":["field","literal"],"issuetitle":["field","literal"],"iswc":["field","literal"],"journalsubtitle":["field","literal"],"journaltitle":["field","literal"],"label":["field","literal"],"language":["list","key"],"library":["field","literal"],"location":["list","literal"],"mainsubtitle":["field","literal"],"maintitle":["field","title"],"maintitleaddon":["field","literal"],"month":["field","literal"],"nameaddon":["field","literal"],"note":["field","literal"],"number":["field","literal"],"organization":["list","literal"],"origdate":["field","date"],"origlanguage":["list","key"],"origlocation":["list","literal"],"origpublisher":["list","literal"],"origtitle":["field","title"],"pages":["field","range"],"pagetotal":["field","literal"],"pagination":["field","key"],"part":["field","literal"],"publisher":["list","literal"],"pubstate":["field","key"],"reprinttitle":["field","literal"],"series":["field","title"],"shortauthor":["list","name"],"shorteditor":["list","name"],"shorthand":["field","literal"],"shorthandintro":["field","literal"],"shortjournal":["field","literal"],"shortseries":["field","literal"],"shorttitle":["field","title"],"subtitle":["field","literal"],"title":["field","title"],"titleaddon":["field","literal"],"translator":["list","name"],"type":["field","title"],"url":["field","uri"],"urldate":["field","date"],"venue":["field","literal"],"version":["field","literal"],"volume":["field","integer"],"volumes":["field","integer"],"year":["field","literal"],"crossref":["field","entry key"],"entryset":["separated","literal"],"execute":["field","code"],"gender":["field","gender"],"langid":["field","identifier"],"langidopts":["field","literal"],"ids":["separated","entry key"],"indexsorttitle":["field","literal"],"keywords":["separated","literal"],"options":["separated","options"],"presort":["field","string"],"related":["separated","literal"],"relatedoptions":["separated","literal"],"relatedtype":["field","identifier"],"relatedstring":["field","literal"],"sortkey":["field","literal"],"sortname":["list","name"],"sortshorthand":["field","literal"],"sorttitle":["field","literal"],"sortyear":["field","integer"],"xdata":["separated","entry key"],"xref":["field","entry key"],"namea":["list","name"],"nameb":["list","name"],"namec":["list","name"],"nameatype":["field","key"],"namebtype":["field","key"],"namectype":["field","key"],"lista":["list","literal"],"listb":["list","literal"],"listc":["list","literal"],"listd":["list","literal"],"liste":["list","literal"],"listf":["list","literal"],"usera":["field","literal"],"userb":["field","literal"],"userc":["field","literal"],"userd":["field","literal"],"usere":["field","literal"],"userf":["field","literal"],"verba":["field","literal"],"verbb":["field","literal"],"verbc":["field","literal"],"address":["list","literal"],"annote":["field","literal"],"archiveprefix":["field","literal"],"journal":["field","literal"],"key":["field","literal"],"pdf":["field","verbatim"],"primaryclass":["field","literal"],"school":["list","literal"],"numpages":["field","integer"],"pmid":["field","literal"],"pmcid":["field","literal"]}'),$f=JSON.parse('{"SN":{"`":"̀","\'":"́","^":"̂","~":"̃","=":"̄","u":"̆",".":"̇","\\"":"̈","r":"̊","H":"̋","v":"̌","b":"̲","d":"̣","c":"̧","k":"̨","t":"͡","textcommabelow":"̦"},"Pi":{"textquotesingle":"\'","textasciigrave":"`","textquotedbl":"\\"","textdollar":"$","textless":"<","textgreater":">","textbackslash":"\\\\","textasciicircum":"^","textunderscore":"_","textbraceleft":"{","textbar":"|","textbraceright":"}","textasciitilde":"~","textexclamdown":"¡","textcent":"¢","textsterling":"£","textcurrency":"¤","textyen":"¥","textbrokenbar":"¦","textsection":"§","textasciidieresis":"¨","textcopyright":"©","textordfeminine":"ª","guillemetleft":"«","guillemotleft":"«","textlnot":"¬","textregistered":"®","textasciimacron":"¯","textdegree":"°","textpm":"±","texttwosuperior":"²","textthreesuperior":"³","textasciiacute":"´","textmu":"µ","textparagraph":"¶","textperiodcentered":"·","textonesuperior":"¹","textordmasculine":"º","guillemetright":"»","guillemotright":"»","textonequarter":"¼","textonehalf":"½","textthreequarters":"¾","textquestiondown":"¿","AE":"Æ","DH":"Ð","texttimes":"×","O":"Ø","TH":"Þ","ss":"ß","ae":"æ","dh":"ð","textdiv":"÷","o":"ø","th":"þ","DJ":"Đ","dj":"đ","i":"ı","IJ":"Ĳ","ij":"ĳ","L":"Ł","l":"ł","NG":"Ŋ","ng":"ŋ","OE":"Œ","oe":"œ","textflorin":"ƒ","j":"ȷ","textasciicaron":"ˇ","textasciibreve":"˘","textacutedbl":"˝","textgravedbl":"˵","texttildelow":"˷","textbaht":"฿","SS":"ẞ","textcompwordmark":"‌","textendash":"–","textemdash":"—","textbardbl":"‖","textquoteleft":"‘","textquoteright":"’","quotesinglbase":"‚","textquotedblleft":"“","textquotedblright":"”","quotedblbase":"„","textdagger":"†","textdaggerdbl":"‡","textbullet":"•","textellipsis":"…","textperthousand":"‰","textpertenthousand":"‱","guilsinglleft":"‹","guilsinglright":"›","textreferencemark":"※","textinterrobang":"‽","textfractionsolidus":"⁄","textlquill":"⁅","textrquill":"⁆","textdiscount":"⁒","textcolonmonetary":"₡","textlira":"₤","textnaira":"₦","textwon":"₩","textdong":"₫","texteuro":"€","textpeso":"₱","textcelsius":"℃","textnumero":"№","textcircledP":"℗","textrecipe":"℞","textservicemark":"℠","texttrademark":"™","textohm":"Ω","textmho":"℧","textestimated":"℮","textleftarrow":"←","textuparrow":"↑","textrightarrow":"→","textdownarrow":"↓","textminus":"−","Hwithstroke":"Ħ","hwithstroke":"ħ","textasteriskcentered":"∗","textsurd":"√","textlangle":"〈","textrangle":"〉","textblank":"␢","textvisiblespace":"␣","textopenbullet":"◦","textbigcircle":"◯","textmusicalnote":"♪","textmarried":"⚭","textdivorced":"⚮","textinterrobangdown":"⸘","textcommabelow":null,"copyright":"©"},"vl":{"Gamma":"Γ","Delta":"Δ","Theta":"Θ","Lambda":"Λ","Xi":"Ξ","Pi":"Π","Sigma":"Σ","Phi":"Φ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","varepsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","pi":"π","rho":"ρ","varsigma":"ς","sigma":"σ","tau":"τ","upsilon":"υ","varphi":"φ","chi":"χ","psi":"ψ","omega":"ω","vartheta":"ϑ","Upsilon":"ϒ","phi":"ϕ","varpi":"ϖ","varrho":"ϱ","epsilon":"ϵ"}}');const Yf=Vf,Jf=Kf,Xf=$f.SN,Zf=$f.Pi,Qf=$f.vl,eg={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",acmcs:"ACM Computing Surveys",acta:"Acta Informatica",cacm:"Communications of the ACM",ibmjrd:"IBM Journal of Research and Development",ibmsj:"IBM Systems Journal",ieeese:"IEEE Transactions on Software Engineering",ieeetc:"IEEE Transactions on Computers",ieeetcad:"IEEE Transactions on Computer-Aided Design of Integrated Circuits",ipl:"Information Processing Letters",jacm:"Journal of the ACM",jcss:"Journal of Computer and System Sciences",scp:"Science of Computer Programming",sicomp:"SIAM Journal on Computing",tocs:"ACM Transactions on Computer Systems",tods:"ACM Transactions on Database Systems",tog:"ACM Transactions on Graphics",toms:"ACM Transactions on Mathematical Software",toois:"ACM Transactions on Office Information Systems",toplas:"ACM Transactions on Programming Languages and Systems",tcs:"Theoretical Computer Science"},tg={it:"italics",itshape:"italics",sl:"italics",slshape:"italics",em:"italics",bf:"bold",bfseries:"bold",sc:"smallcaps",scshape:"smallcaps",rm:void 0,sf:void 0,tt:void 0},rg={textit:"italics",textsl:"italics",emph:"italics",mkbibitalic:"italics",mkbibemph:"italics",textbf:"bold",strong:"bold",mkbibbold:"bold",textsc:"smallcaps",textsuperscript:"superscript",textsubscript:"subscript",enquote:"quotes",mkbibquote:"quotes",textmd:void 0,textrm:void 0,textsf:void 0,texttt:void 0,textup:void 0},ig={italics:["<i>","</i>"],bold:["<b>","</b>"],superscript:["<sup>","</sup>"],subscript:["<sub>","</sub>"],smallcaps:['<span style="font-variant:small-caps;">',"</span>"],nocase:['<span class="nocase">',"</span>"],quotes:["“","”"]},ng={ElsevierGlyph(e){return String.fromCharCode(parseInt(e,16))},href(e,t){return e},url(e){return e}},og=/---?|''|``|~/g,sg={"--":"–","---":"—","``":"“","''":"”","~":" "},ag={"^":"superscript",sp:"superscript",_:"subscript",sb:"subscript",mathrm:void 0},lg={"^":{0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻","=":"⁼","(":"⁽",")":"⁾",i:"ⁱ",n:"ⁿ"},_:{0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉","+":"₊","-":"₋","=":"₌","(":"₍",")":"₎",a:"ₐ",e:"ₑ",o:"ₒ",x:"ₓ","ə":"ₔ",h:"ₕ",k:"ₖ",l:"ₗ",m:"ₘ",n:"ₙ",s:"ₚ",p:"ₛ",t:"ₜ"}},cg=["american","british","canadian","english","australian","newzealand","usenglish","ukenglish","en","eng","en-au","en-bz","en-ca","en-cb","en-gb","en-ie","en-jm","en-nz","en-ph","en-tt","en-us","en-za","en-zw","anglais"];var ug={constants:x,types:{biblatex:Gf,bibtex:Wf},parse:{biblatex:!0,strict:!1,sentenceCase:"never"},format:{useIdAsLabel:!1,checkLabel:!0,asciiOnly:!0},biber:{annotationMarker:"+an",namedAnnotationMarker:":"}};function dg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function mg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(r),!0).forEach(function(t){pg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pg(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const hg=/[a-zA-Z_][a-zA-Z0-9_:+-]*/,fg={comment:/%.*/,whitespace:{match:/\s+/,lineBreaks:!0}},gg=Uf().states({main:{junk:{match:/@[cC][oO][mM][mM][eE][nN][tT].+|[^@]+/,lineBreaks:!0},at:{match:"@",push:"entry"}},entry:mg(mg({},fg),{},{otherEntryType:{match:/[sS][tT][rR][iI][nN][gG]|[pP][rR][eE][aA][mM][bB][lL][eE]/,next:"otherEntryContents"},dataEntryType:{match:hg,next:"dataEntryContents"}}),otherEntryContents:mg(mg({},fg),{},{lbrace:{match:/[{(]/,next:"fields"}}),dataEntryContents:mg(mg({},fg),{},{lbrace:{match:/[{(]/,next:"dataEntryContents"},label:/[^,\s]+/,comma:{match:",",next:"fields"}}),fields:mg(mg({},fg),{},{identifier:hg,number:/-?\d+/,hash:"#",equals:"=",comma:",",quote:{match:'"',push:"quotedLiteral"},lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:/[})]/,pop:!0}}),quotedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},quote:{match:'"',pop:!0},text:{match:/(?:\\[\\{]|[^{"])+/,lineBreaks:!0}},bracedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:"}",pop:!0},text:{match:/(?:\\[\\{}]|[^{}])+/,lineBreaks:!0}}}),vg={"(":")","{":"}"},bg=new Lh({Main(){const e=[];for(;;){for(;this.matchToken("junk");)this.consumeToken("junk");if(this.matchEndOfFile())break;e.push(this.consumeRule("Entry"))}return e.filter(Boolean)},_(){let e;for(;e!==this.token;)e=this.token,this.consumeToken("whitespace",!0),this.consumeToken("comment",!0)},Entry(){this.consumeToken("at"),this.consumeRule("_");const e=(this.matchToken("otherEntryType")?this.consumeToken("otherEntryType"):this.consumeToken("dataEntryType")).value.toLowerCase();this.consumeRule("_");const t=this.consumeToken("lbrace").value;let r;if(this.consumeRule("_"),"string"===e){const[e,t]=this.consumeRule("Field");this.state.strings[e]=t}else if("preamble"===e)this.consumeRule("Expression");else{const t=this.consumeToken("label").value;this.consumeRule("_"),this.consumeToken("comma"),this.consumeRule("_"),r=mg({type:e,label:t},this.consumeRule("EntryBody"))}this.consumeRule("_");const i=this.consumeToken("rbrace").value;return i!==vg[t]&&Ip.warn("[plugin-bibtex]",`entry started with "${t}", but ends with "${i}"`),r},EntryBody(){const e={properties:{}};for(;this.matchToken("identifier");){const[t,r]=this.consumeRule("Field");let i,n="default";if(t.endsWith(ug.biber.annotationMarker)?i=t.slice(0,-ug.biber.annotationMarker.length):t.includes(ug.biber.annotationMarker+ug.biber.namedAnnotationMarker)&&([i,n]=t.split(ug.biber.annotationMarker+ug.biber.namedAnnotationMarker)),i?(e.annotations||(e.annotations={}),e.annotations[i]||(e.annotations[i]={}),e.annotations[i][n]=r):e.properties[t]=r,this.consumeRule("_"),!this.consumeToken("comma",!0))break;this.consumeRule("_")}return e},Field(){const e=this.consumeToken("identifier").value.toLowerCase();return this.consumeRule("_"),this.consumeToken("equals"),this.consumeRule("_"),[e,this.consumeRule("Expression")]},Expression(){let e=this.consumeRule("ExpressionPart");for(this.consumeRule("_");this.matchToken("hash");)this.consumeToken("hash"),this.consumeRule("_"),e+=this.consumeRule("ExpressionPart").toString(),this.consumeRule("_");return e},ExpressionPart(){return this.matchToken("identifier")?this.state.strings[this.consumeToken("identifier").value.toLowerCase()]||"":this.matchToken("number")?parseInt(this.consumeToken("number")):this.matchToken("quote")?this.consumeRule("QuoteString"):this.consumeRule("BracketString")},QuoteString(){let e="";for(this.consumeToken("quote");!this.matchToken("quote");)e+=this.consumeRule("Text");return this.consumeToken("quote"),e},BracketString(){let e="";for(this.consumeToken("lbrace");!this.matchToken("rbrace");)e+=this.consumeRule("Text");return this.consumeToken("rbrace"),e},Text(){return this.matchToken("lbrace")?`{${this.consumeRule("BracketString")}}`:this.consumeToken("text").value}},{strings:eg});function yg(e){return bg.parse(gg.reset(e))}const _g=/\n\s*(?=\[)/g,xg=/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,wg=/((?=.)\s)*\n\s*/g,Cg=/:(.*)/,kg=e=>{const[,t,r]=e.match(xg)||[];if(t&&r){const e={type:"book",label:t,properties:{}};return r.trim().split(wg).filter(e=>e).forEach(t=>{let[r,i]=t.split(Cg);i&&(r=r.trim(),i=i.trim(),"type"===r?e.type=i:e.properties[r]=i)}),e}return{}},Tg=new Set(["the","a","an"]),Eg=/(?:<\/?.*?>|[\u0020-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007F])+/g,Sg=/[^\u0020-\u007F]+/g;function Ig(e){return null===e?"null":void 0===e?"undefined":ug.format.checkLabel?e.toString().replace(Eg,""):e.toString()}function Ag(e){return e?e.normalize("NFKD").replace(Sg,"").split(Eg).find(e=>e.length&&!Tg.has(e.toLowerCase())):""}const Og=new Fh([{source:"given",target:"given"},{source:"family",target:"family"},{source:"suffix",target:"suffix"},{source:"prefix",target:"non-dropping-particle"},{source:"family",target:"literal",when:{source:!1,target:{family:!1,given:!1}}}]),Ng=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Rg="BibTeX type",Pg="BibTeX label",Dg={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Bg={bathesis:"Bachelor's thesis",mathesis:"Master's thesis",phdthesis:"PhD thesis",candthesis:"Candidate thesis",techreport:"technical report",resreport:"research report",software:"computer software",datacd:"data cd",audiocd:"audio cd",patent:"patent",patentde:"German patent",patenteu:"European patent",patentfr:"French patent",patentuk:"British patent",patentus:"U.S. patent",patreq:"patent request",patreqde:"German patent request",patreqeu:"European patent request",patreqfr:"French patent request",patrequk:"British patent request",patrequs:"U.S. patent request"},Mg=/(^(?:ISAN )?(?:[0-9a-f]{4}-){4}[0-9a-z](?:-(?:[0-9a-f]{4}-){2}[0-9a-z])?$)|(^(?:979-?0-?|M-?)(?:\d{9}|(?=[\d-]{11}$)\d+-\d+-\d)$)|(^ISRN .{1,36}$)|(^(?:ISWC )?T-?\d{9}-?\d$)/i;function Lg(e){if(null==e)return[];if(+e)return[parseInt(e,10)];if((e=e.trim().toLowerCase())in Dg)return[Dg[e]];const t=e.split(/\s+/);let r,i;return t[0]in Dg?(r=Dg[t[0]],i=parseInt(t[1])):t[1]in Dg&&(r=Dg[t[1]],i=parseInt(t[0])),i?[r,i]:r?[r]:[]}const zg={PICK:{toTarget(...e){return e.find(Boolean)},toSource(e){return[e]}},DATE:{toTarget(e){const t=e.split("/").map(e=>e&&".."!==e?function(e){const t=e.split("T")[0].replace(/[?~%]$/,"").split("-"),r=+t[0].replace(/^Y(?=-?\d{4}\d+)/,"").replace(/X/g,"0"),i=+t[1],n=+t[2];return!i||i>20?[r]:n?[r,i,n]:[r,i]}(e):void 0);return isNaN(t[0][0])?{literal:e}:{"date-parts":t}},toSource(e){if("date-parts"in e)return e["date-parts"].map(e=>e.map(e=>e.toString().padStart(2,"0")).join("-")).join("/")}},YEAR_MONTH:{toTarget(e,t,r){return isNaN(+e)?{literal:e}:isNaN(+r)||isNaN(+t)?{"date-parts":[[+e,...Lg(t)]]}:{"date-parts":[[+e,+t,+r]]}},toSource(e){if("date-parts"in e){const[t,r,i]=e["date-parts"][0];return[t.toString(),r?i?`${Ng[r-1]} ${i}`:r:void 0]}return[]}},EPRINT:{toTarget(e,t){if("pubmed"===t)return e},toSource(e){return[e,"pubmed"]}},EVENT_TITLE:{toTarget(e,t){return t&&(e+=" ("+t+")"),e},toSource(e){return e.match(/^(.+)(?: \((.+)\))?$/).slice(1,3)}},HOW_PUBLISHED:{toTarget(e){if(e.startsWith("http"))return e}},KEYWORDS:{toTarget(e){return e.join(",")},toSource(e){return e.split(",")}},LABEL:{toTarget(e){return[e,e]},toSource(e,t,r,i,n,o){return!t||(s=t,ug.format.checkLabel&&s.match(Eg))?ug.format.useIdAsLabel?Ig(e):function(e,t,r,i){let n="";return e&&e[0]&&(n+=Ag(e[0].family||e[0].literal)),t&&t["date-parts"]&&t["date-parts"][0]&&(n+=t["date-parts"][0][0]),r?n+=r:i&&(n+=Ag(i)),n}(r,i,n,o)||Ig(e):t;var s}},NAMES:{toTarget(e){return e.map(Og.convertToTarget)},toSource(e){return e.map(Og.convertToSource)}},NAMES_ORCID:{toTarget(e,t){return e.map((e,r)=>{var i;const n=Og.convertToTarget(e);return"string"==typeof(null==t||null===(i=t.item)||void 0===i?void 0:i[r])&&(n._orcid=t.item[r]),n})},toSource(e){const t=[],r=[];for(let i=0;i<e.length;i++)t.push(Og.convertToSource(e[i])),e[i]._orcid&&(r[i]=e[i]._orcid);return[t,r.length?{item:r}:void 0]}},PAGES:{toTarget(e){return e.replace(/[–—]/,"-")},toSource(e){return e.replace("-","--")}},STANDARD_NUMBERS:{toTarget(...e){return e.find(Boolean)},toSource(e){const t=e.toString().match(Mg);return t?t.slice(1,5):[]}},STATUS:{toSource(e){if(/^(inpreparation|submitted|forthcoming|inpress|prepublished)$/i.test(e))return e}},TITLE:{toTarget(e,t,r){return t&&(e+=": "+t),e},toSource(e){return[e]}}};var Fg=r(50311),jg=new Fh([{source:"annote",target:"annote",when:{source:{annotation:!1},target:!1}},{source:"address",target:"publisher-place",convert:zg.PICK,when:{source:{location:!1},target:!1}},{source:["eprint","archiveprefix"],target:"PMID",convert:zg.EPRINT,when:{source:{eprinttype:!1},target:!1}},{source:"journal",target:"container-title",when:{source:{maintitle:!1,booktitle:!1,journaltitle:!1},target:!1}},{source:"school",target:"publisher",convert:zg.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:!1}},{source:"note",target:"accessed",when:{source:!1,target:{note:!1,addendum:!1}},convert:{toSource(e){return`[Online; accessed ${(0,Fg.GP)(e)}]`}}},{source:"numpages",target:"number-of-pages",when:{source:{pagetotal:!1},target:!1}},{source:"pmid",target:"PMID",when:{source:{eprinttype(e){return"pmid"!==e},archiveprefix(e){return"pmid"!==e}},target:!1}},{source:"pmcid",target:"PMCID",when:{target:!1}},{source:"s2id",target:"custom",convert:{toTarget(e){return{S2ID:e}},toSource({S2ID:e}){return e}}},{source:"abstract",target:"abstract"},{source:"urldate",target:"accessed",convert:zg.DATE},{source:"annotation",target:"annote"},{source:["author","author+an:orcid"],target:"author",convert:zg.NAMES_ORCID},{source:"library",target:"call-number"},{source:"chapter",target:"chapter-number"},{source:"bookauthor",target:"container-author",convert:zg.NAMES},{source:["maintitle","mainsubtitle","maintitleaddon"],target:"container-title",when:{source:!0,target:{"number-of-volumes":!0}},convert:zg.TITLE},{source:["booktitle","booksubtitle","booktitleaddon"],target:"container-title",when:{source:{maintitle:!1},target:{"number-of-volumes":!1,type(e){return!e||!e.startsWith("article")}}},convert:zg.TITLE},{source:["journaltitle","journalsubtitle","journaltitleaddon"],target:"container-title",when:{source:{[Rg]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}},convert:zg.TITLE},{source:"shortjournal",target:"container-title-short",when:{source:{[Rg]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"shortjournal",target:"journalAbbreviation",when:{source:!1,target:{"container-title-short":!1}}},{source:"number",target:"collection-number",when:{source:{[Rg]:["book","mvbook","inbook","bookinbook","suppbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"shortseries",target:"collection-title-short"},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:zg.NAMES},{source:[Rg,"entrysubtype","type"],target:["type","genre"],convert:{toTarget(e,t,r){return r||("mastersthesis"===e&&(r="mathesis"),"phdthesis"===e&&(r="phdthesis"),"techreport"===e&&(r="techreport")),[Gf.source[e]||"document",r||t]},toSource(e,t){const r=Gf.target[e]||"misc";return t in Bg?[r,void 0,t]:[r,t]}}},{source:Rg,when:{target:{type:!1}},convert:{toSource(){return"misc"}}},{source:"eventdate",target:"event-date",convert:zg.DATE},{source:"venue",target:"event-place"},{source:["eventtitle","eventtitleaddon"],target:"event-title",convert:zg.EVENT_TITLE},{source:["eventtitle","eventtitleaddon"],target:"event",convert:zg.EVENT_TITLE,when:{source:!1,target:{"event-title":!1}}},{source:Pg,target:["id","citation-key","author","issued","year-suffix","title"],convert:zg.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"issue",target:"issue",when:{source:{number:!1,[Rg]:["article","periodical"]},target:{issue(e){return"string"==typeof e&&!e.match(/\d+/)},type:["article","article-journal","article-newspaper","article-magazine","periodical"]}}},{source:"number",target:"issue",when:{source:{[Rg]:["article","periodical","inproceedings"]},target:{issue(e){return e&&("number"==typeof e||e.match(/\d+/))},type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:"date",target:"issued",convert:zg.DATE},{source:["year","month","day"],target:"issued",convert:zg.YEAR_MONTH,when:{source:{date:!1},target:!1}},{source:"location",target:"jurisdiction",when:{source:{type:"patent"},target:{type:"patent"}}},{source:"keywords",target:"keyword",convert:zg.KEYWORDS},{source:"language",target:"language",convert:zg.PICK},{source:"langid",target:"language",when:{source:{language:!1},target:!1}},{source:"note",target:"note"},{source:"addendum",target:"note",when:{source:{note:!1},target:!1}},{source:"eid",target:"number",when:{target:{type:["article-journal"]}}},{source:["isan","ismn","isrn","iswc"],target:"number",convert:zg.STANDARD_NUMBERS,when:{source:{[Rg](e){return"patent"!==e}},target:{type(e){return"patent"!==e}}}},{source:"number",target:"number",when:{source:{[Rg]:["patent","report","techreport","legislation"]},target:{type:["patent","report","legislation"]}}},{source:"origdate",target:"original-date",convert:zg.DATE},{source:"origlocation",target:"original-publisher-place",convert:zg.PICK},{source:"origpublisher",target:"original-publisher",convert:zg.PICK},{source:"origtitle",target:"original-title"},{source:"pages",target:"page",when:{source:{bookpagination:[void 0,"page"]}},convert:zg.PAGES},{source:"pagetotal",target:"number-of-pages"},{source:"part",target:"part-number"},{source:["eprint","eprinttype"],target:"PMID",convert:zg.EPRINT},{source:"location",target:"publisher-place",convert:zg.PICK},{source:"publisher",target:"publisher",convert:zg.PICK,when:{source:!0,target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty"]}}},{source:"organization",target:"publisher",convert:zg.PICK,when:{source:{publisher:!1},target:{type:["paper-conference","webpage"]}}},{source:"institution",target:"publisher",convert:zg.PICK,when:{source:{publisher:!1,organization:!1},target:{type:["report","thesis"]}}},{source:"howpublished",target:"publisher",convert:zg.PICK,when:{source:{howpublished(e){return e&&!e.startsWith("http")},publisher:!1,organization:!1,institution:!1},target:{type:"manuscript"}}},{source:["pages","bookpagination"],target:"section",when:{source:{bookpagination:"section"},target:{page:!1}},convert:{toTarget(e){return e},toSource(e){return[e,"section"]}}},{source:"pubstate",target:"status",convert:zg.STATUS},{source:"shorttitle",target:"title-short"},{source:"shorttitle",target:"shortTitle",when:{source:!1,target:{"title-short":!1}}},{source:["title","subtitle","titleaddon"],target:"title",convert:zg.TITLE},{source:"translator",target:"translator",convert:zg.NAMES},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:zg.HOW_PUBLISHED,when:{source:{url:!1},target:!1}},{source:"version",target:"version"},{source:"volume",target:"volume"},{source:"volumes",target:"number-of-volumes"},{source:["issuetitle","issuesubtitle","issuetitleaddon"],target:"volume-title",convert:zg.TITLE}]),Hg=new Fh([{source:"note",target:"accessed",when:{source:!1,target:{note:!1}},convert:{toSource(e){return`[Online; accessed ${(0,Fg.GP)(e)}]`}}},{source:"annote",target:"annote"},{source:"address",target:"publisher-place",convert:zg.PICK},{source:"author",target:"author",convert:zg.NAMES},{source:"chapter",target:"chapter-number"},{source:"number",target:"collection-number",when:{source:{[Rg]:["book","mvbook","inbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"booktitle",target:"container-title",when:{target:{type:["chapter","paper-conference"]}}},{source:"journal",target:"container-title",when:{source:{[Rg]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:zg.NAMES},{source:Pg,target:["id","citation-key","author","issued","year-suffix","title"],convert:zg.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"number",target:"issue",when:{source:{[Rg]:["article","periodical","inproceedings"]},target:{issue(e){return"number"==typeof e||"string"==typeof e&&e.match(/\d+/)},type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:["year","month","day"],target:"issued",convert:zg.YEAR_MONTH},{source:"note",target:"note"},{source:"number",target:"number",when:{source:{[Rg]:["patent","report","techreport"]},target:{type:["patent","report"]}}},{source:"eid",target:"number",when:{source:{number:!1},target:{type:["article-journal"]}}},{source:"pages",target:"page",convert:zg.PAGES},{source:"publisher",target:"publisher",convert:zg.PICK,when:{target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty","webpage"]}}},{source:"organization",target:"publisher",convert:zg.PICK,when:{source:{publisher:!1},target:{type:"paper-conference"}}},{source:"institution",target:"publisher",convert:zg.PICK,when:{source:{publisher:!1,organization:!1},target:{type:"report"}}},{source:"school",target:"publisher",convert:zg.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:{type:"thesis"}}},{source:"howpublished",target:"publisher",convert:zg.PICK,when:{source:{howpublished(e){return e&&!e.startsWith("http")},publisher:!1,organization:!1,institution:!1,school:!1},target:{type:"manuscript"}}},{source:"title",target:"title"},{source:[Rg,"type"],target:["type","genre"],convert:{toTarget(e,t){const r=Wf.source[e]||"document";return t?[r,t]:"mastersthesis"===e?[r,"Master's thesis"]:"phdthesis"===e?[r,"PhD thesis"]:[r]},toSource(e,t){const r=Wf.target[e]||"misc";return/^(master'?s|diploma) thesis$/i.test(t)?["mastersthesis"]:/^(phd|doctoral) thesis$/i.test(t)?["phdthesis"]:[r,t]}}},{source:Rg,when:{target:{type:!1}},convert:{toSource(){return"misc"}}},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:zg.HOW_PUBLISHED,when:{target:{publisher:!1}}},{source:"volume",target:"volume"}]);function qg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function Ug(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Gg=new Set(["book","inbook","bookinbook","suppbook"]),Wg=new Set(["inbook","bookinbook","suppbook"]),Vg=new Set(["collection","reference","incollection","inreference","suppcollection"]),Kg=new Set(["incollection","inreference","suppcollection"]),$g=new Set(["proceedings","inproceedings"]),Yg=new Set(["inproceedings"]),Jg=new Set(["article","suppperiodical"]),Xg={mvbook:["main",Gg],mvcollection:["main",Vg],mvreference:["main",Vg],mvproceedings:["main",$g],book:["book",Wg],collection:["book",Kg],reference:["book",Kg],proceedings:["book",Yg],periodical:["journal",Jg]};function Zg(e,t,r){if(t.crossref in r){const i=r[t.crossref];if(i.properties===t)return t;const n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(r),!0).forEach(function(t){Ug(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Zg(i.type,i.properties,r));if(delete n.ids,delete n.crossref,delete n.xref,delete n.entryset,delete n.entrysubtype,delete n.execute,delete n.label,delete n.options,delete n.presort,delete n.related,delete n.relatedoptions,delete n.relatedstring,delete n.relatedtype,delete n.shortand,delete n.shortandintro,delete n.sortkey,"mvbook"!==i.type&&"book"!==i.type||!Wg.has(e)||(n.bookauthor=n.author),i.type in Xg){const[t,r]=Xg[i.type];r.has(e)&&(n[t+"title"]=n.title,n[t+"subtitle"]=n.subtitle,"journal"!==t&&(n[t+"titleaddon"]=n.titleaddon),delete n.title,delete n.subtitle,delete n.titleaddon,delete n.shorttitle,delete n.sorttitle,delete n.indextitle,delete n.indexsorttitle)}return Object.assign(n,t)}return t}function Qg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function ev(e,t,r){return(t=tv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tv(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function rv(e,t){const r={};for(const t of e)r[t.label]=t;return e.map(({type:e,label:i,properties:n})=>t.convertToTarget(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qg(Object(r),!0).forEach(function(t){ev(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({[Rg]:e,[Pg]:i},Zg(e,n,r))))}function iv(e,t){return e.map(e=>{const r=t.convertToSource(e),{[Rg]:i,[Pg]:n}=r;return{type:i,label:n,properties:function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(r,[Rg,Pg].map(tv))}})}function nv(e){const t=e.toUpperCase(),r=e.toLowerCase();for(let i=0;i<e.length;i++)if(t[i]!==r[i])return t[i]===e[i];return null}function ov(e){if(0===e.length)return;let t="";for(;e.length>1;){const{value:r,hyphenated:i}=e.shift();t+=r+(i?"-":" ")}const r=t+e[0].value;return r[0]&&r}function sv(e){if(e[0][0].label){const t={};for(const[{value:r,label:i}]of e)t[i]=r;return t}const t={},[r,i,n]=function(e,t=!0){const r=[],i=[];if(t)for(;e.length>1&&!1!==e[0].upperCase;){for(r.push(...i),i.length=0;e.length>1&&!1!==e[0].upperCase&&!e[0].hyphenated;)r.push(e.shift());for(;e.length>0&&!1!==e[0].upperCase&&e[0].hyphenated;)i.push(e.shift())}const n=[],o=[];for(;e.length>1;){for(n.push(...o),o.length=0;e.length>1&&!1===e[0].upperCase;)n.push(e.shift());for(;e.length>0&&!1!==e[0].upperCase;)o.push(e.shift())}return i.length&&o.unshift(...i),e.length&&o.push(e[0]),[ov(r),ov(n),ov(o)]}(e[0],1===e.length);return n&&(t.family=n),i&&(t.prefix=i),3===e.length?(t.given=ov(e[2]),t.suffix=ov(e[1])):2===e.length?t.given=ov(e[1]):r&&(t.given=r),t}function av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?av(Object(r),!0).forEach(function(t){cv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):av(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cv(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const uv={commandBegin:{match:"\\begin",push:"environment"},command:{match:/\\(?:[a-zA-Z]+|.) */,value:e=>e.slice(1).trim()},lbrace:{match:"{",push:"bracedLiteral"},mathShift:{match:"$",push:"mathLiteral"},whitespace:{match:/[\s]+|~/,lineBreaks:!0,value(e){return"~"===e?" ":" "}}},dv=Uf().states({stringLiteral:lv(lv({},uv),{},{text:/[^{$}\s~\\]+/}),namesLiteral:lv(lv({and:/\s+[aA][nN][dD]\s+/,comma:",",hyphen:"-",equals:"="},uv),{},{text:/[^{$}\s~\\,=-]+/}),listLiteral:lv(lv({and:/\s+and\s+/},uv),{},{text:/[^{$}\s~\\]+/}),separatedLiteral:lv(lv({comma:","},uv),{},{text:/[^{$}\s~\\,]+/}),annotation:lv(lv({},uv),{},{colon:":",equals:"=",comma:",",semicolon:";",quote:'"',itemCount:/\d+/,text:/[^{$}\s~\\":;,=]+/}),bracedLiteral:lv(lv({},uv),{},{rbrace:{match:"}",pop:!0},text:/[^{$}\s~\\]+/}),mathLiteral:lv(lv({},uv),{},{mathShift:{match:"$",pop:!0},script:/[\^_]/,text:/[^{$}\s~\\^_]+/}),environment:lv(lv({commandEnd:{match:"\\end",pop:!0}},uv),{},{text:/[^{$}\s~\\]+/})});function mv(e){return e[0],e}function pv(e,t){return t in ig?e&&ig[t].join(e):e}const hv=new Lh({String(){let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return mv(e)},StringNames(){const e=[];for(;;){if(this.consumeToken("whitespace",!0),e.push(this.consumeRule("Name")),this.consumeToken("whitespace",!0),this.matchEndOfFile())return e;this.consumeToken("and")}},Name(){const e=[];for(;;){if(e.push(this.consumeRule("NamePiece")),this.matchEndOfFile()||this.matchToken("and"))return sv(e);this.consumeToken("comma"),this.consumeToken("whitespace",!0)}},NamePiece(){const e=[];for(;;){const t=this.consumeRule("NameToken");if(t.label)return t.label=ov([...e,{value:t.label}]),[t];if(e.push(t),this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma"))return e;for(;this.matchToken("hyphen")||this.matchToken("whitespace");)this.consumeToken()}},NameToken(){let e=null,t="";for(;;)if(null===e&&this.matchToken("text")){const r=this.consumeToken().value;t+=r,e=nv(r)}else{if(this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma")||this.matchToken("whitespace"))return{value:t,upperCase:e};if(this.matchToken("hyphen"))return{value:t,upperCase:e,hyphenated:!0};if(this.matchToken("equals")){this.consumeToken("equals");const e=this.consumeRule("NamePiece");return e[0].label&&(t+="="+e[0].label),{value:ov(e),label:t}}t+=this.consumeRule("Text")}},StringList(){const e=[];for(;!this.matchEndOfFile();){let t="";for(;!this.matchEndOfFile()&&!this.matchToken("and");)t+=this.consumeRule("Text");e.push(mv(t)),this.consumeToken("and",!0)}return 1===e.length?e[0]:e},StringSeparated(){const e=[];for(;!this.matchEndOfFile();){let t="";for(;!this.matchEndOfFile()&&!this.matchToken("comma");)t+=this.consumeRule("Text");e.push(t.trim()),this.consumeToken("comma",!0),this.consumeToken("whitespace",!0)}return e},StringVerbatim(){let e="";for(;!this.matchEndOfFile();)e+=this.consumeToken().text;return mv(e)},StringUri(){const e=this.consumeRule("StringVerbatim");try{return decodeURI(e)===e?encodeURI(e):e}catch(t){return encodeURI(e)}},StringTitleCase(){this.state.sentenceCase=!0;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return mv(e)},Annotations(){const e={};for(;;){const{scope:t,item:r,part:i,value:n}=this.consumeRule("Annotation");if("part"===t?(e.part||(e.part=[]),e.part[r]||(e.part[r]={}),e.part[r][i]=n):"item"===t?(e.item||(e.item=[]),e.item[r]=n):e.field=n,this.matchEndOfFile())break;this.consumeToken("semicolon"),this.consumeRule("_")}return e},Annotation(){const e={};if(this.matchToken("itemCount")?(e.item=parseInt(this.consumeToken("itemCount"))-1,this.matchToken("colon")?(this.consumeToken("colon"),e.part=this.consumeToken("text"),e.scope="part"):e.scope="item"):e.scope="field",this.consumeToken("equals"),this.consumeRule("_"),this.matchToken("quote")){this.consumeToken("quote");let t="";for(;!this.matchToken("quote");)this.matchToken("itemCount")||this.matchToken("colon")||this.matchToken("comma")||this.matchToken("semicolon")||this.matchToken("equals")?(t+=this.token.value,this.token=this.lexer.next()):t+=this.consumeRule("Text");this.consumeToken("quote"),e.value=mv(t),this.consumeRule("_")}else{e.value=[];let t="";for(;;)if(t+=this.consumeRule("Text"),this.matchToken("comma"))this.consumeToken("comma"),this.consumeRule("_"),e.value.push(mv(t)),t="";else if(this.matchEndOfFile()||this.matchToken("semicolon")){e.value.push(mv(t));break}}return e},BracketString(){var e;let t="";this.consumeToken("lbrace");const r=this.state.sentenceCase;for(this.state.sentenceCase=r&&this.matchToken("command"),(e=this.state).partlyLowercase&&(e.partlyLowercase=this.state.sentenceCase);!this.matchToken("rbrace");)t+=this.consumeRule("Text");const i=r&&!this.state.sentenceCase&&this.state.partlyLowercase;return this.state.sentenceCase=r,this.consumeToken("rbrace"),i?pv(t,"nocase"):t},MathString(){let e="";for(this.consumeToken("mathShift");!this.matchToken("mathShift");){if(this.matchToken("script")){const t=this.consumeToken("script").value,r=this.consumeRule("Text").split("");if(r.every(e=>e in lg[t]))e+=r.map(e=>lg[t][e]).join("");else{const i=ag[t];e+=ig[i].join(r.join(""))}continue}if(this.matchToken("command")){const t=this.token.value;if(t in ag){this.consumeToken("command"),e+=pv(this.consumeRule("BracketString"),ag[t]);continue}}e+=this.consumeRule("Text")}return this.consumeToken("mathShift"),e},Text(){if(this.matchToken("lbrace"))return this.consumeRule("BracketString");if(this.matchToken("mathShift"))return this.consumeRule("MathString");if(this.matchToken("whitespace"))return this.consumeToken("whitespace").value;if(this.matchToken("commandBegin"))return this.consumeRule("EnclosedEnv");if(this.matchToken("command"))return this.consumeRule("Command");const e=this.consumeToken("text").value.replace(og,e=>sg[e]),t=this.state.afterPunctuation;var r;if(this.state.afterPunctuation=/[?!.:]$/.test(e),!this.state.sentenceCase)return(r=this.state).partlyLowercase||(r.partlyLowercase=e===e.toLowerCase()&&e!==e.toUpperCase()),e;const[i,...n]=e,o=n.join(""),s=o.toLowerCase();return o!==s?e:t?i+s:e.toLowerCase()},Command(){const e=this.consumeToken("command"),t=e.value;if(t in tg)return pv(this.consumeRule("Env"),tg[t]);if(t in rg)return pv(this.consumeRule("BracketString"),rg[t]);if(t in Zf)return Zf[t];if(t in Qf)return Qf[t];if(t in Xf&&!this.matchEndOfFile()){const e=this.consumeRule("Text");return(e[0]+Xf[t]).normalize("NFC")+e.slice(1)}if(t in ng){const e=ng[t],r=[];let i=e.length;for(;i-- >0;)this.consumeToken("whitespace",!0),r.push(this.consumeRule("BracketString"));return e(...r)}return/^[&%$#_{}]$/.test(t)?e.text.slice(1):e.text},Env(){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("rbrace");)e+=this.consumeRule("Text");return e},EnclosedEnv(){this.consumeToken("commandBegin");const e=this.consumeRule("BracketString");let t="";for(;!this.matchToken("commandEnd");)t+=this.consumeRule("Text");const r=this.consumeToken("commandEnd"),i=this.consumeRule("BracketString");if(e!==i)throw new SyntaxError(this.lexer.formatError(r,`environment started with "${e}", ended with "${i}"`));return pv(t,tg[e])},_(){for(;this.matchToken("whitespace");)this.consumeToken("whitespace")}},{sentenceCase:!1,partlyLowercase:!1,afterPunctuation:!0});function fv(e){return cg.includes(e.toLowerCase())}function gv(e){if("name"===e[1])return"namesLiteral";switch(e[0]){case"list":return"listLiteral";case"separated":return"separatedLiteral";default:return"stringLiteral"}}function vv(e,t,r=[]){const i=Jf[t]||[];return hv.parse(dv.reset(e,{state:gv(i),line:0,col:0}),function(e,t){if("name"===e[1])return"list"===e[0]?"StringNames":"Name";if("title"===e[1]){const e=ug.parse.sentenceCase;return"always"===e||"english"===e&&function(e){return Array.isArray(e)?e.every(fv):fv(e)}(t)?"StringTitleCase":"String"}switch("field"===e[0]?e[1]:e[0]){case"list":return"StringList";case"separated":return"StringSeparated";case"verbatim":return"StringVerbatim";case"uri":return"StringUri";default:return"String"}}(i,r))}function bv(e){return hv.parse(dv.reset(e,{state:"annotation",line:0,col:0}),"Annotations")}function yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function _v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yv(Object(r),!0).forEach(function(t){xv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xv(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wv(e,t){const r=[];for(const{type:i,label:n,properties:o}of e)if(i in t){const e=[];for(const r of t[i])Array.isArray(r)&&!r.some(e=>e in o)?e.push(r.join("/")):"string"!=typeof r||r in o||e.push(r);e.length&&r.push([n,`missing fields: ${e.join(", ")}`])}else r.push([n,`invalid type: "${i}"`]);if(r.length)throw new RangeError(["Invalid entries:"].concat(r.map(([e,t])=>`  - ${e} has ${t}`)).join("\n"))}function Cv(e){const t={};"language"in e.properties&&(t.language=vv(e.properties.language,"language"));for(const r in e.properties){const i=e.properties[r];""!==i&&(t[r]=vv(i+"",r,t.language))}for(const r in e.annotations)for(const i in e.annotations[r])t[r+"+an:"+i]=bv(e.annotations[r][i]);return _v(_v({},e),{},{properties:t})}function kv(e){return ug.parse.strict&&wv(e,Yf.biblatex),rv(e.map(Cv),jg)}function Tv(e){return ug.parse.strict&&wv(e,Yf.bibtex),rv(e.map(Cv),Hg)}const Ev={"@biblatex/text":{parse:yg,parseType:{dataType:"String",predicate:/@\s{0,5}[A-Za-z]{1,13}\s{0,5}\{\s{0,5}[^@{}"=,\\\s]{0,100}\s{0,5},[\s\S]*\}/}},"@biblatex/entry+object":{parse(e){return kv([e])},parseType:{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}},"@biblatex/entries+list":{parse:kv,parseType:{elementConstraint:"@biblatex/entry+object"}},"@bibtex/text":{parse:yg,outputs:"@bibtex/entries+list"},"@bibtex/entry+object":{parse(e){return Tv([e])}},"@bibtex/entries+list":{parse:Tv},"@bibtxt/text":{parse:e=>e.trim().split(_g).map(kg),parseType:{dataType:"String",predicate:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/}}},Sv={};for(const e in Zf)Sv[Zf[e]]=e;for(const e in Xf)Sv[Xf[e]]=e;for(const e in sg)Sv[sg[e]]=e;const Iv={};for(const e in Qf)Iv[Qf[e]]=e;const Av=/[^a-zA-Z0-9\s!"'()*+,\-./:;=?@[\]\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,Ov=/.[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]+/g,Nv=/[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,Rv={separated:",",list:" and "},Pv={i:"\\textit{",b:"\\textbf{",sc:"\\textsc{",sup:"\\textsuperscript{",sub:"\\textsubscript{",'span style="font-variant:small-caps;"':"\\textsc{",'span class="nocase"':"{"};function Dv(e){return ug.format.asciiOnly?e.normalize("NFKD").replace(Av,e=>function(e){return e in Sv?Sv[e]in sg?Sv[e]:`\\${Sv[e]}{}`:e in Iv?`$\\${Iv[e]}$`:/^[&%$#_{}]$/.test(e)?`\\${e}`:""}(e)).replace(Ov,e=>Array.from(e).reduce((e,t)=>`{\\${Sv[t]} ${e}}`)).replace(Nv,""):e}function Bv(e){const t=[];let r=e.split(/<(\/?(?:i|b|sc|sup|sub|span)|span .*?)>/g);return r=r.map((e,r)=>r%2==0?Dv(e):e in Pv?(t.push("/"+e.split(" ")[0]),Pv[e]):e===t[t.length-1]?(t.pop(),"}"):""),r.join("")}function Mv(e,t){switch(t){case"title":return Bv(e).split(/(:\s*)/).map((e,t)=>t%2?e:e.replace(/([^\\])\b([a-z]*[A-Z].*?)\b/g,"$1{$2}")).join("");case"literal":return Bv(e.toString());case"name":return function(e){if(e.family&&!e.prefix&&!e.given&!e.suffix)return e.family.includes(Rv.list)?e.family:`{${e.family}}`;const t=[""];return e.prefix&&e.family&&(t[0]+=e.prefix+" "),e.family&&(t[0]+=e.family),e.suffix?(t.push(e.suffix),t.push(e.given||"")):t.push(e.given),Dv(t.join(", ").trim())}(e);case"verbatim":case"uri":return e.toString();default:return Dv(e.toString())}}function Lv(e){return Array.isArray(e)?e.map(e=>Dv(e).replace(/([;,"])/g,"{$1}")).join(", "):'"'+Dv(e).replace(/(["])/g,"{$1}")+'"'}function zv(e,t){if(!(e in Jf))return Mv(t,"verbatim");const[r,i]=Jf[e];return r in Rv?function(e,t,r){const i=Rv[r];return e.map(e=>{const r=Mv(e,t);return r.includes(i)?`{${r}}`:r}).join(i)}(t,i,r):Mv(t,i)}function Fv(e){const t=[];if(e.field&&t.push("="+Lv(e.field)),e.item)for(const[r,i]of Object.entries(e.item)){if(!i)continue;const e=parseInt(r)+1;t.push(e+"="+Lv(i))}if(e.part)for(const[r,i]of Object.entries(e.part)){if(!i)continue;const e=parseInt(r)+1;for(const r in i)i[r]&&t.push(e+":"+r+"="+Lv(i[r]))}return t.join("; ")}function jv({type:e,label:t,properties:r}){const i={type:e,label:t,properties:{}};for(const e in r){const t=r[e],[n,o]=e.split("+an:");o?(i.annotations||(i.annotations={}),i.annotations[n]||(i.annotations[n]={}),i.annotations[n][o]=Fv(t)):i.properties[e]=zv(e,t)}return i}function Hv(e){return(t=e,iv(t,Hg)).map(jv);var t}function qv(e,t,r){return r.listItem.join(`${e} = {${t}},`)}function Uv(e,t){const r=e.map(e=>function(e,t){const r=[];for(const i in e.properties)if(r.push(qv(i,e.properties[i],t)),e.annotations&&e.annotations[i])for(const n in e.annotations[i]){let o=i+ug.biber.annotationMarker;"default"!==n&&(o+=ug.biber.namedAnnotationMarker+n),r.push(qv(o,e.annotations[i][n],t))}return t.entry.join(`@${e.type}{${e.label},${t.list.join(r.join(""))}}`)}(e,t)).join("");return t.bibliographyContainer.join(r)}const Gv=function(e,t){return function(r,i={}){const{type:n,format:o=n||"text"}=i;if(r=e(r),"object"===o)return r;if(bf(o))return t(r,_f(o),i);throw new RangeError(`Output dictionary "${o}" not available`)}};var Wv={bibtex:Gv(Hv,Uv),biblatex:Gv(function(e){return(t=e,iv(t,jg)).map(jv);var t},Uv),bibtxt:Gv(Hv,function(e,t){const r=e.map(e=>function({type:e,label:t,properties:r},i){const n=Object.entries(r).concat([["type",e]]).map(([e,t])=>i.listItem.join(`${e}: ${t}`));return i.entry.join(`[${t}]${i.list.join(n.join(""))}`)}(e,t)).join("\n");return t.bibliographyContainer.join(r)})};Nf("@bibtex",{input:Ev,output:Wv,config:ug});var Vv=JSON.parse('{"outputSpec":"mixed"}'),Kv=JSON.parse('{"r":{"ABST":"article-journal","ADVS":"motion_picture","AGGR":"dataset","ANCIENT":"classic","ART":"graphic","BILL":"bill","BLOG":"post-weblog","BOOK":"book","CASE":"legal_case","CHAP":"chapter","CHART":"figure","CLSWK":"classic","COMP":"software","CONF":"paper-conference","CPAPER":"paper-conference","CTLG":"entry","DATA":"dataset","DBASE":"dataset","DICT":"entry-dictionary","EBOOK":"book","ECHAP":"chapter","EDBOOK":"book","EJOUR":"article-journal","ELEC":"webpage","ENCYC":"entry-encyclopedia","EQUA":"article","FIGURE":"figure","GEN":"document","GOVDOC":"report","GRANT":"article","HEAR":"hearing","ICOMM":"personal_communication","INPR":"article-journal","JFULL":"article-journal","JOUR":"article-journal","LEGAL":"legislation","MANSCPT":"manuscript","MAP":"map","MGZN":"article-magazine","MPCT":"broadcast","MULTI":"motion_picture","MUSIC":"musical_score","NEWS":"article-newspaper","PAMP":"pamphlet","PAT":"patent","PCOMM":"personal_communication","RPRT":"report","SER":"periodical","SLIDE":"motion_picture","SOUND":"motion_picture","STAND":"standard","STAT":"legislation","THES":"thesis","UNBILL":"manuscript","UNPB":"manuscript","VIDEO":"motion_picture","WEB":"webpage"},"p":{"article-journal":"JOUR","article-magazine":"MGZN","article-newspaper":"NEWS","article":"JOUR","bill":"BILL","book":"BOOK","broadcast":"MPCT","chapter":"CHAP","classic":"CLSWK","collection":"GEN","dataset":"DATA","document":"GEN","entry":"CTLG","entry-dictionary":"DICT","entry-encyclopedia":"ENCYC","event":"GEN","figure":"FIGURE","graphic":"ART","hearing":"HEAR","interview":"GEN","legal_case":"CASE","legislation":"LEGAL","manuscript":"MANSCPT","map":"MAP","motion_picture":"MPCT","musical_score":"MUSIC","pamphlet":"PAMP","paper-conference":"CONF","patent":"PAT","performance":"GEN","periodical":"SER","personal_communication":"PCOMM","post-weblog":"BLOG","post":"ICOMM","regulation":"LEGAL","report":"RPRT","review-book":"BOOK","review":"JOUR","software":"COMP","song":"SOUND","speech":"SOUND","standard":"STAND","thesis":"THES","treaty":"GEN","webpage":"ELEC"}}'),$v=JSON.parse('[{"source":"A2","target":"editor","when":{"source":{"TY":["ANCIENT","BLOG","CHAP","CONF","CPAPER","DICT","EBOOK","ECHAP","ENCYC","MUSIC","SER"]},"target":{"type":["chapter","entry-dictionary","entry-encyclopedia","musical_score","paper-conference","periodical","post-weblog"]}}},{"source":"A2","target":"performer","when":{"source":{"TY":["ADVS","SLIDE","SOUND","VIDEO"]},"target":{"type":["song","speech"]}}},{"source":"A2","target":"collection-editor","when":{"source":{"TY":["BOOK","CLSWK","COMP","EDBOOK","ELEC","MAP","MULTI","RPRT","UNPB"]},"target":{"type":["book","classic","map","report","review-book","software","webpage"]}}},{"source":"A2","target":"reporter","when":{"source":{"TY":["CASE"]},"target":{"type":["legal_case"]}}},{"source":"A2","target":"producer","when":{"source":{"TY":["DATA"]},"target":{"type":["dataset"]}}},{"source":"A2","target":"recipient","when":{"source":{"TY":["ICOMM","PCOMM"]},"target":{"type":["personal_communication","post"]}}},{"source":"A3","target":"collection-editor","when":{"source":{"TY":["ADVS","CHAP","CONF","EBOOK","MUSIC","SER","SLIDE","SOUND","VIDEO"]},"target":{"type":["chapter","musical_score","paper-conference","periodical","song","speech"]}}},{"source":"A3","target":"illustrator","when":{"source":{"TY":["BLOG"]},"target":{"type":["post-weblog"]}}},{"source":"A3","target":"editor","when":{"source":{"TY":["BOOK"]},"target":{"type":["book","review-book"]}}},{"source":"A3","target":"producer","when":{"source":{"TY":["MPCT"]},"target":{"type":["broadcast","motion_picture"]}}},{"source":"A4","target":"translator","when":{"source":{"TY":["ANCIENT","BOOK","CHAP","CLSWK","CTLG","DICT","EDBOOK","ENCYC","GRANT","PAMP"]},"target":{"type":["book","chapter","classic","entry","entry-dictionary","entry-encyclopedia","pamphlet","review-book"]}}},{"source":"A4","target":"performer","when":{"source":{"TY":["MPCT"]},"target":{"type":["broadcast","motion_picture"]}}},{"source":"A4","target":"producer","when":{"source":{"TY":["MUSIC"]},"target":{"type":["musical_score"]}}},{"source":"AB","target":"abstract","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"AU","target":"author","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MULTI","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","book","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","interview","legislation","manuscript","map","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"AU","target":"editor","when":{"source":{"TY":["EDBOOK"]},"target":false}},{"source":"AU","target":"director","when":{"source":{"TY":["MPCT"]},"target":{"type":["broadcast","motion_picture"]}}},{"source":"AU","target":"composer","when":{"source":{"TY":["MUSIC"]},"target":{"type":["musical_score"]}}},{"source":"AU","target":"reporter","when":{"source":{"TY":["NEWS"]},"target":{"type":["article-newspaper"]}}},{"source":"C1","target":"section","when":{"source":{"TY":["CHAP","ECHAP","SER"]},"target":{"type":["chapter","periodical"]}}},{"source":"C1","target":"publisher-place","when":{"source":{"TY":["CONF","CPAPER"]},"target":{"type":["paper-conference"]}}},{"source":"C1","target":"scale","when":{"source":{"TY":["MAP"]},"target":{"type":["map"]}}},{"source":"C2","target":"PMCID","when":{"source":{"TY":["ABST","INPR","JFULL","JOUR"]},"target":{"type":["article","article-journal","review"]}}},{"source":"C2","target":"issue","when":{"source":{"TY":["NEWS"]},"target":{"type":["article-newspaper"]}}},{"source":"C2","target":"number","when":{"source":{"TY":["SER"]},"target":{"type":["periodical"]}}},{"source":"C3","target":"dimensions","when":{"source":{"TY":["ADVS","MAP","SLIDE","SOUND","VIDEO"]},"target":{"type":["map","song","speech"]}}},{"source":"C3","target":"container-title","when":{"source":{"TY":["CONF"]},"target":{"type":["paper-conference"]}}},{"source":"C3","target":"PMCID","when":{"source":{"TY":["EJOUR"]},"target":false}},{"source":"C3","target":"jurisdiction","when":{"source":{"TY":["PAT"]},"target":{"type":["patent"]}}},{"source":["C3","M1"],"target":"dimensions","when":{"source":{"TY":["ART"]},"target":{"type":["graphic"]}}},{"source":"C5","target":"volume-title","when":{"source":{"TY":["EJOUR"]},"target":false}},{"source":"C5","target":"number","when":{"source":{"TY":["GRANT"]},"target":false}},{"source":"C5","target":"dimensions","when":{"source":{"TY":["MULTI"]},"target":false}},{"source":"C5","target":"references","when":{"source":{"TY":["PAT"]},"target":{"type":["patent"]}}},{"source":["C5","PY"],"target":"issued","when":{"source":{"TY":["EBOOK"]},"target":false}},{"source":"C6","target":"status","when":{"source":{"TY":["PAT"]},"target":{"type":["patent"]}}},{"source":"C6","target":"issue","when":{"source":{"TY":["RPRT"]},"target":{"type":["report"]}}},{"source":"C6","target":"volume","when":{"source":{"TY":["STAT"]},"target":false}},{"source":"C7","target":"number","when":{"source":{"TY":["ABST","INPR","JFULL","JOUR"]},"target":{"type":["article","article-journal","review"]}}},{"source":"C7","target":"PMCID","when":{"source":{"TY":["EBOOK","ECHAP"]},"target":false}},{"source":["C7","NV"],"target":"number","when":{"source":{"TY":["EJOUR"]},"target":false}},{"source":"CN","target":"call-number","when":{"source":{"TY":["ABST","ADVS","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CTLG","DATA","DICT","EBOOK","ECHAP","EDBOOK","ELEC","ENCYC","EQUA","FIGURE","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"CY","target":"publisher-place","when":{"source":{"TY":["ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","HEAR","ICOMM","LEGAL","MANSCPT","MAP","MGZN","MUSIC","NEWS","PAMP","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},"target":{"type":["article-magazine","article-newspaper","book","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legislation","manuscript","map","musical_score","pamphlet","performance","periodical","personal_communication","post","post-weblog","regulation","report","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"CY","target":"event-place","when":{"source":{"TY":["CONF","CPAPER"]},"target":{"type":["paper-conference"]}}},{"source":"DA","target":"accessed","when":{"source":{"TY":["AGGR","DBASE","EBOOK","EJOUR","MULTI"]},"target":false}},{"source":["DA","C2"],"target":"issued","when":{"source":{"TY":["CONF"]},"target":{"type":["paper-conference"]}}},{"source":["DA","PY","C2"],"target":"issued","when":{"source":{"TY":["PAT"]},"target":{"type":["patent"]}}},{"source":["DA","PY"],"target":"issued","when":{"source":{"TY":["ABST","ADVS","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHART","CPAPER","CTLG","DATA","EDBOOK","ELEC","ENCYC","EQUA","FIGURE","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","PAMP","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","bill","book","broadcast","collection","dataset","document","entry","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","song","speech","standard","thesis","treaty","webpage"]}}},{"source":["DA","PY","Y2"],"target":"issued","when":{"source":{"TY":["STAT"]},"target":false}},{"source":["DA","Y2"],"target":"accessed","when":{"source":{"TY":["ECHAP"]},"target":false}},{"source":"DB","target":"source","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"DO","target":"DOI","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"ET","target":"edition","when":{"source":{"TY":["ADVS","ANCIENT","ART","BLOG","BOOK","CHAP","CLSWK","CONF","CTLG","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","GEN","GOVDOC","LEGAL","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","RPRT","SER","SLIDE","SOUND","VIDEO"]},"target":{"type":["article-magazine","article-newspaper","book","broadcast","chapter","classic","collection","document","entry","entry-dictionary","entry-encyclopedia","event","graphic","interview","legislation","map","motion_picture","musical_score","pamphlet","paper-conference","performance","periodical","post-weblog","regulation","report","review-book","song","speech","treaty","webpage"]}}},{"source":"ET","target":"version","when":{"source":{"TY":["CHART","COMP","DATA","EQUA","FIGURE"]},"target":{"type":["dataset","figure","software"]}}},{"source":"ET","target":"available-date","when":{"source":{"TY":["ABST","INPR","JFULL","JOUR"]},"target":{"type":["article","article-journal","review"]}}},{"source":"ET","target":"medium","when":{"source":{"TY":["MANSCPT"]},"target":{"type":["manuscript"]}}},{"source":["ET","PY"],"target":"issued","when":{"source":{"TY":["AGGR","DBASE"]},"target":false}},{"source":"ID","target":"id"},{"source":"IS","target":"number-of-volumes","when":{"source":{"TY":["CHAP"]},"target":{"type":["chapter"]}}},{"source":"IS","target":"issue","when":{"source":{"TY":["ABST","INPR","JFULL","JOUR"]},"target":{"type":["article","article-journal","review"]}}},{"source":"J2","target":"container-title-short","when":{"source":{"TY":["ABST","ANCIENT","BOOK","CHAP","CTLG","DATA","DICT","ENCYC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","PAMP","PCOMM","SER","STAND","STAT","UNPB"]},"target":{"type":["article","article-journal","article-magazine","book","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","legislation","manuscript","pamphlet","periodical","personal_communication","post","regulation","review","review-book","standard"]}}},{"source":"KW","target":"keyword","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"LA","target":"language","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"LB","target":"citation-label","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"M1","target":"number","when":{"source":{"TY":["ADVS","AGGR","ANCIENT","BILL","CHART","DICT","EQUA","FIGURE","GEN","HEAR","SLIDE","SOUND","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["bill","collection","document","entry-dictionary","event","figure","hearing","interview","performance","song","speech","thesis","treaty"]}}},{"source":"M1","target":"collection-number","when":{"source":{"TY":["BOOK","CLSWK","CTLG","EDBOOK","PAMP","SER"]},"target":{"type":["book","classic","entry","pamphlet","periodical","review-book"]}}},{"source":"M1","target":"issue","when":{"source":{"TY":["CONF","EJOUR","GOVDOC","MGZN"]},"target":{"type":["article-magazine","paper-conference"]}}},{"source":"M1","target":"chapter-number","when":{"source":{"TY":["ECHAP"]},"target":false}},{"source":"M1","target":"status","when":{"source":{"TY":["GRANT"]},"target":false}},{"source":"M1","target":"page-first","when":{"source":{"TY":["LEGAL","NEWS","STAND"]},"target":{"type":["article-newspaper","legislation","regulation","standard"]}}},{"source":["M1","NV"],"target":"number","when":{"source":{"TY":"STAT"},"target":false}},{"source":["NV","M1"],"target":"number","when":{"source":{"TY":["ICOMM","MANSCPT","PCOMM"]},"target":{"type":["manuscript","personal_communication","post"]}}},{"source":["M1","VL"],"target":"accessed","when":{"source":{"TY":["ELEC"]},"target":{"type":["webpage"]}}},{"source":"M2","target":"page-first","when":{"source":{"TY":["ABST","INPR","JFULL","JOUR"]},"target":{"type":["article","article-journal","review"]}}},{"source":"M2","target":"number-of-pages","when":{"source":{"TY":["PAMP"]},"target":{"type":["pamphlet"]}}},{"source":"M3","target":"genre","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BOOK","CHART","CLSWK","COMP","CPAPER","CTLG","DBASE","DICT","ECHAP","EDBOOK","EJOUR","EQUA","FIGURE","GEN","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MULTI","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","book","classic","collection","document","entry","entry-dictionary","event","figure","graphic","interview","legislation","manuscript","map","pamphlet","patent","performance","periodical","personal_communication","post","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty"]}}},{"source":"M3","target":"medium","when":{"source":{"TY":["BLOG","EBOOK","ELEC","MPCT","MUSIC"]},"target":{"type":["broadcast","motion_picture","musical_score","post-weblog","webpage"]}}},{"source":["N1","RN"],"target":"note","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PCOMM","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":["N1","RN","RP"],"target":"note","when":{"source":{"TY":["PAT","RPRT"]},"target":{"type":["patent","report"]}}},{"source":"NV","target":"number-of-volumes","when":{"source":{"TY":["ANCIENT","BOOK","CLSWK","CONF","DICT","ECHAP","EDBOOK","ENCYC","GEN","HEAR","MUSIC","SER"]},"target":{"type":["book","classic","collection","document","entry-dictionary","entry-encyclopedia","event","hearing","interview","musical_score","paper-conference","performance","periodical","review-book","treaty"]}}},{"source":"NV","target":"number","when":{"source":{"TY":["CTLG","DATA"]},"target":{"type":["dataset","entry"]}}},{"source":"NV","target":"version","when":{"source":{"TY":["EBOOK"]},"target":false}},{"source":"NV","target":"dimensions","when":{"source":{"TY":["GRANT"]},"target":false}},{"source":"NV","target":"collection-number","when":{"source":{"TY":["RPRT"]},"target":{"type":["report"]}}},{"source":"OP","target":"original-title","when":{"source":{"TY":["ABST","AGGR","ANCIENT","BOOK","CHAP","CLSWK","CTLG","DICT","EBOOK","ECHAP","EDBOOK","ENCYC","GEN","INPR","JFULL","JOUR","MGZN","MUSIC","PAMP","SER"]},"target":{"type":["article","article-journal","article-magazine","book","chapter","classic","collection","document","entry","entry-dictionary","entry-encyclopedia","event","interview","musical_score","pamphlet","performance","periodical","review","review-book","treaty"]}}},{"source":"OP","target":"references","when":{"source":{"TY":["BILL","CASE","HEAR","LEGAL","STAT","UNBILL"]},"target":{"type":["bill","hearing","legal_case","legislation","regulation"]}}},{"source":"PB","target":"publisher","when":{"source":{"TY":["ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","LEGAL","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PCOMM","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},"target":{"type":["article-magazine","article-newspaper","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legislation","map","motion_picture","musical_score","pamphlet","paper-conference","performance","periodical","personal_communication","post","post-weblog","regulation","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"PB","target":"authority","when":{"source":{"TY":["CASE"]},"target":{"type":["legal_case"]}}},{"source":"PB","target":"archive","when":{"source":{"TY":["MANSCPT"]},"target":{"type":["manuscript"]}}},{"source":["PB","A3"],"target":"publisher","when":{"source":{"TY":["RPRT"]},"target":{"type":["report"]}}},{"source":["PB","C5"],"target":"publisher","when":{"source":{"TY":["STAT"]},"target":false}},{"source":"PY","target":"issued","when":{"source":{"TY":["CHAP","CLSWK","COMP","DICT","ECHAP","GOVDOC","MULTI","NEWS"]},"target":{"type":["article-newspaper","chapter","classic","entry-dictionary","software"]}}},{"source":"PY","target":"event-date","when":{"source":{"TY":["CONF"]},"target":{"type":["paper-conference"]}}},{"source":"RI","target":"reviewed-title","when":{"source":{"TY":["ABST","ANCIENT","CHAP","DICT","EBOOK","ECHAP","EJOUR","ENCYC","GEN","GRANT","INPR","JFULL","JOUR","MGZN","NEWS","SER"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","chapter","collection","document","entry-dictionary","entry-encyclopedia","event","interview","performance","periodical","review","treaty"]}}},{"source":"RI","target":"locator","when":{"source":{"TY":["STAT"]},"target":false}},{"source":"SE","target":"section","when":{"source":{"TY":["BILL","GEN","GOVDOC","MUSIC","NEWS","STAT","UNBILL"]},"target":{"type":["article-newspaper","bill","collection","document","event","interview","musical_score","performance","treaty"]}}},{"source":"SE","target":"number","when":{"source":{"TY":["BLOG"]},"target":{"type":["post-weblog"]}}},{"source":"SE","target":"chapter-number","when":{"source":{"TY":["CHAP","SER"]},"target":{"type":["chapter","periodical"]}}},{"source":"SE","target":"page","when":{"source":{"TY":["BOOK"]},"target":{"type":["book","review-book"]}}},{"source":"SE","target":"submitted","when":{"source":{"TY":["CASE"]},"target":{"type":["legal_case"]}}},{"source":"SE","target":"number-of-pages","when":{"source":{"TY":["CTLG"]},"target":{"type":["entry"]}}},{"source":"SE","target":"original-date","when":{"source":{"TY":["DATA"]},"target":{"type":["dataset"]}}},{"source":"SE","target":"version","when":{"source":{"TY":["DICT"]},"target":{"type":["entry-dictionary"]}}},{"source":"SE","target":"locator","when":{"source":{"TY":["STAND"]},"target":{"type":["standard"]}}},{"source":"SE","target":"page-first","when":{"source":{"TY":["MANSCPT","MGZN"]},"target":{"type":["article-magazine","manuscript"]}}},{"source":["SE","PY"],"target":"issued","when":{"source":{"TY":["EJOUR"]},"target":false}},{"source":["SE","T2"],"target":"locator","when":{"source":{"TY":["LEGAL"]},"target":{"type":["legislation","regulation"]}}},{"source":"SN","target":["ISSN","ISBN"],"when":{"source":{"TY":["AGGR","CLSWK","GEN"]},"target":{"type":["classic","collection","document","event","interview","performance","treaty"]}}},{"source":"SN","target":"ISBN","when":{"source":{"TY":["ADVS","ANCIENT","BLOG","BOOK","CHAP","COMP","CONF","CTLG","DICT","EBOOK","ECHAP","EDBOOK","ELEC","ENCYC","HEAR","MAP","PAMP","SER","SLIDE","SOUND","VIDEO"]},"target":{"type":["book","chapter","entry","entry-dictionary","entry-encyclopedia","hearing","map","pamphlet","paper-conference","periodical","post-weblog","review-book","software","song","speech","webpage"]}}},{"source":"SN","target":"ISSN","when":{"source":{"TY":["ABST","DATA","EJOUR","INPR","JFULL","JOUR","MGZN","MUSIC","NEWS"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","dataset","musical_score","review"]}}},{"source":"SN","target":"number","when":{"source":{"TY":["DBASE","GOVDOC"]},"target":false}},{"source":["SN","M1"],"target":"number","when":{"source":{"TY":["RPRT"]},"target":{"type":["report"]}}},{"source":["SN","SE","M1"],"target":"number","when":{"source":{"TY":["PAT"]},"target":{"type":["patent"]}}},{"source":["SN","T3"],"target":"number","when":{"source":{"TY":["LEGAL","STAND"]},"target":{"type":["legislation","regulation","standard"]}}},{"source":"SP","target":"page","when":{"source":{"TY":["ABST","AGGR","ANCIENT","BILL","CHAP","CONF","CPAPER","CTLG","DBASE","DICT","ECHAP","EJOUR","ENCYC","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","STAND","STAT","UNBILL","UNPB"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","chapter","collection","document","entry","entry-dictionary","entry-encyclopedia","event","hearing","interview","legislation","manuscript","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","regulation","report","review","standard","treaty"]}}},{"source":"SP","target":"number-of-pages","when":{"source":{"TY":["BOOK","CLSWK","EBOOK","EDBOOK","THES"]},"target":{"type":["book","classic","review-book","thesis"]}}},{"source":"SP","target":"page-first","when":{"source":{"TY":["CASE"]},"target":{"type":["legal_case"]}}},{"source":"SP","target":"dimensions","when":{"source":{"TY":["MPCT"]},"target":{"type":["broadcast","motion_picture"]}}},{"source":"ST","target":"title-short","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CLSWK","COMP","CONF","CTLG","DATA","DICT","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","MANSCPT","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","graphic","hearing","interview","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","report","review","review-book","software","song","speech","thesis","treaty","webpage"]}}},{"source":"SV","target":"collection-number","when":{"source":{"TY":["CHAP"]},"target":{"type":["chapter"]}}},{"source":"T2","target":"collection-title","when":{"source":{"TY":["AGGR","BOOK","CLSWK","COMP","CTLG","DBASE","ELEC","MANSCPT","MAP","MPCT","MULTI","RPRT","UNPB"]},"target":{"type":["book","broadcast","classic","entry","manuscript","map","motion_picture","report","review-book","software","webpage"]}}},{"source":"T2","target":"container-title","when":{"source":{"TY":["ABST","ANCIENT","BILL","BLOG","CHAP","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ENCYC","GEN","INPR","JFULL","JOUR","MGZN","MUSIC","NEWS","PAMP","PAT","SER","STAT","THES","UNBILL"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","chapter","collection","document","entry-dictionary","entry-encyclopedia","event","interview","musical_score","pamphlet","patent","performance","periodical","post-weblog","review","thesis","treaty"]}}},{"source":"T2","target":"event","when":{"source":{"TY":["CONF","CPAPER"]},"target":{"type":["paper-conference"]}}},{"source":"T2","target":"committee","when":{"source":{"TY":["HEAR"]},"target":{"type":["hearing"]}}},{"source":"T2","target":"section","when":{"source":{"TY":["STAND"]},"target":{"type":["standard"]}}},{"source":"T3","target":"collection-title","when":{"source":{"TY":["ADVS","ANCIENT","CHAP","CONF","DATA","EBOOK","ECHAP","EJOUR","GEN","GOVDOC","MUSIC","SER","SLIDE","SOUND","VIDEO"]},"target":{"type":["chapter","collection","dataset","document","event","interview","musical_score","paper-conference","performance","periodical","song","speech","treaty"]}}},{"source":"TI","target":"title","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":"TY","target":"type"},{"source":"UR","target":"URL","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty","webpage"]}}},{"source":["UR","L4"],"target":"URL","when":{"source":{"TY":["HEAR"]},"target":{"type":["hearing"]}}},{"source":"VL","target":"volume","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","BILL","BOOK","CASE","CHAP","CLSWK","CONF","CPAPER","CTLG","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ENCYC","GEN","GOVDOC","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","MUSIC","NEWS","RPRT","SER","SLIDE","SOUND","STAND","UNBILL","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","chapter","classic","collection","document","entry","entry-dictionary","entry-encyclopedia","event","interview","legal_case","legislation","manuscript","musical_score","paper-conference","performance","periodical","regulation","report","review","review-book","song","speech","standard","treaty"]}}},{"source":"VL","target":"dimensions","when":{"source":{"TY":["CHART","EQUA","FIGURE"]},"target":{"type":["figure"]}}},{"source":"VL","target":"edition","when":{"source":{"TY":["COMP"]},"target":{"type":["software"]}}},{"source":"VL","target":"number","when":{"source":{"TY":["PAMP"]},"target":{"type":["pamphlet"]}}},{"source":"VL","target":"version","when":{"source":{"TY":["PAT"]},"target":{"type":["patent"]}}},{"source":["VL","Y2"],"target":"accessed","when":{"source":{"TY":["BLOG"]},"target":{"type":["post-weblog"]}}},{"source":"Y2","target":"accessed","when":{"source":{"TY":["ABST","ADVS","ANCIENT","ART","BILL","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DICT","EDBOOK","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNBILL","UNPB","VIDEO"]},"target":{"type":["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","regulation","report","review","review-book","software","song","speech","standard","thesis","treaty"]}}},{"source":"C4","target":"author","when":{"source":{"TY":["BOOK","CHAP","EBOOK","ECHAP","EJOUR"]},"target":{"reviewed-author":true,"type":["book","chapter","review-book","review"]}}},{"source":"AU","target":"reviewed-author","when":{"source":{"C4":true,"TY":["BOOK","CHAP","EBOOK","ECHAP","EJOUR"]},"target":{"type":["book","chapter","review-book","review"]}}},{"source":"TA","target":"author","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"original-author":true,"translator":true}}},{"source":"AU","target":"original-author","when":{"source":{"TA":true,"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"translator":true}}},{"source":"TT","target":"title","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"original-author":true,"translator":true}}},{"source":"TI","target":"original-title","when":{"source":{"TT":true,"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},"target":{"translator":true}}}]');const Yv=/^\d{4}-\d{3}[0-9Xx]$/,Jv=/10(?:\.[0-9]{4,})?\/[^\s]*[^\s.,]/,Xv={ANY:{toTarget(...e){return e.find(Boolean)},toSource(e){return[e]}},PAGE:{keepAll:!0,toTarget(e,t){return[e,t].filter(Boolean).join("-")},toSource(e){return e.replace(/[-–—]/g,"-")}},ISBN:{toTarget(e){return Yv.test(e)?[e]:[void 0,e]},toSource(...e){return e.find(Boolean)}},DATE:{toTarget(e){return e&&(0,Fg.qg)(e.split("/").slice(0,3).filter(Boolean).join("/"))},toSource(e){if(!e["date-parts"]||!e["date-parts"][0])return;const t=Array(4).fill("");return e["date-parts"][0].forEach((e,r)=>{t[r]=e}),e.season&&(t[3]=e.season),t.join("/")}},YEAR:{toTarget(e){return isNaN(+e)?{raw:e}:{"date-parts":[[+e]]}},toSource(e){var t;return null===(t=e["date-parts"])||void 0===t||null===(t=t[0])||void 0===t||null===(t=t[0])||void 0===t?void 0:t.toString()}},DATE_YEAR:{keepAll:!0,toTarget(...e){return Xv.DATE.toTarget(Xv.ANY.toTarget(...e))},toSource(e){return[Xv.DATE.toSource(e),Xv.YEAR.toSource(e)]}},NAME:{toTarget(e){return e&&[].concat(e).map(e=>{const t=e.split(/, ?/),[r,i,n]=t;switch(t.length){case 3:return{family:r,given:i,suffix:n};case 2:return{family:r,given:i};case 1:if(-1===r.indexOf(" "))return{family:r};default:return{literal:e}}})},toSource(e){return e.map(({family:e,given:t,suffix:r,literal:i})=>{const n=[e,t,r].filter(Boolean);return n.length?n.join(", "):i})}},KEYWORD:{toTarget(e){return(e=[].concat(e)).join(",")},toSource(e){return e.split(",")}},ID:{toSource(e){return e.toString().slice(0,20)}},TYPE:{toTarget(e){return Kv.r[e]},toSource(e){return Kv.p[e]}},DOI:{toTarget(e){return e.match(Jv)[0]},toSource(e){return e.match(Jv)[0]}}};var Zv=Xv,Qv=[{source:"TY",target:"type"},{source:"ID",target:"id"},{source:["T1","TI","CT"],target:"title"},{source:"BT",target:"title",when:{source:{type:["BOOK","UNPB"],T1:!1,TI:!1,CT:!1},target:!1}},{source:"T2",target:"container-title",when:{target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"BT",target:"container-title",when:{source:{type:["ABST","ADVS","ART","BILL","CASE","CHAP","COMP","CONF","CTLG","DATA","ELEC","GEN","HEAR","ICOMM","INPR","JFULL","JOUR","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAT","THES","UNBILL","VIDEO"],T2:!1},target:!1}},{source:"T3",target:"collection-title"},{source:["A1","AU"],target:"author"},{source:["A2","ED"],target:"editor"},{source:"A3",target:"collection-editor"},{source:["Y1","PY"],target:"issued"},{source:"Y2",target:"event-date",convert:Zv.DATE,when:{source:{type:["CONF","CPAPER"]},target:{type:["paper-conference"]}}},{source:"Y2",target:"submitted",convert:Zv.DATE,when:{source:{type:["PAT"]},target:{type:"patent"}}},{source:["AB","N1"],target:"note"},{source:"N2",target:"abstract"},{source:"KW",target:"keyword"},{source:["JF","JO"],target:"container-title",convert:Zv.ANY,when:{target:{type:["article","article-journal","article-magazine","article-newspaper"]}}},{source:["JA","J1","J2"],target:"container-title-short"},{source:"VL",target:"volume"},{source:["IS","CP"],target:"issue"},{source:"SP",target:"page-first"},{source:["SP","EP"],target:"page",convert:Zv.PAGE,when:{source:{SP:!0,EP:!0}}},{source:"CY",target:"publisher-place"},{source:"PB",target:"publisher"},{source:"SN",target:["ISSN","ISBN"]},{source:"AV",target:"archive_location"},{source:"UR",target:"URL"}],eb=JSON.parse('[{"source":["T1","BT"],"target":"title","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"],"TI":false},"target":false}},{"source":"A1","target":"author","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MULTI","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"],"AU":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["CONF"],"C2":false,"DA":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["PAT"],"C2":false,"DA":false,"PY":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["EBOOK"],"C5":false,"PY":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["ABST","ADVS","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHART","CPAPER","CTLG","DATA","EDBOOK","ELEC","ENCYC","EQUA","FIGURE","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","PAMP","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNBILL","UNPB","VIDEO"],"DA":false,"PY":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["STAT"],"DA":false,"PY":false,"Y2":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["AGGR","DBASE"],"ET":false,"PY":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["CHAP","CLSWK","COMP","DICT","ECHAP","GOVDOC","MULTI","NEWS"],"PY":false},"target":false}},{"source":"Y1","target":"issued","when":{"source":{"TY":["EJOUR"],"PY":false,"SE":false},"target":false}},{"source":["JO","JF","J1"],"target":"container-title","when":{"source":{"TY":["CONF"],"C3":false},"target":false}},{"source":["JO","JF","J1"],"target":"container-title","when":{"source":{"TY":["ABST","ANCIENT","BILL","BLOG","CHAP","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ENCYC","GEN","INPR","JFULL","JOUR","MGZN","MUSIC","NEWS","PAMP","PAT","SER","STAT","THES","UNBILL"],"T2":false},"target":false}},{"source":"JA","target":"container-title-short","when":{"source":{"TY":["ABST","ANCIENT","BOOK","CHAP","CTLG","DATA","DICT","ENCYC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","PAMP","PCOMM","SER","STAND","STAT","UNPB"],"J2":false},"target":false}},{"source":"N2","target":"abstract","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"],"AB":false},"target":false}},{"source":["SP","EP"],"target":"page","when":{"source":{"TY":["BOOK"],"SE":false},"target":false}},{"source":["SP","EP"],"target":"page","when":{"source":{"TY":["ABST","AGGR","ANCIENT","BILL","CHAP","CONF","CPAPER","CTLG","DBASE","DICT","ECHAP","EJOUR","ENCYC","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","STAND","STAT","UNBILL","UNPB"],"EP":true},"target":false}},{"source":"AV","target":"archive_location","when":{"target":false}},{"source":"LK","target":"URL","when":{"source":{"TY":["HEAR"],"L4":false,"UR":false},"target":false}},{"source":"LK","target":"URL","when":{"source":{"TY":["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"],"UR":false},"target":false}},{"source":"IS","target":"issue","when":{"source":{"TY":"MGZN","M1":false},"target":false}}]'),tb=$v.concat(eb);const rb={new:$v,old:Qv,mixed:tb};var ib=JSON.parse('{"author":"NAME","chair":"NAME","collection-editor":"NAME","compiler":"NAME","composer":"NAME","container-author":"NAME","contributor":"NAME","curator":"NAME","director":"NAME","editor":"NAME","editorial-director":"NAME","editor-translator":"NAME","executive-producer":"NAME","guest":"NAME","host":"NAME","illustrator":"NAME","interviewer":"NAME","narrator":"NAME","organizer":"NAME","original-author":"NAME","performer":"NAME","producer":"NAME","recipient":"NAME","reviewed-author":"NAME","script-writer":"NAME","series-creator":"NAME","translator":"NAME","accessed":"DATE","available-date":"DATE","event-date":"DATE","issued":"DATE_YEAR","original-date":"DATE","submitted":"DATE","id":"ID","ISSN,ISBN":"ISBN","keyword":"KEYWORD","page":"PAGE","type":"TYPE","DOI":"DOI"}');function nb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function ob(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(r),!0).forEach(function(t){sb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sb(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ab=/^[A-Z][A-Z0-9] {2}-( |$)/,lb=/ {2}-(?: |$)/,cb=new Map;function ub(e){if(!cb.has(e)){for(const t of e)if("issued"!==t.target||Array.isArray(t.source)){if(t.target in ib&&(t.convert=Zv[ib[t.target]]),(!t.convert||!0!==t.convert.keepAll)&&Array.isArray(t.source))if(t.convert){const{toSource:e,toTarget:r}=t.convert;t.convert={toTarget(...e){return r(Zv.ANY.toTarget(...e))},toSource(...t){return Zv.ANY.toSource(e(...t))}}}else t.convert=Zv.ANY}else t.convert=Zv.YEAR;cb.set(e,new Fh(e))}return cb.get(e)}const db=["A1","AV","BT","CP","ED","EP","ID","J1","JA","JF","JO","L2","L3","N2","T1","U1","U2","U3","U4","U5","U6","Y1"],mb=["A4","AD","AN","C1","C2","C3","C4","C5","C6","C7","C8","CA","CN","DA","DB","DO","DP","ET","LA","LB","NV","OP","PY","RI","RN","SE","ST","SV","TA","TT"];Nf("@ris",{input:{"@ris/file":{parse:function(e){const t=[];let r,i;for(let n of e.split(/\r?\n/)){if(n=n.trim(),!ab.test(n)){r&&i&&(r[i]+=" "+n);continue}const[e,o]=n.split(lb);switch(e){case"ER":r=void 0,i=void 0;break;case"TY":r={},t.push(r);default:Array.isArray(r[e])?r[e].push(o):r[e]=r[e]?[r[e],o]:o,i=e}}return t},parseType:{dataType:"String",predicate:/^TY {2}- /m}},"@ris/record":{parse:function(e){return ub(rb.mixed).convertToTarget(e)},parseType:{dataType:"SimpleObject",propertyConstraint:{props:["TY"]}}},"@ris/new+record":{parse:function(e){return ub(rb.new).convertToTarget(e)},parseType:{extends:"@ris/record",propertyConstraint:[{props:mb,match:"some"},{props:db,match:"none"}]}},"@ris/old+record":{parse:function(e){return ub(rb.old).convertToTarget(e)},parseType:{extends:"@ris/record",propertyConstraint:[{props:db,match:"some"},{props:mb,match:"none"}]}}},config:Vv,output:{ris:function(e,{type:t,format:r=t||"text",spec:i}={}){const n=i||Vv.outputSpec,o=ub(rb[n]).convertToSource,s=e.map(e=>o(e.type?e:ob(ob({},e),{},{type:"document"})));return"object"===r?s:s.map(e=>{const t=[];for(const r in e)"TY"!==r&&t.push(...[].concat(e[r]).map(e=>`${r}  - ${e.toString().replace(/(.{70})/g,"$1\n")}`));return t.unshift(`TY  - ${e.TY}`),t.push("ER  - "),t.join("\n")}).join("\n")}}});const pb=new Mh(JSON.parse('{"en-US":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"en-US\\"><info><translator><name>Andrew Dunning</name></translator><translator><name>Sebastian Karcher</name></translator><translator><name>Rintze M. Zelle</name></translator><translator><name>Denis Meier</name></translator><translator><name>Brenton M. Wiernik</name></translator><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2015-10-10T23:31:02+00:00</updated></info><style-options punctuation-in-quote=\\"true\\"/><date form=\\"text\\"><date-part name=\\"month\\" suffix=\\" \\"/><date-part name=\\"day\\" suffix=\\", \\"/><date-part name=\\"year\\"/></date><date form=\\"numeric\\"><date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/><date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/><date-part name=\\"year\\"/></date><terms><term name=\\"advance-online-publication\\">advance online publication</term><term name=\\"album\\">album</term><term name=\\"audio-recording\\">audio recording</term><term name=\\"film\\">film</term><term name=\\"henceforth\\">henceforth</term><term name=\\"loc-cit\\">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"no-place\\">no place</term><term name=\\"no-place\\" form=\\"short\\">n.p.</term><term name=\\"no-publisher\\">no publisher</term> \x3c!-- sine nomine --\x3e<term name=\\"no-publisher\\" form=\\"short\\">n.p.</term><term name=\\"on\\">on</term><term name=\\"op-cit\\">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"original-work-published\\">original work published</term><term name=\\"personal-communication\\">personal communication</term><term name=\\"podcast\\">podcast</term><term name=\\"podcast-episode\\">podcast episode</term><term name=\\"preprint\\">preprint</term><term name=\\"radio-broadcast\\">radio broadcast</term><term name=\\"radio-series\\">radio series</term><term name=\\"radio-series-episode\\">radio series episode</term><term name=\\"special-issue\\">special issue</term><term name=\\"special-section\\">special section</term><term name=\\"television-broadcast\\">television broadcast</term><term name=\\"television-series\\">television series</term><term name=\\"television-series-episode\\">television series episode</term><term name=\\"video\\">video</term><term name=\\"working-paper\\">working paper</term><term name=\\"accessed\\">accessed</term><term name=\\"and\\">and</term><term name=\\"and others\\">and others</term><term name=\\"anonymous\\">anonymous</term><term name=\\"anonymous\\" form=\\"short\\">anon.</term><term name=\\"at\\">at</term><term name=\\"available at\\">available at</term><term name=\\"by\\">by</term><term name=\\"circa\\">circa</term><term name=\\"circa\\" form=\\"short\\">c.</term><term name=\\"cited\\">cited</term><term name=\\"edition\\"><single>edition</single><multiple>editions</multiple></term><term name=\\"edition\\" form=\\"short\\">ed.</term><term name=\\"et-al\\">et al.</term><term name=\\"forthcoming\\">forthcoming</term><term name=\\"from\\">from</term><term name=\\"ibid\\">ibid.</term><term name=\\"in\\">in</term><term name=\\"in press\\">in press</term><term name=\\"internet\\">internet</term><term name=\\"interview\\">interview</term><term name=\\"letter\\">letter</term><term name=\\"no date\\">no date</term><term name=\\"no date\\" form=\\"short\\">n.d.</term><term name=\\"online\\">online</term><term name=\\"presented at\\">presented at the</term><term name=\\"reference\\"><single>reference</single><multiple>references</multiple></term><term name=\\"reference\\" form=\\"short\\"><single>ref.</single><multiple>refs.</multiple></term><term name=\\"retrieved\\">retrieved</term><term name=\\"scale\\">scale</term><term name=\\"version\\">version</term>\\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name=\\"article\\">preprint</term><term name=\\"article-journal\\">journal article</term><term name=\\"article-magazine\\">magazine article</term><term name=\\"article-newspaper\\">newspaper article</term><term name=\\"bill\\">bill</term><term name=\\"book\\">book</term><term name=\\"broadcast\\">broadcast</term><term name=\\"chapter\\">book chapter</term><term name=\\"classic\\">classic</term><term name=\\"collection\\">collection</term><term name=\\"dataset\\">dataset</term><term name=\\"document\\">document</term><term name=\\"entry\\">entry</term><term name=\\"entry-dictionary\\">dictionary entry</term><term name=\\"entry-encyclopedia\\">encyclopedia entry</term><term name=\\"event\\">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\">graphic</term><term name=\\"hearing\\">hearing</term><term name=\\"interview\\">interview</term><term name=\\"legal_case\\">legal case</term><term name=\\"legislation\\">legislation</term><term name=\\"manuscript\\">manuscript</term><term name=\\"map\\">map</term><term name=\\"motion_picture\\">video recording</term><term name=\\"musical_score\\">musical score</term><term name=\\"pamphlet\\">pamphlet</term><term name=\\"paper-conference\\">conference paper</term><term name=\\"patent\\">patent</term><term name=\\"performance\\">performance</term><term name=\\"periodical\\">periodical</term><term name=\\"personal_communication\\">personal communication</term><term name=\\"post\\">post</term><term name=\\"post-weblog\\">blog post</term><term name=\\"regulation\\">regulation</term><term name=\\"report\\">report</term><term name=\\"review\\">review</term><term name=\\"review-book\\">book review</term><term name=\\"software\\">software</term><term name=\\"song\\">audio recording</term><term name=\\"speech\\">presentation</term><term name=\\"standard\\">standard</term><term name=\\"thesis\\">thesis</term><term name=\\"treaty\\">treaty</term><term name=\\"webpage\\">webpage</term>\\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name=\\"article-journal\\" form=\\"short\\">journal art.</term><term name=\\"article-magazine\\" form=\\"short\\">mag. art.</term><term name=\\"article-newspaper\\" form=\\"short\\">newspaper art.</term><term name=\\"book\\" form=\\"short\\">bk.</term><term name=\\"chapter\\" form=\\"short\\">bk. chap.</term><term name=\\"document\\" form=\\"short\\">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\" form=\\"short\\">graph.</term><term name=\\"interview\\" form=\\"short\\">interv.</term><term name=\\"manuscript\\" form=\\"short\\">MS</term><term name=\\"motion_picture\\" form=\\"short\\">video rec.</term><term name=\\"report\\" form=\\"short\\">rep.</term><term name=\\"review\\" form=\\"short\\">rev.</term><term name=\\"review-book\\" form=\\"short\\">bk. rev.</term><term name=\\"song\\" form=\\"short\\">audio rec.</term>\\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name=\\"ad\\">AD</term><term name=\\"bc\\">BC</term><term name=\\"bce\\">BCE</term><term name=\\"ce\\">CE</term>\\n\x3c!-- PUNCTUATION --\x3e<term name=\\"open-quote\\">“</term><term name=\\"close-quote\\">”</term><term name=\\"open-inner-quote\\">‘</term><term name=\\"close-inner-quote\\">’</term><term name=\\"page-range-delimiter\\">–</term><term name=\\"colon\\">:</term><term name=\\"comma\\">,</term><term name=\\"semicolon\\">;</term>\\n\x3c!-- ORDINALS --\x3e<term name=\\"ordinal\\">th</term><term name=\\"ordinal-01\\">st</term><term name=\\"ordinal-02\\">nd</term><term name=\\"ordinal-03\\">rd</term><term name=\\"ordinal-11\\">th</term><term name=\\"ordinal-12\\">th</term><term name=\\"ordinal-13\\">th</term>\\n\x3c!-- LONG ORDINALS --\x3e<term name=\\"long-ordinal-01\\">first</term><term name=\\"long-ordinal-02\\">second</term><term name=\\"long-ordinal-03\\">third</term><term name=\\"long-ordinal-04\\">fourth</term><term name=\\"long-ordinal-05\\">fifth</term><term name=\\"long-ordinal-06\\">sixth</term><term name=\\"long-ordinal-07\\">seventh</term><term name=\\"long-ordinal-08\\">eighth</term><term name=\\"long-ordinal-09\\">ninth</term><term name=\\"long-ordinal-10\\">tenth</term>\\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name=\\"act\\">\\t\\t\\t <single>act</single><multiple>acts</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"appendix\\">\\t\\t\\t <single>appendix</single><multiple>appendices</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>article</single><multiple>articles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"canon\\">\\t\\t\\t <single>canon</single><multiple>canons</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"elocation\\">\\t\\t\\t <single>location</single><multiple>locations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"equation\\">\\t\\t\\t <single>equation</single><multiple>equations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"rule\\">\\t\\t\\t <single>rule</single><multiple>rules</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>scene</single><multiple>scenes</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>table</single><multiple>tables</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>title</single><multiple>titles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"book\\"><single>book</single><multiple>books</multiple></term><term name=\\"chapter\\"><single>chapter</single><multiple>chapters</multiple></term><term name=\\"column\\"><single>column</single><multiple>columns</multiple></term><term name=\\"figure\\"><single>figure</single><multiple>figures</multiple></term><term name=\\"folio\\"><single>folio</single><multiple>folios</multiple></term><term name=\\"issue\\"><single>number</single><multiple>numbers</multiple></term><term name=\\"line\\"><single>line</single><multiple>lines</multiple></term><term name=\\"note\\"><single>note</single><multiple>notes</multiple></term><term name=\\"opus\\"><single>opus</single><multiple>opera</multiple></term><term name=\\"page\\"><single>page</single><multiple>pages</multiple></term><term name=\\"number-of-pages\\"><single>page</single><multiple>pages</multiple></term><term name=\\"paragraph\\"><single>paragraph</single><multiple>paragraphs</multiple></term><term name=\\"part\\"><single>part</single><multiple>parts</multiple></term><term name=\\"section\\"><single>section</single><multiple>sections</multiple></term><term name=\\"sub-verbo\\"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name=\\"verse\\"><single>verse</single><multiple>verses</multiple></term><term name=\\"volume\\"><single>volume</single><multiple>volumes</multiple></term>\\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name=\\"appendix\\" form=\\"short\\">\\t\\t\\t <single>app.</single><multiple>apps.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\" form=\\"short\\">\\t\\t\\t <single>art.</single><multiple>arts.</multiple></term><term name=\\"elocation\\" form=\\"short\\">\\t\\t\\t <single>loc.</single><multiple>locs.</multiple></term><term name=\\"equation\\" form=\\"short\\">\\t\\t\\t <single>eq.</single><multiple>eqs.</multiple></term><term name=\\"rule\\" form=\\"short\\">\\t\\t\\t <single>r.</single><multiple>rr.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\" form=\\"short\\">\\t\\t\\t <single>sc.</single><multiple>scs.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\" form=\\"short\\">\\t\\t\\t <single>tbl.</single><multiple>tbls.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\" form=\\"short\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\" form=\\"short\\">\\t\\t\\t <single>tit.</single><multiple>tits.</multiple></term><term name=\\"book\\" form=\\"short\\"><single>bk.</single><multiple>bks.</multiple></term><term name=\\"chapter\\" form=\\"short\\"><single>chap.</single><multiple>chaps.</multiple></term><term name=\\"column\\" form=\\"short\\"><single>col.</single><multiple>cols.</multiple></term><term name=\\"figure\\" form=\\"short\\"><single>fig.</single><multiple>figs.</multiple></term><term name=\\"folio\\" form=\\"short\\"><single>fol.</single><multiple>fols.</multiple></term><term name=\\"issue\\" form=\\"short\\"><single>no.</single><multiple>nos.</multiple></term><term name=\\"line\\" form=\\"short\\"><single>l.</single><multiple>ll.</multiple></term><term name=\\"note\\" form=\\"short\\"><single>n.</single><multiple>nn.</multiple></term><term name=\\"opus\\" form=\\"short\\"><single>op.</single><multiple>opp.</multiple></term><term name=\\"page\\" form=\\"short\\"><single>p.</single><multiple>pp.</multiple></term><term name=\\"number-of-pages\\" form=\\"short\\"><single>p.</single><multiple>pp.</multiple></term><term name=\\"paragraph\\" form=\\"short\\"><single>para.</single><multiple>paras.</multiple></term><term name=\\"part\\" form=\\"short\\"><single>pt.</single><multiple>pts.</multiple></term><term name=\\"section\\" form=\\"short\\"><single>sec.</single><multiple>secs.</multiple></term><term name=\\"sub-verbo\\" form=\\"short\\"><single>s.v.</single><multiple>s.vv.</multiple></term><term name=\\"verse\\" form=\\"short\\"><single>v.</single><multiple>vv.</multiple></term><term name=\\"volume\\" form=\\"short\\"><single>vol.</single><multiple>vols.</multiple></term>\\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name=\\"paragraph\\" form=\\"symbol\\"><single>¶</single><multiple>¶¶</multiple></term><term name=\\"section\\" form=\\"symbol\\"><single>§</single><multiple>§§</multiple></term>\\n\x3c!-- LONG ROLE FORMS --\x3e<term name=\\"chair\\"><single>chair</single><multiple>chairs</multiple></term><term name=\\"compiler\\"><single>compiler</single><multiple>compilers</multiple></term><term name=\\"contributor\\"><single>contributor</single><multiple>contributors</multiple></term><term name=\\"curator\\"><single>curator</single><multiple>curators</multiple></term><term name=\\"executive-producer\\"><single>executive producer</single><multiple>executive producers</multiple></term><term name=\\"guest\\"><single>guest</single><multiple>guests</multiple></term><term name=\\"host\\"><single>host</single><multiple>hosts</multiple></term><term name=\\"narrator\\"><single>narrator</single><multiple>narrators</multiple></term><term name=\\"organizer\\"><single>organizer</single><multiple>organizers</multiple></term><term name=\\"performer\\"><single>performer</single><multiple>performers</multiple></term><term name=\\"producer\\"><single>producer</single><multiple>producers</multiple></term><term name=\\"script-writer\\"><single>writer</single><multiple>writers</multiple></term><term name=\\"series-creator\\"><single>series creator</single><multiple>series creators</multiple></term><term name=\\"director\\"><single>director</single><multiple>directors</multiple></term><term name=\\"editor\\"><single>editor</single><multiple>editors</multiple></term><term name=\\"editorial-director\\"><single>editor</single><multiple>editors</multiple></term><term name=\\"illustrator\\"><single>illustrator</single><multiple>illustrators</multiple></term><term name=\\"translator\\"><single>translator</single><multiple>translators</multiple></term><term name=\\"editortranslator\\"><single>editor &amp; translator</single><multiple>editors &amp; translators</multiple></term>\\n\x3c!-- SHORT ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"short\\"><single>comp.</single><multiple>comps.</multiple></term><term name=\\"contributor\\" form=\\"short\\"><single>contrib.</single><multiple>contribs.</multiple></term><term name=\\"curator\\" form=\\"short\\"><single>cur.</single><multiple>curs.</multiple></term><term name=\\"executive-producer\\" form=\\"short\\"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name=\\"narrator\\" form=\\"short\\"><single>narr.</single><multiple>narrs.</multiple></term><term name=\\"organizer\\" form=\\"short\\"><single>org.</single><multiple>orgs.</multiple></term><term name=\\"performer\\" form=\\"short\\"><single>perf.</single><multiple>perfs.</multiple></term><term name=\\"producer\\" form=\\"short\\"><single>prod.</single><multiple>prods.</multiple></term><term name=\\"script-writer\\" form=\\"short\\"><single>writ.</single><multiple>writs.</multiple></term><term name=\\"series-creator\\" form=\\"short\\"><single>cre.</single><multiple>cres.</multiple></term><term name=\\"director\\" form=\\"short\\"><single>dir.</single><multiple>dirs.</multiple></term><term name=\\"editor\\" form=\\"short\\"><single>ed.</single><multiple>eds.</multiple></term><term name=\\"editorial-director\\" form=\\"short\\"><single>ed.</single><multiple>eds.</multiple></term><term name=\\"illustrator\\" form=\\"short\\"><single>ill.</single><multiple>ills.</multiple></term><term name=\\"translator\\" form=\\"short\\"><single>tran.</single><multiple>trans.</multiple></term><term name=\\"editortranslator\\" form=\\"short\\"><single>ed. &amp; tran.</single><multiple>eds. &amp; trans.</multiple></term>\\n\x3c!-- VERB ROLE FORMS --\x3e<term name=\\"chair\\" form=\\"verb\\">chaired by</term><term name=\\"compiler\\" form=\\"verb\\">compiled by</term><term name=\\"contributor\\" form=\\"verb\\">with</term><term name=\\"curator\\" form=\\"verb\\">curated by</term><term name=\\"executive-producer\\" form=\\"verb\\">executive produced by</term><term name=\\"guest\\" form=\\"verb\\">with guest</term><term name=\\"host\\" form=\\"verb\\">hosted by</term><term name=\\"narrator\\" form=\\"verb\\">narrated by</term><term name=\\"organizer\\" form=\\"verb\\">organized by</term><term name=\\"performer\\" form=\\"verb\\">performed by</term><term name=\\"producer\\" form=\\"verb\\">produced by</term><term name=\\"script-writer\\" form=\\"verb\\">written by</term><term name=\\"series-creator\\" form=\\"verb\\">created by</term><term name=\\"container-author\\" form=\\"verb\\">by</term><term name=\\"director\\" form=\\"verb\\">directed by</term><term name=\\"editor\\" form=\\"verb\\">edited by</term><term name=\\"editorial-director\\" form=\\"verb\\">edited by</term><term name=\\"illustrator\\" form=\\"verb\\">illustrated by</term><term name=\\"interviewer\\" form=\\"verb\\">interview by</term><term name=\\"recipient\\" form=\\"verb\\">to</term><term name=\\"reviewed-author\\" form=\\"verb\\">by</term><term name=\\"translator\\" form=\\"verb\\">translated by</term><term name=\\"editortranslator\\" form=\\"verb\\">edited &amp; translated by</term>\\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"verb-short\\">comp. by</term><term name=\\"contributor\\" form=\\"verb-short\\">w.</term><term name=\\"curator\\" form=\\"verb-short\\">cur. by</term><term name=\\"executive-producer\\" form=\\"verb-short\\">exec. prod. by</term><term name=\\"guest\\" form=\\"verb-short\\">w. guest</term><term name=\\"host\\" form=\\"verb-short\\">hosted by</term><term name=\\"narrator\\" form=\\"verb-short\\">narr. by</term><term name=\\"organizer\\" form=\\"verb-short\\">org. by</term><term name=\\"performer\\" form=\\"verb-short\\">perf. by</term><term name=\\"producer\\" form=\\"verb-short\\">prod. by</term><term name=\\"script-writer\\" form=\\"verb-short\\">writ. by</term><term name=\\"series-creator\\" form=\\"verb-short\\">cre. by</term><term name=\\"director\\" form=\\"verb-short\\">dir. by</term><term name=\\"editor\\" form=\\"verb-short\\">ed. by</term><term name=\\"editorial-director\\" form=\\"verb-short\\">ed. by</term><term name=\\"illustrator\\" form=\\"verb-short\\">illus. by</term><term name=\\"translator\\" form=\\"verb-short\\">trans. by</term><term name=\\"editortranslator\\" form=\\"verb-short\\">ed. &amp; trans. by</term>\\n\x3c!-- LONG MONTH FORMS --\x3e<term name=\\"month-01\\">January</term><term name=\\"month-02\\">February</term><term name=\\"month-03\\">March</term><term name=\\"month-04\\">April</term><term name=\\"month-05\\">May</term><term name=\\"month-06\\">June</term><term name=\\"month-07\\">July</term><term name=\\"month-08\\">August</term><term name=\\"month-09\\">September</term><term name=\\"month-10\\">October</term><term name=\\"month-11\\">November</term><term name=\\"month-12\\">December</term>\\n\x3c!-- SHORT MONTH FORMS --\x3e<term name=\\"month-01\\" form=\\"short\\">Jan.</term><term name=\\"month-02\\" form=\\"short\\">Feb.</term><term name=\\"month-03\\" form=\\"short\\">Mar.</term><term name=\\"month-04\\" form=\\"short\\">Apr.</term><term name=\\"month-05\\" form=\\"short\\">May</term><term name=\\"month-06\\" form=\\"short\\">Jun.</term><term name=\\"month-07\\" form=\\"short\\">Jul.</term><term name=\\"month-08\\" form=\\"short\\">Aug.</term><term name=\\"month-09\\" form=\\"short\\">Sep.</term><term name=\\"month-10\\" form=\\"short\\">Oct.</term><term name=\\"month-11\\" form=\\"short\\">Nov.</term><term name=\\"month-12\\" form=\\"short\\">Dec.</term>\\n\x3c!-- SEASONS --\x3e<term name=\\"season-01\\">Spring</term><term name=\\"season-02\\">Summer</term><term name=\\"season-03\\">Autumn</term><term name=\\"season-04\\">Winter</term></terms>\\n</locale>\\n","nl-NL":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"nl-NL\\"><info><translator><name>Rintze M. Zelle</name><uri>http://twitter.com/rintzezelle</uri></translator><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2017-04-01T12:00:00+00:00</updated></info><style-options punctuation-in-quote=\\"false\\"/><date form=\\"text\\"><date-part name=\\"day\\" suffix=\\" \\"/><date-part name=\\"month\\" suffix=\\" \\"/><date-part name=\\"year\\"/></date><date form=\\"numeric\\"><date-part name=\\"day\\" suffix=\\"-\\" range-delimiter=\\"/\\"/><date-part name=\\"month\\" form=\\"numeric\\" suffix=\\"-\\" range-delimiter=\\"/\\"/><date-part name=\\"year\\"/></date><terms><term name=\\"advance-online-publication\\">advance online publication</term><term name=\\"album\\">album</term><term name=\\"audio-recording\\">audio recording</term><term name=\\"film\\">film</term><term name=\\"henceforth\\">henceforth</term><term name=\\"loc-cit\\">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"no-place\\">no place</term><term name=\\"no-place\\" form=\\"short\\">n.p.</term><term name=\\"no-publisher\\">no publisher</term> \x3c!-- sine nomine --\x3e<term name=\\"no-publisher\\" form=\\"short\\">n.p.</term><term name=\\"on\\">on</term><term name=\\"op-cit\\">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"original-work-published\\">original work published</term><term name=\\"personal-communication\\">persoonlijke communicatie</term><term name=\\"podcast\\">podcast</term><term name=\\"podcast-episode\\">podcast episode</term><term name=\\"preprint\\">preprint</term><term name=\\"radio-broadcast\\">radio broadcast</term><term name=\\"radio-series\\">radio series</term><term name=\\"radio-series-episode\\">radio series episode</term><term name=\\"special-issue\\">special issue</term><term name=\\"special-section\\">special section</term><term name=\\"television-broadcast\\">television broadcast</term><term name=\\"television-series\\">television series</term><term name=\\"television-series-episode\\">television series episode</term><term name=\\"video\\">video</term><term name=\\"working-paper\\">working paper</term><term name=\\"accessed\\">geraadpleegd</term><term name=\\"and\\">en</term><term name=\\"and others\\">en anderen</term><term name=\\"anonymous\\">anoniem</term><term name=\\"anonymous\\" form=\\"short\\">anon.</term><term name=\\"at\\">bij</term><term name=\\"available at\\">beschikbaar op</term><term name=\\"by\\">door</term><term name=\\"circa\\">circa</term><term name=\\"circa\\" form=\\"short\\">c.</term><term name=\\"cited\\">geciteerd</term><term name=\\"edition\\"><single>druk</single><multiple>drukken</multiple></term><term name=\\"edition\\" form=\\"short\\">dr.</term><term name=\\"et-al\\">e.a.</term><term name=\\"forthcoming\\">in voorbereiding</term><term name=\\"from\\">van</term><term name=\\"ibid\\">ibid.</term><term name=\\"in\\">in</term><term name=\\"in press\\">in druk</term><term name=\\"internet\\">internet</term><term name=\\"interview\\">interview</term><term name=\\"letter\\">brief</term><term name=\\"no date\\">zonder datum</term><term name=\\"no date\\" form=\\"short\\">z.d.</term><term name=\\"online\\">online</term><term name=\\"presented at\\">gepresenteerd bij</term><term name=\\"reference\\"><single>referentie</single><multiple>referenties</multiple></term><term name=\\"reference\\" form=\\"short\\"><single>ref.</single><multiple>refs.</multiple></term><term name=\\"retrieved\\">geraadpleegd</term><term name=\\"scale\\">schaal</term><term name=\\"version\\">versie</term>\\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name=\\"article\\">preprint</term><term name=\\"article-journal\\">journal article</term><term name=\\"article-magazine\\">magazine article</term><term name=\\"article-newspaper\\">newspaper article</term><term name=\\"bill\\">bill</term><term name=\\"book\\">book</term><term name=\\"broadcast\\">broadcast</term><term name=\\"chapter\\">book chapter</term><term name=\\"classic\\">classic</term><term name=\\"collection\\">collection</term><term name=\\"dataset\\">dataset</term><term name=\\"document\\">document</term><term name=\\"entry\\">entry</term><term name=\\"entry-dictionary\\">dictionary entry</term><term name=\\"entry-encyclopedia\\">encyclopedia entry</term><term name=\\"event\\">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\">graphic</term><term name=\\"hearing\\">hearing</term><term name=\\"interview\\">interview</term><term name=\\"legal_case\\">legal case</term><term name=\\"legislation\\">legislation</term><term name=\\"manuscript\\">manuscript</term><term name=\\"map\\">map</term><term name=\\"motion_picture\\">video recording</term><term name=\\"musical_score\\">musical score</term><term name=\\"pamphlet\\">pamphlet</term><term name=\\"paper-conference\\">conference paper</term><term name=\\"patent\\">patent</term><term name=\\"performance\\">performance</term><term name=\\"periodical\\">periodical</term><term name=\\"personal_communication\\">persoonlijke communicatie</term><term name=\\"post\\">post</term><term name=\\"post-weblog\\">blog post</term><term name=\\"regulation\\">regulation</term><term name=\\"report\\">report</term><term name=\\"review\\">review</term><term name=\\"review-book\\">book review</term><term name=\\"software\\">software</term><term name=\\"song\\">audio recording</term><term name=\\"speech\\">presentation</term><term name=\\"standard\\">standard</term><term name=\\"thesis\\">thesis</term><term name=\\"treaty\\">treaty</term><term name=\\"webpage\\">webpage</term>\\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name=\\"article-journal\\" form=\\"short\\">journal art.</term><term name=\\"article-magazine\\" form=\\"short\\">mag. art.</term><term name=\\"article-newspaper\\" form=\\"short\\">newspaper art.</term><term name=\\"book\\" form=\\"short\\">bk.</term><term name=\\"chapter\\" form=\\"short\\">bk. chap.</term><term name=\\"document\\" form=\\"short\\">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\" form=\\"short\\">graph.</term><term name=\\"interview\\" form=\\"short\\">interv.</term><term name=\\"manuscript\\" form=\\"short\\">MS</term><term name=\\"motion_picture\\" form=\\"short\\">video rec.</term><term name=\\"report\\" form=\\"short\\">rep.</term><term name=\\"review\\" form=\\"short\\">rev.</term><term name=\\"review-book\\" form=\\"short\\">bk. rev.</term><term name=\\"song\\" form=\\"short\\">audio rec.</term>\\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name=\\"ad\\">AD</term><term name=\\"bc\\">BC</term><term name=\\"bce\\">BCE</term><term name=\\"ce\\">CE</term>\\n\x3c!-- PUNCTUATION --\x3e<term name=\\"open-quote\\">‘</term><term name=\\"close-quote\\">’</term><term name=\\"open-inner-quote\\">“</term><term name=\\"close-inner-quote\\">”</term><term name=\\"page-range-delimiter\\">–</term><term name=\\"colon\\">:</term><term name=\\"comma\\">,</term><term name=\\"semicolon\\">;</term>\\n\x3c!-- ORDINALS --\x3e<term name=\\"ordinal\\">ste</term><term name=\\"ordinal-00\\" match=\\"whole-number\\">de</term><term name=\\"ordinal-02\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-03\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-04\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-05\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-06\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-07\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-09\\" match=\\"last-two-digits\\">de</term><term name=\\"ordinal-10\\">de</term><term name=\\"ordinal-11\\">de</term><term name=\\"ordinal-12\\">de</term><term name=\\"ordinal-13\\">de</term><term name=\\"ordinal-14\\">de</term><term name=\\"ordinal-15\\">de</term><term name=\\"ordinal-16\\">de</term><term name=\\"ordinal-17\\">de</term><term name=\\"ordinal-18\\">de</term><term name=\\"ordinal-19\\">de</term>\\n\x3c!-- LONG ORDINALS --\x3e<term name=\\"long-ordinal-01\\">eerste</term><term name=\\"long-ordinal-02\\">tweede</term><term name=\\"long-ordinal-03\\">derde</term><term name=\\"long-ordinal-04\\">vierde</term><term name=\\"long-ordinal-05\\">vijfde</term><term name=\\"long-ordinal-06\\">zesde</term><term name=\\"long-ordinal-07\\">zevende</term><term name=\\"long-ordinal-08\\">achtste</term><term name=\\"long-ordinal-09\\">negende</term><term name=\\"long-ordinal-10\\">tiende</term>\\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name=\\"act\\">\\t\\t\\t <single>act</single><multiple>acts</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"appendix\\">\\t\\t\\t <single>appendix</single><multiple>appendices</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>article</single><multiple>articles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"canon\\">\\t\\t\\t <single>canon</single><multiple>canons</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"elocation\\">\\t\\t\\t <single>location</single><multiple>locations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"equation\\">\\t\\t\\t <single>equation</single><multiple>equations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"rule\\">\\t\\t\\t <single>rule</single><multiple>rules</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>scene</single><multiple>scenes</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>table</single><multiple>tables</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>title</single><multiple>titles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"book\\"><single>boek</single><multiple>boeken</multiple></term><term name=\\"chapter\\"><single>hoofdstuk</single><multiple>hoofdstukken</multiple></term><term name=\\"column\\"><single>column</single><multiple>columns</multiple></term><term name=\\"figure\\"><single>figuur</single><multiple>figuren</multiple></term><term name=\\"folio\\"><single>folio</single><multiple>folio\'s</multiple></term><term name=\\"issue\\"><single>nummer</single><multiple>nummers</multiple></term><term name=\\"line\\"><single>regel</single><multiple>regels</multiple></term><term name=\\"note\\"><single>aantekening</single><multiple>aantekeningen</multiple></term><term name=\\"opus\\"><single>opus</single><multiple>opera</multiple></term><term name=\\"page\\"><single>pagina</single><multiple>pagina\'s</multiple></term><term name=\\"number-of-pages\\"><single>pagina</single><multiple>pagina\'s</multiple></term><term name=\\"paragraph\\"><single>paragraaf</single><multiple>paragrafen</multiple></term><term name=\\"part\\"><single>deel</single><multiple>delen</multiple></term><term name=\\"section\\"><single>sectie</single><multiple>secties</multiple></term><term name=\\"sub-verbo\\"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name=\\"verse\\"><single>vers</single><multiple>versen</multiple></term><term name=\\"volume\\"><single>volume</single><multiple>volumes</multiple></term>\\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name=\\"appendix\\">\\t\\t\\t <single>app.</single><multiple>apps.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>art.</single><multiple>arts.</multiple></term><term name=\\"elocation\\">\\t\\t\\t <single>loc.</single><multiple>locs.</multiple></term><term name=\\"equation\\">\\t\\t\\t <single>eq.</single><multiple>eqs.</multiple></term><term name=\\"rule\\">\\t\\t\\t <single>r.</single><multiple>rr.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>sc.</single><multiple>scs.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>tbl.</single><multiple>tbls.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>tit.</single><multiple>tits.</multiple></term><term name=\\"book\\" form=\\"short\\">bk.</term><term name=\\"chapter\\" form=\\"short\\">hfdst.</term><term name=\\"column\\" form=\\"short\\">col.</term><term name=\\"figure\\" form=\\"short\\">fig.</term><term name=\\"folio\\" form=\\"short\\">f.</term><term name=\\"issue\\" form=\\"short\\">nr.</term><term name=\\"line\\" form=\\"short\\">l.</term><term name=\\"note\\" form=\\"short\\">n.</term><term name=\\"opus\\" form=\\"short\\">op.</term><term name=\\"page\\" form=\\"short\\"><single>p.</single><multiple>pp.</multiple></term><term name=\\"number-of-pages\\" form=\\"short\\"><single>p.</single><multiple>pp.</multiple></term><term name=\\"paragraph\\" form=\\"short\\">par.</term><term name=\\"part\\" form=\\"short\\">deel</term><term name=\\"section\\" form=\\"short\\">sec.</term><term name=\\"sub-verbo\\" form=\\"short\\"><single>s.v.</single><multiple>s.vv.</multiple></term><term name=\\"verse\\" form=\\"short\\"><single>v.</single><multiple>vv.</multiple></term><term name=\\"volume\\" form=\\"short\\"><single>vol.</single><multiple>vols.</multiple></term>\\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name=\\"paragraph\\" form=\\"symbol\\"><single>¶</single><multiple>¶¶</multiple></term><term name=\\"section\\" form=\\"symbol\\"><single>§</single><multiple>§§</multiple></term>\\n\x3c!-- LONG ROLE FORMS --\x3e<term name=\\"chair\\"><single>chair</single><multiple>chairs</multiple></term><term name=\\"compiler\\"><single>compiler</single><multiple>compilers</multiple></term><term name=\\"contributor\\"><single>contributor</single><multiple>contributors</multiple></term><term name=\\"curator\\"><single>curator</single><multiple>curators</multiple></term><term name=\\"executive-producer\\"><single>executive producer</single><multiple>executive producers</multiple></term><term name=\\"guest\\"><single>guest</single><multiple>guests</multiple></term><term name=\\"host\\"><single>host</single><multiple>hosts</multiple></term><term name=\\"narrator\\"><single>narrator</single><multiple>narrators</multiple></term><term name=\\"organizer\\"><single>organizer</single><multiple>organizers</multiple></term><term name=\\"performer\\"><single>performer</single><multiple>performers</multiple></term><term name=\\"producer\\"><single>producer</single><multiple>producers</multiple></term><term name=\\"script-writer\\"><single>writer</single><multiple>writers</multiple></term><term name=\\"series-creator\\"><single>series creator</single><multiple>series creators</multiple></term><term name=\\"director\\"><single>regisseur</single><multiple>regisseurs</multiple></term><term name=\\"editor\\"><single>redacteur</single><multiple>redacteuren</multiple></term><term name=\\"editorial-director\\"><single>redacteur</single><multiple>redacteuren</multiple></term><term name=\\"illustrator\\"><single>illustrator</single><multiple>illustrators</multiple></term><term name=\\"translator\\"><single>vertaler</single><multiple>vertalers</multiple></term><term name=\\"editortranslator\\"><single>redacteur &amp; vertaler</single><multiple>redacteuren &amp; vertalers</multiple></term>\\n\x3c!-- SHORT ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"short\\"><single>comp.</single><multiple>comps.</multiple></term><term name=\\"contributor\\" form=\\"short\\"><single>contrib.</single><multiple>contribs.</multiple></term><term name=\\"curator\\" form=\\"short\\"><single>cur.</single><multiple>curs.</multiple></term><term name=\\"executive-producer\\" form=\\"short\\"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name=\\"narrator\\" form=\\"short\\"><single>narr.</single><multiple>narrs.</multiple></term><term name=\\"organizer\\" form=\\"short\\"><single>org.</single><multiple>orgs.</multiple></term><term name=\\"performer\\" form=\\"short\\"><single>perf.</single><multiple>perfs.</multiple></term><term name=\\"producer\\" form=\\"short\\"><single>prod.</single><multiple>prods.</multiple></term><term name=\\"script-writer\\" form=\\"short\\"><single>writ.</single><multiple>writs.</multiple></term><term name=\\"series-creator\\" form=\\"short\\"><single>cre.</single><multiple>cres.</multiple></term><term name=\\"director\\" form=\\"short\\"><single>reg.</single><multiple>reg.</multiple></term><term name=\\"editor\\" form=\\"short\\"><single>red.</single><multiple>red.</multiple></term><term name=\\"editorial-director\\" form=\\"short\\"><single>red.</single><multiple>red.</multiple></term><term name=\\"illustrator\\" form=\\"short\\"><single>ill.</single><multiple>ill.</multiple></term><term name=\\"translator\\" form=\\"short\\"><single>vert.</single><multiple>vert.</multiple></term><term name=\\"editortranslator\\" form=\\"short\\"><single>red. &amp; vert.</single><multiple>red. &amp; vert.</multiple></term>\\n\x3c!-- VERB ROLE FORMS --\x3e<term name=\\"chair\\" form=\\"verb\\">chaired by</term><term name=\\"compiler\\" form=\\"verb\\">compiled by</term><term name=\\"contributor\\" form=\\"verb\\">with</term><term name=\\"curator\\" form=\\"verb\\">curated by</term><term name=\\"executive-producer\\" form=\\"verb\\">executive produced by</term><term name=\\"guest\\" form=\\"verb\\">with guest</term><term name=\\"host\\" form=\\"verb\\">hosted by</term><term name=\\"narrator\\" form=\\"verb\\">narrated by</term><term name=\\"organizer\\" form=\\"verb\\">organized by</term><term name=\\"performer\\" form=\\"verb\\">performed by</term><term name=\\"producer\\" form=\\"verb\\">produced by</term><term name=\\"script-writer\\" form=\\"verb\\">written by</term><term name=\\"series-creator\\" form=\\"verb\\">created by</term><term name=\\"container-author\\" form=\\"verb\\">door</term><term name=\\"director\\" form=\\"verb\\">geregisseerd door</term><term name=\\"editor\\" form=\\"verb\\">onder redactie van</term><term name=\\"editorial-director\\" form=\\"verb\\">onder redactie van</term><term name=\\"illustrator\\" form=\\"verb\\">geïllustreerd door</term><term name=\\"interviewer\\" form=\\"verb\\">geïnterviewd door</term><term name=\\"recipient\\" form=\\"verb\\">ontvangen door</term><term name=\\"reviewed-author\\" form=\\"verb\\">door</term><term name=\\"translator\\" form=\\"verb\\">vertaald door</term><term name=\\"editortranslator\\" form=\\"verb\\">bewerkt &amp; vertaald door</term>\\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"verb-short\\">comp. by</term><term name=\\"contributor\\" form=\\"verb-short\\">w.</term><term name=\\"curator\\" form=\\"verb-short\\">cur. by</term><term name=\\"executive-producer\\" form=\\"verb-short\\">exec. prod. by</term><term name=\\"guest\\" form=\\"verb-short\\">w. guest</term><term name=\\"host\\" form=\\"verb-short\\">hosted by</term><term name=\\"narrator\\" form=\\"verb-short\\">narr. by</term><term name=\\"organizer\\" form=\\"verb-short\\">org. by</term><term name=\\"performer\\" form=\\"verb-short\\">perf. by</term><term name=\\"producer\\" form=\\"verb-short\\">prod. by</term><term name=\\"script-writer\\" form=\\"verb-short\\">writ. by</term><term name=\\"series-creator\\" form=\\"verb-short\\">cre. by</term><term name=\\"director\\" form=\\"verb-short\\">geregisseerd door</term><term name=\\"editor\\" form=\\"verb-short\\">onder redactie van</term><term name=\\"editorial-director\\" form=\\"verb-short\\">bewerkt door</term><term name=\\"illustrator\\" form=\\"verb-short\\">geïllustreerd door</term><term name=\\"translator\\" form=\\"verb-short\\">vertaald door</term><term name=\\"editortranslator\\" form=\\"verb-short\\">bewerkt &amp; vertaald door</term>\\n\x3c!-- LONG MONTH FORMS --\x3e<term name=\\"month-01\\">januari</term><term name=\\"month-02\\">februari</term><term name=\\"month-03\\">maart</term><term name=\\"month-04\\">april</term><term name=\\"month-05\\">mei</term><term name=\\"month-06\\">juni</term><term name=\\"month-07\\">juli</term><term name=\\"month-08\\">augustus</term><term name=\\"month-09\\">september</term><term name=\\"month-10\\">oktober</term><term name=\\"month-11\\">november</term><term name=\\"month-12\\">december</term>\\n\x3c!-- SHORT MONTH FORMS --\x3e<term name=\\"month-01\\" form=\\"short\\">jan.</term><term name=\\"month-02\\" form=\\"short\\">feb.</term><term name=\\"month-03\\" form=\\"short\\">mrt.</term><term name=\\"month-04\\" form=\\"short\\">apr.</term><term name=\\"month-05\\" form=\\"short\\">mei</term><term name=\\"month-06\\" form=\\"short\\">jun.</term><term name=\\"month-07\\" form=\\"short\\">jul.</term><term name=\\"month-08\\" form=\\"short\\">aug.</term><term name=\\"month-09\\" form=\\"short\\">sep.</term><term name=\\"month-10\\" form=\\"short\\">okt.</term><term name=\\"month-11\\" form=\\"short\\">nov.</term><term name=\\"month-12\\" form=\\"short\\">dec.</term>\\n\x3c!-- SEASONS --\x3e<term name=\\"season-01\\">lente</term><term name=\\"season-02\\">zomer</term><term name=\\"season-03\\">herst</term><term name=\\"season-04\\">winter</term></terms>\\n</locale>\\n","fr-FR":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"fr-FR\\"><info><translator><name>Grégoire Colly</name></translator><translator><name>Collectif Zotero francophone</name></translator><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote=\\"false\\" limit-day-ordinals-to-day-1=\\"true\\"/><date form=\\"text\\"><date-part name=\\"day\\" suffix=\\" \\"/><date-part name=\\"month\\" suffix=\\" \\"/><date-part name=\\"year\\"/></date><date form=\\"numeric\\"><date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/><date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/><date-part name=\\"year\\"/></date><terms><term name=\\"advance-online-publication\\">publication en ligne anticipée</term><term name=\\"album\\">album</term><term name=\\"audio-recording\\">enregistrement audio</term><term name=\\"film\\">film</term><term name=\\"henceforth\\">désormais</term><term name=\\"loc-cit\\">loc.&#160;cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"no-place\\">sans lieu</term><term name=\\"no-place\\" form=\\"short\\">s.&#160;l.</term><term name=\\"no-publisher\\">sans nom</term> \x3c!-- sine nomine --\x3e<term name=\\"no-publisher\\" form=\\"short\\">s.&#160;n.</term><term name=\\"on\\">sur</term><term name=\\"op-cit\\">op.&#160;cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"original-work-published\\">édition originale</term><term name=\\"personal-communication\\">communication personnelle</term><term name=\\"podcast\\">podcast</term><term name=\\"podcast-episode\\">épisode de podcast</term><term name=\\"preprint\\">prépublication</term><term name=\\"radio-broadcast\\">émission de radio</term><term name=\\"radio-series\\">série radiophonique</term><term name=\\"radio-series-episode\\">épisode de série radiophonique</term><term name=\\"special-issue\\">numéro spécial</term><term name=\\"special-section\\">section spéciale</term><term name=\\"television-broadcast\\">émission de télévision</term><term name=\\"television-series\\">série télévisée</term><term name=\\"television-series-episode\\">épisode de série télévisée</term><term name=\\"video\\">vidéo</term><term name=\\"working-paper\\">document de travail</term><term name=\\"accessed\\">consulté le</term><term name=\\"and\\">et</term><term name=\\"and others\\">et autres</term><term name=\\"anonymous\\">anonyme</term><term name=\\"anonymous\\" form=\\"short\\">anon.</term><term name=\\"at\\">sur</term><term name=\\"available at\\">disponible sur</term><term name=\\"by\\">par</term><term name=\\"circa\\">vers</term><term name=\\"circa\\" form=\\"short\\">v.</term><term name=\\"cited\\">cité</term><term name=\\"edition\\" gender=\\"feminine\\"><single>édition</single><multiple>éditions</multiple></term><term name=\\"edition\\" form=\\"short\\">éd.</term><term name=\\"et-al\\">et al.</term><term name=\\"forthcoming\\">à paraître</term><term name=\\"from\\">à l\'adresse</term><term name=\\"ibid\\">ibid.</term><term name=\\"in\\">in</term><term name=\\"in press\\">sous presse</term><term name=\\"internet\\">Internet</term><term name=\\"interview\\">entretien</term><term name=\\"letter\\">lettre</term><term name=\\"no date\\">sans date</term><term name=\\"no date\\" form=\\"short\\">s.&#160;d.</term><term name=\\"online\\">en ligne</term><term name=\\"presented at\\">présenté à</term><term name=\\"reference\\"><single>référence</single><multiple>références</multiple></term><term name=\\"reference\\" form=\\"short\\"><single>réf.</single><multiple>réf.</multiple></term><term name=\\"retrieved\\">consulté</term><term name=\\"scale\\">échelle</term><term name=\\"version\\">version</term>\\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name=\\"article\\">article</term><term name=\\"article-journal\\">article de revue</term><term name=\\"article-magazine\\">article de magazine</term><term name=\\"article-newspaper\\">article de presse</term><term name=\\"bill\\">projet de loi</term><term name=\\"book\\">livre</term><term name=\\"broadcast\\">émission</term><term name=\\"chapter\\">chapitre de livre</term><term name=\\"classic\\">classique</term><term name=\\"collection\\">collection</term><term name=\\"dataset\\">jeu de données</term><term name=\\"document\\">document</term><term name=\\"entry\\">entrée</term><term name=\\"entry-dictionary\\">entrée de dictionnaire</term><term name=\\"entry-encyclopedia\\">entrée d\'encyclopédie</term><term name=\\"event\\">événement</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\">image</term><term name=\\"hearing\\">audience</term><term name=\\"interview\\">interview</term><term name=\\"legal_case\\">affaire</term><term name=\\"legislation\\">acte juridique</term><term name=\\"manuscript\\">manuscrit</term><term name=\\"map\\">carte</term><term name=\\"motion_picture\\">enregistrement vidéo</term><term name=\\"musical_score\\">partition</term><term name=\\"pamphlet\\">pamphlet</term><term name=\\"paper-conference\\">article de colloque</term><term name=\\"patent\\">brevet</term><term name=\\"performance\\">interprétation</term><term name=\\"periodical\\">périodique</term><term name=\\"personal_communication\\">communication personnelle</term><term name=\\"post\\">billet</term><term name=\\"post-weblog\\">billet de blog</term><term name=\\"regulation\\">règlement</term><term name=\\"report\\">rapport</term><term name=\\"review\\">recension</term><term name=\\"review-book\\">recension de livre</term><term name=\\"software\\">logiciel</term><term name=\\"song\\">chanson</term><term name=\\"speech\\">présentation</term><term name=\\"standard\\">norme</term><term name=\\"thesis\\">thèse</term><term name=\\"treaty\\">traité</term><term name=\\"webpage\\">page web</term>\\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name=\\"article-journal\\" form=\\"short\\">art. de revue</term><term name=\\"article-magazine\\" form=\\"short\\">art. de mag.</term><term name=\\"article-newspaper\\" form=\\"short\\">art. de presse</term><term name=\\"book\\" form=\\"short\\">liv.</term><term name=\\"chapter\\" form=\\"short\\">chap. de liv.</term><term name=\\"document\\" form=\\"short\\">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\" form=\\"short\\">graph.</term><term name=\\"interview\\" form=\\"short\\">interv.</term><term name=\\"manuscript\\" form=\\"short\\">ms</term><term name=\\"motion_picture\\" form=\\"short\\">enr. vidéo</term><term name=\\"report\\" form=\\"short\\">rap.</term><term name=\\"review\\" form=\\"short\\">recens.</term><term name=\\"review-book\\" form=\\"short\\">recens. de liv.</term><term name=\\"song\\" form=\\"short\\">enr. audio</term>\\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name=\\"ad\\">apr. J.-C.</term><term name=\\"bc\\">av. J.-C.</term><term name=\\"bce\\">av. n. è.</term><term name=\\"ce\\">n. è.</term>\\n\x3c!-- PUNCTUATION --\x3e<term name=\\"open-quote\\">«&#160;</term><term name=\\"close-quote\\">&#160;»</term><term name=\\"open-inner-quote\\">“</term><term name=\\"close-inner-quote\\">”</term><term name=\\"page-range-delimiter\\">&#8209;</term> \x3c!-- non-breaking hyphen --\x3e<term name=\\"colon\\">&#160;:</term><term name=\\"comma\\">,</term><term name=\\"semicolon\\">&#160;;</term>\\n\x3c!-- ORDINALS --\x3e<term name=\\"ordinal\\">ᵉ</term><term name=\\"ordinal-01\\" gender-form=\\"feminine\\" match=\\"whole-number\\">ʳᵉ</term><term name=\\"ordinal-01\\" gender-form=\\"masculine\\" match=\\"whole-number\\">ᵉʳ</term>\\n\x3c!-- LONG ORDINALS --\x3e<term name=\\"long-ordinal-01\\">premier</term><term name=\\"long-ordinal-02\\">deuxième</term><term name=\\"long-ordinal-03\\">troisième</term><term name=\\"long-ordinal-04\\">quatrième</term><term name=\\"long-ordinal-05\\">cinquième</term><term name=\\"long-ordinal-06\\">sixième</term><term name=\\"long-ordinal-07\\">septième</term><term name=\\"long-ordinal-08\\">huitième</term><term name=\\"long-ordinal-09\\">neuvième</term><term name=\\"long-ordinal-10\\">dixième</term>\\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name=\\"act\\"><single>acte</single><multiple>actes</multiple></term><term name=\\"appendix\\"><single>appendice</single><multiple>appendices</multiple></term><term name=\\"article-locator\\"><single>article</single><multiple>articles</multiple></term><term name=\\"canon\\"><single>canon</single><multiple>canons</multiple></term><term name=\\"elocation\\"><single>emplacement</single><multiple>emplacements</multiple></term><term name=\\"equation\\"><single>équation</single><multiple>équations</multiple></term><term name=\\"rule\\"><single>règle</single><multiple>règles</multiple></term><term name=\\"scene\\"><single>scène</single><multiple>scènes</multiple></term><term name=\\"table\\"><single>tableau</single><multiple>tableaux</multiple></term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple></term><term name=\\"title-locator\\"><single>titre</single><multiple>titres</multiple></term><term name=\\"book\\"><single>livre</single><multiple>livres</multiple></term><term name=\\"chapter\\"><single>chapitre</single><multiple>chapitres</multiple></term><term name=\\"column\\"><single>colonne</single><multiple>colonnes</multiple></term><term name=\\"figure\\"><single>figure</single><multiple>figures</multiple></term><term name=\\"folio\\"><single>folio</single><multiple>folios</multiple></term><term name=\\"issue\\" gender=\\"masculine\\"><single>numéro</single><multiple>numéros</multiple></term><term name=\\"line\\"><single>ligne</single><multiple>lignes</multiple></term><term name=\\"note\\"><single>note</single><multiple>notes</multiple></term><term name=\\"opus\\"><single>opus</single><multiple>opus</multiple></term><term name=\\"page\\"><single>page</single><multiple>pages</multiple></term><term name=\\"number-of-pages\\"><single>page</single><multiple>pages</multiple></term><term name=\\"paragraph\\"><single>paragraphe</single><multiple>paragraphes</multiple></term><term name=\\"part\\"><single>partie</single><multiple>parties</multiple></term><term name=\\"section\\"><single>section</single><multiple>sections</multiple></term><term name=\\"sub-verbo\\"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name=\\"verse\\"><single>verset</single><multiple>versets</multiple></term><term name=\\"volume\\" gender=\\"masculine\\"><single>volume</single><multiple>volumes</multiple></term>\\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name=\\"appendix\\"><single>append.</single><multiple>append.</multiple></term><term name=\\"article-locator\\"><single>art.</single><multiple>art.</multiple></term><term name=\\"elocation\\"><single>emplact</single><multiple>emplact</multiple></term><term name=\\"equation\\"><single>eq.</single><multiple>eq.</multiple></term><term name=\\"rule\\"><single>règle</single><multiple>règles</multiple></term><term name=\\"scene\\"><single>sc.</single><multiple>sc.</multiple></term><term name=\\"table\\"><single>tab.</single><multiple>tab.</multiple></term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple></term><term name=\\"title-locator\\"><single>tit.</single><multiple>tit.</multiple></term><term name=\\"book\\" form=\\"short\\">liv.</term><term name=\\"chapter\\" form=\\"short\\">chap.</term><term name=\\"column\\" form=\\"short\\">col.</term><term name=\\"figure\\" form=\\"short\\">fig.</term><term name=\\"folio\\" form=\\"short\\"><single>fᵒ</single><multiple>fᵒˢ</multiple></term><term name=\\"issue\\" form=\\"short\\"><single>nᵒ</single><multiple>nᵒˢ</multiple></term><term name=\\"line\\" form=\\"short\\">l.</term><term name=\\"note\\" form=\\"short\\">n.</term><term name=\\"opus\\" form=\\"short\\">op.</term><term name=\\"page\\" form=\\"short\\"><single>p.</single><multiple>p.</multiple></term><term name=\\"number-of-pages\\" form=\\"short\\"><single>p.</single><multiple>p.</multiple></term><term name=\\"paragraph\\" form=\\"short\\">paragr.</term><term name=\\"part\\" form=\\"short\\">part.</term><term name=\\"section\\" form=\\"short\\">sect.</term><term name=\\"sub-verbo\\" form=\\"short\\"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name=\\"verse\\" form=\\"short\\"><single>v.</single><multiple>v.</multiple></term><term name=\\"volume\\" form=\\"short\\"><single>vol.</single><multiple>vol.</multiple></term>\\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name=\\"paragraph\\" form=\\"symbol\\"><single>§</single><multiple>§</multiple></term><term name=\\"section\\" form=\\"symbol\\"><single>§</single><multiple>§</multiple></term>\\n\x3c!-- LONG ROLE FORMS --\x3e<term name=\\"chair\\"><single>président</single><multiple>présidents</multiple></term><term name=\\"compiler\\"><single>compilateur</single><multiple>compilateurs</multiple></term><term name=\\"contributor\\"><single>contributeur</single><multiple>contributeurs</multiple></term><term name=\\"curator\\"><single>commissaire</single><multiple>commissaires</multiple></term><term name=\\"executive-producer\\"><single>producteur exécutif</single><multiple>producteurs exécutifs</multiple></term><term name=\\"guest\\"><single>invité</single><multiple>invités</multiple></term><term name=\\"host\\"><single>hôte</single><multiple>hôtes</multiple></term><term name=\\"narrator\\"><single>narrateur</single><multiple>narrateurs</multiple></term><term name=\\"organizer\\"><single>organisateur</single><multiple>organisateurs</multiple></term><term name=\\"performer\\"><single>interprète</single><multiple>interprètes</multiple></term><term name=\\"producer\\"><single>producteur</single><multiple>producteurs</multiple></term><term name=\\"script-writer\\"><single>scénariste</single><multiple>scénaristes</multiple></term><term name=\\"series-creator\\"><single>créateur de série</single><multiple>créateurs de série</multiple></term><term name=\\"director\\"><single>réalisateur</single><multiple>réalisateurs</multiple></term><term name=\\"editor\\"><single>éditeur</single><multiple>éditeurs</multiple></term><term name=\\"editorial-director\\"><single>directeur</single><multiple>directeurs</multiple></term><term name=\\"illustrator\\"><single>illustrateur</single><multiple>illustrateurs</multiple></term><term name=\\"translator\\"><single>traducteur</single><multiple>traducteurs</multiple></term><term name=\\"editortranslator\\"><single>éditeur et traducteur</single><multiple>éditeurs et traducteurs</multiple></term>\\n\x3c!-- SHORT ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"short\\"><single>compil.</single><multiple>compil.</multiple></term><term name=\\"contributor\\" form=\\"short\\"><single>contrib.</single><multiple>contrib.</multiple></term><term name=\\"curator\\" form=\\"short\\"><single>commiss.</single><multiple>commiss.</multiple></term><term name=\\"executive-producer\\" form=\\"short\\"><single>prod. exé.</single><multiple>prod. exé.</multiple></term><term name=\\"narrator\\" form=\\"short\\"><single>narr.</single><multiple>narr.</multiple></term><term name=\\"organizer\\" form=\\"short\\"><single>org.</single><multiple>org.</multiple></term><term name=\\"performer\\" form=\\"short\\"><single>interpr.</single><multiple>interpr.</multiple></term><term name=\\"producer\\" form=\\"short\\"><single>prod.</single><multiple>prod.</multiple></term><term name=\\"script-writer\\" form=\\"short\\"><single>scénar.</single><multiple>scénar.</multiple></term><term name=\\"series-creator\\" form=\\"short\\"><single>créat.</single><multiple>créat.</multiple></term><term name=\\"director\\" form=\\"short\\"><single>réal.</single><multiple>réal.</multiple></term><term name=\\"editor\\" form=\\"short\\"><single>éd.</single><multiple>éd.</multiple></term><term name=\\"editorial-director\\" form=\\"short\\"><single>dir.</single><multiple>dir.</multiple></term><term name=\\"illustrator\\" form=\\"short\\"><single>ill.</single><multiple>ill.</multiple></term><term name=\\"translator\\" form=\\"short\\"><single>trad.</single><multiple>trad.</multiple></term><term name=\\"editortranslator\\" form=\\"short\\"><single>éd. et trad.</single><multiple>éd. et trad.</multiple></term>\\n\x3c!-- VERB ROLE FORMS --\x3e<term name=\\"chair\\" form=\\"verb\\">présidé par</term><term name=\\"compiler\\" form=\\"verb\\">compilé par</term><term name=\\"contributor\\" form=\\"verb\\">avec</term><term name=\\"curator\\" form=\\"verb\\">organisé par</term><term name=\\"executive-producer\\" form=\\"verb\\">production exécutive par</term><term name=\\"guest\\" form=\\"verb\\">avec pour invité</term><term name=\\"host\\" form=\\"verb\\">animé par</term><term name=\\"narrator\\" form=\\"verb\\">lu par</term><term name=\\"organizer\\" form=\\"verb\\">organisé par</term><term name=\\"performer\\" form=\\"verb\\">interprété par</term><term name=\\"producer\\" form=\\"verb\\">produit par</term><term name=\\"script-writer\\" form=\\"verb\\">scénario de</term><term name=\\"series-creator\\" form=\\"verb\\">créé par</term><term name=\\"container-author\\" form=\\"verb\\">par</term><term name=\\"director\\" form=\\"verb\\">réalisé par</term><term name=\\"editor\\" form=\\"verb\\">édité par</term><term name=\\"editorial-director\\" form=\\"verb\\">sous la direction de</term><term name=\\"illustrator\\" form=\\"verb\\">illustré par</term><term name=\\"interviewer\\" form=\\"verb\\">entretien réalisé par</term><term name=\\"recipient\\" form=\\"verb\\">à</term><term name=\\"reviewed-author\\" form=\\"verb\\">par</term><term name=\\"translator\\" form=\\"verb\\">traduit par</term><term name=\\"editortranslator\\" form=\\"verb\\">édité et traduit par</term>\\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"verb-short\\">compil. par</term><term name=\\"contributor\\" form=\\"verb-short\\">ac</term><term name=\\"curator\\" form=\\"verb-short\\">org. par</term><term name=\\"executive-producer\\" form=\\"verb-short\\">prod. exé. par</term><term name=\\"guest\\" form=\\"verb-short\\">ac pr inv.</term><term name=\\"host\\" form=\\"verb-short\\">anim. par</term><term name=\\"narrator\\" form=\\"verb-short\\">lu par</term><term name=\\"organizer\\" form=\\"verb-short\\">org. par</term><term name=\\"performer\\" form=\\"verb-short\\">interpr. par</term><term name=\\"producer\\" form=\\"verb-short\\">prod. par</term><term name=\\"script-writer\\" form=\\"verb-short\\">scénar. de</term><term name=\\"series-creator\\" form=\\"verb-short\\">créé par</term><term name=\\"director\\" form=\\"verb-short\\">réal. par</term><term name=\\"editor\\" form=\\"verb-short\\">éd. par</term><term name=\\"editorial-director\\" form=\\"verb-short\\">ss la dir. de</term><term name=\\"illustrator\\" form=\\"verb-short\\">ill. par</term><term name=\\"translator\\" form=\\"verb-short\\">trad. par</term><term name=\\"editortranslator\\" form=\\"verb-short\\">éd. et trad. par</term>\\n\x3c!-- LONG MONTH FORMS --\x3e<term name=\\"month-01\\" gender=\\"masculine\\">janvier</term><term name=\\"month-02\\" gender=\\"masculine\\">février</term><term name=\\"month-03\\" gender=\\"masculine\\">mars</term><term name=\\"month-04\\" gender=\\"masculine\\">avril</term><term name=\\"month-05\\" gender=\\"masculine\\">mai</term><term name=\\"month-06\\" gender=\\"masculine\\">juin</term><term name=\\"month-07\\" gender=\\"masculine\\">juillet</term><term name=\\"month-08\\" gender=\\"masculine\\">août</term><term name=\\"month-09\\" gender=\\"masculine\\">septembre</term><term name=\\"month-10\\" gender=\\"masculine\\">octobre</term><term name=\\"month-11\\" gender=\\"masculine\\">novembre</term><term name=\\"month-12\\" gender=\\"masculine\\">décembre</term>\\n\x3c!-- SHORT MONTH FORMS --\x3e<term name=\\"month-01\\" form=\\"short\\">janv.</term><term name=\\"month-02\\" form=\\"short\\">févr.</term><term name=\\"month-03\\" form=\\"short\\">mars</term><term name=\\"month-04\\" form=\\"short\\">avr.</term><term name=\\"month-05\\" form=\\"short\\">mai</term><term name=\\"month-06\\" form=\\"short\\">juin</term><term name=\\"month-07\\" form=\\"short\\">juill.</term><term name=\\"month-08\\" form=\\"short\\">août</term><term name=\\"month-09\\" form=\\"short\\">sept.</term><term name=\\"month-10\\" form=\\"short\\">oct.</term><term name=\\"month-11\\" form=\\"short\\">nov.</term><term name=\\"month-12\\" form=\\"short\\">déc.</term>\\n\x3c!-- SEASONS --\x3e<term name=\\"season-01\\">printemps</term><term name=\\"season-02\\">été</term><term name=\\"season-03\\">automne</term><term name=\\"season-04\\">hiver</term></terms>\\n</locale>\\n","de-DE":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"de-DE\\"><info><translator><name>Till A. Heilmann</name></translator><translator><name>Ulrich</name></translator><translator><name>Rintze M. Zelle</name></translator><translator><name>Sebastian Karcher</name></translator><translator><name>jakov</name></translator><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote=\\"false\\"/><date form=\\"text\\"><date-part name=\\"day\\" form=\\"ordinal\\" suffix=\\" \\"/><date-part name=\\"month\\" suffix=\\" \\"/><date-part name=\\"year\\"/></date><date form=\\"numeric\\"><date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\".\\"/><date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\".\\"/><date-part name=\\"year\\"/></date><terms><term name=\\"advance-online-publication\\">advance online publication</term><term name=\\"album\\">album</term><term name=\\"audio-recording\\">audio recording</term><term name=\\"film\\">film</term><term name=\\"henceforth\\">henceforth</term><term name=\\"loc-cit\\">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"no-place\\">no place</term><term name=\\"no-place\\" form=\\"short\\">n.p.</term><term name=\\"no-publisher\\">no publisher</term> \x3c!-- sine nomine --\x3e<term name=\\"no-publisher\\" form=\\"short\\">n.p.</term><term name=\\"on\\">on</term><term name=\\"op-cit\\">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"original-work-published\\">original work published</term><term name=\\"personal-communication\\">persönliche Kommunikation</term><term name=\\"podcast\\">podcast</term><term name=\\"podcast-episode\\">podcast episode</term><term name=\\"preprint\\">preprint</term><term name=\\"radio-broadcast\\">radio broadcast</term><term name=\\"radio-series\\">radio series</term><term name=\\"radio-series-episode\\">radio series episode</term><term name=\\"special-issue\\">special issue</term><term name=\\"special-section\\">special section</term><term name=\\"television-broadcast\\">television broadcast</term><term name=\\"television-series\\">television series</term><term name=\\"television-series-episode\\">television series episode</term><term name=\\"video\\">video</term><term name=\\"working-paper\\">working paper</term><term name=\\"accessed\\">zugegriffen</term><term name=\\"and\\">und</term><term name=\\"and others\\">und andere</term><term name=\\"anonymous\\">ohne Autor</term><term name=\\"anonymous\\" form=\\"short\\">o.&#160;A.</term><term name=\\"at\\">auf</term><term name=\\"available at\\">verfügbar unter</term><term name=\\"by\\">von</term><term name=\\"circa\\">circa</term><term name=\\"circa\\" form=\\"short\\">ca.</term><term name=\\"cited\\">zitiert</term><term name=\\"edition\\"><single>Auflage</single><multiple>Auflagen</multiple></term><term name=\\"edition\\" form=\\"short\\">Aufl.</term><term name=\\"et-al\\">u.&#160;a.</term><term name=\\"forthcoming\\">i.&#160;E.</term><term name=\\"from\\">von</term><term name=\\"ibid\\">ebd.</term><term name=\\"in\\">in</term><term name=\\"in press\\">im Druck</term><term name=\\"internet\\">Internet</term><term name=\\"interview\\">Interview</term><term name=\\"letter\\">Brief</term><term name=\\"no date\\">ohne Datum</term><term name=\\"no date\\" form=\\"short\\">o.&#160;J.</term><term name=\\"online\\">online</term><term name=\\"presented at\\">gehalten auf der</term><term name=\\"reference\\"><single>Referenz</single><multiple>Referenzen</multiple></term><term name=\\"reference\\" form=\\"short\\"><single>Ref.</single><multiple>Ref.</multiple></term><term name=\\"retrieved\\">abgerufen</term><term name=\\"scale\\">Maßstab</term><term name=\\"version\\">Version</term>\\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name=\\"article\\">preprint</term><term name=\\"article-journal\\">journal article</term><term name=\\"article-magazine\\">magazine article</term><term name=\\"article-newspaper\\">newspaper article</term><term name=\\"bill\\">bill</term><term name=\\"book\\">book</term><term name=\\"broadcast\\">broadcast</term><term name=\\"chapter\\">book chapter</term><term name=\\"classic\\">classic</term><term name=\\"collection\\">collection</term><term name=\\"dataset\\">dataset</term><term name=\\"document\\">document</term><term name=\\"entry\\">entry</term><term name=\\"entry-dictionary\\">dictionary entry</term><term name=\\"entry-encyclopedia\\">encyclopedia entry</term><term name=\\"event\\">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\">graphic</term><term name=\\"hearing\\">hearing</term><term name=\\"interview\\">interview</term><term name=\\"legal_case\\">legal case</term><term name=\\"legislation\\">legislation</term><term name=\\"manuscript\\">manuscript</term><term name=\\"map\\">map</term><term name=\\"motion_picture\\">video recording</term><term name=\\"musical_score\\">musical score</term><term name=\\"pamphlet\\">pamphlet</term><term name=\\"paper-conference\\">conference paper</term><term name=\\"patent\\">patent</term><term name=\\"performance\\">performance</term><term name=\\"periodical\\">periodical</term><term name=\\"personal_communication\\">persönliche Kommunikation</term><term name=\\"post\\">post</term><term name=\\"post-weblog\\">blog post</term><term name=\\"regulation\\">regulation</term><term name=\\"report\\">report</term><term name=\\"review\\">review</term><term name=\\"review-book\\">book review</term><term name=\\"software\\">software</term><term name=\\"song\\">audio recording</term><term name=\\"speech\\">presentation</term><term name=\\"standard\\">standard</term><term name=\\"thesis\\">thesis</term><term name=\\"treaty\\">treaty</term><term name=\\"webpage\\">webpage</term>\\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name=\\"article-journal\\" form=\\"short\\">journal art.</term><term name=\\"article-magazine\\" form=\\"short\\">mag. art.</term><term name=\\"article-newspaper\\" form=\\"short\\">newspaper art.</term><term name=\\"book\\" form=\\"short\\">bk.</term><term name=\\"chapter\\" form=\\"short\\">bk. chap.</term><term name=\\"document\\" form=\\"short\\">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\" form=\\"short\\">graph.</term><term name=\\"interview\\" form=\\"short\\">interv.</term><term name=\\"manuscript\\" form=\\"short\\">MS</term><term name=\\"motion_picture\\" form=\\"short\\">video rec.</term><term name=\\"report\\" form=\\"short\\">rep.</term><term name=\\"review\\" form=\\"short\\">rev.</term><term name=\\"review-book\\" form=\\"short\\">bk. rev.</term><term name=\\"song\\" form=\\"short\\">audio rec.</term>\\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name=\\"ad\\">&#160;n.&#160;Chr.</term><term name=\\"bc\\">&#160;v.&#160;Chr.</term><term name=\\"bce\\">BCE</term><term name=\\"ce\\">CE</term>\\n\x3c!-- PUNCTUATION --\x3e<term name=\\"open-quote\\">„</term><term name=\\"close-quote\\">“</term><term name=\\"open-inner-quote\\">‚</term><term name=\\"close-inner-quote\\">‘</term><term name=\\"page-range-delimiter\\">–</term><term name=\\"colon\\">:</term><term name=\\"comma\\">,</term><term name=\\"semicolon\\">;</term>\\n\x3c!-- ORDINALS --\x3e<term name=\\"ordinal\\">.</term>\\n\x3c!-- LONG ORDINALS --\x3e<term name=\\"long-ordinal-01\\">erster</term><term name=\\"long-ordinal-02\\">zweiter</term><term name=\\"long-ordinal-03\\">dritter</term><term name=\\"long-ordinal-04\\">vierter</term><term name=\\"long-ordinal-05\\">fünfter</term><term name=\\"long-ordinal-06\\">sechster</term><term name=\\"long-ordinal-07\\">siebter</term><term name=\\"long-ordinal-08\\">achter</term><term name=\\"long-ordinal-09\\">neunter</term><term name=\\"long-ordinal-10\\">zehnter</term>\\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name=\\"act\\">\\t\\t\\t <single>act</single><multiple>acts</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"appendix\\">\\t\\t\\t <single>appendix</single><multiple>appendices</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>article</single><multiple>articles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"canon\\">\\t\\t\\t <single>canon</single><multiple>canons</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"elocation\\">\\t\\t\\t <single>location</single><multiple>locations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"equation\\">\\t\\t\\t <single>equation</single><multiple>equations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"rule\\">\\t\\t\\t <single>rule</single><multiple>rules</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>scene</single><multiple>scenes</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>table</single><multiple>tables</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>title</single><multiple>titles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"book\\"><single>Buch</single><multiple>Bücher</multiple></term><term name=\\"chapter\\"><single>Kapitel</single><multiple>Kapitel</multiple></term><term name=\\"column\\"><single>Spalte</single><multiple>Spalten</multiple></term><term name=\\"figure\\"><single>Abbildung</single><multiple>Abbildungen</multiple></term><term name=\\"folio\\"><single>Blatt</single><multiple>Blätter</multiple></term><term name=\\"issue\\"><single>Nummer</single><multiple>Nummern</multiple></term><term name=\\"line\\"><single>Zeile</single><multiple>Zeilen</multiple></term><term name=\\"note\\"><single>Note</single><multiple>Noten</multiple></term><term name=\\"opus\\"><single>Opus</single><multiple>Opera</multiple></term><term name=\\"page\\"><single>Seite</single><multiple>Seiten</multiple></term><term name=\\"number-of-pages\\"><single>Seite</single><multiple>Seiten</multiple></term><term name=\\"paragraph\\"><single>Absatz</single><multiple>Absätze</multiple></term><term name=\\"part\\"><single>Teil</single><multiple>Teile</multiple></term><term name=\\"section\\"><single>Abschnitt</single><multiple>Abschnitte</multiple></term><term name=\\"sub-verbo\\"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name=\\"verse\\"><single>Vers</single><multiple>Verse</multiple></term><term name=\\"volume\\"><single>Band</single><multiple>Bände</multiple></term>\\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name=\\"appendix\\">\\t\\t\\t <single>app.</single><multiple>apps.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>art.</single><multiple>arts.</multiple></term><term name=\\"elocation\\">\\t\\t\\t <single>loc.</single><multiple>locs.</multiple></term><term name=\\"equation\\">\\t\\t\\t <single>eq.</single><multiple>eqs.</multiple></term><term name=\\"rule\\">\\t\\t\\t <single>r.</single><multiple>rr.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>sc.</single><multiple>scs.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>tbl.</single><multiple>tbls.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>tit.</single><multiple>tits.</multiple></term><term name=\\"book\\" form=\\"short\\">B.</term><term name=\\"chapter\\" form=\\"short\\">Kap.</term><term name=\\"column\\" form=\\"short\\">Sp.</term><term name=\\"figure\\" form=\\"short\\">Abb.</term><term name=\\"folio\\" form=\\"short\\">Fol.</term><term name=\\"issue\\" form=\\"short\\">Nr.</term><term name=\\"line\\" form=\\"short\\">Z.</term><term name=\\"note\\" form=\\"short\\">N.</term><term name=\\"opus\\" form=\\"short\\">op.</term><term name=\\"page\\" form=\\"short\\"><single>S.</single><multiple>S.</multiple></term><term name=\\"number-of-pages\\" form=\\"short\\"><single>S.</single><multiple>S.</multiple></term><term name=\\"paragraph\\" form=\\"short\\">Abs.</term><term name=\\"part\\" form=\\"short\\">Teil</term><term name=\\"section\\" form=\\"short\\">Abschn.</term><term name=\\"sub-verbo\\" form=\\"short\\"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name=\\"verse\\" form=\\"short\\"><single>V.</single><multiple>V.</multiple></term><term name=\\"volume\\" form=\\"short\\"><single>Bd.</single><multiple>Bde.</multiple></term>\\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name=\\"paragraph\\" form=\\"symbol\\"><single>¶</single><multiple>¶¶</multiple></term><term name=\\"section\\" form=\\"symbol\\"><single>§</single><multiple>§§</multiple></term>\\n\x3c!-- LONG ROLE FORMS --\x3e<term name=\\"chair\\"><single>chair</single><multiple>chairs</multiple></term><term name=\\"compiler\\"><single>compiler</single><multiple>compilers</multiple></term><term name=\\"contributor\\"><single>contributor</single><multiple>contributors</multiple></term><term name=\\"curator\\"><single>curator</single><multiple>curators</multiple></term><term name=\\"executive-producer\\"><single>executive producer</single><multiple>executive producers</multiple></term><term name=\\"guest\\"><single>guest</single><multiple>guests</multiple></term><term name=\\"host\\"><single>host</single><multiple>hosts</multiple></term><term name=\\"narrator\\"><single>narrator</single><multiple>narrators</multiple></term><term name=\\"organizer\\"><single>organizer</single><multiple>organizers</multiple></term><term name=\\"performer\\"><single>performer</single><multiple>performers</multiple></term><term name=\\"producer\\"><single>producer</single><multiple>producers</multiple></term><term name=\\"script-writer\\"><single>writer</single><multiple>writers</multiple></term><term name=\\"series-creator\\"><single>series creator</single><multiple>series creators</multiple></term><term name=\\"director\\"><single>Regisseur</single><multiple>Regisseure</multiple></term><term name=\\"editor\\"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name=\\"collection-editor\\"><single>Reihenherausgeber</single><multiple>Reihenherausgeber</multiple></term><term name=\\"editorial-director\\"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name=\\"illustrator\\"><single>Illustrator</single><multiple>Illustratoren</multiple></term><term name=\\"translator\\"><single>Übersetzer</single><multiple>Übersetzer</multiple></term><term name=\\"editortranslator\\"><single>Herausgeber&#160;&amp; Übersetzer</single><multiple>Herausgeber&#160;&amp; Übersetzer</multiple></term>\\n\x3c!-- SHORT ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"short\\"><single>comp.</single><multiple>comps.</multiple></term><term name=\\"contributor\\" form=\\"short\\"><single>contrib.</single><multiple>contribs.</multiple></term><term name=\\"curator\\" form=\\"short\\"><single>cur.</single><multiple>curs.</multiple></term><term name=\\"executive-producer\\" form=\\"short\\"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name=\\"narrator\\" form=\\"short\\"><single>narr.</single><multiple>narrs.</multiple></term><term name=\\"organizer\\" form=\\"short\\"><single>org.</single><multiple>orgs.</multiple></term><term name=\\"performer\\" form=\\"short\\"><single>perf.</single><multiple>perfs.</multiple></term><term name=\\"producer\\" form=\\"short\\"><single>prod.</single><multiple>prods.</multiple></term><term name=\\"script-writer\\" form=\\"short\\"><single>writ.</single><multiple>writs.</multiple></term><term name=\\"series-creator\\" form=\\"short\\"><single>cre.</single><multiple>cres.</multiple></term><term name=\\"director\\" form=\\"short\\"><single>Reg.</single><multiple>Reg.</multiple></term><term name=\\"editor\\" form=\\"short\\"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name=\\"collection-editor\\" form=\\"short\\"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name=\\"editorial-director\\" form=\\"short\\"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name=\\"illustrator\\" form=\\"short\\"><single>Ill.</single><multiple>Ill.</multiple></term><term name=\\"translator\\" form=\\"short\\"><single>Übers.</single><multiple>Übers.</multiple></term><term name=\\"editortranslator\\" form=\\"short\\"><single>Hrsg.&#160;&amp; Übers.</single><multiple>Hrsg.&#160;&amp; Übers.</multiple></term>\\n\x3c!-- VERB ROLE FORMS --\x3e<term name=\\"chair\\" form=\\"verb\\">chaired by</term><term name=\\"compiler\\" form=\\"verb\\">compiled by</term><term name=\\"contributor\\" form=\\"verb\\">with</term><term name=\\"curator\\" form=\\"verb\\">curated by</term><term name=\\"executive-producer\\" form=\\"verb\\">executive produced by</term><term name=\\"guest\\" form=\\"verb\\">with guest</term><term name=\\"host\\" form=\\"verb\\">hosted by</term><term name=\\"narrator\\" form=\\"verb\\">narrated by</term><term name=\\"organizer\\" form=\\"verb\\">organized by</term><term name=\\"performer\\" form=\\"verb\\">performed by</term><term name=\\"producer\\" form=\\"verb\\">produced by</term><term name=\\"script-writer\\" form=\\"verb\\">written by</term><term name=\\"series-creator\\" form=\\"verb\\">created by</term><term name=\\"container-author\\" form=\\"verb\\">von</term><term name=\\"director\\" form=\\"verb\\">Regie von</term><term name=\\"editor\\" form=\\"verb\\">herausgegeben von</term><term name=\\"collection-editor\\" form=\\"verb\\">herausgegeben von</term><term name=\\"editorial-director\\" form=\\"verb\\">herausgegeben von</term><term name=\\"illustrator\\" form=\\"verb\\">illustriert von</term><term name=\\"interviewer\\" form=\\"verb\\">interviewt von</term><term name=\\"recipient\\" form=\\"verb\\">an</term><term name=\\"reviewed-author\\" form=\\"verb\\">von</term><term name=\\"translator\\" form=\\"verb\\">übersetzt von</term><term name=\\"editortranslator\\" form=\\"verb\\">herausgegeben und übersetzt von</term>\\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"verb-short\\">comp. by</term><term name=\\"contributor\\" form=\\"verb-short\\">w.</term><term name=\\"curator\\" form=\\"verb-short\\">cur. by</term><term name=\\"executive-producer\\" form=\\"verb-short\\">exec. prod. by</term><term name=\\"guest\\" form=\\"verb-short\\">w. guest</term><term name=\\"host\\" form=\\"verb-short\\">hosted by</term><term name=\\"narrator\\" form=\\"verb-short\\">narr. by</term><term name=\\"organizer\\" form=\\"verb-short\\">org. by</term><term name=\\"performer\\" form=\\"verb-short\\">perf. by</term><term name=\\"producer\\" form=\\"verb-short\\">prod. by</term><term name=\\"script-writer\\" form=\\"verb-short\\">writ. by</term><term name=\\"series-creator\\" form=\\"verb-short\\">cre. by</term><term name=\\"director\\" form=\\"verb-short\\">Reg.</term><term name=\\"editor\\" form=\\"verb-short\\">hg. von</term><term name=\\"collection-editor\\" form=\\"verb-short\\">hg. von</term><term name=\\"editorial-director\\" form=\\"verb-short\\">hg. von</term><term name=\\"illustrator\\" form=\\"verb-short\\">illus. von</term><term name=\\"translator\\" form=\\"verb-short\\">übers. von</term><term name=\\"editortranslator\\" form=\\"verb-short\\">hg.&#160;&amp; übers. von</term>\\n\x3c!-- LONG MONTH FORMS --\x3e<term name=\\"month-01\\">Januar</term><term name=\\"month-02\\">Februar</term><term name=\\"month-03\\">März</term><term name=\\"month-04\\">April</term><term name=\\"month-05\\">Mai</term><term name=\\"month-06\\">Juni</term><term name=\\"month-07\\">Juli</term><term name=\\"month-08\\">August</term><term name=\\"month-09\\">September</term><term name=\\"month-10\\">Oktober</term><term name=\\"month-11\\">November</term><term name=\\"month-12\\">Dezember</term>\\n\x3c!-- SHORT MONTH FORMS --\x3e<term name=\\"month-01\\" form=\\"short\\">Jan.</term><term name=\\"month-02\\" form=\\"short\\">Feb.</term><term name=\\"month-03\\" form=\\"short\\">März</term><term name=\\"month-04\\" form=\\"short\\">Apr.</term><term name=\\"month-05\\" form=\\"short\\">Mai</term><term name=\\"month-06\\" form=\\"short\\">Juni</term><term name=\\"month-07\\" form=\\"short\\">Juli</term><term name=\\"month-08\\" form=\\"short\\">Aug.</term><term name=\\"month-09\\" form=\\"short\\">Sep.</term><term name=\\"month-10\\" form=\\"short\\">Okt.</term><term name=\\"month-11\\" form=\\"short\\">Nov.</term><term name=\\"month-12\\" form=\\"short\\">Dez.</term>\\n\x3c!-- SEASONS --\x3e<term name=\\"season-01\\">Frühjahr</term><term name=\\"season-02\\">Sommer</term><term name=\\"season-03\\">Herbst</term><term name=\\"season-04\\">Winter</term></terms>\\n</locale>\\n","es-ES":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"es-ES\\"><info><translator><name>javimat</name></translator><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote=\\"false\\"/><date form=\\"text\\"><date-part name=\\"day\\" suffix=\\" de \\"/><date-part name=\\"month\\" suffix=\\" de \\"/><date-part name=\\"year\\"/></date><date form=\\"numeric\\"><date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/><date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/><date-part name=\\"year\\"/></date><terms><term name=\\"advance-online-publication\\">advance online publication</term><term name=\\"album\\">album</term><term name=\\"audio-recording\\">audio recording</term><term name=\\"film\\">film</term><term name=\\"henceforth\\">henceforth</term><term name=\\"loc-cit\\">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"no-place\\">no place</term><term name=\\"no-place\\" form=\\"short\\">n.p.</term><term name=\\"no-publisher\\">no publisher</term> \x3c!-- sine nomine --\x3e<term name=\\"no-publisher\\" form=\\"short\\">n.p.</term><term name=\\"on\\">on</term><term name=\\"op-cit\\">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name=\\"original-work-published\\">original work published</term><term name=\\"personal-communication\\">comunicación personal</term><term name=\\"podcast\\">podcast</term><term name=\\"podcast-episode\\">podcast episode</term><term name=\\"preprint\\">preprint</term><term name=\\"radio-broadcast\\">radio broadcast</term><term name=\\"radio-series\\">radio series</term><term name=\\"radio-series-episode\\">radio series episode</term><term name=\\"special-issue\\">special issue</term><term name=\\"special-section\\">special section</term><term name=\\"television-broadcast\\">television broadcast</term><term name=\\"television-series\\">television series</term><term name=\\"television-series-episode\\">television series episode</term><term name=\\"video\\">video</term><term name=\\"working-paper\\">working paper</term><term name=\\"accessed\\">accedido</term><term name=\\"and\\">y</term><term name=\\"and others\\">y otros</term><term name=\\"anonymous\\">anónimo</term><term name=\\"anonymous\\" form=\\"short\\">anón.</term><term name=\\"at\\">en</term><term name=\\"available at\\">disponible en</term><term name=\\"by\\">de</term><term name=\\"circa\\">circa</term><term name=\\"circa\\" form=\\"short\\">c.</term><term name=\\"cited\\">citado</term><term name=\\"edition\\"><single>edición</single><multiple>ediciones</multiple></term><term name=\\"edition\\" form=\\"short\\">ed.</term><term name=\\"et-al\\">et&#160;al.</term><term name=\\"forthcoming\\">previsto</term><term name=\\"from\\">a partir de</term><term name=\\"ibid\\">ibid.</term><term name=\\"in\\">en</term><term name=\\"in press\\">en imprenta</term><term name=\\"internet\\">internet</term><term name=\\"interview\\">entrevista</term><term name=\\"letter\\">carta</term><term name=\\"no date\\">sin fecha</term><term name=\\"no date\\" form=\\"short\\">s.&#160;f.</term><term name=\\"online\\">en línea</term><term name=\\"presented at\\">presentado en</term><term name=\\"reference\\"><single>referencia</single><multiple>referencias</multiple></term><term name=\\"reference\\" form=\\"short\\"><single>ref.</single><multiple>refs.</multiple></term><term name=\\"retrieved\\">recuperado</term><term name=\\"scale\\">escala</term><term name=\\"version\\">versión</term>\\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name=\\"article\\">preprint</term><term name=\\"article-journal\\">journal article</term><term name=\\"article-magazine\\">magazine article</term><term name=\\"article-newspaper\\">newspaper article</term><term name=\\"bill\\">bill</term><term name=\\"book\\">book</term><term name=\\"broadcast\\">broadcast</term><term name=\\"chapter\\">book chapter</term><term name=\\"classic\\">classic</term><term name=\\"collection\\">collection</term><term name=\\"dataset\\">dataset</term><term name=\\"document\\">document</term><term name=\\"entry\\">entry</term><term name=\\"entry-dictionary\\">dictionary entry</term><term name=\\"entry-encyclopedia\\">encyclopedia entry</term><term name=\\"event\\">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\">graphic</term><term name=\\"hearing\\">hearing</term><term name=\\"interview\\">interview</term><term name=\\"legal_case\\">legal case</term><term name=\\"legislation\\">legislation</term><term name=\\"manuscript\\">manuscript</term><term name=\\"map\\">map</term><term name=\\"motion_picture\\">video recording</term><term name=\\"musical_score\\">musical score</term><term name=\\"pamphlet\\">pamphlet</term><term name=\\"paper-conference\\">conference paper</term><term name=\\"patent\\">patent</term><term name=\\"performance\\">performance</term><term name=\\"periodical\\">periodical</term><term name=\\"personal_communication\\">comunicación personal</term><term name=\\"post\\">post</term><term name=\\"post-weblog\\">blog post</term><term name=\\"regulation\\">regulation</term><term name=\\"report\\">report</term><term name=\\"review\\">review</term><term name=\\"review-book\\">book review</term><term name=\\"software\\">software</term><term name=\\"song\\">audio recording</term><term name=\\"speech\\">presentation</term><term name=\\"standard\\">standard</term><term name=\\"thesis\\">thesis</term><term name=\\"treaty\\">treaty</term><term name=\\"webpage\\">webpage</term>\\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name=\\"article-journal\\" form=\\"short\\">journal art.</term><term name=\\"article-magazine\\" form=\\"short\\">mag. art.</term><term name=\\"article-newspaper\\" form=\\"short\\">newspaper art.</term><term name=\\"book\\" form=\\"short\\">bk.</term><term name=\\"chapter\\" form=\\"short\\">bk. chap.</term><term name=\\"document\\" form=\\"short\\">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name=\\"graphic\\" form=\\"short\\">graph.</term><term name=\\"interview\\" form=\\"short\\">interv.</term><term name=\\"manuscript\\" form=\\"short\\">MS</term><term name=\\"motion_picture\\" form=\\"short\\">video rec.</term><term name=\\"report\\" form=\\"short\\">rep.</term><term name=\\"review\\" form=\\"short\\">rev.</term><term name=\\"review-book\\" form=\\"short\\">bk. rev.</term><term name=\\"song\\" form=\\"short\\">audio rec.</term>\\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name=\\"ad\\">d.&#160;C.</term><term name=\\"bc\\">a.&#160;C.</term><term name=\\"bce\\">BCE</term><term name=\\"ce\\">CE</term>\\n\x3c!-- PUNCTUATION --\x3e<term name=\\"open-quote\\">«</term><term name=\\"close-quote\\">»</term><term name=\\"open-inner-quote\\">“</term><term name=\\"close-inner-quote\\">”</term><term name=\\"page-range-delimiter\\">-</term><term name=\\"colon\\">:</term><term name=\\"comma\\">,</term><term name=\\"semicolon\\">;</term>\\n\x3c!-- ORDINALS --\x3e<term name=\\"ordinal\\">.ª</term>\\n\x3c!-- LONG ORDINALS --\x3e<term name=\\"long-ordinal-01\\">primera</term><term name=\\"long-ordinal-02\\">segunda</term><term name=\\"long-ordinal-03\\">tercera</term><term name=\\"long-ordinal-04\\">cuarta</term><term name=\\"long-ordinal-05\\">quinta</term><term name=\\"long-ordinal-06\\">sexta</term><term name=\\"long-ordinal-07\\">séptima</term><term name=\\"long-ordinal-08\\">octava</term><term name=\\"long-ordinal-09\\">novena</term><term name=\\"long-ordinal-10\\">décima</term>\\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name=\\"act\\">\\t\\t\\t <single>act</single><multiple>acts</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"appendix\\">\\t\\t\\t <single>appendix</single><multiple>appendices</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>article</single><multiple>articles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"canon\\">\\t\\t\\t <single>canon</single><multiple>canons</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"elocation\\">\\t\\t\\t <single>location</single><multiple>locations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"equation\\">\\t\\t\\t <single>equation</single><multiple>equations</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"rule\\">\\t\\t\\t <single>rule</single><multiple>rules</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>scene</single><multiple>scenes</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>table</single><multiple>tables</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>title</single><multiple>titles</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"book\\"><single>libro</single><multiple>libros</multiple></term><term name=\\"chapter\\"><single>capítulo</single><multiple>capítulos</multiple></term><term name=\\"column\\"><single>columna</single><multiple>columnas</multiple></term><term name=\\"figure\\"><single>figura</single><multiple>figuras</multiple></term><term name=\\"folio\\"><single>folio</single><multiple>folios</multiple></term><term name=\\"issue\\"><single>número</single><multiple>números</multiple></term><term name=\\"line\\"><single>línea</single><multiple>líneas</multiple></term><term name=\\"note\\"><single>nota</single><multiple>notas</multiple></term><term name=\\"opus\\"><single>opus</single><multiple>opera</multiple></term><term name=\\"page\\"><single>página</single><multiple>páginas</multiple></term><term name=\\"number-of-pages\\"><single>página</single><multiple>páginas</multiple></term><term name=\\"paragraph\\"><single>párrafo</single><multiple>párrafos</multiple></term><term name=\\"part\\"><single>parte</single><multiple>partes</multiple></term><term name=\\"section\\"><single>sección</single><multiple>secciones</multiple></term><term name=\\"sub-verbo\\"><single>sub voce</single><multiple>sub vocibus</multiple></term><term name=\\"verse\\"><single>verso</single><multiple>versos</multiple></term><term name=\\"volume\\"><single>volumen</single><multiple>volúmenes</multiple></term>\\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name=\\"appendix\\">\\t\\t\\t <single>app.</single><multiple>apps.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"article-locator\\">\\t\\t\\t <single>art.</single><multiple>arts.</multiple></term><term name=\\"elocation\\">\\t\\t\\t <single>loc.</single><multiple>locs.</multiple></term><term name=\\"equation\\">\\t\\t\\t <single>eq.</single><multiple>eqs.</multiple></term><term name=\\"rule\\">\\t\\t\\t <single>r.</single><multiple>rr.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"scene\\">\\t\\t\\t <single>sc.</single><multiple>scs.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"table\\">\\t\\t\\t <single>tbl.</single><multiple>tbls.</multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"timestamp\\"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\\t\\t\\t\\t\\t\\t </term><term name=\\"title-locator\\">\\t\\t\\t <single>tit.</single><multiple>tits.</multiple></term><term name=\\"book\\" form=\\"short\\">lib.</term><term name=\\"chapter\\" form=\\"short\\">cap.</term><term name=\\"column\\" form=\\"short\\">col.</term><term name=\\"figure\\" form=\\"short\\">fig.</term><term name=\\"folio\\" form=\\"short\\">f.</term><term name=\\"issue\\" form=\\"short\\">n.º</term><term name=\\"line\\" form=\\"short\\">l.</term><term name=\\"note\\" form=\\"short\\">n.</term><term name=\\"opus\\" form=\\"short\\">op.</term><term name=\\"page\\" form=\\"short\\"><single>p.</single><multiple>pp.</multiple></term><term name=\\"number-of-pages\\" form=\\"short\\"><single>p.</single><multiple>pp.</multiple></term><term name=\\"paragraph\\" form=\\"short\\">párr.</term><term name=\\"part\\" form=\\"short\\">pt.</term><term name=\\"section\\" form=\\"short\\">sec.</term><term name=\\"sub-verbo\\" form=\\"short\\"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name=\\"verse\\" form=\\"short\\"><single>v.</single><multiple>vv.</multiple></term><term name=\\"volume\\" form=\\"short\\"><single>vol.</single><multiple>vols.</multiple></term>\\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name=\\"paragraph\\" form=\\"symbol\\"><single>§</single><multiple>§</multiple></term><term name=\\"section\\" form=\\"symbol\\"><single>§</single><multiple>§</multiple></term>\\n\x3c!-- LONG ROLE FORMS --\x3e<term name=\\"chair\\"><single>chair</single><multiple>chairs</multiple></term><term name=\\"compiler\\"><single>compiler</single><multiple>compilers</multiple></term><term name=\\"contributor\\"><single>contributor</single><multiple>contributors</multiple></term><term name=\\"curator\\"><single>curator</single><multiple>curators</multiple></term><term name=\\"executive-producer\\"><single>executive producer</single><multiple>executive producers</multiple></term><term name=\\"guest\\"><single>guest</single><multiple>guests</multiple></term><term name=\\"host\\"><single>host</single><multiple>hosts</multiple></term><term name=\\"narrator\\"><single>narrator</single><multiple>narrators</multiple></term><term name=\\"organizer\\"><single>organizer</single><multiple>organizers</multiple></term><term name=\\"performer\\"><single>performer</single><multiple>performers</multiple></term><term name=\\"producer\\"><single>producer</single><multiple>producers</multiple></term><term name=\\"script-writer\\"><single>writer</single><multiple>writers</multiple></term><term name=\\"series-creator\\"><single>series creator</single><multiple>series creators</multiple></term><term name=\\"director\\"><single>director</single><multiple>directores</multiple></term><term name=\\"editor\\"><single>editor</single><multiple>editores</multiple></term><term name=\\"editorial-director\\"><single>editor</single><multiple>editores</multiple></term><term name=\\"illustrator\\"><single>ilustrador</single><multiple>ilustradores</multiple></term><term name=\\"translator\\"><single>traductor</single><multiple>traductores</multiple></term><term name=\\"editortranslator\\"><single>editor y traductor</single><multiple>editores y traductores</multiple></term>\\n\x3c!-- SHORT ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"short\\"><single>comp.</single><multiple>comps.</multiple></term><term name=\\"contributor\\" form=\\"short\\"><single>contrib.</single><multiple>contribs.</multiple></term><term name=\\"curator\\" form=\\"short\\"><single>cur.</single><multiple>curs.</multiple></term><term name=\\"executive-producer\\" form=\\"short\\"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name=\\"narrator\\" form=\\"short\\"><single>narr.</single><multiple>narrs.</multiple></term><term name=\\"organizer\\" form=\\"short\\"><single>org.</single><multiple>orgs.</multiple></term><term name=\\"performer\\" form=\\"short\\"><single>perf.</single><multiple>perfs.</multiple></term><term name=\\"producer\\" form=\\"short\\"><single>prod.</single><multiple>prods.</multiple></term><term name=\\"script-writer\\" form=\\"short\\"><single>writ.</single><multiple>writs.</multiple></term><term name=\\"series-creator\\" form=\\"short\\"><single>cre.</single><multiple>cres.</multiple></term><term name=\\"director\\" form=\\"short\\"><single>dir.</single><multiple>dirs.</multiple></term><term name=\\"editor\\" form=\\"short\\"><single>ed.</single><multiple>eds.</multiple></term><term name=\\"editorial-director\\" form=\\"short\\"><single>ed.</single><multiple>eds.</multiple></term><term name=\\"illustrator\\" form=\\"short\\"><single>ilust.</single><multiple>ilusts.</multiple></term><term name=\\"translator\\" form=\\"short\\"><single>trad.</single><multiple>trads.</multiple></term><term name=\\"editortranslator\\" form=\\"short\\"><single>ed. y trad.</single><multiple>eds. y trads.</multiple></term>\\n\x3c!-- VERB ROLE FORMS --\x3e<term name=\\"chair\\" form=\\"verb\\">chaired by</term><term name=\\"compiler\\" form=\\"verb\\">compiled by</term><term name=\\"contributor\\" form=\\"verb\\">with</term><term name=\\"curator\\" form=\\"verb\\">curated by</term><term name=\\"executive-producer\\" form=\\"verb\\">executive produced by</term><term name=\\"guest\\" form=\\"verb\\">with guest</term><term name=\\"host\\" form=\\"verb\\">hosted by</term><term name=\\"narrator\\" form=\\"verb\\">narrated by</term><term name=\\"organizer\\" form=\\"verb\\">organized by</term><term name=\\"performer\\" form=\\"verb\\">performed by</term><term name=\\"producer\\" form=\\"verb\\">produced by</term><term name=\\"script-writer\\" form=\\"verb\\">written by</term><term name=\\"series-creator\\" form=\\"verb\\">created by</term><term name=\\"container-author\\" form=\\"verb\\">de</term><term name=\\"director\\" form=\\"verb\\">dirigido por</term><term name=\\"editor\\" form=\\"verb\\">editado por</term><term name=\\"editorial-director\\" form=\\"verb\\">editado por</term><term name=\\"illustrator\\" form=\\"verb\\">ilustrado por</term><term name=\\"interviewer\\" form=\\"verb\\">entrevistado por</term><term name=\\"recipient\\" form=\\"verb\\">a</term><term name=\\"reviewed-author\\" form=\\"verb\\">por</term><term name=\\"translator\\" form=\\"verb\\">traducido por</term><term name=\\"editortranslator\\" form=\\"verb\\">editado y traducido por</term>\\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name=\\"compiler\\" form=\\"verb-short\\">comp. by</term><term name=\\"contributor\\" form=\\"verb-short\\">w.</term><term name=\\"curator\\" form=\\"verb-short\\">cur. by</term><term name=\\"executive-producer\\" form=\\"verb-short\\">exec. prod. by</term><term name=\\"guest\\" form=\\"verb-short\\">w. guest</term><term name=\\"host\\" form=\\"verb-short\\">hosted by</term><term name=\\"narrator\\" form=\\"verb-short\\">narr. by</term><term name=\\"organizer\\" form=\\"verb-short\\">org. by</term><term name=\\"performer\\" form=\\"verb-short\\">perf. by</term><term name=\\"producer\\" form=\\"verb-short\\">prod. by</term><term name=\\"script-writer\\" form=\\"verb-short\\">writ. by</term><term name=\\"series-creator\\" form=\\"verb-short\\">cre. by</term><term name=\\"director\\" form=\\"verb-short\\">dir.</term><term name=\\"editor\\" form=\\"verb-short\\">ed.</term><term name=\\"editorial-director\\" form=\\"verb-short\\">ed.</term><term name=\\"illustrator\\" form=\\"verb-short\\">ilust.</term><term name=\\"translator\\" form=\\"verb-short\\">trad.</term><term name=\\"editortranslator\\" form=\\"verb-short\\">ed. y trad.</term>\\n\x3c!-- LONG MONTH FORMS --\x3e<term name=\\"month-01\\">enero</term><term name=\\"month-02\\">febrero</term><term name=\\"month-03\\">marzo</term><term name=\\"month-04\\">abril</term><term name=\\"month-05\\">mayo</term><term name=\\"month-06\\">junio</term><term name=\\"month-07\\">julio</term><term name=\\"month-08\\">agosto</term><term name=\\"month-09\\">septiembre</term><term name=\\"month-10\\">octubre</term><term name=\\"month-11\\">noviembre</term><term name=\\"month-12\\">diciembre</term>\\n\x3c!-- SHORT MONTH FORMS --\x3e<term name=\\"month-01\\" form=\\"short\\">ene.</term><term name=\\"month-02\\" form=\\"short\\">feb.</term><term name=\\"month-03\\" form=\\"short\\">mar.</term><term name=\\"month-04\\" form=\\"short\\">abr.</term><term name=\\"month-05\\" form=\\"short\\">may</term><term name=\\"month-06\\" form=\\"short\\">jun.</term><term name=\\"month-07\\" form=\\"short\\">jul.</term><term name=\\"month-08\\" form=\\"short\\">ago.</term><term name=\\"month-09\\" form=\\"short\\">sep.</term><term name=\\"month-10\\" form=\\"short\\">oct.</term><term name=\\"month-11\\" form=\\"short\\">nov.</term><term name=\\"month-12\\" form=\\"short\\">dic.</term>\\n\x3c!-- SEASONS --\x3e<term name=\\"season-01\\">primavera</term><term name=\\"season-02\\">verano</term><term name=\\"season-03\\">otoño</term><term name=\\"season-04\\">invierno</term></terms>\\n</locale>\\n"}')),hb=new Mh(JSON.parse('{"apa":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"never\\" page-range-format=\\"expanded\\"><info><title>American Psychological Association 7th edition</title><title-short>APA</title-short><id>http://www.zotero.org/styles/apa</id><link href=\\"http://www.zotero.org/styles/apa\\" rel=\\"self\\"/><link href=\\"http://www.zotero.org/styles/apa-6th-edition\\" rel=\\"template\\"/><link href=\\"https://apastyle.apa.org/style-grammar-guidelines/references/examples\\" rel=\\"documentation\\"/><author><name>Brenton M. Wiernik</name><email>zotero@wiernik.org</email></author><category citation-format=\\"author-date\\"/><category field=\\"psychology\\"/><category field=\\"generic-base\\"/><updated>2022-01-31T14:43:56+00:00</updated><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang=\\"en\\"><terms><term name=\\"editortranslator\\" form=\\"short\\"><single>ed. &amp; trans.</single><multiple>eds. &amp; trans.</multiple></term><term name=\\"translator\\" form=\\"short\\">trans.</term><term name=\\"interviewer\\" form=\\"short\\"><single>interviewer</single><multiple>interviewers</multiple></term><term name=\\"collection-editor\\" form=\\"short\\"><single>ed.</single><multiple>eds.</multiple></term><term name=\\"circa\\" form=\\"short\\">ca.</term><term name=\\"bc\\"> B.C.E.</term><term name=\\"ad\\"> C.E.</term><term name=\\"letter\\">personal communication</term><term name=\\"letter\\" form=\\"short\\">letter</term><term name=\\"issue\\" form=\\"long\\"><single>issue</single><multiple>issues</multiple></term></terms></locale><locale xml:lang=\\"af\\"><terms><term name=\\"letter\\">persoonlike kommunikasie</term><term name=\\"letter\\" form=\\"short\\">brief</term></terms></locale><locale xml:lang=\\"ar\\"><terms><term name=\\"letter\\">اتصال شخصي</term><term name=\\"letter\\" form=\\"short\\">خطاب</term></terms></locale><locale xml:lang=\\"bg\\"><terms><term name=\\"letter\\">лична комуникация</term><term name=\\"letter\\" form=\\"short\\">писмо</term></terms></locale><locale xml:lang=\\"ca\\"><terms><term name=\\"letter\\">comunicació personal</term><term name=\\"letter\\" form=\\"short\\">carta</term></terms></locale><locale xml:lang=\\"cs\\"><terms><term name=\\"letter\\">osobní komunikace</term><term name=\\"letter\\" form=\\"short\\">dopis</term></terms></locale><locale xml:lang=\\"cy\\"><terms><term name=\\"letter\\">cyfathrebu personol</term><term name=\\"letter\\" form=\\"short\\">llythyr</term></terms></locale><locale xml:lang=\\"da\\"><terms><term name=\\"et-al\\">et al.</term><term name=\\"letter\\">personlig kommunikation</term><term name=\\"letter\\" form=\\"short\\">brev</term></terms></locale><locale xml:lang=\\"de\\"><terms><term name=\\"et-al\\">et al.</term><term name=\\"letter\\">persönliche Kommunikation</term><term name=\\"letter\\" form=\\"short\\">Brief</term></terms></locale><locale xml:lang=\\"el\\"><terms><term name=\\"letter\\">προσωπική επικοινωνία</term><term name=\\"letter\\" form=\\"short\\">επιστολή</term></terms></locale><locale xml:lang=\\"es\\"><terms><term name=\\"from\\">de</term><term name=\\"letter\\">comunicación personal</term><term name=\\"letter\\" form=\\"short\\">carta</term></terms></locale><locale xml:lang=\\"et\\"><terms><term name=\\"letter\\">isiklik suhtlus</term><term name=\\"letter\\" form=\\"short\\">kiri</term></terms></locale><locale xml:lang=\\"eu\\"><terms><term name=\\"letter\\">komunikazio pertsonala</term><term name=\\"letter\\" form=\\"short\\">gutuna</term></terms></locale><locale xml:lang=\\"fa\\"><terms><term name=\\"letter\\">ارتباط شخصی</term><term name=\\"letter\\" form=\\"short\\">نامه</term></terms></locale><locale xml:lang=\\"fi\\"><terms><term name=\\"letter\\">henkilökohtainen viestintä</term><term name=\\"letter\\" form=\\"short\\">kirje</term></terms></locale><locale xml:lang=\\"fr\\"><terms><term name=\\"letter\\">communication personnelle</term><term name=\\"letter\\" form=\\"short\\">lettre</term><term name=\\"editor\\" form=\\"short\\"><single>éd.</single><multiple>éds.</multiple></term></terms></locale><locale xml:lang=\\"he\\"><terms><term name=\\"letter\\">תקשורת אישית</term><term name=\\"letter\\" form=\\"short\\">מכתב</term></terms></locale><locale xml:lang=\\"hr\\"><terms><term name=\\"letter\\">osobna komunikacija</term><term name=\\"letter\\" form=\\"short\\">pismo</term></terms></locale><locale xml:lang=\\"hu\\"><terms><term name=\\"letter\\">személyes kommunikáció</term><term name=\\"letter\\" form=\\"short\\">levél</term></terms></locale><locale xml:lang=\\"id\\"><terms><term name=\\"letter\\">komunikasi pribadi</term><term name=\\"letter\\" form=\\"short\\">surat</term></terms></locale><locale xml:lang=\\"is\\"><terms><term name=\\"letter\\">persónuleg samskipti</term><term name=\\"letter\\" form=\\"short\\">bréf</term></terms></locale><locale xml:lang=\\"it\\"><terms><term name=\\"letter\\">comunicazione personale</term><term name=\\"letter\\" form=\\"short\\">lettera</term></terms></locale><locale xml:lang=\\"ja\\"><terms><term name=\\"letter\\">個人的なやり取り</term><term name=\\"letter\\" form=\\"short\\">手紙</term></terms></locale><locale xml:lang=\\"ko\\"><terms><term name=\\"letter\\">개인 서신</term><term name=\\"letter\\" form=\\"short\\">편지</term></terms></locale><locale xml:lang=\\"la\\"><terms><term name=\\"letter\\"/><term name=\\"letter\\" form=\\"short\\">epistula</term></terms></locale><locale xml:lang=\\"lt\\"><terms><term name=\\"letter\\">communicationis personalis</term><term name=\\"letter\\" form=\\"short\\"/></terms></locale><locale xml:lang=\\"lv\\"><terms><term name=\\"letter\\">personīga komunikācija</term><term name=\\"letter\\" form=\\"short\\">vēstule</term></terms></locale><locale xml:lang=\\"mn\\"><terms><term name=\\"letter\\">хувийн харилцаа холбоо</term><term name=\\"letter\\" form=\\"short\\">захиа</term></terms></locale><locale xml:lang=\\"nb\\"><terms><term name=\\"et-al\\">et al.</term><term name=\\"letter\\">personlig kommunikasjon</term><term name=\\"letter\\" form=\\"short\\">brev</term></terms></locale><locale xml:lang=\\"nl\\"><terms><term name=\\"et-al\\">et al.</term><term name=\\"letter\\">persoonlijke communicatie</term><term name=\\"letter\\" form=\\"short\\">brief</term></terms></locale><locale xml:lang=\\"nn\\"><terms><term name=\\"et-al\\">et al.</term><term name=\\"letter\\">personlig kommunikasjon</term><term name=\\"letter\\" form=\\"short\\">brev</term></terms></locale><locale xml:lang=\\"pl\\"><terms><term name=\\"letter\\">osobista komunikacja</term><term name=\\"letter\\" form=\\"short\\">list</term></terms></locale><locale xml:lang=\\"pt\\"><terms><term name=\\"letter\\">comunicação pessoal</term><term name=\\"letter\\" form=\\"short\\">carta</term></terms></locale><locale xml:lang=\\"ro\\"><terms><term name=\\"letter\\">comunicare personală</term><term name=\\"letter\\" form=\\"short\\">scrisoare</term></terms></locale><locale xml:lang=\\"ru\\"><terms><term name=\\"letter\\">личная переписка</term><term name=\\"letter\\" form=\\"short\\">письмо</term></terms></locale><locale xml:lang=\\"sk\\"><terms><term name=\\"letter\\">osobná komunikácia</term><term name=\\"letter\\" form=\\"short\\">list</term></terms></locale><locale xml:lang=\\"sl\\"><terms><term name=\\"letter\\">osebna komunikacija</term><term name=\\"letter\\" form=\\"short\\">pismo</term></terms></locale><locale xml:lang=\\"sr\\"><terms><term name=\\"letter\\">лична комуникација</term><term name=\\"letter\\" form=\\"short\\">писмо</term></terms></locale><locale xml:lang=\\"sv\\"><terms><term name=\\"letter\\">personlig kommunikation</term><term name=\\"letter\\" form=\\"short\\">brev</term></terms></locale><locale xml:lang=\\"th\\"><terms><term name=\\"letter\\">การสื่อสารส่วนบุคคล</term><term name=\\"letter\\" form=\\"short\\">จดหมาย</term></terms></locale><locale xml:lang=\\"tr\\"><terms><term name=\\"letter\\">kişisel iletişim</term><term name=\\"letter\\" form=\\"short\\">mektup</term></terms></locale><locale xml:lang=\\"uk\\"><terms><term name=\\"letter\\">особисте спілкування</term><term name=\\"letter\\" form=\\"short\\">лист</term></terms></locale><locale xml:lang=\\"vi\\"><terms><term name=\\"letter\\">giao tiếp cá nhân</term><term name=\\"letter\\" form=\\"short\\">thư</term></terms></locale><locale xml:lang=\\"zh-CN\\"><terms><term name=\\"letter\\">的私人交流</term><term name=\\"letter\\" form=\\"short\\">信函</term></terms></locale><locale xml:lang=\\"zh-TW\\"><terms><term name=\\"letter\\">私人通訊</term><term name=\\"letter\\" form=\\"short\\">信函</term></terms></locale>\x3c!-- General categories of item types:Periodical: article-journal article-magazine article-newspaper post-weblog review review-bookPeriodical or Booklike: paper-conferenceBooklike: article book broadcast chapter dataset entry entry-dictionary entry-encyclopedia figure graphic interview manuscript map motion_picture musical_score pamphlet patent personal_communication report song speech thesis post webpageLegal: bill legal_case legislation treaty--\x3e\x3c!-- APA references contain four parts: author, date, title, source --\x3e<macro name=\\"author-bib\\"><names variable=\\"composer\\" delimiter=\\", \\"><name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><substitute><names variable=\\"author\\"/><names variable=\\"illustrator\\"/><names variable=\\"director\\"><name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"long\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"title\\"/></names><choose><if variable=\\"container-title\\"><choose><if type=\\"book entry entry-dictionary entry-encyclopedia\\" match=\\"any\\"><choose><if variable=\\"title\\"><group delimiter=\\" \\"><text macro=\\"title\\"/><text macro=\\"parenthetical\\"/></group></if><else><text macro=\\"title-and-descriptions\\"/></else></choose></if></choose></if></choose>\x3c!-- Test for editortranslator and put that first as that becomes available --\x3e<names variable=\\"editor\\" delimiter=\\", \\"><name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"title\\"/></names><names variable=\\"editorial-director\\"><name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"title\\"/></names><names variable=\\"collection-editor\\"><name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"title\\"/></names><choose><if variable=\\"title\\"><group delimiter=\\" \\"><text macro=\\"title\\"/><text macro=\\"parenthetical\\"/></group></if><else><text macro=\\"title-and-descriptions\\"/></else></choose></substitute></names></macro><macro name=\\"author-intext\\"><choose><if type=\\"bill legal_case legislation treaty\\" match=\\"any\\"><text macro=\\"title-intext\\"/></if><else-if type=\\"interview personal_communication\\" match=\\"any\\"><choose>\x3c!-- These variables indicate that the letter is retrievable by the reader. If not, then use the APA in-text-only personal communication format --\x3e<if variable=\\"archive container-title DOI publisher URL\\" match=\\"none\\"><group delimiter=\\", \\"><names variable=\\"author\\"><name and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/><substitute><text macro=\\"title-intext\\"/></substitute></names>\x3c!-- Replace with term=\\"personal-communication\\" if that becomes available --\x3e<text term=\\"letter\\"/></group></if><else><names variable=\\"author\\" delimiter=\\", \\"><name form=\\"short\\" and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/><substitute><text macro=\\"title-intext\\"/></substitute></names></else></choose></else-if><else><names variable=\\"composer\\" delimiter=\\", \\"><name form=\\"short\\" and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/><substitute><names variable=\\"author\\"/><names variable=\\"illustrator\\"/><names variable=\\"director\\"/><choose><if variable=\\"container-title\\"><choose><if type=\\"book entry entry-dictionary entry-encyclopedia\\" match=\\"any\\"><text macro=\\"title-intext\\"/></if></choose></if></choose><names variable=\\"editor\\"/><names variable=\\"editorial-director\\"/><text macro=\\"title-intext\\"/></substitute></names></else></choose></macro><macro name=\\"date-bib\\"><group delimiter=\\" \\" prefix=\\"(\\" suffix=\\")\\"><choose><if is-uncertain-date=\\"issued\\"><text term=\\"circa\\" form=\\"short\\"/></if></choose><group><choose><if variable=\\"issued\\"><date variable=\\"issued\\"><date-part name=\\"year\\"/></date><text variable=\\"year-suffix\\"/><choose><if type=\\"article-magazine article-newspaper broadcast interview motion_picture pamphlet personal_communication post post-weblog song speech webpage\\" match=\\"any\\">\x3c!-- Many video and audio examples in manual give full dates. Err on the side of too much information. --\x3e<date variable=\\"issued\\"><date-part prefix=\\", \\" name=\\"month\\"/><date-part prefix=\\" \\" name=\\"day\\"/></date></if><else-if type=\\"paper-conference\\">\x3c!-- Capture \'speech\' stored as \'paper-conference\' --\x3e<choose><if variable=\\"collection-editor editor editorial-director issue page volume\\" match=\\"none\\"><date variable=\\"issued\\"><date-part prefix=\\", \\" name=\\"month\\"/><date-part prefix=\\" \\" name=\\"day\\"/></date></if></choose></else-if>\x3c!-- Only year: article article-journal book chapter entry entry-dictionary entry-encyclopedia dataset figure graphic manuscript map musical_score paper-conference[published] patent report review review-book thesis --\x3e</choose></if><else-if variable=\\"status\\"><group><text variable=\\"status\\" text-case=\\"lowercase\\"/><text variable=\\"year-suffix\\" prefix=\\"-\\"/></group></else-if><else><text term=\\"no date\\" form=\\"short\\"/><text variable=\\"year-suffix\\" prefix=\\"-\\"/></else></choose></group></group></macro><macro name=\\"date-sort-group\\">\x3c!-- APA sorts 1. no-date items, 2. items with dates, 3. in-press (status) items --\x3e<choose><if variable=\\"issued\\"><text value=\\"1\\"/></if><else-if variable=\\"status\\"><text value=\\"2\\"/></else-if><else><text value=\\"0\\"/></else></choose></macro><macro name=\\"date-sort-date\\"><date variable=\\"issued\\" form=\\"numeric\\"/></macro><macro name=\\"date-intext\\"><choose><if variable=\\"issued\\"><group delimiter=\\"/\\"><group delimiter=\\" \\"><choose><if is-uncertain-date=\\"original-date\\"><text term=\\"circa\\" form=\\"short\\"/></if></choose><date variable=\\"original-date\\"><date-part name=\\"year\\"/></date></group><group delimiter=\\" \\"><choose><if is-uncertain-date=\\"issued\\"><text term=\\"circa\\" form=\\"short\\"/></if></choose><group><choose><if type=\\"interview personal_communication\\" match=\\"any\\"><choose><if variable=\\"archive container-title DOI publisher URL\\" match=\\"none\\">\x3c!-- These variables indicate that the communication is retrievable by the reader. If not, then use the in-text-only personal communication format --\x3e<date variable=\\"issued\\" form=\\"text\\"/></if><else><date variable=\\"issued\\"><date-part name=\\"year\\"/></date></else></choose></if><else><date variable=\\"issued\\"><date-part name=\\"year\\"/></date></else></choose><text variable=\\"year-suffix\\"/></group></group></group></if><else-if variable=\\"status\\"><text variable=\\"status\\" text-case=\\"lowercase\\"/><text variable=\\"year-suffix\\" prefix=\\"-\\"/></else-if><else><text term=\\"no date\\" form=\\"short\\"/><text variable=\\"year-suffix\\" prefix=\\"-\\"/></else></choose></macro>\x3c!-- APA has two description elements following the title:title (parenthetical) [bracketed]  --\x3e<macro name=\\"title-and-descriptions\\"><choose><if variable=\\"title\\"><group delimiter=\\" \\"><text macro=\\"title\\"/><text macro=\\"parenthetical\\"/><text macro=\\"bracketed\\"/></group></if><else><group delimiter=\\" \\"><text macro=\\"bracketed\\"/><text macro=\\"parenthetical\\"/></group></else></choose></macro><macro name=\\"title\\"><choose><if type=\\"post webpage\\" match=\\"any\\">\x3c!-- Webpages are always italicized --\x3e<text variable=\\"title\\" font-style=\\"italic\\"/></if><else-if variable=\\"container-title\\" match=\\"any\\">\x3c!-- Other types are italicized based on presence of container-title.Assume that review and review-book are published in periodicals/blogs,not just on a web page (ex. 69) --\x3e<text variable=\\"title\\"/></else-if><else><choose><if type=\\"article-journal article-magazine article-newspaper post-weblog review review-book\\" match=\\"any\\"><text variable=\\"title\\" font-style=\\"italic\\"/></if><else-if type=\\"paper-conference\\"><choose><if variable=\\"collection-editor editor editorial-director\\" match=\\"any\\"><group delimiter=\\": \\" font-style=\\"italic\\"><text variable=\\"title\\"/>\x3c!-- Replace with volume-title as that becomes available --\x3e<choose><if is-numeric=\\"volume\\" match=\\"none\\"><group delimiter=\\" \\"><label variable=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"volume\\"/></group></if></choose></group></if><else><text variable=\\"title\\" font-style=\\"italic\\"/></else></choose></else-if><else><group delimiter=\\": \\" font-style=\\"italic\\"><text variable=\\"title\\"/>\x3c!-- Replace with volume-title as that becomes available --\x3e<choose><if is-numeric=\\"volume\\" match=\\"none\\"><group delimiter=\\" \\"><label variable=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"volume\\"/></group></if></choose></group></else></choose></else></choose></macro><macro name=\\"title-intext\\"><choose><if variable=\\"title\\" match=\\"none\\"><text macro=\\"bracketed-intext\\" prefix=\\"[\\" suffix=\\"]\\"/></if><else-if type=\\"bill\\">\x3c!-- If a bill has no number or container-title, assume it is a hearing; italic --\x3e<choose><if variable=\\"number container-title\\" match=\\"none\\"><text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\" text-case=\\"title\\"/></if><else-if variable=\\"title\\"><text variable=\\"title\\" form=\\"short\\" text-case=\\"title\\"/></else-if><else><group delimiter=\\" \\"><text variable=\\"genre\\"/><group delimiter=\\" \\"><choose><if variable=\\"chapter-number container-title\\" match=\\"none\\">\x3c!-- Replace with label variable=\\"number\\" as that becomes available --\x3e<text term=\\"issue\\" form=\\"short\\"/></if></choose><text variable=\\"number\\"/></group></group></else></choose></else-if><else-if type=\\"legal_case\\" match=\\"any\\">\x3c!-- Cases are italicized --\x3e<text variable=\\"title\\" font-style=\\"italic\\"/></else-if><else-if type=\\"legislation treaty\\" match=\\"any\\">\x3c!-- Legislation and treaties not italicized or quoted --\x3e<text variable=\\"title\\" form=\\"short\\" text-case=\\"title\\"/></else-if><else-if type=\\"post webpage\\" match=\\"any\\">\x3c!-- Webpages are always italicized --\x3e<text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\" text-case=\\"title\\"/></else-if><else-if variable=\\"container-title\\" match=\\"any\\">\x3c!-- Other types are italicized or quoted based on presence of container-title. As in title macro. --\x3e<text variable=\\"title\\" form=\\"short\\" quotes=\\"true\\" text-case=\\"title\\"/></else-if><else><text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\" text-case=\\"title\\"/></else></choose></macro><macro name=\\"parenthetical\\">\x3c!-- (Secondary contributors; Database location; Genre no. 123; Report Series 123, Version, Edition, Volume, Page) --\x3e<group prefix=\\"(\\" suffix=\\")\\"><choose><if type=\\"patent\\">\x3c!-- authority: U.S. ; genre: patent ; number: 123,445 --\x3e<group delimiter=\\" \\"><text variable=\\"authority\\" form=\\"short\\"/><choose><if variable=\\"genre\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/></if><else>\x3c!-- This should be localized --\x3e<text value=\\"patent\\" text-case=\\"capitalize-first\\"/></else></choose><group delimiter=\\" \\">\x3c!-- Replace with label variable=\\"number\\" if that becomes available --\x3e<text term=\\"issue\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"number\\"/></group></group></if><else-if type=\\"post webpage\\" match=\\"any\\">\x3c!-- For post webpage, container-title is treated as publisher --\x3e<group delimiter=\\"; \\"><text macro=\\"secondary-contributors\\"/><text macro=\\"database-location\\"/><text macro=\\"number\\"/><text macro=\\"locators-booklike\\"/></group></else-if><else-if variable=\\"container-title\\"><group delimiter=\\"; \\"><text macro=\\"secondary-contributors\\"/><choose><if type=\\"broadcast graphic map motion_picture song\\" match=\\"any\\">\x3c!-- For audiovisual media, number information comes after title, not container-title --\x3e<text macro=\\"number\\"/></if></choose></group></else-if><else><group delimiter=\\"; \\"><text macro=\\"secondary-contributors\\"/><text macro=\\"database-location\\"/><text macro=\\"number\\"/><text macro=\\"locators-booklike\\"/></group></else></choose></group></macro><macro name=\\"parenthetical-container\\"><choose><if variable=\\"container-title\\" match=\\"any\\"><group prefix=\\"(\\" suffix=\\")\\"><group delimiter=\\"; \\"><text macro=\\"database-location\\"/><choose><if type=\\"broadcast graphic map motion_picture song\\" match=\\"none\\">\x3c!-- For audiovisual media, number information comes after title, not container-title --\x3e<text macro=\\"number\\"/></if></choose><text macro=\\"locators-booklike\\"/></group></group></if></choose></macro><macro name=\\"bracketed\\">\x3c!-- [Descriptive information] --\x3e\x3c!-- If there is a number, genre is already printed in macro=\\"number\\" --\x3e<group prefix=\\"[\\" suffix=\\"]\\"><choose><if variable=\\"reviewed-author reviewed-title\\" type=\\"review review-book\\" match=\\"any\\">\x3c!-- Reviewed item --\x3e<group delimiter=\\"; \\"><group delimiter=\\", \\"><group delimiter=\\" \\">\x3c!-- Assume that genre is entered as \'Review of the book\' or similar --\x3e<choose><if variable=\\"number\\" match=\\"none\\"><choose><if variable=\\"genre\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/></if><else-if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></else-if><else>\x3c!-- Replace with term=\\"review\\" as that becomes available --\x3e<text value=\\"Review of\\"/></else></choose></if><else><choose><if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></if><else>\x3c!-- Replace with term=\\"review\\" as that becomes available --\x3e<text value=\\"Review of\\"/></else></choose></else></choose><text macro=\\"reviewed-title\\"/></group><names variable=\\"reviewed-author\\"><label form=\\"verb-short\\" suffix=\\" \\"/><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></group><choose><if variable=\\"genre\\" match=\\"any\\"><choose><if variable=\\"number\\" match=\\"none\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></if></choose></if></choose></group></if><else-if type=\\"thesis\\">\x3c!-- Thesis type and institution --\x3e<group delimiter=\\"; \\"><choose><if variable=\\"number\\" match=\\"none\\"><group delimiter=\\", \\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/><choose><if variable=\\"archive DOI URL\\" match=\\"any\\">\x3c!-- Include the university in brackets if thesis is published --\x3e<text variable=\\"publisher\\"/></if></choose></group></if></choose><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></group></else-if><else-if variable=\\"interviewer\\" type=\\"interview\\" match=\\"any\\">\x3c!-- Interview information --\x3e<choose><if variable=\\"title\\"><text macro=\\"format\\"/></if><else-if variable=\\"genre\\"><group delimiter=\\"; \\"><group delimiter=\\" \\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/><group delimiter=\\" \\"><text term=\\"author\\" form=\\"verb\\"/><names variable=\\"interviewer\\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></group></group></group></else-if><else-if variable=\\"interviewer\\"><group delimiter=\\"; \\"><names variable=\\"interviewer\\"><label form=\\"verb\\" suffix=\\" \\" text-case=\\"capitalize-first\\"/><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></group></else-if><else><text macro=\\"format\\"/></else></choose></else-if><else-if type=\\"personal_communication\\">\x3c!-- Letter information --\x3e<choose><if variable=\\"recipient\\"><group delimiter=\\"; \\"><group delimiter=\\" \\"><choose><if variable=\\"number\\" match=\\"none\\"><choose><if variable=\\"genre\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/></if><else-if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></else-if><else><text term=\\"letter\\" form=\\"short\\" text-case=\\"capitalize-first\\"/></else></choose></if><else><choose><if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></if><else><text term=\\"letter\\" form=\\"short\\" text-case=\\"capitalize-first\\"/></else></choose></else></choose><names variable=\\"recipient\\" delimiter=\\", \\"><label form=\\"verb\\" suffix=\\" \\"/><name and=\\"symbol\\" delimiter=\\", \\"/></names></group><choose><if variable=\\"genre\\" match=\\"any\\"><choose><if variable=\\"number\\" match=\\"none\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></if></choose></if></choose></group></if><else><text macro=\\"format\\"/></else></choose></else-if><else-if variable=\\"composer\\" type=\\"song\\" match=\\"all\\">\x3c!-- Performer of classical music works --\x3e<group delimiter=\\"; \\"><choose><if variable=\\"number\\" match=\\"none\\"><group delimiter=\\" \\"><choose><if variable=\\"genre\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable=\\"author\\" prefix=\\"recorded by \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></if><else-if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable=\\"author\\" prefix=\\"recorded by \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></else-if><else>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable=\\"author\\" prefix=\\"Recorded by \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></else></choose></group></if><else><group delimiter=\\" \\"><choose><if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable=\\"author\\" prefix=\\"recorded by \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></if><else>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable=\\"author\\" prefix=\\"Recorded by \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></else></choose></group></else></choose><choose><if variable=\\"genre\\" match=\\"any\\"><choose><if variable=\\"number\\" match=\\"none\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></if></choose></if></choose></group></else-if><else-if variable=\\"container-title\\" match=\\"none\\">\x3c!-- Other description --\x3e<text macro=\\"format\\"/></else-if><else>\x3c!-- For conference presentations, chapters in reports, software, place bracketed after the container title --\x3e<choose><if type=\\"paper-conference speech\\" match=\\"any\\"><choose><if variable=\\"collection-editor editor editorial-director issue page volume\\" match=\\"any\\"><text macro=\\"format\\"/></if></choose></if><else-if type=\\"book\\"><choose><if variable=\\"version\\" match=\\"none\\"><text macro=\\"format\\"/></if></choose></else-if><else-if type=\\"report\\" match=\\"none\\"><text macro=\\"format\\"/></else-if></choose></else></choose></group></macro><macro name=\\"bracketed-intext\\"><group prefix=\\"[\\" suffix=\\"]\\"><choose><if variable=\\"reviewed-author reviewed-title\\" type=\\"review review-book\\" match=\\"any\\">\x3c!-- This should be localized --\x3e<text macro=\\"reviewed-title-intext\\" prefix=\\"Review of \\"/></if><else-if variable=\\"interviewer\\" type=\\"interview\\" match=\\"any\\"><names variable=\\"interviewer\\"><label form=\\"verb\\" suffix=\\" \\" text-case=\\"capitalize-first\\"/><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><substitute><text macro=\\"format-intext\\"/></substitute></names></else-if><else-if type=\\"personal_communication\\">\x3c!-- Letter information --\x3e<choose><if variable=\\"recipient\\"><group delimiter=\\" \\"><choose><if variable=\\"number\\" match=\\"none\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/></if><else><text term=\\"letter\\" form=\\"short\\" text-case=\\"capitalize-first\\"/></else></choose><names variable=\\"recipient\\" delimiter=\\", \\"><label form=\\"verb\\" suffix=\\" \\"/><name and=\\"symbol\\" delimiter=\\", \\"/></names></group></if><else><text macro=\\"format-intext\\"/></else></choose></else-if><else><text macro=\\"format-intext\\"/></else></choose></group></macro><macro name=\\"bracketed-container\\"><group prefix=\\"[\\" suffix=\\"]\\"><choose><if type=\\"paper-conference speech\\" match=\\"any\\">\x3c!-- Conference presentations should describe the session [container] in bracketed unless published in a proceedings --\x3e<choose><if variable=\\"collection-editor editor editorial-director issue page volume\\" match=\\"none\\"><text macro=\\"format\\"/></if></choose></if><else-if type=\\"book\\" variable=\\"version\\" match=\\"all\\">\x3c!-- For entries in mobile app reference works, place bracketed after the container-title --\x3e<text macro=\\"format\\"/></else-if><else-if type=\\"report\\">\x3c!-- For chapters in reports, place bracketed after the container title --\x3e<text macro=\\"format\\"/></else-if></choose></group></macro><macro name=\\"secondary-contributors\\"><choose><if type=\\"article-journal article-magazine article-newspaper post-weblog review review-book\\" match=\\"any\\"><text macro=\\"secondary-contributors-periodical\\"/></if><else-if type=\\"paper-conference\\"><choose><if variable=\\"collection-editor editor editorial-director\\" match=\\"any\\"><text macro=\\"secondary-contributors-booklike\\"/></if><else><text macro=\\"secondary-contributors-periodical\\"/></else></choose></else-if><else><text macro=\\"secondary-contributors-booklike\\"/></else></choose></macro><macro name=\\"secondary-contributors-periodical\\"><group delimiter=\\"; \\"><choose><if variable=\\"title\\"><names variable=\\"interviewer\\" delimiter=\\"; \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><label form=\\"short\\" prefix=\\", \\" text-case=\\"title\\"/></names></if></choose><names variable=\\"translator\\" delimiter=\\"; \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><label form=\\"short\\" prefix=\\", \\" text-case=\\"title\\"/></names></group></macro><macro name=\\"secondary-contributors-booklike\\"><group delimiter=\\"; \\"><choose><if variable=\\"title\\"><names variable=\\"interviewer\\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><label form=\\"short\\" prefix=\\", \\" text-case=\\"title\\"/></names></if></choose>\x3c!-- When editortranslator becomes available, add a test: variable=\\"editortranslator\\" match=\\"none\\"; then print translator --\x3e<choose><if type=\\"post webpage\\" match=\\"none\\">\x3c!-- Webpages treat container-title like publisher --\x3e<choose><if variable=\\"container-title\\" match=\\"none\\"><group delimiter=\\"; \\"><names variable=\\"container-author\\"><label form=\\"verb-short\\" suffix=\\" \\" text-case=\\"title\\"/><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names><names variable=\\"editor translator\\" delimiter=\\"; \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><label form=\\"short\\" prefix=\\", \\" text-case=\\"title\\"/></names></group></if></choose></if><else><group delimiter=\\"; \\"><names variable=\\"container-author\\"><label form=\\"verb-short\\" suffix=\\" \\" text-case=\\"title\\"/><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/></names><names variable=\\"editor translator\\" delimiter=\\"; \\"><name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><label form=\\"short\\" prefix=\\", \\" text-case=\\"title\\"/></names></group></else></choose></group></macro><macro name=\\"database-location\\"><choose><if variable=\\"archive-place\\" match=\\"none\\">\x3c!-- With `archive-place`: physical archives. Without: online archives. --\x3e\x3c!-- Add archive_collection as that becomes available --\x3e<text variable=\\"archive_location\\"/></if></choose></macro><macro name=\\"number\\"><choose><if variable=\\"number\\"><group delimiter=\\", \\"><group delimiter=\\" \\"><text variable=\\"genre\\" text-case=\\"title\\"/><choose><if is-numeric=\\"number\\">\x3c!-- Replace with label variable=\\"number\\" if that becomes available --\x3e<text term=\\"issue\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"number\\"/></if><else><text variable=\\"number\\"/></else></choose></group><choose><if type=\\"thesis\\"><choose>\x3c!-- Include the university in brackets if thesis is published --\x3e<if variable=\\"archive DOI URL\\" match=\\"any\\"><text variable=\\"publisher\\"/></if></choose></if></choose></group></if></choose></macro><macro name=\\"locators-booklike\\"><choose><if type=\\"article-journal article-magazine article-newspaper broadcast interview patent post post-weblog review review-book speech webpage\\" match=\\"any\\"/><else-if type=\\"paper-conference\\"><choose><if variable=\\"collection-editor editor editorial-director\\" match=\\"any\\"><group delimiter=\\", \\"><text macro=\\"version\\"/><text macro=\\"edition\\"/><text macro=\\"volume-booklike\\"/></group></if></choose></else-if><else><group delimiter=\\", \\"><text macro=\\"version\\"/><text macro=\\"edition\\"/><text macro=\\"volume-booklike\\"/></group></else></choose></macro><macro name=\\"version\\"><choose><if is-numeric=\\"version\\"><group delimiter=\\" \\">\x3c!-- replace with label variable=\\"version\\" if that becomes available --\x3e<text term=\\"version\\" text-case=\\"capitalize-first\\"/><text variable=\\"version\\"/></group></if><else><text variable=\\"version\\"/></else></choose></macro><macro name=\\"edition\\"><choose><if is-numeric=\\"edition\\"><group delimiter=\\" \\"><number variable=\\"edition\\" form=\\"ordinal\\"/><label variable=\\"edition\\" form=\\"short\\"/></group></if><else><text variable=\\"edition\\"/></else></choose></macro><macro name=\\"volume-booklike\\"><group delimiter=\\", \\">\x3c!-- Report series [ex. 52] --\x3e<choose><if type=\\"report\\"><group delimiter=\\" \\"><text variable=\\"collection-title\\" text-case=\\"title\\"/><text variable=\\"collection-number\\"/></group></if></choose><choose><if variable=\\"volume\\" match=\\"any\\"><choose>\x3c!-- Non-numeric volumes are already printed as part of the book title --\x3e<if is-numeric=\\"volume\\" match=\\"none\\"/><else><group delimiter=\\" \\"><label variable=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><number variable=\\"volume\\" form=\\"numeric\\"/></group></else></choose></if><else><group>\x3c!-- Replace with label variable=\\"number-of-volumes\\" if that becomes available --\x3e<text term=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/><text term=\\"page-range-delimiter\\" prefix=\\"1\\"/><number variable=\\"number-of-volumes\\" form=\\"numeric\\"/></group></else></choose><group delimiter=\\" \\"><label variable=\\"issue\\" text-case=\\"capitalize-first\\"/><text variable=\\"issue\\"/></group><group delimiter=\\" \\"><label variable=\\"page\\" form=\\"short\\" suffix=\\" \\"/><text variable=\\"page\\"/></group></group></macro><macro name=\\"reviewed-title\\"><choose><if variable=\\"reviewed-title\\">\x3c!-- Not possible to distinguish TV series episode from other reviewed works [Ex. 69] --\x3e<text variable=\\"reviewed-title\\" font-style=\\"italic\\"/></if><else>\x3c!-- Assume title is title of reviewed work --\x3e<text variable=\\"title\\" font-style=\\"italic\\"/></else></choose></macro><macro name=\\"reviewed-title-intext\\"><choose><if variable=\\"reviewed-title\\">\x3c!-- Not possible to distinguish TV series episode from other reviewed works [Ex. 69] --\x3e<text variable=\\"reviewed-title\\" form=\\"short\\" font-style=\\"italic\\" text-case=\\"title\\"/></if><else>\x3c!-- Assume title is title of reviewed work --\x3e<text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\" text-case=\\"title\\"/></else></choose></macro><macro name=\\"format\\"><choose><if variable=\\"genre medium\\" match=\\"any\\"><group delimiter=\\"; \\"><choose><if variable=\\"number\\" match=\\"none\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/></if></choose><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></group></if>\x3c!-- Generic labels for specific types --\x3e\x3c!-- These should be localized when possible --\x3e<else-if type=\\"dataset\\"><text value=\\"Data set\\"/></else-if><else-if type=\\"book\\" variable=\\"version\\" match=\\"all\\">\x3c!-- Replace with type=\\"software\\" and term=\\"software\\" as that becomes available --\x3e<text value=\\"Computer software\\"/></else-if><else-if type=\\"interview personal_communication\\" match=\\"any\\"><choose><if variable=\\"archive container-title DOI publisher URL\\" match=\\"none\\"><text term=\\"letter\\" text-case=\\"capitalize-first\\"/></if><else-if type=\\"interview\\"><text term=\\"interview\\" text-case=\\"capitalize-first\\"/></else-if></choose></else-if><else-if type=\\"map\\"><text value=\\"Map\\"/></else-if></choose></macro><macro name=\\"format-intext\\"><choose><if variable=\\"genre\\" match=\\"any\\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/></if><else-if variable=\\"medium\\"><text variable=\\"medium\\" text-case=\\"capitalize-first\\"/></else-if>\x3c!-- Generic labels for specific types --\x3e\x3c!-- These should be localized when possible --\x3e<else-if type=\\"dataset\\"><text value=\\"Data set\\"/></else-if><else-if type=\\"book\\" variable=\\"version\\" match=\\"all\\">\x3c!-- Replace with type=\\"software\\" and term=\\"software\\" as that becomes available --\x3e<text value=\\"Computer software\\"/></else-if><else-if type=\\"interview personal_communication\\" match=\\"any\\"><choose><if variable=\\"archive container-title DOI publisher URL\\" match=\\"none\\"><text term=\\"letter\\" text-case=\\"capitalize-first\\"/></if><else-if type=\\"interview\\"><text term=\\"interview\\" text-case=\\"capitalize-first\\"/></else-if></choose></else-if><else-if type=\\"map\\"><text value=\\"Map\\"/></else-if></choose></macro>\x3c!-- APA \'source\' element contains four parts:container, event, publisher, access --\x3e<macro name=\\"container\\"><choose><if type=\\"article-journal article-magazine article-newspaper post-weblog review review-book\\" match=\\"any\\">\x3c!-- Periodical items --\x3e<text macro=\\"container-periodical\\"/></if><else-if type=\\"paper-conference\\">\x3c!-- Determine if paper-conference is a periodical or booklike --\x3e<choose><if variable=\\"editor editorial-director collection-editor container-author\\" match=\\"any\\"><text macro=\\"container-booklike\\"/></if><else><text macro=\\"container-periodical\\"/></else></choose></else-if><else-if type=\\"post webpage\\" match=\\"none\\">\x3c!-- post and webpage treat container-title like publisher --\x3e<text macro=\\"container-booklike\\"/></else-if></choose></macro><macro name=\\"container-periodical\\"><group delimiter=\\". \\"><group delimiter=\\", \\"><text variable=\\"container-title\\" font-style=\\"italic\\" text-case=\\"title\\"/><choose><if variable=\\"volume\\"><group><text variable=\\"volume\\" font-style=\\"italic\\"/><text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/></group></if><else><text variable=\\"issue\\" font-style=\\"italic\\"/></else></choose><choose><if variable=\\"page\\"><text variable=\\"page\\"/></if><else>\x3c!-- Ex. 6: Journal article with article number or eLocator --\x3e\x3c!-- This should be localized --\x3e<text variable=\\"number\\" prefix=\\"Article \\"/></else></choose></group><choose><if variable=\\"issued\\"><choose><if variable=\\"issue page volume\\" match=\\"none\\"><text variable=\\"status\\" text-case=\\"capitalize-first\\"/></if></choose></if></choose></group></macro><macro name=\\"container-booklike\\"><choose><if variable=\\"container-title\\" match=\\"any\\"><group delimiter=\\" \\"><text term=\\"in\\" text-case=\\"capitalize-first\\"/><group delimiter=\\", \\"><names variable=\\"editor translator\\" delimiter=\\", &amp; \\">\x3c!-- Change to editortranslator and move editor to substitute as that becomes available --\x3e<name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/><label form=\\"short\\" text-case=\\"title\\" prefix=\\" (\\" suffix=\\")\\"/><substitute><names variable=\\"editorial-director\\"/><names variable=\\"collection-editor\\"/><names variable=\\"container-author\\"/></substitute></names><group delimiter=\\": \\" font-style=\\"italic\\"><text variable=\\"container-title\\"/>\x3c!-- Replace with volume-title as that becomes available --\x3e<choose><if is-numeric=\\"volume\\" match=\\"none\\"><group delimiter=\\" \\"><label variable=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"volume\\"/></group></if></choose></group></group><text macro=\\"parenthetical-container\\"/><text macro=\\"bracketed-container\\"/></group></if></choose></macro><macro name=\\"publisher\\"><group delimiter=\\"; \\"><choose><if type=\\"thesis\\"><choose><if variable=\\"archive DOI URL\\" match=\\"none\\"><text variable=\\"publisher\\"/></if></choose></if><else-if type=\\"post webpage\\" match=\\"any\\">\x3c!-- For websites, treat container title like publisher --\x3e<group delimiter=\\"; \\"><text variable=\\"container-title\\" text-case=\\"title\\"/><text variable=\\"publisher\\"/></group></else-if><else-if type=\\"paper-conference\\">\x3c!-- For paper-conference, don\'t print publisher if in a journal-like proceedings --\x3e<choose><if variable=\\"collection-editor editor editorial-director\\" match=\\"any\\"><text variable=\\"publisher\\"/></if></choose></else-if><else-if type=\\"article-journal article-magazine article-newspaper post-weblog\\" match=\\"none\\"><text variable=\\"publisher\\"/></else-if></choose><group delimiter=\\", \\"><choose><if variable=\\"archive-place\\">\x3c!-- With `archive-place`: physical archives. Without: online archives. --\x3e\x3c!-- For physical archives, print the location before the archive name.For electronic archives, these are printed in macro=\\"description\\". --\x3e\x3c!-- Split \\"archive_location\\" into \\"archive_collection\\" and \\"archive_location\\" as that becomes available --\x3e\x3c!-- Must test for archive_collection:With collection: archive_collection (archive_location), archive, archive-placeNo collection: archive (archive_location), archive-place--\x3e<text variable=\\"archive_location\\"/></if></choose><text variable=\\"archive\\"/><text variable=\\"archive-place\\"/></group></group></macro><macro name=\\"access\\"><choose><if variable=\\"DOI\\" match=\\"any\\"><text variable=\\"DOI\\" prefix=\\"https://doi.org/\\"/></if><else-if variable=\\"URL\\"><group delimiter=\\" \\"><choose><if variable=\\"issued status\\" match=\\"none\\"><group delimiter=\\" \\"><text term=\\"retrieved\\" text-case=\\"capitalize-first\\"/><date variable=\\"accessed\\" form=\\"text\\" suffix=\\",\\"/><text term=\\"from\\"/></group></if></choose><text variable=\\"URL\\"/></group></else-if></choose></macro><macro name=\\"event\\"><choose><if variable=\\"event\\">\x3c!-- To prevent Zotero from printing event-place due to its double-mapping of all \'place\' toboth publisher-place and event-place. Remove this \'choose\' when that is changed. --\x3e<choose><if variable=\\"collection-editor editor editorial-director issue page volume\\" match=\\"none\\">\x3c!-- Don\'t print event info if published in a proceedings --\x3e<group delimiter=\\", \\"><text variable=\\"event\\"/><text variable=\\"event-place\\"/></group></if></choose></if></choose></macro>\x3c!-- After \'source\', APA also prints publication history (original publication, reprint info, retraction info) --\x3e<macro name=\\"publication-history\\"><choose><if type=\\"patent\\" match=\\"none\\"><group prefix=\\"(\\" suffix=\\")\\"><choose><if variable=\\"references\\">\x3c!-- This provides the option for more elaborate description of publication history, such as full \\"reprinted\\" references(examples 11, 43, 44) or retracted references --\x3e<text variable=\\"references\\"/></if><else><group delimiter=\\" \\"><text value=\\"Original work published\\"/><choose><if is-uncertain-date=\\"original-date\\"><text term=\\"circa\\" form=\\"short\\"/></if></choose><date variable=\\"original-date\\"><date-part name=\\"year\\"/></date></group></else></choose></group></if><else><text variable=\\"references\\" prefix=\\"(\\" suffix=\\")\\"/></else></choose></macro>\x3c!-- Legal citations have their own rules --\x3e<macro name=\\"legal-cites\\"><choose><if type=\\"legal_case\\"><group delimiter=\\". \\"><group delimiter=\\", \\"><text variable=\\"title\\"/><group delimiter=\\" \\"><text macro=\\"container-legal\\"/><text macro=\\"date-legal\\"/></group><text variable=\\"references\\"/></group><text macro=\\"access\\"/></group></if><else-if type=\\"bill\\">\x3c!-- Currently designed to handle bills, resolutions, hearings, rederal reports. --\x3e<group delimiter=\\". \\"><group delimiter=\\", \\"><choose><if variable=\\"number container-title\\" match=\\"none\\">\x3c!-- If no number or container-title, then assume it is a hearing --\x3e<text variable=\\"title\\" font-style=\\"italic\\"/></if><else><text variable=\\"title\\"/></else></choose><group delimiter=\\" \\"><text macro=\\"container-legal\\"/><text macro=\\"date-legal\\"/><choose><if variable=\\"number container-title\\" match=\\"none\\">\x3c!-- If no number or container-title, then assume it is a hearing --\x3e<names variable=\\"author\\" prefix=\\"(testimony of \\" suffix=\\")\\"><name and=\\"symbol\\" delimiter=\\", \\"/></names></if><else><text variable=\\"status\\" prefix=\\"(\\" suffix=\\")\\"/></else></choose></group><text variable=\\"references\\"/></group><text macro=\\"access\\"/></group></else-if><else-if type=\\"legislation\\">\x3c!-- Currently designed to handle statutes, codified regulations, executive orders.For uncodified regulations, assume future code section is in status. --\x3e<group delimiter=\\". \\"><group delimiter=\\", \\"><text variable=\\"title\\"/><group delimiter=\\" \\"><text macro=\\"container-legal\\"/><text macro=\\"date-legal\\"/><text variable=\\"status\\" prefix=\\"(\\" suffix=\\")\\"/></group><text variable=\\"references\\"/></group><text macro=\\"access\\"/></group></else-if><else-if type=\\"treaty\\">\x3c!-- APA generally defers to Bluebook for legal citations, but diverges withoutexplanation for treaty items. The Bluebook format that was used in APA 6thed. is used here. --\x3e<group delimiter=\\", \\"><text variable=\\"title\\" text-case=\\"title\\"/><names variable=\\"author\\"><name initialize-with=\\".\\" form=\\"short\\" delimiter=\\"-\\"/></names><text macro=\\"date-legal\\"/><text macro=\\"container-legal\\"/><text macro=\\"access\\"/></group></else-if></choose></macro><macro name=\\"date-legal\\"><choose><if type=\\"legal_case\\"><group prefix=\\"(\\" suffix=\\")\\" delimiter=\\" \\"><text variable=\\"authority\\"/><choose><if variable=\\"container-title\\" match=\\"any\\">\x3c!-- Print only year for cases published in reporters--\x3e<date variable=\\"issued\\" form=\\"numeric\\" date-parts=\\"year\\"/></if><else><date variable=\\"issued\\" form=\\"text\\"/></else></choose></group></if><else-if type=\\"bill legislation\\" match=\\"any\\"><group prefix=\\"(\\" suffix=\\")\\" delimiter=\\" \\"><group delimiter=\\" \\"><date variable=\\"original-date\\"><date-part name=\\"year\\"/></date><text term=\\"and\\" form=\\"symbol\\"/></group><date variable=\\"issued\\"><date-part name=\\"year\\"/></date></group></else-if><else-if type=\\"treaty\\"><date variable=\\"issued\\" form=\\"text\\"/></else-if></choose></macro><macro name=\\"container-legal\\">\x3c!-- Expect legal item container-titles to be stored in short form --\x3e<choose><if type=\\"legal_case\\"><group delimiter=\\" \\"><choose><if variable=\\"container-title\\"><group delimiter=\\" \\"><text variable=\\"volume\\"/><text variable=\\"container-title\\"/><group delimiter=\\" \\">\x3c!-- Change to label variable=\\"section\\" as that becomes available --\x3e<text term=\\"section\\" form=\\"symbol\\"/><text variable=\\"section\\"/></group><choose><if variable=\\"page page-first\\" match=\\"any\\"><text variable=\\"page-first\\"/></if><else><text value=\\"___\\"/></else></choose></group></if><else><group delimiter=\\" \\"><choose><if is-numeric=\\"number\\">\x3c!-- Replace with label variable=\\"number\\" if that becomes available --\x3e<text term=\\"issue\\" form=\\"short\\" text-case=\\"capitalize-first\\"/></if></choose><text variable=\\"number\\"/></group></else></choose></group></if><else-if type=\\"bill\\"><group delimiter=\\", \\"><group delimiter=\\" \\"><text variable=\\"genre\\"/><group delimiter=\\" \\"><choose><if variable=\\"chapter-number container-title\\" match=\\"none\\">\x3c!-- Replace with label variable=\\"number\\" as that becomes available --\x3e<text term=\\"issue\\" form=\\"short\\"/></if></choose><text variable=\\"number\\"/></group></group><text variable=\\"authority\\"/><text variable=\\"chapter-number\\"/><group delimiter=\\" \\"><text variable=\\"volume\\"/><text variable=\\"container-title\\"/><text variable=\\"page-first\\"/></group></group></else-if><else-if type=\\"legislation\\"><choose><if variable=\\"number\\">\x3c!--There\'s a public law number--\x3e<group delimiter=\\", \\"><text variable=\\"number\\" prefix=\\"Pub. L. No. \\"/><group delimiter=\\" \\"><text variable=\\"volume\\"/><text variable=\\"container-title\\"/><text variable=\\"page-first\\"/></group></group></if><else><group delimiter=\\" \\"><text variable=\\"volume\\"/><text variable=\\"container-title\\"/><choose><if variable=\\"section\\"><group delimiter=\\" \\">\x3c!-- Change to label variable=\\"section\\" as that becomes available --\x3e<text term=\\"section\\" form=\\"symbol\\"/><text variable=\\"section\\"/></group></if><else><text variable=\\"page-first\\"/></else></choose></group></else></choose></else-if><else-if type=\\"treaty\\"><group delimiter=\\" \\"><number variable=\\"volume\\"/><text variable=\\"container-title\\"/><choose><if variable=\\"page page-first\\" match=\\"any\\"><text variable=\\"page-first\\"/></if><else><group delimiter=\\" \\">\x3c!-- Replace with label variable=\\"number\\" if that becomes available --\x3e<text term=\\"issue\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"number\\"/></group></else></choose></group></else-if></choose></macro><macro name=\\"citation-locator\\"><group delimiter=\\" \\"><choose><if locator=\\"chapter\\"><label variable=\\"locator\\" text-case=\\"capitalize-first\\"/></if><else><label variable=\\"locator\\" form=\\"short\\"/></else></choose><text variable=\\"locator\\"/></group></macro><citation et-al-min=\\"3\\" et-al-use-first=\\"1\\" disambiguate-add-year-suffix=\\"true\\" disambiguate-add-names=\\"true\\" disambiguate-add-givenname=\\"true\\" collapse=\\"year\\" givenname-disambiguation-rule=\\"primary-name-with-initials\\"><sort><key macro=\\"author-bib\\" names-min=\\"3\\" names-use-first=\\"1\\"/><key macro=\\"date-sort-group\\"/><key macro=\\"date-sort-date\\" sort=\\"ascending\\"/><key variable=\\"status\\"/></sort><layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\"; \\"><group delimiter=\\", \\"><text macro=\\"author-intext\\"/><text macro=\\"date-intext\\"/><text macro=\\"citation-locator\\"/></group></layout></citation><bibliography hanging-indent=\\"true\\" et-al-min=\\"21\\" et-al-use-first=\\"19\\" et-al-use-last=\\"true\\" entry-spacing=\\"0\\" line-spacing=\\"2\\"><sort><key macro=\\"author-bib\\"/><key macro=\\"date-sort-group\\"/><key macro=\\"date-sort-date\\" sort=\\"ascending\\"/><key variable=\\"status\\"/><key macro=\\"title\\"/></sort><layout><choose><if type=\\"bill legal_case legislation treaty\\" match=\\"any\\">\x3c!-- Legal items have different orders and delimiters --\x3e<choose><if variable=\\"DOI URL\\" match=\\"any\\"><text macro=\\"legal-cites\\"/></if><else><text macro=\\"legal-cites\\" suffix=\\".\\"/></else></choose></if><else><group delimiter=\\" \\"><group delimiter=\\". \\" suffix=\\".\\"><text macro=\\"author-bib\\"/><text macro=\\"date-bib\\"/><text macro=\\"title-and-descriptions\\"/><text macro=\\"container\\"/><text macro=\\"event\\"/><text macro=\\"publisher\\"/></group><text macro=\\"access\\"/><text macro=\\"publication-history\\"/></group></else></choose></layout></bibliography>\\n</style>\\n","vancouver":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"sort-only\\" initialize-with-hyphen=\\"false\\" page-range-format=\\"minimal\\"><info><title>Vancouver</title><id>http://www.zotero.org/styles/vancouver</id><link href=\\"http://www.zotero.org/styles/vancouver\\" rel=\\"self\\"/><link href=\\"http://www.nlm.nih.gov/bsd/uniform_requirements.html\\" rel=\\"documentation\\"/><author><name>Michael Berkowitz</name><email>mberkowi@gmu.edu</email></author><contributor><name>Sean Takats</name><email>stakats@gmu.edu</email></contributor><contributor><name>Sebastian Karcher</name></contributor><category citation-format=\\"numeric\\"/><category field=\\"medicine\\"/><summary>Vancouver style as outlined by International Committee of Medical Journal Editors Uniform Requirements for Manuscripts Submitted to Biomedical Journals: Sample References</summary><updated>2022-04-14T13:48:43+00:00</updated><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang=\\"en\\"><date form=\\"text\\" delimiter=\\" \\"><date-part name=\\"year\\"/><date-part name=\\"month\\" form=\\"short\\" strip-periods=\\"true\\"/><date-part name=\\"day\\"/></date><terms><term name=\\"collection-editor\\" form=\\"long\\"><single>editor</single><multiple>editors</multiple></term><term name=\\"presented at\\">presented at</term><term name=\\"available at\\">available from</term><term name=\\"section\\" form=\\"short\\">sect.</term></terms></locale><locale xml:lang=\\"fr\\"><date form=\\"text\\" delimiter=\\" \\"><date-part name=\\"day\\"/><date-part name=\\"month\\" form=\\"short\\" strip-periods=\\"true\\"/><date-part name=\\"year\\"/></date></locale><macro name=\\"author\\"><names variable=\\"author\\"><name sort-separator=\\" \\" initialize-with=\\"\\" name-as-sort-order=\\"all\\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"long\\" prefix=\\", \\"/><substitute><names variable=\\"editor\\"/></substitute></names></macro><macro name=\\"editor\\"><names variable=\\"editor\\" suffix=\\".\\"><name sort-separator=\\" \\" initialize-with=\\"\\" name-as-sort-order=\\"all\\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"long\\" prefix=\\", \\"/></names></macro><macro name=\\"chapter-marker\\"><choose><if type=\\"chapter paper-conference entry-dictionary entry-encyclopedia\\" match=\\"any\\"><text term=\\"in\\" text-case=\\"capitalize-first\\"/></if></choose></macro><macro name=\\"publisher\\"><choose>\x3c!--discard publisher info for articles--\x3e<if type=\\"article-journal article-magazine article-newspaper\\" match=\\"none\\"><group delimiter=\\": \\" suffix=\\";\\"><choose><if type=\\"thesis\\"><text variable=\\"publisher-place\\" prefix=\\"[\\" suffix=\\"]\\"/></if><else-if type=\\"speech\\"/><else><text variable=\\"publisher-place\\"/></else></choose><text variable=\\"publisher\\"/></group></if></choose></macro><macro name=\\"access\\"><choose><if variable=\\"URL\\"><group delimiter=\\": \\"><text term=\\"available at\\" text-case=\\"capitalize-first\\"/><text variable=\\"URL\\"/></group></if></choose></macro><macro name=\\"accessed-date\\"><choose><if variable=\\"URL\\"><group prefix=\\"[\\" suffix=\\"]\\" delimiter=\\" \\"><text term=\\"cited\\" text-case=\\"lowercase\\"/><date variable=\\"accessed\\" form=\\"text\\"/></group></if></choose></macro><macro name=\\"container-title\\"><choose><if type=\\"article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia\\" match=\\"any\\"><group suffix=\\".\\" delimiter=\\" \\"><choose><if type=\\"article-journal review review-book\\" match=\\"any\\"><text variable=\\"container-title\\" form=\\"short\\" strip-periods=\\"true\\"/></if><else><text variable=\\"container-title\\" strip-periods=\\"true\\"/></else></choose><choose><if variable=\\"URL\\"><text term=\\"internet\\" prefix=\\"[\\" suffix=\\"]\\" text-case=\\"capitalize-first\\"/></if></choose></group><text macro=\\"edition\\" prefix=\\" \\"/></if>\x3c!--add event-name and event-place once they become available--\x3e<else-if type=\\"bill legislation\\" match=\\"any\\"><group delimiter=\\", \\"><group delimiter=\\". \\"><text variable=\\"container-title\\"/><group delimiter=\\" \\"><text term=\\"section\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"section\\"/></group></group><text variable=\\"number\\"/></group></else-if><else-if type=\\"speech\\"><group delimiter=\\": \\" suffix=\\";\\"><group delimiter=\\" \\"><text variable=\\"genre\\" text-case=\\"capitalize-first\\"/><text term=\\"presented at\\"/></group><text variable=\\"event\\"/></group></else-if><else><group delimiter=\\", \\" suffix=\\".\\"><choose><if variable=\\"collection-title\\" match=\\"none\\"><group delimiter=\\" \\"><label variable=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\"/><text variable=\\"volume\\"/></group></if></choose><text variable=\\"container-title\\"/></group></else></choose></macro><macro name=\\"title\\"><text variable=\\"title\\"/><choose><if type=\\"article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia\\" match=\\"none\\"><choose><if variable=\\"URL\\"><text term=\\"internet\\" prefix=\\" [\\" suffix=\\"]\\" text-case=\\"capitalize-first\\"/></if></choose><text macro=\\"edition\\" prefix=\\". \\"/></if></choose><choose><if type=\\"thesis\\"><text variable=\\"genre\\" prefix=\\" [\\" suffix=\\"]\\"/></if></choose></macro><macro name=\\"edition\\"><choose><if is-numeric=\\"edition\\"><group delimiter=\\" \\"><number variable=\\"edition\\" form=\\"ordinal\\"/><text term=\\"edition\\" form=\\"short\\"/></group></if><else><text variable=\\"edition\\" suffix=\\".\\"/></else></choose></macro><macro name=\\"date\\"><choose><if type=\\"article-journal article-magazine article-newspaper review review-book\\" match=\\"any\\"><group suffix=\\";\\" delimiter=\\" \\"><date variable=\\"issued\\" form=\\"text\\"/><text macro=\\"accessed-date\\"/></group></if><else-if type=\\"bill legislation\\" match=\\"any\\"><group delimiter=\\", \\"><date variable=\\"issued\\" delimiter=\\" \\"><date-part name=\\"month\\" form=\\"short\\" strip-periods=\\"true\\"/><date-part name=\\"day\\"/></date><date variable=\\"issued\\"><date-part name=\\"year\\"/></date></group></else-if><else-if type=\\"report\\"><date variable=\\"issued\\" delimiter=\\" \\"><date-part name=\\"year\\"/><date-part name=\\"month\\" form=\\"short\\" strip-periods=\\"true\\"/></date><text macro=\\"accessed-date\\" prefix=\\" \\"/></else-if><else-if type=\\"patent\\"><group suffix=\\".\\"><group delimiter=\\", \\"><text variable=\\"number\\"/><date variable=\\"issued\\"><date-part name=\\"year\\"/></date></group><text macro=\\"accessed-date\\" prefix=\\" \\"/></group></else-if><else-if type=\\"speech\\"><group delimiter=\\"; \\"><group delimiter=\\" \\"><date variable=\\"issued\\" delimiter=\\" \\"><date-part name=\\"year\\"/><date-part name=\\"month\\" form=\\"short\\" strip-periods=\\"true\\"/><date-part name=\\"day\\"/></date><text macro=\\"accessed-date\\"/></group><text variable=\\"event-place\\"/></group></else-if><else><group suffix=\\".\\"><date variable=\\"issued\\"><date-part name=\\"year\\"/></date><text macro=\\"accessed-date\\" prefix=\\" \\"/></group></else></choose></macro><macro name=\\"pages\\"><choose><if type=\\"article-journal article-magazine article-newspaper review review-book\\" match=\\"any\\"><text variable=\\"page\\" prefix=\\":\\"/></if><else-if type=\\"book\\" match=\\"any\\"><text variable=\\"number-of-pages\\" prefix=\\" \\"/><choose><if is-numeric=\\"number-of-pages\\"><label variable=\\"number-of-pages\\" form=\\"short\\" prefix=\\" \\" plural=\\"never\\"/></if></choose></else-if><else><group prefix=\\" \\" delimiter=\\" \\"><label variable=\\"page\\" form=\\"short\\" plural=\\"never\\"/><text variable=\\"page\\"/></group></else></choose></macro><macro name=\\"journal-location\\"><choose><if type=\\"article-journal article-magazine review review-book\\" match=\\"any\\"><text variable=\\"volume\\"/><text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/></if></choose></macro><macro name=\\"collection-details\\"><choose><if type=\\"article-journal article-magazine article-newspaper review review-book\\" match=\\"none\\"><choose><if variable=\\"collection-title\\"><group delimiter=\\" \\" prefix=\\"(\\" suffix=\\")\\"><names variable=\\"collection-editor\\" suffix=\\".\\"><name sort-separator=\\" \\" initialize-with=\\"\\" name-as-sort-order=\\"all\\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/><label form=\\"long\\" prefix=\\", \\"/></names><group delimiter=\\"; \\"><text variable=\\"collection-title\\"/><group delimiter=\\" \\"><label variable=\\"volume\\" form=\\"short\\"/><text variable=\\"volume\\"/></group></group></group></if></choose></if></choose></macro><macro name=\\"report-details\\"><choose><if type=\\"report\\"><text variable=\\"number\\" prefix=\\"Report No.: \\"/></if></choose></macro><citation collapse=\\"citation-number\\"><sort><key variable=\\"citation-number\\"/></sort><layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\",\\"><text variable=\\"citation-number\\"/></layout></citation><bibliography et-al-min=\\"7\\" et-al-use-first=\\"6\\" second-field-align=\\"flush\\"><layout><text variable=\\"citation-number\\" suffix=\\". \\"/><group delimiter=\\". \\" suffix=\\". \\"><text macro=\\"author\\"/><text macro=\\"title\\"/></group><group delimiter=\\" \\" suffix=\\". \\"><group delimiter=\\": \\"><text macro=\\"chapter-marker\\"/><group delimiter=\\" \\"><text macro=\\"editor\\"/><text macro=\\"container-title\\"/></group></group><text macro=\\"publisher\\"/><group><text macro=\\"date\\"/><text macro=\\"journal-location\\"/><text macro=\\"pages\\"/></group></group><text macro=\\"collection-details\\" suffix=\\". \\"/><text macro=\\"report-details\\" suffix=\\". \\"/><text macro=\\"access\\"/></layout></bibliography>\\n</style>\\n","harvard1":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"sort-only\\" default-locale=\\"en-GB\\"><info><title>Cite Them Right 11th edition - Harvard</title><id>http://www.zotero.org/styles/harvard-cite-them-right</id><link href=\\"http://www.zotero.org/styles/harvard-cite-them-right\\" rel=\\"self\\"/><link href=\\"http://www.zotero.org/styles/harvard-cite-them-right-10th-edition\\" rel=\\"template\\"/><link href=\\"http://www.citethemrightonline.com/\\" rel=\\"documentation\\"/><author><name>Patrick O\'Brien</name></author><category citation-format=\\"author-date\\"/><category field=\\"generic-base\\"/><summary>Harvard according to Cite Them Right, 11th edition.</summary><updated>2021-09-01T10:12:20+00:00</updated><rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang=\\"en-GB\\"><terms><term name=\\"editor\\" form=\\"short\\"><single>ed.</single><multiple>eds</multiple></term><term name=\\"editortranslator\\" form=\\"verb\\">edited and translated by</term><term name=\\"edition\\" form=\\"short\\">edn.</term></terms></locale><macro name=\\"editor\\"><choose><if type=\\"chapter paper-conference\\" match=\\"any\\"><names variable=\\"container-author\\" delimiter=\\", \\" suffix=\\", \\"><name and=\\"text\\" initialize-with=\\". \\" delimiter=\\", \\" sort-separator=\\", \\" name-as-sort-order=\\"all\\"/></names><choose><if variable=\\"container-author\\" match=\\"none\\"><names variable=\\"editor translator\\" delimiter=\\", \\"><name and=\\"text\\" initialize-with=\\".\\" name-as-sort-order=\\"all\\"/><label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\"/></names></if></choose></if></choose></macro><macro name=\\"secondary-contributors\\"><choose><if type=\\"chapter paper-conference\\" match=\\"none\\"><names variable=\\"editor translator\\" delimiter=\\". \\"><label form=\\"verb\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/><name and=\\"text\\" initialize-with=\\".\\"/></names></if><else-if variable=\\"container-author\\" match=\\"any\\"><names variable=\\"editor translator\\" delimiter=\\". \\"><label form=\\"verb\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/><name and=\\"text\\" initialize-with=\\". \\" delimiter=\\", \\"/></names></else-if></choose></macro><macro name=\\"author\\"><names variable=\\"author\\"><name and=\\"text\\" delimiter-precedes-last=\\"never\\" initialize-with=\\".\\" name-as-sort-order=\\"all\\"/><label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\"/><et-al font-style=\\"italic\\"/><substitute><names variable=\\"editor\\"/><names variable=\\"translator\\"/><choose><if type=\\"article-newspaper article-magazine\\" match=\\"any\\"><text variable=\\"container-title\\" text-case=\\"title\\" font-style=\\"italic\\"/></if><else><text macro=\\"title\\"/></else></choose></substitute></names></macro><macro name=\\"author-short\\"><names variable=\\"author\\"><name form=\\"short\\" and=\\"text\\" delimiter=\\", \\" delimiter-precedes-last=\\"never\\" initialize-with=\\". \\"/><et-al font-style=\\"italic\\"/><substitute><names variable=\\"editor\\"/><names variable=\\"translator\\"/><choose><if type=\\"article-newspaper article-magazine\\" match=\\"any\\"><text variable=\\"container-title\\" text-case=\\"title\\" font-style=\\"italic\\"/></if><else><text macro=\\"title\\"/></else></choose></substitute></names></macro><macro name=\\"access\\"><choose><if variable=\\"DOI\\"><text variable=\\"DOI\\" prefix=\\"doi:\\"/></if><else-if variable=\\"URL\\"><text term=\\"available at\\" suffix=\\": \\" text-case=\\"capitalize-first\\"/><text variable=\\"URL\\"/><group prefix=\\" (\\" delimiter=\\": \\" suffix=\\")\\"><text term=\\"accessed\\" text-case=\\"capitalize-first\\"/><date form=\\"text\\" variable=\\"accessed\\"><date-part name=\\"day\\"/><date-part name=\\"month\\"/><date-part name=\\"year\\"/></date></group></else-if></choose></macro><macro name=\\"number-volumes\\"><choose><if variable=\\"volume\\" match=\\"none\\"><group delimiter=\\" \\" prefix=\\"(\\" suffix=\\")\\"><text variable=\\"number-of-volumes\\"/><label variable=\\"volume\\" form=\\"short\\" strip-periods=\\"true\\"/></group></if></choose></macro><macro name=\\"title\\"><choose><if type=\\"bill book legal_case legislation motion_picture report song thesis webpage graphic\\" match=\\"any\\"><group delimiter=\\". \\"><group delimiter=\\" \\"><group delimiter=\\" \\"><text variable=\\"title\\" font-style=\\"italic\\"/><text variable=\\"medium\\" prefix=\\"[\\" suffix=\\"]\\"/></group><text macro=\\"number-volumes\\"/></group><text macro=\\"edition\\"/></group></if><else><text variable=\\"title\\" form=\\"long\\" quotes=\\"true\\"/></else></choose></macro><macro name=\\"publisher\\"><choose><if type=\\"thesis\\"><group delimiter=\\". \\"><text variable=\\"genre\\"/><text variable=\\"publisher\\"/></group></if><else-if type=\\"report\\"><group delimiter=\\". \\"><group delimiter=\\" \\"><text variable=\\"genre\\"/><text variable=\\"number\\"/></group><group delimiter=\\": \\"><text variable=\\"publisher-place\\"/><text variable=\\"publisher\\"/></group></group></else-if><else-if type=\\"article-journal article-newspaper article-magazine\\" match=\\"none\\"><group delimiter=\\" \\"><group delimiter=\\", \\"><choose><if type=\\"speech\\" variable=\\"event\\" match=\\"any\\"><text variable=\\"event\\" font-style=\\"italic\\"/></if></choose><group delimiter=\\": \\"><text variable=\\"publisher-place\\"/><text variable=\\"publisher\\"/></group></group><group prefix=\\"(\\" suffix=\\")\\" delimiter=\\", \\"><text variable=\\"collection-title\\"/><text variable=\\"collection-number\\"/></group></group></else-if></choose></macro><macro name=\\"year-date\\"><choose><if variable=\\"issued\\"><date variable=\\"issued\\"><date-part name=\\"year\\"/></date><text variable=\\"year-suffix\\"/></if><else><text term=\\"no date\\"/><text variable=\\"year-suffix\\" prefix=\\" \\"/></else></choose></macro><macro name=\\"locator\\"><choose><if type=\\"article-journal\\"><text variable=\\"volume\\"/><text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/></if></choose></macro><macro name=\\"published-date\\"><choose><if type=\\"article-newspaper article-magazine post-weblog speech\\" match=\\"any\\"><date variable=\\"issued\\"><date-part name=\\"day\\" suffix=\\" \\"/><date-part name=\\"month\\" form=\\"long\\"/></date></if></choose></macro><macro name=\\"pages\\"><choose><if type=\\"chapter paper-conference article-journal article article-magazine article-newspaper book review review-book report\\" match=\\"any\\"><group delimiter=\\" \\"><label variable=\\"page\\" form=\\"short\\"/><text variable=\\"page\\"/></group></if></choose></macro><macro name=\\"container-title\\"><choose><if variable=\\"container-title\\"><group delimiter=\\". \\"><group delimiter=\\" \\"><text variable=\\"container-title\\" font-style=\\"italic\\"/><choose><if type=\\"article article-journal\\" match=\\"any\\"><choose><if match=\\"none\\" variable=\\"page volume\\"><text value=\\"Preprint\\" prefix=\\"[\\" suffix=\\"]\\"/></if></choose></if></choose></group><text macro=\\"edition\\"/></group></if></choose></macro><macro name=\\"edition\\"><choose><if is-numeric=\\"edition\\"><group delimiter=\\" \\"><number variable=\\"edition\\" form=\\"ordinal\\"/><text term=\\"edition\\" form=\\"short\\" strip-periods=\\"true\\"/></group></if><else><text variable=\\"edition\\"/></else></choose></macro><macro name=\\"container-prefix\\"><choose><if type=\\"chapter paper-conference\\" match=\\"any\\"><text term=\\"in\\"/></if></choose></macro><citation et-al-min=\\"4\\" et-al-use-first=\\"1\\" disambiguate-add-year-suffix=\\"true\\" disambiguate-add-names=\\"true\\" disambiguate-add-givenname=\\"true\\" collapse=\\"year\\"><sort><key macro=\\"year-date\\"/></sort><layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\"; \\"><group delimiter=\\", \\"><group delimiter=\\", \\"><text macro=\\"author-short\\"/><text macro=\\"year-date\\"/></group><group><label variable=\\"locator\\" form=\\"short\\" suffix=\\" \\"/><text variable=\\"locator\\"/></group></group></layout></citation><bibliography and=\\"text\\" et-al-min=\\"4\\" et-al-use-first=\\"1\\"><sort><key macro=\\"author\\"/><key macro=\\"year-date\\"/><key variable=\\"title\\"/></sort><layout suffix=\\".\\"><group delimiter=\\". \\"><group delimiter=\\" \\"><text macro=\\"author\\"/><text macro=\\"year-date\\" prefix=\\"(\\" suffix=\\")\\"/><group delimiter=\\", \\"><text macro=\\"title\\"/><group delimiter=\\" \\"><text macro=\\"container-prefix\\"/><text macro=\\"editor\\"/><text macro=\\"container-title\\"/></group></group></group><text macro=\\"secondary-contributors\\"/><text macro=\\"publisher\\"/></group><group delimiter=\\", \\" prefix=\\", \\"><text macro=\\"locator\\"/><text macro=\\"published-date\\"/><text macro=\\"pages\\"/></group><text macro=\\"access\\" prefix=\\". \\"/></layout></bibliography>\\n</style>\\n"}')),fb=Symbol.for("proxied"),gb=function(e){const t=function(t,r){if(t.sys.wrapBibliographyEntry){const[e,i]=t.sys.wrapBibliographyEntry(this.system_id);r=[e,r,i].join("")}return e.call(this,t,r)};return t[fb]=!0,t};for(const e in ql().Output.Formats){const t=ql().Output.Formats[e]["@bibliography/entry"];t&&!t[fb]&&(ql().Output.Formats[e]["@bibliography/entry"]=gb(t))}function vb(e){if(pb.has(e))return pb.get(e);const t=e.replace("-","_");return pb.has(t)?pb.get(t):{}}const bb={};var yb=function(e,t,r,i){if(!ql().Output.Formats[i]||!ql().Output.Formats[i]["@bibliography/entry"])throw new TypeError(`Cannot find format '${i}'`);const n=e.reduce((e,t)=>(e[t.id]=t,e),{}),o=hb.get(hb.has(t)?t:"apa"),s=function(e,t,r,i,n){const o=`${e}|${t}`;let s;return bb[o]instanceof ql().Engine?(s=bb[o],s.sys.retrieveItem=i,s.sys.wrapBibliographyEntry=void 0,s.updateItems([])):s=bb[o]=new(ql().Engine)({retrieveLocale:n,retrieveItem:i},r,t,!0),s}(t,r=pb.has(r)?r:void 0,o,function(e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];throw new Error(`Cannot find entry with id '${e}'`)},vb);return s.setOutputFormat(i),s.opt.development_extensions.wrap_url_and_doi=!1,s};const _b=(e,t)=>"function"==typeof t?t(e):t||"";function xb(e){return"object"==typeof e?e:{id:e}}function wb(e){return e.citationItems?e:{citationItems:[].concat(e).map(xb),properties:{noteIndex:0}}}function Cb(e){return e?e.map(wb):[]}Nf("@csl",{output:{bibliography:function(e,t={}){const{template:r="apa",lang:i,format:n="text",nosort:o=!1}=t,s=t.entry?[].concat(t.entry):e.map(({id:e})=>e);e=Eh(e);const a=yb(e,r,i,n),l=a.updateItems(s,o);if(t.append||t.prepend){const r=e.reduce((e,t)=>(e[t.id]=t,e),{});a.sys.wrapBibliographyEntry=function(e){const i=r[e];return[_b(i,t.prepend),_b(i,t.append)]}}t.hyperlinks&&(a.opt.development_extensions.wrap_url_and_doi=!0);const c=a.makeBibliography(),[{bibstart:u,bibend:d},m]=c,p=m.map((e,t)=>((e,t,r)=>e.replace(/^\s*<[a-z]+/i,`$& data-csl-entry-id="${r}"`))(e,0,l[t]));return t.asEntryArray?p.map((e,t)=>[l[t],e]):u+p.join("")+d},citation:function(e,t={}){const{template:r="apa",lang:i,format:n="text"}=t,o=e.map(({id:e})=>e),s=t.entry?t.entry:o;e=Eh(e);const a=yb(e,r,i,n),l=Cb(t.citationsPre),c=wb(s),u=Cb(t.citationsPost);return a.rebuildProcessorState([...l,c,...u],n,[])[l.length][2]}},config:{engine:yb,locales:pb,templates:hb}});var kb=r(64583).Promise;const Tb=Km({id:gm().optional(),type:gm(),title:gm().optional(),author:Wm(Km({family:gm().optional(),given:gm().optional()})).optional(),issued:(Eb=jm,new Eb({type:"any"})).optional(),DOI:gm().optional(),ISBN:gm().optional()}).passthrough();var Eb;class Sb{static toCSLJSON(e,t){if("csljson"===t){const t=JSON.parse(e);return(Array.isArray(t)?t:[t]).map(e=>Tb.parse(e))}return new hf(e,{forceType:t}).get({type:"json",style:"csl"}).map(e=>Tb.parse(e))}static importAndMerge(e,t){return r=this,i=void 0,o=function*(){const r=this.toCSLJSON(e,t),i=yield Bl.loadLibrary(),n=new Map(i.map(e=>[Sb.stableKey(e),e]));for(const e of r)n.set(Sb.stableKey(e),e);yield Bl.saveLibrary(Array.from(n.values()))},new((n=void 0)||(n=kb))(function(e,t){function s(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,a)}l((o=o.apply(r,i||[])).next())});var r,i,n,o}static stableKey(e){var t,r,i,n,o,s,a,l;if(e.DOI)return`doi:${e.DOI.toLowerCase()}`;if(e.ISBN)return`isbn:${e.ISBN.replace(/-/g,"")}`;const c=null!==(n=null===(i=null===(r=null===(t=e.issued)||void 0===t?void 0:t["date-parts"])||void 0===r?void 0:r[0])||void 0===i?void 0:i[0])&&void 0!==n?n:"",u=(null!==(o=e.title)&&void 0!==o?o:"").trim().toLowerCase().replace(/\s+/g," ");return`local:${(null!==(l=null===(a=null===(s=e.author)||void 0===s?void 0:s[0])||void 0===a?void 0:a.family)&&void 0!==l?l:"").toLowerCase()}|${c}|${u}`}}var Ib=r(64583).Promise,Ab=function(e,t,r,i){return new(r||(r=Ib))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};class Ob{constructor(){this.processor=null,this.items={},this.localeXml=""}init(e){return Ab(this,void 0,void 0,function*(){this.localeXml=e.localeXml;const t={retrieveLocale:e=>this.localeXml,retrieveItem:e=>this.items[e],getAbbreviation:()=>null,state:{}};this.processor=new(ql().Engine)(t,e.styleXml)})}ensureItems(e){return Ab(this,void 0,void 0,function*(){const t=yield Bl.loadLibrary(),r=new Map;for(const e of t){const t=Sb.stableKey(e);r.has(t)||r.set(t,e)}for(const t of e){const e=r.get(t);this.items[t]=e?Object.assign(Object.assign({},e),{id:t}):{id:t,title:"[?]"}}})}formatInText(e,t){return Ab(this,void 0,void 0,function*(){if(!this.processor)throw new Error("Engine not initialized");yield this.ensureItems(e);const r=e.map(e=>{const r={id:e};return t.options&&(t.options.locator&&(r.locator=t.options.locator),t.options.prefix&&(r.prefix=t.options.prefix),t.options.suffix&&(r.suffix=t.options.suffix),t.options.suppressAuthor&&(r["suppress-author"]=!0),t.options.suppressYear&&(r["suppress-year"]=!0)),r});try{this.processor.updateItems(e);const t=this.processor.makeCitationCluster(r);if("string"==typeof t)return t;if(Array.isArray(t)){if("string"==typeof t[1])return t[1];if(Array.isArray(t[1]))return t[1].join("")}}catch(e){console.error("formatInText failed, fallback to keys",e)}return`(${e.join("; ")})`})}formatBibliography(e,t){return Ab(this,void 0,void 0,function*(){if(!this.processor)throw new Error("Engine not initialized");yield this.ensureItems(e);try{this.processor.updateItems(e);const t=this.processor.makeBibliography();if(Array.isArray(t)&&Array.isArray(t[1]))return t[1].join("")}catch(e){console.error("formatBibliography failed, fallback to plain list",e)}return e.map(e=>`- ${e}`).join("\n")})}}var Nb=r(64583).Promise;const Rb=new class{constructor(){this._engine=null,this._initing=null}get engine(){if(!this._engine)throw new Error("Engine not initialized yet");return this._engine}initOnce(e){if(this._initing)return this._initing;this._engine=new Ob;const t=e?fetch(e).then(e=>e.text()):Nb.resolve('<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never" page-range-format="expanded">\n  <info>\n    <title>JIS-like Citation Style</title>\n    <id>http://www.zotero.org/styles/jis-like</id>\n    <link href="http://www.zotero.org/styles/jis-like" rel="self"/>\n    <author>\n      <name>Generated for ms-office-citation-jp</name>\n    </author>\n    <category citation-format="author-date"/>\n    <category field="generic-base"/>\n    <updated>2023-01-01T00:00:00+00:00</updated>\n    <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights>\n  </info>\n  <locale xml:lang="ja">\n    <terms>\n      <term name="et-al">他</term>\n      <term name="and">および</term>\n    </terms>\n  </locale>\n  <citation et-al-min="3" et-al-use-first="1" disambiguate-add-year-suffix="true">\n    <layout prefix="(" suffix=")" delimiter="; ">\n      <group delimiter=", ">\n        <names variable="author">\n          <name form="short" delimiter=", "/>\n        </names>\n        <date variable="issued">\n          <date-part name="year"/>\n        </date>\n      </group>\n    </layout>\n  </citation>\n  <bibliography hanging-indent="true" et-al-min="8" et-al-use-first="6">\n    <sort>\n      <key macro="author"/>\n      <key variable="issued"/>\n    </sort>\n    <layout>\n      <group delimiter=". " suffix=".">\n        <text macro="author"/>\n        <text macro="title"/>\n        <text macro="container"/>\n        <text macro="publisher"/>\n        <date variable="issued">\n          <date-part name="year"/>\n        </date>\n      </group>\n    </layout>\n  </bibliography>\n  <macro name="author">\n    <names variable="author">\n      <name name-as-sort-order="all" sort-separator=" " initialize-with="." delimiter=", " delimiter-precedes-last="always"/>\n      <label form="short" prefix=" (" suffix=")"/>\n      <substitute>\n        <names variable="editor"/>\n        <text variable="title"/>\n      </substitute>\n    </names>\n  </macro>\n  <macro name="title">\n    <text variable="title"/>\n  </macro>\n  <macro name="container">\n    <text variable="container-title" font-style="italic"/>\n  </macro>\n  <macro name="publisher">\n    <text variable="publisher"/>\n  </macro>\n</style>\n');return this._initing=t.then(e=>this._engine.init({styleXml:e,localeXml:'<?xml version="1.0" encoding="utf-8"?>\n<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="ja-JP">\n  <info>\n    <translator>\n      <name>Shoji Takahashi</name>\n    </translator>\n    <translator>\n      <name>cmplstofB</name>\n    </translator>\n    <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights>\n    <updated>2024-03-12T14:01:18+00:00</updated>\n    \x3c!--\n      日本語化にあたって参考にした文献\n      * SIST 02:2007「参照文献の書き方」\n      * JIS X 0807:1999「電子文献の引用法」\n    --\x3e\n  </info>\n  <style-options punctuation-in-quote="false"/>\n  <date form="text">\n    <date-part name="year" suffix="年"/>\n    <date-part name="month" form="numeric" suffix="月"/>\n    <date-part name="day" suffix="日"/>\n  </date>\n  <date form="numeric">\n    <date-part name="year" suffix="年"/>\n    <date-part name="month" form="numeric" suffix="月"/>\n    <date-part name="day" suffix="日"/>\n  </date>\n  <terms>\n    <term name="advance-online-publication">advance online publication</term>\n    <term name="album">album</term>\n    <term name="audio-recording">audio recording</term>\n    <term name="film">film</term>\n    <term name="henceforth">henceforth</term>\n    <term name="loc-cit">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e\n    <term name="no-place">no place</term>\n    <term name="no-place" form="short">n.p.</term>\n    <term name="no-publisher">no publisher</term> \x3c!-- sine nomine --\x3e\n    <term name="no-publisher" form="short">n.p.</term>\n    <term name="on">on</term>\n    <term name="op-cit">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e\n    <term name="original-work-published">original work published</term>\n    <term name="personal-communication">個人的なやり取り</term>\n    <term name="podcast">podcast</term>\n    <term name="podcast-episode">podcast episode</term>\n    <term name="preprint">preprint</term>\n    <term name="radio-broadcast">radio broadcast</term>\n    <term name="radio-series">radio series</term>\n    <term name="radio-series-episode">radio series episode</term>\n    <term name="special-issue">special issue</term>\n    <term name="special-section">special section</term>\n    <term name="television-broadcast">television broadcast</term>\n    <term name="television-series">television series</term>\n    <term name="television-series-episode">television series episode</term>\n    <term name="video">video</term>\n    <term name="working-paper">working paper</term>\n    <term name="accessed">参照</term>\n    <term name="and">と</term>\n    <term name="and others">ほか</term>\n    <term name="anonymous">匿名</term>\n    <term name="anonymous" form="short">匿名</term>\n    <term name="at">にて</term>\n    <term name="available at">入手先</term>\n    <term name="by">による</term>\n    <term name="circa">およそ</term>\n    <term name="circa" form="short">およそ</term>\n    <term name="cited">引用</term>\n    <term name="first-reference-note-number">\n      <single>reference</single>\n      <multiple>references</multiple>\n    </term>\n    <term name="number">\n      <single>number</single>\n      <multiple>numbers</multiple>\n    </term>\n    <term name="edition">\n      <single>版</single>\n      <multiple>版</multiple>\n    </term>\n    <term name="first-reference-note-number" form="short">\n      <single>ref.</single>\n      <multiple>refs.</multiple>\n    </term>\n    <term name="number" form="short">\n      <single>no.</single>\n      <multiple>nos.</multiple>\n    </term>\n    <term name="edition" form="short">版</term>\n    <term name="et-al">ほか</term>\n    <term name="forthcoming">近刊</term>\n    <term name="from">から</term>\n    <term name="ibid">前掲</term>\n    <term name="in"></term>\n    <term name="in press">近刊</term>\n    <term name="internet">インターネット</term>\n    <term name="letter">手紙</term>\n    <term name="no date">日付なし</term>\n    <term name="no date" form="short">日付なし</term>\n    <term name="online">online</term>\n    <term name="presented at">presented at the</term>\n    <term name="reference">\n      <single>参照</single>\n      <multiple>参照</multiple>\n    </term>\n    <term name="reference" form="short">\n      <single>参照</single>\n      <multiple>参照</multiple>\n    </term>\n    <term name="review-of">review of</term>\n    <term name="review-of" form="short">rev. of</term>\n    <term name="retrieved">読み込み</term>\n    <term name="scale">位</term>\n    <term name="version">版</term>\n\n    \x3c!-- LONG ITEM TYPE FORMS --\x3e\n    <term name="article">preprint</term>\n    <term name="article-journal">journal article</term>\n    <term name="article-magazine">magazine article</term>\n    <term name="article-newspaper">newspaper article</term>\n    <term name="bill">bill</term>\n    \x3c!-- book is in the list of locator terms --\x3e\n    <term name="broadcast">broadcast</term>\n    \x3c!-- chapter is in the list of locator terms --\x3e\n    <term name="classic">classic</term>\n    <term name="collection">collection</term>\n    <term name="dataset">dataset</term>\n    <term name="document">document</term>\n    <term name="entry">entry</term>\n    <term name="entry-dictionary">dictionary entry</term>\n    <term name="entry-encyclopedia">encyclopedia entry</term>\n    <term name="event">event</term>\n    \x3c!-- figure is in the list of locator terms --\x3e\n    <term name="graphic">graphic</term>\n    <term name="hearing">hearing</term>\n    <term name="interview">面接</term>\n    <term name="legal_case">legal case</term>\n    <term name="legislation">legislation</term>\n    <term name="manuscript">manuscript</term>\n    <term name="map">map</term>\n    <term name="motion_picture">video recording</term>\n    <term name="musical_score">musical score</term>\n    <term name="pamphlet">pamphlet</term>\n    <term name="paper-conference">conference paper</term>\n    <term name="patent">patent</term>\n    <term name="performance">performance</term>\n    <term name="periodical">periodical</term>\n    <term name="personal_communication">個人的なやり取り</term>\n    <term name="post">post</term>\n    <term name="post-weblog">blog post</term>\n    <term name="regulation">regulation</term>\n    <term name="report">report</term>\n    <term name="review">review</term>\n    <term name="review-book">book review</term>\n    <term name="software">software</term>\n    <term name="song">audio recording</term>\n    <term name="speech">presentation</term>\n    <term name="standard">standard</term>\n    <term name="thesis">thesis</term>\n    <term name="treaty">treaty</term>\n    <term name="webpage">webpage</term>\n\n    \x3c!-- SHORT ITEM TYPE FORMS --\x3e\n    <term name="article-journal" form="short">journal art.</term>\n    <term name="article-magazine" form="short">mag. art.</term>\n    <term name="article-newspaper" form="short">newspaper art.</term>\n    \x3c!-- book is in the list of locator terms --\x3e\n    \x3c!-- chapter is in the list of locator terms --\x3e\n    <term name="document" form="short">doc.</term>\n    \x3c!-- figure is in the list of locator terms --\x3e\n    <term name="graphic" form="short">graph.</term>\n    <term name="interview" form="short">面接</term>\n    <term name="manuscript" form="short">MS</term>\n    <term name="motion_picture" form="short">video rec.</term>\n    <term name="report" form="short">rep.</term>\n    <term name="review" form="short">rev.</term>\n    <term name="review-book" form="short">bk. rev.</term>\n    <term name="song" form="short">audio rec.</term>\n\n    \x3c!-- VERB ITEM TYPE FORMS --\x3e\n    \x3c!-- Only where applicable --\x3e\n    <term name="hearing" form="verb">testimony of</term>\n    <term name="review" form="verb">review of</term>\n    <term name="review-book" form="verb">review of the book</term>\n\n    \x3c!-- HISTORICAL ERA TERMS --\x3e\n    <term name="ad">紀元前</term>\n    <term name="bc">紀元後</term>\n    <term name="bce">BCE</term>\n    <term name="ce">CE</term>\n\n    \x3c!-- PUNCTUATION --\x3e\n    <term name="open-quote">「</term>\n    <term name="close-quote">」</term>\n    <term name="open-inner-quote">『</term>\n    <term name="close-inner-quote">』</term>\n    <term name="page-range-delimiter">–</term>\n    <term name="colon">:</term>\n    <term name="comma">,</term>\n    <term name="semicolon">;</term>\n\n    \x3c!-- ORDINALS --\x3e\n    <term name="ordinal">番目</term>\n    <term name="ordinal-01">番目</term>\n    <term name="ordinal-02">番目</term>\n    <term name="ordinal-03">番目</term>\n    <term name="ordinal-11">番目</term>\n    <term name="ordinal-12">番目</term>\n    <term name="ordinal-13">番目</term>\n\n    \x3c!-- LONG ORDINALS --\x3e\n    <term name="long-ordinal-01">1番目</term>\n    <term name="long-ordinal-02">2番目</term>\n    <term name="long-ordinal-03">3番目</term>\n    <term name="long-ordinal-04">4番目</term>\n    <term name="long-ordinal-05">5番目</term>\n    <term name="long-ordinal-06">6番目</term>\n    <term name="long-ordinal-07">7番目</term>\n    <term name="long-ordinal-08">8番目</term>\n    <term name="long-ordinal-09">9番目</term>\n    <term name="long-ordinal-10">10番目</term>\n\n    \x3c!-- LONG LOCATOR FORMS --\x3e\n    <term name="act">\t\t\t \n      <single>act</single>\n      <multiple>acts</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="appendix">\t\t\t \n      <single>appendix</single>\n      <multiple>appendices</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="article-locator">\t\t\t \n      <single>article</single>\n      <multiple>articles</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="canon">\t\t\t \n      <single>canon</single>\n      <multiple>canons</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="elocation">\t\t\t \n      <single>location</single>\n      <multiple>locations</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="equation">\t\t\t \n      <single>equation</single>\n      <multiple>equations</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="rule">\t\t\t \n      <single>rule</single>\n      <multiple>rules</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="scene">\t\t\t \n      <single>scene</single>\n      <multiple>scenes</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="table">\t\t\t \n      <single>table</single>\n      <multiple>tables</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="timestamp"> \x3c!-- generally blank --\x3e\n      <single></single>\n      <multiple></multiple>\t\t\t\t\t\t \n    </term>\n    <term name="title-locator">\t\t\t \n      <single>title</single>\n      <multiple>titles</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="book">\n      <single>書籍</single>\n      <multiple>書籍</multiple>\n    </term>\n    <term name="chapter">\n      <single>章</single>\n      <multiple>章</multiple>\n    </term>\n    <term name="column">\n      <single>欄</single>\n      <multiple>欄</multiple>\n    </term>\n    <term name="figure">\n      <single>図</single>\n      <multiple>図</multiple>\n    </term>\n    <term name="folio">\n      <single>面</single>\n      <multiple>面</multiple>\n    </term>\n    <term name="issue">\n      <single>号</single>\n      <multiple>号</multiple>\n    </term>\n    <term name="line">\n      <single>行</single>\n      <multiple>行</multiple>\n    </term>\n    <term name="note">\n      <single>註</single>\n      <multiple>註</multiple>\n    </term>\n    <term name="opus">\n      <single>作品</single>\n      <multiple>作品</multiple>\n    </term>\n    <term name="page">\n      <single>ページ</single>\n      <multiple>ページ</multiple>\n    </term>\n    <term name="number-of-volumes">\n      <single>volume</single>\n      <multiple>volumes</multiple>\n    </term>\n    <term name="page-first">\n      <single>page</single>\n      <multiple>pages</multiple>\n    </term>\n    <term name="printing">\n      <single>printing</single>\n      <multiple>printings</multiple>\n    </term>\n\n    <term name="chapter-number" form="short">\n      <single>chap.</single>\n      <multiple>chaps.</multiple>\n    </term>\n    <term name="citation-number" form="short">\n      <single>cit.</single>\n      <multiple>cits.</multiple>\n    </term>\n    <term name="collection-number" form="short">no.</term>\n    <term name="number-of-pages">\n      <single>ページ</single>\n      <multiple>ページ</multiple>\n    </term>\n    <term name="paragraph">\n      <single>段落</single>\n      <multiple>段落</multiple>\n    </term>\n    <term name="part">\n      <single>部</single>\n      <multiple>部</multiple>\n    </term>\n    <term name="section">\n      <single>節</single>\n      <multiple>節</multiple>\n    </term>\n    <term name="supplement">\n      <single>supplement</single>\n      <multiple>supplements</multiple>\n    </term>\n    <term name="sub-verbo">\n      \x3c!--\n        『辞書』における「単語」\n                ^^^^^^^^\n      --\x3e\n      <single>における</single>\n      <multiple>における</multiple>\n    </term>\n    <term name="verse">\n      <single>詩歌</single>\n      <multiple>詩歌</multiple>\n    </term>\n    <term name="volume">\n      <single>巻</single>\n      <multiple>巻</multiple>\n    </term>\n\n    \x3c!-- SHORT LOCATOR FORMS --\x3e\n    <term name="appendix" form="short">\t\t\t \n      <single>app.</single>\n      <multiple>apps.</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="article-locator" form="short">\t\t\t \n      <single>art.</single>\n      <multiple>arts.</multiple>\n    </term>\n    <term name="elocation" form="short">\t\t\t \n      <single>loc.</single>\n      <multiple>locs.</multiple>\n    </term>\n    <term name="equation" form="short">\t\t\t \n      <single>eq.</single>\n      <multiple>eqs.</multiple>\n    </term>\n    <term name="rule" form="short">\t\t\t \n      <single>r.</single>\n      <multiple>rr.</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="scene" form="short">\t\t\t \n      <single>sc.</single>\n      <multiple>scs.</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="table" form="short">\t\t\t \n      <single>tbl.</single>\n      <multiple>tbls.</multiple>\t\t\t\t\t\t \n    </term>\n    <term name="timestamp" form="short"> \x3c!-- generally blank --\x3e\n      <single></single>\n      <multiple></multiple>\t\t\t\t\t\t \n    </term>\n    <term name="title-locator" form="short">\t\t\t \n      <single>tit.</single>\n      <multiple>tits.</multiple>\n    </term>\n    <term name="book" form="short">bk.</term>\n    <term name="chapter" form="short">chap.</term>\n    <term name="column" form="short">col.</term>\n    <term name="figure" form="short">fig.</term>\n    <term name="folio" form="short">f.</term>\n    <term name="issue" form="short">no.</term>\n    <term name="line" form="short">l.</term>\n    <term name="note" form="short">n.</term>\n    <term name="opus" form="short">op.</term>\n    <term name="page" form="short">\n      <single>p.</single>\n      <multiple>pp.</multiple>\n    </term>\n    <term name="number-of-volumes" form="short">\n      <single>vol.</single>\n      <multiple>vols.</multiple>\n    </term>\n    <term name="page-first" form="short">\n      <single>p.</single>\n      <multiple>pp.</multiple>\n    </term>\n    <term name="printing" form="short">\n      <single>print.</single>\n      <multiple>prints.</multiple>\n    </term>\n    \n\n    <term name="number-of-pages" form="short">\n      <single>p.</single>\n      <multiple>pp.</multiple>\n    </term>\n    <term name="paragraph" form="short">para.</term>\n    <term name="part" form="short">pt.</term>\n    <term name="section" form="short">sec.</term>\n    <term name="supplement" form="short">\n      <single>supp.</single>\n      <multiple>supps.</multiple>\n    </term>\n    <term name="sub-verbo" form="short">\n      <single>s.v.</single>\n      <multiple>s.vv.</multiple>\n    </term>\n    <term name="verse" form="short">\n      <single>v.</single>\n      <multiple>vv.</multiple>\n    </term>\n    <term name="volume" form="short">\n      <single>vol.</single>\n      <multiple>vols.</multiple>\n    </term>\n\n    \x3c!-- SYMBOL LOCATOR FORMS --\x3e\n    <term name="paragraph" form="symbol">\n      <single>¶</single>\n      <multiple>¶¶</multiple>\n    </term>\n    <term name="chapter-number">\n      <single>chapter</single>\n      <multiple>chapters</multiple>\n    </term>\n    <term name="citation-number">\n      <single>citation</single>\n      <multiple>citations</multiple>\n    </term>\n    <term name="collection-number">\n      <single>号</single>\n      <multiple>号</multiple>\n    </term>\n    <term name="section" form="symbol">\n      <single>§</single>\n      <multiple>§§</multiple>\n    </term>\n\n    \x3c!-- LONG ROLE FORMS --\x3e\n    <term name="collection-editor">\n      <single>ed.</single>\n      <multiple>eds.</multiple>\n    </term>\n    <term name="chair">\n      <single>chair</single>\n      <multiple>chairs</multiple>\n    </term>\n    <term name="compiler">\n      <single>compiler</single>\n      <multiple>compilers</multiple>\n    </term>\n    <term name="contributor">\n      <single>contributor</single>\n      <multiple>contributors</multiple>\n    </term>\n    <term name="curator">\n      <single>curator</single>\n      <multiple>curators</multiple>\n    </term>\n    <term name="executive-producer">\n      <single>executive producer</single>\n      <multiple>executive producers</multiple>\n    </term>\n    <term name="guest">\n      <single>guest</single>\n      <multiple>guests</multiple>\n    </term>\n    <term name="host">\n      <single>host</single>\n      <multiple>hosts</multiple>\n    </term>\n    <term name="narrator">\n      <single>narrator</single>\n      <multiple>narrators</multiple>\n    </term>\n    <term name="organizer">\n      <single>organizer</single>\n      <multiple>organizers</multiple>\n    </term>\n    <term name="performer">\n      <single>performer</single>\n      <multiple>performers</multiple>\n    </term>\n    <term name="producer">\n      <single>producer</single>\n      <multiple>producers</multiple>\n    </term>\n    <term name="script-writer">\n      <single>writer</single>\n      <multiple>writers</multiple>\n    </term>\n    <term name="series-creator">\n      <single>series creator</single>\n      <multiple>series creators</multiple>\n    </term>\n    <term name="director">\n      <single>指導者</single>\n      <multiple>指導者</multiple>\n    </term>\n    <term name="editor">\n      <single>編集者</single>\n      <multiple>編集者</multiple>\n    </term>\n    <term name="editorial-director">\n      <single>編集者</single>\n      <multiple>編集者</multiple>\n    </term>\n    <term name="illustrator">\n      <single>図解者</single>\n      <multiple>図解者</multiple>\n    </term>\n    <term name="translator">\n      <single>翻訳者</single>\n      <multiple>翻訳者</multiple>\n    </term>\n    <term name="editortranslator">\n      <single>編集・翻訳者</single>\n      <multiple>編集・翻訳者</multiple>\n    </term>\n\n    \x3c!-- SHORT ROLE FORMS --\x3e\n    <term name="compiler" form="short">\n      <single>comp.</single>\n      <multiple>comps.</multiple>\n    </term>\n    <term name="contributor" form="short">\n      <single>contrib.</single>\n      <multiple>contribs.</multiple>\n    </term>\n    <term name="curator" form="short">\n      <single>cur.</single>\n      <multiple>curs.</multiple>\n    </term>\n    <term name="executive-producer" form="short">\n      <single>exec. prod.</single>\n      <multiple>exec. prods.</multiple>\n    </term>\n    <term name="narrator" form="short">\n      <single>narr.</single>\n      <multiple>narrs.</multiple>\n    </term>\n    <term name="organizer" form="short">\n      <single>org.</single>\n      <multiple>orgs.</multiple>\n    </term>\n    <term name="performer" form="short">\n      <single>perf.</single>\n      <multiple>perfs.</multiple>\n    </term>\n    <term name="producer" form="short">\n      <single>prod.</single>\n      <multiple>prods.</multiple>\n    </term>\n    <term name="script-writer" form="short">\n      <single>writ.</single>\n      <multiple>writs.</multiple>\n    </term>\n    <term name="series-creator" form="short">\n      <single>cre.</single>\n      <multiple>cres.</multiple>\n    </term>\n    <term name="director" form="short">\n      <single>指導</single>\n      <multiple>指導</multiple>\n    </term>\n    <term name="editor" form="short">\n      <single>編</single>\n      <multiple>編</multiple>\n    </term>\n    <term name="editorial-director" form="short">\n      <single>編</single>\n      <multiple>編</multiple>\n    </term>\n    <term name="illustrator" form="short">\n      <single>図</single>\n      <multiple>図</multiple>\n    </term>\n    <term name="translator" form="short">\n      <single>訳</single>\n      <multiple>訳</multiple>\n    </term>\n    <term name="editortranslator" form="short">\n      <single>編・訳</single>\n      <multiple>編・訳</multiple>\n    </term>\n\n    \x3c!-- VERB ROLE FORMS --\x3e\n    <term name="collection-editor" form="verb">edited by</term>\n    <term name="chair" form="verb">chaired by</term>\n    <term name="compiler" form="verb">compiled by</term>\n    <term name="contributor" form="verb">with</term>\n    <term name="curator" form="verb">curated by</term>\n    <term name="executive-producer" form="verb">executive produced by</term>\n    <term name="guest" form="verb">with guest</term>\n    <term name="host" form="verb">hosted by</term>\n    <term name="narrator" form="verb">narrated by</term>\n    <term name="organizer" form="verb">organized by</term>\n    <term name="performer" form="verb">performed by</term>\n    <term name="producer" form="verb">produced by</term>\n    <term name="script-writer" form="verb">written by</term>\n    <term name="series-creator" form="verb">created by</term>\n    <term name="container-author" form="verb">作者: </term>\n    <term name="director" form="verb">指導者: </term>\n    <term name="editor" form="verb">編集者: </term>\n    <term name="editorial-director" form="verb">編集者: </term>\n    <term name="illustrator" form="verb">図解者: </term>\n    <term name="interviewer" form="verb">面接者: </term>\n    <term name="recipient" form="verb">受領者: </term>\n    <term name="reviewed-author" form="verb">査読者: </term>\n    <term name="collection-editor" form="verb-short">ed. by</term>\n    <term name="translator" form="verb">翻訳者: </term>\n    <term name="editortranslator" form="verb">編集・翻訳者: </term>\n\n    \x3c!-- SHORT VERB ROLE FORMS --\x3e\n    <term name="compiler" form="verb-short">comp. by</term>\n    <term name="contributor" form="verb-short">w.</term>\n    <term name="curator" form="verb-short">cur. by</term>\n    <term name="executive-producer" form="verb-short">exec. prod. by</term>\n    <term name="guest" form="verb-short">w. guest</term>\n    <term name="host" form="verb-short">hosted by</term>\n    <term name="narrator" form="verb-short">narr. by</term>\n    <term name="organizer" form="verb-short">org. by</term>\n    <term name="performer" form="verb-short">perf. by</term>\n    <term name="producer" form="verb-short">prod. by</term>\n    <term name="script-writer" form="verb-short">writ. by</term>\n    <term name="series-creator" form="verb-short">cre. by</term>\n    <term name="director" form="verb-short">指導: </term>\n    <term name="editor" form="verb-short">編: </term>\n    <term name="editorial-director" form="verb-short">編: </term>\n    <term name="illustrator" form="verb-short">図: </term>\n    <term name="translator" form="verb-short">訳: </term>\n    <term name="editortranslator" form="verb-short">編・訳: </term>\n\n    \x3c!-- LONG MONTH FORMS --\x3e\n    <term name="month-01">1月</term>\n    <term name="month-02">2月</term>\n    <term name="month-03">3月</term>\n    <term name="month-04">4月</term>\n    <term name="month-05">5月</term>\n    <term name="month-06">6月</term>\n    <term name="month-07">7月</term>\n    <term name="month-08">8月</term>\n    <term name="month-09">9月</term>\n    <term name="month-10">10月</term>\n    <term name="month-11">11月</term>\n    <term name="month-12">12月</term>\n\n    \x3c!-- SHORT MONTH FORMS --\x3e\n    <term name="month-01" form="short">1月</term>\n    <term name="month-02" form="short">2月</term>\n    <term name="month-03" form="short">3月</term>\n    <term name="month-04" form="short">4月</term>\n    <term name="month-05" form="short">5月</term>\n    <term name="month-06" form="short">6月</term>\n    <term name="month-07" form="short">7月</term>\n    <term name="month-08" form="short">8月</term>\n    <term name="month-09" form="short">9月</term>\n    <term name="month-10" form="short">10月</term>\n    <term name="month-11" form="short">11月</term>\n    <term name="month-12" form="short">12月</term>\n\n    \x3c!-- SEASONS --\x3e\n    <term name="season-01">春季</term>\n    <term name="season-02">夏季</term>\n    <term name="season-03">秋季</term>\n    <term name="season-04">冬季</term>\n  </terms>\n</locale>\n'})),this._initing}};var Pb=r(64583).Promise,Db=function(e,t,r,i){return new(r||(r=Pb))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};class Bb{static init(){return Db(this,void 0,void 0,function*(){yield Rb.initOnce(),this.engine=Rb.engine})}static insertAtSelection(e,t){return Db(this,void 0,void 0,function*(){this.engine||(yield Rb.initOnce(),this.engine=Rb.engine);const r=yield Bl.loadSettings(),i=(null==r?void 0:r.style)||"author-date",n=yield Bb.engine.formatInText(e,{style:i,options:Array.isArray(t)?t[0]:t}),o={keys:e,style:i,seq:null,options:t};yield jl.createCiteCCAtSelection(o,n);const s=yield Bl.loadRecentKeys(),a=e.concat(s.filter(t=>!e.includes(t))).slice(0,20);yield Bl.saveRecentKeys(a)})}static updateAll(){return Db(this,void 0,void 0,function*(){const e=yield jl.enumerateCiteCCs(),t=[],r=new Set;for(const i of e)JSON.parse(i.tag).keys.forEach(e=>{r.has(e)||(r.add(e),t.push(e))});const i={},n=yield Bl.loadSettings(),o=(null==n?void 0:n.style)||"author-date";"numeric"===o&&t.forEach((e,t)=>{i[e]=t+1});for(const t of e){const e=JSON.parse(t.tag).keys,r=yield Bb.engine.formatInText(e,{style:o,seqMap:i});t.insertText(r,Word.InsertLocation.replace)}yield Word.run(e=>Db(this,void 0,void 0,function*(){yield e.sync()}))})}static updateGroup(e,t){return Db(this,void 0,void 0,function*(){const r=(yield jl.enumerateCiteCCs()).find(t=>String(t.id)===e);if(!r)throw new Error("Citation control not found");const i=JSON.parse(r.tag);i.options=t;const n=yield Bl.loadSettings(),o=(null==n?void 0:n.style)||"author-date",s=t.map(e=>e.key),a=yield Bb.engine.formatInText(s,{style:o,options:Array.isArray(i.options)?i.options[0]:i.options});r.insertText(a,Word.InsertLocation.replace),r.tag=JSON.stringify(i),yield Word.run(e=>Db(this,void 0,void 0,function*(){yield e.sync()}))})}}const Mb={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e},captureMetaData:!1},Lb=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",zb=new RegExp("^["+Lb+"]["+Lb+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function Fb(e,t){const r=[];let i=t.exec(e);for(;i;){const n=[];n.startIndex=t.lastIndex-i[0].length;const o=i.length;for(let e=0;e<o;e++)n.push(i[e]);r.push(n),i=t.exec(e)}return r}const jb=function(e){return!(null==zb.exec(e))};let Hb;Hb="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class qb{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==t&&(this.child[this.child.length-1][Hb]={startIndex:t})}static getMetaDataSymbol(){return Hb}}function Ub(e,t){const r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let i=1,n=!1,o=!1,s="";for(;t<e.length;t++)if("<"!==e[t]||o)if(">"===e[t]){if(o?"-"===e[t-1]&&"-"===e[t-2]&&(o=!1,i--):i--,0===i)break}else"["===e[t]?n=!0:s+=e[t];else{if(n&&Yb(e,"!ENTITY",t)){let i,n;t+=7,[i,n,t]=Wb(e,t+1),-1===n.indexOf("&")&&(r[i]={regx:RegExp(`&${i};`,"g"),val:n})}else if(n&&Yb(e,"!ELEMENT",t)){t+=8;const{index:r}=$b(e,t+1);t=r}else if(n&&Yb(e,"!ATTLIST",t))t+=8;else if(n&&Yb(e,"!NOTATION",t)){t+=9;const{index:r}=Vb(e,t+1);t=r}else{if(!Yb(e,"!--",t))throw new Error("Invalid DOCTYPE");o=!0}i++,s=""}if(0!==i)throw new Error("Unclosed DOCTYPE")}return{entities:r,i:t}}const Gb=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function Wb(e,t){t=Gb(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)r+=e[t],t++;if(Jb(r),t=Gb(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw new Error("External entities are not supported");if("%"===e[t])throw new Error("Parameter entities are not supported");let i="";return[t,i]=Kb(e,t,"entity"),[r,i,--t]}function Vb(e,t){t=Gb(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;Jb(r),t=Gb(e,t);const i=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==i&&"PUBLIC"!==i)throw new Error(`Expected SYSTEM or PUBLIC, found "${i}"`);t+=i.length,t=Gb(e,t);let n=null,o=null;if("PUBLIC"===i)[t,n]=Kb(e,t,"publicIdentifier"),'"'!==e[t=Gb(e,t)]&&"'"!==e[t]||([t,o]=Kb(e,t,"systemIdentifier"));else if("SYSTEM"===i&&([t,o]=Kb(e,t,"systemIdentifier"),!o))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:n,systemIdentifier:o,index:--t}}function Kb(e,t,r){let i="";const n=e[t];if('"'!==n&&"'"!==n)throw new Error(`Expected quoted string, found "${n}"`);for(t++;t<e.length&&e[t]!==n;)i+=e[t],t++;if(e[t]!==n)throw new Error(`Unterminated ${r} value`);return[++t,i]}function $b(e,t){t=Gb(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!Jb(r))throw new Error(`Invalid element name: "${r}"`);let i="";if("E"===e[t=Gb(e,t)]&&Yb(e,"MPTY",t))t+=4;else if("A"===e[t]&&Yb(e,"NY",t))t+=2;else{if("("!==e[t])throw new Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&")"!==e[t];)i+=e[t],t++;if(")"!==e[t])throw new Error("Unterminated content model")}return{elementName:r,contentModel:i.trim(),index:t}}function Yb(e,t,r){for(let i=0;i<t.length;i++)if(t[i]!==e[r+i+1])return!1;return!0}function Jb(e){if(jb(e))return e;throw new Error(`Invalid entity name ${e}`)}const Xb=/^[-+]?0x[a-fA-F0-9]+$/,Zb=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Qb={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};const ey=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function ty(e){return"function"==typeof e?e:Array.isArray(e)?t=>{for(const r of e){if("string"==typeof r&&t===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}}:()=>!1}class ry{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=iy,this.parseXml=ly,this.parseTextData=ny,this.resolveNameSpace=oy,this.buildAttributesMap=ay,this.isItStopNode=my,this.replaceEntitiesValue=uy,this.readStopNodeData=fy,this.saveTextToParentTag=dy,this.addChild=cy,this.ignoreAttributesFn=ty(this.options.ignoreAttributes)}}function iy(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const i=t[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function ny(e,t,r,i,n,o,s){if(void 0!==e&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));const i=this.options.tagValueProcessor(t,e,r,n,o);return null==i?e:typeof i!=typeof e||i!==e?i:this.options.trimValues||e.trim()===e?gy(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function oy(e){if(this.options.removeNSPrefix){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}const sy=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function ay(e,t,r){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){const r=Fb(e,sy),i=r.length,n={};for(let e=0;e<i;e++){const i=this.resolveNameSpace(r[e][1]);if(this.ignoreAttributesFn(i,t))continue;let o=r[e][4],s=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(s=this.options.transformAttributeName(s)),"__proto__"===s&&(s="#__proto__"),void 0!==o){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const e=this.options.attributeValueProcessor(i,o,t);n[s]=null==e?o:typeof e!=typeof o||e!==o?e:gy(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[s]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=n,e}return n}}const ly=function(e){e=e.replace(/\r\n?/g,"\n");const t=new qb("!xml");let r=t,i="",n="";for(let o=0;o<e.length;o++)if("<"===e[o])if("/"===e[o+1]){const t=py(e,">",o,"Closing Tag is not closed.");let s=e.substring(o+2,t).trim();if(this.options.removeNSPrefix){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1))}this.options.transformTagName&&(s=this.options.transformTagName(s)),r&&(i=this.saveTextToParentTag(i,r,n));const a=n.substring(n.lastIndexOf(".")+1);if(s&&-1!==this.options.unpairedTags.indexOf(s))throw new Error(`Unpaired tag can not be used as closing tag: </${s}>`);let l=0;a&&-1!==this.options.unpairedTags.indexOf(a)?(l=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=n.lastIndexOf("."),n=n.substring(0,l),r=this.tagsNodeStack.pop(),i="",o=t}else if("?"===e[o+1]){let t=hy(e,o,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,n),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new qb(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,n,t.tagName)),this.addChild(r,e,n,o)}o=t.closeIndex+1}else if("!--"===e.substr(o+1,3)){const t=py(e,"--\x3e",o+4,"Comment is not closed.");if(this.options.commentPropName){const s=e.substring(o+4,t-2);i=this.saveTextToParentTag(i,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:s}])}o=t}else if("!D"===e.substr(o+1,2)){const t=Ub(e,o);this.docTypeEntities=t.entities,o=t.i}else if("!["===e.substr(o+1,2)){const t=py(e,"]]>",o,"CDATA is not closed.")-2,s=e.substring(o+9,t);i=this.saveTextToParentTag(i,r,n);let a=this.parseTextData(s,r.tagname,n,!0,!1,!0,!0);null==a&&(a=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:s}]):r.add(this.options.textNodeName,a),o=t+2}else{let s=hy(e,o,this.options.removeNSPrefix),a=s.tagName;const l=s.rawTagName;let c=s.tagExp,u=s.attrExpPresent,d=s.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),r&&i&&"!xml"!==r.tagname&&(i=this.saveTextToParentTag(i,r,n,!1));const m=r;m&&-1!==this.options.unpairedTags.indexOf(m.tagname)&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),a!==t.tagname&&(n+=n?"."+a:a);const p=o;if(this.isItStopNode(this.options.stopNodes,n,a)){let t="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)"/"===a[a.length-1]?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),c=a):c=c.substr(0,c.length-1),o=s.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(a))o=s.closeIndex;else{const r=this.readStopNodeData(e,l,d+1);if(!r)throw new Error(`Unexpected end of ${l}`);o=r.i,t=r.tagContent}const i=new qb(a);a!==c&&u&&(i[":@"]=this.buildAttributesMap(c,n,a)),t&&(t=this.parseTextData(t,a,n,!0,u,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),i.add(this.options.textNodeName,t),this.addChild(r,i,n,p)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===a[a.length-1]?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),c=a):c=c.substr(0,c.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const e=new qb(a);a!==c&&u&&(e[":@"]=this.buildAttributesMap(c,n,a)),this.addChild(r,e,n,p),n=n.substr(0,n.lastIndexOf("."))}else{const e=new qb(a);this.tagsNodeStack.push(r),a!==c&&u&&(e[":@"]=this.buildAttributesMap(c,n,a)),this.addChild(r,e,n,p),r=e}i="",o=d}}else i+=e[o];return t.child};function cy(e,t,r,i){this.options.captureMetaData||(i=void 0);const n=this.options.updateTag(t.tagname,r,t[":@"]);!1===n||("string"==typeof n?(t.tagname=n,e.addChild(t,i)):e.addChild(t,i))}const uy=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function dy(e,t,r,i){return e&&(void 0===i&&(i=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,i))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function my(e,t,r){const i="*."+r;for(const r in e){const n=e[r];if(i===n||t===n)return!0}return!1}function py(e,t,r,i){const n=e.indexOf(t,r);if(-1===n)throw new Error(i);return n+t.length-1}function hy(e,t,r,i=">"){const n=function(e,t,r=">"){let i,n="";for(let o=t;o<e.length;o++){let t=e[o];if(i)t===i&&(i="");else if('"'===t||"'"===t)i=t;else if(t===r[0]){if(!r[1])return{data:n,index:o};if(e[o+1]===r[1])return{data:n,index:o}}else"\t"===t&&(t=" ");n+=t}}(e,t+1,i);if(!n)return;let o=n.data;const s=n.index,a=o.search(/\s/);let l=o,c=!0;-1!==a&&(l=o.substring(0,a),o=o.substring(a+1).trimStart());const u=l;if(r){const e=l.indexOf(":");-1!==e&&(l=l.substr(e+1),c=l!==n.data.substr(e+1))}return{tagName:l,tagExp:o,closeIndex:s,attrExpPresent:c,rawTagName:u}}function fy(e,t,r){const i=r;let n=1;for(;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){const o=py(e,">",r,`${t} is not closed`);if(e.substring(r+2,o).trim()===t&&(n--,0===n))return{tagContent:e.substring(i,r),i:o};r=o}else if("?"===e[r+1])r=py(e,"?>",r+1,"StopNode is not closed.");else if("!--"===e.substr(r+1,3))r=py(e,"--\x3e",r+3,"StopNode is not closed.");else if("!["===e.substr(r+1,2))r=py(e,"]]>",r,"StopNode is not closed.")-2;else{const i=hy(e,r,">");i&&((i&&i.tagName)===t&&"/"!==i.tagExp[i.tagExp.length-1]&&n++,r=i.closeIndex)}}function gy(e,t,r){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&function(e,t={}){if(t=Object.assign({},Qb,t),!e||"string"!=typeof e)return e;let r=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(r))return e;if("0"===e)return 0;if(t.hex&&Xb.test(r))return function(e){if(parseInt)return parseInt(e,16);if(Number.parseInt)return Number.parseInt(e,16);if(window&&window.parseInt)return window.parseInt(e,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(r);if(-1!==r.search(/.+[eE].+/))return function(e,t,r){if(!r.eNotation)return e;const i=t.match(ey);if(i){let n=i[1]||"";const o=-1===i[3].indexOf("e")?"E":"e",s=i[2],a=n?e[s.length+1]===o:e[s.length]===o;return s.length>1&&a?e:1!==s.length||!i[3].startsWith(`.${o}`)&&i[3][0]!==o?r.leadingZeros&&!a?(t=(i[1]||"")+i[3],Number(t)):e:Number(t)}return e}(e,r,t);{const n=Zb.exec(r);if(n){const o=n[1]||"",s=n[2];let a=(i=n[3])&&-1!==i.indexOf(".")?("."===(i=i.replace(/0+$/,""))?i="0":"."===i[0]?i="0"+i:"."===i[i.length-1]&&(i=i.substring(0,i.length-1)),i):i;const l=o?"."===e[s.length+1]:"."===e[s.length];if(!t.leadingZeros&&(s.length>1||1===s.length&&!l))return e;{const i=Number(r),n=String(i);if(0===i)return i;if(-1!==n.search(/[eE]/))return t.eNotation?i:e;if(-1!==r.indexOf("."))return"0"===n||n===a||n===`${o}${a}`?i:e;let l=s?a:r;return s?l===n||o+l===n?i:e:l===n||l===o+n?i:e}}return e}var i}(e,r)}return void 0!==e?e:""}const vy=qb.getMetaDataSymbol();function by(e,t){return yy(e,t)}function yy(e,t,r){let i;const n={};for(let o=0;o<e.length;o++){const s=e[o],a=_y(s);let l="";if(l=void 0===r?a:r+"."+a,a===t.textNodeName)void 0===i?i=s[a]:i+=""+s[a];else{if(void 0===a)continue;if(s[a]){let e=yy(s[a],t,l);const r=wy(e,t);void 0!==s[vy]&&(e[vy]=s[vy]),s[":@"]?xy(e,s[":@"],l,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==n[a]&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(e)):t.isArray(a,l,r)?n[a]=[e]:n[a]=e}}}return"string"==typeof i?i.length>0&&(n[t.textNodeName]=i):void 0!==i&&(n[t.textNodeName]=i),n}function _y(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const r=t[e];if(":@"!==r)return r}}function xy(e,t,r,i){if(t){const n=Object.keys(t),o=n.length;for(let s=0;s<o;s++){const o=n[s];i.isArray(o,r+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function wy(e,t){const{textNodeName:r}=t,i=Object.keys(e).length;return 0===i||!(1!==i||!e[r]&&"boolean"!=typeof e[r]&&0!==e[r])}const Cy={allowBooleanAttributes:!1,unpairedTags:[]};function ky(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function Ty(e,t){const r=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){const i=e.substr(r,t-r);if(t>5&&"xml"===i)return Ny("InvalidXml","XML declaration allowed only at the start of the document.",Dy(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}continue}return t}function Ey(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function Sy(e,t){let r="",i="",n=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===i?i=e[t]:i!==e[t]||(i="");else if(">"===e[t]&&""===i){n=!0;break}r+=e[t]}return""===i&&{value:r,index:t,tagClosed:n}}const Iy=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Ay(e,t){const r=Fb(e,Iy),i={};for(let e=0;e<r.length;e++){if(0===r[e][1].length)return Ny("InvalidAttr","Attribute '"+r[e][2]+"' has no space in starting.",By(r[e]));if(void 0!==r[e][3]&&void 0===r[e][4])return Ny("InvalidAttr","Attribute '"+r[e][2]+"' is without value.",By(r[e]));if(void 0===r[e][3]&&!t.allowBooleanAttributes)return Ny("InvalidAttr","boolean attribute '"+r[e][2]+"' is not allowed.",By(r[e]));const n=r[e][2];if(!Ry(n))return Ny("InvalidAttr","Attribute '"+n+"' is an invalid name.",By(r[e]));if(i.hasOwnProperty(n))return Ny("InvalidAttr","Attribute '"+n+"' is repeated.",By(r[e]));i[n]=1}return!0}function Oy(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function Ny(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Ry(e){return jb(e)}function Py(e){return jb(e)}function Dy(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function By(e){return e.startIndex+e[1].length}class My{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},Mb,e)}(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const r=function(e,t){t=Object.assign({},Cy,t);const r=[];let i=!1,n=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let o=0;o<e.length;o++)if("<"===e[o]&&"?"===e[o+1]){if(o+=2,o=Ty(e,o),o.err)return o}else{if("<"!==e[o]){if(ky(e[o]))continue;return Ny("InvalidChar","char '"+e[o]+"' is not expected.",Dy(e,o))}{let s=o;if(o++,"!"===e[o]){o=Ey(e,o);continue}{let a=!1;"/"===e[o]&&(a=!0,o++);let l="";for(;o<e.length&&">"!==e[o]&&" "!==e[o]&&"\t"!==e[o]&&"\n"!==e[o]&&"\r"!==e[o];o++)l+=e[o];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),o--),!Py(l)){let t;return t=0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",Ny("InvalidTag",t,Dy(e,o))}const c=Sy(e,o);if(!1===c)return Ny("InvalidAttr","Attributes for '"+l+"' have open quote.",Dy(e,o));let u=c.value;if(o=c.index,"/"===u[u.length-1]){const r=o-u.length;u=u.substring(0,u.length-1);const n=Ay(u,t);if(!0!==n)return Ny(n.err.code,n.err.msg,Dy(e,r+n.err.line));i=!0}else if(a){if(!c.tagClosed)return Ny("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",Dy(e,o));if(u.trim().length>0)return Ny("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",Dy(e,s));if(0===r.length)return Ny("InvalidTag","Closing tag '"+l+"' has not been opened.",Dy(e,s));{const t=r.pop();if(l!==t.tagName){let r=Dy(e,t.tagStartPos);return Ny("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+l+"'.",Dy(e,s))}0==r.length&&(n=!0)}}else{const a=Ay(u,t);if(!0!==a)return Ny(a.err.code,a.err.msg,Dy(e,o-u.length+a.err.line));if(!0===n)return Ny("InvalidXml","Multiple possible root nodes found.",Dy(e,o));-1!==t.unpairedTags.indexOf(l)||r.push({tagName:l,tagStartPos:s}),i=!0}for(o++;o<e.length;o++)if("<"===e[o]){if("!"===e[o+1]){o++,o=Ey(e,o);continue}if("?"!==e[o+1])break;if(o=Ty(e,++o),o.err)return o}else if("&"===e[o]){const t=Oy(e,o);if(-1==t)return Ny("InvalidChar","char '&' is not expected.",Dy(e,o));o=t}else if(!0===n&&!ky(e[o]))return Ny("InvalidXml","Extra text at the end",Dy(e,o));"<"===e[o]&&o--}}}return i?1==r.length?Ny("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Dy(e,r[0].tagStartPos)):!(r.length>0)||Ny("InvalidXml","Invalid '"+JSON.stringify(r.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):Ny("InvalidXml","Start tag expected.",1)}(e,t);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const r=new ry(this.options);r.addExternalEntities(this.externalEntities);const i=r.parseXml(e);return this.options.preserveOrder||void 0===i?i:by(i,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return qb.getMetaDataSymbol()}}function Ly(e,t){let r="";return t.format&&t.indentBy.length>0&&(r="\n"),zy(e,t,"",r)}function zy(e,t,r,i){let n="",o=!1;for(let s=0;s<e.length;s++){const a=e[s],l=Fy(a);if(void 0===l)continue;let c="";if(c=0===r.length?l:`${r}.${l}`,l===t.textNodeName){let e=a[l];Hy(c,t)||(e=t.tagValueProcessor(l,e),e=qy(e,t)),o&&(n+=i),n+=e,o=!1;continue}if(l===t.cdataPropName){o&&(n+=i),n+=`<![CDATA[${a[l][0][t.textNodeName]}]]>`,o=!1;continue}if(l===t.commentPropName){n+=i+`\x3c!--${a[l][0][t.textNodeName]}--\x3e`,o=!0;continue}if("?"===l[0]){const e=jy(a[":@"],t),r="?xml"===l?"":i;let s=a[l][0][t.textNodeName];s=0!==s.length?" "+s:"",n+=r+`<${l}${s}${e}?>`,o=!0;continue}let u=i;""!==u&&(u+=t.indentBy);const d=i+`<${l}${jy(a[":@"],t)}`,m=zy(a[l],t,c,u);-1!==t.unpairedTags.indexOf(l)?t.suppressUnpairedNode?n+=d+">":n+=d+"/>":m&&0!==m.length||!t.suppressEmptyNode?m&&m.endsWith(">")?n+=d+`>${m}${i}</${l}>`:(n+=d+">",m&&""!==i&&(m.includes("/>")||m.includes("</"))?n+=i+t.indentBy+m+i:n+=m,n+=`</${l}>`):n+=d+"/>",o=!0}return n}function Fy(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const i=t[r];if(e.hasOwnProperty(i)&&":@"!==i)return i}}function jy(e,t){let r="";if(e&&!t.ignoreAttributes)for(let i in e){if(!e.hasOwnProperty(i))continue;let n=t.attributeValueProcessor(i,e[i]);n=qy(n,t),!0===n&&t.suppressBooleanAttributes?r+=` ${i.substr(t.attributeNamePrefix.length)}`:r+=` ${i.substr(t.attributeNamePrefix.length)}="${n}"`}return r}function Hy(e,t){let r=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===e||t.stopNodes[i]==="*."+r)return!0;return!1}function qy(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const i=t.entities[r];e=e.replace(i.regex,i.val)}return e}const Uy={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Gy(e){this.options=Object.assign({},Uy,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=ty(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ky),this.processTextOrObjNode=Wy,this.options.format?(this.indentate=Vy,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function Wy(e,t,r,i){const n=this.j2x(e,r+1,i.concat(t));return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}function Vy(e){return this.options.indentBy.repeat(e)}function Ky(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}function $y(e){var t,r,i,n;const o=e.type,s=null!==(n=null===(i=null===(r=null===(t=e.issued)||void 0===t?void 0:t["date-parts"])||void 0===r?void 0:r[0])||void 0===i?void 0:i[0])&&void 0!==n?n:"",a=Object.assign({"b:Tag":Jy(e),"b:Title":e.title||"","b:Year":String(s)},function(e=[]){return(null==e?void 0:e.length)?{"b:Author":{"b:Author":{"b:NameList":{"b:Person":e.map(e=>({"b:Last":e.family,"b:First":e.given}))}}}}:{}}(e.author));return"article-journal"===o?Object.assign(Object.assign({},a),{"b:SourceType":"JournalArticle","b:JournalName":e["container-title"],"b:Pages":e.page,"b:DOI":e.DOI}):"book"===o?Object.assign(Object.assign({},a),{"b:SourceType":"Book","b:Publisher":e.publisher,"b:ISBN":e.ISBN}):"chapter"===o?Object.assign(Object.assign(Object.assign({},a),{"b:SourceType":"BookSection","b:BookTitle":e["container-title"],"b:Pages":e.page}),function(e=[]){return(null==e?void 0:e.length)?{"b:Editor":{"b:Editor":{"b:NameList":{"b:Person":e.map(e=>({"b:Last":e.family,"b:First":e.given}))}}}}:{}}(e.editor)):"paper-conference"===o?Object.assign(Object.assign({},a),{"b:SourceType":"ConferenceProceedings","b:ConferenceName":e["container-title"],"b:Pages":e.page}):Object.assign(Object.assign({},a),{"b:SourceType":"DocumentFromInternetSite"})}function Yy(e){var t,r,i;const n=null===(i=null===(r=null===(t=null==e?void 0:e["b:Editor"])||void 0===t?void 0:t["b:Editor"])||void 0===r?void 0:r["b:NameList"])||void 0===i?void 0:i["b:Person"];return(Array.isArray(n)?n:n?[n]:[]).map(e=>({family:e["b:Last"],given:e["b:First"]}))}function Jy(e){var t,r,i,n,o,s,a,l;if(e.DOI)return`doi:${String(e.DOI).toLowerCase()}`;if(e.ISBN)return`isbn:${String(e.ISBN).replace(/-/g,"")}`;const c=null!==(n=null===(i=null===(r=null===(t=null==e?void 0:e.issued)||void 0===t?void 0:t["date-parts"])||void 0===r?void 0:r[0])||void 0===i?void 0:i[0])&&void 0!==n?n:"",u=(null!==(o=e.title)&&void 0!==o?o:"").trim().toLowerCase().replace(/\s+/g," ");return`local:${(null!==(l=null===(a=null===(s=e.author)||void 0===s?void 0:s[0])||void 0===a?void 0:a.family)&&void 0!==l?l:"").toLowerCase()}|${c}|${u}`}Gy.prototype.build=function(e){return this.options.preserveOrder?Ly(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)},Gy.prototype.j2x=function(e,t,r){let i="",n="";const o=r.join(".");for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s))if(void 0===e[s])this.isAttribute(s)&&(n+="");else if(null===e[s])this.isAttribute(s)||s===this.options.cdataPropName?n+="":"?"===s[0]?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)n+=this.buildTextValNode(e[s],s,"",t);else if("object"!=typeof e[s]){const r=this.isAttribute(s);if(r&&!this.ignoreAttributesFn(r,o))i+=this.buildAttrPairStr(r,""+e[s]);else if(!r)if(s===this.options.textNodeName){let t=this.options.tagValueProcessor(s,""+e[s]);n+=this.replaceEntitiesValue(t)}else n+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const i=e[s].length;let o="",a="";for(let l=0;l<i;l++){const i=e[s][l];if(void 0===i);else if(null===i)"?"===s[0]?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if("object"==typeof i)if(this.options.oneListGroup){const e=this.j2x(i,t+1,r.concat(s));o+=e.val,this.options.attributesGroupName&&i.hasOwnProperty(this.options.attributesGroupName)&&(a+=e.attrStr)}else o+=this.processTextOrObjNode(i,s,t,r);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(s,i);e=this.replaceEntitiesValue(e),o+=e}else o+=this.buildTextValNode(i,s,"",t)}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,a,t)),n+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const t=Object.keys(e[s]),r=t.length;for(let n=0;n<r;n++)i+=this.buildAttrPairStr(t[n],""+e[s][t[n]])}else n+=this.processTextOrObjNode(e[s],s,t,r);return{attrStr:i,val:n}},Gy.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},Gy.prototype.buildObjectNode=function(e,t,r,i){if(""===e)return"?"===t[0]?this.indentate(i)+"<"+t+r+"?"+this.tagEndChar:this.indentate(i)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,o="";return"?"===t[0]&&(o="?",n=""),!r&&""!==r||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===o.length?this.indentate(i)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(i)+"<"+t+r+o+this.tagEndChar+e+this.indentate(i)+n:this.indentate(i)+"<"+t+r+o+">"+e+n}},Gy.prototype.closeTag=function(e){let t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":`></${e}`,t},Gy.prototype.buildTextValNode=function(e,t,r,i){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(i)+`\x3c!--${e}--\x3e`+this.newLine;if("?"===t[0])return this.indentate(i)+"<"+t+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,e);return n=this.replaceEntitiesValue(n),""===n?this.indentate(i)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(i)+"<"+t+r+">"+n+"</"+t+this.tagEndChar}},Gy.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};const Xy={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Zy="POST",Qy=[Xy.OPENID_SCOPE,Xy.PROFILE_SCOPE,Xy.OFFLINE_ACCESS_SCOPE],e_=[...Qy,Xy.EMAIL_SCOPE],t_="Content-Type",r_="Retry-After",i_="X-AnchorMailbox",n_="x-ms-request-id",o_="x-ms-httpver",s_="active-account-filters",a_="common",l_="organizations",c_="consumers",u_="access_token",d_="login",m_="consent",p_="none",h_="code",f_="query",g_="Generic",v_={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},b_="appmetadata",y_="1",__="authority-metadata",x_="config",w_="cache",C_="network",k_="hardcoded_values",T_={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},E_={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},S_="throttling";var I_;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(I_||(I_={}));class A_{constructor(e,t,r){this.level=I_.Info;const i=e||A_.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:I_.Info,this.correlationId=i.correlationId||Xy.EMPTY_STRING,this.packageName=t||Xy.EMPTY_STRING,this.packageVersion=r||Xy.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:I_.Info}}clone(e,t,r){return new A_({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${I_[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:I_.Error,containsPii:!1,correlationId:t||Xy.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:I_.Error,containsPii:!0,correlationId:t||Xy.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:I_.Warning,containsPii:!1,correlationId:t||Xy.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:I_.Warning,containsPii:!0,correlationId:t||Xy.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:I_.Info,containsPii:!1,correlationId:t||Xy.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:I_.Info,containsPii:!0,correlationId:t||Xy.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:I_.Verbose,containsPii:!1,correlationId:t||Xy.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:I_.Verbose,containsPii:!0,correlationId:t||Xy.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:I_.Trace,containsPii:!1,correlationId:t||Xy.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:I_.Trace,containsPii:!0,correlationId:t||Xy.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const O_="OIDC",N_="EAR",R_="none",P_="unexpected_error",D_="post_request_failed",B_={[P_]:"Unexpected error in authentication.",[D_]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class M_ extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,M_.prototype),this.errorCode=e||Xy.EMPTY_STRING,this.errorMessage=t||Xy.EMPTY_STRING,this.subError=r||Xy.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function L_(e,t){return new M_(e,t?`${B_[e]} ${t}`:B_[e])}const z_="client_info_decoding_error",F_="client_info_empty_error",j_="token_parsing_error",H_="null_or_empty_token",q_="endpoints_resolution_error",U_="network_error",G_="openid_config_error",W_="hash_not_deserialized",V_="invalid_state",K_="state_mismatch",$_="state_not_found",Y_="nonce_mismatch",J_="auth_time_not_found",X_="max_age_transpired",Z_="multiple_matching_tokens",Q_="multiple_matching_accounts",ex="multiple_matching_appMetadata",tx="request_cannot_be_made",rx="cannot_remove_empty_scope",ix="cannot_append_scopeset",nx="empty_input_scopeset",ox="device_code_polling_cancelled",sx="device_code_expired",ax="device_code_unknown_error",lx="no_account_in_silent_request",cx="invalid_cache_record",ux="invalid_cache_environment",dx="no_account_found",mx="no_crypto_object",px="unexpected_credential_type",hx="invalid_assertion",fx="invalid_client_credential",gx="token_refresh_required",vx="user_timeout_reached",bx="token_claims_cnf_required_for_signedjwt",yx="authorization_code_missing_from_server_response",_x="binding_key_not_removed",xx="end_session_endpoint_not_supported",wx="key_id_missing",Cx="no_network_connectivity",kx="user_canceled",Tx="missing_tenant_id_error",Ex="method_not_implemented",Sx="nested_app_auth_bridge_disabled",Ix={[z_]:"The client info could not be parsed/decoded correctly",[F_]:"The client info was empty",[j_]:"Token cannot be parsed",[H_]:"The token is null or empty",[q_]:"Endpoints cannot be resolved",[U_]:"Network request failed",[G_]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[W_]:"The hash parameters could not be deserialized",[V_]:"State was not the expected format",[K_]:"State mismatch error",[$_]:"State not found",[Y_]:"Nonce mismatch error",[J_]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[X_]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Z_]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Q_]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ex]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[tx]:"Token request cannot be made without authorization code or refresh token.",[rx]:"Cannot remove null or empty scope from ScopeSet",[ix]:"Cannot append ScopeSet",[nx]:"Empty input ScopeSet cannot be processed",[ox]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[sx]:"Device code is expired.",[ax]:"Device code stopped polling for unknown reasons.",[lx]:"Please pass an account object, silent flow is not supported without account information",[cx]:"Cache record object was null or undefined.",[ux]:"Invalid environment when attempting to create cache entry",[dx]:"No account found in cache for given key.",[mx]:"No crypto object detected.",[px]:"Unexpected credential type.",[hx]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[fx]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[gx]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[vx]:"User defined timeout for device code polling reached",[bx]:"Cannot generate a POP jwt if the token_claims are not populated",[yx]:"Server response does not contain an authorization code to proceed",[_x]:"Could not remove the credential's binding key from storage.",[xx]:"The provided authority does not support logout",[wx]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Cx]:"No network connectivity. Check your internet connection.",[kx]:"User cancelled the flow.",[Tx]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ex]:"This method has not been implemented",[Sx]:"The nested app auth bridge is disabled"};class Ax extends M_{constructor(e,t){super(e,t?`${Ix[e]}: ${t}`:Ix[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ax.prototype)}}function Ox(e,t){return new Ax(e,t)}const Nx={createNewGuid:()=>{throw Ox(Ex)},base64Decode:()=>{throw Ox(Ex)},base64Encode:()=>{throw Ox(Ex)},base64UrlEncode:()=>{throw Ox(Ex)},encodeKid:()=>{throw Ox(Ex)},async getPublicKeyThumbprint(){throw Ox(Ex)},async removeTokenBindingKey(){throw Ox(Ex)},async clearKeystore(){throw Ox(Ex)},async signJwt(){throw Ox(Ex)},async hashString(){throw Ox(Ex)}},Rx="@azure/msal-common",Px="15.12.0",Dx="redirect_uri_empty",Bx="claims_request_parsing_error",Mx="authority_uri_insecure",Lx="url_parse_error",zx="empty_url_error",Fx="empty_input_scopes_error",jx="invalid_claims",Hx="token_request_empty",qx="logout_request_empty",Ux="invalid_code_challenge_method",Gx="pkce_params_missing",Wx="invalid_cloud_discovery_metadata",Vx="invalid_authority_metadata",Kx="untrusted_authority",$x="missing_ssh_jwk",Yx="missing_ssh_kid",Jx="missing_nonce_authentication_header",Xx="invalid_authentication_header",Zx="cannot_set_OIDCOptions",Qx="cannot_allow_platform_broker",ew="authority_mismatch",tw="invalid_request_method_for_EAR",rw="invalid_authorize_post_body_parameters",iw={[Dx]:"A redirect URI is required for all calls, and none has been set.",[Bx]:"Could not parse the given claims request object.",[Mx]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Lx]:"URL could not be parsed into appropriate segments.",[zx]:"URL was empty or null.",[Fx]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[jx]:"Given claims parameter must be a stringified JSON object.",[Hx]:"Token request was empty and not found in cache.",[qx]:"The logout request was null or undefined.",[Ux]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Gx]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Wx]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Vx]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Kx]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[$x]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Yx]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Jx]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Xx]:"Invalid authentication header provided",[Zx]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Qx]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[ew]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[rw]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[tw]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class nw extends M_{constructor(e){super(e,iw[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,nw.prototype)}}function ow(e){return new nw(e)}class sw{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),i=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){const[r,n]=e.split(/=(.+)/g,2);r&&n&&(t[i(r)]=i(n))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class aw{constructor(e){const t=e?sw.trimArrayEntries([...e]):[],r=t?sw.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw ow(Fx);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||Xy.EMPTY_STRING).split(" ");return new aw(t)}static createSearchScopes(e){const t=e&&e.length>0?e:[...Qy],r=new aw(t);return r.containsOnlyOIDCScopes()?r.removeScope(Xy.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new aw(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return e_.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw Ox(ix)}}removeScope(e){if(!e)throw Ox(rx);this.scopes.delete(e.trim())}removeOIDCScopes(){e_.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ox(nx);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw Ox(nx);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),i=this.getScopeCount();return t.size<i+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):Xy.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function lw(e,t){return!!e&&!!t&&e===t.split(".")[1]}function cw(e,t,r,i){if(i){const{oid:t,sub:r,tid:n,name:o,tfp:s,acr:a,preferred_username:l,upn:c,login_hint:u}=i,d=n||s||a||"";return{tenantId:d,localAccountId:t||r||"",name:o,username:l||c||"",loginHint:u,isHomeTenant:lw(d,e)}}return{tenantId:r,localAccountId:t,username:"",isHomeTenant:lw(r,e)}}function uw(e,t,r,i){let n=e;if(t){const{isHomeTenant:r,...i}=t;n={...e,...i}}if(r){const{isHomeTenant:t,...o}=cw(e.homeAccountId,e.localAccountId,e.tenantId,r);return n={...n,...o,idTokenClaims:r,idToken:i},n}return n}function dw(e,t){const r=function(e){if(!e)throw Ox(H_);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Ox(j_);return t[2]}(e);try{const e=t(r);return JSON.parse(e)}catch(e){throw Ox(j_)}}function mw(e,t){if(0===t||Date.now()-3e5>e+t)throw Ox(X_)}function pw(e){if(!e)return e;let t=e.toLowerCase();return sw.endsWith(t,"?")?t=t.slice(0,-1):sw.endsWith(t,"?/")&&(t=t.slice(0,-2)),sw.endsWith(t,"/")||(t+="/"),t}function hw(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function fw(e){if(!e||e.indexOf("=")<0)return null;try{const t=hw(e),r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(e){throw Ox(W_)}return null}function gw(e,t=!0,r){const i=new Array;return e.forEach((e,n)=>{!t&&r&&n in r?i.push(`${n}=${e}`):i.push(`${n}=${encodeURIComponent(e)}`)}),i.join("&")}function vw(e){if(!e)return e;const t=e.split("#")[0];try{const e=new URL(t);return pw(e.origin+e.pathname+e.search)}catch(e){return pw(t)}}class bw{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ow(zx);e.includes("#")||(this._urlString=bw.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return sw.endsWith(t,"?")?t=t.slice(0,-1):sw.endsWith(t,"?/")&&(t=t.slice(0,-2)),sw.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw ow(Lx)}if(!e.HostNameAndPort||!e.PathSegments)throw ow(Lx);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw ow(Mx)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return bw.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return!e||0===r.length||r[0]!==a_&&r[0]!==l_||(r[0]=e),bw.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ow(Lx);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let i=r.AbsolutePath.split("/");return i=i.filter(e=>e&&e.length>0),r.PathSegments=i,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw ow(Lx);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===Xy.FORWARD_SLASH){const r=new bw(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new bw(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!fw(e)}}const yw={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},_w={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},xw=new Set;function ww(e,t,r,i){if(i?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){const n=Cw(t,e);if(n)return i?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),n.aliases;i?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function Cw(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.aliases.includes(t))return i}return null}_w.metadata.forEach(e=>{e.aliases.forEach(e=>{xw.add(e)})});const kw="cache_quota_exceeded",Tw="cache_error_unknown",Ew={[kw]:"Exceeded cache storage capacity.",[Tw]:"Unexpected error occurred when using cache storage."};class Sw extends M_{constructor(e,t){const r=t||(Ew[e]?Ew[e]:Ew[Tw]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Sw.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Iw(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new Sw(kw):new Sw(e.name,e.message):new Sw(Tw)}class Aw{constructor(e,t,r,i,n){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Rx,Px),this.staticAuthorityOptions=n,this.performanceClient=i}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);return r.length>1?r.sort(e=>e.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,i,n){let o,s=null;if(n&&!this.tenantProfileMatchesFilter(r,n))return null;const a=this.getIdToken(e,i,t,r.tenantId);return a&&(o=dw(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,n))?null:(s=uw(e,r,o,a?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,i){const n=e.getAccountInfo();let o=n.tenantProfiles||new Map;const s=this.getTokenKeys();if(r){const e=o.get(r);if(!e)return[];o=new Map([[r,e]])}const a=[];return o.forEach(e=>{const r=this.getTenantedAccountInfoByFilter(n,s,e,t,i);r&&a.push(r)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,r){if(!e)throw Ox(cx);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==r?.idToken&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==r?.accessToken&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==r?.refreshToken&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(e){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof M_?e:Iw(e)}}async saveAccessToken(e,t){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),n=aw.fromString(e.target);i.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,r,!1))return;const i=this.getAccessTokenCredential(e,t);i&&this.credentialMatchesFilter(i,r)&&aw.fromString(i.target).intersectingScopeSets(n)&&this.removeAccessToken(e,t)}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),i=[];return r.forEach(r=>{const n=this.getAccount(r,t);if(!n)return;if(e.homeAccountId&&!this.matchHomeAccountId(n,e.homeAccountId))return;if(e.username&&!this.matchUsername(n.username,e.username))return;if(e.environment&&!this.matchEnvironment(n,e.environment))return;if(e.realm&&!this.matchRealm(n,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(n,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(n,e.authorityType))return;const o={localAccountId:e?.localAccountId,name:e?.name},s=n.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));s&&0===s.length||i.push(n)}),i}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===v_.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===E_.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const i=this.getAppMetadata(t);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[t]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(t);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),i=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);r.idToken.filter(i).forEach(e=>{this.removeIdToken(e,t)}),r.accessToken.filter(i).forEach(e=>{this.removeAccessToken(e,t)}),r.refreshToken.filter(i).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==v_.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==E_.POP)return;const i=r.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,r,i,n){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:v_.ID_TOKEN,clientId:this.clientId,realm:i},s=this.getIdTokensByFilter(o,t,r),a=s.size;if(a<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(a>1){let r=s;if(!i){const t=new Map;s.forEach((r,i)=>{r.realm===e.tenantId&&t.set(i,r)});const i=t.size;if(i<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(1===i)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),n&&t&&n.addFields({multiMatchedID:s.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,t,r){const i=r&&r.idToken||this.getTokenKeys().idToken,n=new Map;return i.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,{clientId:this.clientId,...e}))return;const i=this.getIdTokenCredential(r,t);i&&this.credentialMatchesFilter(i,e)&&n.set(r,i)}),n}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,i){const n=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",n);const o=aw.createSearchScopes(t.scopes),s=t.authenticationScheme||E_.BEARER,a=s&&s.toLowerCase()!==E_.BEARER.toLowerCase()?v_.ACCESS_TOKEN_WITH_AUTH_SCHEME:v_.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:a,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e,n);t&&this.credentialMatchesFilter(t,l)&&u.push(t)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",n),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",n),u.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),n)}),this.performanceClient.addFields({multiMatchedAT:u.length},n),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",n),u[0])}accessTokenKeyMatchesFilter(e,t,r){const i=e.toLowerCase();if(t.clientId&&-1===i.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===i.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===i.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===i.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(r&&!i.includes(e[t].toLowerCase()))return!1;if(!r&&i.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),i=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;const n=this.getAccessTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&i.push(n)}),i}getRefreshToken(e,t,r,i,n){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=t?y_:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:v_.REFRESH_TOKEN,clientId:this.clientId,familyId:o},a=i&&i.refreshToken||this.getTokenKeys().refreshToken,l=[];a.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,s)){const t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,s)&&l.push(t)}});const c=l.length;return c<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(c>1&&n&&r&&n.addFields({multiMatchedRT:c},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),i=Object.keys(r).map(e=>r[e]),n=i.length;if(n<1)return null;if(n>1)throw Ox(ex);return i[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==y_)}matchHomeAccountId(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const r=function(e,t){let r;const i=e.canonicalAuthority;if(i){const n=new bw(i).getUrlComponents().HostNameAndPort;r=ww(n,e.cloudDiscoveryMetadata?.metadata,x_,t)||ww(n,_w.metadata,k_,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==v_.ACCESS_TOKEN&&e.credentialType!==v_.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&aw.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(b_)}isAuthorityMetadata(e){return-1!==e.indexOf(__)}generateAuthorityMetadataCacheKey(e){return`${__}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class Ow extends Aw{async setAccount(){throw Ox(Ex)}getAccount(){throw Ox(Ex)}async setIdTokenCredential(){throw Ox(Ex)}getIdTokenCredential(){throw Ox(Ex)}async setAccessTokenCredential(){throw Ox(Ex)}getAccessTokenCredential(){throw Ox(Ex)}async setRefreshTokenCredential(){throw Ox(Ex)}getRefreshTokenCredential(){throw Ox(Ex)}setAppMetadata(){throw Ox(Ex)}getAppMetadata(){throw Ox(Ex)}setServerTelemetry(){throw Ox(Ex)}getServerTelemetry(){throw Ox(Ex)}setAuthorityMetadata(){throw Ox(Ex)}getAuthorityMetadata(){throw Ox(Ex)}getAuthorityMetadataKeys(){throw Ox(Ex)}setThrottlingCache(){throw Ox(Ex)}getThrottlingCache(){throw Ox(Ex)}removeItem(){throw Ox(Ex)}getKeys(){throw Ox(Ex)}getAccountKeys(){throw Ox(Ex)}getTokenKeys(){throw Ox(Ex)}generateCredentialKey(){throw Ox(Ex)}generateAccountKey(){throw Ox(Ex)}}const Nw="acquireTokenByCode",Rw="acquireTokenByRefreshToken",Pw="acquireTokenSilent",Dw="acquireTokenSilentAsync",Bw="acquireTokenPopup",Mw="acquireTokenRedirect",Lw="cryptoOptsGetPublicKeyThumbprint",zw="cryptoOptsSignJwt",Fw="silentCacheClientAcquireToken",jw="silentIframeClientAcquireToken",Hw="silentRefreshClientAcquireToken",qw="ssoSilent",Uw="standardInteractionClientGetDiscoveredAuthority",Gw="nativeInteractionClientAcquireToken",Ww="networkClientSendPostRequestAsync",Vw="refreshTokenClientExecutePostToTokenEndpoint",Kw="authorizationCodeClientExecutePostToTokenEndpoint",$w="refreshTokenClientExecuteTokenRequest",Yw="refreshTokenClientAcquireToken",Jw="refreshTokenClientAcquireTokenWithCachedRefreshToken",Xw="refreshTokenClientAcquireTokenByRefreshToken",Zw="refreshTokenClientCreateTokenRequestBody",Qw="acquireTokenFromCache",eC="silentFlowClientAcquireCachedToken",tC="silentFlowClientGenerateResultFromCacheRecord",rC="acquireTokenBySilentIframe",iC="initializeBaseRequest",nC="initializeSilentRequest",oC="initializeClientApplication",sC="initializeCache",aC="silentIframeClientTokenHelper",lC="silentHandlerInitiateAuthRequest",cC="silentHandlerMonitorIframeForHash",uC="silentHandlerLoadFrame",dC="silentHandlerLoadFrameSync",mC="standardInteractionClientCreateAuthCodeClient",pC="standardInteractionClientGetClientConfiguration",hC="standardInteractionClientInitializeAuthorizationRequest",fC="getAuthCodeUrl",gC="handleCodeResponseFromServer",vC="handleCodeResponse",bC="handleResponseEar",yC="handleResponsePlatformBroker",_C="handleResponseCode",xC="updateTokenEndpointAuthority",wC="authClientAcquireToken",CC="authClientExecuteTokenRequest",kC="authClientCreateTokenRequestBody",TC="popTokenGenerateCnf",EC="popTokenGenerateKid",SC="handleServerTokenResponse",IC="deserializeResponse",AC="authorityFactoryCreateDiscoveredInstance",OC="authorityResolveEndpointsAsync",NC="authorityGetCloudDiscoveryMetadataFromNetwork",RC="authorityUpdateCloudDiscoveryMetadata",PC="authorityGetEndpointMetadataFromNetwork",DC="authorityUpdateEndpointMetadata",BC="authorityUpdateMetadataWithRegionalInformation",MC="regionDiscoveryDetectRegion",LC="regionDiscoveryGetRegionFromIMDS",zC="regionDiscoveryGetCurrentVersion",FC="acquireTokenByCodeAsync",jC="handleRedirectPromise",HC="handleNativeRedirectPromise",qC="nativeMessageHandlerHandshake",UC="removeHiddenIframe",GC="clearTokensAndKeysWithClaims",WC="cacheManagerGetRefreshToken",VC="importExistingCache",KC="setUserData",$C="localStorageUpdated",YC="generatePkceCodes",JC="generateCodeVerifier",XC="generateCodeChallengeFromVerifier",ZC="sha256Digest",QC="getRandomValues",ek="generateHKDF",tk="generateBaseKey",rk="base64Decode",ik="urlEncodeArr",nk="encrypt",ok="decrypt",sk="generateEarKey",ak="decryptEarResponse",lk=(new Map([[Nw,"ATByCode"],[Rw,"ATByRT"],[Pw,"ATS"],[Dw,"ATSAsync"],[Bw,"ATPopup"],[Mw,"ATRedirect"],[Lw,"CryptoGetPKThumb"],[zw,"CryptoSignJwt"],[Fw,"SltCacheClientAT"],[jw,"SltIframeClientAT"],[Hw,"SltRClientAT"],[qw,"SsoSlt"],[Uw,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[Gw,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[Ww,"NetClientSendPost"],[Vw,"RTClientExecPost"],[Kw,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[$w,"RTClientExecTReq"],[Yw,"RTClientAT"],[Jw,"RTClientATWithCachedRT"],[Xw,"RTClientATByRT"],[Zw,"RTClientCreateTReqBody"],[Qw,"ATFromCache"],[eC,"SltFlowClientATCached"],[tC,"SltFlowClientGenResFromCache"],[rC,"ATBySltIframe"],[iC,"InitBaseReq"],[nC,"InitSltReq"],[oC,"InitClientApplication"],[sC,"InitCache"],[VC,"importCache"],[KC,"setUserData"],[$C,"localStorageUpdated"],[aC,"SIClientTHelper"],[lC,"SHandlerInitAuthReq"],[cC,"SltHandlerMonitorIframeForHash"],[uC,"SHandlerLoadFrame"],[dC,"SHandlerLoadFrameSync"],[mC,"StdIntClientCreateAuthCodeClient"],[pC,"StdIntClientGetClientConf"],[hC,"StdIntClientInitAuthReq"],[fC,"GetAuthCodeUrl"],[gC,"HandleCodeResFromServer"],[vC,"HandleCodeResp"],[bC,"HandleRespEar"],[_C,"HandleRespCode"],[yC,"HandleRespPlatBroker"],[xC,"UpdTEndpointAuth"],[wC,"AuthClientAT"],[CC,"AuthClientExecTReq"],[kC,"AuthClientCreateTReqBody"],[TC,"PopTGenCnf"],[EC,"PopTGenKid"],[SC,"HandleServerTRes"],[IC,"DeserializeRes"],[AC,"AuthFactCreateDiscInst"],[OC,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[NC,"AuthGetCDMetaFromNet"],[RC,"AuthUpdCDMeta"],[PC,"AuthUpdCDMetaFromNet"],[DC,"AuthUpdEndpointMeta"],[BC,"AuthUpdMetaWithRegInfo"],[MC,"RegDiscDetectReg"],[LC,"RegDiscGetRegFromIMDS"],[zC,"RegDiscGetCurrentVer"],[FC,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[jC,"HandleRedirectPromise"],[HC,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[qC,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[UC,"RemoveHiddenIframe"],[GC,"ClearTAndKeysWithClaims"],[WC,"CacheManagerGetRT"],[YC,"GenPkceCodes"],[JC,"GenCodeVerifier"],[XC,"GenCodeChallengeFromVerifier"],[ZC,"Sha256Digest"],[QC,"GetRandomValues"],[ek,"genHKDF"],[tk,"genBaseKey"],[rk,"b64Decode"],[ik,"urlEncArr"],[nk,"encrypt"],[ok,"decrypt"],[sk,"genEarKey"],[ak,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]);class ck{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class uk{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:lk,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new ck}}startPerformanceMeasurement(){return new ck}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const dk={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},mk={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:I_.Info,correlationId:Xy.EMPTY_STRING},pk={claimsBasedCachingEnabled:!1},hk={async sendGetRequestAsync(){throw Ox(Ex)},async sendPostRequestAsync(){throw Ox(Ex)}},fk={sku:Xy.SKU,version:Px,cpu:Xy.EMPTY_STRING,os:Xy.EMPTY_STRING},gk={clientSecret:Xy.EMPTY_STRING,clientAssertion:void 0},vk={azureCloudInstance:R_,tenant:`${Xy.DEFAULT_COMMON_TENANT}`},bk={application:{appName:"",appVersion:""}};function yk(e){return e.authOptions.authority.options.protocolMode===O_}var _k=r(64583).Promise;const xk={sendGetRequestAsync:()=>_k.reject(Ox(Ex)),sendPostRequestAsync:()=>_k.reject(Ox(Ex))},wk="invalid_grant",Ck="msal",kk="msal.js.browser",Tk="53ee284d-920a-4b59-9d30-a60315b26836",Ek="ppnbnpeolgkicgegkbkbjmhlideopiji",Sk="MicrosoftEntra",Ik="Handshake",Ak="localStorage",Ok="sessionStorage",Nk="memoryStorage",Rk="signin",Pk="signout",Dk="request.origin",Bk="urlHash",Mk="request.params",Lk="code.verifier",zk="interaction.status",Fk="request.native",jk="wrapper.sku",Hk="wrapper.version",qk=861,Uk=862;var Gk;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(Gk||(Gk={}));const Wk={scopes:Qy},Vk="msal.db",Kk=`${Vk}.keys`,$k=[0,5,4],Yk="pkce_not_created",Jk="ear_jwk_empty",Xk="ear_jwe_empty",Zk="crypto_nonexistent",Qk="empty_navigate_uri",eT="hash_empty_error",tT="no_state_in_hash",rT="hash_does_not_contain_known_properties",iT="unable_to_parse_state",nT="state_interaction_type_mismatch",oT="interaction_in_progress",sT="popup_window_error",aT="empty_window_error",lT="user_cancelled",cT="monitor_popup_timeout",uT="monitor_window_timeout",dT="redirect_in_iframe",mT="block_iframe_reload",pT="block_nested_popups",hT="iframe_closed_prematurely",fT="silent_logout_unsupported",gT="no_account_error",vT="silent_prompt_value_error",bT="no_token_request_cache_error",yT="unable_to_parse_token_request_cache_error",_T="auth_request_not_set_error",xT="invalid_cache_type",wT="non_browser_environment",CT="database_not_open",kT="no_network_connectivity",TT="post_request_failed",ET="get_request_failed",ST="failed_to_parse_response",IT="unable_to_load_token",AT="crypto_key_not_found",OT="auth_code_required",NT="auth_code_or_nativeAccountId_required",RT="spa_code_and_nativeAccountId_present",PT="database_unavailable",DT="unable_to_acquire_token_from_native_platform",BT="native_handshake_timeout",MT="native_extension_not_installed",LT="native_connection_not_established",zT="uninitialized_public_client_application",FT="native_prompt_not_supported",jT="invalid_base64_string",HT="invalid_pop_token_request",qT="failed_to_build_headers",UT="failed_to_parse_headers",GT="failed_to_decrypt_ear_response",WT="timed_out",VT="For more visit: aka.ms/msaljs/browser-errors",KT={[Yk]:"The PKCE code challenge and verifier could not be generated.",[Jk]:"No EAR encryption key provided. This is unexpected.",[Xk]:"Server response does not contain ear_jwe property. This is unexpected.",[Zk]:"The crypto object or function is not available.",[Qk]:"Navigation URI is empty. Please check stack trace for more info.",[eT]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${VT}`,[tT]:"Hash does not contain state. Please verify that the request originated from msal.",[rT]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${VT}`,[iT]:"Unable to parse state. Please verify that the request originated from msal.",[nT]:"Hash contains state but the interaction type does not match the caller.",[oT]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${VT}`,[sT]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[aT]:"window.open returned null or undefined window object.",[lT]:"User cancelled the flow.",[cT]:`Token acquisition in popup failed due to timeout.  ${VT}`,[uT]:`Token acquisition in iframe failed due to timeout.  ${VT}`,[dT]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[mT]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${VT}`,[pT]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[hT]:"The iframe being monitored was closed prematurely.",[fT]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[gT]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[vT]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[bT]:"No token request found in cache.",[yT]:"The cached token request could not be parsed.",[_T]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[xT]:"Invalid cache type",[wT]:"Login and token requests are not supported in non-browser environments.",[CT]:"Database is not open!",[kT]:"No network connectivity. Check your internet connection.",[TT]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ET]:"Network request failed. Please check the network trace to determine root cause.",[ST]:"Failed to parse network response. Check network trace.",[IT]:"Error loading token to cache.",[AT]:"Cryptographic Key or Keypair not found in browser storage.",[OT]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[NT]:"An authorization code or nativeAccountId must be provided to this flow.",[RT]:"Request cannot contain both spa code and native account id.",[PT]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[DT]:`Unable to acquire token from native platform.  ${VT}`,[BT]:"Timed out while attempting to establish connection to browser extension",[MT]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[LT]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${VT}`,[zT]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${VT}`,[FT]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[jT]:"Invalid base64 encoded string.",[HT]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[qT]:"Failed to build request headers object.",[UT]:"Failed to parse response headers",[GT]:"Failed to decrypt ear response",[WT]:"The request timed out."};class $T extends M_{constructor(e,t){super(e,KT[e],t),Object.setPrototypeOf(this,$T.prototype),this.name="BrowserAuthError"}}function YT(e,t){return new $T(e,t)}var JT=r(64583).Promise;class XT{navigateInternal(e,t){return XT.defaultNavigateWindow(e,t)}navigateExternal(e,t){return XT.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new JT((e,r)=>{setTimeout(()=>{r(YT(WT,"failed_to_redirect"))},t.timeout)})}}class ZT extends M_{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,ZT.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function QT(e,t,r,i){return e.errorMessage=`${e.errorMessage}, additionalErrorInfo: error.name:${i?.name}, error.message:${i?.message}`,new ZT(e,t,r)}class eE{async sendGetRequestAsync(e,t){let r,i={},n=0;const o=tE(t);try{r=await fetch(e,{method:"GET",headers:o})}catch(e){throw QT(YT(window.navigator.onLine?ET:kT),void 0,void 0,e)}i=rE(r.headers);try{return n=r.status,{headers:i,body:await r.json(),status:n}}catch(e){throw QT(YT(ST),n,i,e)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",i=tE(t);let n,o=0,s={};try{n=await fetch(e,{method:"POST",headers:i,body:r})}catch(e){throw QT(YT(window.navigator.onLine?TT:kT),void 0,void 0,e)}s=rE(n.headers);try{return o=n.status,{headers:s,body:await n.json(),status:o}}catch(e){throw QT(YT(ST),o,s,e)}}}function tE(e){try{const t=new Headers;if(!e||!e.headers)return t;const r=e.headers;return Object.entries(r).forEach(([e,r])=>{t.append(e,r)}),t}catch(e){throw QT(YT(qT),void 0,void 0,e)}}function rE(e){try{const t={};return e.forEach((e,r)=>{t[r]=e}),t}catch(e){throw YT(UT)}}function iE(e){return encodeURIComponent(oE(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function nE(e){return sE(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oE(e){return sE((new TextEncoder).encode(e))}function sE(e){const t=Array.from(e,e=>String.fromCodePoint(e)).join("");return btoa(t)}function aE(e){return(new TextDecoder).decode(lE(e))}function lE(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw YT(jT)}const r=atob(t);return Uint8Array.from(r,e=>e.codePointAt(0)||0)}const cE="AES-GCM",uE="HKDF",dE="SHA-256",mE=new Uint8Array([1,0,1]),pE="0123456789abcdef",hE=new Uint32Array(1),fE="raw",gE="encrypt",vE="decrypt",bE={name:"RSASSA-PKCS1-v1_5",hash:dE,modulusLength:2048,publicExponent:mE};async function yE(e,t,r){t?.addQueueMeasurement(ZC,r);const i=(new TextEncoder).encode(e);return window.crypto.subtle.digest(dE,i)}function _E(e){return window.crypto.getRandomValues(e)}function xE(){return window.crypto.getRandomValues(hE),hE[0]}function wE(){const e=Date.now(),t=1024*xE()+(1023&xE()),r=new Uint8Array(16),i=Math.trunc(t/2**30),n=t&2**30-1,o=xE();r[0]=e/2**40,r[1]=e/2**32,r[2]=e/2**24,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|i>>>8,r[7]=i,r[8]=128|n>>>24,r[9]=n>>>16,r[10]=n>>>8,r[11]=n,r[12]=o>>>24,r[13]=o>>>16,r[14]=o>>>8,r[15]=o;let s="";for(let e=0;e<r.length;e++)s+=pE.charAt(r[e]>>>4),s+=pE.charAt(15&r[e]),3!==e&&5!==e&&7!==e&&9!==e||(s+="-");return s}async function CE(e){return window.crypto.subtle.exportKey("jwk",e)}async function kE(){const e=await EE(),t={alg:"dir",kty:"oct",k:nE(new Uint8Array(e))};return oE(JSON.stringify(t))}async function TE(e,t){const r=t.split(".");if(5!==r.length)throw YT(GT,"jwe_length");const i=await async function(e){const t=aE(e),r=lE(JSON.parse(t).k);return window.crypto.subtle.importKey(fE,r,cE,!1,[vE])}(e).catch(()=>{throw YT(GT,"import_key")});try{const e=(new TextEncoder).encode(r[0]),t=lE(r[2]),n=lE(r[3]),o=lE(r[4]),s=8*o.byteLength,a=new Uint8Array(n.length+o.length);a.set(n),a.set(o,n.length);const l=await window.crypto.subtle.decrypt({name:cE,iv:t,tagLength:s,additionalData:e},i,a);return(new TextDecoder).decode(l)}catch(e){throw YT(GT,"decrypt")}}async function EE(){const e=await window.crypto.subtle.generateKey({name:cE,length:256},!0,[gE,vE]);return window.crypto.subtle.exportKey(fE,e)}async function SE(e){return window.crypto.subtle.importKey(fE,e,uE,!1,["deriveKey"])}async function IE(e,t,r){return window.crypto.subtle.deriveKey({name:uE,salt:t,hash:dE,info:(new TextEncoder).encode(r)},e,{name:cE,length:256},!1,[gE,vE])}async function AE(e,t,r){const i=(new TextEncoder).encode(t),n=window.crypto.getRandomValues(new Uint8Array(16)),o=await IE(e,n,r),s=await window.crypto.subtle.encrypt({name:cE,iv:new Uint8Array(12)},o,i);return{data:nE(new Uint8Array(s)),nonce:nE(n)}}async function OE(e,t,r,i){const n=lE(i),o=await IE(e,lE(t),r),s=await window.crypto.subtle.decrypt({name:cE,iv:new Uint8Array(12)},o,n);return(new TextDecoder).decode(s)}async function NE(e){const t=await yE(e);return nE(new Uint8Array(t))}const RE="storage_not_supported",PE="stubbed_public_client_application_called",DE="in_mem_redirect_unavailable",BE={[RE]:"Given storage configuration option was not supported.",[PE]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[DE]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class ME extends M_{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,ME.prototype)}}function LE(e){return new ME(e,BE[e])}function zE(e){e.location.hash="","function"==typeof e.history.replaceState&&e.history.replaceState(null,"",`${e.location.origin}${e.location.pathname}${e.location.search}`)}function FE(){return window.parent!==window}function jE(){return"undefined"!=typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function HE(){if("undefined"==typeof window)throw YT(wT)}function qE(e){if(!e)throw YT(zT)}function UE(e){HE(),function(){if(bw.hashContainsKnownProperties(window.location.hash)&&FE())throw YT(mT)}(),function(){if("undefined"!=typeof window&&window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${Ck}.`))throw YT(pT)}(),qE(e)}function GE(e,t){if(UE(e),function(e){if(FE()&&!e)throw YT(dT)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===Nk&&!t.cache.storeAuthStateInCookie)throw LE(DE)}function WE(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch{}},1e4)}const VE="4.21.1",KE="msal",$E="browser",YE=`${KE}.${$E}.log.level`,JE=`${KE}.${$E}.log.pii`,XE=`${KE}.${$E}.platform.auth.dom`,ZE=`${KE}.version`,QE="account.keys",eS="token.keys";function tS(e=1){return e<1?`${KE}.${QE}`:`${KE}.${e}.${QE}`}function rS(e,t=1){return t<1?`${KE}.${eS}.${e}`:`${KE}.${t}.${eS}.${e}`}class iS{static loggerCallback(e,t){switch(e){case I_.Error:return void console.error(t);case I_.Info:return void console.info(t);case I_.Verbose:return void console.debug(t);case I_.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment="undefined"!=typeof window,this.config=function({auth:e,cache:t,system:r,telemetry:i},n){const o={clientId:Xy.EMPTY_STRING,authority:`${Xy.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Xy.EMPTY_STRING,authorityMetadata:Xy.EMPTY_STRING,redirectUri:"undefined"!=typeof window?jE():"",postLogoutRedirectUri:Xy.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:"AAD",OIDCOptions:{serverResponseType:"fragment",defaultScopes:[Xy.OPENID_SCOPE,Xy.PROFILE_SCOPE,Xy.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:R_,tenant:Xy.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:Ok,cacheRetentionDays:5,temporaryCacheLocation:Ok,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!t||t.cacheLocation!==Ak),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:I_.Info,piiLoggingEnabled:!1},l={...{...dk,loggerOptions:a,networkClient:n?new eE:xk,navigationClient:new XT,loadFrameTimeout:0,windowHashTimeout:r?.loadFrameTimeout||6e4,iframeHashTimeout:r?.loadFrameTimeout||1e4,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:r?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:30},...r,loggerOptions:r?.loggerOptions||a},c={application:{appName:Xy.EMPTY_STRING,appVersion:Xy.EMPTY_STRING},client:new uk};if(e?.protocolMode!==O_&&e?.OIDCOptions&&new A_(l.loggerOptions).warning(JSON.stringify(ow(Zx))),e?.protocolMode&&e.protocolMode===O_&&l?.allowPlatformBroker)throw ow(Qx);return{auth:{...o,...e,OIDCOptions:{...o.OIDCOptions,...e?.OIDCOptions}},cache:{...s,...t},system:l,telemetry:{...c,...i}}}(e,this.browserEnvironment);try{t=window[Ok]}catch(e){}const r=t?.getItem(YE),i=t?.getItem(JE)?.toLowerCase(),n="true"===i||"false"!==i&&void 0,o={...this.config.system.loggerOptions},s=r&&Object.keys(I_).includes(r)?I_[r]:void 0;s&&(o.loggerCallback=iS.loggerCallback,o.logLevel=s),void 0!==n&&(o.piiLoggingEnabled=n),this.logger=new A_(o,"@azure/msal-browser",VE),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class nS extends iS{getModuleName(){return nS.MODULE_NAME}getId(){return nS.ID}async initialize(){return this.available="undefined"!=typeof window,this.available}}nS.MODULE_NAME="",nS.ID="StandardOperatingContext";const oS="missing_kid_error",sS="missing_alg_error",aS={[oS]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[sS]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class lS extends M_{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,lS.prototype)}}function cS(e){return new lS(e,aS[e])}class uS{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw cS(oS);if(!e.alg)throw cS(sS);const t=new uS({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(t)}}var dS=r(64583).Promise;class mS{constructor(){this.dbName=Vk,this.version=1,this.tableName=Kk,this.dbOpen=!1}async open(){return new dS((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",t=>{const r=t;this.db=r.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(YT(PT)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new dS((t,r)=>{if(!this.db)return r(YT(CT));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);i.addEventListener("success",e=>{const r=e;this.closeConnection(),t(r.target.result)}),i.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new dS((r,i)=>{if(!this.db)return i(YT(CT));const n=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);n.addEventListener("success",()=>{this.closeConnection(),r()}),n.addEventListener("error",e=>{this.closeConnection(),i(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new dS((t,r)=>{if(!this.db)return r(YT(CT));const i=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);i.addEventListener("success",()=>{this.closeConnection(),t()}),i.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async getKeys(){return await this.validateDbIsOpen(),new dS((e,t)=>{if(!this.db)return t(YT(CT));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();r.addEventListener("success",t=>{const r=t;this.closeConnection(),e(r.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new dS((t,r)=>{if(!this.db)return r(YT(CT));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);i.addEventListener("success",e=>{const r=e;this.closeConnection(),t(1===r.target.result)}),i.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new dS((e,t)=>{const r=window.indexedDB.deleteDatabase(Vk),i=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(i),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(i),e(!0))),r.addEventListener("error",()=>(clearTimeout(i),t(!1)))})}}var pS=r(64583).Promise;class hS{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return pS.resolve(null)}}class fS{constructor(e){this.inMemoryCache=new hS,this.indexedDBCache=new mS,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof $T&&e.errorCode===PT))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(e){this.handleDatabaseAccessError(e)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(e){this.handleDatabaseAccessError(e)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(e){this.handleDatabaseAccessError(e)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(e){this.handleDatabaseAccessError(e)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(e){this.handleDatabaseAccessError(e)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class gS{constructor(e,t,r){this.logger=e,function(e){if(!window)throw YT(wT);if(!window.crypto)throw YT(Zk);if(!e&&!window.crypto.subtle)throw YT(Zk,"crypto_subtle_undefined")}(r??!1),this.cache=new fS(this.logger),this.performanceClient=t}createNewGuid(){return wE()}base64Encode(e){return oE(e)}base64Decode(e){return aE(e)}base64UrlEncode(e){return iE(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const t=this.performanceClient?.startMeasurement(Lw,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(bE,e,t)}(gS.EXTRACTABLE,gS.POP_KEY_USAGES),i=await CE(r.publicKey),n=vS({e:i.e,kty:i.kty,n:i.n}),o=await this.hashString(n),s=await CE(r.privateKey),a=await async function(e){return window.crypto.subtle.importKey("jwk",e,bE,!1,["sign"])}(s);return await this.cache.setItem(o,{privateKey:a,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),o}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw Ox(_x)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,i){const n=this.performanceClient?.startMeasurement(zw,i),o=await this.cache.getItem(t);if(!o)throw YT(AT);const s=await CE(o.publicKey),a=vS(s),l=iE(JSON.stringify({kid:t})),c=iE(uS.getShrHeaderString({...r?.header,alg:s.alg,kid:l}));e.cnf={jwk:JSON.parse(a)};const u=`${c}.${iE(JSON.stringify(e))}`,d=(new TextEncoder).encode(u),m=await async function(e,t){return window.crypto.subtle.sign(bE,e,t)}(o.privateKey,d),p=`${u}.${nE(new Uint8Array(m))}`;return n&&n.end({success:!0}),p}async hashString(e){return NE(e)}}function vS(e){return JSON.stringify(e,Object.keys(e).sort())}gS.POP_KEY_USAGES=["sign","verify"],gS.EXTRACTABLE=!0;const bS=(e,t,r,i,n)=>(...o)=>{r.trace(`Executing function ${t}`);const s=i?.startMeasurement(t,n);if(n){const e=t+"CallCount";i?.incrementFields({[e]:1},n)}try{const i=e(...o);return s?.end({success:!0}),r.trace(`Returning result from ${t}`),i}catch(e){r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw s?.end({success:!1},e),e}},yS=(e,t,r,i,n)=>(...o)=>{r.trace(`Executing function ${t}`);const s=i?.startMeasurement(t,n);if(n){const e=t+"CallCount";i?.incrementFields({[e]:1},n)}return i?.setPreQueueTime(t,n),e(...o).then(e=>(r.trace(`Returning result from ${t}`),s?.end({success:!0}),e)).catch(e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw s?.end({success:!1},e),e})};class _S{constructor(e,t,r,i){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=i}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(MC,this.correlationId);let r=e;if(r)t.region_source="3";else{const e=_S.IMDS_OPTIONS;try{const i=await yS(this.getRegionFromIMDS.bind(this),LC,this.logger,this.performanceClient,this.correlationId)(Xy.IMDS_VERSION,e);if(200===i.status&&(r=i.body,t.region_source="4"),400===i.status){const i=await yS(this.getCurrentVersion.bind(this),zC,this.logger,this.performanceClient,this.correlationId)(e);if(!i)return t.region_source="1",null;const n=await yS(this.getRegionFromIMDS.bind(this),LC,this.logger,this.performanceClient,this.correlationId)(i,e);200===n.status&&(r=n.body,t.region_source="4")}}catch(e){return t.region_source="1",null}}return r||(t.region_source="1"),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(LC,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Xy.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,Xy.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(zC,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${Xy.IMDS_ENDPOINT}?format=json`,e);return 400===t.status&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(e){return null}}}function xS(){return Math.round((new Date).getTime()/1e3)}function wS(e){return e.getTime()/1e3}function CS(e){return e?new Date(1e3*Number(e)):new Date}function kS(e,t){const r=Number(e)||0;return xS()+t>r}function TS(e,t){const r=Number(e)+24*t*60*60*1e3;return Date.now()>r}function ES(e,t,r,i,n){return{credentialType:v_.ID_TOKEN,homeAccountId:e,environment:t,clientId:i,secret:r,realm:n,lastUpdatedAt:Date.now().toString()}}function SS(e,t,r,i,n,o,s,a,l,c,u,d,m,p,h){const f={homeAccountId:e,credentialType:v_.ACCESS_TOKEN,secret:r,cachedAt:xS().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:t,clientId:i,realm:n,target:o,tokenType:u||E_.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(f.userAssertionHash=d),c&&(f.refreshOn=c.toString()),p&&(f.requestedClaims=p,f.requestedClaimsHash=h),f.tokenType?.toLowerCase()!==E_.BEARER.toLowerCase())switch(f.credentialType=v_.ACCESS_TOKEN_WITH_AUTH_SCHEME,f.tokenType){case E_.POP:const e=dw(r,l);if(!e?.cnf?.kid)throw Ox(bx);f.keyId=e.cnf.kid;break;case E_.SSH:f.keyId=m}return f}function IS(e,t,r,i,n,o,s){const a={credentialType:v_.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:i,secret:r,lastUpdatedAt:Date.now().toString()};return o&&(a.userAssertionHash=o),n&&(a.familyId=n),s&&(a.expiresOn=s.toString()),a}function AS(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function OS(e){return!!e&&AS(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===v_.ACCESS_TOKEN||e.credentialType===v_.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function NS(e){return!!e&&AS(e)&&e.credentialType===v_.REFRESH_TOKEN}function RS(){return xS()+86400}function PS(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function DS(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function BS(e){return e.expiresAt<=xS()}_S.IMDS_OPTIONS={headers:{Metadata:"true"}},r(64583).Promise;class MS{constructor(e,t,r,i,n,o,s,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=n,this.performanceClient=s,this.correlationId=o,this.managedIdentity=a||!1,this.regionDiscovery=new _S(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Xy.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Xy.ADFS:return 1;case Xy.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new bw(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ox(q_)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ox(q_)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ox(q_)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ox(xx);return this.replacePath(this.metadata.end_session_endpoint)}throw Ox(q_)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ox(q_)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ox(q_)}canReplaceTenant(e){return 1===e.PathSegments.length&&!MS.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode!==O_}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const r=new bw(this.metadata.canonical_authority).getUrlComponents(),i=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,n)=>{let o=i[n];if(0===n&&this.canReplaceTenant(r)){const e=new bw(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode===O_&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(OC,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await yS(this.updateCloudDiscoveryMetadata.bind(this),RC,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await yS(this.updateEndpointMetadata.bind(this),DC,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:RS(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==w_&&r?.source!==w_&&(e.expiresAt=RS(),e.canonical_authority=this.canonicalAuthority);const i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(DC,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===k_&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(PS(e,await yS(this.updateMetadataWithRegionalInformation.bind(this),BC,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let r=await yS(this.getEndpointMetadataFromNetwork.bind(this),PC,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await yS(this.updateMetadataWithRegionalInformation.bind(this),BC,this.logger,this.performanceClient,this.correlationId)(r)),PS(e,r,!0),C_;throw Ox(G_,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),PS(e,t,!1),{source:x_};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return PS(e,t,!1),{source:k_,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=BS(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:w_}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new bw(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw ow(Vx)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(PC,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const r=await this.networkInterface.sendGetRequestAsync(t,e),i=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(r.body);return i?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in yw?yw[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(BC,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==Xy.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=t,MS.replaceWithRegionalInformation(e,t);const r=await yS(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),MC,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=r,MS.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome="5"}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(RC,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await yS(this.getCloudDiscoveryMetadataFromNetwork.bind(this),NC,this.logger,this.performanceClient,this.correlationId)();if(r)return DS(e,r,!0),C_;throw ow(Kx)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Xy.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Xy.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Xy.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),DS(e,t,!1),x_;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(r=this.hostnameAndPort,Cw(_w.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),DS(e,t,!1),k_;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var r;const i=BS(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!i?(this.logger.verbose("Found cloud discovery metadata in the cache."),w_):(i&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),MS.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Cw(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ow(Wx)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),MS.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(NC,this.correlationId);const e=`${Xy.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,t);let n,o;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(i.body))n=i.body,o=n.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${n.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(i.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),n=i.body,n.error===Xy.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${n.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${n.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Cw(o,this.hostnameAndPort)}catch(e){if(e instanceof M_)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${e.errorCode}\nError Description: ${e.errorMessage}`);else{const t=e;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${t.name}\nError Description: ${t.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=MS.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&bw.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==R_){const e=t.tenant?t.tenant:Xy.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Xy.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ox(q_)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return xw.has(e)}static isPublicCloudAuthority(e){return Xy.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const i=new bw(e);i.validateAsUri();const n=i.getUrlComponents();let o=`${t}.${n.HostNameAndPort}`;this.isPublicCloudAuthority(n.HostNameAndPort)&&(o=`${t}.${Xy.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=bw.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${s}?${r}`:s}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=MS.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=MS.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=MS.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const r=new bw(e).getUrlComponents();return 0===r.PathSegments.length&&r.HostNameAndPort.endsWith(Xy.CIAM_AUTH_URL)&&(t=`${t}${r.HostNameAndPort.split(".")[0]}${Xy.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function LS(e){return e.endsWith(Xy.FORWARD_SLASH)?e:`${e}${Xy.FORWARD_SLASH}`}MS.reservedTenantDomains=new Set(["{tenant}","{tenantid}",a_,c_,l_]);const zS="no_tokens_found",FS="native_account_unavailable",jS="refresh_token_expired",HS="ux_not_allowed",qS="bad_token",US=["interaction_required","consent_required","login_required",qS,HS],GS=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],WS={[zS]:"No refresh token found in the cache. Please sign-in.",[FS]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[jS]:"Refresh token has expired.",[qS]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[HS]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class VS extends M_{constructor(e,t,r,i,n,o,s,a){super(e,t,r),Object.setPrototypeOf(this,VS.prototype),this.timestamp=i||Xy.EMPTY_STRING,this.traceId=n||Xy.EMPTY_STRING,this.correlationId=o||Xy.EMPTY_STRING,this.claims=s||Xy.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=a}}function KS(e,t,r){const i=!!e&&US.indexOf(e)>-1,n=!!r&&GS.indexOf(r)>-1,o=!!t&&US.some(e=>t.indexOf(e)>-1);return i||o||n}function $S(e){return new VS(e,WS[e])}function YS(e,t){if(!e)throw Ox(F_);try{const r=t(e);return JSON.parse(r)}catch(e){throw Ox(z_)}}function JS(e){if(!e)throw Ox(z_);const t=e.split(".",2);return{uid:t[0],utid:t.length<2?Xy.EMPTY_STRING:t[1]}}function XS(e){return e&&(e.tid||e.tfp||e.acr)||null}class ZS{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){const i=new ZS;let n;1===t.authorityType?i.authorityType="ADFS":t.protocolMode===O_?i.authorityType=g_:i.authorityType="MSSTS",e.clientInfo&&r&&(n=YS(e.clientInfo,r)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;const o=e.environment||t&&t.getPreferredCache();if(!o)throw Ox(ux);i.environment=o,i.realm=n?.utid||XS(e.idTokenClaims)||"",i.localAccountId=n?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const s=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,a=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=s||a||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{const t=cw(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[t]}return i}static createFromAccountInfo(e,t,r){const i=new ZS;return i.authorityType=e.authorityType||g_,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=t,i.msGraphHost=r,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,t,r,i,n){if(1!==t&&2!==t){if(e)try{const t=YS(e,i.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}r.warning("No client info in response")}return n?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let i=!0;if(r){const r=e.idTokenClaims||{},n=t.idTokenClaims||{};i=r.iat===n.iat&&r.nonce===n.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&i}}function QS(e,t,r){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}var eI=r(64583).Promise;const tI="None";class rI{initialize(){return eI.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let e=0;e<r.length;e++){const i=r[e],[n,...o]=decodeURIComponent(i).trim().split("="),s=o.join("=");if(n===t)return s}return""}getUserData(){throw Ox(Ex)}setItem(e,t,r,i=!0,n="Lax"){let o=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${n};`;if(r){const e=function(e){const t=new Date;return new Date(t.getTime()+864e5*e).toUTCString()}(r);o+=`expires=${e};`}(i||n===tI)&&(o+="Secure;"),document.cookie=o}async setUserData(){return eI.reject(Ox(Ex))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(e=>{const r=decodeURIComponent(e).trim().split("=");t.push(r[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return eI.resolve(null)}}function iI(e,t){const r=e.getItem(tS(t));return r?JSON.parse(r):[]}function nI(e,t,r){const i=t.getItem(rS(e,r));if(i){const e=JSON.parse(i);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}function oI(e){return e.hasOwnProperty("id")&&e.hasOwnProperty("nonce")&&e.hasOwnProperty("data")}var sI=r(64583).Promise;const aI="msal.cache.encryption";class lI{constructor(e,t,r){if(!window.localStorage)throw LE(RE);this.memoryStorage=new hS,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new rI,r=t.getItem(aI);let i={key:"",id:""};if(r)try{i=JSON.parse(r)}catch(e){}if(i.key&&i.id){const t=bS(lE,rk,this.logger,this.performanceClient,e)(i.key);this.encryptionCookie={id:i.id,key:await yS(SE,ek,this.logger,this.performanceClient,e)(t)}}else{const r=wE(),i=await yS(EE,tk,this.logger,this.performanceClient,e)(),n=bS(nE,ik,this.logger,this.performanceClient,e)(new Uint8Array(i));this.encryptionCookie={id:r,key:await yS(SE,ek,this.logger,this.performanceClient,e)(i)};const o={id:r,key:n};t.setItem(aI,JSON.stringify(o),0,!0,tI)}await yS(this.importExistingCache.bind(this),VC,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw YT(zT);return this.memoryStorage.getItem(e)}async decryptData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw YT(zT);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=await yS(OE,ok,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!i)return null;try{return JSON.parse(i)}catch(e){return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r,i){if(!this.initialized||!this.encryptionCookie)throw YT(zT);const{data:n,nonce:o}=await yS(AE,nk,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),s={id:this.encryptionCookie.id,nonce:o,data:n,lastUpdatedAt:i};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(s)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),iI(this).forEach(e=>this.removeItem(e));const e=nI(this.clientId,this);e.idToken.forEach(e=>this.removeItem(e)),e.accessToken.forEach(e=>this.removeItem(e)),e.refreshToken.forEach(e=>this.removeItem(e)),this.getKeys().forEach(e=>{(e.startsWith(KE)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=iI(this);t=await this.importArray(t,e),t.length?this.setItem(tS(),JSON.stringify(t)):this.removeItem(tS());const r=nI(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(rS(this.clientId),JSON.stringify(r)):this.removeItem(rS(this.clientId))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let i;try{i=JSON.parse(r)}catch(e){return null}return oI(i)?i.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):yS(OE,ok,this.logger,this.performanceClient,t)(this.encryptionCookie.key,i.nonce,this.getContext(e),i.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),i)}async importArray(e,t){const r=[],i=[];return e.forEach(e=>{const n=this.getItemFromEncryptedCache(e,t).then(t=>{t?(this.memoryStorage.setItem(e,t),r.push(e)):this.removeItem(e)});i.push(n)}),await sI.all(i),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement($C);t.add({isBackground:!0});const{key:r,value:i,context:n}=e.data;return r?n&&n!==this.clientId?(this.logger.trace(`Ignoring broadcast event from clientId: ${n}`),void t.end({success:!1,errorCode:"contextMismatch"})):(i?(this.memoryStorage.setItem(r,i),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}var cI=r(64583).Promise;class uI{constructor(){if(!window.sessionStorage)throw LE(RE)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return cI.resolve(null)}}const dI="msal:initializeEnd",mI="msal:accountAdded",pI="msal:accountRemoved",hI="msal:activeAccountChanged",fI="msal:loginStart",gI="msal:loginSuccess",vI="msal:loginFailure",bI="msal:acquireTokenStart",yI="msal:acquireTokenSuccess",_I="msal:acquireTokenFailure",xI="msal:acquireTokenByCodeFailure",wI="msal:handleRedirectEnd",CI="msal:popupOpened",kI="msal:logoutStart",TI="msal:logoutSuccess",EI="msal:logoutFailure",SI="msal:logoutEnd";function II(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}var AI=r(64583).Promise;class OI extends Aw{constructor(e,t,r,i,n,o,s){super(e,r,i,n,s),this.cacheConfig=t,this.logger=i,this.internalStorage=new hS,this.browserStorage=NI(e,t.cacheLocation,i,n),this.temporaryCacheStorage=NI(e,t.temporaryCacheLocation,i,n),this.cookieStorage=new rI,this.eventHandler=o}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const t=iI(this.browserStorage,0),r=nI(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:t.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const i=iI(this.browserStorage,1),n=nI(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:i.length,currAccessCount:n.accessToken.length,currIdCount:n.idToken.length,currRefreshCount:n.refreshToken.length},e),await AI.all([this.updateV0ToCurrent(1,t,i,e),this.updateV0ToCurrent(1,r.idToken,n.idToken,e),this.updateV0ToCurrent(1,r.accessToken,n.accessToken,e),this.updateV0ToCurrent(1,r.refreshToken,n.refreshToken,e)]),t.length>0?this.browserStorage.setItem(tS(0),JSON.stringify(t)):this.browserStorage.removeItem(tS(0)),i.length>0?this.browserStorage.setItem(tS(1),JSON.stringify(i)):this.browserStorage.removeItem(tS(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(n,e,1)}async updateV0ToCurrent(e,t,r,i){const n=[];for(const o of[...t]){const s=this.browserStorage.getItem(o),a=this.validateAndParseJson(s||"");if(!a){II(t,o);continue}a.lastUpdatedAt||(a.lastUpdatedAt=Date.now().toString(),this.setItem(o,JSON.stringify(a),i));const l=oI(a)?await this.browserStorage.decryptData(o,a,i):a;let c;if(l&&(OS(l)||NS(l))&&(c=l.expiresOn),!l||TS(a.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||c&&kS(c,300))this.browserStorage.removeItem(o),II(t,o),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i);else if(this.cacheConfig.cacheLocation!==Ak||oI(a)){const t=`${KE}.${e}-${o}`,s=this.browserStorage.getItem(t);if(!s){n.push(this.setUserData(t,JSON.stringify(l),i,a.lastUpdatedAt).then(()=>{r.push(t),this.performanceClient.incrementFields({upgradedCacheCount:1},i)}));continue}{const e=this.validateAndParseJson(s);if(Number(a.lastUpdatedAt)>Number(e.lastUpdatedAt)){n.push(this.setUserData(t,JSON.stringify(l),i,a.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},i)}));continue}}}}return AI.all(n)}trackVersionChanges(e){const t=this.browserStorage.getItem(ZE);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==VE&&this.setItem(ZE,VE,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}}setItem(e,t,r){let i=0,n=[];for(let o=0;o<=20;o++)try{this.browserStorage.setItem(e,t),o>0&&(o<=i?this.removeAccessTokenKeys(n.slice(0,o),r,0):(this.removeAccessTokenKeys(n.slice(0,i),r,0),this.removeAccessTokenKeys(n.slice(i,o),r)));break}catch(s){const a=Iw(s);if(!(a.errorCode===kw&&o<20))throw a;if(!n.length){const r=e===rS(this.clientId,0)?JSON.parse(t).accessToken:this.getTokenKeys(0).accessToken,o=e===rS(this.clientId)?JSON.parse(t).accessToken:this.getTokenKeys().accessToken;n=[...r,...o],i=r.length}if(n.length<=o)throw a;this.removeAccessToken(n[o],r,!1)}}async setUserData(e,t,r,i){let n=0,o=[];for(let s=0;s<=20;s++)try{await yS(this.browserStorage.setUserData.bind(this.browserStorage),KC,this.logger,this.performanceClient)(e,t,r,i),s>0&&(s<=n?this.removeAccessTokenKeys(o.slice(0,s),r,0):(this.removeAccessTokenKeys(o.slice(0,n),r,0),this.removeAccessTokenKeys(o.slice(n,s),r)));break}catch(e){const t=Iw(e);if(!(t.errorCode===kw&&s<20))throw t;if(!o.length){const e=this.getTokenKeys(0).accessToken,t=this.getTokenKeys().accessToken;o=[...e,...t],n=e.length}if(o.length<=s)throw t;this.removeAccessToken(o[s],r,!1)}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const i=this.validateAndParseJson(r);return i&&ZS.isAccountEntity(i)?Aw.toObject(new ZS,i):null}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),t,i);const n=this.addAccountKeyToMap(r,t);this.cacheConfig.cacheLocation===Ak&&n&&this.eventHandler.emitEvent(mI,void 0,e.getAccountInfo())}getAccountKeys(){return iI(this.browserStorage)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return-1===r.indexOf(e)?(r.push(e),this.setItem(tS(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),i=r.indexOf(e);if(i>-1){if(r.splice(i,1),0===r.length)return void this.removeItem(tS());this.setItem(tS(),JSON.stringify(r),t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(t=>{t.includes(e.homeAccountId)&&t.includes(e.environment)&&this.browserStorage.removeItem(t)}),this.cacheConfig.cacheLocation===Ak&&this.eventHandler.emitEvent(pI,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),i=r.idToken.indexOf(e);i>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(i,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=1){this.logger.trace("removeAccessTokenKey called");const i=this.getTokenKeys(r);let n=0;if(e.forEach(e=>{const t=i.accessToken.indexOf(e);t>-1&&(i.accessToken.splice(t,1),n++)}),n>0)return this.logger.info(`removed ${n} accessToken keys from tokenKeys map`),void this.setTokenKeys(i,t,r)}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),i=r.refreshToken.indexOf(e);i>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(i,1),this.setTokenKeys(r,t))}getTokenKeys(e=1){return nI(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=1){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(rS(this.clientId,r),JSON.stringify(e),t):this.removeItem(rS(this.clientId,r))}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const i=this.validateAndParseJson(r);return i&&(n=i)&&AS(n)&&n.hasOwnProperty("realm")&&n.credentialType===v_.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null);var n}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),t,i);const n=this.getTokenKeys();-1===n.idToken.indexOf(r)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(r),this.setTokenKeys(n,t))}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const i=this.validateAndParseJson(r);return i&&OS(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),t,i);const n=this.getTokenKeys(),o=n.accessToken.indexOf(r);-1!==o&&n.accessToken.splice(o,1),this.logger.trace(`access token ${-1===o?"added to":"updated in"} map`),n.accessToken.push(r),this.setTokenKeys(n,t)}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const i=this.validateAndParseJson(r);return i&&NS(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),t,i);const n=this.getTokenKeys();-1===n.refreshToken.indexOf(r)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(r),this.setTokenKeys(n,t))}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&((i=r)&&0===e.indexOf(b_)&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var i}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function({environment:e,clientId:t}){return[b_,e,t].join("-").toLowerCase()}(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){const r=0===e.indexOf(T_.CACHE_KEY);let i=!0;return t&&(i=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&i}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){return!!t&&0===e.indexOf(__)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(jk,e),this.internalStorage.setItem(Hk,t)}getWrapperMetadata(){return[this.internalStorage.getItem(jk)||Xy.EMPTY_STRING,this.internalStorage.getItem(Hk)||Xy.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(s_),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const i=this.validateAndParseJson(r);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey(s_);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:xS().toString()};this.setItem(r,JSON.stringify(i),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(hI)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){let r=!1;e&&(r=0===e.indexOf(S_));let i=!0;return t&&(i=t.hasOwnProperty("throttleTime")),r&&i}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(r);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const i=this.temporaryCacheStorage.getItem(r);if(!i){if(this.cacheConfig.cacheLocation===Ak){const e=this.browserStorage.getItem(r);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),i}setTemporaryCache(e,t,r){const i=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(i,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(i,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(e=>{-1===e.indexOf(KE)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{-1===e.indexOf(KE)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(GC,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(t=>{const i=this.getAccessTokenCredential(t,e);i?.requestedClaimsHash&&t.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(t,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return sw.startsWith(e,KE)?e:`${KE}.${this.clientId}.${e}`}generateCredentialKey(e){const t=e.credentialType===v_.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==E_.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${KE}.1`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("-").toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return[`${KE}.1`,e.homeAccountId,e.environment,t||e.tenantId||""].join("-").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Mk)),this.removeTemporaryItem(this.generateCacheKey(Lk)),this.removeTemporaryItem(this.generateCacheKey(Dk)),this.removeTemporaryItem(this.generateCacheKey(Bk)),this.removeTemporaryItem(this.generateCacheKey(Fk)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=oE(JSON.stringify(e));if(this.setTemporaryCache(Mk,r,!0),t){const e=oE(t);this.setTemporaryCache(Lk,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Mk,!0);if(!e)throw YT(bT);const t=this.getTemporaryCache(Lk,!0);let r,i="";try{r=JSON.parse(aE(e)),t&&(i=aE(t))}catch(t){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${t}`),YT(yT)}return[r,i]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Fk,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;return this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${KE}.${zk}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(t){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),zE(window),null}}setInteractionInProgress(e,t=Rk){const r=`${KE}.${zk}`;if(e){if(this.getInteractionInProgress())throw YT(oT);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else e||this.getInteractionInProgress()?.clientId!==this.clientId||this.removeTemporaryItem(r)}async hydrateCache(e,t){const r=ES(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);let i;t.claims&&(i=await this.cryptoImpl.hashString(t.claims));const n={idToken:r,accessToken:SS(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?wS(e.expiresOn):0,e.extExpiresOn?wS(e.extExpiresOn):0,aE,void 0,e.tokenType,void 0,t.sshKid,t.claims,i)};return this.saveCacheRecord(n,e.correlationId)}async saveCacheRecord(e,t,r){try{await super.saveCacheRecord(e,t,r)}catch(e){if(e instanceof Sw&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(e){}throw e}}}function NI(e,t,r,i){try{switch(t){case Ak:return new lI(e,r,i);case Ok:return new uI}}catch(e){r.error(e)}return new hS}class RI{constructor(e){this.eventCallbacks=new Map,this.logger=e||new A_({}),"undefined"!=typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if("undefined"!=typeof window){const i=r||wE();return this.eventCallbacks.has(i)?(this.logger.error(`Event callback with id: ${i} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(i,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${i}`),i)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,i){const n={eventType:e,interactionType:t||null,payload:r||null,error:i||null,timestamp:Date.now()};switch(e){case mI:case pI:case hI:this.broadcastChannel?.postMessage(n);break;default:this.invokeCallbacks(n)}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],i)=>{(0===r.length||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${i}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}const PI="home_account_id",DI="UPN",BI="client_id",MI="redirect_uri",LI="token_type",zI="req_cnf",FI="return_spa_code",jI="x-client-xtra-sku",HI="brk_client_id",qI="brk_redirect_uri",UI="instance_aware";function GI(e,t,r){if(!t)return;const i=e.get(BI);i&&e.has(HI)&&r?.addFields({embeddedClientId:i,embeddedRedirectUri:e.get(MI)},t)}function WI(e,t){e.set("response_type",t)}function VI(e,t,r=!0,i=Qy){!r||i.includes("openid")||t.includes("openid")||i.push("openid");const n=r?[...t||[],...i]:t||[],o=new aw(n);e.set("scope",o.printScopes())}function KI(e,t){e.set(BI,t)}function $I(e,t){e.set(MI,t)}function YI(e,t){e.set("login_hint",t)}function JI(e,t){e.set(i_,`UPN:${t}`)}function XI(e,t){e.set(i_,`Oid:${t.uid}@${t.utid}`)}function ZI(e,t){e.set("sid",t)}function QI(e,t,r){const i=function(e,t){let r;if(e)try{r=JSON.parse(e)}catch(e){throw ow(jx)}else r={};return t&&t.length>0&&(r.hasOwnProperty(u_)||(r[u_]={}),r[u_].xms_cc={values:t}),JSON.stringify(r)}(t,r);try{JSON.parse(i)}catch(e){throw ow(jx)}e.set("claims",i)}function eA(e,t){e.set("client-request-id",t)}function tA(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function rA(e,t){t?.appName&&e.set("x-app-name",t.appName),t?.appVersion&&e.set("x-app-ver",t.appVersion)}function iA(e,t){t&&e.set("state",t)}function nA(e,t,r){if(!t||!r)throw ow(Gx);e.set("code_challenge",t),e.set("code_challenge_method",r)}function oA(e,t){e.set("client_secret",t)}function sA(e,t){t&&e.set("client_assertion",t)}function aA(e,t){t&&e.set("client_assertion_type",t)}function lA(e,t){e.set("grant_type",t)}function cA(e){e.set("client_info","1")}function uA(e){e.has(UI)||e.set(UI,"true")}function dA(e,t){Object.entries(t).forEach(([t,r])=>{!e.has(t)&&r&&e.set(t,r)})}function mA(e,t){t&&(e.set(LI,E_.POP),e.set(zI,t))}function pA(e,t){t&&(e.set(LI,E_.SSH),e.set(zI,t))}function hA(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function fA(e){e.set("x-ms-lib-capability","retry-after, h429")}function gA(e,t,r){e.has(HI)||e.set(HI,t),e.has(qI)||e.set(qI,r)}async function vA(e,t,r,i,n,o,s){s?.addQueueMeasurement(AC,o);const a=MS.transformCIAMAuthority(LS(e)),l=new MS(a,t,r,i,n,o,s);try{return await yS(l.resolveEndpointsAsync.bind(l),OC,n,s,o)(),l}catch(e){throw Ox(q_)}}class bA extends M_{constructor(e,t,r,i,n){super(e,t,r),this.name="ServerError",this.errorNo=i,this.status=n,Object.setPrototypeOf(this,bA.prototype)}}class yA{static generateThrottlingStorageKey(e){return`${S_}.${JSON.stringify(e)}`}static preProcess(e,t,r){const i=yA.generateThrottlingStorageKey(t),n=e.getThrottlingCache(i);if(n){if(n.throttleTime<Date.now())return void e.removeItem(i,r);throw new bA(n.errorCodes?.join(" ")||Xy.EMPTY_STRING,n.errorMessage,n.subError)}}static postProcess(e,t,r,i){if(yA.checkResponseStatus(r)||yA.checkResponseForRetryAfter(r)){const n={throttleTime:yA.calculateThrottleTime(parseInt(r.headers[r_])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(yA.generateThrottlingStorageKey(t),n,i)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(r_)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))}static removeThrottle(e,t,r,i){const n=QS(t,r,i),o=this.generateThrottlingStorageKey(n);e.removeItem(o,r.correlationId)}}class _A{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:r,cacheOptions:i,storageInterface:n,networkInterface:o,cryptoInterface:s,clientCredentials:a,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:d,serializableCache:m}){const p={...mk,...r};return{authOptions:(h=e,{clientCapabilities:[],azureCloudOptions:vk,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...h}),systemOptions:{...dk,...t},loggerOptions:p,cacheOptions:{...pk,...i},storageInterface:n||new Ow(e.clientId,Nx,new A_(p),new uk),networkInterface:o||hk,cryptoInterface:s||Nx,clientCredentials:a||gk,libraryInfo:{...fk,...l},telemetry:{...bk,...c},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:m||null};var h}(e),this.logger=new A_(this.config.loggerOptions,Rx,Px),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[t_]=Xy.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case PI:try{const r=JS(e.credential);t[i_]=`Oid:${r.uid}@${r.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case DI:t[i_]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,i,n,o){o&&this.performanceClient?.addQueueMeasurement(o,n);const s=await this.sendPostRequest(i,e,{body:t,headers:r},n);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,r,i){let n;yA.preProcess(this.cacheManager,e,i);try{n=await yS(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ww,this.logger,this.performanceClient,i)(t,r);const e=n.headers||{};this.performanceClient?.addFields({refreshTokenSize:n.body.refresh_token?.length||0,httpVerToken:e[o_]||"",requestId:e[n_]||""},i)}catch(e){if(e instanceof ZT){const t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[o_]||"",requestId:t[n_]||"",contentTypeHeader:t[t_]||void 0,contentLengthHeader:t["Content-Length"]||void 0,httpStatus:e.httpStatus},i),e.error}throw e instanceof M_?e:Ox(U_)}return yA.postProcess(this.cacheManager,e,n,i),n}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(xC,t);const r=`https://${e}/${this.authority.tenant}/`,i=await vA(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=i}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&gA(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&dA(t,e.tokenQueryParameters),eA(t,e.correlationId),GI(t,e.correlationId,this.performanceClient),gw(t)}}class xA{static setRequestState(e,t,r){const i=xA.generateLibraryState(e,r);return t?`${i}${Xy.RESOURCE_DELIM}${t}`:i}static generateLibraryState(e,t){if(!e)throw Ox(mx);const r={id:e.createNewGuid()};t&&(r.meta=t);const i=JSON.stringify(r);return e.base64Encode(i)}static parseRequestState(e,t){if(!e)throw Ox(mx);if(!t)throw Ox(V_);try{const r=t.split(Xy.RESOURCE_DELIM),i=r[0],n=r.length>1?r.slice(1).join(Xy.RESOURCE_DELIM):Xy.EMPTY_STRING,o=e.base64Decode(i),s=JSON.parse(o);return{userRequestState:n||Xy.EMPTY_STRING,libraryState:s}}catch(e){throw Ox(V_)}}}class wA{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(TC,e.correlationId);const r=await yS(this.generateKid.bind(this),TC,t,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(EC,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,i){const{resourceRequestMethod:n,resourceRequestUri:o,shrClaims:s,shrNonce:a,shrOptions:l}=r,c=o?new bw(o):void 0,u=c?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:xS(),m:n?.toUpperCase(),u:u?.HostNameAndPort,nonce:a||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:s||void 0,...i},t,l,r.correlationId)}}class CA{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class kA{constructor(e,t,r,i,n,o,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=i,this.serializableCache=n,this.persistencePlugin=o,this.performanceClient=s}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||Xy.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Xy.NOT_AVAILABLE} - Description: ${e.error_description||Xy.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Xy.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Xy.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,n=new bA(e.error,r,e.suberror,i,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${n}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${n}`);if(KS(e.error,e.error_description,e.suberror))throw new VS(e.error,e.error_description,e.suberror,e.timestamp||Xy.EMPTY_STRING,e.trace_id||Xy.EMPTY_STRING,e.correlation_id||Xy.EMPTY_STRING,e.claims||Xy.EMPTY_STRING,i);throw n}}async handleServerTokenResponse(e,t,r,i,n,o,s,a,l){let c,u;if(this.performanceClient?.addQueueMeasurement(SC,e.correlation_id),e.id_token){if(c=dw(e.id_token||Xy.EMPTY_STRING,this.cryptoObj.base64Decode),n&&n.nonce&&c.nonce!==n.nonce)throw Ox(Y_);if(i.maxAge||0===i.maxAge){const e=c.auth_time;if(!e)throw Ox(J_);mw(e,i.maxAge)}}this.homeAccountIdentifier=ZS.generateHomeAccountId(e.client_info||Xy.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),n&&n.state&&(u=xA.parseRequestState(this.cryptoObj,n.state)),e.key_id=e.key_id||i.sshKid||void 0;const d=this.generateCacheRecord(e,t,r,i,c,o,n);let m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new CA(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),s&&!a&&d.account){const e=this.cacheStorage.generateAccountKey(d.account.getAccountInfo());if(!this.cacheStorage.getAccount(e,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await kA.generateAuthenticationResult(this.cryptoObj,t,d,!1,i,c,u,void 0,l)}await this.cacheStorage.saveCacheRecord(d,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return kA.generateAuthenticationResult(this.cryptoObj,t,d,!1,i,c,u,e,l)}generateCacheRecord(e,t,r,i,n,o,s){const a=t.getPreferredCache();if(!a)throw Ox(ux);const l=XS(n);let c,u;e.id_token&&n&&(c=ES(this.homeAccountIdentifier,a,e.id_token,this.clientId,l||""),u=TA(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,n,e.client_info,a,l,s,void 0,this.logger));let d=null;if(e.access_token){const n=e.scope?aw.fromString(e.scope):new aw(i.scopes||[]),s=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,c=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,m=r+s,p=m+c,h=u&&u>0?r+u:void 0;d=SS(this.homeAccountIdentifier,a,e.access_token,this.clientId,l||t.tenant||"",n.printScopes(),m,p,this.cryptoObj.base64Decode,h,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),m=IS(this.homeAccountIdentifier,a,e.refresh_token,this.clientId,e.foci,o,t)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:a,familyId:e.foci}),{account:u,idToken:c,accessToken:d,refreshToken:m,appMetadata:p}}static async generateAuthenticationResult(e,t,r,i,n,o,s,a,l){let c,u,d=Xy.EMPTY_STRING,m=[],p=null,h=Xy.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==E_.POP||n.popKid)d=r.accessToken.secret;else{const t=new wA(e),{secret:i,keyId:o}=r.accessToken;if(!o)throw Ox(wx);d=await t.signPopToken(i,o,n)}m=aw.fromString(r.accessToken.target).asArray(),p=CS(r.accessToken.expiresOn),c=CS(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(u=CS(r.accessToken.refreshOn))}r.appMetadata&&(h=r.appMetadata.familyId===y_?y_:"");const f=o?.oid||o?.sub||"",g=o?.tid||"";a?.spa_accountid&&r.account&&(r.account.nativeAccountId=a?.spa_accountid);const v=r.account?uw(r.account.getAccountInfo(),void 0,o,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:f,tenantId:g,scopes:m,account:v,idToken:r?.idToken?.secret||"",idTokenClaims:o||{},accessToken:d,fromCache:i,expiresOn:p,extExpiresOn:c,refreshOn:u,correlationId:n.correlationId,requestId:l||Xy.EMPTY_STRING,familyId:h,tokenType:r.accessToken?.tokenType||Xy.EMPTY_STRING,state:s?s.userRequestState:Xy.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||Xy.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||Xy.EMPTY_STRING,code:a?.spa_code,fromNativeBroker:!1}}}function TA(e,t,r,i,n,o,s,a,l,c,u,d){d?.verbose("setCachedAccount called");const m=e.getAccountKeys().find(e=>e.startsWith(r));let p=null;m&&(p=e.getAccount(m,n));const h=p||ZS.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:s,environment:a,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:u},t,i),f=h.tenantProfiles||[],g=l||h.realm;if(g&&!f.find(e=>e.tenantId===g)){const e=cw(r,h.localAccountId,g,o);f.push(e)}return h.tenantProfiles=f,h}async function EA(e,t,r){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:r})}class SA extends _A{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(wC,e.correlationId),!e.code)throw Ox(tx);const r=xS(),i=await yS(this.executeTokenRequest.bind(this),CC,this.logger,this.performanceClient,e.correlationId)(this.authority,e),n=i.headers?.[n_],o=new kA(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),yS(o.handleServerTokenResponse.bind(o),SC,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,t,void 0,void 0,void 0,n)}getLogoutUri(e){if(!e)throw ow(qx);const t=this.createLogoutUrlQueryString(e);return bw.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(CC,t.correlationId);const r=this.createTokenQueryParameters(t),i=bw.appendQueryString(e.tokenEndpoint,r),n=await yS(this.createTokenRequestBody.bind(this),kC,this.logger,this.performanceClient,t.correlationId)(t);let o;if(t.clientInfo)try{const e=YS(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${e.uid}.${e.utid}`,type:PI}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}const s=this.createTokenRequestHeaders(o||t.ccsCredential),a=QS(this.config.authOptions.clientId,t);return yS(this.executePostToTokenEndpoint.bind(this),Kw,this.logger,this.performanceClient,t.correlationId)(i,n,s,a,t.correlationId,Kw)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(kC,e.correlationId);const t=new Map;if(KI(t,e.embeddedClientId||e.tokenBodyParameters?.[BI]||this.config.authOptions.clientId),this.includeRedirectUri)$I(t,e.redirectUri);else if(!e.redirectUri)throw ow(Dx);if(VI(t,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(t,e.code),tA(t,this.config.libraryInfo),rA(t,this.config.telemetry.application),fA(t),this.serverTelemetryManager&&!yk(this.config)&&hA(t,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&oA(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;sA(t,await EA(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),aA(t,r.assertionType)}if(lA(t,"authorization_code"),cA(t),e.authenticationScheme===E_.POP){const r=new wA(this.cryptoUtils,this.performanceClient);let i;i=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await yS(r.generateCnf.bind(r),TC,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,mA(t,i)}else if(e.authenticationScheme===E_.SSH){if(!e.sshJwk)throw ow($x);pA(t,e.sshJwk)}let r;if((!sw.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&QI(t,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=YS(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${t.uid}.${t.utid}`,type:PI}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case PI:try{XI(t,JS(r.credential))}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case DI:JI(t,r.credential)}return e.embeddedClientId&&gA(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&dA(t,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[FI]||dA(t,{[FI]:"1"}),GI(t,e.correlationId,this.performanceClient),gw(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&eA(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&iA(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&dA(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&uA(t),gw(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class IA{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Xy.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Xy.EMPTY_STRING,this.telemetryCacheKey=T_.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${T_.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const i=t.join(T_.VALUE_SEPARATOR),n=[e,this.getRegionDiscoveryFields()].join(T_.VALUE_SEPARATOR);return[T_.SCHEMA_VERSION,n,i].join(T_.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=IA.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(T_.VALUE_SEPARATOR),i=e.errors.slice(0,t).join(T_.VALUE_SEPARATOR),n=e.errors.length,o=[n,t<n?T_.OVERFLOW_TRUE:T_.OVERFLOW_FALSE].join(T_.VALUE_SEPARATOR);return[T_.SCHEMA_VERSION,e.cacheHits,r,i,o].join(T_.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=T_.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof M_?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(T_.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=IA.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,i=0;const n=e.errors.length;for(t=0;t<n;t++){const n=e.failedRequests[2*t]||Xy.EMPTY_STRING,o=e.failedRequests[2*t+1]||Xy.EMPTY_STRING,s=e.errors[t]||Xy.EMPTY_STRING;if(i+=n.toString().length+o.toString().length+s.length+3,!(i<T_.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Xy.EMPTY_STRING),e.push(this.regionSource||Xy.EMPTY_STRING),e.push(this.regionOutcome||Xy.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:r,libraryVersion:i,extensionName:n,extensionVersion:o}=e,s=new Map([[0,[r,i]],[2,[n,o]]]);let a=[];if(t?.length){if(a=t.split(","),a.length<4)return t}else a=Array.from({length:4},()=>"|");return s.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:r,skuName:i,skuVersion:n}=e;r>=t.length||(t[r]=[i,n].join("|"))}({skuArr:a,index:t,skuName:e[0],skuVersion:e[1]})}),a.join(",")}(e)}}class AA{constructor(e,t,r,i,n,o,s,a,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=n,this.navigationClient=o,this.platformAuthProvider=a,this.correlationId=l||wE(),this.logger=i.clone(kk,VE,this.correlationId),this.performanceClient=s}async clearCacheOnLogout(e,t){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(e){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch(e){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return bw.getAbsoluteUrl(t,jE())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new IA(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(Uw,this.correlationId);const i={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},n=e.requestAuthority||this.config.auth.authority,o=r?.length?"true"===r:this.config.auth.instanceAware,s=t&&o?this.config.auth.authority.replace(bw.getDomainFromUrl(n),t.environment):n,a=MS.generateAuthority(s,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await yS(vA,AC,this.logger,this.performanceClient,this.correlationId)(a,this.config.system.networkClient,this.browserStorage,i,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw ow(ew);return l}}async function OA(e,t,r,i){r.addQueueMeasurement(iC,e.correlationId);const n=e.authority||t.auth.authority,o=[...e&&e.scopes||[]],s={...e,correlationId:e.correlationId,authority:n,scopes:o};if(s.authenticationScheme){if(s.authenticationScheme===E_.SSH){if(!e.sshJwk)throw ow($x);if(!e.sshKid)throw ow(Yx)}i.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=E_.BEARER,i.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!sw.isEmptyObj(e.claims)&&(s.requestedClaimsHash=await NE(e.claims)),s}async function NA(e,t,r,i,n){i.addQueueMeasurement(nC,e.correlationId);const o=await yS(OA,iC,n,i,e.correlationId)(e,r,i,n);return{...e,...o,account:t,forceRefresh:e.forceRefresh||!1}}function RA(e,t){let r;const i=e.httpMethod;if(t===N_){if(r=i||Zy,r!==Zy)throw ow(tw)}else r=i||"GET";if(e.authorizePostBodyParameters&&r!==Zy)throw ow(rw);return r}class PA extends AA{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||wE(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=bw.getAbsoluteUrl(e.postLogoutRedirectUri,jE())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=bw.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,jE())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=bw.getAbsoluteUrl(jE(),jE())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(mC,this.correlationId);const t=await yS(this.getClientConfiguration.bind(this),pC,this.logger,this.performanceClient,this.correlationId)(e);return new SA(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:n,account:o}=e;this.performanceClient.addQueueMeasurement(pC,this.correlationId);const s=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:n,account:o}),a=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:a.loggerCallback,piiLoggingEnabled:a.piiLoggingEnabled,logLevel:a.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:kk,version:VE,cpu:Xy.EMPTY_STRING,os:Xy.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(hC,this.correlationId);const r=this.getRedirectUri(e.redirectUri),i={interactionType:t},n=xA.setRequestState(this.browserCrypto,e&&e.state||Xy.EMPTY_STRING,i),o={...await yS(OA,iC,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:n,nonce:e.nonce||wE(),responseMode:this.config.auth.OIDCOptions.serverResponseType},s={...o,httpMethod:RA(o,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return s;const a=e.account||this.browserStorage.getActiveAccount(this.correlationId);return a&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${a.homeAccountId}`,this.correlationId),s.account=a),s}}function DA(e,t,r){const i=fw(e);if(!i)throw hw(e)?(r.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),r.errorPii(`The ${t} detected is: ${e}`),YT(rT)):(r.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),YT(eT));return i}function BA(e,t,r,i){const n=gw(t,r,i);return bw.appendQueryString(e.authorizationEndpoint,n)}function MA(e,t){if(!e.state||!t)throw e.state?Ox($_,"Cached State"):Ox($_,"Server State");let r,i;try{r=decodeURIComponent(e.state)}catch(t){throw Ox(V_,e.state)}try{i=decodeURIComponent(t)}catch(t){throw Ox(V_,e.state)}if(r!==i)throw Ox(K_);if(e.error||e.error_description||e.suberror){const t=function(e){const t="code=",r=e.error_uri?.lastIndexOf(t);return r&&r>=0?e.error_uri?.substring(r+5):void 0}(e);if(KS(e.error,e.error_description,e.suberror))throw new VS(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new bA(e.error||"",e.error_description,e.suberror,t)}}class LA{constructor(e,t,r,i,n){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=i,this.performanceClient=n}async handleCodeResponse(e,t){let r;this.performanceClient.addQueueMeasurement(vC,t.correlationId);try{r=function(e,t){if(MA(e,t),!e.code)throw Ox(yx);return e}(e,t.state)}catch(e){throw e instanceof bA&&e.subError===lT?YT(lT):e}return yS(this.handleCodeResponseFromServer.bind(this),gC,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(gC,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await yS(this.authModule.updateAuthority.bind(this.authModule),xC,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await yS(this.authModule.acquireToken.bind(this.authModule),wC,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:PI}:e.loginHint?{credential:e.loginHint,type:DI}:null}}const zA="user_switch",FA={[zA]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class jA extends M_{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,jA.prototype),this.name="NativeAuthError",this.ext=r}}function HA(e){return!(!e.ext||!e.ext.status||"DISABLED"!==e.ext.status)||!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode}function qA(e,t,r){if(r&&r.status)switch(r.status){case"ACCOUNT_UNAVAILABLE":return $S(FS);case"USER_INTERACTION_REQUIRED":return new VS(e,t);case"USER_CANCEL":return YT(lT);case"NO_NETWORK":return YT(kT);case"UX_NOT_ALLOWED":return $S(HS)}return new jA(e,FA[e]||t,r)}class UA extends _A{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(eC,e.correlationId);let t="0";if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!sw.isEmptyObj(e.claims))throw this.setCacheOutcome("1",e.correlationId),Ox(gx);if(!e.account)throw Ox(lx);const r=e.account.tenantId||function(e){const t=new bw(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case a_:case l_:case c_:return;default:return r}}(e.authority),i=this.cacheManager.getTokenKeys(),n=this.cacheManager.getAccessToken(e.account,e,i,r);if(!n)throw this.setCacheOutcome("2",e.correlationId),Ox(gx);if(o=n.cachedAt,Number(o)>xS()||kS(n.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome("3",e.correlationId),Ox(gx);var o;n.refreshOn&&kS(n.refreshOn,0)&&(t="4");const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:n,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await yS(this.generateResultFromCacheRecord.bind(this),tC,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(tC,t.correlationId),e.idToken&&(r=dw(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=r?.auth_time;if(!e)throw Ox(J_);mw(e,t.maxAge)}return kA.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class GA extends PA{async acquireToken(e){this.performanceClient.addQueueMeasurement(Fw,e.correlationId);const t=this.initializeServerTelemetryManager(61),r=await yS(this.getClientConfiguration.bind(this),pC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new UA(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await yS(i.acquireCachedToken.bind(i),eC,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(e){throw e instanceof $T&&e.errorCode===AT&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),e}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}}var WA=r(64583).Promise;class VA extends AA{constructor(e,t,r,i,n,o,s,a,l,c,u,d){super(e,t,r,i,n,o,a,l,d),this.apiId=s,this.accountId=c,this.platformAuthProvider=l,this.nativeStorageManager=u,this.silentCacheClient=new GA(e,this.nativeStorageManager,r,i,n,o,a,l,d);const m=this.platformAuthProvider.getExtensionName();this.skus=IA.makeExtraSkuString({libraryName:kk,libraryVersion:VE,extensionName:m,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[jI]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(Gw,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(Gw,this.correlationId),i=xS(),n=this.initializeServerTelemetryManager(this.apiId);try{const o=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,o);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(e){if(1===t)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),e;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=await this.platformAuthProvider.sendMessage(o);return await this.handleNativeResponse(s,o,i).then(e=>(r.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),n.clearNativeBrokerErrorCode(),e)).catch(e=>{throw r.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError}),e})}catch(e){throw e instanceof jA&&n.setNativeBrokerErrorCode(e.errorCode),r.end({success:!1}),e}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:aw.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ox(dx);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw Ox(dx);try{const e=this.createSilentCacheRequest(t,r),i=await this.silentCacheClient.acquireToken(e),n={...r,idTokenClaims:i?.idTokenClaims,idToken:i?.idToken};return{...i,account:n}}catch(e){throw e}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const i=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(i)}catch(e){if(e instanceof jA&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(e.errorCode),HA(e)))throw e}this.browserStorage.setTemporaryCache(Fk,JSON.stringify(i),!0);const n={apiId:qk,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(o,n)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:i,...n}=r;i&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Fk));const o=xS();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const t=await this.platformAuthProvider.sendMessage(n),r=await this.handleNativeResponse(t,n,o);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),r}catch(e){throw e}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),WA.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=dw(e.id_token,aE),n=this.createHomeAccountIdentifier(e,i),o=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(n!==o&&e.account.id!==t.accountId)throw qA(zA);const s=await this.getDiscoveredAuthority({requestAuthority:t.authority}),a=TA(this.browserStorage,s,n,aE,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const l=await this.generateAuthenticationResult(e,t,i,a,s.canonicalAuthority,r);return await this.cacheAccount(a,this.correlationId),await this.cacheNativeTokens(e,t,n,i,e.access_token,l.tenantId,r),l}createHomeAccountIdentifier(e,t){return ZS.generateHomeAccountId(e.client_info||Xy.EMPTY_STRING,0,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?aw.fromString(t):aw.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===E_.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new wA(this.browserCrypto),i={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw Ox(wx);return r.signPopToken(e.access_token,t.keyId,i)}return e.access_token}async generateAuthenticationResult(e,t,r,i,n,o){const s=this.addTelemetryFromNativeResponse(e.properties.MATS),a=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},c=l.UID||r.oid||r.sub||Xy.EMPTY_STRING,u=l.TenantId||r.tid||Xy.EMPTY_STRING,d=uw(i.getAccountInfo(),void 0,r,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const m=await this.generatePopAccessToken(e,t),p=t.tokenType===E_.POP?E_.POP:E_.BEARER;return{authority:n,uniqueId:c,tenantId:u,scopes:a.asArray(),account:d,idToken:e.id_token,idTokenClaims:r,accessToken:m,fromCache:!!s&&this.isResponseFromCache(s),expiresOn:CS(o+e.expires_in),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),t)}cacheNativeTokens(e,t,r,i,n,o,s){const a=ES(r,t.authority,e.id_token||"",t.clientId,i.tid||""),l=s+(t.tokenType===E_.POP?Xy.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),c=this.generateScopes(e.scope,t.scope),u={idToken:a,accessToken:SS(r,t.authority,n,t.clientId,i.tid||o,c.printScopes(),l,0,aE,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(u,this.correlationId,t.storeInCache)}getExpiresInValue(e,t){return e===E_.POP?Xy.SHR_NONCE_VALIDITY:("string"==typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch(e){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return void 0===e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:r,...i}=e,n=new aw(r||[]);n.appendScopes(Qy);const o={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:n.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(o.signPopToken&&e.popKid)throw YT(HT);if(this.handleExtraBrokerParams(o),o.extraParameters=o.extraParameters||{},o.extraParameters.telemetry="MATS",e.authenticationScheme===E_.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},r=new wA(this.browserCrypto);let i;if(o.keyId)i=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:o.keyId})),o.signPopToken=!1;else{const e=await yS(r.generateCnf.bind(r),TC,this.logger,this.performanceClient,this.correlationId)(t,this.logger);i=e.reqCnfString,o.keyId=e.kid,o.signPopToken=!0}o.reqCnf=i}return this.addRequestSKUs(o),o}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new bw(t);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case 863:case 61:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),p_}if(e)switch(e){case p_:case m_:case d_:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),YT(FT)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(HI)&&e.extraParameters.hasOwnProperty(qI)&&e.extraParameters.hasOwnProperty(BI);if(!e.embeddedClientId&&!t)return;let r="";const i=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[qI],r=e.extraParameters[BI]),e.extraParameters={child_client_id:r,child_redirect_uri:i},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:i},this.correlationId)}}async function KA(e,t,r,i,n){const o=function(e,t,r,i){const n=t.correlationId,o=new Map;if(KI(o,t.embeddedClientId||t.extraQueryParameters?.[BI]||e.clientId),VI(o,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),$I(o,t.redirectUri),eA(o,n),function(e,t){e.set("response_mode",t||"query")}(o,t.responseMode),cA(o),t.prompt&&(function(e,t){e.set("prompt",t)}(o,t.prompt),i?.addFields({prompt:t.prompt},n)),t.domainHint&&(function(e,t){e.set("domain_hint",t)}(o,t.domainHint),i?.addFields({domainHintFromRequest:!0},n)),"select_account"!==t.prompt)if(t.sid&&t.prompt===p_)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),ZI(o,t.sid),i?.addFields({sidFromRequest:!0},n);else if(t.account){const e=(s=t.account,s.idTokenClaims?.sid||null);let a=function(e){return e.loginHint||e.idTokenClaims?.login_hint||null}(t.account);if(a&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),YI(o,a),i?.addFields({loginHintFromClaim:!0},n);try{XI(o,JS(t.account.homeAccountId))}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===p_){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),ZI(o,e),i?.addFields({sidFromClaim:!0},n);try{XI(o,JS(t.account.homeAccountId))}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),YI(o,t.loginHint),JI(o,t.loginHint),i?.addFields({loginHintFromRequest:!0},n);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),YI(o,t.account.username),i?.addFields({loginHintFromUpn:!0},n);try{XI(o,JS(t.account.homeAccountId))}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),YI(o,t.loginHint),JI(o,t.loginHint),i?.addFields({loginHintFromRequest:!0},n));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");var s;return t.nonce&&function(e,t){e.set("nonce",t)}(o,t.nonce),t.state&&iA(o,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&QI(o,t.claims,e.clientCapabilities),t.embeddedClientId&&gA(o,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(UI)||uA(o),o}({...e.auth,authority:t},r,i,n);if(tA(o,{sku:kk,version:VE,os:"",cpu:""}),e.auth.protocolMode!==O_&&rA(o,e.telemetry.application),r.platformBroker&&(function(e){e.set("nativebroker","1")}(o),n.addFields({isPlatformAuthorizeRequest:!0},r.correlationId),r.authenticationScheme===E_.POP)){const e=new gS(i,n),t=new wA(e);let s;s=r.popKid?e.encodeKid(r.popKid):(await yS(t.generateCnf.bind(t),TC,i,n,r.correlationId)(r,i)).reqCnfString,mA(o,s)}return GI(o,r.correlationId,n),o}async function $A(e,t,r,i,n){if(!r.codeChallenge)throw ow(Gx);const o=await yS(KA,"getStandardParams",i,n,r.correlationId)(e,t,r,i,n);return WI(o,h_),nA(o,r.codeChallenge,Xy.S256_CODE_CHALLENGE_METHOD),dA(o,r.extraQueryParameters||{}),BA(t,o,e.auth.encodeExtraQueryParams,r.extraQueryParameters)}async function YA(e,t,r,i,n,o){if(!i.earJwk)throw YT(Jk);const s=await KA(t,r,i,n,o);WI(s,"id_token token refresh_token"),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(s,i.earJwk);const a=new Map;return dA(a,i.extraQueryParameters||{}),XA(e,BA(r,a,t.auth.encodeExtraQueryParams,i.extraQueryParameters),s)}async function JA(e,t,r,i,n,o){const s=await KA(t,r,i,n,o);WI(s,h_),nA(s,i.codeChallenge,i.codeChallengeMethod||Xy.S256_CODE_CHALLENGE_METHOD),function(e,t){Object.entries(t).forEach(([t,r])=>{r&&e.set(t,r)})}(s,i.authorizePostBodyParameters||{});const a=new Map;return dA(a,i.extraQueryParameters||{}),XA(e,BA(r,a,t.auth.encodeExtraQueryParams,i.extraQueryParameters),s)}function XA(e,t,r){const i=e.createElement("form");return i.method="post",i.action=t,r.forEach((t,r)=>{const n=e.createElement("input");n.hidden=!0,n.name=r,n.value=t,i.appendChild(n)}),e.body.appendChild(i),i}async function ZA(e,t,r,i,n,o,s,a,l,c){if(a.verbose("Account id found, calling WAM for token"),!c)throw YT(LT);const u=new gS(a,l),d=new VA(i,n,u,a,s,i.system.navigationClient,r,l,c,t,o,e.correlationId),{userRequestState:m}=xA.parseRequestState(u,e.state);return yS(d.acquireToken.bind(d),Gw,a,l,e.correlationId)({...e,state:m,prompt:void 0})}async function QA(e,t,r,i,n,o,s,a,l,c,u,d){if(yA.removeThrottle(s,n.auth.clientId,e),t.accountId)return yS(ZA,yC,c,u,e.correlationId)(e,t.accountId,i,n,s,a,l,c,u,d);const m={...e,code:t.code||"",codeVerifier:r},p=new LA(o,s,m,c,u);return await yS(p.handleCodeResponse.bind(p),vC,c,u,e.correlationId)(t,e)}async function eO(e,t,r,i,n,o,s,a,l,c,u){if(yA.removeThrottle(o,i.auth.clientId,e),MA(t,e.state),!t.ear_jwe)throw YT(Xk);if(!e.earJwk)throw YT(Jk);const d=JSON.parse(await yS(TE,ak,l,c,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return yS(ZA,yC,l,c,e.correlationId)(e,d.accountId,r,i,o,s,a,l,c,u);const m=new kA(i.auth.clientId,o,new gS(l,c),l,null,null,c);m.validateTokenResponse(d);const p={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await yS(m.handleServerTokenResponse.bind(m),SC,l,c,e.correlationId)(d,n,xS(),e,p,void 0,void 0,void 0,void 0)}async function tO(e,t,r){e.addQueueMeasurement(YC,r);const i=bS(rO,JC,t,e,r)(e,t,r);return{verifier:i,challenge:await yS(iO,XC,t,e,r)(i,e,t,r)}}function rO(e,t,r){try{const i=new Uint8Array(32);return bS(_E,QC,t,e,r)(i),nE(i)}catch(e){throw YT(Yk)}}async function iO(e,t,r,i){t.addQueueMeasurement(XC,i);try{const n=await yS(yE,ZC,r,t,i)(e,t,i);return nE(new Uint8Array(n))}catch(e){throw YT(Yk)}}var nO=r(64583).Promise;class oO{constructor(e,t,r,i){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=i,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(qC),this.platformAuthType="PlatformAuthExtensionHandler"}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:"GetToken",request:e},r={channel:Tk,extensionId:this.extensionId,responseId:wE(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const i=await new nO((e,t)=>{this.resolvers.set(r.responseId,{resolve:e,reject:t})});return this.validatePlatformBrokerResponse(i)}static async createProvider(e,t,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const i=new oO(e,t,r,Ek);return await i.sendHandshakeRequest(),i}catch(i){const n=new oO(e,t,r);return await n.sendHandshakeRequest(),n}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Tk,extensionId:this.extensionId,responseId:wE(),body:{method:Ik}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new nO((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(YT(BT)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Tk&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Ik){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(YT(MT))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),i=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if("Response"===e){if(!r)return;const e=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(e)}`),"Success"!==e.status)r.reject(qA(e.code,e.description,e.ext));else{if(!e.result)throw L_(P_,"Event does not contain result.");e.result.code&&e.result.description?r.reject(qA(e.result.code,e.result.description,e.result.ext)):r.resolve(e.result)}this.resolvers.delete(t.responseId)}else if("HandshakeResponse"===e){if(!i)return void this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),i.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(t){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${t}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(t):i&&i.reject(t)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw L_(P_,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Ek?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class sO{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType="PlatformAuthDOMHandler"}static async createProvider(e,t,r){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication){const i=await window.navigator.platformAuthentication.getSupportedContracts(Sk);if(i?.includes("get-token-and-sign-out"))return e.trace("Platform auth api available in DOM"),new sO(e,t,r)}}getExtensionId(){return Sk}getExtensionVersion(){return""}getExtensionName(){return"DOM API"}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(e){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),e}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:i,scope:n,redirectUri:o,correlationId:s,state:a,storeInCache:l,embeddedClientId:c,extraParameters:u,...d}=e,m=this.getDOMExtraParams(d);return{accountId:t,brokerId:this.getExtensionId(),authority:i,clientId:r,correlationId:s||this.correlationId,extraParameters:{...u,...m},isSecurityTokenService:!1,redirectUri:o,scope:n,state:a,storeInCache:l,embeddedClientId:c}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),qA(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw L_(P_,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((e,[t,r])=>(e[t]=String(r),e),{})}}}function aO(e,t,r,i){if(t.trace("isPlatformAuthAllowed called"),!e.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(i)switch(i){case E_.BEARER:case E_.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}var lO=r(64583).Promise;class cO extends PA{constructor(e,t,r,i,n,o,s,a,l,c){super(e,t,r,i,n,o,s,l,c),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=a,this.eventHandler=n}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Qy,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{const i={...e,httpMethod:RA(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(e){return lO.reject(e)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},i=e&&e.authority,n=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,i,n)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,i,n))}catch(e){return lO.reject(e)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");const i=await yS(this.initializeAuthorizationRequest.bind(this),hC,this.logger,this.performanceClient,this.correlationId)(e,Gk.Popup);t.popup&&WE(i.authority);const n=aO(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return i.platformBroker=n,this.config.auth.protocolMode===N_?this.executeEarFlow(i,t):this.executeCodeFlow(i,t,r)}async executeCodeFlow(e,t,r){const i=e.correlationId,n=this.initializeServerTelemetryManager(Uk),o=r||await yS(tO,YC,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),s={...e,codeChallenge:o.challenge};try{const r=await yS(this.createAuthCodeClient.bind(this),mC,this.logger,this.performanceClient,i)({serverTelemetryManager:n,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account});if(s.httpMethod===Zy)return await this.executeCodeFlowWithPost(s,t,r,o.verifier);{const n=await yS($A,fC,this.logger,this.performanceClient,i)(this.config,r.authority,s,this.logger,this.performanceClient),a=this.initiateAuthRequest(n,t);this.eventHandler.emitEvent(CI,Gk.Popup,{popupWindow:a},null);const l=await this.monitorPopupForHash(a,t.popupWindowParent),c=bS(DA,IC,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await yS(QA,_C,this.logger,this.performanceClient,i)(e,c,o.verifier,Uk,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(e){throw t.popup?.close(),e instanceof M_&&(e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e)),e}}async executeEarFlow(e,t){const r=e.correlationId,i=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),n=await yS(kE,sk,this.logger,this.performanceClient,r)(),o={...e,earJwk:n},s=t.popup||this.openPopup("about:blank",t);(await YA(s.document,this.config,i,o,this.logger,this.performanceClient)).submit();const a=await yS(this.monitorPopupForHash.bind(this),cC,this.logger,this.performanceClient,r)(s,t.popupWindowParent),l=bS(DA,IC,this.logger,this.performanceClient,this.correlationId)(a,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yS(eO,bC,this.logger,this.performanceClient,r)(o,l,Uk,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,t,r,i){const n=e.correlationId,o=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=t.popup||this.openPopup("about:blank",t);(await JA(s.document,this.config,o,e,this.logger,this.performanceClient)).submit();const a=await yS(this.monitorPopupForHash.bind(this),cC,this.logger,this.performanceClient,n)(s,t.popupWindowParent),l=bS(DA,IC,this.logger,this.performanceClient,this.correlationId)(a,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yS(QA,_C,this.logger,this.performanceClient,n)(e,l,i,Uk,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,r,i){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(kI,Gk.Popup,e);const n=this.initializeServerTelemetryManager(962);try{await this.clearCacheOnLogout(this.correlationId,e.account);const o=await yS(this.createAuthCodeClient.bind(this),mC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:r,account:e.account||void 0});try{o.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&o.authority.protocolMode===O_){if(this.eventHandler.emitEvent(TI,Gk.Popup,e),i){const e={apiId:962,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=bw.getAbsoluteUrl(i,jE());await this.navigationClient.navigateInternal(t,e)}return void t.popup?.close()}}const s=o.getLogoutUri(e);this.eventHandler.emitEvent(TI,Gk.Popup,e);const a=this.openPopup(s,t);if(this.eventHandler.emitEvent(CI,Gk.Popup,{popupWindow:a},null),await this.monitorPopupForHash(a,t.popupWindowParent).catch(()=>{}),i){const e={apiId:962,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=bw.getAbsoluteUrl(i,jE());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${t}`),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(e){throw t.popup?.close(),e instanceof M_&&(e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e)),this.eventHandler.emitEvent(EI,Gk.Popup,null,e),this.eventHandler.emitEvent(SI,Gk.Popup),e}this.eventHandler.emitEvent(SI,Gk.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),YT(Qk)}monitorPopupForHash(e,t){return new lO((t,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void r(YT(lT));let n="";try{n=e.location.href}catch(e){}if(!n||"about:blank"===n)return;clearInterval(i);let o="";const s=this.config.auth.OIDCOptions.serverResponseType;e&&(o=s===f_?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(o)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):void 0===t.popup&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw YT(aT);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(e){throw this.logger.error("error opening popup "+e.message),YT(sT)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:i}){const n=i.screenLeft?i.screenLeft:i.screenX,o=i.screenTop?i.screenTop:i.screenY,s=i.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=i.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,c=r.popupSize?.height,u=r.popupPosition?.top,d=r.popupPosition?.left;return(!l||l<0||l>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=483),(!c||c<0||c>a)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),c=600),(!u||u<0||u>a)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),u=Math.max(0,a/2-300+o)),(!d||d<0||d>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),d=Math.max(0,s/2-241.5+n)),i.open(e,t,`width=${l}, height=${c}, top=${u}, left=${d}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${Ck}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Ck}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}var uO=r(64583).Promise;class dO extends PA{constructor(e,t,r,i,n,o,s,a,l,c){super(e,t,r,i,n,o,s,l,c),this.nativeStorage=a}async acquireToken(e){const t=await yS(this.initializeAuthorizationRequest.bind(this),hC,this.logger,this.performanceClient,this.correlationId)(e,Gk.Redirect);t.platformBroker=aO(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent("msal:restoreFromBFCache",Gk.Redirect))},i=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${i}`),this.browserStorage.setTemporaryCache(Dk,i,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===N_?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(e){throw e instanceof M_&&e.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),e}}async executeCodeFlow(e,t){const r=e.correlationId,i=this.initializeServerTelemetryManager(qk),n=await yS(tO,YC,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),o={...e,codeChallenge:n.challenge};this.browserStorage.cacheAuthorizeRequest(o,n.verifier);try{if(o.httpMethod===Zy)return await this.executeCodeFlowWithPost(o);{const r=await yS(this.createAuthCodeClient.bind(this),mC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),n=await yS($A,fC,this.logger,this.performanceClient,e.correlationId)(this.config,r.authority,o,this.logger,this.performanceClient);return await this.initiateAuthRequest(n,t)}}catch(e){throw e instanceof M_&&(e.setCorrelationId(this.correlationId),i.cacheFailedRequest(e)),e}}async executeEarFlow(e){const t=e.correlationId,r=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await yS(kE,sk,this.logger,this.performanceClient,t)(),n={...e,earJwk:i};return this.browserStorage.cacheAuthorizeRequest(n),(await YA(document,this.config,r,n,this.logger,this.performanceClient)).submit(),new uO((e,t)=>{setTimeout(()=>{t(YT(WT,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const t=e.correlationId,r=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await JA(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new uO((e,t)=>{setTimeout(()=>{t(YT(WT,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",t,r,i){const n=this.initializeServerTelemetryManager(865);try{const[o,s]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"==typeof window||void 0===window.performance||"function"!=typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return t?.type}()?i.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=this.browserStorage.getTemporaryCache(Dk,!0)||Xy.EMPTY_STRING;if(vw(a)===vw(window.location.href)&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(a),await this.handleResponse(o,t,r,n);if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,t,r,n);if(!FE()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Bk,s,!0);const e={apiId:865,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let i=!0;if(a&&"null"!==a)this.logger.verbose(`Navigating to loginRequestUrl: ${a}`),i=await this.navigationClient.navigateInternal(a,e);else{const t=function(){const e=new bw(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();this.browserStorage.setTemporaryCache(Dk,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),i=await this.navigationClient.navigateInternal(t,e)}if(!i)return await this.handleResponse(o,t,r,n)}return null}catch(e){throw e instanceof M_&&(e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e)),e}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===f_?window.location.search:window.location.hash);let r=fw(t);if(r){try{!function(e,t,r){if(!e.state)throw YT(tT);const i=function(e,t){if(!t)return null;try{return xA.parseRequestState(e,t).libraryState.meta}catch(e){throw Ox(V_)}}(t,e.state);if(!i)throw YT(iT);if(i.interactionType!==r)throw YT(nT)}(r,this.browserCrypto,Gk.Redirect)}catch(e){return e instanceof M_&&this.logger.error(`Interaction type validation failed due to ${e.errorCode}: ${e.errorMessage}`),[null,""]}return zE(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const i=this.browserStorage.getTemporaryCache(Bk,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Bk)),i&&(r=fw(i),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,i]):[null,""]}async handleResponse(e,t,r,i){if(!e.state)throw YT(tT);if(e.ear_jwe){const r=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return yS(eO,bC,this.logger,this.performanceClient,t.correlationId)(t,e,qk,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const n=await yS(this.createAuthCodeClient.bind(this),mC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority});return yS(QA,_C,this.logger,this.performanceClient,t.correlationId)(t,e,r,qk,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:qk,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=t||this.config.auth.onRedirectNavigate;return"function"==typeof i?(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==i(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,r)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,r))}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),YT(Qk)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(961);try{this.eventHandler.emitEvent(kI,Gk.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);const i={apiId:961,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},n=await yS(this.createAuthCodeClient.bind(this),mC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(n.authority.protocolMode===O_)try{n.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId)return void this.eventHandler.emitEvent(TI,Gk.Redirect,t)}const o=n.getLogoutUri(t);if(this.eventHandler.emitEvent(TI,Gk.Redirect,t),!e||"function"!=typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Pk),void await this.navigationClient.navigateExternal(o,i);if(!1!==e.onRedirectNavigate(o))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Pk),void await this.navigationClient.navigateExternal(o,i);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(e){throw e instanceof M_&&(e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e)),this.eventHandler.emitEvent(EI,Gk.Redirect,null,e),this.eventHandler.emitEvent(SI,Gk.Redirect),e}this.eventHandler.emitEvent(SI,Gk.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return bw.getAbsoluteUrl(t,jE())}}var mO=r(64583).Promise;async function pO(e,t,r,i,n){if(t.addQueueMeasurement(lC,i),!e)throw r.info("Navigate url is empty"),YT(Qk);return n?yS(vO,uC,r,t,i)(e,n,t,i):bS(bO,dC,r,t,i)(e)}async function hO(e,t,r,i,n){const o=yO();if(!o.contentDocument)throw"No document associated with iframe!";return(await JA(o.contentDocument,e,t,r,i,n)).submit(),o}async function fO(e,t,r,i,n){const o=yO();if(!o.contentDocument)throw"No document associated with iframe!";return(await YA(o.contentDocument,e,t,r,i,n)).submit(),o}async function gO(e,t,r,i,n,o,s){return i.addQueueMeasurement(cC,o),new mO((i,o)=>{t<1e4&&n.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (10000ms). This may result in timeouts.`);const a=window.setTimeout(()=>{window.clearInterval(l),o(YT(uT))},t),l=window.setInterval(()=>{let t="";const r=e.contentWindow;try{t=r?r.location.href:""}catch(e){}if(!t||"about:blank"===t)return;let n="";r&&(n=s===f_?r.location.search:r.location.hash),window.clearTimeout(a),window.clearInterval(l),i(n)},r)}).finally(()=>{bS(_O,UC,n,i,o)(e)})}function vO(e,t,r,i){return r.addQueueMeasurement(uC,i),new mO((r,i)=>{const n=yO();window.setTimeout(()=>{n?(n.src=e,r(n)):i("Unable to load iframe")},t)})}function bO(e){const t=yO();return t.src=e,t}function yO(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function _O(e){document.body===e.parentNode&&document.body.removeChild(e)}var xO=r(64583).Promise;class wO extends PA{constructor(e,t,r,i,n,o,s,a,l,c,u){super(e,t,r,i,n,o,a,c,u),this.apiId=s,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(jw,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==p_&&"no_session"!==t.prompt&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${p_}`),t.prompt=p_):t.prompt=p_;const r=await yS(this.initializeAuthorizationRequest.bind(this),hC,this.logger,this.performanceClient,e.correlationId)(t,Gk.Silent);return r.platformBroker=aO(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),WE(r.authority),this.config.auth.protocolMode===N_?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t;const r=this.initializeServerTelemetryManager(this.apiId);try{return t=await yS(this.createAuthCodeClient.bind(this),mC,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await yS(this.silentTokenHelper.bind(this),aC,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(i){if(i instanceof M_&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),!(t&&i instanceof M_&&i.errorCode===wk))throw i;return this.performanceClient.addFields({retryError:i.errorCode},this.correlationId),await yS(this.silentTokenHelper.bind(this),aC,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,r=await yS(this.getDiscoveredAuthority.bind(this),Uw,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await yS(kE,sk,this.logger,this.performanceClient,t)(),n={...e,earJwk:i},o=await yS(fO,lC,this.logger,this.performanceClient,t)(this.config,r,n,this.logger,this.performanceClient),s=this.config.auth.OIDCOptions.serverResponseType,a=await yS(gO,cC,this.logger,this.performanceClient,t)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,s),l=bS(DA,IC,this.logger,this.performanceClient,t)(a,s,this.logger);return yS(eO,bC,this.logger,this.performanceClient,t)(n,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return xO.reject(YT(fT))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(aC,r);const i=await yS(tO,YC,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),n={...t,codeChallenge:i.challenge};let o;if(t.httpMethod===Zy)o=await yS(hO,lC,this.logger,this.performanceClient,r)(this.config,e.authority,n,this.logger,this.performanceClient);else{const t=await yS($A,fC,this.logger,this.performanceClient,r)(this.config,e.authority,n,this.logger,this.performanceClient);o=await yS(pO,lC,this.logger,this.performanceClient,r)(t,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const s=this.config.auth.OIDCOptions.serverResponseType,a=await yS(gO,cC,this.logger,this.performanceClient,r)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,s),l=bS(DA,IC,this.logger,this.performanceClient,r)(a,s,this.logger);return yS(QA,_C,this.logger,this.performanceClient,r)(t,l,i.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class CO extends _A{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Yw,e.correlationId);const t=xS(),r=await yS(this.executeTokenRequest.bind(this),$w,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=r.headers?.[n_],n=new kA(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return n.validateTokenResponse(r.body),yS(n.handleServerTokenResponse.bind(n),SC,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw ow(Hx);if(this.performanceClient?.addQueueMeasurement(Xw,e.correlationId),!e.account)throw Ox(lx);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await yS(this.acquireTokenWithCachedRefreshToken.bind(this),Jw,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const r=t instanceof VS&&t.errorCode===zS,i=t instanceof bA&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError;if(r||i)return yS(this.acquireTokenWithCachedRefreshToken.bind(this),Jw,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return yS(this.acquireTokenWithCachedRefreshToken.bind(this),Jw,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Jw,e.correlationId);const r=bS(this.cacheManager.getRefreshToken.bind(this.cacheManager),WC,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw $S(zS);if(r.expiresOn&&kS(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),$S(jS);const i={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||E_.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:PI}};try{return await yS(this.acquireToken.bind(this),Yw,this.logger,this.performanceClient,e.correlationId)(i)}catch(t){if(t instanceof VS&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),t.subError===qS)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const t=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement($w,e.correlationId);const r=this.createTokenQueryParameters(e),i=bw.appendQueryString(t.tokenEndpoint,r),n=await yS(this.createTokenRequestBody.bind(this),Zw,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),s=QS(this.config.authOptions.clientId,e);return yS(this.executePostToTokenEndpoint.bind(this),Vw,this.logger,this.performanceClient,e.correlationId)(i,n,o,s,e.correlationId,Vw)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Zw,e.correlationId);const t=new Map;if(KI(t,e.embeddedClientId||e.tokenBodyParameters?.[BI]||this.config.authOptions.clientId),e.redirectUri&&$I(t,e.redirectUri),VI(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),lA(t,"refresh_token"),cA(t),tA(t,this.config.libraryInfo),rA(t,this.config.telemetry.application),fA(t),this.serverTelemetryManager&&!yk(this.config)&&hA(t,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(t,e.refreshToken),this.config.clientCredentials.clientSecret&&oA(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;sA(t,await EA(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),aA(t,r.assertionType)}if(e.authenticationScheme===E_.POP){const r=new wA(this.cryptoUtils,this.performanceClient);let i;i=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await yS(r.generateCnf.bind(r),TC,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,mA(t,i)}else if(e.authenticationScheme===E_.SSH){if(!e.sshJwk)throw ow($x);pA(t,e.sshJwk)}if((!sw.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&QI(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case PI:try{XI(t,JS(e.ccsCredential.credential))}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case DI:JI(t,e.ccsCredential.credential)}return e.embeddedClientId&&gA(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&dA(t,e.tokenBodyParameters),GI(t,e.correlationId,this.performanceClient),gw(t)}}var kO=r(64583).Promise;class TO extends PA{async acquireToken(e){this.performanceClient.addQueueMeasurement(Hw,e.correlationId);const t=await yS(OA,iC,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const i=this.initializeServerTelemetryManager(61),n=await this.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return yS(n.acquireTokenByRefreshToken.bind(n),Xw,this.logger,this.performanceClient,e.correlationId)(r).catch(e=>{throw e.setCorrelationId(this.correlationId),i.cacheFailedRequest(e),e})}logout(){return kO.reject(YT(fT))}async createRefreshTokenClient(e){const t=await yS(this.getClientConfiguration.bind(this),pC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new CO(t,this.performanceClient)}}class EO{constructor(e,t,r,i){this.isBrowserEnvironment="undefined"!=typeof window,this.config=e,this.storage=t,this.logger=r,this.cryptoObj=i}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw YT(wT);const i=e.correlationId||wE(),n=t.id_token?dw(t.id_token,aE):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new MS(MS.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||wE()):void 0,a=await this.loadAccount(e,r.clientInfo||t.client_info||"",i,n,s),l=await this.loadIdToken(t,a.homeAccountId,a.environment,a.realm,i),c=await this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,r,i),u=await this.loadRefreshToken(t,a.homeAccountId,a.environment,i);return this.generateAuthenticationResult(e,{account:a,idToken:l,accessToken:c,refreshToken:u},n,s)}async loadAccount(e,t,r,i,n){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=ZS.createFromAccountInfo(e.account);return await this.storage.setAccount(t,r),t}if(!n||!t&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),YT(IT);const o=ZS.generateHomeAccountId(t,n.authorityType,this.logger,this.cryptoObj,i),s=i?.tid,a=TA(this.storage,n,o,aE,r,i,t,n.hostnameAndPort,s,void 0,void 0,this.logger);return await this.storage.setAccount(a,r),a}async loadIdToken(e,t,r,i,n){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=ES(t,r,e.id_token,this.config.auth.clientId,i);return await this.storage.setIdTokenCredential(o,n),o}async loadAccessToken(e,t,r,i,n,o,s){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(t.scope||e.scopes&&e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const a=t.scope?aw.fromString(t.scope):new aw(e.scopes),l=o.expiresOn||t.expires_in+xS(),c=o.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+xS(),u=SS(r,i,t.access_token,this.config.auth.clientId,n,a.printScopes(),l,c,aE);return await this.storage.setAccessTokenCredential(u,s),u}async loadRefreshToken(e,t,r,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const n=IS(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(n,i),n}generateAuthenticationResult(e,t,r,i){let n,o="",s=[],a=null;t?.accessToken&&(o=t.accessToken.secret,s=aw.fromString(t.accessToken.target).asArray(),a=CS(t.accessToken.expiresOn),n=CS(t.accessToken.extendedExpiresOn));const l=t.account;return{authority:i?i.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:o,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:n,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class SO extends SA{constructor(e){super(e),this.includeRedirectUri=!1}}var IO=r(64583).Promise;class AO extends PA{constructor(e,t,r,i,n,o,s,a,l,c){super(e,t,r,i,n,o,a,l,c),this.apiId=s}async acquireToken(e){if(!e.code)throw YT(OT);const t=await yS(this.initializeAuthorizationRequest.bind(this),hC,this.logger,this.performanceClient,e.correlationId)(e,Gk.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const i={...t,code:e.code},n=await yS(this.getClientConfiguration.bind(this),pC,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),o=new SO(n);this.logger.verbose("Auth code client created");const s=new LA(o,this.browserStorage,i,this.logger,this.performanceClient);return await yS(s.handleCodeResponseFromServer.bind(s),gC,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(e){throw e instanceof M_&&(e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e)),e}}logout(){return IO.reject(YT(fT))}}var OO=r(64583).Promise;function NO(e){const t=e?.idTokenClaims;return t?.tfp||t?.acr?"B2C":t?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===t?.tid?"MSA":"AAD":void 0}function RO(e,t){try{UE(e)}catch(e){throw t.end({success:!1},e),e}}class PO{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new gS(this.logger,this.performanceClient):Nx,this.eventHandler=new RI(this.logger),this.browserStorage=this.isBrowserEnvironment?new OI(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let r;if(t)try{r=JSON.parse(t)}catch(e){throw ow(Wx)}return{canonicalAuthority:e.authority?LS(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:r}}(this.config.auth)):((e,t,r,i)=>new OI(e,{cacheLocation:Nk,cacheRetentionDays:5,temporaryCacheLocation:Nk,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Nx,t,r,i))(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const t={cacheLocation:Nk,cacheRetentionDays:5,temporaryCacheLocation:Nk,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new OI(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new EO(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new PO(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(dI);const r=e?.correlationId||this.getRequestCorrelationId(),i=this.config.system.allowPlatformBroker,n=this.performanceClient.startMeasurement(oC,r);if(this.eventHandler.emitEvent("msal:initializeStart"),!t)try{this.logMultipleInstances(n)}catch{}if(await yS(this.browserStorage.initialize.bind(this.browserStorage),sC,this.logger,this.performanceClient,r)(r),i)try{this.platformAuthProvider=await async function(e,t,r,i){e.trace("getPlatformAuthProvider called",r);const n=function(){let e;try{return e=window[Ok],"true"===e?.getItem(XE)}catch(e){return!1}}();let o;e.trace("Has client allowed platform auth via DOM API: "+n);try{n&&(o=await sO.createProvider(e,t,r)),o||(e.trace("Platform auth via DOM API not available, checking for extension"),o=await oO.createProvider(e,i||2e3,t))}catch(t){e.trace("Platform auth not available",t)}return o}(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(e){this.logger.verbose(e)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),bS(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),GC,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(dI),n.end({allowPlatformBroker:i,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),qE(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return void 0===r?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const t=this.browserStorage.getInteractionInProgress()?.type;if(t===Pk)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),OO.resolve(null);const r=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),n=i&&this.platformAuthProvider&&!e;let o,s;this.eventHandler.emitEvent("msal:handleRedirectStart",Gk.Redirect);try{if(n&&this.platformAuthProvider){o=this.performanceClient.startMeasurement(Mw,i?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),o.add({isPlatformBrokerRequest:!0});const e=new VA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,865,this.performanceClient,this.platformAuthProvider,i.accountId,this.nativeInternalStorage,i.correlationId);s=yS(e.handleRedirectPromise.bind(e),HC,this.logger,this.performanceClient,o.event.correlationId)(this.performanceClient,o.event.correlationId)}else{const[t,r]=this.browserStorage.getCachedRequest(),i=t.correlationId;o=this.performanceClient.startMeasurement(Mw,i),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const n=this.createRedirectClient(i);s=yS(n.handleRedirectPromise.bind(n),jC,this.logger,this.performanceClient,o.event.correlationId)(e,t,r,o)}}catch(e){throw this.browserStorage.resetRequestCache(),e}return s.then(e=>(e?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(gI,Gk.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(yI,Gk.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),o.end({success:!0,accountType:NO(e.account)})):o.event.errorCode?o.end({success:!1}):o.discard(),this.eventHandler.emitEvent(wI,Gk.Redirect),e)).catch(e=>{this.browserStorage.resetRequestCache();const t=e;throw r.length>0?this.eventHandler.emitEvent(_I,Gk.Redirect,null,t):this.eventHandler.emitEvent(vI,Gk.Redirect,null,t),this.eventHandler.emitEvent(wI,Gk.Redirect),o.end({success:!1},t),e})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement("acquireTokenPreRedirect",t);r.add({accountType:NO(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=e=>{const t="function"==typeof i?i(e):void 0;return r.add({navigateCallbackResult:!1!==t}),r.event=r.end({success:!0})||r.event,t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const i="function"==typeof e?e(t):void 0;return r.add({navigateCallbackResult:!1!==i}),r.event=r.end({success:!0})||r.event,i}}const n=this.getAllAccounts().length>0;try{let i;return GE(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Rk),n?this.eventHandler.emitEvent(bI,Gk.Redirect,e):this.eventHandler.emitEvent(fI,Gk.Redirect,e),i=this.platformAuthProvider&&this.canUsePlatformBroker(e)?new VA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,qk,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(i=>{if(r.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof jA&&HA(i))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(i instanceof VS)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw i}):this.createRedirectClient(t).acquireToken(e),await i}catch(e){throw this.browserStorage.resetRequestCache(),2===r.event.status?this.performanceClient.startMeasurement(Mw,t).end({success:!1},e):r.end({success:!1},e),n?this.eventHandler.emitEvent(_I,Gk.Redirect,null,e):this.eventHandler.emitEvent(vI,Gk.Redirect,null,e),e}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(Bw,t);r.add({scenarioId:e.scenarioId,accountType:NO(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),RO(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,Rk)}catch(e){return OO.reject(e)}const i=this.getAllAccounts();let n;i.length>0?this.eventHandler.emitEvent(bI,Gk.Popup,e):this.eventHandler.emitEvent(fI,Gk.Popup,e);const o=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),n=this.acquireTokenNative({...e,correlationId:t},Uk).then(e=>(r.end({success:!0,accountType:NO(e.account)}),e)).catch(i=>{if(r.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof jA&&HA(i))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,o);if(i instanceof VS)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,o);throw i})):n=this.createPopupClient(t).acquireToken(e,o),n.then(e=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent(gI,Gk.Popup,e):this.eventHandler.emitEvent(yI,Gk.Popup,e),r.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:NO(e.account)}),e)).catch(e=>(i.length>0?this.eventHandler.emitEvent(_I,Gk.Popup,null,e):this.eventHandler.emitEvent(vI,Gk.Popup,null,e),r.end({success:!1},e),OO.reject(e))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};let i;return this.ssoSilentMeasurement=this.performanceClient.startMeasurement(qw,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:NO(e.account)}),RO(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent("msal:ssoSilentStart",Gk.Silent,r),this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(r,863).catch(e=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:e.name,brokerErrorCode:e.errorCode}),e instanceof jA&&HA(e))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw e})):i=this.createSilentIframeClient(r.correlationId).acquireToken(r),i.then(e=>(this.eventHandler.emitEvent("msal:ssoSilentSuccess",Gk.Silent,e),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:NO(e.account)}),e)).catch(e=>{throw this.eventHandler.emitEvent("msal:ssoSilentFailure",Gk.Silent,null,e),this.ssoSilentMeasurement?.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(Nw,t);RO(this.initialized,r),this.eventHandler.emitEvent("msal:acquireTokenByCodeStart",Gk.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw YT(RT);if(e.code){const i=e.code;let n=this.hybridAuthCodeResponses.get(i);return n?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),n=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(e=>(this.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",Gk.Silent,e),this.hybridAuthCodeResponses.delete(i),r.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:NO(e.account)}),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(i),this.eventHandler.emitEvent(xI,Gk.Silent,null,e),r.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(i,n)),await n}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const i=await this.acquireTokenNative({...e,correlationId:t},866,e.nativeAccountId).catch(e=>{throw e instanceof jA&&HA(e)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:e.name,brokerErrorCode:e.errorCode}),e});return r.end({accountType:NO(i.account),success:!0}),i}throw YT(DT)}throw YT(NT)}catch(e){throw this.eventHandler.emitEvent(xI,Gk.Silent,null,e),r.end({success:!1},e),e}}async acquireTokenByCodeAsync(e){this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(FC,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const t=this.createSilentAuthCodeClient(e.correlationId);return await t.acquireToken(e).then(e=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:e.fromCache}),e)).catch(e=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(Qw,e.correlationId),t){case 0:case 1:case 2:const t=this.createSilentCacheClient(e.correlationId);return yS(t.acquireToken.bind(t),Fw,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ox(gx)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(Rw,e.correlationId),t){case 0:case 2:case 3:case 4:const t=this.createSilentRefreshClient(e.correlationId);return yS(t.acquireToken.bind(t),Hw,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ox(gx)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(rC,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return yS(t.acquireToken.bind(t),jw,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return GE(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Pk),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return UE(this.initialized),this.browserStorage.setInteractionInProgress(!0,Pk),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(e){return OO.reject(e)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){const t=this.getRequestCorrelationId();return function(e,t,r,i,n){return e.verbose("getAllAccounts called"),r?t.getAllAccounts(n||{},i):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function(e,t,r,i){const n=r.getAccountInfoFilteredBy(e,i);return n?(t.verbose("getAccount: Account matching provided filter found, returning"),n):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function(e,t,r,i){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const n=r.getAccountInfoFilteredBy({username:e},i);return n?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),n):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function(e,t,r,i){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const n=r.getAccountInfoFilteredBy({homeAccountId:e},i);return n?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),n):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function(e,t,r,i){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const n=r.getAccountInfoFilteredBy({localAccountId:e},i);return n?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),n):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function(e,t,r){t.setActiveAccount(e,r)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function(e,t){return e.getActiveAccount(t)}(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=ZS.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,i){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw YT(LT);return new VA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,i)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!aO(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case p_:case m_:case d_:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new cO(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new dO(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new wO(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new GA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new TO(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new AO(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return HE(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===Ak?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===Ak?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?wE():Xy.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||Wk})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||Wk})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(Pw,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),RO(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);const i=e.account||this.getActiveAccount();if(!i)throw YT(gT);return r.add({accountType:NO(i)}),this.acquireTokenSilentDeduped(e,i,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length}),{...i,state:e.state,correlationId:t})).catch(e=>{throw e instanceof M_&&e.setCorrelationId(t),r.end({success:!1},e),e})}async acquireTokenSilentDeduped(e,t,r){const i=QS(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:r},t.homeAccountId),n=JSON.stringify(i),o=this.activeSilentTokenRequests.get(n);if(void 0===o){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const i=yS(this.acquireTokenSilentAsync.bind(this),Dw,this.logger,this.performanceClient,r)({...e,correlationId:r},t);return this.activeSilentTokenRequests.set(n,i),i.finally(()=>{this.activeSilentTokenRequests.delete(n)})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),o}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(Dw,e.correlationId),this.eventHandler.emitEvent(bI,Gk.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const i=await yS(NA,nC,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),n=e.cacheLookupPolicy||0;return this.acquireTokenSilentNoIframe(i,n).catch(async e=>{const t=function(e,t){const r=!(e instanceof VS&&e.subError!==qS),i=e.errorCode===wk||e.errorCode===gx,n=r&&i||e.errorCode===zS||e.errorCode===jS,o=$k.includes(t);return n&&o}(e,n);if(t){if(this.activeIframeRequest){if(5!==n){const[t,r]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${r}`,i.correlationId);const o=this.performanceClient.startMeasurement("awaitConcurrentIframe",i.correlationId);o.add({awaitIframeCorrelationId:r});const s=await t;if(o.end({success:s}),s)return this.logger.verbose(`Parallel iframe request with correlationId: ${r} succeeded. Retrying cache and/or RT redemption`,i.correlationId),this.acquireTokenSilentNoIframe(i,n);throw this.logger.info(`Iframe request with correlationId: ${r} failed. Interaction is required.`),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),yS(this.acquireTokenBySilentIframe.bind(this),rC,this.logger,this.performanceClient,i.correlationId)(i)}{let e;return this.activeIframeRequest=[new OO(t=>{e=t}),i.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),yS(this.acquireTokenBySilentIframe.bind(this),rC,this.logger,this.performanceClient,i.correlationId)(i).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e}).then(t=>(this.eventHandler.emitEvent(yI,Gk.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent(_I,Gk.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return aO(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,61,e.account.nativeAccountId,t).catch(async t=>{if(this.performanceClient.addFields({brokerErrorName:t.name,brokerErrorCode:t.errorCode},e.correlationId),t instanceof jA&&HA(t))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,Ox(gx);throw t})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),1===t&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),yS(this.acquireTokenFromCache.bind(this),Qw,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(1===t)throw r;return this.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",Gk.Silent,e),yS(this.acquireTokenByRefreshToken.bind(this),Rw,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await yS(tO,YC,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),OO.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose((t?"Found":"Did not find")+" pre-generated PKCE codes"),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;window&&(window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,r){const i=window.msal?.clientIds||[],n=i.length,o=i.filter(t=>t===e).length;o>1&&r.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:n,sameClientIdInstanceCount:o})}(t,e,this.logger))}}r(64583).Promise;class DO{static async createPublicClientApplication(e){const t=await async function(e){const t=new nS(e);return await t.initialize(),PO.createController(t,void 0)}(e);return new DO(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new PO(new nS(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}var BO=r(64583).Promise,MO=r(64583).Promise,LO=function(e,t,r,i){return new(r||(r=MO))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let zO=null;function FO(){return LO(this,void 0,void 0,function*(){if(zO)return zO;const e=yield function(){return e=this,t=void 0,i=function*(){const e=new URL("config.json",window.location.href).toString(),t=yield fetch(e,{cache:"no-store"});if(!t.ok)throw new Error(`config.json not found: ${t.status}`);const r=yield t.json();if(!r.azureClientId)throw new Error("Invalid config: missing azureClientId");return r},new((r=void 0)||(r=BO))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())});var e,t,r,i}();if(!e.azureClientId)throw new Error("Missing azureClientId in config.json");return zO=new DO({auth:{clientId:e.azureClientId,authority:e.authority,redirectUri:e.redirectUri},cache:{cacheLocation:"sessionStorage"}}),yield zO.initialize(),zO})}function jO(){return LO(this,void 0,void 0,function*(){const e=yield FO();return e.getAllAccounts().length||(yield function(){return LO(this,void 0,void 0,function*(){const e=yield FO();e.getAllAccounts().length||(yield e.loginPopup({scopes:["User.Read"]}))})}()),(yield e.acquireTokenSilent({scopes:["User.Read"]})).accessToken})}var HO=r(64583).Promise;function qO(e){return t=this,r=arguments,n=function*(e,t={}){const r=yield jO();return fetch(`https://graph.microsoft.com/v1.0${e}`,Object.assign(Object.assign({},t),{headers:Object.assign({Authorization:`Bearer ${r}`,"Content-Type":"application/json"},t.headers||{})}))},new((i=void 0)||(i=HO))(function(e,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i(function(e){e(r)})).then(s,a)}l((n=n.apply(t,r||[])).next())});var t,r,i,n}var UO=r(64583).Promise,GO=function(e,t,r,i){return new(r||(r=UO))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};function WO(){return GO(this,void 0,void 0,function*(){const e=yield new UO((e,t)=>{Office.context.document.getFilePropertiesAsync(r=>{if(r.status!==Office.AsyncResultStatus.Succeeded)return t(new Error("file props"));e(r.value.url)})}),t="u!"+btoa(e.replace(/^https?:\/\//,"")),r=(yield jO(),yield qO(`/shares/${encodeURIComponent(t)}/driveItem`,{method:"GET"}));if(!r.ok)throw new Error(`Graph error: ${r.status}`);const i=yield r.json();return{driveId:i.parentReference.driveId,parentId:i.parentReference.id}})}var VO=r(64583).Promise,KO=function(e,t,r,i){return new(r||(r=VO))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};class $O{static loadFromFolder(e){return KO(this,void 0,void 0,function*(){const t=yield function(e){return GO(this,void 0,void 0,function*(){var t;const{driveId:r,parentId:i}=yield WO(),n=(yield jO(),yield qO(`/drives/${r}/items/${i}/children?$filter=name eq '${e}'`,{method:"GET"}));if(!n.ok)throw new Error(`Graph error: ${n.status}`);const o=yield n.json();if(!(null===(t=o.value)||void 0===t?void 0:t.length))return null;const s=o.value[0].id,a=yield qO(`/drives/${r}/items/${s}/content`,{method:"GET"});if(!a.ok)throw new Error(`Graph error: ${a.status}`);return a.text()})}(e);if(!t)return{imported:0};const r=function(e){var t;const r=new My({ignoreAttributes:!1,attributeNamePrefix:"@_"}).parse(e),i=null===(t=null==r?void 0:r["b:Sources"])||void 0===t?void 0:t["b:Source"];return i?(Array.isArray(i)?i:[i]).map(e=>function(e){const t=e["b:SourceType"],r=e["b:Title"]||"",i=e["b:Year"]?Number(e["b:Year"]):void 0,n=function(e){var t,r,i;const n=null===(i=null===(r=null===(t=null==e?void 0:e["b:Author"])||void 0===t?void 0:t["b:Author"])||void 0===r?void 0:r["b:NameList"])||void 0===i?void 0:i["b:Person"];return(Array.isArray(n)?n:n?[n]:[]).map(e=>({family:e["b:Last"],given:e["b:First"]}))}(e),o={title:r,author:n,issued:i?{"date-parts":[[i]]}:void 0};switch(t){case"JournalArticle":return Object.assign(Object.assign({},o),{type:"article-journal","container-title":e["b:JournalName"],page:e["b:Pages"],DOI:e["b:DOI"]});case"Book":return Object.assign(Object.assign({},o),{type:"book",publisher:e["b:Publisher"],ISBN:e["b:ISBN"]});case"BookSection":return Object.assign(Object.assign({},o),{type:"chapter","container-title":e["b:BookTitle"],page:e["b:Pages"],editor:Yy(e)});case"ConferenceProceedings":return Object.assign(Object.assign({},o),{type:"paper-conference","container-title":e["b:ConferenceName"],page:e["b:Pages"]});default:return Object.assign(Object.assign({},o),{type:"article"})}}(e)):[]}(t),i=yield Bl.loadLibrary(),n=new Map(i.map(e=>[Sb.stableKey(e),e]));for(const e of r)n.set(Sb.stableKey(e),e);return yield Bl.saveLibrary([...n.values()]),{imported:r.length}})}static saveToFolder(e){return KO(this,void 0,void 0,function*(){const t=function(e){const t={"b:Sources":{"@_xmlns:b":"http://schemas.openxmlformats.org/officeDocument/2006/bibliography","b:Source":e.map($y)}};return`<?xml version="1.0" encoding="utf-8"?>\n${new Gy({ignoreAttributes:!1,attributeNamePrefix:"@_",suppressEmptyNode:!0}).build(t)}`}(yield Bl.loadLibrary());yield function(e,t){return GO(this,void 0,void 0,function*(){const{driveId:r,parentId:i}=yield WO(),n=(yield jO(),yield qO(`/drives/${r}/items/${i}:/${e}:/content`,{method:"PUT",headers:{"Content-Type":"text/xml"},body:t}));if(!n.ok)throw new Error(`Graph error: ${n.status}`)})}(e,t)})}}function YO(e,t="info"){const r=document.createElement("div");r.className=`msocj-toast ${t}`,r.textContent=e,Object.assign(r.style,{position:"fixed",right:"16px",bottom:"16px",background:"error"===t?"#c62828":"success"===t?"#2e7d32":"#424242",color:"white",padding:"10px 14px",borderRadius:"8px",zIndex:99999,boxShadow:"0 4px 12px rgba(0,0,0,0.25)"}),document.body.appendChild(r),setTimeout(()=>r.remove(),3e3)}var JO=r(64583).Promise,XO=function(e,t,r,i){return new(r||(r=JO))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};const ZO=[{id:"jis-like",name:"JIS（日本語・既定）",file:"/styles/jis-like.csl"},{id:"apa",name:"APA 7th",file:"/styles/apa.csl"},{id:"mla",name:"MLA 9th",file:"/styles/mla.csl"},{id:"chicago-author-date",name:"Chicago (Author-Date)",file:"/styles/chicago-author-date.csl"},{id:"chicago-notes-bibliography",name:"Chicago (Notes & Bib.)",file:"/styles/chicago-notes-bibliography.csl"},{id:"ieee",name:"IEEE",file:"/styles/ieee.csl"},{id:"vancouver",name:"Vancouver (ICMJE)",file:"/styles/vancouver.csl"},{id:"ama",name:"AMA",file:"/styles/ama.csl"},{id:"harvard",name:"Harvard",file:"/styles/harvard.csl"}],QO=Kt({bar:{display:"grid",gridTemplateColumns:"auto 1fr auto",alignItems:"center",gap:"8px",padding:"8px 12px",width:"100%",maxWidth:"100%",boxSizing:"border-box"},wrap:{"@media (max-width: 480px)":{gridTemplateColumns:"1fr",gridAutoRows:"auto"}},grow:{width:"100%",maxWidth:"100%"},title:{whiteSpace:"nowrap"},right:{display:"flex",gap:"8px"}});var eN=({onGlobalSearch:e,onStyleChange:t,onSync:r})=>{const i=QO(),[n,o]=w.useState(""),[s,a]=w.useState("jis-like");return w.createElement("div",{className:`${i.bar} ${i.wrap}`},w.createElement("div",{className:i.title},"MS Office",w.createElement("br",null),"Citation JP"),w.createElement(no,{className:i.grow,placeholder:"検索 (著者/タイトル/DOI)",value:n,onChange:e=>o(e.target.value),onKeyDown:t=>{var r;"Enter"===t.key&&(t.ctrlKey?e(n):(r=n,XO(void 0,void 0,void 0,function*(){try{const e=(yield Bl.loadLibrary()).filter(e=>{var t,i,n,o,s;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(o=null===(n=null===(i=e.author)||void 0===i?void 0:i[0])||void 0===n?void 0:n.family)||void 0===o?void 0:o.toLowerCase().includes(r.toLowerCase()))||(null===(s=e.DOI)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()))});if(0===e.length)return void YO("一致する文献が見つかりません","info");const t=e[0].id||e[0].DOI||"unknown";yield Bb.insertAtSelection([t]),YO("引用を挿入しました","success")}catch(e){console.error(e),YO("挿入に失敗しました","error")}})))},contentBefore:w.createElement(Nl,null)}),w.createElement("div",{className:i.right},w.createElement(gl,{value:s,onOptionSelect:(e,r)=>{return i=r.optionValue,XO(void 0,void 0,void 0,function*(){a(i);const e=ZO.find(e=>e.id===i);if(e)try{yield Rb.initOnce(e.file),YO(`${e.name}スタイルに切り替えました`,"success")}catch(e){console.error(e),YO("スタイル切り替えに失敗しました","error")}t(i)});var i}},ZO.map(e=>w.createElement(bl,{key:e.id,value:e.id},e.name))),w.createElement(Ol,{icon:w.createElement(Rl,null),onClick:()=>XO(void 0,void 0,void 0,function*(){var e;try{const t=yield Bl.loadSettings();if(!(null===(e=null==t?void 0:t.sharedLibrary)||void 0===e?void 0:e.enabled))return void YO("共有ライブラリが有効になっていません","info");yield $O.saveToFolder(t.sharedLibrary.filename),YO("同期しました","success")}catch(e){console.error(e),YO("同期に失敗しました","error")}r()})},"同期")))},tN=(r(64583).Promise,function(e,t){return tN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},tN(e,t)});function rN(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}tN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var iN=function(){return iN=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},iN.apply(this,arguments)};function nN(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}function oN(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function sN(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var aN,lN="__global__",cN="__shadow_dom_stylesheet__",uN={stylesheetKey:lN,inShadow:!1,window:void 0,__isShadowConfig__:!0},dN=function(e){return!(!e||!function(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}(e))&&!0===e.__isShadowConfig__};function mN(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=[],n=[],o=e;return function e(t){for(var r=0,s=t;r<s.length;r++){var a=s[r];if(a&&!dN(a))if("string"==typeof a)if(a.indexOf(" ")>=0)e(a.split(" "));else{var l=o.argsFromClassName(a);l?e(l):-1===i.indexOf(a)&&i.push(a)}else Array.isArray(a)?e(a):"object"==typeof a&&n.push(a)}}(t),{classes:i,objects:n}}function pN(e){aN!==e&&(aN=e)}function hN(){return void 0===aN&&(aN="undefined"!=typeof document&&!!document.documentElement&&"rtl"===document.documentElement.getAttribute("dir")),aN}function fN(){return{rtl:hN(),shadowConfig:uN}}aN=hN();var gN,vN="__stylesheet__",bN="undefined"!=typeof navigator&&/rv:11.0/.test(navigator.userAgent),yN={};try{yN=window||{}}catch(EN){}var _N,xN=function(){function e(e,t){var r,i,n,o,s,a;this._rules=[],this._preservedRules=[],this._counter=0,this._keyToClassName={},this._onInsertRuleCallbacks=[],this._onResetCallbacks=[],this._classNameToArgs={},this._config=iN({injectionMode:"undefined"==typeof document?0:1,defaultPrefix:"css",namespace:void 0,cspSettings:void 0},e),this._classNameToArgs=null!==(r=null==t?void 0:t.classNameToArgs)&&void 0!==r?r:this._classNameToArgs,this._counter=null!==(i=null==t?void 0:t.counter)&&void 0!==i?i:this._counter,this._keyToClassName=null!==(o=null!==(n=this._config.classNameCache)&&void 0!==n?n:null==t?void 0:t.keyToClassName)&&void 0!==o?o:this._keyToClassName,this._preservedRules=null!==(s=null==t?void 0:t.preservedRules)&&void 0!==s?s:this._preservedRules,this._rules=null!==(a=null==t?void 0:t.rules)&&void 0!==a?a:this._rules}return e.getInstance=function(t){if(gN=yN[vN],yN[cN])return yN[cN].getInstance(t);if(!gN||gN._lastStyleElement&&gN._lastStyleElement.ownerDocument!==document){var r=(null==yN?void 0:yN.FabricConfig)||{},i=new e(r.mergeStyles,r.serializedStylesheet);gN=i,yN[vN]=i}return gN},e.prototype.serialize=function(){return JSON.stringify({classNameToArgs:this._classNameToArgs,counter:this._counter,keyToClassName:this._keyToClassName,preservedRules:this._preservedRules,rules:this._rules})},e.prototype.setConfig=function(e){this._config=iN(iN({},this._config),e)},e.prototype.onReset=function(e){var t=this;return this._onResetCallbacks.push(e),function(){t._onResetCallbacks=t._onResetCallbacks.filter(function(t){return t!==e})}},e.prototype.onInsertRule=function(e){var t=this;return this._onInsertRuleCallbacks.push(e),function(){t._onInsertRuleCallbacks=t._onInsertRuleCallbacks.filter(function(t){return t!==e})}},e.prototype.getClassName=function(e){var t=this._config.namespace,r=e||this._config.defaultPrefix;return"".concat(t?t+"-":"").concat(r,"-").concat(this._counter++)},e.prototype.cacheClassName=function(e,t,r,i){this._keyToClassName[this._getCacheKey(t)]=e,this._classNameToArgs[e]={args:r,rules:i}},e.prototype.classNameFromKey=function(e){return this._keyToClassName[this._getCacheKey(e)]},e.prototype.getClassNameCache=function(){return this._keyToClassName},e.prototype.argsFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.args},e.prototype.insertedRulesFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.rules},e.prototype.insertRule=function(e,t,r){void 0===r&&(r=lN);var i=this._config.injectionMode,n=0!==i?this._getStyleElement():void 0;if(t&&this._preservedRules.push(e),n)switch(i){case 1:this._insertRuleIntoSheet(n.sheet,e);break;case 2:n.appendChild(document.createTextNode(e))}else this._rules.push(e);this._config.onInsertRule&&this._config.onInsertRule(e),this._onInsertRuleCallbacks.forEach(function(t){return t({key:r,sheet:n?n.sheet:void 0,rule:e})})},e.prototype.getRules=function(e){return(e?this._preservedRules.join(""):"")+this._rules.join("")},e.prototype.reset=function(){this._rules=[],this._counter=0,this._classNameToArgs={},this._keyToClassName={},this._onResetCallbacks.forEach(function(e){return e()})},e.prototype.resetKeys=function(){this._keyToClassName={}},e.prototype._createStyleElement=function(){var e,t=(null===(e=this._config.window)||void 0===e?void 0:e.document)||document,r=t.head,i=t.createElement("style"),n=null;i.setAttribute("data-merge-styles","true");var o=this._config.cspSettings;if(o&&o.nonce&&i.setAttribute("nonce",o.nonce),this._lastStyleElement)n=this._lastStyleElement.nextElementSibling;else{var s=this._findPlaceholderStyleTag();n=s?s.nextElementSibling:r.childNodes[0]}return r.insertBefore(i,r.contains(n)?n:null),this._lastStyleElement=i,i},e.prototype._insertRuleIntoSheet=function(e,t){if(!e)return!1;try{return e.insertRule(t,e.cssRules.length),!0}catch(e){}return!1},e.prototype._getCacheKey=function(e){return e},e.prototype._getStyleElement=function(){var e=this;return this._styleElement||(this._styleElement=this._createStyleElement(),bN||(this._config.window||window).requestAnimationFrame(function(){e._styleElement=void 0})),this._styleElement},e.prototype._findPlaceholderStyleTag=function(){var e=document.head;return e?e.querySelector("style[data-merge-styles]"):null},e}(),wN={};function CN(e,t){var r=e[t];"-"!==r.charAt(0)&&(e[t]=wN[r]=wN[r]||r.replace(/([A-Z])/g,"-$1").toLowerCase())}var kN={"user-select":1};function TN(e,t){var r=function(){var e;if(!_N){var t="undefined"!=typeof document?document:void 0,r="undefined"!=typeof navigator?navigator:void 0,i=null===(e=null==r?void 0:r.userAgent)||void 0===e?void 0:e.toLowerCase();_N=t?{isWebkit:!(!t||!("WebkitAppearance"in t.documentElement.style)),isMoz:!!(i&&i.indexOf("firefox")>-1),isOpera:!!(i&&i.indexOf("opera")>-1),isMs:!(!r||!/rv:11.0/i.test(r.userAgent)&&!/Edge\/\d./i.test(navigator.userAgent))}:{isWebkit:!0,isMoz:!0,isOpera:!0,isMs:!0}}return _N}(),i=e[t];if(kN[i]){var n=e[t+1];kN[i]&&(r.isWebkit&&e.push("-webkit-"+i,n),r.isMoz&&e.push("-moz-"+i,n),r.isMs&&e.push("-ms-"+i,n),r.isOpera&&e.push("-o-"+i,n))}}var EN,SN=["column-count","font-weight","flex","flex-grow","flex-shrink","fill-opacity","opacity","order","z-index","zoom"];function IN(e,t){var r=e[t],i=e[t+1];if("number"==typeof i){var n=SN.indexOf(r)>-1,o=r.indexOf("--")>-1,s=n||o?"":"px";e[t+1]="".concat(i).concat(s)}}var AN="left",ON="right",NN=((EN={})[AN]=ON,EN[ON]=AN,EN),RN={"w-resize":"e-resize","sw-resize":"se-resize","nw-resize":"ne-resize"};function PN(e,t,r){if(e.rtl){var i=t[r];if(!i)return;var n=t[r+1];if("string"==typeof n&&n.indexOf("@noflip")>=0)t[r+1]=n.replace(/\s*(?:\/\*\s*)?\@noflip\b(?:\s*\*\/)?\s*?/g,"");else if(i.indexOf(AN)>=0)t[r]=i.replace(AN,ON);else if(i.indexOf(ON)>=0)t[r]=i.replace(ON,AN);else if(String(n).indexOf(AN)>=0)t[r+1]=n.replace(AN,ON);else if(String(n).indexOf(ON)>=0)t[r+1]=n.replace(ON,AN);else if(NN[i])t[r]=NN[i];else if(RN[n])t[r+1]=RN[n];else switch(i){case"margin":case"padding":t[r+1]=function(e){if("string"==typeof e){var t=e.split(" ");if(4===t.length)return"".concat(t[0]," ").concat(t[3]," ").concat(t[2]," ").concat(t[1])}return e}(n);break;case"box-shadow":t[r+1]=function(e){var t=e.split(" "),r=parseInt(t[0],10);return t[0]=t[0].replace(String(r),String(-1*r)),t.join(" ")}(n)}}}var DN=/\:global\((.+?)\)/g;function BN(e){return e.indexOf(":global(")>=0||0===e.indexOf(":")}function MN(e,t){return e.indexOf(":global(")>=0?e.replace(DN,"$1"):0===e.indexOf(":host(")?e:0===e.indexOf(":")?t+e:e.indexOf("&")<0?t+" "+e:e}function LN(e,t,r,i,n){void 0===t&&(t={__order:[]}),0===r.indexOf("@")?zN([i],t,r=r+"{"+e,n):r.indexOf(",")>-1?function(e){if(!DN.test(e))return e;for(var t=[],r=/\:global\((.+?)\)/g,i=null;i=r.exec(e);)i[1].indexOf(",")>-1&&t.push([i.index,i.index+i[0].length,i[1].split(",").map(function(e){return":global(".concat(e.trim(),")")}).join(", ")]);return t.reverse().reduce(function(e,t){var r=t[0],i=t[1],n=t[2];return e.slice(0,r)+n+e.slice(i)},e)}(r).split(",").map(function(e){return e.trim()}).forEach(function(r){return zN([i],t,MN(r,e),n)}):zN([i],t,MN(r,e),n)}function zN(e,t,r,i){void 0===t&&(t={__order:[]}),void 0===r&&(r="&");var n=t[r];n||(n={},t[r]=n,t.__order.push(r));for(var o=0,s=e;o<s.length;o++){var a=s[o];if("string"==typeof a){var l=i.argsFromClassName(a);l&&zN(l,t,r,i)}else if(Array.isArray(a))zN(a,t,r,i);else for(var c in a)if(a.hasOwnProperty(c)){var u=a[c];if("selectors"===c){var d=a.selectors;for(var m in d)d.hasOwnProperty(m)&&LN(r,t,m,d[m],i)}else"object"==typeof u||BN(c)?null!=u&&LN(r,t,c,u,i):void 0!==u&&("margin"===c||"padding"===c?FN(n,c,u):n[c]=u)}}return t}function FN(e,t,r){var i="string"==typeof r?function(e){for(var t=[],r=0,i=0,n=0;n<e.length;n++)switch(e[n]){case"(":i++;break;case")":i&&i--;break;case"\t":case" ":i||(n>r&&t.push(e.substring(r,n)),r=n+1)}return r<e.length&&t.push(e.substring(r)),t}(r):[r];0===i.length&&i.push(r),"!important"===i[i.length-1]&&(i=i.slice(0,-1).map(function(e){return e+" !important"})),e[t+"Top"]=i[0],e[t+"Right"]=i[1]||i[0],e[t+"Bottom"]=i[2]||i[0],e[t+"Left"]=i[3]||i[1]||i[0]}function jN(e,t){return t<=0?"":1===t?e:e+jN(e,t-1)}function HN(e,t){if(!t)return"";var r=[];for(var i in t)t.hasOwnProperty(i)&&"displayName"!==i&&void 0!==t[i]&&r.push(i,t[i]);for(var n=0;n<r.length;n+=2)CN(r,n),IN(r,n),PN(e,r,n),TN(r,n);for(n=1;n<r.length;n+=4)r.splice(n,1,":",r[n],";");return r.join("")}function qN(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var n=null!==(t=e.stylesheet)&&void 0!==t?t:xN.getInstance(e.shadowConfig),o=zN(r,void 0,void 0,n),s=function(e,t){for(var r=[e.rtl?"rtl":"ltr"],i=!1,n=0,o=t.__order;n<o.length;n++){var s=o[n];r.push(s);var a=t[s];for(var l in a)a.hasOwnProperty(l)&&void 0!==a[l]&&(i=!0,r.push(l,a[l]))}return i?r.join(""):void 0}(e,o);if(s){var a={className:n.classNameFromKey(s),key:s,args:r};if(!a.className){a.className=n.getClassName(function(e){var t=e&&e["&"];return t?t.displayName:void 0}(o));for(var l=[],c=0,u=o.__order;c<u.length;c++){var d=u[c];l.push(d,HN(e,o[d]))}a.rulesToInsert=l}return a}}function UN(e,t,r,i){void 0===t&&(t=1);var n=null!=i?i:xN.getInstance(r),o=e.className,s=e.key,a=e.args,l=e.rulesToInsert;if(l){for(var c=0;c<l.length;c+=2){var u=l[c+1];if(u){var d=l[c];d=d.replace(/&/g,jN(".".concat(e.className),t));var m="".concat(d,"{").concat(u,"}").concat(0===d.indexOf("@")?"}":"");n.insertRule(m)}}n.cacheClassName(o,s,a,l)}}function GN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return WN(e,fN())}function WN(e,t){var r=e instanceof Array?e:[e],i=t||{};dN(r[0])&&(i.shadowConfig=r[0]),i.stylesheet=xN.getInstance(i.shadowConfig);var n=mN(i.stylesheet,r),o=n.classes,s=n.objects;return s.length&&o.push(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=qN.apply(void 0,sN([e],t,!1));return i?(UN(i,e.specificityMultiplier,e.shadowConfig,e.stylesheet),i.className):""}(i,s)),o.join(" ")}var VN=!1,KN=0,$N={empty:!0},YN={},JN="undefined"==typeof WeakMap?null:WeakMap;function XN(){KN++}function ZN(e,t,r){if(void 0===t&&(t=100),void 0===r&&(r=!1),!JN)return e;if(!VN){var i=xN.getInstance();i&&i.onReset&&xN.getInstance().onReset(XN),VN=!0}var n,o=0,s=KN;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var l=n;(void 0===n||s!==KN||t>0&&o>t)&&(n=tR(),o=0,s=KN),l=n;for(var c=0;c<i.length;c++){var u=eR(i[c]);l.map.has(u)||l.map.set(u,tR()),l=l.map.get(u)}return l.hasOwnProperty("value")||(l.value=e.apply(void 0,i),o++),!r||null!==l.value&&void 0!==l.value||(l.value=e.apply(void 0,i)),l.value}}function QN(e){if(!JN)return e;var t=new JN;return function(r){if(!r||"function"!=typeof r&&"object"!=typeof r)return e(r);if(t.has(r))return t.get(r);var i=e(r);return t.set(r,i),i}}function eR(e){return e?"object"==typeof e||"function"==typeof e?e:(YN[e]||(YN[e]={val:e}),YN[e]):$N}function tR(){return{map:JN?new JN:null}}var rR=13,iR=27,nR=32,oR=37,sR=38,aR=39,lR=40;function cR(){return"undefined"!=typeof window&&!(!window.document||!window.document.createElement)}function uR(e){if(cR()&&"undefined"!=typeof document){var t=e;return t&&t.ownerDocument?t.ownerDocument:document}}var dR=void 0;try{dR=window}catch(e){}function mR(e){if(cR()&&void 0!==dR){var t=e;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:dR}}function pR(e){var t=null;try{var r=mR();t=r?r.sessionStorage.getItem(e):null}catch(e){}return t}var hR,fR="isRTL";function gR(e){if(void 0===e&&(e={}),void 0!==e.rtl)return e.rtl;if(void 0===hR){var t=pR(fR);null!==t&&function(e,t){void 0===t&&(t=!1);var r=uR();r&&r.documentElement.setAttribute("dir",e?"rtl":"ltr"),t&&function(e,t){var r;try{null===(r=mR())||void 0===r||r.sessionStorage.setItem(e,t)}catch(e){}}(fR,e?"1":"0"),pN(hR=e)}(hR="1"===t);var r=uR();void 0===hR&&r&&pN(hR="rtl"===(r.body&&r.body.getAttribute("dir")||r.documentElement.getAttribute("dir")))}return!!hR}function vR(e,t){return void 0===t&&(t={}),gR(t)&&(e===oR?e=aR:e===aR&&(e=oR)),e}var bR=iN;function yR(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=e;return n.isSlot?0===(r=w.Children.toArray(r)).length?n(t):n(iN(iN({},t),{children:r})):w.createElement.apply(C,sN([e,t],r,!1))}function _R(e,t){void 0===t&&(t={});var r=t.defaultProp,i=void 0===r?"children":r;return function(t,r,n,o,s){if(w.isValidElement(r))return r;var a=function(e,t){var r,i;return"string"==typeof t||"number"==typeof t||"boolean"==typeof t?((r={})[e]=t,i=r):i=t,i}(i,r),l=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];for(var n={},o=[],s=0,a=r;s<a.length;s++){var l=a[s];o.push(l&&l.className),bR(n,l)}return n.className=WN([e,o],{rtl:gR(t)}),n}(o,s,t,a);if(n){if(n.component){var c=n.component;return w.createElement(c,iN({},l))}if(n.render)return n.render(l,e)}return w.createElement(e,iN({},l))}}var xR=ZN(function(e){return _R(e)});function wR(e,t){var r={},i=e,n=function(e){if(t.hasOwnProperty(e)){var n=function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(n.length>0)throw new Error("Any module using getSlots must use withSlots. Please see withSlots javadoc for more info.");return function(e,t,r,i,n,o){return void 0!==e.create?e.create(t,r,i,n):xR(e)(t,r,i,n,o)}(t[e],r,i[e],i.slots&&i.slots[e],i._defaultStyles&&i._defaultStyles[e],i.theme)};n.isSlot=!0,r[e]=n}};for(var o in t)n(o);return r}function CR(e){var t=xN.getInstance(),r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(i,"{",HN(fN(),e[i]),"}");var n=r.join(""),o=t.classNameFromKey(n);if(o)return o;var s=t.getClassName();return t.insertRule("@keyframes ".concat(s,"{").concat(n,"}"),!0),t.cacheClassName(s,n,[],["keyframes",n]),s}var kR="cubic-bezier(.1,.9,.2,1)",TR="cubic-bezier(.1,.25,.75,.9)",ER="0.167s",SR="0.267s",IR="0.367s",AR="0.467s",OR=CR({from:{opacity:0},to:{opacity:1}}),NR=CR({from:{opacity:1},to:{opacity:0,visibility:"hidden"}}),RR=hP(-10),PR=hP(-20),DR=hP(-40),BR=hP(-400),MR=hP(10),LR=hP(20),zR=hP(40),FR=hP(400),jR=fP(10),HR=fP(20),qR=fP(-10),UR=fP(-20),GR=gP(10),WR=gP(20),VR=gP(40),KR=gP(400),$R=gP(-10),YR=gP(-20),JR=gP(-40),XR=gP(-400),ZR=vP(-10),QR=vP(-20),eP=vP(10),tP=vP(20),rP=CR({from:{transform:"scale3d(.98,.98,1)"},to:{transform:"scale3d(1,1,1)"}}),iP=CR({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(.98,.98,1)"}}),nP=CR({from:{transform:"scale3d(1.03,1.03,1)"},to:{transform:"scale3d(1,1,1)"}}),oP=CR({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(1.03,1.03,1)"}}),sP=CR({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(90deg)"}}),aP=CR({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(-90deg)"}}),lP=ER,cP=SR,uP=IR,dP=AR,mP={slideRightIn10:pP("".concat(OR,",").concat(RR),IR,kR),slideRightIn20:pP("".concat(OR,",").concat(PR),IR,kR),slideRightIn40:pP("".concat(OR,",").concat(DR),IR,kR),slideRightIn400:pP("".concat(OR,",").concat(BR),IR,kR),slideLeftIn10:pP("".concat(OR,",").concat(MR),IR,kR),slideLeftIn20:pP("".concat(OR,",").concat(LR),IR,kR),slideLeftIn40:pP("".concat(OR,",").concat(zR),IR,kR),slideLeftIn400:pP("".concat(OR,",").concat(FR),IR,kR),slideUpIn10:pP("".concat(OR,",").concat(jR),IR,kR),slideUpIn20:pP("".concat(OR,",").concat(HR),IR,kR),slideDownIn10:pP("".concat(OR,",").concat(qR),IR,kR),slideDownIn20:pP("".concat(OR,",").concat(UR),IR,kR),slideRightOut10:pP("".concat(NR,",").concat(GR),IR,kR),slideRightOut20:pP("".concat(NR,",").concat(WR),IR,kR),slideRightOut40:pP("".concat(NR,",").concat(VR),IR,kR),slideRightOut400:pP("".concat(NR,",").concat(KR),IR,kR),slideLeftOut10:pP("".concat(NR,",").concat($R),IR,kR),slideLeftOut20:pP("".concat(NR,",").concat(YR),IR,kR),slideLeftOut40:pP("".concat(NR,",").concat(JR),IR,kR),slideLeftOut400:pP("".concat(NR,",").concat(XR),IR,kR),slideUpOut10:pP("".concat(NR,",").concat(ZR),IR,kR),slideUpOut20:pP("".concat(NR,",").concat(QR),IR,kR),slideDownOut10:pP("".concat(NR,",").concat(eP),IR,kR),slideDownOut20:pP("".concat(NR,",").concat(tP),IR,kR),scaleUpIn100:pP("".concat(OR,",").concat(rP),IR,kR),scaleDownIn100:pP("".concat(OR,",").concat(nP),IR,kR),scaleUpOut103:pP("".concat(NR,",").concat(oP),ER,TR),scaleDownOut98:pP("".concat(NR,",").concat(iP),ER,TR),fadeIn100:pP(OR,ER,TR),fadeIn200:pP(OR,SR,TR),fadeIn400:pP(OR,IR,TR),fadeIn500:pP(OR,AR,TR),fadeOut100:pP(NR,ER,TR),fadeOut200:pP(NR,SR,TR),fadeOut400:pP(NR,IR,TR),fadeOut500:pP(NR,AR,TR),rotate90deg:pP(sP,"0.1s",TR),rotateN90deg:pP(aP,"0.1s",TR)};function pP(e,t,r){return{animationName:e,animationDuration:t,animationTimingFunction:r,animationFillMode:"both"}}function hP(e){return CR({from:{transform:"translate3d(".concat(e,"px,0,0)"),pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function fP(e){return CR({from:{transform:"translate3d(0,".concat(e,"px,0)"),pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function gP(e){return CR({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(".concat(e,"px,0,0)")}})}function vP(e){return CR({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(0,".concat(e,"px,0)")}})}var bP,yP,_P,xP,wP,CP=function(e){var t={},r=function(r){var i;e.hasOwnProperty(r)&&Object.defineProperty(t,r,{get:function(){return void 0===i&&(i=GN(e[r]).toString()),i},enumerable:!0,configurable:!0})};for(var i in e)r(i);return t}(mP);!function(e){e.Arabic="Segoe UI Web (Arabic)",e.Cyrillic="Segoe UI Web (Cyrillic)",e.EastEuropean="Segoe UI Web (East European)",e.Greek="Segoe UI Web (Greek)",e.Hebrew="Segoe UI Web (Hebrew)",e.Thai="Leelawadee UI Web",e.Vietnamese="Segoe UI Web (Vietnamese)",e.WestEuropean="Segoe UI Web (West European)",e.Selawik="Selawik Web",e.Armenian="Segoe UI Web (Armenian)",e.Georgian="Segoe UI Web (Georgian)"}(bP||(bP={})),function(e){e.Arabic="'".concat(bP.Arabic,"'"),e.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",e.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",e.Cyrillic="'".concat(bP.Cyrillic,"'"),e.EastEuropean="'".concat(bP.EastEuropean,"'"),e.Greek="'".concat(bP.Greek,"'"),e.Hebrew="'".concat(bP.Hebrew,"'"),e.Hindi="'Nirmala UI'",e.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",e.Korean="'Malgun Gothic', Gulim",e.Selawik="'".concat(bP.Selawik,"'"),e.Thai="'Leelawadee UI Web', 'Kmer UI'",e.Vietnamese="'".concat(bP.Vietnamese,"'"),e.WestEuropean="'".concat(bP.WestEuropean,"'"),e.Armenian="'".concat(bP.Armenian,"'"),e.Georgian="'".concat(bP.Georgian,"'")}(yP||(yP={})),function(e){e.size10="10px",e.size12="12px",e.size14="14px",e.size16="16px",e.size18="18px",e.size20="20px",e.size24="24px",e.size28="28px",e.size32="32px",e.size42="42px",e.size68="68px",e.mini="10px",e.xSmall="10px",e.small="12px",e.smallPlus="12px",e.medium="14px",e.mediumPlus="16px",e.icon="16px",e.large="18px",e.xLarge="20px",e.xLargePlus="24px",e.xxLarge="28px",e.xxLargePlus="32px",e.superLarge="42px",e.mega="68px"}(_P||(_P={})),function(e){e.light=100,e.semilight=300,e.regular=400,e.semibold=600,e.bold=700}(xP||(xP={})),function(e){e.xSmall="10px",e.small="12px",e.medium="16px",e.large="20px"}(wP||(wP={}));var kP={position:"absolute",width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden",whiteSpace:"nowrap"},TP=ZN(function(e,t){var r=xN.getInstance();return t?Object.keys(e).reduce(function(t,i){return t[i]=r.getClassName(e[i]),t},{}):e});function EP(e,t,r){return TP(e,void 0!==r?r:t.disableGlobalClassNames)}var SP="@media screen and (-ms-high-contrast: active), screen and (forced-colors: active)";function IP(e,t){var r="number"==typeof e?" and (min-width: ".concat(e,"px)"):"",i="number"==typeof t?" and (max-width: ".concat(t,"px)"):"";return"@media only screen".concat(r).concat(i)}var AP,OP="ms-Fabric--isFocusVisible",NP="ms-Fabric--isFocusHidden";function RP(e,t){e&&(e.classList.add(t?OP:NP),e.classList.remove(t?NP:OP))}function PP(e,t,r){var i;r?r.forEach(function(t){return RP(t.current,e)}):RP(null===(i=mR(t))||void 0===i?void 0:i.document.body,e)}function DP(e,t,r,i,n,o,s,a){return function(e,t){var r,i;void 0===t&&(t={});var n=t.borderRadius,o=t.inset,s=void 0===o?0:o,a=t.width,l=void 0===a?1:a,c=t.position,u=void 0===c?"relative":c,d=t.highContrastStyle,m=t.borderColor,p=void 0===m?e.palette.white:m,h=t.outlineColor,f=void 0===h?e.palette.neutralSecondary:h,g=t.isFocusedOnly,v=void 0===g||g,b=t.pointerEvents;return{outline:"transparent",position:u,selectors:(r={"::-moz-focus-inner":{border:"0"}},r[".".concat(OP," &").concat(v?":focus":"",":after, :host(.").concat(OP,") &").concat(v?":focus":"",":after")]={content:'""',position:"absolute",pointerEvents:b,left:s+1,top:s+1,bottom:s+1,right:s+1,border:"".concat(l,"px solid ").concat(p),outline:"".concat(l,"px solid ").concat(f),zIndex:AP.FocusStyle,borderRadius:n,selectors:(i={},i[SP]=d,i)},r)}}(e,"number"!=typeof t&&t?t:{inset:t,position:r,highContrastStyle:i,borderColor:n,outlineColor:o,isFocusedOnly:s,borderRadius:a})}!function(e){e.Nav=1,e.ScrollablePane=1,e.FocusStyle=1,e.Coachmark=1e3,e.Layer=1e6,e.KeytipLayer=1000001}(AP||(AP={}));var BP=function(e,t,r,i){var n,o,s;void 0===r&&(r="border"),void 0===i&&(i=-1);var a="borderBottom"===r;return{borderColor:e,selectors:{":after":(n={pointerEvents:"none",content:"''",position:"absolute",left:a?0:i,top:i,bottom:i,right:a?0:i},n[r]="2px solid ".concat(e),n.borderRadius=t,n.width="borderBottom"===r?"100%":void 0,n.selectors=(o={},o[SP]=(s={},s["border"===r?"borderColor":"borderBottomColor"]="Highlight",s),o),n)}}},MP="__globalSettings__",LP="__callbacks__",zP=0,FP=function(){function e(){}return e.getValue=function(e,t){var r=jP();return void 0===r[e]&&(r[e]="function"==typeof t?t():t),r[e]},e.setValue=function(e,t){var r=jP(),i=r[LP],n=r[e];if(t!==n){r[e]=t;var o={oldValue:n,value:t,key:e};for(var s in i)i.hasOwnProperty(s)&&i[s](o)}return t},e.addChangeListener=function(e){var t=e.__id__,r=HP();t||(t=e.__id__=String(zP++)),r[t]=e},e.removeChangeListener=function(e){delete HP()[e.__id__]},e}();function jP(){var e,t=mR()||{};return t[MP]||(t[MP]=((e={})[LP]={},e)),t[MP]}function HP(){return jP()[LP]}var qP,UP={settings:{},scopedSettings:{},inCustomizerContext:!1},GP=FP.getValue("customizations",{settings:{},scopedSettings:{},inCustomizerContext:!1}),WP=[],VP=function(){function e(){}return e.reset=function(){GP.settings={},GP.scopedSettings={}},e.applySettings=function(t){GP.settings=iN(iN({},GP.settings),t),e._raiseChange()},e.applyScopedSettings=function(t,r){GP.scopedSettings[t]=iN(iN({},GP.scopedSettings[t]),r),e._raiseChange()},e.getSettings=function(e,t,r){void 0===r&&(r=UP);for(var i={},n=t&&r.scopedSettings[t]||{},o=t&&GP.scopedSettings[t]||{},s=0,a=e;s<a.length;s++){var l=a[s];i[l]=n[l]||r.settings[l]||o[l]||GP.settings[l]}return i},e.applyBatchedUpdates=function(t,r){e._suppressUpdates=!0;try{t()}catch(e){}e._suppressUpdates=!1,r||e._raiseChange()},e.observe=function(e){WP.push(e)},e.unobserve=function(e){WP=WP.filter(function(t){return t!==e})},e._raiseChange=function(){e._suppressUpdates||WP.forEach(function(e){return e()})},e}(),KP=function(){return KP=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},KP.apply(this,arguments)},$P="undefined"==typeof window?r.g:window,YP=$P&&$P.CSPSettings&&$P.CSPSettings.nonce,JP=((qP=$P.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]}).runState||(qP=KP(KP({},qP),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}})),qP.registeredThemableStyles||(qP=KP(KP({},qP),{registeredThemableStyles:[]})),$P.__themeState__=qP,qP);function XP(e){JP.theme=e,function(){if(JP.theme){for(var e=[],t=0,r=JP.registeredThemableStyles;t<r.length;t++){var i=r[t];e.push(i.themableStyle)}e.length>0&&(void 0===(o=1)&&(o=3),3!==o&&2!==o||(ZP(JP.registeredStyles),JP.registeredStyles=[]),3!==o&&1!==o||(ZP(JP.registeredThemableStyles),JP.registeredThemableStyles=[]),n=[].concat.apply([],e),JP.loadStyles?JP.loadStyles(QP(n).styleString,n):function(e){if("undefined"!=typeof document){var t=document.getElementsByTagName("head")[0],r=document.createElement("style"),i=QP(e),n=i.styleString,o=i.themable;r.setAttribute("data-load-themed-styles","true"),YP&&r.setAttribute("nonce",YP),r.appendChild(document.createTextNode(n)),JP.perf.count++,t.appendChild(r);var s=document.createEvent("HTMLEvents");s.initEvent("styleinsert",!0,!1),s.args={newStyle:r},document.dispatchEvent(s);var a={styleElement:r,themableStyle:e};o?JP.registeredThemableStyles.push(a):JP.registeredStyles.push(a)}}(n))}var n,o}()}function ZP(e){e.forEach(function(e){var t=e&&e.styleElement;t&&t.parentElement&&t.parentElement.removeChild(t)})}function QP(e){var t=JP.theme,r=!1;return{styleString:(e||[]).map(function(e){var i=e.theme;if(i){r=!0;var n=t?t[i]:void 0,o=e.defaultValue||"inherit";return t&&!n&&console&&!(i in t)&&"undefined"!=typeof DEBUG&&DEBUG&&console.warn('Theming value not provided for "'.concat(i,'". Falling back to "').concat(o,'".')),n||o}return e.rawString}).join(""),themable:r}}var eD,tD={themeDarker:"#004578",themeDark:"#005a9e",themeDarkAlt:"#106ebe",themePrimary:"#0078d4",themeSecondary:"#2b88d8",themeTertiary:"#71afe5",themeLight:"#c7e0f4",themeLighter:"#deecf9",themeLighterAlt:"#eff6fc",black:"#000000",blackTranslucent40:"rgba(0,0,0,.4)",neutralDark:"#201f1e",neutralPrimary:"#323130",neutralPrimaryAlt:"#3b3a39",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralTertiary:"#a19f9d",neutralTertiaryAlt:"#c8c6c4",neutralQuaternary:"#d2d0ce",neutralQuaternaryAlt:"#e1dfdd",neutralLight:"#edebe9",neutralLighter:"#f3f2f1",neutralLighterAlt:"#faf9f8",accent:"#0078d4",white:"#ffffff",whiteTranslucent40:"rgba(255,255,255,.4)",yellowDark:"#d29200",yellow:"#ffb900",yellowLight:"#fff100",orange:"#d83b01",orangeLight:"#ea4300",orangeLighter:"#ff8c00",redDark:"#a4262c",red:"#e81123",magentaDark:"#5c005c",magenta:"#b4009e",magentaLight:"#e3008c",purpleDark:"#32145a",purple:"#5c2d91",purpleLight:"#b4a0ff",blueDark:"#002050",blueMid:"#00188f",blue:"#0078d4",blueLight:"#00bcf2",tealDark:"#004b50",teal:"#008272",tealLight:"#00b294",greenDark:"#004b1c",green:"#107c10",greenLight:"#bad80a"};!function(e){e.depth0="0 0 0 0 transparent",e.depth4="0 1.6px 3.6px 0 rgba(0, 0, 0, 0.132), 0 0.3px 0.9px 0 rgba(0, 0, 0, 0.108)",e.depth8="0 3.2px 7.2px 0 rgba(0, 0, 0, 0.132), 0 0.6px 1.8px 0 rgba(0, 0, 0, 0.108)",e.depth16="0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132), 0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)",e.depth64="0 25.6px 57.6px 0 rgba(0, 0, 0, 0.22), 0 4.8px 14.4px 0 rgba(0, 0, 0, 0.18)"}(eD||(eD={}));var rD={elevation4:eD.depth4,elevation8:eD.depth8,elevation16:eD.depth16,elevation64:eD.depth64,roundedCorner2:"2px",roundedCorner4:"4px",roundedCorner6:"6px"};function iD(e){var t=xN.getInstance(),r=HN(fN(),e);if(!t.classNameFromKey(r)){var i=t.getClassName();t.insertRule("@font-face{".concat(r,"}"),!0),t.cacheClassName(i,r,[],["font-face",r])}}var nD,oD="'Segoe UI', '".concat(bP.WestEuropean,"'"),sD={ar:yP.Arabic,bg:yP.Cyrillic,cs:yP.EastEuropean,el:yP.Greek,et:yP.EastEuropean,he:yP.Hebrew,hi:yP.Hindi,hr:yP.EastEuropean,hu:yP.EastEuropean,ja:yP.Japanese,kk:yP.EastEuropean,ko:yP.Korean,lt:yP.EastEuropean,lv:yP.EastEuropean,pl:yP.EastEuropean,ru:yP.Cyrillic,sk:yP.EastEuropean,"sr-latn":yP.EastEuropean,th:yP.Thai,tr:yP.EastEuropean,uk:yP.Cyrillic,vi:yP.Vietnamese,"zh-hans":yP.ChineseSimplified,"zh-hant":yP.ChineseTraditional,hy:yP.Armenian,ka:yP.Georgian};function aD(e,t,r){return{fontFamily:r,MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontSize:e,fontWeight:t}}var lD,cD,uD="language",dD=(lD=function(e){for(var t in sD)if(sD.hasOwnProperty(t)&&e&&0===t.indexOf(e))return sD[t];return oD}(function(e){if(void 0===e&&(e="sessionStorage"),void 0===nD){var t=uR(),r="localStorage"===e?function(e){var t=null;try{var r=mR();t=r?r.localStorage.getItem(e):null}catch(e){}return t}(uD):"sessionStorage"===e?pR(uD):void 0;r&&(nD=r),void 0===nD&&t&&(nD=t.documentElement.getAttribute("lang")),void 0===nD&&(nD="en")}return nD}()),cD="".concat(lD,", ").concat("'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif"),{tiny:aD(_P.mini,xP.regular,cD),xSmall:aD(_P.xSmall,xP.regular,cD),small:aD(_P.small,xP.regular,cD),smallPlus:aD(_P.smallPlus,xP.regular,cD),medium:aD(_P.medium,xP.regular,cD),mediumPlus:aD(_P.mediumPlus,xP.regular,cD),large:aD(_P.large,xP.regular,cD),xLarge:aD(_P.xLarge,xP.semibold,cD),xLargePlus:aD(_P.xLargePlus,xP.semibold,cD),xxLarge:aD(_P.xxLarge,xP.semibold,cD),xxLargePlus:aD(_P.xxLargePlus,xP.semibold,cD),superLarge:aD(_P.superLarge,xP.semibold,cD),mega:aD(_P.mega,xP.semibold,cD)});function mD(e,t,r,i){iD({fontFamily:e="'".concat(e,"'"),src:(void 0!==i?"local('".concat(i,"'),"):"")+"url('".concat(t,".woff2') format('woff2'),")+"url('".concat(t,".woff') format('woff')"),fontWeight:r,fontStyle:"normal",fontDisplay:"swap"})}function pD(e,t,r,i,n){void 0===i&&(i="segoeui");var o="".concat(e,"/").concat(r,"/").concat(i);mD(t,o+"-light",xP.light,n&&n+" Light"),mD(t,o+"-semilight",xP.semilight,n&&n+" SemiLight"),mD(t,o+"-regular",xP.regular,n),mD(t,o+"-semibold",xP.semibold,n&&n+" SemiBold"),mD(t,o+"-bold",xP.bold,n&&n+" Bold")}function hD(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0,n=t;i<n.length;i++)fD(e||{},n[i]);return e}function fD(e,t,r){for(var i in void 0===r&&(r=[]),r.push(t),t)if(t.hasOwnProperty(i)&&"__proto__"!==i&&"constructor"!==i&&"prototype"!==i){var n=t[i];if("object"!=typeof n||null===n||Array.isArray(n))e[i]=n;else{var o=r.indexOf(n)>-1;e[i]=o?n:fD(e[i]||{},n,r)}}return r.pop(),e}function gD(e,t,r,i,n){return void 0===n&&(n=!1),function(e,t){var r="";return!0===t&&(r=" /* @deprecated */"),e.listTextColor=e.listText+r,e.menuItemBackgroundChecked+=r,e.warningHighlight+=r,e.warningText=e.messageText+r,e.successText+=r,e}(vD(e,t,iN({primaryButtonBorder:"transparent",errorText:i?"#F1707B":"#a4262c",messageText:i?"#F3F2F1":"#323130",messageLink:i?"#6CB8F6":"#005A9E",messageLinkHovered:i?"#82C7FF":"#004578",infoIcon:i?"#C8C6C4":"#605e5c",errorIcon:i?"#F1707B":"#A80000",blockingIcon:i?"#442726":"#FDE7E9",warningIcon:i?"#C8C6C4":"#797775",severeWarningIcon:i?"#FCE100":"#D83B01",successIcon:i?"#92C353":"#107C10",infoBackground:i?"#323130":"#f3f2f1",errorBackground:i?"#442726":"#FDE7E9",blockingBackground:i?"#442726":"#FDE7E9",warningBackground:i?"#433519":"#FFF4CE",severeWarningBackground:i?"#4F2A0F":"#FED9CC",successBackground:i?"#393D1B":"#DFF6DD",warningHighlight:i?"#fff100":"#ffb900",successText:i?"#92c353":"#107C10"},r),i),n)}function vD(e,t,r,i,n){void 0===n&&(n=!1);var o={},s=e||{},a=s.white,l=s.black,c=s.themePrimary,u=s.themeDark,d=s.themeDarker,m=s.themeDarkAlt,p=s.themeLighter,h=s.neutralLight,f=s.neutralLighter,g=s.neutralDark,v=s.neutralQuaternary,b=s.neutralQuaternaryAlt,y=s.neutralPrimary,_=s.neutralSecondary,x=s.neutralSecondaryAlt,w=s.neutralTertiary,C=s.neutralTertiaryAlt,k=s.neutralLighterAlt,T=s.accent;return a&&(o.bodyBackground=a,o.bodyFrameBackground=a,o.accentButtonText=a,o.buttonBackground=a,o.primaryButtonText=a,o.primaryButtonTextHovered=a,o.primaryButtonTextPressed=a,o.inputBackground=a,o.inputForegroundChecked=a,o.listBackground=a,o.menuBackground=a,o.cardStandoutBackground=a),l&&(o.bodyTextChecked=l,o.buttonTextCheckedHovered=l),c&&(o.link=c,o.primaryButtonBackground=c,o.inputBackgroundChecked=c,o.inputIcon=c,o.inputFocusBorderAlt=c,o.menuIcon=c,o.menuHeader=c,o.accentButtonBackground=c),u&&(o.primaryButtonBackgroundPressed=u,o.inputBackgroundCheckedHovered=u,o.inputIconHovered=u),d&&(o.linkHovered=d),m&&(o.primaryButtonBackgroundHovered=m),p&&(o.inputPlaceholderBackgroundChecked=p),h&&(o.bodyBackgroundChecked=h,o.bodyFrameDivider=h,o.bodyDivider=h,o.variantBorder=h,o.buttonBackgroundCheckedHovered=h,o.buttonBackgroundPressed=h,o.listItemBackgroundChecked=h,o.listHeaderBackgroundPressed=h,o.menuItemBackgroundPressed=h,o.menuItemBackgroundChecked=h),f&&(o.bodyBackgroundHovered=f,o.buttonBackgroundHovered=f,o.buttonBackgroundDisabled=f,o.buttonBorderDisabled=f,o.primaryButtonBackgroundDisabled=f,o.disabledBackground=f,o.listItemBackgroundHovered=f,o.listHeaderBackgroundHovered=f,o.menuItemBackgroundHovered=f),v&&(o.primaryButtonTextDisabled=v,o.disabledSubtext=v),b&&(o.listItemBackgroundCheckedHovered=b),w&&(o.disabledBodyText=w,o.variantBorderHovered=(null==r?void 0:r.variantBorderHovered)||w,o.buttonTextDisabled=w,o.inputIconDisabled=w,o.disabledText=w),y&&(o.bodyText=y,o.actionLink=y,o.buttonText=y,o.inputBorderHovered=y,o.inputText=y,o.listText=y,o.menuItemText=y),k&&(o.bodyStandoutBackground=k,o.defaultStateBackground=k),g&&(o.actionLinkHovered=g,o.buttonTextHovered=g,o.buttonTextChecked=g,o.buttonTextPressed=g,o.inputTextHovered=g,o.menuItemTextHovered=g),_&&(o.bodySubtext=_,o.focusBorder=_,o.inputBorder=_,o.smallInputBorder=_,o.inputPlaceholderText=_),x&&(o.buttonBorder=x),C&&(o.disabledBodySubtext=C,o.disabledBorder=C,o.buttonBackgroundChecked=C,o.menuDivider=C),T&&(o.accentButtonBackground=T),(null==t?void 0:t.elevation4)&&(o.cardShadow=t.elevation4),!i&&(null==t?void 0:t.elevation8)?o.cardShadowHovered=t.elevation8:o.variantBorderHovered&&(o.cardShadowHovered="0 0 1px "+o.variantBorderHovered),iN(iN({},o),r)}!function(e){if(e){var t="".concat(e,"/fonts");pD(t,bP.Thai,"leelawadeeui-thai","leelawadeeui"),pD(t,bP.Arabic,"segoeui-arabic"),pD(t,bP.Cyrillic,"segoeui-cyrillic"),pD(t,bP.EastEuropean,"segoeui-easteuropean"),pD(t,bP.Greek,"segoeui-greek"),pD(t,bP.Hebrew,"segoeui-hebrew"),pD(t,bP.Vietnamese,"segoeui-vietnamese"),pD(t,bP.WestEuropean,"segoeui-westeuropean","segoeui","Segoe UI"),pD(t,yP.Selawik,"selawik","selawik"),pD(t,bP.Armenian,"segoeui-armenian"),pD(t,bP.Georgian,"segoeui-georgian"),mD("Leelawadee UI Web","".concat(t,"/leelawadeeui-thai/leelawadeeui-semilight"),xP.light),mD("Leelawadee UI Web","".concat(t,"/leelawadeeui-thai/leelawadeeui-bold"),xP.semibold)}}(function(){var e,t,r=null===(e=mR())||void 0===e?void 0:e.FabricConfig;return null!==(t=null==r?void 0:r.fontBaseUrl)&&void 0!==t?t:"https://res-1.cdn.office.net/files/fabric-cdn-prod_20230815.002/assets"}());var bD={s2:"4px",s1:"8px",m:"16px",l1:"20px",l2:"32px"};function yD(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var r=!!e.isInverted;return function(e,t){var r,i,n;void 0===t&&(t={});var o=hD({},e,t,{semanticColors:vD(t.palette,t.effects,t.semanticColors,void 0===t.isInverted?e.isInverted:t.isInverted)});if((null===(r=t.palette)||void 0===r?void 0:r.themePrimary)&&!(null===(i=t.palette)||void 0===i?void 0:i.accent)&&(o.palette.accent=t.palette.themePrimary),t.defaultFontStyle)for(var s=0,a=Object.keys(o.fonts);s<a.length;s++){var l=a[s];o.fonts[l]=hD(o.fonts[l],t.defaultFontStyle,null===(n=null==t?void 0:t.fonts)||void 0===n?void 0:n[l])}return o}({palette:tD,effects:rD,fonts:dD,spacing:bD,isInverted:r,disableGlobalClassNames:!1,semanticColors:gD(tD,rD,void 0,r,t),rtl:void 0},e)}var _D=yD({}),xD=[],wD="theme";function CD(){var e,t,r,i=mR();(null===(t=null==i?void 0:i.FabricConfig)||void 0===t?void 0:t.legacyTheme)?function(e,t){var r;void 0===t&&(t=!1),_D=yD(e,t),XP(iN(iN(iN(iN({},_D.palette),_D.semanticColors),_D.effects),function(e){for(var t={},r=0,i=Object.keys(e.fonts);r<i.length;r++)for(var n=i[r],o=e.fonts[n],s=0,a=Object.keys(o);s<a.length;s++){var l=a[s],c=n+l.charAt(0).toUpperCase()+l.slice(1),u=o[l];"fontSize"===l&&"number"==typeof u&&(u+="px"),t[c]=u}return t}(_D))),VP.applySettings(((r={})[wD]=_D,r)),xD.forEach(function(e){try{e(_D)}catch(e){}})}(i.FabricConfig.legacyTheme):VP.getSettings([wD]).theme||((null===(r=null==i?void 0:i.FabricConfig)||void 0===r?void 0:r.theme)&&(_D=yD(i.FabricConfig.theme)),VP.applySettings(((e={})[wD]=_D,e)))}CD();var kD={boxShadow:"none",margin:0,padding:0,boxSizing:"border-box"};function TD(e){return{selectors:{"::placeholder":e,":-ms-input-placeholder":e,"::-ms-input-placeholder":e}}}function ED(e){console&&console.warn&&console.warn(e)}var SD=FP.getValue("icons",{__options:{disableWarnings:!1,warnOnMissingIcons:!0},__remapped:{}}),ID=xN.getInstance();ID&&ID.onReset&&ID.onReset(function(){for(var e in SD)SD.hasOwnProperty(e)&&SD[e].subset&&(SD[e].subset.className=void 0)});function AD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&1===e.length&&e[0]&&!e[0].subComponentStyles&&!dN(e[0]))return e[0];for(var r={},i={},n=0,o=e;n<o.length;n++){var s=o[n];if(s&&!dN(s))for(var a in s)if(s.hasOwnProperty(a)){if("subComponentStyles"===a&&void 0!==s.subComponentStyles){var l=s.subComponentStyles;for(var c in l)l.hasOwnProperty(c)&&(i.hasOwnProperty(c)?i[c].push(l[c]):i[c]=[l[c]]);continue}var u=r[a],d=s[a];r[a]=void 0===u?d:sN(sN([],Array.isArray(u)?u:[u],!0),Array.isArray(d)?d:[d],!0)}}if(Object.keys(i).length>0){r.subComponentStyles={};var m=r.subComponentStyles,p=function(e){if(i.hasOwnProperty(e)){var t=i[e];m[e]=function(e){return AD.apply(void 0,t.map(function(t){return"function"==typeof t?t(e):t}))}}};for(var c in i)p(c)}return r}function OD(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=[],n=0,o=t;n<o.length;n++){var s=o[n];s&&i.push("function"==typeof s?s(e):s)}return 1===i.length?i[0]:i.length?AD.apply(void 0,i):{}}function ND(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RD(e,fN())}function RD(e,t){var r,i={subComponentStyles:{}},n=void 0;dN(e[0])?(n=e[0],r=e[1]):r=e[0],null!=n||(n=null==t?void 0:t.shadowConfig);var o=iN(iN({},t),{shadowConfig:n});if(!r&&e.length<=1)return{subComponentStyles:{}};var s=xN.getInstance(n);o.stylesheet=s;var a=AD.apply(void 0,e),l=[];for(var c in a)if(a.hasOwnProperty(c)){if("subComponentStyles"===c){i.subComponentStyles=a.subComponentStyles||{};continue}if("__shadowConfig__"===c)continue;var u=mN(s,a[c]),d=u.classes,m=u.objects;(null==m?void 0:m.length)?(f=qN(o||{},{displayName:c},m))&&(l.push(f),i[c]=d.concat([f.className]).join(" ")):i[c]=d.join(" ")}for(var p=0,h=l;p<h.length;p++){var f;(f=h[p])&&UN(f,null==t?void 0:t.specificityMultiplier,n)}return i}var PD={},DD=void 0;try{DD=window}catch(e){}function BD(e,t){if(void 0!==DD){var r=DD.__packages__=DD.__packages__||{};r[e]&&PD[e]||(PD[e]=t,(r[e]=r[e]||[]).push(t))}}BD("@fluentui/set-version","6.0.0"),BD("@fluentui/style-utilities","8.12.4"),CD();var MD=w.createContext({customizations:{inCustomizerContext:!1,settings:{},scopedSettings:{}}});function LD(e,t){void 0===t&&(t={});var r=t.factoryOptions,i=(void 0===r?{}:r).defaultProp,n=function(r){var i,n,o,s=(i=t.displayName,n=w.useContext(MD),o=t.fields,VP.getSettings(o||["theme","styles","tokens"],i,n.customizations)),a=t.state;a&&(r=iN(iN({},r),a(r)));var l=r.theme||s.theme,c=zD(r,l,t.tokens,s.tokens,r.tokens),u=function(e,t,r){for(var i=[],n=3;n<arguments.length;n++)i[n-3]=arguments[n];return AD.apply(void 0,i.map(function(i){return"function"==typeof i?i(e,t,r):i}))}(r,l,c,t.styles,s.styles,r.styles),d=iN(iN({},r),{styles:u,tokens:c,_defaultStyles:u,theme:l});return e(d)};return n.displayName=t.displayName||e.name,i&&(n.create=_R(n,{defaultProp:i})),bR(n,t.statics),n}function zD(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];for(var n={},o=0,s=r;o<s.length;o++){var a=s[o];a&&(a="function"==typeof a?a(e,t):a,Array.isArray(a)&&(a=zD.apply(void 0,sN([e,t],a,!1))),bR(n,a))}return n}var FD="__currentId__",jD=mR()||{};void 0===jD[FD]&&(jD[FD]=0);var HD=!1;function qD(e){if(!HD){var t=xN.getInstance();t&&t.onReset&&t.onReset(UD),HD=!0}return(void 0===e?"id__":e)+jD[FD]++}function UD(e){void 0===e&&(e=0),jD[FD]=e}function GD(e,t){var r=w.useRef(t);return r.current||(r.current=qD(e)),r.current}var WD=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={},i=0,n=e;i<n.length;i++)for(var o=n[i],s=0,a=Array.isArray(o)?o:Object.keys(o);s<a.length;s++)r[a[s]]=1;return r},VD=WD(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),KD=WD(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),$D=WD(KD,VD),YD=WD($D,["form"]),JD=WD($D,["height","loop","muted","preload","src","width"]),XD=WD(JD,["poster"]),ZD=WD($D,["start"]),QD=WD($D,["value"]),eB=WD($D,["download","href","hrefLang","media","rel","target","type"]),tB=WD($D,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),rB=WD(tB,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),iB=WD(tB,["autoCapitalize","cols","dirname","form","maxLength","minLength","placeholder","readOnly","required","rows","wrap"]),nB=WD(tB,["form","multiple","required"]),oB=WD($D,["selected","value"]),sB=WD($D,["cellPadding","cellSpacing"]),aB=$D,lB=WD($D,["rowSpan","scope"]),cB=WD($D,["colSpan","headers","rowSpan","scope"]),uB=WD($D,["span"]),dB=WD($D,["span"]),mB=WD($D,["acceptCharset","action","encType","encType","method","noValidate","target"]),pB=WD($D,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]),hB=WD($D,["alt","crossOrigin","height","src","srcSet","useMap","width"]),fB=$D;function gB(e,t,r){for(var i=Array.isArray(t),n={},o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];!(!i&&t[a]||i&&t.indexOf(a)>=0||0===a.indexOf("data-")||0===a.indexOf("aria-"))||r&&-1!==(null==r?void 0:r.indexOf(a))||(n[a]=e[a])}return n}function vB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i];if(o)if("string"==typeof o)r.push(o);else if(o.hasOwnProperty("toString")&&"function"==typeof o.toString)r.push(o.toString());else for(var s in o)o[s]&&r.push(s)}return r.join(" ")}var bB={root:"ms-StackItem"},yB={start:"flex-start",end:"flex-end"},_B=function(e,t){return t.spacing.hasOwnProperty(e)?t.spacing[e]:e},xB=function(e){var t=parseFloat(e),r=isNaN(t)?0:t,i=isNaN(t)?"":t.toString();return{value:r,unit:e.substring(i.toString().length)||"px"}},wB=function(e,t){if(void 0===e||"number"==typeof e||""===e)return e;var r=e.split(" ");return r.length<2?_B(e,t):r.reduce(function(e,r){return _B(e,t)+" "+_B(r,t)})},CB={start:"flex-start",end:"flex-end"},kB={root:"ms-Stack",inner:"ms-Stack-inner",child:"ms-Stack-child"},TB=LD(function(e){var t=e.children,r=gB(e,$D);return null==t?null:yR(wR(e,{root:"div"}).root,iN({},r),t)},{displayName:"StackItem",styles:function(e,t,r){var i=e.grow,n=e.shrink,o=e.disableShrink,s=e.align,a=e.verticalFill,l=e.order,c=e.className,u=e.basis,d=void 0===u?"auto":u,m=EP(bB,t);return{root:[t.fonts.medium,m.root,{flexBasis:d,margin:r.margin,padding:r.padding,height:a?"100%":"auto",width:"auto"},i&&{flexGrow:!0===i?1:i},(o||!i&&!n)&&{flexShrink:0},n&&!o&&{flexShrink:1},s&&{alignSelf:yB[s]||s},l&&{order:l},c]}}});function EB(e,t){var r=t.disableShrink,i=t.enableScopedSelectors,n=t.doNotRenderFalsyValues,o=w.Children.toArray(e);return w.Children.map(o,function(e){if(!e)return n?null:e;if(!w.isValidElement(e))return e;if(e.type===w.Fragment)return e.props.children?EB(e.props.children,{disableShrink:r,enableScopedSelectors:i,doNotRenderFalsyValues:n}):null;var t,o=e,s={};(t=e)&&"object"==typeof t&&t.type&&t.type.displayName===TB.displayName&&(s={shrink:!r});var a=o.props.className;return w.cloneElement(o,iN(iN(iN(iN({},s),o.props),a&&{className:a}),i&&{className:vB(kB.child,a)}))})}var SB=LD(function(e){var t=e.as,r=void 0===t?"div":t,i=e.disableShrink,n=void 0!==i&&i,o=e.doNotRenderFalsyValues,s=void 0!==o&&o,a=e.enableScopedSelectors,l=void 0!==a&&a,c=e.wrap,u=nN(e,["as","disableShrink","doNotRenderFalsyValues","enableScopedSelectors","wrap"]),d=GD("stack-inner"),m=EB(e.children,{disableShrink:n,enableScopedSelectors:l,doNotRenderFalsyValues:s}),p=gB(u,$D),h=wR(e,{root:r,inner:"div"});return yR(h.root,iN({},p),c?yR(h.inner,{key:d},m):m)},{displayName:"Stack",styles:function(e,t,r){var i,n,o,s,a,l,c,u,d,m,p,h,f,g=e.className,v=e.disableShrink,b=e.enableScopedSelectors,y=e.grow,_=e.horizontal,x=e.horizontalAlign,w=e.reversed,C=e.verticalAlign,k=e.verticalFill,T=e.wrap,E=EP(kB,t),S=r&&r.childrenGap?r.childrenGap:e.gap,I=r&&r.maxHeight?r.maxHeight:e.maxHeight,A=r&&r.maxWidth?r.maxWidth:e.maxWidth,O=r&&r.padding?r.padding:e.padding,N=function(e,t){if(void 0===e||""===e)return{rowGap:{value:0,unit:"px"},columnGap:{value:0,unit:"px"}};if("number"==typeof e)return{rowGap:{value:e,unit:"px"},columnGap:{value:e,unit:"px"}};var r=e.split(" ");if(r.length>2)return{rowGap:{value:0,unit:"px"},columnGap:{value:0,unit:"px"}};if(2===r.length)return{rowGap:xB(_B(r[0],t)),columnGap:xB(_B(r[1],t))};var i=xB(_B(e,t));return{rowGap:i,columnGap:i}}(S,t),R=N.rowGap,P=N.columnGap,D="".concat(-.5*P.value).concat(P.unit),B="".concat(-.5*R.value).concat(R.unit),M={textOverflow:"ellipsis"},L="> "+(b?"."+kB.child:"*"),z=((i={})["".concat(L,":not(.").concat(bB.root,")")]={flexShrink:0},i);return T?{root:[E.root,{flexWrap:"wrap",maxWidth:A,maxHeight:I,width:"auto",overflow:"visible",height:"100%"},x&&(n={},n[_?"justifyContent":"alignItems"]=CB[x]||x,n),C&&(o={},o[_?"alignItems":"justifyContent"]=CB[C]||C,o),g,{display:"flex"},_&&{height:k?"100%":"auto"}],inner:[E.inner,(s={display:"flex",flexWrap:"wrap",marginLeft:D,marginRight:D,marginTop:B,marginBottom:B,overflow:"visible",boxSizing:"border-box",padding:wB(O,t),width:0===P.value?"100%":"calc(100% + ".concat(P.value).concat(P.unit,")"),maxWidth:"100vw"},s[L]=iN({margin:"".concat(.5*R.value).concat(R.unit," ").concat(.5*P.value).concat(P.unit)},M),s),v&&z,x&&(a={},a[_?"justifyContent":"alignItems"]=CB[x]||x,a),C&&(l={},l[_?"alignItems":"justifyContent"]=CB[C]||C,l),_&&(c={flexDirection:w?"row-reverse":"row",height:0===R.value?"100%":"calc(100% + ".concat(R.value).concat(R.unit,")")},c[L]={maxWidth:0===P.value?"100%":"calc(100% - ".concat(P.value).concat(P.unit,")")},c),!_&&(u={flexDirection:w?"column-reverse":"column",height:"calc(100% + ".concat(R.value).concat(R.unit,")")},u[L]={maxHeight:0===R.value?"100%":"calc(100% - ".concat(R.value).concat(R.unit,")")},u)]}:{root:[E.root,(d={display:"flex",flexDirection:_?w?"row-reverse":"row":w?"column-reverse":"column",flexWrap:"nowrap",width:"auto",height:k?"100%":"auto",maxWidth:A,maxHeight:I,padding:wB(O,t),boxSizing:"border-box"},d[L]=M,d),v&&z,y&&{flexGrow:!0===y?1:y},x&&(m={},m[_?"justifyContent":"alignItems"]=CB[x]||x,m),C&&(p={},p[_?"alignItems":"justifyContent"]=CB[C]||C,p),_&&P.value>0&&(h={},h["".concat(L,w?":not(:last-child)":":not(:first-child)")]={marginLeft:"".concat(P.value).concat(P.unit)},h),!_&&R.value>0&&(f={},f["".concat(L,w?":not(:last-child)":":not(:first-child)")]={marginTop:"".concat(R.value).concat(R.unit)},f),g]}},statics:{Item:TB}}),IB=function(){return!1},AB=function(){},OB=w.createContext({stylesheets:new Map,useAdoptedStylesheetEx:IB,useAdoptedStylesheet:IB,useShadowConfig:function(){return uN},useMergeStylesShadowRootContext:AB,useHasMergeStylesShadowRootContext:IB,useMergeStylesRootStylesheets:function(){return new Map},useWindow:AB,useStyled:AB}),NB=function(){var e=w.useContext(OB);return{useAdoptedStylesheet:e.useAdoptedStylesheet,useAdoptedStylesheetEx:e.useAdoptedStylesheetEx,useShadowConfig:e.useShadowConfig,useMergeStylesShadowRootContext:e.useMergeStylesShadowRootContext,useHasMergeStylesShadowRootContext:e.useHasMergeStylesShadowRootContext,useMergeStylesRootStylesheets:e.useMergeStylesRootStylesheets,useWindow:e.useWindow,useStyled:e.useStyled}};var RB=["theme","styles"];function PB(e,t,r,i,n){var o=(i=i||{scope:"",fields:void 0}).scope,s=i.fields,a=void 0===s?RB:s,l=w.forwardRef(function(i,n){var s,l,c,u,d,m,p=w.useRef(),h=(s=a,l=o,c=w.useState(0)[1],u=function(){return c(function(e){return++e})},d=w.useContext(MD).customizations,m=d.inCustomizerContext,w.useEffect(function(){return m||VP.observe(u),function(){m||VP.unobserve(u)}},[m]),VP.getSettings(s,l,d)),f=h.styles,g=(h.dir,nN(h,["styles","dir"])),v=r?r(i):void 0,b=NB().useStyled,y=p.current&&p.current.__cachedInputs__||[],_=i.styles;if(!p.current||f!==y[1]||_!==y[2]){var x=function(e){return OD(e,t,f,_)};x.__cachedInputs__=[t,f,_],x.__noStyleOverride__=!f&&!_,p.current=x}return p.current.__shadowConfig__=b(o),w.createElement(e,iN({ref:n},g,v,i,{styles:p.current}))});l.displayName="Styled".concat(e.displayName||e.name);var c=n?w.memo(l):l;return l.displayName&&(c.displayName=l.displayName),c}var DB=0,BB=xN.getInstance();BB&&BB.onReset&&BB.onReset(function(){return DB++});var MB="__retval__";function LB(e){void 0===e&&(e={});var t=new Map,r=0,i=0,n=DB;return function(o,s){var a;if(void 0===s&&(s={}),e.useStaticStyles&&"function"==typeof o&&o.__noStyleOverride__)return o(s);i++;var l=o?o.__shadowConfig__:void 0,c=l&&l.window?l.window:"__default__";t.has(c)||t.set(c,new Map);var u=t.get(c),d=s.theme,m=d&&void 0!==d.rtl?d.rtl:gR(),p=e.disableCaching;if(n!==DB&&(n=DB,t.set(c,new Map),u=t.get(c),r=0),e.disableCaching||(u=FB(t.get(c),o),u=FB(u,s)),!p&&u[MB]||(u[MB]=void 0===o?{}:RD(["function"==typeof o?o(s):o],{shadowConfig:o.__shadowConfig__,rtl:!!m,specificityMultiplier:e.useStaticStyles?5:void 0}),p||r++),r>(e.cacheSize||50)){var h=mR();(null===(a=null==h?void 0:h.FabricConfig)||void 0===a?void 0:a.enableClassNameCacheFullWarning)&&(console.warn("Styles are being recalculated too frequently. Cache miss rate is ".concat(r,"/").concat(i,".")),console.trace()),t.get(c).clear(),r=0,e.disableCaching=!0}return u[MB]}}function zB(e,t){return t=function(e){switch(e){case void 0:return"__undefined__";case null:return"__null__";default:return e}}(t),e.has(t)||e.set(t,new Map),e.get(t)}function FB(e,t){if("function"==typeof t)if(t.__cachedInputs__)for(var r=0,i=t.__cachedInputs__;r<i.length;r++)e=zB(e,i[r]);else e=zB(e,t);else if("object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(e=zB(e,t[n]));return e}var jB,HB,qB,UB,GB=LB({cacheSize:100}),WB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.as,r=void 0===t?"label":t,i=e.children,n=e.className,o=e.disabled,s=e.styles,a=e.required,l=e.theme,c=GB(s,{className:n,disabled:o,required:a,theme:l});return w.createElement(r,iN({},gB(this.props,fB),{className:c.root}),i)},t}(w.Component),VB=PB(WB,function(e){var t,r=e.theme,i=e.className,n=e.disabled,o=e.required,s=r.semanticColors,a=xP.semibold,l=s.bodyText,c=s.disabledBodyText,u=s.errorText;return{root:["ms-Label",r.fonts.medium,{fontWeight:a,color:l,boxSizing:"border-box",boxShadow:"none",margin:0,display:"block",padding:"5px 0",wordWrap:"break-word",overflowWrap:"break-word"},n&&{color:c,selectors:(t={},t[SP]=iN({color:"GrayText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),t)},o&&{selectors:{"::after":{content:"' *'",color:u,paddingRight:12}}},i]}},void 0,{scope:"Label"});!function(e){e[e.default=0]="default",e[e.image=1]="image",e[e.Default=1e5]="Default",e[e.Image=100001]="Image"}(jB||(jB={})),function(e){e[e.center=0]="center",e[e.contain=1]="contain",e[e.cover=2]="cover",e[e.none=3]="none",e[e.centerCover=4]="centerCover",e[e.centerContain=5]="centerContain"}(HB||(HB={})),function(e){e[e.landscape=0]="landscape",e[e.portrait=1]="portrait"}(qB||(qB={})),function(e){e[e.notLoaded=0]="notLoaded",e[e.loaded=1]="loaded",e[e.error=2]="error",e[e.errorLoaded=3]="errorLoaded"}(UB||(UB={}));var KB=cR()?w.useLayoutEffect:w.useEffect;function $B(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=w.useCallback(function(t){r.current=t;for(var i=0,n=e;i<n.length;i++){var o=n[i];"function"==typeof o?o(t):o&&(o.current=t)}},sN([],e,!0));return r}var YB=LB(),JB=/\.svg$/i,XB=w.forwardRef(function(e,t){var r=w.useRef(),i=w.useRef(),n=function(e,t){var r=e.onLoadingStateChange,i=e.onLoad,n=e.onError,o=e.src,s=w.useState(UB.notLoaded),a=s[0],l=s[1];KB(function(){l(UB.notLoaded)},[o]),w.useEffect(function(){a===UB.notLoaded&&t.current&&(o&&t.current.naturalWidth>0&&t.current.naturalHeight>0||t.current.complete&&JB.test(o))&&l(UB.loaded)}),w.useEffect(function(){null==r||r(a)},[a]);var c=w.useCallback(function(e){null==i||i(e),o&&l(UB.loaded)},[o,i]),u=w.useCallback(function(e){null==n||n(e),l(UB.error)},[n]);return[a,c,u]}(e,i),o=n[0],s=n[1],a=n[2],l=gB(e,hB,["width","height"]),c=e.src,u=e.alt,d=e.width,m=e.height,p=e.shouldFadeIn,h=void 0===p||p,f=e.shouldStartVisible,g=e.className,v=e.imageFit,b=e.role,y=e.maximizeFrame,_=e.styles,x=e.theme,C=e.loading,k=function(e,t,r,i){var n=w.useRef(t),o=w.useRef();return(void 0===o||n.current===UB.notLoaded&&t===UB.loaded)&&(o.current=function(e,t,r,i){var n=e.imageFit,o=e.width,s=e.height;if(void 0!==e.coverStyle)return e.coverStyle;if(t===UB.loaded&&(n===HB.cover||n===HB.contain||n===HB.centerContain||n===HB.centerCover)&&r.current&&i.current){var a;if(a="number"==typeof o&&"number"==typeof s&&n!==HB.centerContain&&n!==HB.centerCover?o/s:i.current.clientWidth/i.current.clientHeight,r.current.naturalWidth/r.current.naturalHeight>a)return qB.landscape}return qB.portrait}(e,t,r,i)),n.current=t,o.current}(e,o,i,r),T=YB(_,{theme:x,className:g,width:d,height:m,maximizeFrame:y,shouldFadeIn:h,shouldStartVisible:f,isLoaded:o===UB.loaded||o===UB.notLoaded&&e.shouldStartVisible,isLandscape:k===qB.landscape,isCenter:v===HB.center,isCenterContain:v===HB.centerContain,isCenterCover:v===HB.centerCover,isContain:v===HB.contain,isCover:v===HB.cover,isNone:v===HB.none,isError:o===UB.error,isNotImageFit:void 0===v});return w.createElement("div",{className:T.root,style:{width:d,height:m},ref:r},w.createElement("img",iN({},l,{onLoad:s,onError:a,key:"fabricImage"+e.src||"",className:T.image,ref:$B(i,t),src:c,alt:u,role:b,loading:C})))});XB.displayName="ImageBase";var ZB={root:"ms-Image",rootMaximizeFrame:"ms-Image--maximizeFrame",image:"ms-Image-image",imageCenter:"ms-Image-image--center",imageContain:"ms-Image-image--contain",imageCover:"ms-Image-image--cover",imageCenterContain:"ms-Image-image--centerContain",imageCenterCover:"ms-Image-image--centerCover",imageNone:"ms-Image-image--none",imageLandscape:"ms-Image-image--landscape",imagePortrait:"ms-Image-image--portrait"},QB=PB(XB,function(e){var t=e.className,r=e.width,i=e.height,n=e.maximizeFrame,o=e.isLoaded,s=e.shouldFadeIn,a=e.shouldStartVisible,l=e.isLandscape,c=e.isCenter,u=e.isContain,d=e.isCover,m=e.isCenterContain,p=e.isCenterCover,h=e.isNone,f=e.isError,g=e.isNotImageFit,v=e.theme,b=EP(ZB,v),y={position:"absolute",left:"50% /* @noflip */",top:"50%",transform:"translate(-50%,-50%)"},_=mR(),x=void 0!==_&&void 0===_.navigator.msMaxTouchPoints,w=u&&l||d&&!l?{width:"100%",height:"auto"}:{width:"auto",height:"100%"};return{root:[b.root,v.fonts.medium,{overflow:"hidden"},n&&[b.rootMaximizeFrame,{height:"100%",width:"100%"}],o&&s&&!a&&CP.fadeIn400,(c||u||d||m||p)&&{position:"relative"},t],image:[b.image,{display:"block",opacity:0},o&&["is-loaded",{opacity:1}],c&&[b.imageCenter,y],u&&[b.imageContain,x&&{width:"100%",height:"100%",objectFit:"contain"},!x&&w,!x&&y],d&&[b.imageCover,x&&{width:"100%",height:"100%",objectFit:"cover"},!x&&w,!x&&y],m&&[b.imageCenterContain,l&&{maxWidth:"100%"},!l&&{maxHeight:"100%"},y],p&&[b.imageCenterCover,l&&{maxHeight:"100%"},!l&&{maxWidth:"100%"},y],h&&[b.imageNone,{width:"auto",height:"auto"}],g&&[!!r&&!i&&{height:"auto",width:"100%"},!r&&!!i&&{height:"100%",width:"auto"},!!r&&!!i&&{height:"100%",width:"100%"}],l&&b.imageLandscape,!l&&b.imagePortrait,!o&&"is-notLoaded",s&&"is-fadeIn",f&&"is-error"]}},void 0,{scope:"Image"},!0);QB.displayName="Image";var eM=ND({root:{display:"inline-block",textDecoration:"inherit"},placeholder:["ms-Icon-placeHolder",{width:"1em"}],image:["ms-Icon-imageContainer",{overflow:"hidden"}]}),tM="ms-Icon",rM=ZN(function(e){var t=function(e){var t=void 0,r=SD.__options;if(e=e?function(e){return e.toLowerCase()}(e):"",e=SD.__remapped[e]||e)if(t=SD[e]){var i=t.subset;i&&i.fontFace&&(i.isRegistered||(iD(i.fontFace),i.isRegistered=!0),i.className||(i.className=GN(i.style,{fontFamily:i.fontFace.fontFamily,fontWeight:i.fontFace.fontWeight||"normal",fontStyle:i.fontFace.fontStyle||"normal"})))}else!r.disableWarnings&&r.warnOnMissingIcons&&ED('The icon "'.concat(e,'" was used but not registered. See https://github.com/microsoft/fluentui/wiki/Using-icons for more information.'));return t}(e)||{subset:{},code:void 0},r=t.code,i=t.subset;return r?{children:r,iconClassName:i.className,fontFamily:i.fontFace&&i.fontFace.fontFamily,mergeImageProps:i.mergeImageProps}:null},void 0,!0),iM=function(e){var t=e.iconName,r=e.className,i=e.style,n=void 0===i?{}:i,o=rM(t)||{},s=o.iconClassName,a=o.children,l=o.fontFamily,c=o.mergeImageProps,u=gB(e,$D),d=e["aria-label"]||e.title,m=e["aria-label"]||e["aria-labelledby"]||e.title?{role:c?void 0:"img"}:{"aria-hidden":!0},p=a;return c&&"object"==typeof a&&"object"==typeof a.props&&d&&(p=w.cloneElement(a,{alt:d})),w.createElement("i",iN({"data-icon-name":t},m,u,c?{title:void 0,"aria-label":void 0}:{},{className:vB(tM,eM.root,s,!t&&eM.placeholder,r),style:iN({fontFamily:l},n)}),p)},nM=(ZN(function(e,t,r){return iM({iconName:e,className:t,"aria-label":r})}),LB({cacheSize:100})),oM=function(e){function t(t){var r=e.call(this,t)||this;return r._onImageLoadingStateChange=function(e){r.props.imageProps&&r.props.imageProps.onLoadingStateChange&&r.props.imageProps.onLoadingStateChange(e),e===UB.error&&r.setState({imageLoadError:!0})},r.state={imageLoadError:!1},r}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.children,r=e.className,i=e.styles,n=e.iconName,o=e.imageErrorAs,s=e.theme,a="string"==typeof n&&0===n.length,l=!!this.props.imageProps||this.props.iconType===jB.image||this.props.iconType===jB.Image,c=rM(n)||{},u=c.iconClassName,d=c.children,m=c.mergeImageProps,p=nM(i,{theme:s,className:r,iconClassName:u,isImage:l,isPlaceholder:a}),h=l?"span":"i",f=gB(this.props,$D,["aria-label"]),g=this.state.imageLoadError,v=iN(iN({},this.props.imageProps),{onLoadingStateChange:this._onImageLoadingStateChange}),b=g&&o||QB,y=this.props["aria-label"]||this.props.ariaLabel,_=v.alt||y||this.props.title,x=_||this.props["aria-labelledby"]||v["aria-label"]||v["aria-labelledby"]?{role:l||m?void 0:"img","aria-label":l||m?void 0:_}:{"aria-hidden":!0},C=d;return m&&d&&"object"==typeof d&&_&&(C=w.cloneElement(d,{alt:_})),w.createElement(h,iN({"data-icon-name":n},x,f,m?{title:void 0,"aria-label":void 0}:{},{className:p.root}),l?w.createElement(b,iN({},v)):t||C)},t}(w.Component),sM=PB(oM,function(e){var t=e.className,r=e.iconClassName,i=e.isPlaceholder,n=e.isImage,o=e.styles;return{root:[i&&eM.placeholder,eM.root,n&&eM.image,r,t,o&&o.root,o&&o.imageContainer]}},void 0,{scope:"Icon"},!0);function aM(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.length<2?t[0]:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];t.forEach(function(t){return t&&t.apply(e,r)})}}function lM(e){!function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=aM(e,e[r],t[r]))}(e,{componentDidMount:cM,componentDidUpdate:uM,componentWillUnmount:dM})}function cM(){mM(this.props.componentRef,this)}function uM(e){e.componentRef!==this.props.componentRef&&(mM(e.componentRef,null),mM(this.props.componentRef,this))}function dM(){mM(this.props.componentRef,null)}function mM(e,t){e&&("object"==typeof e?e.current=t:"function"==typeof e&&e(t))}sM.displayName="Icon";var pM,hM=function(){function e(e,t){this._timeoutIds=null,this._immediateIds=null,this._intervalIds=null,this._animationFrameIds=null,this._isDisposed=!1,this._parent=e||null,this._onErrorHandler=t,this._noop=function(){}}return e.prototype.dispose=function(){var e;if(this._isDisposed=!0,this._parent=null,this._timeoutIds){for(e in this._timeoutIds)this._timeoutIds.hasOwnProperty(e)&&this.clearTimeout(parseInt(e,10));this._timeoutIds=null}if(this._immediateIds){for(e in this._immediateIds)this._immediateIds.hasOwnProperty(e)&&this.clearImmediate(parseInt(e,10));this._immediateIds=null}if(this._intervalIds){for(e in this._intervalIds)this._intervalIds.hasOwnProperty(e)&&this.clearInterval(parseInt(e,10));this._intervalIds=null}if(this._animationFrameIds){for(e in this._animationFrameIds)this._animationFrameIds.hasOwnProperty(e)&&this.cancelAnimationFrame(parseInt(e,10));this._animationFrameIds=null}},e.prototype.setTimeout=function(e,t){var r=this,i=0;return this._isDisposed||(this._timeoutIds||(this._timeoutIds={}),i=setTimeout(function(){try{r._timeoutIds&&delete r._timeoutIds[i],e.apply(r._parent)}catch(e){r._logError(e)}},t),this._timeoutIds[i]=!0),i},e.prototype.clearTimeout=function(e){this._timeoutIds&&this._timeoutIds[e]&&(clearTimeout(e),delete this._timeoutIds[e])},e.prototype.setImmediate=function(e,t){var r=this,i=0,n=mR(t);return this._isDisposed||(this._immediateIds||(this._immediateIds={}),i=n.setTimeout(function(){try{r._immediateIds&&delete r._immediateIds[i],e.apply(r._parent)}catch(e){r._logError(e)}},0),this._immediateIds[i]=!0),i},e.prototype.clearImmediate=function(e,t){var r=mR(t);this._immediateIds&&this._immediateIds[e]&&(r.clearTimeout(e),delete this._immediateIds[e])},e.prototype.setInterval=function(e,t){var r=this,i=0;return this._isDisposed||(this._intervalIds||(this._intervalIds={}),i=setInterval(function(){try{e.apply(r._parent)}catch(e){r._logError(e)}},t),this._intervalIds[i]=!0),i},e.prototype.clearInterval=function(e){this._intervalIds&&this._intervalIds[e]&&(clearInterval(e),delete this._intervalIds[e])},e.prototype.throttle=function(e,t,r){var i=this;if(this._isDisposed)return this._noop;var n,o,s=t||0,a=!0,l=!0,c=0,u=null;r&&"boolean"==typeof r.leading&&(a=r.leading),r&&"boolean"==typeof r.trailing&&(l=r.trailing);var d=function(t){var r=Date.now(),m=r-c,p=a?s-m:s;return m>=s&&(!t||a)?(c=r,u&&(i.clearTimeout(u),u=null),n=e.apply(i._parent,o)):null===u&&l&&(u=i.setTimeout(d,p)),n};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o=e,d(!0)}},e.prototype.debounce=function(e,t,r){var i=this;if(this._isDisposed){var n=function(){};return n.cancel=function(){},n.flush=function(){return null},n.pending=function(){return!1},n}var o,s,a=t||0,l=!1,c=!0,u=null,d=0,m=Date.now(),p=null;r&&"boolean"==typeof r.leading&&(l=r.leading),r&&"boolean"==typeof r.trailing&&(c=r.trailing),r&&"number"==typeof r.maxWait&&!isNaN(r.maxWait)&&(u=r.maxWait);var h=function(e){p&&(i.clearTimeout(p),p=null),m=e},f=function(t){h(t),o=e.apply(i._parent,s)},g=function(e){var t=Date.now(),r=!1;e&&(l&&t-d>=a&&(r=!0),d=t);var n=t-d,s=a-n,h=t-m,v=!1;return null!==u&&(h>=u&&p?v=!0:s=Math.min(s,u-h)),n>=a||v||r?f(t):null!==p&&e||!c||(p=i.setTimeout(g,s)),o},v=function(){return!!p},b=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s=e,g(!0)};return b.cancel=function(){v()&&h(Date.now())},b.flush=function(){return v()&&f(Date.now()),o},b.pending=v,b},e.prototype.requestAnimationFrame=function(e,t){var r=this,i=0,n=mR(t);if(!this._isDisposed){this._animationFrameIds||(this._animationFrameIds={});var o=function(){try{r._animationFrameIds&&delete r._animationFrameIds[i],e.apply(r._parent)}catch(e){r._logError(e)}};i=n.requestAnimationFrame?n.requestAnimationFrame(o):n.setTimeout(o,0),this._animationFrameIds[i]=!0}return i},e.prototype.cancelAnimationFrame=function(e,t){var r=mR(t);this._animationFrameIds&&this._animationFrameIds[e]&&(r.cancelAnimationFrame?r.cancelAnimationFrame(e):r.clearTimeout(e),delete this._animationFrameIds[e])},e.prototype._logError=function(e){this._onErrorHandler&&this._onErrorHandler(e)},e}(),fM=function(e){function t(t){var r=e.call(this,t)||this;return r.state={isRendered:void 0===mR()},r}return rN(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.delay;this._timeoutId=window.setTimeout(function(){e.setState({isRendered:!0})},t)},t.prototype.componentWillUnmount=function(){this._timeoutId&&clearTimeout(this._timeoutId)},t.prototype.render=function(){return this.state.isRendered?w.Children.only(this.props.children):null},t.defaultProps={delay:0},t}(w.Component),gM=LB(),vM="TextField",bM=function(e){function t(t){var r=e.call(this,t)||this;r._textElement=w.createRef(),r._onFocus=function(e){r.props.onFocus&&r.props.onFocus(e),r.setState({isFocused:!0},function(){r.props.validateOnFocusIn&&r._validate(r.value)})},r._onBlur=function(e){r.props.onBlur&&r.props.onBlur(e),r.setState({isFocused:!1},function(){r.props.validateOnFocusOut&&r._validate(r.value)})},r._onRenderLabel=function(e){var t=e.label,i=e.required,n=r._classNames.subComponentStyles?r._classNames.subComponentStyles.label:void 0;return t?w.createElement(VB,{required:i,htmlFor:r._id,styles:n,disabled:e.disabled,id:r._labelId},e.label):null},r._onRenderDescription=function(e){return e.description?w.createElement("span",{className:r._classNames.description},e.description):null},r._onRevealButtonClick=function(e){r.setState(function(e){return{isRevealingPassword:!e.isRevealingPassword}})},r._onInputChange=function(e){var t,i,n=e.target.value,o=yM(r.props,r.state)||"";void 0!==n&&n!==r._lastChangeValue&&n!==o?(r._lastChangeValue=n,null===(i=(t=r.props).onChange)||void 0===i||i.call(t,e,n),r._isControlled||r.setState({uncontrolledValue:n})):r._lastChangeValue=void 0},lM(r),r._async=new hM(r),r._fallbackId=qD(vM),r._descriptionId=qD(vM+"Description"),r._labelId=qD(vM+"Label"),r._prefixId=qD(vM+"Prefix"),r._suffixId=qD(vM+"Suffix"),r._warnControlledUsage();var i=t.defaultValue,n=void 0===i?"":i;return"number"==typeof n&&(n=String(n)),r.state={uncontrolledValue:r._isControlled?void 0:n,isFocused:!1,errorMessage:""},r._delayedValidate=r._async.debounce(r._validate,r.props.deferredValidationTime),r._lastValidation=0,r}return rN(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return yM(this.props,this.state)},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this._adjustInputHeight(),this.props.validateOnLoad&&this._validate(this.value)},t.prototype.componentWillUnmount=function(){this._async.dispose()},t.prototype.getSnapshotBeforeUpdate=function(e,t){return{selection:[this.selectionStart,this.selectionEnd]}},t.prototype.componentDidUpdate=function(e,t,r){var i=this.props,n=(r||{}).selection,o=void 0===n?[null,null]:n,s=o[0],a=o[1];!!e.multiline!=!!i.multiline&&t.isFocused&&(this.focus(),null!==s&&null!==a&&s>=0&&a>=0&&this.setSelectionRange(s,a)),e.value!==i.value&&(this._lastChangeValue=void 0);var l=yM(e,t),c=this.value;l!==c&&(this._warnControlledUsage(e),this.state.errorMessage&&!i.errorMessage&&this.setState({errorMessage:""}),this._adjustInputHeight(),_M(i)&&this._delayedValidate(c))},t.prototype.render=function(){var e=this.props,t=e.borderless,r=e.className,i=e.disabled,n=e.invalid,o=e.iconProps,s=e.inputClassName,a=e.label,l=e.multiline,c=e.required,u=e.underlined,d=e.prefix,m=e.resizable,p=e.suffix,h=e.theme,f=e.styles,g=e.autoAdjustHeight,v=e.canRevealPassword,b=e.revealPasswordAriaLabel,y=e.type,_=e.onRenderPrefix,x=void 0===_?this._onRenderPrefix:_,C=e.onRenderSuffix,k=void 0===C?this._onRenderSuffix:C,T=e.onRenderLabel,E=void 0===T?this._onRenderLabel:T,S=e.onRenderDescription,I=void 0===S?this._onRenderDescription:S,A=this.state,O=A.isFocused,N=A.isRevealingPassword,R=this._errorMessage,P="boolean"==typeof n?n:!!R,D=!!v&&"password"===y&&function(){if("boolean"!=typeof pM){var e=mR();if(null==e?void 0:e.navigator){var t=/Edg/.test(e.navigator.userAgent||"");pM=!(function(){var e,t=mR();return!!(null===(e=null==t?void 0:t.navigator)||void 0===e?void 0:e.userAgent)&&t.navigator.userAgent.indexOf("rv:11.0")>-1}()||t)}else pM=!0}return pM}(),B=this._classNames=gM(f,{theme:h,className:r,disabled:i,focused:O,required:c,multiline:l,hasLabel:!!a,hasErrorMessage:P,borderless:t,resizable:m,hasIcon:!!o,underlined:u,inputClassName:s,autoAdjustHeight:g,hasRevealButton:D});return w.createElement("div",{ref:this.props.elementRef,className:B.root},w.createElement("div",{className:B.wrapper},E(this.props,this._onRenderLabel),w.createElement("div",{className:B.fieldGroup},(void 0!==d||this.props.onRenderPrefix)&&w.createElement("div",{className:B.prefix,id:this._prefixId},x(this.props,this._onRenderPrefix)),l?this._renderTextArea():this._renderInput(),o&&w.createElement(sM,iN({className:B.icon},o)),D&&w.createElement("button",{"aria-label":b,className:B.revealButton,onClick:this._onRevealButtonClick,"aria-pressed":!!N,type:"button"},w.createElement("span",{className:B.revealSpan},w.createElement(sM,{className:B.revealIcon,iconName:N?"Hide":"RedEye"}))),(void 0!==p||this.props.onRenderSuffix)&&w.createElement("div",{className:B.suffix,id:this._suffixId},k(this.props,this._onRenderSuffix)))),this._isDescriptionAvailable&&w.createElement("span",{id:this._descriptionId},I(this.props,this._onRenderDescription),R&&w.createElement("div",{role:"alert"},w.createElement(fM,null,this._renderErrorMessage()))))},t.prototype.focus=function(){this._textElement.current&&this._textElement.current.focus()},t.prototype.blur=function(){this._textElement.current&&this._textElement.current.blur()},t.prototype.select=function(){this._textElement.current&&this._textElement.current.select()},t.prototype.setSelectionStart=function(e){this._textElement.current&&(this._textElement.current.selectionStart=e)},t.prototype.setSelectionEnd=function(e){this._textElement.current&&(this._textElement.current.selectionEnd=e)},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._textElement.current?this._textElement.current.selectionStart:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._textElement.current?this._textElement.current.selectionEnd:-1},enumerable:!1,configurable:!0}),t.prototype.setSelectionRange=function(e,t){this._textElement.current&&this._textElement.current.setSelectionRange(e,t)},t.prototype._warnControlledUsage=function(e){this._id,this.props,null!==this.props.value||this._hasWarnedNullValue||(this._hasWarnedNullValue=!0,ED("Warning: 'value' prop on '".concat(vM,"' should not be null. Consider using an ")+"empty string to clear the component or undefined to indicate an uncontrolled component."))},Object.defineProperty(t.prototype,"_id",{get:function(){return this.props.id||this._fallbackId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isControlled",{get:function(){return void 0!==(e=this.props)["value"]&&null!==e.value;var e},enumerable:!1,configurable:!0}),t.prototype._onRenderPrefix=function(e){var t=e.prefix;return w.createElement("span",{style:{paddingBottom:"1px"}},t)},t.prototype._onRenderSuffix=function(e){var t=e.suffix;return w.createElement("span",{style:{paddingBottom:"1px"}},t)},Object.defineProperty(t.prototype,"_errorMessage",{get:function(){var e=this.props.errorMessage;return(void 0===e?this.state.errorMessage:e)||""},enumerable:!1,configurable:!0}),t.prototype._renderErrorMessage=function(){var e=this._errorMessage;return e?"string"==typeof e?w.createElement("p",{className:this._classNames.errorMessage},w.createElement("span",{"data-automation-id":"error-message"},e)):w.createElement("div",{className:this._classNames.errorMessage,"data-automation-id":"error-message"},e):null},Object.defineProperty(t.prototype,"_isDescriptionAvailable",{get:function(){var e=this.props;return!!(e.onRenderDescription||e.description||this._errorMessage)},enumerable:!1,configurable:!0}),t.prototype._renderTextArea=function(){var e=this.props.invalid,t=void 0===e?!!this._errorMessage:e,r=gB(this.props,iB,["defaultValue"]),i=this.props["aria-labelledby"]||(this.props.label?this._labelId:void 0);return w.createElement("textarea",iN({id:this._id},r,{ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-labelledby":i,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":t,"aria-label":this.props.ariaLabel,readOnly:this.props.readOnly,onFocus:this._onFocus,onBlur:this._onBlur}))},t.prototype._renderInput=function(){var e=this.props,t=e.ariaLabel,r=e.invalid,i=void 0===r?!!this._errorMessage:r,n=e.onRenderPrefix,o=e.onRenderSuffix,s=e.prefix,a=e.suffix,l=e.type,c=void 0===l?"text":l,u=[];e.label&&u.push(this._labelId),(void 0!==s||n)&&u.push(this._prefixId),(void 0!==a||o)&&u.push(this._suffixId);var d=iN(iN({type:this.state.isRevealingPassword?"text":c,id:this._id},gB(this.props,rB,["defaultValue","type"])),{"aria-labelledby":this.props["aria-labelledby"]||(u.length>0?u.join(" "):void 0),ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-label":t,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":i,onFocus:this._onFocus,onBlur:this._onBlur}),m=function(e){return w.createElement("input",iN({},e))};return(this.props.onRenderInput||m)(d,m)},t.prototype._validate=function(e){var t=this;if(this._latestValidateValue!==e||!_M(this.props)){this._latestValidateValue=e;var r=this.props.onGetErrorMessage,i=r&&r(e||"");if(void 0!==i)if("string"!=typeof i&&"then"in i){var n=++this._lastValidation;i.then(function(r){n===t._lastValidation&&t.setState({errorMessage:r}),t._notifyAfterValidate(e,r)})}else this.setState({errorMessage:i}),this._notifyAfterValidate(e,i);else this._notifyAfterValidate(e,"")}},t.prototype._notifyAfterValidate=function(e,t){e===this.value&&this.props.onNotifyValidationResult&&this.props.onNotifyValidationResult(t,e)},t.prototype._adjustInputHeight=function(){var e,t;if(this._textElement.current&&this.props.autoAdjustHeight&&this.props.multiline){var r=null===(t=null===(e=this.props.scrollContainerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.scrollTop,i=this._textElement.current;i.style.height="",i.style.height=i.scrollHeight+"px",r&&(this.props.scrollContainerRef.current.scrollTop=r)}},t.defaultProps={resizable:!0,deferredValidationTime:200,validateOnLoad:!0},t}(w.Component);function yM(e,t){var r=e.value,i=void 0===r?t.uncontrolledValue:r;return"number"==typeof i?String(i):i}function _M(e){return!(e.validateOnFocusIn||e.validateOnFocusOut)}var xM={root:"ms-TextField",description:"ms-TextField-description",errorMessage:"ms-TextField-errorMessage",field:"ms-TextField-field",fieldGroup:"ms-TextField-fieldGroup",prefix:"ms-TextField-prefix",suffix:"ms-TextField-suffix",wrapper:"ms-TextField-wrapper",revealButton:"ms-TextField-reveal",multiline:"ms-TextField--multiline",borderless:"ms-TextField--borderless",underlined:"ms-TextField--underlined",unresizable:"ms-TextField--unresizable",required:"is-required",disabled:"is-disabled",active:"is-active"};function wM(e){var t=e.underlined,r=e.disabled,i=e.focused,n=e.theme,o=n.palette,s=n.fonts;return function(){var e;return{root:[t&&r&&{color:o.neutralTertiary},t&&{fontSize:s.medium.fontSize,marginRight:8,paddingLeft:12,paddingRight:0,lineHeight:"22px",height:32},t&&i&&{selectors:(e={},e[SP]={height:31},e)}]}}}var CM,kM,TM=PB(bM,function(e){var t,r,i,n,o,s,a,l,c,u,d,m,p=e.theme,h=e.className,f=e.disabled,g=e.focused,v=e.required,b=e.multiline,y=e.hasLabel,_=e.borderless,x=e.underlined,w=e.hasIcon,C=e.resizable,k=e.hasErrorMessage,T=e.inputClassName,E=e.autoAdjustHeight,S=e.hasRevealButton,I=p.semanticColors,A=p.effects,O=p.fonts,N=EP(xM,p),R={background:I.disabledBackground,color:f?I.disabledText:I.inputPlaceholderText,display:"flex",alignItems:"center",padding:"0 10px",lineHeight:1,whiteSpace:"nowrap",flexShrink:0,selectors:(t={},t[SP]={background:"Window",color:f?"GrayText":"WindowText"},t)},P=[{color:I.inputPlaceholderText,opacity:1,selectors:(r={},r[SP]={color:"GrayText"},r)}],D={color:I.disabledText,selectors:(i={},i[SP]={color:"GrayText"},i)};return{root:[N.root,O.medium,v&&N.required,f&&N.disabled,g&&N.active,b&&N.multiline,_&&N.borderless,x&&N.underlined,kD,{position:"relative"},h],wrapper:[N.wrapper,x&&[{display:"flex",borderBottom:"1px solid ".concat(k?I.errorText:I.inputBorder),width:"100%"},f&&{borderBottomColor:I.disabledBackground,selectors:(n={},n[SP]=iN({borderColor:"GrayText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),n)},!f&&{selectors:{":hover":{borderBottomColor:k?I.errorText:I.inputBorderHovered,selectors:(o={},o[SP]=iN({borderBottomColor:"Highlight"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),o)}}},g&&[{position:"relative"},BP(k?I.errorText:I.inputFocusBorderAlt,0,"borderBottom")]]],fieldGroup:[N.fieldGroup,kD,{border:"1px solid ".concat(I.inputBorder),borderRadius:A.roundedCorner2,background:I.inputBackground,cursor:"text",height:32,display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},b&&{minHeight:"60px",height:"auto",display:"flex"},!g&&!f&&{selectors:{":hover":{borderColor:I.inputBorderHovered,selectors:(s={},s[SP]=iN({borderColor:"Highlight"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),s)}}},g&&!x&&BP(k?I.errorText:I.inputFocusBorderAlt,A.roundedCorner2),f&&{borderColor:I.disabledBackground,selectors:(a={},a[SP]=iN({borderColor:"GrayText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),a),cursor:"default"},_&&{border:"none"},_&&g&&{border:"none",selectors:{":after":{border:"none"}}},x&&{flex:"1 1 0px",border:"none",textAlign:"left"},x&&f&&{backgroundColor:"transparent"},k&&!x&&{borderColor:I.errorText,selectors:{"&:hover":{borderColor:I.errorText}}},!y&&v&&{selectors:(l={":before":{content:"'*'",color:I.errorText,position:"absolute",top:-5,right:-10}},l[SP]={selectors:{":before":{color:"WindowText",right:-14}}},l)}],field:[O.medium,N.field,kD,{borderRadius:0,border:"none",background:"none",backgroundColor:"transparent",color:I.inputText,padding:"0 8px",width:"100%",minWidth:0,textOverflow:"ellipsis",outline:0,selectors:(c={"&:active, &:focus, &:hover":{outline:0},"::-ms-clear":{display:"none"}},c[SP]={background:"Window",color:f?"GrayText":"WindowText"},c)},TD(P),b&&!C&&[N.unresizable,{resize:"none"}],b&&{minHeight:"inherit",lineHeight:17,flexGrow:1,paddingTop:6,paddingBottom:6,overflow:"auto",width:"100%"},b&&E&&{overflow:"hidden"},w&&!S&&{paddingRight:24},b&&w&&{paddingRight:40},f&&[{backgroundColor:I.disabledBackground,color:I.disabledText,borderColor:I.disabledBackground},TD(D)],x&&{textAlign:"left"},g&&!_&&{selectors:(u={},u[SP]={paddingLeft:11,paddingRight:11},u)},g&&b&&!_&&{selectors:(d={},d[SP]={paddingTop:4},d)},T],icon:[b&&{paddingRight:24,alignItems:"flex-end"},{pointerEvents:"none",position:"absolute",bottom:6,right:8,top:"auto",fontSize:wP.medium,lineHeight:18},f&&{color:I.disabledText}],description:[N.description,{color:I.bodySubtext,fontSize:O.xSmall.fontSize}],errorMessage:[N.errorMessage,CP.slideDownIn20,O.small,{color:I.errorText,margin:0,paddingTop:5,display:"flex",alignItems:"center"}],prefix:[N.prefix,R],suffix:[N.suffix,R],revealButton:[N.revealButton,"ms-Button","ms-Button--icon",DP(p,{inset:1}),{height:30,width:32,border:"none",padding:"0px 4px",backgroundColor:"transparent",color:I.link,selectors:{":hover":{outline:0,color:I.primaryButtonBackgroundHovered,backgroundColor:I.buttonBackgroundHovered,selectors:(m={},m[SP]={borderColor:"Highlight",color:"Highlight"},m)},":focus":{outline:0}}},w&&{marginRight:28}],revealSpan:{display:"flex",height:"100%",alignItems:"center"},revealIcon:{margin:"0px 4px",pointerEvents:"none",bottom:6,right:8,top:"auto",fontSize:wP.medium,lineHeight:18},subComponentStyles:{label:wM(e)}}},void 0,{scope:"TextField"});!function(e){e[e.button=0]="button",e[e.anchor=1]="anchor"}(CM||(CM={})),function(e){e[e.normal=0]="normal",e[e.primary=1]="primary",e[e.hero=2]="hero",e[e.compound=3]="compound",e[e.command=4]="command",e[e.icon=5]="icon",e[e.default=6]="default"}(kM||(kM={}));var EM=function(e){var t={refs:[]};return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.resolver&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t.refs,e)||(t.resolver=function(e){return function(t){for(var r=0,i=e.refs;r<i.length;r++){var n=i[r];"function"==typeof n?n(t):n&&(n.current=t)}}}(t)),t.refs=e,t.resolver}};function SM(e,t){var r,i;if(void 0===t&&(t=!0),!e)return null;var n=t&&function(e){var t,r;return e&&(r=e)&&r._virtual&&(t=e._virtual.parent),t}(e);return n||("function"!=typeof e.assignedElements&&(null===(r=e.assignedSlot)||void 0===r?void 0:r.parentNode)?e.assignedSlot:11===(null===(i=e.parentNode)||void 0===i?void 0:i.nodeType)?e.parentNode.host:e.parentNode)}function IM(e,t,r){return null!=r||(r=document),!e||e===r.body||e instanceof Document?null:t(e)?e:IM(SM(e),t)}var AM="data-portal-element";function OM(e,t,r){var i,n=IM(e,function(e){var r;return t===e||!!(null===(r=e.hasAttribute)||void 0===r?void 0:r.call(e,AM))},r);return null!==n&&!!(null===(i=n.hasAttribute)||void 0===i?void 0:i.call(n,AM))}function NM(e,t){if(!e||!t)return!e&&!t;for(var r in e)if(e.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;for(var r in t)if(t.hasOwnProperty(r)&&!e.hasOwnProperty(r))return!1;return!0}function RM(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return PM.apply(this,[null,e].concat(t))}function PM(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];t=t||{};for(var n=0,o=r;n<o.length;n++){var s=o[n];if(s)for(var a in s)!s.hasOwnProperty(a)||e&&!e(a)||(t[a]=s[a])}return t}var DM,BM=function(){function e(t){this._id=e._uniqueId++,this._parent=t,this._eventRecords=[]}return e.raise=function(t,r,i,n,o){var s,a=null!=o?o:uR();if(e._isElement(t)){if(void 0!==a&&a.createEvent){var l=a.createEvent("HTMLEvents");l.initEvent(r,n||!1,!0),RM(l,i),s=t.dispatchEvent(l)}else if(void 0!==a&&a.createEventObject){var c=a.createEventObject(i);t.fireEvent("on"+r,c)}}else for(;t&&!1!==s;){var u=t.__events__,d=u?u[r]:null;if(d)for(var m in d)if(d.hasOwnProperty(m))for(var p=d[m],h=0;!1!==s&&h<p.length;h++){var f=p[h];f.objectCallback&&(s=f.objectCallback.call(f.parent,i))}t=n?t.parent:null}return s},e.isObserved=function(e,t){var r=e&&e.__events__;return!!r&&!!r[t]},e.isDeclared=function(e,t){var r=e&&e.__declaredEvents;return!!r&&!!r[t]},e.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},e._isElement=function(e){return!!e&&(!!e.addEventListener||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement)},e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.off(),this._parent=null)},e.prototype.onAll=function(e,t,r){for(var i in t)t.hasOwnProperty(i)&&this.on(e,i,t[i],r)},e.prototype.on=function(t,r,i,n){var o=this;if(r.indexOf(",")>-1)for(var s=r.split(/[ ,]+/),a=0;a<s.length;a++)this.on(t,s[a],i,n);else{var l=this._parent,c={target:t,eventName:r,parent:l,callback:i,options:n};if((s=t.__events__=t.__events__||{})[r]=s[r]||{count:0},s[r][this._id]=s[r][this._id]||[],s[r][this._id].push(c),s[r].count++,e._isElement(t)){var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o._isDisposed){var r;try{if(!1===(r=i.apply(l,e))&&e[0]){var n=e[0];n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0}}catch(n){}return r}};c.elementCallback=u,t.addEventListener?t.addEventListener(r,u,n):t.attachEvent&&t.attachEvent("on"+r,u)}else c.objectCallback=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o._isDisposed)return i.apply(l,e)};this._eventRecords.push(c)}},e.prototype.off=function(e,t,r,i){for(var n=0;n<this._eventRecords.length;n++){var o=this._eventRecords[n];if(!(e&&e!==o.target||t&&t!==o.eventName||r&&r!==o.callback||"boolean"==typeof i&&i!==o.options)){var s=o.target.__events__,a=s[o.eventName],l=a?a[this._id]:null;l&&(1!==l.length&&r?(a.count--,l.splice(l.indexOf(o),1)):(a.count-=l.length,delete s[o.eventName][this._id]),a.count||delete s[o.eventName]),o.elementCallback&&(o.target.removeEventListener?o.target.removeEventListener(o.eventName,o.elementCallback,o.options):o.target.detachEvent&&o.target.detachEvent("on"+o.eventName,o.elementCallback)),this._eventRecords.splice(n--,1)}}},e.prototype.raise=function(t,r,i){return e.raise(this._parent,t,r,i)},e.prototype.declare=function(e){var t=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if("string"==typeof e)t[e]=!0;else for(var r=0;r<e.length;r++)t[e[r]]=!0},e._uniqueId=0,e}();function MM(e,t,r){var i=e[r],n=t[r];(i||n)&&(e[r]=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n&&(e=n.apply(this,t)),i!==n&&(e=i.apply(this,t)),e})}function LM(){return null}!function(e){function t(r,i){var n=e.call(this,r,i)||this;return function(e,t,r){for(var i=0,n=r.length;i<n;i++)MM(e,t,r[i])}(n,t.prototype,["componentDidMount","shouldComponentUpdate","getSnapshotBeforeUpdate","render","componentDidUpdate","componentWillUnmount"]),n}rN(t,e),t.prototype.componentDidUpdate=function(e,t){this._updateComponentRef(e,this.props)},t.prototype.componentDidMount=function(){this._setComponentRef(this.props.componentRef,this)},t.prototype.componentWillUnmount=function(){if(this._setComponentRef(this.props.componentRef,null),this.__disposables){for(var e=0,t=this._disposables.length;e<t;e++){var r=this.__disposables[e];r.dispose&&r.dispose()}this.__disposables=null}},Object.defineProperty(t.prototype,"className",{get:function(){if(!this.__className){var e=/function (.{1,})\(/.exec(this.constructor.toString());this.__className=e&&e.length>1?e[1]:""}return this.__className},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_disposables",{get:function(){return this.__disposables||(this.__disposables=[]),this.__disposables},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_async",{get:function(){return this.__async||(this.__async=new hM(this),this._disposables.push(this.__async)),this.__async},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_events",{get:function(){return this.__events||(this.__events=new BM(this),this._disposables.push(this.__events)),this.__events},enumerable:!1,configurable:!0}),t.prototype._resolveRef=function(e){var t=this;return this.__resolves||(this.__resolves={}),this.__resolves[e]||(this.__resolves[e]=function(r){return t[e]=r}),this.__resolves[e]},t.prototype._updateComponentRef=function(e,t){void 0===t&&(t={}),e&&t&&e.componentRef!==t.componentRef&&(this._setComponentRef(e.componentRef,null),this._setComponentRef(t.componentRef,this))},t.prototype._warnDeprecations=function(e){this.className,this.props},t.prototype._warnMutuallyExclusive=function(e){this.className,this.props},t.prototype._warnConditionallyRequiredProps=function(e,t,r){this.className,this.props},t.prototype._setComponentRef=function(e,t){!this._skipComponentRefResolution&&e&&("function"==typeof e&&e(t),"object"==typeof e&&(e.current=t))}}(w.Component);var zM=((DM={})[38]=1,DM[40]=1,DM[37]=1,DM[39]=1,DM[36]=1,DM[35]=1,DM[9]=1,DM[33]=1,DM[34]=1,DM);function FM(e){return!!zM[e]}var jM=new WeakMap,HM=new WeakMap;function qM(e,t){var r,i=jM.get(e);return r=i?i+t:1,jM.set(e,r),r}function UM(e){var t=HM.get(e);return t||(t={onMouseDown:function(t){return KM(t,e.registeredProviders)},onPointerDown:function(t){return $M(t,e.registeredProviders)},onKeyDown:function(t){return YM(t,e.registeredProviders)},onKeyUp:function(t){return JM(t,e.registeredProviders)}},HM.set(e,t),t)}var GM=w.createContext(void 0);function WM(e){var t=w.useContext(GM);w.useEffect(function(){var r,i,n,o,s=mR(null==e?void 0:e.current);if(s&&!0!==(null===(r=s.FabricConfig)||void 0===r?void 0:r.disableFocusRects)){var a,l,c,u,d=s;if((null===(i=null==t?void 0:t.providerRef)||void 0===i?void 0:i.current)&&(null===(o=null===(n=null==t?void 0:t.providerRef)||void 0===n?void 0:n.current)||void 0===o?void 0:o.addEventListener)){d=t.providerRef.current;var m=UM(t);a=m.onMouseDown,l=m.onPointerDown,c=m.onKeyDown,u=m.onKeyUp}else a=KM,l=$M,c=YM,u=JM;var p=qM(d,1);return p<=1&&(d.addEventListener("mousedown",a,!0),d.addEventListener("pointerdown",l,!0),d.addEventListener("keydown",c,!0),d.addEventListener("keyup",u,!0)),function(){var e;s&&!0!==(null===(e=s.FabricConfig)||void 0===e?void 0:e.disableFocusRects)&&0===(p=qM(d,-1))&&(d.removeEventListener("mousedown",a,!0),d.removeEventListener("pointerdown",l,!0),d.removeEventListener("keydown",c,!0),d.removeEventListener("keyup",u,!0))}}},[t,e])}var VM=function(e){return WM(e.rootRef),null};function KM(e,t){PP(!1,e.target,t)}function $M(e,t){"mouse"!==e.pointerType&&PP(!1,e.target,t)}function YM(e,t){FM(e.which)&&PP(!0,e.target,t)}function JM(e,t){FM(e.which)&&PP(!0,e.target,t)}function XM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.filter(function(e){return e}).join(" ").trim();return""===r?void 0:r}var ZM,QM=function(e){var t=e.className,r=e.imageProps,i=gB(e,$D,["aria-label","aria-labelledby","title","aria-describedby"]),n=r.alt||e["aria-label"],o=n||e["aria-labelledby"]||e.title||r["aria-label"]||r["aria-labelledby"]||r.title,s={"aria-labelledby":e["aria-labelledby"],"aria-describedby":e["aria-describedby"],title:e.title},a=o?{}:{"aria-hidden":!0};return w.createElement("div",iN({},a,i,{className:vB(tM,eM.root,eM.image,t)}),w.createElement(QB,iN({},s,r,{alt:o?n:""})))},eL=QN(function(e){return QN(function(t){var r=QN(function(e){return function(r){return t(r,e)}});return function(i,n){return e(i,n?r(n):t)}})});function tL(e,t){return eL(e)(t)}!function(e){e[e.Normal=0]="Normal",e[e.Divider=1]="Divider",e[e.Header=2]="Header",e[e.Section=3]="Section"}(ZM||(ZM={}));var rL;function iL(e,t,r){void 0===r&&(r=!0);var i=!1;if(e&&t)if(r)if(e===t)i=!0;else for(i=!1;t;){var n=SM(t);if(n===e){i=!0;break}t=n}else e.contains&&(i=e.contains(t));return i}function nL(e,t,r,i,n,o,s,a,l){var c;if(!t||!s&&t===e)return null;var u=sL(t);if(n&&u&&(o||!cL(t)&&!uL(t))){var d=nL(e,t.lastElementChild||l&&(null===(c=t.shadowRoot)||void 0===c?void 0:c.lastElementChild),!0,!0,!0,o,s,a,l);if(d){if(a&&lL(d,!0,l)||!a)return d;var m=nL(e,d.previousElementSibling,!0,!0,!0,o,s,a,l);if(m)return m;for(var p=d.parentElement;p&&p!==t;){var h=nL(e,p.previousElementSibling,!0,!0,!0,o,s,a,l);if(h)return h;p=p.parentElement}}}return r&&u&&lL(t,a,l)?t:nL(e,t.previousElementSibling,!0,!0,!0,o,s,a,l)||(i?null:nL(e,t.parentElement,!0,!1,!1,o,s,a,l))}function oL(e,t,r,i,n,o,s,a,l,c){var u;if(!t||t===e&&n&&!s)return null;var d=(l?aL:sL)(t);if(r&&d&&lL(t,a,c))return t;if(!n&&d&&(o||!cL(t)&&!uL(t))){var m=oL(e,t.firstElementChild||c&&(null===(u=t.shadowRoot)||void 0===u?void 0:u.firstElementChild),!0,!0,!1,o,s,a,l,c);if(m)return m}return t===e?null:oL(e,t.nextElementSibling,!0,!0,!1,o,s,a,l,c)||(i?null:oL(e,t.parentElement,!1,!1,!0,o,s,a,l,c))}function sL(e){if(!e||!e.getAttribute)return!1;var t=e.getAttribute("data-is-visible");return null!=t?"true"===t:0!==e.offsetHeight||null!==e.offsetParent||!0===e.isVisible}function aL(e,t){var r=null!=t?t:mR();return!!e&&sL(e)&&!e.hidden&&"hidden"!==r.getComputedStyle(e).visibility}function lL(e,t,r){if(void 0===r&&(r=!0),!e||e.disabled)return!1;var i=0,n=null;e&&e.getAttribute&&(n=e.getAttribute("tabIndex"))&&(i=parseInt(n,10));var o=e.getAttribute?e.getAttribute("data-is-focusable"):null,s=null!==n&&i>=0,a=!(!r||!e.shadowRoot||!e.shadowRoot.delegatesFocus),l=!!e&&"false"!==o&&("A"===e.tagName||"BUTTON"===e.tagName||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||"true"===o||s||a);return t?-1!==i&&l:l}function cL(e){return!!(e&&e.getAttribute&&e.getAttribute("data-focuszone-id"))}function uL(e){return!(!e||!e.getAttribute||"true"!==e.getAttribute("data-is-sub-focuszone"))}function dL(e,t,r){return"true"!==function(e,t,r){var i=IM(e,function(e){return e.hasAttribute(t)},r);return i&&i.getAttribute(t)}(e,t,null!=r?r:uR())}!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.bidirectional=2]="bidirectional",e[e.domOrder=3]="domOrder"}(rL||(rL={}));var mL,pL=void 0;function hL(e){if(e){var t=mR(e);t&&(void 0!==pL&&t.cancelAnimationFrame(pL),pL=t.requestAnimationFrame(function(){e&&e.focus(),pL=void 0}))}}var fL=0,gL=GN({overflow:"hidden !important"}),vL="data-is-scrollable",bL=function(e){e.preventDefault()};function yL(e){for(var t=e,r=uR(e);t&&t!==r.body;){if("true"===t.getAttribute(vL))return t;t=t.parentElement}for(t=e;t&&t!==r.body;){if("false"!==t.getAttribute(vL)){var i=getComputedStyle(t),n=i?i.getPropertyValue("overflow-y"):"";if(n&&("scroll"===n||"auto"===n))return t}t=t.parentElement}return t&&t!==r.body||(t=mR(e)),t}var _L,xL=w.createContext(void 0),wL="data-is-focusable",CL="data-focuszone-id",kL="tabindex",TL="data-no-vertical-wrap",EL="data-no-horizontal-wrap",SL=999999999,IL=-999999999;function AL(e,t){var r;"function"==typeof MouseEvent?r=new MouseEvent("click",{ctrlKey:null==t?void 0:t.ctrlKey,metaKey:null==t?void 0:t.metaKey,shiftKey:null==t?void 0:t.shiftKey,altKey:null==t?void 0:t.altKey,bubbles:null==t?void 0:t.bubbles,cancelable:null==t?void 0:t.cancelable}):(r=document.createEvent("MouseEvents")).initMouseEvent("click",!!t&&t.bubbles,!!t&&t.cancelable,window,0,0,0,0,0,!!t&&t.ctrlKey,!!t&&t.altKey,!!t&&t.shiftKey,!!t&&t.metaKey,0,null),e.dispatchEvent(r)}var OL,NL={},RL=new Set,PL=["text","number","password","email","tel","url","search","textarea"],DL=!1,BL=function(e){function t(r){var i,n,o,s,a=e.call(this,r)||this;a._root=w.createRef(),a._mergedRef=EM(),a._onFocus=function(e){if(!a._portalContainsElement(e.target)){var t,r=a.props,i=r.onActiveElementChanged,n=r.doNotAllowFocusEventToPropagate,o=r.stopFocusPropagation,s=r.onFocusNotification,l=r.onFocus,c=r.shouldFocusInnerElementWhenReceivedFocus,u=r.defaultTabbableElement,d=a._isImmediateDescendantOfZone(e.target);if(d)t=e.target;else for(var m=e.target;m&&m!==a._root.current;){if(lL(m,void 0,a._inShadowRoot)&&a._isImmediateDescendantOfZone(m)){t=m;break}m=SM(m,DL)}if(c&&e.target===a._root.current){var p=u&&"function"==typeof u&&a._root.current&&u(a._root.current);p&&lL(p,void 0,a._inShadowRoot)?(t=p,p.focus()):(a.focus(!0),a._activeElement&&(t=null))}var h=!a._activeElement;t&&t!==a._activeElement&&((d||h)&&a._setFocusAlignment(t,!0,!0),a._activeElement=t,h&&a._updateTabIndexes()),i&&i(a._activeElement,e),(o||n)&&e.stopPropagation(),l?l(e):s&&s()}},a._onBlur=function(){a._setParkedFocus(!1)},a._onMouseDown=function(e){if(!a._portalContainsElement(e.target)&&!a.props.disabled){for(var t=e.target,r=[];t&&t!==a._root.current;)r.push(t),t=SM(t,DL);for(;r.length&&((t=r.pop())&&lL(t,void 0,a._inShadowRoot)&&a._setActiveElement(t,!0),!cL(t)););}},a._onKeyDown=function(e,t){if(!a._portalContainsElement(e.target)){var r=a.props,i=r.direction,n=r.disabled,o=r.isInnerZoneKeystroke,s=r.pagingSupportDisabled,l=r.shouldEnterInnerZone;if(!(n||(a.props.onKeyDown&&a.props.onKeyDown(e),e.isDefaultPrevented()||a._getDocument().activeElement===a._root.current&&a._isInnerZone))){if((l&&l(e)||o&&o(e))&&a._isImmediateDescendantOfZone(e.target)){var c=a._getFirstInnerZone();if(c){if(!c.focus(!0))return}else{if(!uL(e.target))return;if(!a.focusElement(oL(e.target,e.target.firstChild,!0)))return}}else{if(e.altKey)return;switch(e.which){case nR:if(a._shouldRaiseClicksOnSpace&&a._tryInvokeClickForFocusable(e.target,e))break;return;case oR:if(i!==rL.vertical&&(a._preventDefaultWhenHandled(e),a._moveFocusLeft(t)))break;return;case aR:if(i!==rL.vertical&&(a._preventDefaultWhenHandled(e),a._moveFocusRight(t)))break;return;case sR:if(i!==rL.horizontal&&(a._preventDefaultWhenHandled(e),a._moveFocusUp()))break;return;case lR:if(i!==rL.horizontal&&(a._preventDefaultWhenHandled(e),a._moveFocusDown()))break;return;case 34:if(!s&&a._moveFocusPaging(!0))break;return;case 33:if(!s&&a._moveFocusPaging(!1))break;return;case 9:if(a.props.allowTabKey||1===a.props.handleTabKey||2===a.props.handleTabKey&&a._isElementInput(e.target)){var u=!1;if(a._processingTabKey=!0,u=i!==rL.vertical&&a._shouldWrapFocus(a._activeElement,EL)?(gR(t)?!e.shiftKey:e.shiftKey)?a._moveFocusLeft(t):a._moveFocusRight(t):e.shiftKey?a._moveFocusUp():a._moveFocusDown(),a._processingTabKey=!1,u)break;a.props.shouldResetActiveElementWhenTabFromZone&&(a._activeElement=null)}return;case 36:if(a._isContentEditableElement(e.target)||a._isElementInput(e.target)&&!a._shouldInputLoseFocus(e.target,!1))return!1;var d=a._root.current&&a._root.current.firstChild;if(a._root.current&&d&&a.focusElement(oL(a._root.current,d,!0)))break;return;case 35:if(a._isContentEditableElement(e.target)||a._isElementInput(e.target)&&!a._shouldInputLoseFocus(e.target,!0))return!1;var m=a._root.current&&a._root.current.lastChild;if(a._root.current&&a.focusElement(nL(a._root.current,m,!0,!0,!0)))break;return;case rR:if(a._shouldRaiseClicksOnEnter&&a._tryInvokeClickForFocusable(e.target,e))break;return;default:return}}e.preventDefault(),e.stopPropagation()}}},a._getHorizontalDistanceFromCenter=function(e,t,r){var i=a._focusAlignment.left||a._focusAlignment.x||0,n=Math.floor(r.top),o=Math.floor(t.bottom),s=Math.floor(r.bottom),l=Math.floor(t.top);return e&&n>o||!e&&s<l?i>=r.left&&i<=r.left+r.width?0:Math.abs(r.left+r.width/2-i):a._shouldWrapFocus(a._activeElement,TL)?SL:IL},lM(a),a._id=qD("FocusZone"),a._focusAlignment={left:0,top:0},a._processingTabKey=!1;var l=null===(n=null!==(i=r.shouldRaiseClicks)&&void 0!==i?i:t.defaultProps.shouldRaiseClicks)||void 0===n||n;return a._shouldRaiseClicksOnEnter=null!==(o=r.shouldRaiseClicksOnEnter)&&void 0!==o?o:l,a._shouldRaiseClicksOnSpace=null!==(s=r.shouldRaiseClicksOnSpace)&&void 0!==s?s:l,a}return rN(t,e),t.getOuterZones=function(){return RL.size},t._onKeyDownCapture=function(e){9===e.which&&RL.forEach(function(e){return e._updateTabIndexes()})},t.prototype.componentDidMount=function(){var e,r=this._root.current;if(this._inShadowRoot=!!(null===(e=this.context)||void 0===e?void 0:e.shadowRoot),NL[this._id]=this,r){for(var i=SM(r,DL);i&&i!==this._getDocument().body&&1===i.nodeType;){if(cL(i)){this._isInnerZone=!0;break}i=SM(i,DL)}this._isInnerZone||(RL.add(this),this._root.current&&this._root.current.addEventListener("keydown",t._onKeyDownCapture,!0)),this._root.current&&this._root.current.addEventListener("blur",this._onBlur,!0),this._updateTabIndexes(),this.props.defaultTabbableElement&&"string"==typeof this.props.defaultTabbableElement?this._activeElement=this._getDocument().querySelector(this.props.defaultTabbableElement):this.props.defaultActiveElement&&(this._activeElement=this._getDocument().querySelector(this.props.defaultActiveElement)),this.props.shouldFocusOnMount&&this.focus()}},t.prototype.componentDidUpdate=function(){var e,t=this._root.current,r=this._getDocument();if(this._inShadowRoot=!!(null===(e=this.context)||void 0===e?void 0:e.shadowRoot),(this._activeElement&&!iL(this._root.current,this._activeElement,DL)||this._defaultFocusElement&&!iL(this._root.current,this._defaultFocusElement,DL))&&(this._activeElement=null,this._defaultFocusElement=null,this._updateTabIndexes()),!this.props.preventFocusRestoration&&r&&this._lastIndexPath&&(r.activeElement===r.body||null===r.activeElement||r.activeElement===t)){var i=function(e,t){for(var r=e,i=0,n=t;i<n.length;i++){var o=n[i],s=r.children[Math.min(o,r.children.length-1)];if(!s)break;r=s}return lL(r)&&sL(r)?r:oL(e,r,!0)||nL(e,r)}(t,this._lastIndexPath);i?(this._setActiveElement(i,!0),i.focus(),this._setParkedFocus(!1)):this._setParkedFocus(!0)}},t.prototype.componentWillUnmount=function(){delete NL[this._id],this._isInnerZone||(RL.delete(this),this._root.current&&this._root.current.removeEventListener("keydown",t._onKeyDownCapture,!0)),this._root.current&&this._root.current.removeEventListener("blur",this._onBlur,!0),this._activeElement=null,this._defaultFocusElement=null},t.prototype.render=function(){var e=this,t=this.props,r=t.as,i=t.elementType,n=t.rootProps,o=t.ariaDescribedBy,s=t.ariaLabelledBy,a=t.className,l=gB(this.props,$D),c=r||i||"div";this._evaluateFocusBeforeRender();var u,d=(void 0===u&&(u=!1),!0===u&&(_D=yD({},u)),_D);return w.createElement(c,iN({"aria-labelledby":s,"aria-describedby":o},l,n,{className:vB((_L||(_L=GN({selectors:{":focus":{outline:"none"}}},"ms-FocusZone")),_L),a),ref:this._mergedRef(this.props.elementRef,this._root),"data-focuszone-id":this._id,onKeyDown:function(t){return e._onKeyDown(t,d)},onFocus:this._onFocus,onMouseDownCapture:this._onMouseDown}),this.props.children)},t.prototype.focus=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this._root.current){if(!e&&"true"===this._root.current.getAttribute(wL)&&this._isInnerZone){var r=this._getOwnerZone(this._root.current);if(r!==this._root.current){var i=NL[r.getAttribute(CL)];return!!i&&i.focusElement(this._root.current)}return!1}if(!e&&this._activeElement&&iL(this._root.current,this._activeElement)&&lL(this._activeElement,void 0,this._inShadowRoot)&&(!t||aL(this._activeElement)))return this._activeElement.focus(),!0;var n=this._root.current.firstChild;return this.focusElement(oL(this._root.current,n,!0,void 0,void 0,void 0,void 0,void 0,t))}return!1},t.prototype.focusLast=function(){if(this._root.current){var e=this._root.current&&this._root.current.lastChild;return this.focusElement(nL(this._root.current,e,!0,!0,!0))}return!1},t.prototype.focusElement=function(e,t){var r=this.props,i=r.onBeforeFocus,n=r.shouldReceiveFocus;return!(n&&!n(e)||i&&!i(e)||!e||(this._setActiveElement(e,t),this._activeElement&&this._activeElement.focus(),0))},t.prototype.setFocusAlignment=function(e){this._focusAlignment=e},Object.defineProperty(t.prototype,"defaultFocusElement",{get:function(){return this._defaultFocusElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeElement",{get:function(){return this._activeElement},enumerable:!1,configurable:!0}),t.prototype._evaluateFocusBeforeRender=function(){var e=this._root.current,t=this._getDocument();if(t){var r=t.activeElement;if(r!==e){var i=iL(e,r,!1);this._lastIndexPath=i?function(e,t){for(var r=[];t&&e&&t!==e;){var i=SM(t,!0);if(null===i)return[];r.unshift(Array.prototype.indexOf.call(i.children,t)),t=i}return r}(e,r):void 0}}},t.prototype._setParkedFocus=function(e){var t=this._root.current;t&&this._isParked!==e&&(this._isParked=e,e?(this.props.allowFocusRoot||(this._parkedTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex","-1")),t.focus()):this.props.allowFocusRoot||(this._parkedTabIndex?(t.setAttribute("tabindex",this._parkedTabIndex),this._parkedTabIndex=void 0):t.removeAttribute("tabindex")))},t.prototype._setActiveElement=function(e,t){var r=this._activeElement;this._activeElement=e,r&&(cL(r)&&this._updateTabIndexes(r),r.tabIndex=-1),this._activeElement&&(this._focusAlignment&&!t||this._setFocusAlignment(e,!0,!0),this._activeElement.tabIndex=0)},t.prototype._preventDefaultWhenHandled=function(e){this.props.preventDefaultWhenHandled&&e.preventDefault()},t.prototype._tryInvokeClickForFocusable=function(e,t){var r=e;if(r===this._root.current)return!1;do{if("BUTTON"===r.tagName||"A"===r.tagName||"INPUT"===r.tagName||"TEXTAREA"===r.tagName||"SUMMARY"===r.tagName)return!1;if(this._isImmediateDescendantOfZone(r)&&"true"===r.getAttribute(wL)&&"true"!==r.getAttribute("data-disable-click-on-enter"))return AL(r,t),!0;r=SM(r,DL)}while(r!==this._root.current);return!1},t.prototype._getFirstInnerZone=function(e){if(!(e=e||this._activeElement||this._root.current))return null;if(cL(e))return NL[e.getAttribute(CL)];for(var t=e.firstElementChild;t;){if(cL(t))return NL[t.getAttribute(CL)];var r=this._getFirstInnerZone(t);if(r)return r;t=t.nextElementSibling}return null},t.prototype._moveFocus=function(e,t,r,i){void 0===i&&(i=!0);var n=this._activeElement,o=-1,s=void 0,a=!1,l=this.props.direction===rL.bidirectional;if(!n||!this._root.current)return!1;if(this._isElementInput(n)&&!this._shouldInputLoseFocus(n,e))return!1;var c=l?n.getBoundingClientRect():null;do{if(n=e?oL(this._root.current,n):nL(this._root.current,n),!l){s=n;break}if(n){var u=t(c,n.getBoundingClientRect());if(-1===u&&-1===o){s=n;break}if(u>-1&&(-1===o||u<o)&&(o=u,s=n),o>=0&&u<0)break}}while(n);if(s&&s!==this._activeElement)a=!0,this.focusElement(s);else if(this.props.isCircularNavigation&&i)return e?this.focusElement(oL(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(nL(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return a},t.prototype._moveFocusDown=function(){var e=this,t=-1,r=this._focusAlignment.left||this._focusAlignment.x||0;return!!this._moveFocus(!0,function(i,n){var o=-1,s=Math.floor(n.top),a=Math.floor(i.bottom);return s<a?e._shouldWrapFocus(e._activeElement,TL)?SL:IL:((-1===t&&s>=a||s===t)&&(t=s,o=r>=n.left&&r<=n.left+n.width?0:Math.abs(n.left+n.width/2-r)),o)})&&(this._setFocusAlignment(this._activeElement,!1,!0),!0)},t.prototype._moveFocusUp=function(){var e=this,t=-1,r=this._focusAlignment.left||this._focusAlignment.x||0;return!!this._moveFocus(!1,function(i,n){var o=-1,s=Math.floor(n.bottom),a=Math.floor(n.top),l=Math.floor(i.top);return s>l?e._shouldWrapFocus(e._activeElement,TL)?SL:IL:((-1===t&&s<=l||a===t)&&(t=a,o=r>=n.left&&r<=n.left+n.width?0:Math.abs(n.left+n.width/2-r)),o)})&&(this._setFocusAlignment(this._activeElement,!1,!0),!0)},t.prototype._moveFocusLeft=function(e){var t=this,r=this._shouldWrapFocus(this._activeElement,EL);return!!this._moveFocus(gR(e),function(i,n){var o=-1;return(gR(e)?parseFloat(n.top.toFixed(3))<parseFloat(i.bottom.toFixed(3)):parseFloat(n.bottom.toFixed(3))>parseFloat(i.top.toFixed(3)))&&n.right<=i.right&&t.props.direction!==rL.vertical?o=i.right-n.right:r||(o=IL),o},void 0,r)&&(this._setFocusAlignment(this._activeElement,!0,!1),!0)},t.prototype._moveFocusRight=function(e){var t=this,r=this._shouldWrapFocus(this._activeElement,EL);return!!this._moveFocus(!gR(e),function(i,n){var o=-1;return(gR(e)?parseFloat(n.bottom.toFixed(3))>parseFloat(i.top.toFixed(3)):parseFloat(n.top.toFixed(3))<parseFloat(i.bottom.toFixed(3)))&&n.left>=i.left&&t.props.direction!==rL.vertical?o=n.left-i.left:r||(o=IL),o},void 0,r)&&(this._setFocusAlignment(this._activeElement,!0,!1),!0)},t.prototype._moveFocusPaging=function(e,t){void 0===t&&(t=!0);var r=this._activeElement;if(!r||!this._root.current)return!1;if(this._isElementInput(r)&&!this._shouldInputLoseFocus(r,e))return!1;var i=yL(r);if(!i)return!1;var n=-1,o=void 0,s=-1,a=-1,l=i.clientHeight,c=r.getBoundingClientRect();do{if(r=e?oL(this._root.current,r):nL(this._root.current,r)){var u=r.getBoundingClientRect(),d=Math.floor(u.top),m=Math.floor(c.bottom),p=Math.floor(u.bottom),h=Math.floor(c.top),f=this._getHorizontalDistanceFromCenter(e,c,u);if(e&&d>m+l||!e&&p<h-l)break;f>-1&&(e&&d>s?(s=d,n=f,o=r):!e&&p<a?(a=p,n=f,o=r):(-1===n||f<=n)&&(n=f,o=r))}}while(r);var g=!1;if(o&&o!==this._activeElement)g=!0,this.focusElement(o),this._setFocusAlignment(o,!1,!0);else if(this.props.isCircularNavigation&&t)return e?this.focusElement(oL(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(nL(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return g},t.prototype._setFocusAlignment=function(e,t,r){if(this.props.direction===rL.bidirectional&&(!this._focusAlignment||t||r)){var i=e.getBoundingClientRect(),n=i.left+i.width/2,o=i.top+i.height/2;this._focusAlignment||(this._focusAlignment={left:n,top:o}),t&&(this._focusAlignment.left=n),r&&(this._focusAlignment.top=o)}},t.prototype._isImmediateDescendantOfZone=function(e){return this._getOwnerZone(e)===this._root.current},t.prototype._getOwnerZone=function(e){for(var t=SM(e,DL);t&&t!==this._root.current&&t!==this._getDocument().body;){if(cL(t))return t;t=SM(t,DL)}return t},t.prototype._updateTabIndexes=function(e){!this._activeElement&&this.props.defaultTabbableElement&&"function"==typeof this.props.defaultTabbableElement&&(this._activeElement=this.props.defaultTabbableElement(this._root.current)),!e&&this._root.current&&(this._defaultFocusElement=null,e=this._root.current,this._activeElement&&!iL(e,this._activeElement)&&(this._activeElement=null)),this._activeElement&&!lL(this._activeElement,void 0,this._inShadowRoot)&&(this._activeElement=null);for(var t=e&&e.children,r=0;t&&r<t.length;r++){var i=t[r];cL(i)?"true"===i.getAttribute(wL)&&(this._isInnerZone||(this._activeElement||this._defaultFocusElement)&&this._activeElement!==i?"-1"!==i.getAttribute(kL)&&i.setAttribute(kL,"-1"):(this._defaultFocusElement=i,"0"!==i.getAttribute(kL)&&i.setAttribute(kL,"0"))):(i.getAttribute&&"false"===i.getAttribute(wL)&&i.setAttribute(kL,"-1"),lL(i,void 0,this._inShadowRoot)?this.props.disabled?i.setAttribute(kL,"-1"):this._isInnerZone||(this._activeElement||this._defaultFocusElement)&&this._activeElement!==i?"-1"!==i.getAttribute(kL)&&i.setAttribute(kL,"-1"):(this._defaultFocusElement=i,"0"!==i.getAttribute(kL)&&i.setAttribute(kL,"0")):"svg"===i.tagName&&"false"!==i.getAttribute("focusable")&&i.setAttribute("focusable","false")),this._updateTabIndexes(i)}},t.prototype._isContentEditableElement=function(e){return e&&"true"===e.getAttribute("contenteditable")},t.prototype._isElementInput=function(e){return!(!e||!e.tagName||"input"!==e.tagName.toLowerCase()&&"textarea"!==e.tagName.toLowerCase())},t.prototype._shouldInputLoseFocus=function(e,t){if(!this._processingTabKey&&e&&e.type&&PL.indexOf(e.type.toLowerCase())>-1){var r=e.selectionStart,i=r!==e.selectionEnd,n=e.value,o=e.readOnly;if(i||r>0&&!t&&!o||r!==n.length&&t&&!o||this.props.handleTabKey&&(!this.props.shouldInputLoseFocusOnArrowKey||!this.props.shouldInputLoseFocusOnArrowKey(e)))return!1}return!0},t.prototype._shouldWrapFocus=function(e,t){return!this.props.checkForNoWrap||dL(e,t)},t.prototype._portalContainsElement=function(e){return e&&!!this._root.current&&OM(e,this._root.current)},t.prototype._getDocument=function(){return uR(this._root.current)},t.defaultProps={isCircularNavigation:!1,direction:rL.bidirectional,shouldRaiseClicks:!0,"data-tabster":'{"uncontrolled": {}}'},t.contextType=xL,t}(w.Component);function ML(e){var t;if(void 0===OL||e){var r=mR(),i=null===(t=null==r?void 0:r.navigator)||void 0===t?void 0:t.userAgent;OL=!!i&&-1!==i.indexOf("Macintosh")}return!!OL}var LL=function(){return!!(window&&window.navigator&&window.navigator.userAgent)&&/iPad|iPhone|iPod/i.test(window.navigator.userAgent)};function zL(e,t){for(var r=iN({},t),i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];void 0===r[o]&&(r[o]=e[o])}return r}var FL,jL,HL=QN(function(e){var t=e;return QN(function(r){if(e===r)throw new Error("Attempted to compose a component with itself.");var i=r,n=QN(function(e){return function(t){return w.createElement(i,iN({},t,{defaultRender:e}))}});return function(e){var r=e.defaultRender;return w.createElement(t,iN({},e,{defaultRender:r?n(r):i}))}})});function qL(e,t){return HL(e)(t)}function UL(e){return e.canCheck?!(!e.isChecked&&!e.checked):"boolean"==typeof e.isChecked?e.isChecked:"boolean"==typeof e.checked?e.checked:null}function GL(e){return!(!e.subMenuProps&&!e.items)}function WL(e){return!(!e.isDisabled&&!e.disabled)}function VL(e){return null!==UL(e)?"menuitemcheckbox":"menuitem"}function KL(e,t,r,i){return e.addEventListener(t,r,i),function(){return e.removeEventListener(t,r,i)}}!function(e){e[e.top=1]="top",e[e.bottom=-1]="bottom",e[e.left=2]="left",e[e.right=-2]="right"}(FL||(FL={})),function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.start=2]="start",e[e.end=3]="end"}(jL||(jL={}));var $L,YL=function(){function e(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.top=r,this.bottom=i,this.left=e,this.right=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this.right-this.left},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return parseFloat(this.top.toFixed(4))===parseFloat(e.top.toFixed(4))&&parseFloat(this.bottom.toFixed(4))===parseFloat(e.bottom.toFixed(4))&&parseFloat(this.left.toFixed(4))===parseFloat(e.left.toFixed(4))&&parseFloat(this.right.toFixed(4))===parseFloat(e.right.toFixed(4))},e}();function JL(e,t,r){return{targetEdge:e,alignmentEdge:t,isAuto:r}}var XL=(($L={})[0]=JL(FL.top,FL.left),$L[1]=JL(FL.top),$L[2]=JL(FL.top,FL.right),$L[3]=JL(FL.top,void 0,!0),$L[4]=JL(FL.bottom,FL.left),$L[5]=JL(FL.bottom),$L[6]=JL(FL.bottom,FL.right),$L[7]=JL(FL.bottom,void 0,!0),$L[8]=JL(FL.left,FL.top),$L[9]=JL(FL.left),$L[10]=JL(FL.left,FL.bottom),$L[11]=JL(FL.right,FL.top),$L[12]=JL(FL.right),$L[13]=JL(FL.right,FL.bottom),$L);function ZL(e,t){return!(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}function QL(e,t){var r=[];return e.top<t.top&&r.push(FL.top),e.bottom>t.bottom&&r.push(FL.bottom),e.left<t.left&&r.push(FL.left),e.right>t.right&&r.push(FL.right),r}function ez(e,t){return e[FL[t]]}function tz(e,t,r){return e[FL[t]]=r,e}function rz(e,t){var r=hz(t);return(ez(e,r.positiveEdge)+ez(e,r.negativeEdge))/2}function iz(e,t){return e>0?t:-1*t}function nz(e,t){return iz(e,ez(t,e))}function oz(e,t,r){return iz(r,ez(e,r)-ez(t,r))}function sz(e,t,r,i){void 0===i&&(i=!0);var n=ez(e,t)-r,o=tz(e,t,r);return i&&(o=tz(e,-1*t,ez(e,-1*t)-n)),o}function az(e,t,r,i){return void 0===i&&(i=0),sz(e,r,ez(t,r)+iz(r,i))}function lz(e,t,r){return nz(r,e)>nz(r,t)}function cz(e,t){for(var r=0,i=0,n=QL(e,t);i<n.length;i++){var o=n[i];r+=Math.pow(oz(e,t,o),2)}return r}function uz(e,t,r,i){return void 0===i&&(i=200),(r===FL.bottom||r===FL.top)&&oz(e,t,r)>=i}function dz(e,t,r,i){for(var n=0,o=e;n<o.length;n++){var s=o[n],a=void 0;i&&i===-1*s?(a=sz(t.elementRectangle,s,ez(r,s),!1),t.forcedInBounds=!0):lz(a=az(t.elementRectangle,r,s),r,-1*s)||(a=sz(a,-1*s,ez(r,-1*s),!1),t.forcedInBounds=!0),t.elementRectangle=a}return t}function mz(e,t,r){var i=hz(t).positiveEdge;return sz(e,i,r-(rz(e,t)-ez(e,i)))}function pz(e,t,r,i,n){void 0===i&&(i=0);var o=new YL(e.left,e.right,e.top,e.bottom),s=r.alignmentEdge,a=r.targetEdge,l=n?a:-1*a;return o=n?az(o,t,a,i):function(e,t,r,i){void 0===i&&(i=0);var n=iz(-1*r,i);return sz(e,-1*r,ez(t,r)+n)}(o,t,a,i),o=s?az(o,t,s):mz(o,l,rz(t,a))}function hz(e){return e===FL.top||e===FL.bottom?{positiveEdge:FL.left,negativeEdge:FL.right}:{positiveEdge:FL.top,negativeEdge:FL.bottom}}function fz(e,t,r){return r&&Math.abs(oz(e,r,t))>Math.abs(oz(e,r,-1*t))?-1*t:t}function gz(e,t,r,i,n,o,s,a){var l,c={},u=yz(t),d=o?r:-1*r,m=n||hz(r).positiveEdge;return s&&!function(e,t,r){return void 0!==r&&ez(e,t)===ez(r,t)}(e,(l=m,-1*l),i)||(m=fz(e,m,i)),c[FL[d]]=oz(e,u,d),c[FL[m]]=oz(e,u,m),a&&(c[FL[-1*d]]=oz(e,u,-1*d),c[FL[-1*m]]=oz(e,u,-1*m)),c}function vz(e,t,r){var i=rz(t,e),n=rz(r,e),o=hz(e),s=o.positiveEdge,a=o.negativeEdge;return i<=n?s:a}function bz(e,t,r,i,n,o,s,a,l){void 0===o&&(o=!1);var c=pz(e,t,i,n,l);return ZL(c,r)?{elementRectangle:c,targetEdge:i.targetEdge,alignmentEdge:i.alignmentEdge}:function(e,t,r,i,n,o,s,a,l){void 0===n&&(n=!1),void 0===s&&(s=0);var c=i.alignmentEdge,u=i.alignTargetEdge,d={elementRectangle:e,targetEdge:i.targetEdge,alignmentEdge:c};a||l||(d=function(e,t,r,i,n,o,s){void 0===n&&(n=!1),void 0===s&&(s=0);var a=[FL.left,FL.right,FL.bottom,FL.top];gR()&&(a[0]*=-1,a[1]*=-1);for(var l,c=e,u=i.targetEdge,d=i.alignmentEdge,m=u,p=d,h=0;h<4;h++){if(lz(c,r,u))return{elementRectangle:c,targetEdge:u,alignmentEdge:d};if(n&&uz(t,r,u,o)){switch(u){case FL.bottom:c.bottom=r.bottom;break;case FL.top:c.top=r.top}return{elementRectangle:c,targetEdge:u,alignmentEdge:d,forcedInBounds:!0}}var f=cz(c,r);(!l||f<l)&&(l=f,m=u,p=d),a.splice(a.indexOf(u),1),a.length>0&&(a.indexOf(-1*u)>-1?u*=-1:(d=u,u=a.slice(-1)[0]),c=pz(e,t,{targetEdge:u,alignmentEdge:d},s))}return{elementRectangle:c=pz(e,t,{targetEdge:m,alignmentEdge:p},s),targetEdge:m,alignmentEdge:p}}(e,t,r,i,n,o,s));var m=QL(d.elementRectangle,r),p=a?-d.targetEdge:void 0;if(m.length>0)if(u)if(d.alignmentEdge&&m.indexOf(-1*d.alignmentEdge)>-1){var h=function(e,t,r,i){var n=e.alignmentEdge,o=e.targetEdge,s=-1*n;return{elementRectangle:pz(e.elementRectangle,t,{targetEdge:o,alignmentEdge:s},r,i),targetEdge:o,alignmentEdge:s}}(d,t,s,l);if(ZL(h.elementRectangle,r))return h;d=dz(QL(h.elementRectangle,r),d,r,p)}else d=dz(m,d,r,p);else d=dz(m,d,r,p);return d}(c,t,r,i,o,s,n,a,l)}function yz(e){var t=e.getBoundingClientRect();return new YL(t.left,t.right,t.top,t.bottom)}function _z(e,t,r,i,n,o){void 0===n&&(n=!1);var s=e.gapSpace?e.gapSpace:0,a=function(e,t){var r;if(t){if(t.preventDefault){var i=t;r=new YL(i.clientX,i.clientX,i.clientY,i.clientY)}else if(t.getBoundingClientRect)r=yz(t);else{var n=t,o=n.left||n.x,s=n.top||n.y,a=n.right||o,l=n.bottom||s;r=new YL(o,a,s,l)}if(!ZL(r,e))for(var c=0,u=QL(r,e);c<u.length;c++){var d=u[c];r[FL[d]]=e[FL[d]]}}else r=new YL(0,0,0,0);return r}(r,e.target),l=function(e,t,r,i,n){return e.isAuto&&(e.alignmentEdge=vz(e.targetEdge,t,r)),e.alignTargetEdge=n,e}(function(e,t,r){if(void 0===e&&(e=7),r)return{alignmentEdge:r.alignmentEdge,isAuto:r.isAuto,targetEdge:r.targetEdge};var i=iN({},XL[e]);return gR()?(i.alignmentEdge&&i.alignmentEdge%2==0&&(i.alignmentEdge=-1*i.alignmentEdge),void 0!==t?XL[t]:i):i}(e.directionalHint,e.directionalHintForRTL,i),a,r,e.coverTarget,e.alignTargetEdge),c=bz(yz(t),a,r,l,s,n,o,e.directionalHintFixed,e.coverTarget);return iN(iN({},c),{targetRectangle:a})}function xz(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=0),function(e){return Math.sqrt(e*e*2)}(e?t:0)/2+r}function wz(e,t,r,i,n,o,s,a){void 0===n&&(n=!1);var l=null!=a?a:mR(),c=e.isBeakVisible&&e.beakWidth||0,u=xz(e.isBeakVisible,e.beakWidth,e.gapSpace),d=e;d.gapSpace=u;var m,p,h,f,g,v,b,y,_,x=e.bounds?(_=e.bounds,new YL(_.left,_.right,_.top,_.bottom)):new YL(0,l.innerWidth-function(){if(void 0===mL){var e=uR(),t=e.createElement("div");t.style.setProperty("width","100px"),t.style.setProperty("height","100px"),t.style.setProperty("overflow","scroll"),t.style.setProperty("position","absolute"),t.style.setProperty("top","-9999px"),e.body.appendChild(t),mL=t.offsetWidth-t.clientWidth,e.body.removeChild(t)}return mL}(),0,l.innerHeight),w=_z(d,r,x,i,n,o),C=(m=w,p=function(e,t){var r=t.targetRectangle,i=hz(t.targetEdge),n=i.positiveEdge,o=i.negativeEdge,s=rz(r,t.targetEdge),a=new YL(e/2,t.elementRectangle.width-e/2,e/2,t.elementRectangle.height-e/2),l=new YL(0,e,0,e);return lz(l=mz(l=sz(l,-1*t.targetEdge,-e/2),-1*t.targetEdge,s-nz(n,t.elementRectangle)),a,n)?lz(l,a,o)||(l=az(l,a,o)):l=az(l,a,n),l}(c,w),h=x,f=-1*m.targetEdge,g=new YL(0,m.elementRectangle.width,0,m.elementRectangle.height),v={},b=fz(m.elementRectangle,m.alignmentEdge?m.alignmentEdge:hz(f).positiveEdge,h),y=oz(m.elementRectangle,m.targetRectangle,f)>Math.abs(ez(p,f)),v[FL[f]]=ez(p,f),v[FL[b]]=oz(p,g,b),{elementPosition:iN({},v),closestEdge:vz(m.targetEdge,p,g),targetEdge:f,hideBeak:!y});return iN(iN({},function(e,t,r,i,n){return{elementPosition:gz(e.elementRectangle,t,e.targetEdge,r,e.alignmentEdge,i,n,e.forcedInBounds),targetEdge:e.targetEdge,alignmentEdge:e.alignmentEdge}}(w,t,x,e.coverTarget,s)),{beakPosition:C})}var Cz=["TEMPLATE","STYLE","SCRIPT"];function kz(e){var t=uR(e);if(!t)return function(){};for(var r=[];e!==t.body&&e.parentElement;){for(var i=0,n=e.parentElement.children;i<n.length;i++){var o=n[i],s=o.getAttribute("aria-hidden");o!==e&&"true"!==(null==s?void 0:s.toLowerCase())&&-1===Cz.indexOf(o.tagName)&&r.push([o,s])}e=e.parentElement}return r.forEach(function(e){e[0].setAttribute("aria-hidden","true")}),function(){!function(e){e.forEach(function(e){var t=e[0],r=e[1];r?t.setAttribute("aria-hidden",r):t.removeAttribute("aria-hidden")})}(r),r=[]}}function Tz(){var e=w.useRef();return e.current||(e.current=new hM),w.useEffect(function(){return function(){var t;null===(t=e.current)||void 0===t||t.dispose(),e.current=void 0}},[]),e.current}function Ez(e,t,r,i){var n=w.useRef(r);n.current=r,w.useEffect(function(){var r=e&&"current"in e?e.current:e;if(r&&r.addEventListener)return KL(r,t,function(e){return n.current(e)},i)},[e,t,i])}var Sz=w.createContext({window:"object"==typeof window?window:void 0}),Iz=function(){return w.useContext(Sz).window};function Az(e){var t=e.originalElement,r=e.containsFocus;t&&r&&t!==mR()&&setTimeout(function(){var e;null===(e=t.focus)||void 0===e||e.call(t)},0)}var Oz=w.forwardRef(function(e,t){var r=zL({shouldRestoreFocus:!0,enableAriaHiddenSiblings:!0},e),i=w.useRef(),n=$B(i,t);!function(e,t){var r="true"===String(e["aria-modal"]).toLowerCase()&&e.enableAriaHiddenSiblings;w.useEffect(function(){if(r&&t.current)return kz(t.current)},[t,r])}(r,i),function(e,t){var r=e.onRestoreFocus,i=void 0===r?Az:r,n=w.useRef(),o=w.useRef(!1);w.useEffect(function(){var e,r,s;return n.current=uR().activeElement,(s=(r=uR(e=t.current))&&r.activeElement)&&iL(e,s)&&(o.current=!0),function(){var e;null==i||i({originalElement:n.current,containsFocus:o.current,documentContainsFocus:(null===(e=uR())||void 0===e?void 0:e.hasFocus())||!1}),n.current=void 0}},[]),Ez(t,"focus",w.useCallback(function(){o.current=!0},[]),!0),Ez(t,"blur",w.useCallback(function(e){t.current&&e.relatedTarget&&!t.current.contains(e.relatedTarget)&&(o.current=!1)},[]),!0)}(r,i);var o=r.role,s=r.className,a=r.ariaLabel,l=r.ariaLabelledBy,c=r.ariaDescribedBy,u=r.style,d=r.children,m=r.onDismiss,p=function(e,t){var r=Tz(),i=w.useState(!1),n=i[0],o=i[1];return w.useEffect(function(){return r.requestAnimationFrame(function(){var r;if(!e.style||!e.style.overflowY){var i=!1;if(t&&t.current&&(null===(r=t.current)||void 0===r?void 0:r.firstElementChild)){var s=t.current.clientHeight,a=t.current.firstElementChild.clientHeight;s>0&&a>s&&(i=a-s>1)}n!==i&&o(i)}}),function(){return r.dispose()}}),n}(r,i),h=w.useCallback(function(e){e.which===iR&&m&&(m(e),e.preventDefault(),e.stopPropagation())},[m]);return Ez(Iz(),"keydown",h),w.createElement("div",iN({ref:n},gB(r,fB),{className:s,role:o,"aria-label":a,"aria-labelledby":l,"aria-describedby":c,onKeyDown:h,style:iN({overflowY:p?"scroll":void 0,outline:"none"},u)}),d)});function Nz(e){var t=w.useRef();return void 0===t.current&&(t.current={value:"function"==typeof e?e():e}),t.current.value}function Rz(e,t){var r,i,n,o=w.useRef(),s=w.useRef(null),a=Iz();if(!e||e!==o.current||"string"==typeof e){var l=null==t?void 0:t.current;if(e)if("string"==typeof e)if(null===(r=null==l?void 0:l.getRootNode())||void 0===r?void 0:r.host)s.current=null!==(n=null===(i=null==l?void 0:l.getRootNode())||void 0===i?void 0:i.querySelector(e))&&void 0!==n?n:null;else{var c=uR(l);s.current=c?c.querySelector(e):null}else s.current="stopPropagation"in e||"getBoundingClientRect"in e?e:"current"in e?e.current:e;o.current=e}return[s,a]}Oz.displayName="Popup";var Pz,Dz=function(){var e;return null!==(e=Iz())&&void 0!==e?e:"undefined"!=typeof window?window:void 0},Bz=function(e){var t,r;return null!==(r=null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.document)&&void 0!==r?r:"undefined"!=typeof document?document:void 0},Mz=r(64583).Promise,Lz=((Pz={})[FL.top]=CP.slideUpIn10,Pz[FL.bottom]=CP.slideDownIn10,Pz[FL.left]=CP.slideLeftIn10,Pz[FL.right]=CP.slideRightIn10,Pz),zz={opacity:0,filter:"opacity(0)",pointerEvents:"none"},Fz=["role","aria-roledescription"],jz={preventDismissOnLostFocus:!1,preventDismissOnScroll:!1,preventDismissOnResize:!1,isBeakVisible:!0,beakWidth:16,gapSpace:0,minPagePadding:8,directionalHint:7},Hz=LB({disableCaching:!0});function qz(e,t,r,i){var n,o=e.calloutMaxHeight,s=e.finalHeight,a=e.directionalHint,l=e.directionalHintFixed,c=e.hidden,u=e.gapSpace,d=e.beakWidth,m=e.isBeakVisible,p=e.coverTarget,h=w.useState(),f=h[0],g=h[1],v=null!==(n=null==i?void 0:i.elementPosition)&&void 0!==n?n:{},b=v.top,y=v.bottom,_=(null==r?void 0:r.current)?function(e){var t,r,i,n,o=e,s=e,a=e,l=null!==(t=a.left)&&void 0!==t?t:a.x,c=null!==(r=a.top)&&void 0!==r?r:a.y,u=null!==(i=a.right)&&void 0!==i?i:l,d=null!==(n=a.bottom)&&void 0!==n?n:c;return o.stopPropagation?new YL(o.clientX,o.clientX,o.clientY,o.clientY):void 0!==l&&void 0!==c?new YL(l,u,c,d):yz(s)}(r.current):void 0;return w.useEffect(function(){var e,r,n=null!==(e=t())&&void 0!==e?e:{},s=n.top,a=n.bottom;(null==i?void 0:i.targetEdge)===FL.top&&(null==_?void 0:_.top)&&!p&&(a=_.top-function(e,t,r){return xz(e,t,r)}(m,d,u)),"number"==typeof b&&a?r=a-b:"number"==typeof y&&"number"==typeof s&&a&&(r=a-s-y),g(!o&&!c||o&&r&&o>r?r:o||void 0)},[y,o,s,a,l,t,c,i,b,u,d,m,_,p]),f}function Uz(e,t,r,i,n,o){var s,a=w.useState(),l=a[0],c=a[1],u=w.useRef(0),d=w.useRef(),m=Tz(),p=e.hidden,h=e.target,f=e.finalHeight,g=e.calloutMaxHeight,v=e.onPositioned,b=e.directionalHint,y=e.hideOverflow,_=e.preferScrollResizePositioning,x=Dz(),C=w.useRef();C.current!==o.current&&(C.current=o.current,s=o.current?null==x?void 0:x.getComputedStyle(o.current):void 0);var k=null==s?void 0:s.overflowY;return w.useEffect(function(){if(!p){var o=m.requestAnimationFrame(function(){var o,s,a,m;if(t.current&&r){var p=iN(iN({},e),{target:i.current,bounds:n()}),b=r.cloneNode(!0);b.style.maxHeight=g?"".concat(g):"",b.style.visibility="hidden",null===(o=r.parentElement)||void 0===o||o.appendChild(b);var w=d.current===h?l:void 0,C=_&&!(y||"clip"===k||"hidden"===k),T=f?function(e,t,r,i,n){return function(e,t,r,i,n){return wz(e,t,r,i,!1,void 0,!0,null!=n?n:mR())}(e,t,r,i,n)}(p,t.current,b,w,x):function(e,t,r,i,n,o,s){return wz(e,t,r,i,n,void 0,void 0,s)}(p,t.current,b,w,C,0,x);null===(s=r.parentElement)||void 0===s||s.removeChild(b),!l&&T||l&&T&&(m=T,!Vz((a=l).elementPosition,m.elementPosition)||!Vz(a.beakPosition.elementPosition,m.beakPosition.elementPosition))&&u.current<5?(u.current++,c(T)):u.current>0&&(u.current=0,null==v||v(l))}},r);return d.current=h,function(){m.cancelAnimationFrame(o),d.current=void 0}}c(void 0),u.current=0},[p,b,m,r,g,t,i,f,n,v,l,e,h,y,_,k,x]),l}var Gz=w.memo(w.forwardRef(function(e,t){var r=zL(jz,e),i=r.styles,n=r.style,o=r.ariaLabel,s=r.ariaDescribedBy,a=r.ariaLabelledBy,l=r.className,c=r.isBeakVisible,u=r.children,d=r.beakWidth,m=r.calloutWidth,p=r.calloutMaxWidth,h=r.calloutMinWidth,f=r.doNotLayer,g=r.finalHeight,v=r.hideOverflow,b=void 0===v?!!g:v,y=r.backgroundColor,_=r.calloutMaxHeight,x=r.onScroll,C=r.shouldRestoreFocus,k=void 0===C||C,T=r.target,E=r.hidden,S=r.onLayerMounted,I=r.popupProps,A=w.useRef(null),O=$B(w.useRef(null),null==I?void 0:I.ref),N=w.useState(null),R=N[0],P=N[1],D=w.useCallback(function(e){P(e)},[]),B=$B(A,t),M=Rz(r.target,{current:R}),L=M[0],z=M[1],F=function(e,t,r){var i=e.bounds,n=e.minPagePadding,o=void 0===n?jz.minPagePadding:n,s=e.target,a=w.useState(!1),l=a[0],c=a[1],u=w.useRef(),d=w.useCallback(function(){if(!u.current||l){var e="function"==typeof i?r?i(s,r):void 0:i;!e&&r&&(e=function(e,t){return function(e,t){var r=void 0;if(t.getWindowSegments&&(r=t.getWindowSegments()),void 0===r||r.length<=1)return{top:0,left:0,right:t.innerWidth,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight};var i=0,n=0;if(null!==e&&e.getBoundingClientRect){var o=e.getBoundingClientRect();i=(o.left+o.right)/2,n=(o.top+o.bottom)/2}else null!==e&&(i=e.left||e.x,n=e.top||e.y);for(var s={top:0,left:0,right:0,bottom:0,width:0,height:0},a=0,l=r;a<l.length;a++){var c=l[a];i&&c.left<=i&&c.right>=i&&n&&c.top<=n&&c.bottom>=n&&(s={top:c.top,left:c.left,right:c.right,bottom:c.bottom,width:c.width,height:c.height})}return s}(e,t)}(t.current,r),e={top:e.top+o,left:e.left+o,right:e.right-o,bottom:e.bottom-o,width:e.width-2*o,height:e.height-2*o}),u.current=e,l&&c(!1)}return u.current},[i,o,s,t,r,l]),m=Tz();return Ez(r,"resize",m.debounce(function(){c(!0)},500,{leading:!0})),d}(r,L,z),j=Uz(r,A,R,L,F,O),H=qz(r,F,L,j),q=function(e,t,r,i,n){var o=e.hidden,s=e.onDismiss,a=e.preventDismissOnScroll,l=e.preventDismissOnResize,c=e.preventDismissOnLostFocus,u=e.dismissOnTargetClick,d=e.shouldDismissOnWindowFocus,m=e.preventDismissOnEvent,p=w.useRef(!1),h=Tz(),f=Nz([function(){p.current=!0},function(){p.current=!1}]),g=!!t;return w.useEffect(function(){var e=function(e){g&&!a&&v(e)},t=function(e){l||m&&m(e)||null==s||s(e)},f=function(e){c||v(e)},v=function(e){var t=e.composedPath?e.composedPath():[],o=t.length>0?t[0]:e.target,a=r.current&&!iL(r.current,o);if(a&&p.current)p.current=!1;else if(!i.current&&a||e.target!==n&&a&&(!i.current||"stopPropagation"in i.current||u||o!==i.current&&!iL(i.current,o))){if(m&&m(e))return;null==s||s(e)}},b=function(e){d&&((!m||m(e))&&(m||c)||(null==n?void 0:n.document.hasFocus())||null!==e.relatedTarget||null==s||s(e))},y=new Mz(function(r){h.setTimeout(function(){if(!o&&n){var i=[KL(n,"scroll",e,!0),KL(n,"resize",t,!0),KL(n.document.documentElement,"focus",f,!0),KL(n.document.documentElement,"click",f,!0),KL(n,"blur",b,!0)];r(function(){i.forEach(function(e){return e()})})}},0)});return function(){y.then(function(e){return e()})}},[o,h,r,i,n,s,d,u,c,l,a,g,m]),f}(r,j,A,L,z),U=q[0],G=q[1],W=(null==j?void 0:j.elementPosition.top)&&(null==j?void 0:j.elementPosition.bottom),V=iN(iN({},null==j?void 0:j.elementPosition),{maxHeight:H});if(W&&(V.bottom=void 0),function(e,t,r){var i=e.hidden,n=e.setInitialFocus,o=Tz(),s=!!t;w.useEffect(function(){if(!i&&n&&s&&r){var e=o.requestAnimationFrame(function(){return function(e){var t=oL(e,e,!0,!1,!1,!0,void 0,void 0,void 0,void 0);return!!t&&(hL(t),!0)}(r)},r);return function(){return o.cancelAnimationFrame(e)}}},[i,s,o,r,n])}(r,j,R),w.useEffect(function(){E||null==S||S()},[E]),!z)return null;var K=b,$=c&&!!T,Y=Hz(i,{theme:r.theme,className:l,overflowYHidden:K,calloutWidth:m,positions:j,beakWidth:d,backgroundColor:y,calloutMaxWidth:p,calloutMinWidth:h,doNotLayer:f}),J=iN(iN({maxHeight:_||"100%"},n),K&&{overflowY:"hidden"}),X=r.hidden?{visibility:"hidden"}:void 0;return w.createElement("div",{ref:B,className:Y.container,style:X},w.createElement("div",iN({},gB(r,fB,Fz),{className:vB(Y.root,j&&j.targetEdge&&Lz[j.targetEdge]),style:j?iN({},V):zz,tabIndex:-1,ref:D}),$&&w.createElement("div",{className:Y.beak,style:Wz(j)}),$&&w.createElement("div",{className:Y.beakCurtain}),w.createElement(Oz,iN({role:r.role,"aria-roledescription":r["aria-roledescription"],ariaDescribedBy:s,ariaLabel:o,ariaLabelledBy:a,className:Y.calloutMain,onDismiss:r.onDismiss,onMouseDown:U,onMouseUp:G,onRestoreFocus:r.onRestoreFocus,onScroll:x,shouldRestoreFocus:k,style:J},I,{ref:O}),u)))}),function(e,t){return!(t.shouldUpdateWhenHidden||!e.hidden||!t.hidden)||NM(e,t)});function Wz(e){var t,r,i=iN(iN({},null===(t=null==e?void 0:e.beakPosition)||void 0===t?void 0:t.elementPosition),{display:(null===(r=null==e?void 0:e.beakPosition)||void 0===r?void 0:r.hideBeak)?"none":void 0});return i.top||i.bottom||i.left||i.right||(i.left=0,i.top=0),i}function Vz(e,t){for(var r in t)if(t.hasOwnProperty(r)){var i=e[r],n=t[r];if(void 0===i||void 0===n)return!1;if(i.toFixed(2)!==n.toFixed(2))return!1}return!0}function Kz(e){return{height:e,width:e}}Gz.displayName="CalloutContentBase";var $z={container:"ms-Callout-container",root:"ms-Callout",beak:"ms-Callout-beak",beakCurtain:"ms-Callout-beakCurtain",calloutMain:"ms-Callout-main"},Yz=PB(Gz,function(e){var t,r=e.theme,i=e.className,n=e.overflowYHidden,o=e.calloutWidth,s=e.beakWidth,a=e.backgroundColor,l=e.calloutMaxWidth,c=e.calloutMinWidth,u=e.doNotLayer,d=EP($z,r),m=r.semanticColors,p=r.effects;return{container:[d.container,{position:"relative"}],root:[d.root,r.fonts.medium,{position:"absolute",display:"flex",zIndex:u?AP.Layer:void 0,boxSizing:"border-box",borderRadius:p.roundedCorner2,boxShadow:p.elevation16,selectors:(t={},t[SP]={borderWidth:1,borderStyle:"solid",borderColor:"WindowText"},t)},{selectors:{"&::-moz-focus-inner":{border:0},"&":{outline:"transparent"}}},i,!!o&&{width:o},!!l&&{maxWidth:l},!!c&&{minWidth:c}],beak:[d.beak,{position:"absolute",backgroundColor:m.menuBackground,boxShadow:"inherit",border:"inherit",boxSizing:"border-box",transform:"rotate(45deg)"},Kz(s),a&&{backgroundColor:a}],beakCurtain:[d.beakCurtain,{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:m.menuBackground,borderRadius:p.roundedCorner2}],calloutMain:[d.calloutMain,{backgroundColor:m.menuBackground,overflowX:"hidden",overflowY:"auto",position:"relative",width:"100%",borderRadius:p.roundedCorner2},n&&{overflowY:"hidden"},a&&{backgroundColor:a}]}},void 0,{scope:"CalloutContent"}),Jz=w.createContext(void 0),Xz=function(){return function(){}};Jz.Provider;var Zz=function(e){var t=e.providerRef,r=e.layerRoot,i=w.useState([])[0],n=w.useContext(GM),o=void 0!==n&&!r,s=w.useMemo(function(){return o?void 0:{providerRef:t,registeredProviders:i,registerProvider:function(e){i.push(e),null==n||n.registerProvider(e)},unregisterProvider:function(e){null==n||n.unregisterProvider(e);var t=i.indexOf(e);t>=0&&i.splice(t,1)}}},[t,i,n,o]);return w.useEffect(function(){if(s)return s.registerProvider(s.providerRef),function(){return s.unregisterProvider(s.providerRef)}},[s]),s?w.createElement(GM.Provider,{value:s},e.children):w.createElement(w.Fragment,null,e.children)};function Qz(e,t){void 0===e&&(e={});var r=eF(t)?t:function(e){return function(t){return e?iN(iN({},t),e):t}}(t);return r(e)}function eF(e){return"function"==typeof e}var tF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onCustomizationChange=function(){return t.forceUpdate()},t}return rN(t,e),t.prototype.componentDidMount=function(){VP.observe(this._onCustomizationChange)},t.prototype.componentWillUnmount=function(){VP.unobserve(this._onCustomizationChange)},t.prototype.render=function(){var e=this,t=this.props.contextTransform;return w.createElement(MD.Consumer,null,function(r){var i=function(e,t){var r,i,n,o=(t||{}).customizations,s=void 0===o?{settings:{},scopedSettings:{}}:o;return{customizations:{settings:Qz(s.settings,e.settings),scopedSettings:(r=s.scopedSettings,i=e.scopedSettings,void 0===r&&(r={}),(eF(i)?i:(void 0===(n=i)&&(n={}),function(e){var t=iN({},e);for(var r in n)n.hasOwnProperty(r)&&(t[r]=iN(iN({},e[r]),n[r]));return t}))(r)),inCustomizerContext:!0}}}(e.props,r);return t&&(i=t(i)),w.createElement(MD.Provider,{value:i},e.props.children)})},t}(w.Component),rF=LB(),iF=ZN(function(e,t){return yD(iN(iN({},e),{rtl:t}))}),nF=w.forwardRef(function(e,t){var r=e.className,i=e.theme,n=e.applyTheme,o=e.applyThemeToBody,s=e.styles,a=rF(s,{theme:i,applyTheme:n,className:r}),l=w.useRef(null);return function(e,t,r){var i=t.bodyThemed;w.useEffect(function(){if(e){var t=uR(r.current);if(t)return t.body.classList.add(i),function(){t.body.classList.remove(i)}}},[i,e,r])}(o,a,l),w.createElement(w.Fragment,null,function(e,t,r,i){var n=t.root,o=e.as,s=void 0===o?"div":o,a=e.dir,l=e.theme,c=gB(e,fB,["dir"]),u=function(e){var t=e.theme,r=e.dir,i=gR(t)?"rtl":"ltr",n=gR()?"rtl":"ltr",o=r||i;return{rootDir:o!==i||o!==n?o:r,needsTheme:o!==i}}(e),d=u.rootDir,m=u.needsTheme,p=w.createElement(Zz,{providerRef:r},w.createElement(s,iN({dir:d},c,{className:n,ref:$B(r,i)})));return m&&(p=w.createElement(tF,{settings:{theme:iF(l,"rtl"===a)}},p)),p}(e,a,l,t))});nF.displayName="FabricBase";var oF,sF={fontFamily:"inherit"},aF={root:"ms-Fabric",bodyThemed:"ms-Fabric-bodyThemed"},lF=PB(nF,function(e){var t=e.applyTheme,r=e.className,i=e.preventBlanketFontInheritance,n=e.theme;return{root:[EP(aF,n).root,n.fonts.medium,{color:n.palette.neutralPrimary},!i&&{"& button":sF,"& input":sF,"& textarea":sF},t&&{color:n.semanticColors.bodyText,backgroundColor:n.semanticColors.bodyBackground},r],bodyThemed:[{backgroundColor:n.semanticColors.bodyBackground}]}},void 0,{scope:"Fabric"}),cF={},uF={},dF="fluent-default-layer-host",mF="#".concat(dF),pF=LB(),hF=w.forwardRef(function(e,t){var r,i=null!==(r=w.useContext(Jz))&&void 0!==r?r:Xz,n=w.useRef(null),o=$B(n,t),s=w.useRef(),a=w.useRef(null),l=w.useContext(GM),c=w.useState(!1),u=c[0],d=c[1],m=w.useCallback(function(e){var t,r=!!(null==(t=null==l?void 0:l.providerRef)?void 0:t.current)&&t.current.classList.contains(OP);e&&r&&e.classList.add(OP)},[l]),p=e.children,h=e.className,f=e.eventBubblingEnabled,g=e.fabricProps,v=e.hostId,b=e.insertFirst,y=e.onLayerDidMount,_=void 0===y?function(){}:y,x=e.onLayerMounted,C=void 0===x?function(){}:x,k=e.onLayerWillUnmount,T=e.styles,E=e.theme,S=$B(a,null==g?void 0:g.ref,m),I=pF(T,{theme:E,className:h,isNotHost:!v}),A=function(){null==k||k();var e=s.current;s.current=void 0,e&&e.parentNode&&e.parentNode.removeChild(e)},O=function(){var e,t,r,i,o=uR(n.current),a=(null===(t=null===(e=n.current)||void 0===e?void 0:e.getRootNode())||void 0===t?void 0:t.host)?null===(r=null==n?void 0:n.current)||void 0===r?void 0:r.getRootNode():void 0;if(o&&(o||a)){var l=function(e,t){var r,i;void 0===t&&(t=null);var n=null!=t?t:e;if(v){var o=function(e){var t=uF[e];return t&&t[0]||void 0}(v);return o?null!==(r=o.rootRef.current)&&void 0!==r?r:null:null!==(i=n.getElementById(v))&&void 0!==i?i:null}var s=mF,a=s?n.querySelector(s):null;return a||(a=function(e,t){void 0===t&&(t=null);var r=e.createElement("div");return r.setAttribute("id",dF),r.style.cssText="position:fixed;z-index:1000000",t?t.appendChild(r):null==e||e.body.appendChild(r),r}(e,t)),a}(o,a);if(l){l.__tabsterElementFlags||(l.__tabsterElementFlags={}),l.__tabsterElementFlags.noDirectAriaHidden=!0,A();var c=(null!==(i=l.ownerDocument)&&void 0!==i?i:o).createElement("div");c.className=I.root,c.setAttribute(AM,"true"),function(e,t){var r=e,i=t;r._virtual||(r._virtual={children:[]});var n=r._virtual.parent;if(n&&n!==t){var o=n._virtual.children.indexOf(r);o>-1&&n._virtual.children.splice(o,1)}r._virtual.parent=i||void 0,i&&(i._virtual||(i._virtual={children:[]}),i._virtual.children.push(r))}(c,n.current),b?l.insertBefore(c,l.firstChild):l.appendChild(c),s.current=c,d(!0)}}};return KB(function(){O(),v&&function(e,t){cF[e]||(cF[e]=[]),cF[e].push(t);var r=uF[e];if(r)for(var i=0,n=r;i<n.length;i++)n[i].notifyLayersChanged()}(v,O);var e=s.current?i(s.current):void 0;return function(){e&&e(),A(),v&&function(e,t){var r=cF[e];if(r){var i=r.indexOf(t);i>=0&&(r.splice(i,1),0===r.length&&delete cF[e])}var n=uF[e];if(n)for(var o=0,s=n;o<s.length;o++)s[o].notifyLayersChanged()}(v,O)}},[v]),w.useEffect(function(){s.current&&u&&(null==C||C(),null==_||_(),d(!1))},[u,C,_]),w.createElement("span",{className:"ms-layer",ref:o},s.current&&Io.createPortal(w.createElement(Zz,{layerRoot:!0,providerRef:S},w.createElement(lF,iN({},!f&&(oF||(oF={},["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onTouchMove","onTouchStart","onTouchCancel","onTouchEnd","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit"].forEach(function(e){return oF[e]=fF})),oF),g,{className:vB(I.content,null==g?void 0:g.className),ref:S}),p)),s.current))});hF.displayName="LayerBase";var fF=function(e){e.eventPhase===Event.BUBBLING_PHASE&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"touchstart"!==e.type&&"touchend"!==e.type&&e.stopPropagation()},gF={root:"ms-Layer",rootNoHost:"ms-Layer--fixed",content:"ms-Layer-content"},vF=PB(hF,function(e){var t=e.className,r=e.isNotHost,i=e.theme,n=EP(gF,i);return{root:[n.root,i.fonts.medium,r&&[n.rootNoHost,{position:"fixed",zIndex:AP.Layer,top:0,left:0,bottom:0,right:0,visibility:"hidden"}],t],content:[n.content,{visibility:"visible"}]}},void 0,{scope:"Layer",fields:["hostId","theme","styles"]}),bF=w.forwardRef(function(e,t){var r=e.layerProps,i=e.doNotLayer,n=nN(e,["layerProps","doNotLayer"]),o=w.createElement(Yz,iN({},n,{doNotLayer:i,ref:t}));return i?o:w.createElement(vF,iN({},r),o)});bF.displayName="Callout";var yF,_F=function(e){var t=e.item,r=e.classNames,i=t.iconProps;return w.createElement(sM,iN({},i,{className:r.icon}))},xF=function(e){var t=e.item;return e.hasIcons?t.onRenderIcon?t.onRenderIcon(e,_F):_F(e):null},wF=function(e){var t=e.onCheckmarkClick,r=e.item,i=e.classNames,n=UL(r);return t?w.createElement(sM,{iconName:!1!==r.canCheck&&n?"CheckMark":"",className:i.checkmarkIcon,onClick:function(e){return t(r,e)}}):null},CF=function(e){var t=e.item,r=e.classNames;return t.text||t.name?w.createElement("span",{className:r.label},t.text||t.name):null},kF=function(e){var t=e.item,r=e.classNames;return t.secondaryText?w.createElement("span",{className:r.secondaryText},t.secondaryText):null},TF=function(e){var t=e.item,r=e.classNames,i=e.theme;return GL(t)?w.createElement(sM,iN({iconName:gR(i)?"ChevronLeft":"ChevronRight"},t.submenuIconProps,{className:r.subMenuIcon})):null},EF=function(e){function t(t){var r=e.call(this,t)||this;return r.openSubMenu=function(){var e=r.props,t=e.item,i=e.openSubMenu,n=e.getSubmenuTarget;if(n){var o=n();GL(t)&&i&&o&&i(t,o)}},r.dismissSubMenu=function(){var e=r.props,t=e.item,i=e.dismissSubMenu;GL(t)&&i&&i()},r.dismissMenu=function(e){var t=r.props.dismissMenu;t&&t(void 0,e)},lM(r),r}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.item,r=e.classNames,i=t.onRenderContent||this._renderLayout;return w.createElement("div",{className:t.split?r.linkContentMenu:r.linkContent},i(this.props,{renderCheckMarkIcon:wF,renderItemIcon:xF,renderItemName:CF,renderSecondaryText:kF,renderSubMenuIcon:TF}))},t.prototype._renderLayout=function(e,t){return w.createElement(w.Fragment,null,t.renderCheckMarkIcon(e),t.renderItemIcon(e),t.renderItemName(e),t.renderSecondaryText(e),t.renderSubMenuIcon(e))},t}(w.Component),SF=ZN(function(e){return ND({wrapper:{display:"inline-flex",height:"100%",alignItems:"center"},divider:{width:1,height:"100%",backgroundColor:e.palette.neutralTertiaryAlt}})}),IF=36,AF=IP(0,639),OF=ZN(function(e){var t,r,i,n,o,s=e.semanticColors,a=e.fonts,l=e.palette,c=s.menuItemBackgroundHovered,u=s.menuItemTextHovered,d=s.menuItemBackgroundPressed,m=s.bodyDivider;return AD({item:[a.medium,{color:s.bodyText,position:"relative",boxSizing:"border-box"}],divider:{display:"block",height:"1px",backgroundColor:m,position:"relative"},root:[DP(e),a.medium,{color:s.bodyText,backgroundColor:"transparent",border:"none",width:"100%",height:IF,lineHeight:IF,display:"block",cursor:"pointer",padding:"0px 8px 0 4px",textAlign:"left"}],rootDisabled:{color:s.disabledBodyText,cursor:"default",pointerEvents:"none",selectors:(t={},t[SP]={color:"GrayText",opacity:1},t)},rootHovered:{backgroundColor:c,color:u,selectors:{".ms-ContextualMenu-icon":{color:l.themeDarkAlt},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootFocused:{backgroundColor:l.white},rootChecked:{selectors:{".ms-ContextualMenu-checkmarkIcon":{color:l.neutralPrimary}}},rootPressed:{backgroundColor:d,selectors:{".ms-ContextualMenu-icon":{color:l.themeDark},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootExpanded:{backgroundColor:d,color:s.bodyTextChecked,selectors:(r={".ms-ContextualMenu-submenuIcon":(i={},i[SP]={color:"inherit"},i)},r[SP]=iN({},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),r)},linkContent:{whiteSpace:"nowrap",height:"inherit",display:"flex",alignItems:"center",maxWidth:"100%"},anchorLink:{padding:"0px 8px 0 4px",textRendering:"auto",color:"inherit",letterSpacing:"normal",wordSpacing:"normal",textTransform:"none",textIndent:"0px",textShadow:"none",textDecoration:"none",boxSizing:"border-box"},label:{margin:"0 4px",verticalAlign:"middle",display:"inline-block",flexGrow:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},secondaryText:{color:e.palette.neutralSecondary,paddingLeft:"20px",textAlign:"right"},icon:{display:"inline-block",minHeight:"1px",maxHeight:IF,fontSize:wP.medium,width:wP.medium,margin:"0 4px",verticalAlign:"middle",flexShrink:"0",selectors:(n={},n[AF]={fontSize:wP.large,width:wP.large},n)},iconColor:{color:s.menuIcon},iconDisabled:{color:s.disabledBodyText},checkmarkIcon:{color:s.bodySubtext},subMenuIcon:{height:IF,lineHeight:IF,color:l.neutralSecondary,textAlign:"center",display:"inline-block",verticalAlign:"middle",flexShrink:"0",fontSize:wP.small,selectors:(o={":hover":{color:l.neutralPrimary},":active":{color:l.neutralPrimary}},o[AF]={fontSize:wP.medium},o)},splitButtonFlexContainer:[DP(e),{display:"flex",height:IF,flexWrap:"nowrap",justifyContent:"center",alignItems:"flex-start"}]})}),NF="28px",RF=IP(0,639),PF=ZN(function(e){var t;return ND(SF(e),{wrapper:{position:"absolute",right:28,selectors:(t={},t[RF]={right:32},t)},divider:{height:16,width:1}})}),DF={item:"ms-ContextualMenu-item",divider:"ms-ContextualMenu-divider",root:"ms-ContextualMenu-link",isChecked:"is-checked",isExpanded:"is-expanded",isDisabled:"is-disabled",linkContent:"ms-ContextualMenu-linkContent",linkContentMenu:"ms-ContextualMenu-linkContent",icon:"ms-ContextualMenu-icon",iconColor:"ms-ContextualMenu-iconColor",checkmarkIcon:"ms-ContextualMenu-checkmarkIcon",subMenuIcon:"ms-ContextualMenu-submenuIcon",label:"ms-ContextualMenu-itemText",secondaryText:"ms-ContextualMenu-secondaryText",splitMenu:"ms-ContextualMenu-splitMenu",screenReaderText:"ms-ContextualMenu-screenReaderText"},BF=ZN(function(e,t,r,i,n,o,s,a,l,c,u,d){var m,p,h,f,g=OF(e),v=EP(DF,e);return ND({item:[v.item,g.item,s],divider:[v.divider,g.divider,a],root:[v.root,g.root,i&&[v.isChecked,g.rootChecked],n&&g.anchorLink,r&&[v.isExpanded,g.rootExpanded],t&&[v.isDisabled,g.rootDisabled],!t&&!r&&[{selectors:(m={":hover":g.rootHovered,":active":g.rootPressed},m[".".concat(OP," &:focus, .").concat(OP," &:focus:hover, :host(.").concat(OP,") &:focus, :host(.").concat(OP,") &:focus:hover")]=g.rootFocused,m[".".concat(OP," &:hover, :host(.").concat(OP,") &:hover")]={background:"inherit;"},m)}],d],splitPrimary:[g.root,{width:"calc(100% - ".concat(NF,")")},i&&["is-checked",g.rootChecked],(t||u)&&["is-disabled",g.rootDisabled],!(t||u)&&!i&&[{selectors:(p={":hover":g.rootHovered},p[":hover ~ .".concat(v.splitMenu)]=g.rootHovered,p[":active"]=g.rootPressed,p[".".concat(OP," &:focus, .").concat(OP," &:focus:hover, :host(.").concat(OP,") &:focus, :host(.").concat(OP,") &:focus:hover")]=g.rootFocused,p[".".concat(OP," &:hover, :host(.").concat(OP,") &:hover")]={background:"inherit;"},p)}]],splitMenu:[v.splitMenu,g.root,{flexBasis:"0",padding:"0 8px",minWidth:NF},r&&["is-expanded",g.rootExpanded],t&&["is-disabled",g.rootDisabled],!t&&!r&&[{selectors:(h={":hover":g.rootHovered,":active":g.rootPressed},h[".".concat(OP," &:focus, .").concat(OP," &:focus:hover, :host(.").concat(OP,") &:focus, :host(.").concat(OP,") &:focus:hover")]=g.rootFocused,h[".".concat(OP," &:hover, :host(.").concat(OP,") &:hover")]={background:"inherit;"},h)}]],anchorLink:g.anchorLink,linkContent:[v.linkContent,g.linkContent],linkContentMenu:[v.linkContentMenu,g.linkContent,{justifyContent:"center"}],icon:[v.icon,o&&g.iconColor,g.icon,l,t&&[v.isDisabled,g.iconDisabled]],iconColor:g.iconColor,checkmarkIcon:[v.checkmarkIcon,o&&g.checkmarkIcon,g.icon,l],subMenuIcon:[v.subMenuIcon,g.subMenuIcon,c,r&&{color:e.palette.neutralPrimary},t&&[g.iconDisabled]],label:[v.label,g.label],secondaryText:[v.secondaryText,g.secondaryText],splitContainer:[g.splitButtonFlexContainer,!t&&!i&&[{selectors:(f={},f[".".concat(OP," &:focus, .").concat(OP," &:focus:hover, :host(.").concat(OP,") &:focus, :host(.").concat(OP,") &:focus:hover")]=g.rootFocused,f)}]],screenReaderText:[v.screenReaderText,g.screenReaderText,kP,{visibility:"hidden"}]})}),MF=function(e){var t=e.theme,r=e.disabled,i=e.expanded,n=e.checked,o=e.isAnchorLink,s=e.knownIcon,a=e.itemClassName,l=e.dividerClassName,c=e.iconClassName,u=e.subMenuClassName,d=e.primaryDisabled,m=e.className;return BF(t,r,i,n,o,s,a,l,c,u,d,m)},LF=PB(EF,MF,void 0,{scope:"ContextualMenuItem"}),zF=function(e){function t(t){var r=e.call(this,t)||this;return r._onItemMouseEnter=function(e){var t=r.props,i=t.item,n=t.onItemMouseEnter;n&&n(i,e,e.currentTarget)},r._onItemClick=function(e){var t=r.props,i=t.item,n=t.onItemClickBase;n&&n(i,e,e.currentTarget)},r._onItemMouseLeave=function(e){var t=r.props,i=t.item,n=t.onItemMouseLeave;n&&n(i,e)},r._onItemKeyDown=function(e){var t=r.props,i=t.item,n=t.onItemKeyDown;n&&n(i,e)},r._onItemMouseMove=function(e){var t=r.props,i=t.item,n=t.onItemMouseMove;n&&n(i,e,e.currentTarget)},r._getSubmenuTarget=function(){},lM(r),r}return rN(t,e),t.prototype.shouldComponentUpdate=function(e){return!NM(e,this.props)},t}(w.Component);function FF(e){var t=w.useRef();return w.useEffect(function(){t.current=e}),t.current}!function(e){e.KEYTIP_ADDED="keytipAdded",e.KEYTIP_REMOVED="keytipRemoved",e.KEYTIP_UPDATED="keytipUpdated",e.PERSISTED_KEYTIP_ADDED="persistedKeytipAdded",e.PERSISTED_KEYTIP_REMOVED="persistedKeytipRemoved",e.PERSISTED_KEYTIP_EXECUTE="persistedKeytipExecute",e.ENTER_KEYTIP_MODE="enterKeytipMode",e.EXIT_KEYTIP_MODE="exitKeytipMode"}(yF||(yF={}));var jF=function(){function e(){this.keytips={},this.persistedKeytips={},this.sequenceMapping={},this.inKeytipMode=!1,this.shouldEnterKeytipMode=!0,this.delayUpdatingKeytipChange=!1}return e.getInstance=function(){return this._instance},e.prototype.init=function(e){this.delayUpdatingKeytipChange=e},e.prototype.register=function(e,t){void 0===t&&(t=!1);var r=e;t||(r=this.addParentOverflow(e),this.sequenceMapping[r.keySequences.toString()]=r);var i=this._getUniqueKtp(r);if(t?this.persistedKeytips[i.uniqueID]=i:this.keytips[i.uniqueID]=i,this.inKeytipMode||!this.delayUpdatingKeytipChange){var n=t?yF.PERSISTED_KEYTIP_ADDED:yF.KEYTIP_ADDED;BM.raise(this,n,{keytip:r,uniqueID:i.uniqueID})}return i.uniqueID},e.prototype.update=function(e,t){var r=this.addParentOverflow(e),i=this._getUniqueKtp(r,t),n=this.keytips[t];n&&(i.keytip.visible=n.keytip.visible,this.keytips[t]=i,delete this.sequenceMapping[n.keytip.keySequences.toString()],this.sequenceMapping[i.keytip.keySequences.toString()]=i.keytip,!this.inKeytipMode&&this.delayUpdatingKeytipChange||BM.raise(this,yF.KEYTIP_UPDATED,{keytip:i.keytip,uniqueID:i.uniqueID}))},e.prototype.unregister=function(e,t,r){void 0===r&&(r=!1),r?delete this.persistedKeytips[t]:delete this.keytips[t],!r&&delete this.sequenceMapping[e.keySequences.toString()];var i=r?yF.PERSISTED_KEYTIP_REMOVED:yF.KEYTIP_REMOVED;!this.inKeytipMode&&this.delayUpdatingKeytipChange||BM.raise(this,i,{keytip:e,uniqueID:t})},e.prototype.enterKeytipMode=function(){BM.raise(this,yF.ENTER_KEYTIP_MODE)},e.prototype.exitKeytipMode=function(){BM.raise(this,yF.EXIT_KEYTIP_MODE)},e.prototype.getKeytips=function(){var e=this;return Object.keys(this.keytips).map(function(t){return e.keytips[t].keytip})},e.prototype.addParentOverflow=function(e){var t=sN([],e.keySequences,!0);if(t.pop(),0!==t.length){var r=this.sequenceMapping[t.toString()];if(r&&r.overflowSetSequence)return iN(iN({},e),{overflowSetSequence:r.overflowSetSequence})}return e},e.prototype.menuExecute=function(e,t){BM.raise(this,yF.PERSISTED_KEYTIP_EXECUTE,{overflowButtonSequences:e,keytipSequences:t})},e.prototype._getUniqueKtp=function(e,t){return void 0===t&&(t=qD()),{keytip:iN({},e),uniqueID:t}},e._instance=new e,e}();function HF(e){return e.reduce(function(e,t){return e+"-"+t.split("").join("-")},"ktp")}var qF=function(e){var t,r=e.children,i=function(e){var t=w.useRef(),r=e.keytipProps?iN({disabled:e.disabled},e.keytipProps):void 0,i=Nz(jF.getInstance()),n=FF(e);KB(function(){t.current&&r&&((null==n?void 0:n.keytipProps)!==e.keytipProps||(null==n?void 0:n.disabled)!==e.disabled)&&i.update(r,t.current)}),KB(function(){return r&&(t.current=i.register(r)),function(){r&&i.unregister(r,t.current)}},[]);var o={ariaDescribedBy:e.ariaDescribedBy,keytipId:void 0};return r&&(o=function(e,t,r){var i=e.addParentOverflow(t),n=XM(r,function(e){var t=" ktp-layer-id";return e.length?t+" "+HF(e):t}(i.keySequences)),o=sN([],i.keySequences,!0);return i.overflowSetSequence&&(o=function(e,t){var r=t.length,i=sN([],t,!0).pop();return function(e,t,r){var i=e.slice();return i.splice(t,0,r),i}(sN([],e,!0),r-1,i)}(o,i.overflowSetSequence)),{ariaDescribedBy:n,keytipId:HF(o)}}(i,r,e.ariaDescribedBy)),o}(nN(e,["children"])),n=i.keytipId,o=i.ariaDescribedBy;return r(((t={})["data-ktp-target"]=n,t["data-ktp-execute-target"]=n,t["aria-describedby"]=o,t))},UF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._anchor=w.createRef(),t._getMemoizedMenuButtonKeytipProps=ZN(function(e){return iN(iN({},e),{hasMenu:!0})}),t._getSubmenuTarget=function(){return t._anchor.current?t._anchor.current:void 0},t._onItemClick=function(e){var r=t.props,i=r.item,n=r.onItemClick;n&&n(i,e)},t._renderAriaDescription=function(e,r){return e?w.createElement("span",{id:t._ariaDescriptionId,className:r},e):null},t}return rN(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.item,i=t.classNames,n=t.index,o=t.focusableElementIndex,s=t.totalItemCount,a=t.hasCheckmarks,l=t.hasIcons,c=t.expandedMenuItemKey,u=t.onItemClick,d=t.openSubMenu,m=t.dismissSubMenu,p=t.dismissMenu,h=LF;this.props.item.contextualMenuItemAs&&(h=qL(this.props.item.contextualMenuItemAs,h)),this.props.contextualMenuItemAs&&(h=qL(this.props.contextualMenuItemAs,h));var f=r.rel;r.target&&"_blank"===r.target.toLowerCase()&&(f=f||"nofollow noopener noreferrer");var g=GL(r),v=gB(r,eB),b=WL(r),y=r.itemProps,_=r.ariaDescription,x=r.keytipProps;x&&g&&(x=this._getMemoizedMenuButtonKeytipProps(x)),_&&(this._ariaDescriptionId=qD());var C=XM(r.ariaDescribedBy,_?this._ariaDescriptionId:void 0,v["aria-describedby"]),k={"aria-describedby":C};return w.createElement("div",null,w.createElement(qF,{keytipProps:r.keytipProps,ariaDescribedBy:C,disabled:b},function(t){return w.createElement("a",iN({},k,v,t,{ref:e._anchor,href:r.href,target:r.target,rel:f,className:i.root,role:"menuitem","aria-haspopup":g||void 0,"aria-expanded":g?r.key===c:void 0,"aria-posinset":o+1,"aria-setsize":s,"aria-disabled":WL(r),style:r.style,onClick:e._onItemClick,onMouseEnter:e._onItemMouseEnter,onMouseLeave:e._onItemMouseLeave,onMouseMove:e._onItemMouseMove,onKeyDown:g?e._onItemKeyDown:void 0}),w.createElement(h,iN({componentRef:r.componentRef,item:r,classNames:i,index:n,onCheckmarkClick:a&&u?u:void 0,hasIcons:l,openSubMenu:d,dismissSubMenu:m,dismissMenu:p,getSubmenuTarget:e._getSubmenuTarget},y)),e._renderAriaDescription(_,i.screenReaderText))}))},t}(zF),GF=LB(),WF=w.forwardRef(function(e,t){var r=e.styles,i=e.theme,n=e.getClassNames,o=e.className,s=GF(r,{theme:i,getClassNames:n,className:o});return w.createElement("span",{className:s.wrapper,ref:t},w.createElement("span",{className:s.divider}))});WF.displayName="VerticalDividerBase";var VF,KF=PB(WF,function(e){var t=e.theme,r=e.getClassNames,i=e.className;if(!t)throw new Error("Theme is undefined or null.");if(r){var n=r(t);return{wrapper:[n.wrapper],divider:[n.divider]}}return{wrapper:[{display:"inline-flex",height:"100%",alignItems:"center"},i],divider:[{width:1,height:"100%",backgroundColor:t.palette.neutralTertiaryAlt}]}},void 0,{scope:"VerticalDivider"}),$F=function(e){function t(t){var r=e.call(this,t)||this;return r._getMemoizedMenuButtonKeytipProps=ZN(function(e){return iN(iN({},e),{hasMenu:!0})}),r._onItemKeyDown=function(e){var t=r.props,i=t.item,n=t.onItemKeyDown;e.which===rR?(r._executeItemClick(e),e.preventDefault(),e.stopPropagation()):n&&n(i,e)},r._getSubmenuTarget=function(){return r._splitButton},r._renderAriaDescription=function(e,t){return e?w.createElement("span",{id:r._ariaDescriptionId,className:t},e):null},r._onItemMouseEnterPrimary=function(e){var t=r.props,i=t.item,n=t.onItemMouseEnter;n&&n(iN(iN({},i),{subMenuProps:void 0,items:void 0}),e,r._splitButton)},r._onItemMouseEnterIcon=function(e){var t=r.props,i=t.item,n=t.onItemMouseEnter;n&&n(i,e,r._splitButton)},r._onItemMouseMovePrimary=function(e){var t=r.props,i=t.item,n=t.onItemMouseMove;n&&n(iN(iN({},i),{subMenuProps:void 0,items:void 0}),e,r._splitButton)},r._onItemMouseMoveIcon=function(e){var t=r.props,i=t.item,n=t.onItemMouseMove;n&&n(i,e,r._splitButton)},r._onIconItemClick=function(e){var t=r.props,i=t.item,n=t.onItemClickBase;n&&n(i,e,r._splitButton?r._splitButton:e.currentTarget)},r._executeItemClick=function(e){var t=r.props,i=t.item,n=t.executeItemClick,o=t.onItemClick;if(!i.disabled&&!i.isDisabled)return r._processingTouch&&!i.canCheck&&o?o(i,e):void(n&&n(i,e))},r._onTouchStart=function(e){r._splitButton&&!("onpointerdown"in r._splitButton)&&r._handleTouchAndPointerEvent(e)},r._onPointerDown=function(e){"touch"===e.pointerType&&(r._handleTouchAndPointerEvent(e),e.preventDefault(),e.stopImmediatePropagation())},r._async=new hM(r),r._events=new BM(r),r._dismissLabelId=qD(),r}return rN(t,e),t.prototype.componentDidMount=function(){this._splitButton&&"onpointerdown"in this._splitButton&&this._events.on(this._splitButton,"pointerdown",this._onPointerDown,!0)},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.render=function(){var e,t=this,r=this.props,i=r.item,n=r.classNames,o=r.index,s=r.focusableElementIndex,a=r.totalItemCount,l=r.hasCheckmarks,c=r.hasIcons,u=r.onItemMouseLeave,d=r.expandedMenuItemKey,m=GL(i),p=i.keytipProps;p&&(p=this._getMemoizedMenuButtonKeytipProps(p));var h=i.ariaDescription;h&&(this._ariaDescriptionId=qD());var f=null!==(e=UL(i))&&void 0!==e?e:void 0;return w.createElement(qF,{keytipProps:p,disabled:WL(i)},function(e){return w.createElement("div",{"data-ktp-target":e["data-ktp-target"],ref:function(e){return t._splitButton=e},role:VL(i),"aria-label":i.ariaLabel,className:n.splitContainer,"aria-disabled":WL(i),"aria-expanded":m?i.key===d:void 0,"aria-haspopup":!0,"aria-describedby":XM(i.ariaDescribedBy,h?t._ariaDescriptionId:void 0,e["aria-describedby"]),"aria-checked":f,"aria-posinset":s+1,"aria-setsize":a,onMouseEnter:t._onItemMouseEnterPrimary,onMouseLeave:u?u.bind(t,iN(iN({},i),{subMenuProps:null,items:null})):void 0,onMouseMove:t._onItemMouseMovePrimary,onKeyDown:t._onItemKeyDown,onClick:t._executeItemClick,onTouchStart:t._onTouchStart,tabIndex:0,"data-is-focusable":!0,"aria-roledescription":i["aria-roledescription"]},t._renderSplitPrimaryButton(i,n,o,l,c),t._renderSplitDivider(i),t._renderSplitIconButton(i,n,o,e),t._renderAriaDescription(h,n.screenReaderText))})},t.prototype._renderSplitPrimaryButton=function(e,t,r,i,n){var o=this.props,s=o.contextualMenuItemAs,a=void 0===s?LF:s,l=o.onItemClick,c={key:e.key,disabled:WL(e)||e.primaryDisabled,name:e.name,text:e.text||e.name,secondaryText:e.secondaryText,className:t.splitPrimary,canCheck:e.canCheck,isChecked:e.isChecked,checked:e.checked,iconProps:e.iconProps,id:this._dismissLabelId,onRenderIcon:e.onRenderIcon,data:e.data,"data-is-focusable":!1},u=e.itemProps;return w.createElement("button",iN({},gB(c,tB)),w.createElement(a,iN({"data-is-focusable":!1,item:iN(iN({},c),{onClick:e.onClick}),classNames:t,index:r,onCheckmarkClick:i&&l?l:void 0,hasIcons:n},u)))},t.prototype._renderSplitDivider=function(e){var t=e.getSplitButtonVerticalDividerClassNames||PF;return w.createElement(KF,{getClassNames:t})},t.prototype._renderSplitIconButton=function(e,t,r,i){var n=this.props,o=n.onItemMouseLeave,s=n.onItemMouseDown,a=n.openSubMenu,l=n.dismissSubMenu,c=n.dismissMenu,u=LF;this.props.item.contextualMenuItemAs&&(u=qL(this.props.item.contextualMenuItemAs,u)),this.props.contextualMenuItemAs&&(u=qL(this.props.contextualMenuItemAs,u));var d={onClick:this._onIconItemClick,disabled:WL(e),className:t.splitMenu,subMenuProps:e.subMenuProps,submenuIconProps:e.submenuIconProps,split:!0,key:e.key,"aria-labelledby":this._dismissLabelId},m=iN(iN({},gB(d,tB)),{onMouseEnter:this._onItemMouseEnterIcon,onMouseLeave:o?o.bind(this,e):void 0,onMouseDown:function(t){return s?s(e,t):void 0},onMouseMove:this._onItemMouseMoveIcon,"data-is-focusable":!1,"data-ktp-execute-target":i["data-ktp-execute-target"],"aria-haspopup":!0}),p=e.itemProps;return w.createElement("button",iN({},m),w.createElement(u,iN({componentRef:e.componentRef,item:d,classNames:t,index:r,hasIcons:!1,openSubMenu:a,dismissSubMenu:l,dismissMenu:c,getSubmenuTarget:this._getSubmenuTarget},p)))},t.prototype._handleTouchAndPointerEvent=function(e){var t=this,r=this.props.onTap;r&&r(e),this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){t._processingTouch=!1,t._lastTouchTimeoutId=void 0},500)},t}(zF),YF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._btn=w.createRef(),t._getMemoizedMenuButtonKeytipProps=ZN(function(e){return iN(iN({},e),{hasMenu:!0})}),t._renderAriaDescription=function(e,r){return e?w.createElement("span",{id:t._ariaDescriptionId,className:r},e):null},t._getSubmenuTarget=function(){return t._btn.current?t._btn.current:void 0},t}return rN(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.item,i=t.classNames,n=t.index,o=t.focusableElementIndex,s=t.totalItemCount,a=t.hasCheckmarks,l=t.hasIcons,c=t.contextualMenuItemAs,u=t.expandedMenuItemKey,d=t.onItemMouseDown,m=t.onItemClick,p=t.openSubMenu,h=t.dismissSubMenu,f=t.dismissMenu,g=LF;r.contextualMenuItemAs&&(g=qL(r.contextualMenuItemAs,g)),c&&(g=qL(c,g));var v=UL(r),b=null!==v,y=VL(r),_=GL(r),x=r.itemProps,C=r.ariaLabel,k=r.ariaDescription,T=gB(r,tB);delete T.disabled;var E=r.role||y;k&&(this._ariaDescriptionId=qD());var S=XM(r.ariaDescribedBy,k?this._ariaDescriptionId:void 0,T["aria-describedby"]),I={className:i.root,onClick:this._onItemClick,onKeyDown:_?this._onItemKeyDown:void 0,onMouseEnter:this._onItemMouseEnter,onMouseLeave:this._onItemMouseLeave,onMouseDown:function(e){return d?d(r,e):void 0},onMouseMove:this._onItemMouseMove,href:r.href,title:r.title,"aria-label":C,"aria-describedby":S,"aria-haspopup":_||void 0,"aria-expanded":_?r.key===u:void 0,"aria-posinset":o+1,"aria-setsize":s,"aria-disabled":WL(r),"aria-checked":"menuitemcheckbox"!==E&&"menuitemradio"!==E||!b?void 0:!!v,"aria-selected":"menuitem"===E&&b?!!v:void 0,role:E,style:r.style},A=r.keytipProps;return A&&_&&(A=this._getMemoizedMenuButtonKeytipProps(A)),w.createElement(qF,{keytipProps:A,ariaDescribedBy:S,disabled:WL(r)},function(t){return w.createElement("button",iN({ref:e._btn},T,I,t),w.createElement(g,iN({componentRef:r.componentRef,item:r,classNames:i,index:n,onCheckmarkClick:a&&m?m:void 0,hasIcons:l,openSubMenu:p,dismissSubMenu:h,dismissMenu:f,getSubmenuTarget:e._getSubmenuTarget},x)),e._renderAriaDescription(k,i.screenReaderText))})},t}(zF),JF=["setState","render","componentWillMount","UNSAFE_componentWillMount","componentDidMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","UNSAFE_componentWillUpdate","componentDidUpdate","componentWillUnmount"],XF=function(e){function t(t){var r=e.call(this,t)||this;return r._updateComposedComponentRef=r._updateComposedComponentRef.bind(r),r}return rN(t,e),t.prototype._updateComposedComponentRef=function(e){var t;this._composedComponentInstance=e,e?this._hoisted=function(e,t,r){void 0===r&&(r=JF);var i=[],n=function(n){"function"!=typeof t[n]||void 0!==e[n]||r&&-1!==r.indexOf(n)||(i.push(n),e[n]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t[n].apply(t,e)})};for(var o in t)n(o);return i}(this,e):this._hoisted&&(t=this,this._hoisted.forEach(function(e){return delete t[e]}))},t}(w.Component);function ZF(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}!function(e){e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large",e[e.xLarge=3]="xLarge",e[e.xxLarge=4]="xxLarge",e[e.xxxLarge=5]="xxxLarge",e[e.unknown=999]="unknown"}(VF||(VF={}));var QF,ej=[479,639,1023,1365,1919,99999999];function tj(){var e;return null!==(e=QF)&&void 0!==e?e:VF.large}function rj(e){var t,r=((t=function(t){function r(e){var r=t.call(this,e)||this;return r._onResize=function(){var e=nj(r.context.window);e!==r.state.responsiveMode&&r.setState({responsiveMode:e})},r._events=new BM(r),r._updateComposedComponentRef=r._updateComposedComponentRef.bind(r),r.state={responsiveMode:tj()},r}return rN(r,t),r.prototype.componentDidMount=function(){this._events.on(this.context.window,"resize",this._onResize),this._onResize()},r.prototype.componentWillUnmount=function(){this._events.dispose()},r.prototype.render=function(){var t=this.state.responsiveMode;return t===VF.unknown?null:w.createElement(e,iN({ref:this._updateComposedComponentRef,responsiveMode:t},this.props))},r}(XF)).contextType=Sz,t);return ZF(e,r)}function ij(e){try{return e.document.documentElement.clientWidth}catch(t){return e.innerWidth}}function nj(e){var t=VF.small;if(!e)throw new Error("Content was rendered in a server environment without providing a default responsive mode. Call setResponsiveMode to define what the responsive mode is.");try{for(;ij(e)>ej[t];)t++}catch(e){t=tj()}return QF=t,t}var oj=function(e,t){var r=w.useState(tj()),i=r[0],n=r[1],o=w.useCallback(function(){var t=nj(mR(e.current));i!==t&&n(t)},[e,i]);return Ez(Iz(),"resize",o),w.useEffect(function(){void 0===t&&o()},[t]),null!=t?t:i},sj=w.createContext({}),aj=LB(),lj=LB(),cj={items:[],shouldFocusOnMount:!0,gapSpace:0,directionalHint:7,beakWidth:16};function uj(e){for(var t=0,r=0,i=e;r<i.length;r++){var n=i[r];n.itemType!==ZM.Divider&&n.itemType!==ZM.Header&&(t+=n.customOnRenderListLength?n.customOnRenderListLength:1)}return t}function dj(e,t){var r=null==t?void 0:t.target,i=e.subMenuProps?e.subMenuProps.items:e.items;if(i){for(var n=[],o=0,s=i;o<s.length;o++){var a=s[o];if(a.preferMenuTargetAsEventTarget){var l=a.onClick,c=nN(a,["onClick"]);n.push(iN(iN({},c),{onClick:_j(l,r)}))}else n.push(a)}return n}}var mj="ContextualMenu",pj=ZN(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return OD.apply(void 0,sN([t,MF],e,!1))}});function hj(e,t){var r=e.hidden,i=e.items,n=e.theme,o=e.className,s=e.id,a=e.target,l=w.useState(),c=l[0],u=l[1],d=w.useState(),m=d[0],p=d[1],h=w.useState(),f=h[0],g=h[1],v=GD(mj,s),b=w.useCallback(function(){g(void 0),u(void 0),p(void 0)},[]),y=w.useCallback(function(e,t,r){var i=e.key;c!==i&&(t.focus(),g(r),u(i),p(t))},[c]);w.useEffect(function(){r&&b()},[r,b]);var _=function(e,t){var r=w.useRef(!1);w.useEffect(function(){return r.current=!0,function(){r.current=!1}},[]);return function(i,n){n?e(i,n):r.current&&t()}}(t,b);return[c,y,function(){var e=yj(c,i),t=null;if(e&&(t={items:dj(e,{target:a}),target:m,onDismiss:_,isSubMenu:!0,id:v,shouldFocusOnMount:!0,shouldFocusOnContainer:f,directionalHint:gR(n)?8:11,className:o,gapSpace:0,isBeakVisible:!1},e.subMenuProps&&RM(t,e.subMenuProps),e.preferMenuTargetAsEventTarget)){var r=e.onItemClick;t.onItemClick=_j(r,a)}return t},_]}var fj=w.memo(w.forwardRef(function(e,t){var r,i=zL(cj,e),n=(i.ref,nN(i,["ref"])),o=w.useRef(null),s=Tz(),a=GD(mj,n.id),l=function(e,t){var r;return null===(r=n.onDismiss)||void 0===r?void 0:r.call(n,e,t)},c=Rz(n.target,o),u=c[0],d=c[1],m=function(e,t,r){var i=e.hidden,n=e.onRestoreFocus,o=w.useRef(),s=w.useCallback(function(e){var t,r;n?n(e):(null==e?void 0:e.documentContainsFocus)&&(null===(r=null===(t=o.current)||void 0===t?void 0:t.focus)||void 0===r||r.call(t))},[n]);return KB(function(){var e,n;if(i)o.current&&(s({originalElement:o.current,containsFocus:!0,documentContainsFocus:(null===(n=uR())||void 0===n?void 0:n.hasFocus())||!1}),o.current=void 0);else{var a=null==t?void 0:t.document.activeElement;(null===(e=r.current)||void 0===e?void 0:e.contains(a))||"BODY"===a.tagName||(o.current=a)}},[i,null==t?void 0:t.document.activeElement,s,r]),[s]}(n,d,o)[0],p=hj(n,l),h=p[0],f=p[1],g=p[2],v=p[3],b=function(e){var t=e.delayUpdateFocusOnHover,r=e.hidden,i=w.useRef(!t),n=w.useRef(!1);w.useEffect(function(){i.current=!t,n.current=!r&&!t&&n.current},[t,r]);var o=w.useCallback(function(){t&&(i.current=!1)},[t]);return[i,n,o]}(n),y=b[0],_=b[1],x=b[2],C=function(e){var t=w.useRef(!0),r=w.useRef();return[function(){t.current||void 0===r.current?t.current=!1:(e.clearTimeout(r.current),r.current=void 0),r.current=e.setTimeout(function(){t.current=!0},250)},t]}(s),k=C[0],T=C[1],E=function(e,t){var r=e.subMenuHoverDelay,i=void 0===r?250:r,n=w.useRef(void 0),o=function(){void 0!==n.current&&(t.clearTimeout(n.current),n.current=void 0)};return[o,function(e){n.current=t.setTimeout(function(){e(),o()},i)},n]}(n,s),S=E[0],I=E[1],A=E[2],O=oj(o,n.responsiveMode);!function(e){var t=e.hidden,r=void 0!==t&&t,i=e.onMenuDismissed,n=e.onMenuOpened,o=FF(r),s=w.useRef(n),a=w.useRef(i),l=w.useRef(e);s.current=n,a.current=i,l.current=e,w.useEffect(function(){var e,t;r&&!1===o?null===(e=a.current)||void 0===e||e.call(a,l.current):r||!1===o||null===(t=s.current)||void 0===t||t.call(s,l.current)},[r,o]),w.useEffect(function(){return function(){var e;return null===(e=a.current)||void 0===e?void 0:e.call(a,l.current)}},[])}(n);var N,R=function(e,t,r,i){var n=e.theme,o=e.isSubMenu,s=e.focusZoneProps,a=void 0===s?{}:s,l=a.checkForNoWrap,c=a.direction,u=void 0===c?rL.vertical:c,d=w.useRef(),m=function(e,r,i){var n=!1;return r(e)&&(t(e,i),e.preventDefault(),e.stopPropagation(),n=!0),n},p=function(e){return e.which===iR||function(e){var t=gR(n)?aR:oR;return!(e.which!==t||!o||u!==rL.vertical&&(!l||dL(e.target,"data-no-horizontal-wrap")))}(e)||e.which===sR&&(e.altKey||e.metaKey)},h=function(e){d.current=gj(e);var t=e.which===iR&&(ML()||LL());return m(e,p,t)},f=function(e){var t=d.current&&gj(e);return d.current=!1,!!t&&!(LL()||ML())};return[h,function(e){return m(e,f,!0)},function(e){if(!h(e)&&r.current){var t=!(!e.altKey&&!e.metaKey),i=e.which===sR,n=e.which===lR;if(!t&&(i||n)){var o=i?function(e,t){return nL(e,t,!0,!1,!0,!0,void 0,void 0,void 0)}(r.current,r.current.lastChild):function(e,t){return oL(e,t,!0,!1,!1,!0,void 0,void 0,void 0,void 0)}(r.current,r.current.firstChild);o&&(o.focus(),e.preventDefault(),e.stopPropagation())}}},function(e,t){var r=gR(n)?oR:aR;e.disabled||t.which!==r&&t.which!==rR&&(t.which!==lR||!t.altKey&&!t.metaKey)||(i(e,t.currentTarget),t.preventDefault())}]}(n,l,o,f),P=R[0],D=R[1],B=R[2],M=R[3],L=function(e,t,r,i,n,o,s,a,l,c,u,d,m){var p=e.target,h=function(){return!t.current||!o.current},f=function(e,t,r){var i=r||t.currentTarget;e.key!==s&&(c(),void 0===s&&i.focus(),GL(e)?(t.stopPropagation(),l(function(){i.focus(),u(e,i,!0)})):l(function(){d(t),i.focus()}))},g=function(t,r,i){var n=dj(t,{target:p});if(c(),GL(t)||n&&n.length){if(t.key!==s){var o="boolean"==typeof e.shouldFocusOnContainer?e.shouldFocusOnContainer:"mouse"===r.nativeEvent.pointerType;u(t,i,o)}}else v(t,r);r.stopPropagation(),r.preventDefault()},v=function(t,r){if(!t.disabled&&!t.isDisabled){t.preferMenuTargetAsEventTarget&&xj(r,p);var i=!1;t.onClick?i=!!t.onClick(r,t):e.onItemClick&&(i=!!e.onItemClick(r,t)),!i&&r.defaultPrevented||m(r,!0)}};return[function(e,t,r){n.current&&(o.current=!0),h()||f(e,t,r)},function(e,s,a){var l=s.currentTarget;n.current&&(o.current=!0,t.current&&void 0===r.current&&l!==(null==i?void 0:i.document.activeElement)&&f(e,s,a))},function(e,t){var r;if(!h()&&(c(),void 0===s))if(a.current.setActive)try{a.current.setActive()}catch(e){}else null===(r=a.current)||void 0===r||r.focus()},function(e,t){g(e,t,t.currentTarget)},function(e,t){v(e,t),t.stopPropagation()},v,g]}(n,T,A,d,y,_,h,o,I,S,f,v,l),z=L[0],F=L[1],j=L[2],H=L[3],q=L[4],U=L[5],G=L[6],W=function(e,t,r){var i=0,n=e.items,o=e.totalItemCount,s=e.hasCheckmarks,a=e.hasIcons;return w.createElement("ul",{className:t.list,onKeyDown:P,onKeyUp:D,role:"presentation"},n.map(function(e,r){var n=V(e,r,i,o,s,a,t);if(e.itemType!==ZM.Divider&&e.itemType!==ZM.Header){var l=e.customOnRenderListLength?e.customOnRenderListLength:1;i+=l}return n}))},V=function(e,t,r,i,o,s,a){var l,c,u=[],d=e.iconProps||{iconName:"None"},m=e.getItemClassNames,p=e.itemProps,f=p?p.styles:void 0,g=e.itemType===ZM.Divider?e.className:void 0,v=e.submenuIconProps?e.submenuIconProps.className:"";if(m)c=m(n.theme,WL(e),h===e.key,!!UL(e),!!e.href,"None"!==d.iconName,e.className,g,d.className,v,e.primaryDisabled);else{var b={theme:n.theme,disabled:WL(e),expanded:h===e.key,checked:!!UL(e),isAnchorLink:!!e.href,knownIcon:"None"!==d.iconName,itemClassName:e.className,dividerClassName:g,iconClassName:d.className,subMenuClassName:v,primaryDisabled:e.primaryDisabled};c=lj(pj(null===(l=a.subComponentStyles)||void 0===l?void 0:l.menuItem,f),b)}switch("-"!==e.text&&"-"!==e.name||(e.itemType=ZM.Divider),e.itemType){case ZM.Divider:u.push(Y(t,c));break;case ZM.Header:u.push(Y(t,c));var y=X(e,c,a,t,o,s);u.push($(y,e.key||t,c,e.title));break;case ZM.Section:u.push(K(e,c,a,t,o,s));break;default:var _=function(){return J(e,c,t,r,i,o,s)},x=n.onRenderContextualMenuItem?n.onRenderContextualMenuItem(e,_):_();u.push($(x,e.key||t,c,e.title))}return w.createElement(w.Fragment,{key:e.key},u)},K=function(e,t,r,i,n,o){var s=e.sectionProps;if(s){var l,c;if(s.title){var u=void 0,d="";if("string"==typeof s.title){var m=a+s.title.replace(/\s/g,"");u={key:"section-".concat(s.title,"-title"),itemType:ZM.Header,text:s.title,id:m},d=m}else{var p=s.title.id||a+s.title.key.replace(/\s/g,"");u=iN(iN({},s.title),{id:p}),d=p}u&&(c={role:"group","aria-labelledby":d},l=X(u,t,r,i,n,o))}if(s.items&&s.items.length>0){var h=0;return w.createElement("li",{role:"presentation",key:s.key||e.key||"section-".concat(i)},w.createElement("div",iN({},c),w.createElement("ul",{className:r.list,role:"presentation"},s.topDivider&&Y(i,t,!0,!0),l&&$(l,e.key||i,t,e.title),s.items.map(function(e,t){var i=V(e,t,h,uj(s.items),n,o,r);if(e.itemType!==ZM.Divider&&e.itemType!==ZM.Header){var a=e.customOnRenderListLength?e.customOnRenderListLength:1;h+=a}return i}),s.bottomDivider&&Y(i,t,!1,!0))))}}},$=function(e,t,r,i){return w.createElement("li",{role:"presentation",title:i,key:t,className:r.item},e)},Y=function(e,t,r,i){return i||e>0?w.createElement("li",{role:"separator",key:"separator-"+e+(void 0===r?"":r?"-top":"-bottom"),className:t.divider,"aria-hidden":"true"}):null},J=function(e,t,r,i,o,s,a){if(e.onRender)return e.onRender(iN({"aria-posinset":i+1,"aria-setsize":o},e),l);var c={item:e,classNames:t,index:r,focusableElementIndex:i,totalItemCount:o,hasCheckmarks:s,hasIcons:a,contextualMenuItemAs:n.contextualMenuItemAs,onItemMouseEnter:z,onItemMouseLeave:j,onItemMouseMove:F,onItemMouseDown:vj,executeItemClick:U,onItemKeyDown:M,expandedMenuItemKey:h,openSubMenu:f,dismissSubMenu:v,dismissMenu:l};if(e.href){var u=UF;return e.contextualMenuItemWrapperAs&&(u=qL(e.contextualMenuItemWrapperAs,u)),w.createElement(u,iN({},c,{onItemClick:q}))}if(e.split&&GL(e)){var d=$F;return e.contextualMenuItemWrapperAs&&(d=qL(e.contextualMenuItemWrapperAs,d)),w.createElement(d,iN({},c,{onItemClick:H,onItemClickBase:G,onTap:S}))}var m=YF;return e.contextualMenuItemWrapperAs&&(m=qL(e.contextualMenuItemWrapperAs,m)),w.createElement(m,iN({},c,{onItemClick:H,onItemClickBase:G}))},X=function(e,t,r,i,o,s){var a=LF;e.contextualMenuItemAs&&(a=qL(e.contextualMenuItemAs,a)),n.contextualMenuItemAs&&(a=qL(n.contextualMenuItemAs,a));var l=e.itemProps,c=e.id,u=l&&gB(l,fB);return w.createElement("div",iN({id:c,className:r.header},u,{style:e.style}),w.createElement(a,iN({item:e,classNames:t,index:i,onCheckmarkClick:o?H:void 0,hasIcons:s},l)))},Z=n.isBeakVisible,Q=n.items,ee=n.labelElementId,te=n.id,re=n.className,ie=n.beakWidth,ne=n.directionalHint,oe=n.directionalHintForRTL,se=n.alignTargetEdge,ae=n.gapSpace,le=n.coverTarget,ce=n.ariaLabel,ue=n.doNotLayer,de=n.target,me=n.bounds,pe=n.useTargetWidth,he=n.useTargetAsMinWidth,fe=n.directionalHintFixed,ge=n.shouldFocusOnMount,ve=n.shouldFocusOnContainer,be=n.title,ye=n.styles,_e=n.theme,xe=n.calloutProps,we=n.onRenderSubMenu,Ce=void 0===we?bj:we,ke=n.onRenderMenuList,Te=void 0===ke?function(e,t){return W(e,Ie)}:ke,Ee=n.focusZoneProps,Se=n.getMenuClassNames,Ie=Se?Se(_e,re):aj(ye,{theme:_e,className:re}),Ae=function e(t){for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n.iconProps)return!0;if(n.itemType===ZM.Section&&n.sectionProps&&e(n.sectionProps.items))return!0}return!1}(Q),Oe=iN(iN({direction:rL.vertical,handleTabKey:1,isCircularNavigation:!0,"data-tabster":'{"uncontrolled": {}, "focusable": { "excludeFromMover": true }}'},Ee),{className:vB(Ie.root,null===(r=n.focusZoneProps)||void 0===r?void 0:r.className)}),Ne=function(e){return e.some(function(e){return!!e.canCheck||!(!e.sectionProps||!e.sectionProps.items.some(function(e){return!0===e.canCheck}))})}(Q),Re=h&&!0!==n.hidden?g():null;Z=void 0===Z?O<=VF.medium:Z;var Pe=u.current;if((pe||he)&&Pe&&Pe.offsetWidth){var De=Pe.getBoundingClientRect().width-2;pe?N={width:De}:he&&(N={minWidth:De})}if(Q&&Q.length>0){var Be=uj(Q),Me=Ie.subComponentStyles?Ie.subComponentStyles.callout:void 0;return w.createElement(sj.Consumer,null,function(e){return w.createElement(bF,iN({styles:Me,onRestoreFocus:m},xe,{target:de||e.target,isBeakVisible:Z,beakWidth:ie,directionalHint:ne,directionalHintForRTL:oe,gapSpace:ae,coverTarget:le,doNotLayer:ue,className:vB("ms-ContextualMenu-Callout",xe&&xe.className),setInitialFocus:ge,onDismiss:n.onDismiss||e.onDismiss,onScroll:k,bounds:me,directionalHintFixed:fe,alignTargetEdge:se,hidden:n.hidden||e.hidden,ref:t}),w.createElement("div",{style:N,ref:o,id:te,className:Ie.container,tabIndex:ve?0:-1,onKeyDown:B,onKeyUp:D,onFocusCapture:x,"aria-label":ce,"aria-labelledby":ee,role:"menu"},be&&w.createElement("div",{className:Ie.title}," ",be," "),Q&&Q.length?function(e,t){var r=n.focusZoneAs,i=void 0===r?BL:r;return w.createElement(i,iN({},t),e)}(Te({ariaLabel:ce,items:Q,totalItemCount:Be,hasCheckmarks:Ne,hasIcons:Ae,defaultMenuItemRenderer:function(e){return function(e,t){var r=e.index,i=e.focusableElementIndex,n=e.totalItemCount,o=e.hasCheckmarks,s=e.hasIcons;return V(e,r,i,n,o,s,t)}(e,Ie)},labelElementId:ee},function(e,t){return W(e,Ie)}),Oe):null,Re&&Ce(Re,bj)),w.createElement(VM,null))})}return null}),function(e,t){return!(t.shouldUpdateWhenHidden||!e.hidden||!t.hidden)||NM(e,t)});function gj(e){return 18===e.which||"Meta"===e.key}function vj(e,t){var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,e,t)}function bj(e,t){throw Error("ContextualMenuBase: onRenderSubMenu callback is null or undefined. Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.")}function yj(e,t){for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n.itemType===ZM.Section&&n.sectionProps){var o=yj(e,n.sectionProps.items);if(o)return o}else if(n.key&&n.key===e)return n}}function _j(e,t){return e?function(r,i){return xj(r,t),e(r,i)}:e}function xj(e,t){e&&t&&(e.persist(),t instanceof Event?e.target=t.target:t instanceof Element&&(e.target=t))}fj.displayName="ContextualMenuBase";var wj={root:"ms-ContextualMenu",container:"ms-ContextualMenu-container",list:"ms-ContextualMenu-list",header:"ms-ContextualMenu-header",title:"ms-ContextualMenu-title",isopen:"is-open"};function Cj(e){return w.createElement(kj,iN({},e))}var kj=PB(fj,function(e){var t=e.className,r=e.theme,i=EP(wj,r),n=r.fonts,o=r.semanticColors,s=r.effects;return{root:[r.fonts.medium,i.root,i.isopen,{backgroundColor:o.menuBackground,minWidth:"180px"},t],container:[i.container,{selectors:{":focus":{outline:0}}}],list:[i.list,i.isopen,{listStyleType:"none",margin:"0",padding:"0"}],header:[i.header,n.small,{fontWeight:xP.semibold,color:o.menuHeader,background:"none",backgroundColor:"transparent",border:"none",height:IF,lineHeight:IF,cursor:"default",padding:"0px 6px",userSelect:"none",textAlign:"left"}],title:[i.title,{fontSize:n.mediumPlus.fontSize,paddingRight:"14px",paddingLeft:"14px",paddingBottom:"5px",paddingTop:"5px",backgroundColor:o.menuItemBackgroundPressed}],subComponentStyles:{callout:{root:{boxShadow:s.elevation8}},menuItem:{}}}},function(e){return{onRenderSubMenu:e.onRenderSubMenu?tL(e.onRenderSubMenu,Cj):Cj}},{scope:"ContextualMenu"}),Tj=kj;Tj.displayName="ContextualMenu";var Ej={msButton:"ms-Button",msButtonHasMenu:"ms-Button--hasMenu",msButtonIcon:"ms-Button-icon",msButtonMenuIcon:"ms-Button-menuIcon",msButtonLabel:"ms-Button-label",msButtonDescription:"ms-Button-description",msButtonScreenReaderText:"ms-Button-screenReaderText",msButtonFlexContainer:"ms-Button-flexContainer",msButtonTextContainer:"ms-Button-textContainer"},Sj=ZN(function(e,t,r,i,n,o,s,a,l,c,u){var d,m,p=EP(Ej,e||{}),h=c&&!u;return ND(t.__shadowConfig__,{root:[p.msButton,t.root,i,l&&["is-checked",t.rootChecked],h&&["is-expanded",t.rootExpanded,(d={},d[":hover .".concat(p.msButtonIcon)]=t.iconExpandedHovered,d[":hover .".concat(p.msButtonMenuIcon)]=t.menuIconExpandedHovered||t.rootExpandedHovered,d[":hover"]=t.rootExpandedHovered,d)],a&&[Ej.msButtonHasMenu,t.rootHasMenu],s&&["is-disabled",t.rootDisabled],!s&&!h&&!l&&(m={":hover":t.rootHovered},m[":hover .".concat(p.msButtonLabel)]=t.labelHovered,m[":hover .".concat(p.msButtonIcon)]=t.iconHovered,m[":hover .".concat(p.msButtonDescription)]=t.descriptionHovered,m[":hover .".concat(p.msButtonMenuIcon)]=t.menuIconHovered,m[":focus"]=t.rootFocused,m[":active"]=t.rootPressed,m[":active .".concat(p.msButtonIcon)]=t.iconPressed,m[":active .".concat(p.msButtonDescription)]=t.descriptionPressed,m[":active .".concat(p.msButtonMenuIcon)]=t.menuIconPressed,m),s&&l&&[t.rootCheckedDisabled],!s&&l&&{":hover":t.rootCheckedHovered,":active":t.rootCheckedPressed},r],flexContainer:[p.msButtonFlexContainer,t.flexContainer],textContainer:[p.msButtonTextContainer,t.textContainer],icon:[p.msButtonIcon,n,t.icon,h&&t.iconExpanded,l&&t.iconChecked,s&&t.iconDisabled],label:[p.msButtonLabel,t.label,l&&t.labelChecked,s&&t.labelDisabled],menuIcon:[p.msButtonMenuIcon,o,t.menuIcon,l&&t.menuIconChecked,s&&!u&&t.menuIconDisabled,!s&&!h&&!l&&{":hover":t.menuIconHovered,":active":t.menuIconPressed},h&&["is-expanded",t.menuIconExpanded]],description:[p.msButtonDescription,t.description,l&&t.descriptionChecked,s&&t.descriptionDisabled],screenReaderText:[p.msButtonScreenReaderText,t.screenReaderText]})}),Ij=ZN(function(e,t,r,i,n){return{root:GN(e.splitButtonMenuButton,r&&[e.splitButtonMenuButtonExpanded],t&&[e.splitButtonMenuButtonDisabled],i&&!t&&[e.splitButtonMenuButtonChecked],n&&!t&&[{":focus":e.splitButtonMenuFocused}]),splitButtonContainer:GN(e.splitButtonContainer,!t&&i&&[e.splitButtonContainerChecked,{":hover":e.splitButtonContainerCheckedHovered}],!t&&!i&&[{":hover":e.splitButtonContainerHovered,":focus":e.splitButtonContainerFocused}],t&&e.splitButtonContainerDisabled),icon:GN(e.splitButtonMenuIcon,t&&e.splitButtonMenuIconDisabled,!t&&n&&e.splitButtonMenuIcon),flexContainer:GN(e.splitButtonFlexContainer),divider:GN("ms-SplitButton-divider",e.splitButtonDivider,(n||t)&&e.splitButtonDividerDisabled)}}),Aj=function(e){function t(t){var r=e.call(this,t)||this;return r._buttonElement=w.createRef(),r._splitButtonContainer=w.createRef(),r._mergedRef=EM(),r._renderedVisibleMenu=!1,r._getMemoizedMenuButtonKeytipProps=ZN(function(e){return iN(iN({},e),{hasMenu:!0})}),r._onRenderIcon=function(e,t){var i=r.props.iconProps;if(i&&(void 0!==i.iconName||i.imageProps)){var n=i.className,o=i.imageProps,s=nN(i,["className","imageProps"]);if(i.styles)return w.createElement(sM,iN({className:vB(r._classNames.icon,n),imageProps:o},s));if(i.iconName)return w.createElement(iM,iN({className:vB(r._classNames.icon,n)},s));if(o)return w.createElement(QM,iN({className:vB(r._classNames.icon,n),imageProps:o},s))}return null},r._onRenderTextContents=function(){var e=r.props,t=e.text,i=e.children,n=e.secondaryText,o=void 0===n?r.props.description:n,s=e.onRenderText,a=void 0===s?r._onRenderText:s,l=e.onRenderDescription,c=void 0===l?r._onRenderDescription:l;return t||"string"==typeof i||o?w.createElement("span",{className:r._classNames.textContainer},a(r.props,r._onRenderText),c(r.props,r._onRenderDescription)):[a(r.props,r._onRenderText),c(r.props,r._onRenderDescription)]},r._onRenderText=function(){var e=r.props.text,t=r.props.children;return void 0===e&&"string"==typeof t&&(e=t),r._hasText()?w.createElement("span",{key:r._labelId,className:r._classNames.label,id:r._labelId},e):null},r._onRenderChildren=function(){var e=r.props.children;return"string"==typeof e?null:e},r._onRenderDescription=function(e){var t=e.secondaryText,i=void 0===t?r.props.description:t;return i?w.createElement("span",{key:r._descriptionId,className:r._classNames.description,id:r._descriptionId},i):null},r._onRenderAriaDescription=function(){var e=r.props.ariaDescription;return e?w.createElement("span",{className:r._classNames.screenReaderText,id:r._ariaDescriptionId},e):null},r._onRenderMenuIcon=function(e){var t=r.props.menuIconProps;return w.createElement(iM,iN({iconName:"ChevronDown"},t,{className:r._classNames.menuIcon}))},r._onRenderMenu=function(e){var t=r.props.menuAs?qL(r.props.menuAs,Tj):Tj;return w.createElement(t,iN({},e))},r._onDismissMenu=function(e){var t=r.props.menuProps;t&&t.onDismiss&&t.onDismiss(e),e&&e.defaultPrevented||r._dismissMenu()},r._dismissMenu=function(){r._menuShouldFocusOnMount=void 0,r._menuShouldFocusOnContainer=void 0,r.setState({menuHidden:!0})},r._openMenu=function(e,t){void 0===t&&(t=!0),r.props.menuProps&&(r._menuShouldFocusOnContainer=e,r._menuShouldFocusOnMount=t,r._renderedVisibleMenu=!0,r.setState({menuHidden:!1}))},r._onToggleMenu=function(e){var t=!0;r.props.menuProps&&!1===r.props.menuProps.shouldFocusOnMount&&(t=!1),r.state.menuHidden?r._openMenu(e,t):r._dismissMenu()},r._onSplitContainerFocusCapture=function(e){var t=r._splitButtonContainer.current;!t||e.target&&OM(e.target,t)||t.focus()},r._onSplitButtonPrimaryClick=function(e){r.state.menuHidden||r._dismissMenu();var t=r._processingTouch&&!r.props.toggle;!t&&r.props.onClick?r.props.onClick(e):t&&r._onMenuClick(e)},r._onKeyDown=function(e){!r.props.disabled||e.which!==rR&&e.which!==nR?r.props.disabled||(r.props.menuProps?r._onMenuKeyDown(e):void 0!==r.props.onKeyDown&&r.props.onKeyDown(e)):(e.preventDefault(),e.stopPropagation())},r._onKeyUp=function(e){r.props.disabled||void 0===r.props.onKeyUp||r.props.onKeyUp(e)},r._onKeyPress=function(e){r.props.disabled||void 0===r.props.onKeyPress||r.props.onKeyPress(e)},r._onMouseUp=function(e){r.props.disabled||void 0===r.props.onMouseUp||r.props.onMouseUp(e)},r._onMouseDown=function(e){r.props.disabled||void 0===r.props.onMouseDown||r.props.onMouseDown(e)},r._onClick=function(e){r.props.disabled||(r.props.menuProps?r._onMenuClick(e):void 0!==r.props.onClick&&r.props.onClick(e))},r._onSplitButtonContainerKeyDown=function(e){e.which===rR||e.which===nR?r._buttonElement.current&&(r._buttonElement.current.click(),e.preventDefault(),e.stopPropagation()):r._onMenuKeyDown(e)},r._onMenuKeyDown=function(e){var t;if(!r.props.disabled){r.props.onKeyDown&&r.props.onKeyDown(e);var i=e.which===sR,n=e.which===lR;if(!e.defaultPrevented&&r._isValidMenuOpenKey(e)){var o=r.props.onMenuClick;o&&o(e,r.props),r._onToggleMenu(!1),e.preventDefault(),e.stopPropagation()}e.which!==rR&&e.which!==nR||PP(!0,e.target,null===(t=r.context)||void 0===t?void 0:t.registeredProviders),e.altKey||e.metaKey||!i&&!n||!r.state.menuHidden&&r.props.menuProps&&((void 0!==r._menuShouldFocusOnMount?r._menuShouldFocusOnMount:r.props.menuProps.shouldFocusOnMount)||(e.preventDefault(),e.stopPropagation(),r._menuShouldFocusOnMount=!0,r.forceUpdate()))}},r._onTouchStart=function(){r._isSplitButton&&r._splitButtonContainer.current&&!("onpointerdown"in r._splitButtonContainer.current)&&r._handleTouchAndPointerEvent()},r._onMenuClick=function(e){var t=r.props,i=t.onMenuClick,n=t.menuProps;i&&i(e,r.props);var o="boolean"==typeof(null==n?void 0:n.shouldFocusOnContainer)?n.shouldFocusOnContainer:"mouse"===e.nativeEvent.pointerType;e.defaultPrevented||(r._onToggleMenu(o),e.preventDefault(),e.stopPropagation())},lM(r),r._async=new hM(r),r._events=new BM(r),r.props.split,r._labelId=qD(),r._descriptionId=qD(),r._ariaDescriptionId=qD(),r.state={menuHidden:!0},r}return rN(t,e),Object.defineProperty(t.prototype,"_isSplitButton",{get:function(){return!!this.props.menuProps&&!!this.props.onClick&&!0===this.props.split},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t=this.props,r=t.ariaDescription,i=t.ariaLabel,n=t.ariaHidden,o=t.className,s=t.disabled,a=t.allowDisabledFocus,l=t.primaryDisabled,c=t.secondaryText,u=void 0===c?this.props.description:c,d=t.href,m=t.iconProps,p=t.menuIconProps,h=t.styles,f=t.checked,g=t.variantClassName,v=t.theme,b=t.toggle,y=t.getClassNames,_=t.role,x=this.state.menuHidden,w=s||l;this._classNames=y?y(v,o,g,m&&m.className,p&&p.className,w,f,!x,!!this.props.menuProps,this.props.split,!!a):Sj(v,h,o,g,m&&m.className,p&&p.className,w,!!this.props.menuProps,f,!x,this.props.split);var C=this,k=C._ariaDescriptionId,T=C._labelId,E=C._descriptionId,S=!w&&!!d,I=S?"a":"button",A=gB(RM(S?{}:{type:"button"},this.props.rootProps,this.props),S?eB:tB,["disabled"]),O=i||A["aria-label"],N=void 0;r?N=k:u&&this.props.onRenderDescription!==LM?N=E:A["aria-describedby"]&&(N=A["aria-describedby"]);var R=void 0;A["aria-labelledby"]?R=A["aria-labelledby"]:N&&!O&&(R=this._hasText()?T:void 0);var P=!(!1===this.props["data-is-focusable"]||s&&!a||this._isSplitButton),D="menuitemcheckbox"===_||"checkbox"===_,B=D||!0===b?!!f:void 0,M=RM(A,((e={className:this._classNames.root,ref:this._mergedRef(this.props.elementRef,this._buttonElement),disabled:w&&!a,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onClick:this._onClick,"aria-label":O,"aria-labelledby":R,"aria-describedby":N,"aria-disabled":w,"data-is-focusable":P})[D?"aria-checked":"aria-pressed"]=B,e));if(n&&(M["aria-hidden"]=!0),this._isSplitButton)return this._onRenderSplitButtonContent(I,M);if(this.props.menuProps){var L=this.props.menuProps.id,z=void 0===L?"".concat(this._labelId,"-menu"):L;RM(M,{"aria-expanded":!x,"aria-controls":x?null:z,"aria-haspopup":!0})}return this._onRenderContent(I,M)},t.prototype.componentDidMount=function(){this._isSplitButton&&this._splitButtonContainer.current&&("onpointerdown"in this._splitButtonContainer.current&&this._events.on(this._splitButtonContainer.current,"pointerdown",this._onPointerDown,!0),"onpointerup"in this._splitButtonContainer.current&&this.props.onPointerUp&&this._events.on(this._splitButtonContainer.current,"pointerup",this.props.onPointerUp,!0))},t.prototype.componentDidUpdate=function(e,t){this.props.onAfterMenuDismiss&&!t.menuHidden&&this.state.menuHidden&&this.props.onAfterMenuDismiss()},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.focus=function(){var e,t;this._isSplitButton&&this._splitButtonContainer.current?(PP(!0,void 0,null===(e=this.context)||void 0===e?void 0:e.registeredProviders),this._splitButtonContainer.current.focus()):this._buttonElement.current&&(PP(!0,void 0,null===(t=this.context)||void 0===t?void 0:t.registeredProviders),this._buttonElement.current.focus())},t.prototype.dismissMenu=function(){this._dismissMenu()},t.prototype.openMenu=function(e,t){this._openMenu(e,t)},t.prototype._onRenderContent=function(e,t){var r=this,i=this.props,n=e,o=i.menuIconProps,s=i.menuProps,a=i.onRenderIcon,l=void 0===a?this._onRenderIcon:a,c=i.onRenderAriaDescription,u=void 0===c?this._onRenderAriaDescription:c,d=i.onRenderChildren,m=void 0===d?this._onRenderChildren:d,p=i.onRenderMenu,h=void 0===p?this._onRenderMenu:p,f=i.onRenderMenuIcon,g=void 0===f?this._onRenderMenuIcon:f,v=i.disabled,b=i.keytipProps;b&&s&&(b=this._getMemoizedMenuButtonKeytipProps(b));var y=function(e){return w.createElement(n,iN({},t,e),w.createElement("span",{className:r._classNames.flexContainer,"data-automationid":"splitbuttonprimary"},l(i,r._onRenderIcon),r._onRenderTextContents(),u(i,r._onRenderAriaDescription),m(i,r._onRenderChildren),!r._isSplitButton&&(s||o||r.props.onRenderMenuIcon)&&g(r.props,r._onRenderMenuIcon),s&&!s.doNotLayer&&r._shouldRenderMenu()&&h(r._getMenuProps(s),r._onRenderMenu)))},_=b?w.createElement(qF,{keytipProps:this._isSplitButton?void 0:b,ariaDescribedBy:t["aria-describedby"],disabled:v},function(e){return y(e)}):y();return s&&s.doNotLayer?w.createElement(w.Fragment,null,_,this._shouldRenderMenu()&&h(this._getMenuProps(s),this._onRenderMenu)):w.createElement(w.Fragment,null,_,w.createElement(VM,null))},t.prototype._shouldRenderMenu=function(){var e=this.state.menuHidden,t=this.props,r=t.persistMenu,i=t.renderPersistedMenuHiddenOnMount;return!e||!(!r||!this._renderedVisibleMenu&&!i)},t.prototype._hasText=function(){return null!==this.props.text&&(void 0!==this.props.text||"string"==typeof this.props.children)},t.prototype._getMenuProps=function(e){var t=this.props.persistMenu,r=this.state.menuHidden;return e.ariaLabel||e.labelElementId||!this._hasText()||(e=iN(iN({},e),{labelElementId:this._labelId})),iN(iN({id:this._labelId+"-menu",directionalHint:4},e),{shouldFocusOnContainer:this._menuShouldFocusOnContainer,shouldFocusOnMount:this._menuShouldFocusOnMount,hidden:t?r:void 0,className:vB("ms-BaseButton-menuhost",e.className),target:this._isSplitButton?this._splitButtonContainer.current:this._buttonElement.current,onDismiss:this._onDismissMenu})},t.prototype._onRenderSplitButtonContent=function(e,t){var r=this,i=this.props,n=i.styles,o=void 0===n?{}:n,s=i.disabled,a=i.allowDisabledFocus,l=i.checked,c=i.getSplitButtonClassNames,u=i.primaryDisabled,d=i.menuProps,m=i.toggle,p=i.role,h=i.primaryActionButtonProps,f=this.props.keytipProps,g=this.state.menuHidden,v=c?c(!!s,!g,!!l,!!a):o&&Ij(o,!!s,!g,!!l,!!u);RM(t,{onClick:void 0,onPointerDown:void 0,onPointerUp:void 0,tabIndex:-1,"data-is-focusable":!1}),f&&d&&(f=this._getMemoizedMenuButtonKeytipProps(f));var b=gB(t,[],["disabled"]);h&&RM(t,h);var y=function(i){return w.createElement("div",iN({},b,{"data-ktp-target":i?i["data-ktp-target"]:void 0,role:p||"button","aria-disabled":s,"aria-haspopup":!0,"aria-expanded":!g,"aria-pressed":m?!!l:void 0,"aria-describedby":XM(t["aria-describedby"],i?i["aria-describedby"]:void 0),className:v&&v.splitButtonContainer,onKeyDown:r._onSplitButtonContainerKeyDown,onTouchStart:r._onTouchStart,ref:r._splitButtonContainer,"data-is-focusable":!0,onClick:s||u?void 0:r._onSplitButtonPrimaryClick,tabIndex:!s&&!u||a?0:void 0,"aria-roledescription":t["aria-roledescription"],onFocusCapture:r._onSplitContainerFocusCapture}),w.createElement("span",{style:{display:"flex",width:"100%"}},r._onRenderContent(e,t),r._onRenderSplitButtonMenuButton(v,i),r._onRenderSplitButtonDivider(v)))};return f?w.createElement(qF,{keytipProps:f,disabled:s},function(e){return y(e)}):y()},t.prototype._onRenderSplitButtonDivider=function(e){return e&&e.divider?w.createElement("span",{className:e.divider,"aria-hidden":!0,onClick:function(e){e.stopPropagation()}}):null},t.prototype._onRenderSplitButtonMenuButton=function(e,r){var i=this.props,n=i.allowDisabledFocus,o=i.checked,s=i.disabled,a=i.splitButtonMenuProps,l=i.splitButtonAriaLabel,c=i.primaryDisabled,u=this.state.menuHidden,d=this.props.menuIconProps;void 0===d&&(d={iconName:"ChevronDown"});var m=iN(iN({},a),{styles:e,checked:o,disabled:s,allowDisabledFocus:n,onClick:this._onMenuClick,menuProps:void 0,iconProps:iN(iN({},d),{className:this._classNames.menuIcon}),ariaLabel:l,"aria-haspopup":!0,"aria-expanded":!u,"data-is-focusable":!1});return w.createElement(t,iN({},m,{"data-ktp-execute-target":r?r["data-ktp-execute-target"]:r,onMouseDown:this._onMouseDown,tabIndex:c&&!n?0:-1}))},t.prototype._onPointerDown=function(e){var t=this.props.onPointerDown;t&&t(e),"touch"===e.pointerType&&(this._handleTouchAndPointerEvent(),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._handleTouchAndPointerEvent=function(){var e=this;void 0!==this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){e._processingTouch=!1,e._lastTouchTimeoutId=void 0,e.state.menuHidden&&e.focus()},500)},t.prototype._isValidMenuOpenKey=function(e){return this.props.menuTriggerKeyCode?e.which===this.props.menuTriggerKeyCode:!!this.props.menuProps&&e.which===lR&&(e.altKey||e.metaKey)},t.defaultProps={baseClassName:"ms-Button",styles:{},split:!1},t.contextType=GM,t}(w.Component),Oj=function(){return w.useContext(xL)},Nj=function(e){var t=e.stylesheetKey,r=e.children,i=NB(),n=i.useAdoptedStylesheetEx,o=i.useMergeStylesRootStylesheets,s=i.useWindow,a=Oj(),l=o(),c=s();return n(lN,a,l,c),n(t,a,l,c),r(!!a)},Rj=ZN(function(e,t,r){return{stylesheetKey:e,inShadow:t,window:r,__isShadowConfig__:!0}}),Pj=ZN(function(e,t,r){var i,n=null!==(i=null!=t?t:e)&&void 0!==i?i:{};return n.__shadowConfig__=r,n});function Dj(e,t,r){return function(i){var n,o=(n=function(n){function o(e){var t=n.call(this,e)||this;return t._styleCache={},t._onSettingChanged=t._onSettingChanged.bind(t),t}return rN(o,n),o.prototype.componentDidMount=function(){VP.observe(this._onSettingChanged)},o.prototype.componentWillUnmount=function(){VP.unobserve(this._onSettingChanged)},o.prototype.render=function(){var n=this;return w.createElement(Nj,{stylesheetKey:e},function(o){return w.createElement(MD.Consumer,null,function(s){var a,l=VP.getSettings(t,e,s.customizations),c=null!==(a=n.context.window)&&void 0!==a?a:mR(),u=Rj(e,o,c),d=n.props;if(l.styles&&"function"==typeof l.styles&&(l.styles=l.styles(iN(iN({},l),d))),r&&l.styles){if(n._styleCache.default!==l.styles||n._styleCache.component!==d.styles){var m=AD(l.styles,d.styles);m.__shadowConfig__=u,n._styleCache.default=l.styles,n._styleCache.component=d.styles,n._styleCache.merged=m}return w.createElement(i,iN({},l,d,{styles:n._styleCache.merged}))}var p=Pj(l.styles,d.styles,u);return w.createElement(i,iN({},l,d,{styles:p}))})})},o.prototype._onSettingChanged=function(){this.forceUpdate()},o}(w.Component),n.displayName="Customized"+e,n.contextType=Sz,n);return ZF(i,o)}}var Bj={outline:0},Mj=function(e){return{fontSize:e,margin:"0 4px",height:"16px",lineHeight:"16px",textAlign:"center",flexShrink:0}},Lj=ZN(function(e){var t,r,i=e.semanticColors,n=e.effects,o=e.fonts,s=i.buttonBorder,a=i.disabledBackground,l=i.disabledText,c={left:-2,top:-2,bottom:-2,right:-2,outlineColor:"ButtonText"};return{root:[DP(e,{inset:1,highContrastStyle:c,borderColor:"transparent"}),e.fonts.medium,{border:"1px solid "+s,borderRadius:n.roundedCorner2,boxSizing:"border-box",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 16px",textDecoration:"none",textAlign:"center",userSelect:"none",":active > span":{position:"relative",left:0,top:0}}],rootDisabled:[DP(e,{inset:1,highContrastStyle:c,borderColor:"transparent"}),{backgroundColor:a,borderColor:a,color:l,cursor:"default",":hover":Bj,":focus":Bj}],iconDisabled:(t={color:l},t[SP]={color:"GrayText"},t),menuIconDisabled:(r={color:l},r[SP]={color:"GrayText"},r),flexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},description:{display:"block"},textContainer:{flexGrow:1,display:"block"},icon:Mj(o.mediumPlus.fontSize),menuIcon:Mj(o.small.fontSize),label:{margin:"0 4px",lineHeight:"100%",display:"block"},screenReaderText:kP}}),zj=ZN(function(e,t){var r,i,n,o,s,a,l,c,u,d,m,p,h,f,g,v,b,y=e.effects,_=e.palette,x=e.semanticColors,w={left:-2,top:-2,bottom:-2,right:-2,border:"none"},C={position:"absolute",width:1,right:31,top:8,bottom:8};return AD({splitButtonContainer:[DP(e,{highContrastStyle:w,inset:2,pointerEvents:"none"}),{display:"inline-flex",".ms-Button--default":{borderTopRightRadius:"0",borderBottomRightRadius:"0",borderRight:"none",flexGrow:"1"},".ms-Button--primary":(r={borderTopRightRadius:"0",borderBottomRightRadius:"0",border:"none",flexGrow:"1",":hover":{border:"none"},":active":{border:"none"}},r[SP]=iN(iN({color:"WindowText",backgroundColor:"Window",border:"1px solid WindowText",borderRightWidth:"0"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),{":hover":{backgroundColor:"Highlight",border:"1px solid Highlight",borderRightWidth:"0",color:"HighlightText"},":active":{border:"1px solid Highlight"}}),r),".ms-Button--default + .ms-Button":(i={},i[SP]={border:"1px solid WindowText",borderLeftWidth:"0",":hover":{backgroundColor:"HighlightText",borderColor:"Highlight",color:"Highlight",".ms-Button-menuIcon":iN({backgroundColor:"HighlightText",color:"Highlight"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"})}},i),'.ms-Button--default + .ms-Button[aria-expanded="true"]':(n={},n[SP]={backgroundColor:"HighlightText",borderColor:"Highlight",color:"Highlight",".ms-Button-menuIcon":iN({backgroundColor:"HighlightText",color:"Highlight"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"})},n),".ms-Button--primary + .ms-Button":(o={border:"none"},o[SP]={border:"1px solid WindowText",borderLeftWidth:"0",":hover":{borderLeftWidth:"0",backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText",".ms-Button-menuIcon":iN(iN({},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),{color:"HighlightText"})}},o),'.ms-Button--primary + .ms-Button[aria-expanded="true"]':(s={},s[SP]=iN(iN({backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),{".ms-Button-menuIcon":{color:"HighlightText"}}),s),".ms-Button.is-disabled":(a={},a[SP]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},a)}],splitButtonContainerHovered:{".ms-Button--default.is-disabled":(l={backgroundColor:x.buttonBackgroundDisabled,color:x.buttonTextDisabled},l[SP]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},l),".ms-Button--primary.is-disabled":(c={backgroundColor:x.primaryButtonBackgroundDisabled,color:x.primaryButtonTextDisabled},c[SP]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},c)},splitButtonContainerChecked:{".ms-Button--primary":(u={},u[SP]=iN({color:"Window",backgroundColor:"WindowText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),u)},splitButtonContainerCheckedHovered:{".ms-Button--primary":(d={},d[SP]=iN({color:"Window",backgroundColor:"WindowText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),d)},splitButtonContainerFocused:{outline:"none!important"},splitButtonMenuButton:(m={padding:6,height:"auto",boxSizing:"border-box",borderRadius:0,borderTopRightRadius:y.roundedCorner2,borderBottomRightRadius:y.roundedCorner2,border:"1px solid ".concat(_.neutralSecondaryAlt),borderLeft:"none",outline:"transparent",userSelect:"none",display:"inline-block",textDecoration:"none",textAlign:"center",cursor:"pointer",verticalAlign:"top",width:32,marginLeft:-1,marginTop:0,marginRight:0,marginBottom:0},m[SP]={".ms-Button-menuIcon":{color:"WindowText"}},m),splitButtonDivider:iN(iN({},C),(p={},p[SP]={backgroundColor:"WindowText"},p)),splitButtonDividerDisabled:iN(iN({},C),(h={},h[SP]={backgroundColor:"GrayText"},h)),splitButtonMenuButtonDisabled:(f={pointerEvents:"none",border:"none",":hover":{cursor:"default"},".ms-Button--primary":(g={},g[SP]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},g),".ms-Button-menuIcon":(v={},v[SP]={color:"GrayText"},v)},f[SP]={color:"GrayText",border:"1px solid GrayText",backgroundColor:"Window"},f),splitButtonFlexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},splitButtonContainerDisabled:(b={outline:"none",border:"none"},b[SP]=iN({color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),b),splitButtonMenuFocused:iN({},DP(e,{highContrastStyle:w,inset:2}))},t)});function Fj(e){var t,r,i,n,o,s=e.semanticColors,a=e.palette,l=s.buttonBackground,c=s.buttonBackgroundPressed,u=s.buttonBackgroundHovered,d=s.buttonBackgroundDisabled,m=s.buttonText,p=s.buttonTextHovered,h=s.buttonTextDisabled,f=s.buttonTextChecked,g=s.buttonTextCheckedHovered;return{root:{backgroundColor:l,color:m},rootHovered:(t={backgroundColor:u,color:p},t[SP]={borderColor:"Highlight",color:"Highlight"},t),rootPressed:{backgroundColor:c,color:f},rootExpanded:{backgroundColor:c,color:f},rootChecked:{backgroundColor:c,color:f},rootCheckedHovered:{backgroundColor:c,color:g},rootDisabled:(r={color:h,backgroundColor:d},r[SP]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},r),splitButtonContainer:(i={},i[SP]={border:"none"},i),splitButtonMenuButton:{color:a.white,backgroundColor:"transparent",":hover":(n={backgroundColor:a.neutralLight},n[SP]={color:"Highlight"},n)},splitButtonMenuButtonDisabled:{backgroundColor:s.buttonBackgroundDisabled,":hover":{backgroundColor:s.buttonBackgroundDisabled}},splitButtonDivider:iN(iN({},{position:"absolute",width:1,right:31,top:8,bottom:8}),(o={backgroundColor:a.neutralTertiaryAlt},o[SP]={backgroundColor:"WindowText"},o)),splitButtonDividerDisabled:{backgroundColor:e.palette.neutralTertiaryAlt},splitButtonMenuButtonChecked:{backgroundColor:a.neutralQuaternaryAlt,":hover":{backgroundColor:a.neutralQuaternaryAlt}},splitButtonMenuButtonExpanded:{backgroundColor:a.neutralQuaternaryAlt,":hover":{backgroundColor:a.neutralQuaternaryAlt}},splitButtonMenuIcon:{color:s.buttonText},splitButtonMenuIconDisabled:{color:s.buttonTextDisabled}}}function jj(e){var t,r,i,n,o,s,a,l,c,u=e.palette,d=e.semanticColors;return{root:(t={backgroundColor:d.primaryButtonBackground,border:"1px solid ".concat(d.primaryButtonBackground),color:d.primaryButtonText},t[SP]=iN({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),t[".".concat(OP," &:focus, :host(.").concat(OP,") &:focus")]={":after":{border:"none",outlineColor:u.white}},t),rootHovered:(r={backgroundColor:d.primaryButtonBackgroundHovered,border:"1px solid ".concat(d.primaryButtonBackgroundHovered),color:d.primaryButtonTextHovered},r[SP]={color:"Window",backgroundColor:"Highlight",borderColor:"Highlight"},r),rootPressed:(i={backgroundColor:d.primaryButtonBackgroundPressed,border:"1px solid ".concat(d.primaryButtonBackgroundPressed),color:d.primaryButtonTextPressed},i[SP]=iN({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),i),rootExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootChecked:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootCheckedHovered:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootDisabled:(n={color:d.primaryButtonTextDisabled,backgroundColor:d.primaryButtonBackgroundDisabled},n[SP]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},n),splitButtonContainer:(o={},o[SP]={border:"none"},o),splitButtonDivider:iN(iN({},{position:"absolute",width:1,right:31,top:8,bottom:8}),(s={backgroundColor:u.white},s[SP]={backgroundColor:"Window"},s)),splitButtonMenuButton:(a={backgroundColor:d.primaryButtonBackground,color:d.primaryButtonText},a[SP]={backgroundColor:"Canvas"},a[":hover"]=(l={backgroundColor:d.primaryButtonBackgroundHovered},l[SP]={color:"Highlight"},l),a),splitButtonMenuButtonDisabled:{backgroundColor:d.primaryButtonBackgroundDisabled,":hover":{backgroundColor:d.primaryButtonBackgroundDisabled}},splitButtonMenuButtonChecked:{backgroundColor:d.primaryButtonBackgroundPressed,":hover":{backgroundColor:d.primaryButtonBackgroundPressed}},splitButtonMenuButtonExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,":hover":{backgroundColor:d.primaryButtonBackgroundPressed}},splitButtonMenuIcon:{color:d.primaryButtonText},splitButtonMenuIconDisabled:(c={color:u.neutralTertiary},c[SP]={color:"GrayText"},c)}}var Hj,qj,Uj,Gj,Wj,Vj=ZN(function(e,t,r){var i=Lj(e),n=zj(e);return AD(i,{root:{minWidth:"80px",minHeight:"32px"},label:{fontWeight:xP.semibold}},r?jj(e):Fj(e),n,t)}),Kj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.primary,r=void 0!==t&&t,i=e.styles,n=e.theme;return w.createElement(Aj,iN({},this.props,{variantClassName:r?"ms-Button--primary":"ms-Button--default",styles:Vj(n,i,r),onRenderDescription:LM}))},oN([Dj("DefaultButton",["theme","styles"],!0)],t)}(w.Component),$j=ZN(function(e,t){var r,i,n;return AD(Lj(e),{root:(r={padding:"0 4px",height:"40px",color:e.palette.neutralPrimary,backgroundColor:"transparent",border:"1px solid transparent"},r[SP]={borderColor:"Window"},r),rootHovered:(i={color:e.palette.themePrimary},i[SP]={color:"Highlight"},i),iconHovered:{color:e.palette.themePrimary},rootPressed:{color:e.palette.black},rootExpanded:{color:e.palette.themePrimary},iconPressed:{color:e.palette.themeDarker},rootDisabled:(n={color:e.palette.neutralTertiary,backgroundColor:"transparent",borderColor:"transparent"},n[SP]={color:"GrayText"},n),rootChecked:{color:e.palette.black},iconChecked:{color:e.palette.themeDarker},flexContainer:{justifyContent:"flex-start"},icon:{color:e.palette.themeDarkAlt},iconDisabled:{color:"inherit"},menuIcon:{color:e.palette.neutralSecondary},textContainer:{flexGrow:0}},t)}),Yj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,r=e.theme;return w.createElement(Aj,iN({},this.props,{variantClassName:"ms-Button--action ms-Button--command",styles:$j(r,t),onRenderDescription:LM}))},oN([Dj("ActionButton",["theme","styles"],!0)],t)}(w.Component),Jj=ZN(function(e,t,r){var i,n,o,s,a,l=e.fonts,c=e.palette,u=Lj(e),d=zj(e),m={root:{maxWidth:"280px",minHeight:"72px",height:"auto",padding:"16px 12px"},flexContainer:{flexDirection:"row",alignItems:"flex-start",minWidth:"100%",margin:""},textContainer:{textAlign:"left"},icon:{fontSize:"2em",lineHeight:"1em",height:"1em",margin:"0px 8px 0px 0px",flexBasis:"1em",flexShrink:"0"},label:{margin:"0 0 5px",lineHeight:"100%",fontWeight:xP.semibold},description:[l.small,{lineHeight:"100%"}]},p={description:{color:c.neutralSecondary},descriptionHovered:{color:c.neutralDark},descriptionPressed:{color:"inherit"},descriptionChecked:{color:"inherit"},descriptionDisabled:{color:"inherit"}},h={description:(i={color:c.white},i[SP]=iN({backgroundColor:"WindowText",color:"Window"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),i),descriptionHovered:(n={color:c.white},n[SP]={backgroundColor:"Highlight",color:"Window"},n),descriptionPressed:(o={color:"inherit"},o[SP]=iN({color:"Window",backgroundColor:"WindowText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),o),descriptionChecked:(s={color:"inherit"},s[SP]=iN({color:"Window",backgroundColor:"WindowText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),s),descriptionDisabled:(a={color:"inherit"},a[SP]={color:"inherit"},a)};return AD(u,m,r?jj(e):Fj(e),r?h:p,d,t)}),Xj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.primary,r=void 0!==t&&t,i=e.styles,n=e.theme;return w.createElement(Aj,iN({},this.props,{variantClassName:r?"ms-Button--compoundPrimary":"ms-Button--compound",styles:Jj(n,i,r)}))},oN([Dj("CompoundButton",["theme","styles"],!0)],t)}(w.Component),Zj=ZN(function(e,t){var r,i=Lj(e),n=zj(e),o=e.palette;return AD(i,{root:{padding:"0 4px",width:"32px",height:"32px",backgroundColor:"transparent",border:"none",color:e.semanticColors.link},rootHovered:(r={color:o.themeDarkAlt,backgroundColor:o.neutralLighter},r[SP]={borderColor:"Highlight",color:"Highlight"},r),rootHasMenu:{width:"auto"},rootPressed:{color:o.themeDark,backgroundColor:o.neutralLight},rootExpanded:{color:o.themeDark,backgroundColor:o.neutralLight},rootChecked:{color:o.themeDark,backgroundColor:o.neutralLight},rootCheckedHovered:{color:o.themeDark,backgroundColor:o.neutralQuaternaryAlt},rootDisabled:{color:o.neutralTertiaryAlt}},n,t)}),Qj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,r=e.theme;return w.createElement(Aj,iN({},this.props,{variantClassName:"ms-Button--icon",styles:Zj(r,t),onRenderText:LM,onRenderDescription:LM}))},oN([Dj("IconButton",["theme","styles"],!0)],t)}(w.Component),eH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){return w.createElement(Kj,iN({},this.props,{primary:!0,onRenderDescription:LM}))},oN([Dj("PrimaryButton",["theme","styles"],!0)],t)}(w.Component),tH=function(e){function t(t){var r=e.call(this,t)||this;return ED("The Button component has been deprecated. Use specific variants instead. (PrimaryButton, DefaultButton, IconButton, ActionButton, etc.)"),r}return rN(t,e),t.prototype.render=function(){var e=this.props;switch(e.buttonType){case kM.command:return w.createElement(Yj,iN({},e));case kM.compound:return w.createElement(Xj,iN({},e));case kM.icon:return w.createElement(Qj,iN({},e));case kM.primary:return w.createElement(eH,iN({},e));default:return w.createElement(Kj,iN({},e))}},t}(w.Component);!function(e){e[e.disabled=0]="disabled",e[e.clickable=1]="clickable",e[e.hasDropdown=2]="hasDropdown"}(Hj||(Hj={})),function(e){e[e.unconstrained=0]="unconstrained",e[e.horizontalConstrained=1]="horizontalConstrained"}(qj||(qj={})),function(e){e[e.outside=0]="outside",e[e.surface=1]="surface",e[e.header=2]="header"}(Uj||(Uj={})),function(e){e[e.fixedColumns=0]="fixedColumns",e[e.justified=1]="justified"}(Gj||(Gj={})),function(e){e[e.onHover=0]="onHover",e[e.always=1]="always",e[e.hidden=2]="hidden"}(Wj||(Wj={}));var rH,iH=function(e){var t=e.count,r=e.indentWidth,i=void 0===r?36:r,n=e.role,o=void 0===n?"presentation":n,s=t*i;return t>0?w.createElement("span",{className:"ms-GroupSpacer",style:{display:"inline-block",width:s},role:o}):null};!function(e){e[e.hidden=0]="hidden",e[e.visible=1]="visible"}(rH||(rH={}));var nH={label:YD,audio:JD,video:XD,ol:ZD,li:QD,a:eB,button:tB,input:rB,textarea:iB,select:nB,option:oB,table:sB,tr:aB,th:lB,td:cB,colGroup:uB,col:dB,form:mB,iframe:pB,img:hB},oH=LB(),sH=w.forwardRef(function(e,t){var r=e.checked,i=void 0!==r&&r,n=e.className,o=e.theme,s=e.styles,a=e.useFastIcons,l=void 0===a||a,c=oH(s,{theme:o,className:n,checked:i}),u=l?iM:sM;return w.createElement("div",{className:c.root,ref:t},w.createElement(u,{iconName:"CircleRing",className:c.circle}),w.createElement(u,{iconName:"StatusCircleCheckmark",className:c.check}))});sH.displayName="CheckBase";var aH,lH,cH={root:"ms-Check",circle:"ms-Check-circle",check:"ms-Check-check",checkHost:"ms-Check-checkHost"},uH=PB(sH,function(e){var t,r,i,n,o,s=e.height,a=void 0===s?e.checkBoxHeight||"18px":s,l=e.checked,c=e.className,u=e.theme,d=u.palette,m=u.semanticColors,p=u.fonts,h=gR(u),f=EP(cH,u),g={fontSize:a,position:"absolute",left:0,top:0,width:a,height:a,textAlign:"center",display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle"};return{root:[f.root,p.medium,{lineHeight:"1",width:a,height:a,verticalAlign:"top",position:"relative",userSelect:"none",selectors:(t={":before":{content:'""',position:"absolute",top:"1px",right:"1px",bottom:"1px",left:"1px",borderRadius:"50%",opacity:1,background:m.bodyBackground}},t[".".concat(f.checkHost,":hover &, .").concat(f.checkHost,":focus &, &:hover, &:focus")]={opacity:1},t)},l&&["is-checked",{selectors:{":before":{background:d.themePrimary,opacity:1,selectors:(r={},r[SP]={background:"Window"},r)}}}],c],circle:[f.circle,g,{color:d.neutralSecondary,selectors:(i={},i[SP]={color:"WindowText"},i)},l&&{color:d.white}],check:[f.check,g,{opacity:0,color:d.neutralSecondary,fontSize:wP.medium,left:h?"-0.5px":".5px",top:"-1px",selectors:(n={":hover":{opacity:1}},n[SP]=iN({},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),n)},l&&{opacity:1,color:d.white,fontWeight:900,selectors:(o={},o[SP]={border:"none",color:"WindowText"},o)}],checkHost:f.checkHost}},void 0,{scope:"Check"},!0),dH={root:"ms-Link"},mH={root:"ms-DetailsRow",compact:"ms-DetailsList--Compact",cell:"ms-DetailsRow-cell",cellAnimation:"ms-DetailsRow-cellAnimation",cellCheck:"ms-DetailsRow-cellCheck",check:"ms-DetailsRow-check",cellMeasurer:"ms-DetailsRow-cellMeasurer",listCellFirstChild:"ms-List-cell:first-child",isContentUnselectable:"is-contentUnselectable",isSelected:"is-selected",isCheckVisible:"is-check-visible",isRowHeader:"is-row-header",fields:"ms-DetailsRow-fields"},pH={cellLeftPadding:12,cellRightPadding:8,cellExtraRightPadding:24},hH={rowHeight:42,compactRowHeight:32},fH=iN(iN({},hH),{rowVerticalPadding:11,compactRowVerticalPadding:6}),gH={tooltipHost:"ms-TooltipHost",root:"ms-DetailsHeader",cell:"ms-DetailsHeader-cell",cellIsCheck:"ms-DetailsHeader-cellIsCheck",collapseButton:"ms-DetailsHeader-collapseButton",isCollapsed:"is-collapsed",isAllSelected:"is-allSelected",isSelectAllHidden:"is-selectAllHidden",isResizingColumn:"is-resizingColumn",cellSizer:"ms-DetailsHeader-cellSizer",isResizing:"is-resizing",dropHintCircleStyle:"ms-DetailsHeader-dropHintCircleStyle",dropHintCaretStyle:"ms-DetailsHeader-dropHintCaretStyle",dropHintLineStyle:"ms-DetailsHeader-dropHintLineStyle",cellTitle:"ms-DetailsHeader-cellTitle",cellName:"ms-DetailsHeader-cellName",filterChevron:"ms-DetailsHeader-filterChevron",gripperBarVertical:"ms-DetailsColumn-gripperBarVertical",checkTooltip:"ms-DetailsHeader-checkTooltip",check:"ms-DetailsHeader-check"},vH=function(e){var t=e.theme,r=e.cellStyleProps,i=void 0===r?pH:r,n=t.semanticColors;return[EP(gH,t).cell,DP(t),{color:n.bodyText,position:"relative",display:"inline-block",boxSizing:"border-box",padding:"0 ".concat(i.cellRightPadding,"px 0 ").concat(i.cellLeftPadding,"px"),lineHeight:"inherit",margin:"0",height:42,verticalAlign:"top",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left"}]},bH={root:"ms-DetailsRow-check",isDisabled:"ms-DetailsRow-check--isDisabled",isHeader:"ms-DetailsRow-check--isHeader"},yH="change";!function(e){e[e.none=0]="none",e[e.single=1]="single",e[e.multiple=2]="multiple"}(aH||(aH={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(lH||(lH={}));var _H=LB(),xH=w.memo(function(e){return w.createElement(uH,{theme:e.theme,checked:e.checked,className:e.className,useFastIcons:!0})});function wH(e){return w.createElement(uH,{checked:e.checked})}function CH(e){return w.createElement(xH,{theme:e.theme,checked:e.checked})}var kH,TH=PB(function(e){var t=e.isVisible,r=void 0!==t&&t,i=e.canSelect,n=void 0!==i&&i,o=e.anySelected,s=void 0!==o&&o,a=e.selected,l=void 0!==a&&a,c=e.selectionMode,u=e.isHeader,d=void 0!==u&&u,m=e.className,p=(e.checkClassName,e.styles),h=e.theme,f=e.compact,g=e.onRenderDetailsCheckbox,v=e.useFastIcons,b=void 0===v||v,y=nN(e,["isVisible","canSelect","anySelected","selected","selectionMode","isHeader","className","checkClassName","styles","theme","compact","onRenderDetailsCheckbox","useFastIcons"]),_=b?CH:wH,x=g?tL(g,_):_,C=_H(p,{theme:h,canSelect:n,selected:l,anySelected:s,className:m,isHeader:d,isVisible:r,compact:f}),k={checked:l,theme:h},T=function(e,t){return gB(t,nH.div||$D,["aria-label","aria-labelledby","aria-describedby"])}(0,y),E=c===aH.single?"radio":"checkbox";return n?w.createElement("div",iN({},y,{role:E,className:vB(C.root,C.check),"aria-checked":l,"data-selection-toggle":!0,"data-automationid":"DetailsRowCheck",tabIndex:-1}),x(k)):w.createElement("div",iN({},T,{className:vB(C.root,C.check)}))},function(e){var t=e.theme,r=e.className,i=e.isHeader,n=e.selected,o=e.anySelected,s=e.canSelect,a=e.compact,l=e.isVisible,c=EP(bH,t),u=i?42:a?hH.compactRowHeight:hH.rowHeight,d=l||n||o;return{root:[c.root,r],check:[!s&&c.isDisabled,i&&c.isHeader,DP(t),t.fonts.small,cH.checkHost,{display:"flex",alignItems:"center",justifyContent:"center",cursor:"default",boxSizing:"border-box",verticalAlign:"top",background:"none",backgroundColor:"transparent",border:"none",opacity:d?1:0,height:u,width:48,padding:0,margin:0}],isDisabled:[]}},void 0,{scope:"DetailsRowCheck"},!0),EH=function(){function e(e){this._selection=e.selection,this._dragEnterCounts={},this._activeTargets={},this._lastId=0,this._initialized=!1}return e.prototype.dispose=function(){this._events&&this._events.dispose()},e.prototype.subscribe=function(e,t,r){var i=this;if(!this._initialized){this._events=new BM(this);var n=uR();n&&(this._events.on(n.body,"mouseup",this._onMouseUp.bind(this),!0),this._events.on(n,"mouseup",this._onDocumentMouseUp.bind(this),!0)),this._initialized=!0}var o,s,a,l,c,u,d,m,p,h,f=r.key,g=void 0===f?"".concat(++this._lastId):f,v=[];if(r&&e){var b=r.eventMap,y=r.context,_=r.updateDropState,x={root:e,options:r,key:g};if(m=this._isDraggable(x),p=this._isDroppable(x),(m||p)&&b)for(var w=0,C=b;w<C.length;w++){var k=C[w],T={callback:k.callback.bind(null,y),eventName:k.eventName};v.push(T),this._events.on(e,T.eventName,T.callback)}p&&(s=function(e){e.isHandled||(e.isHandled=!0,i._dragEnterCounts[g]--,0===i._dragEnterCounts[g]&&_(!1,e))},a=function(e){e.preventDefault(),e.isHandled||(e.isHandled=!0,i._dragEnterCounts[g]++,1===i._dragEnterCounts[g]&&_(!0,e))},l=function(e){i._dragEnterCounts[g]=0,_(!1,e)},c=function(e){i._dragEnterCounts[g]=0,_(!1,e),r.onDrop&&r.onDrop(r.context.data,e)},u=function(e){e.preventDefault(),r.onDragOver&&r.onDragOver(r.context.data,e)},this._dragEnterCounts[g]=0,t.on(e,"dragenter",a),t.on(e,"dragleave",s),t.on(e,"dragend",l),t.on(e,"drop",c),t.on(e,"dragover",u)),m&&(d=this._onMouseDown.bind(this,x),l=this._onDragEnd.bind(this,x),o=function(t){var n=r;n&&n.onDragStart&&n.onDragStart(n.context.data,n.context.index,i._selection.getSelection(),t),i._isDragging=!0,t.dataTransfer&&t.dataTransfer.setData("id",e.id)},t.on(e,"dragstart",o),t.on(e,"mousedown",d),t.on(e,"dragend",l)),h={target:x,dispose:function(){if(i._activeTargets[g]===h&&delete i._activeTargets[g],e){for(var r=0,n=v;r<n.length;r++){var f=n[r];i._events.off(e,f.eventName,f.callback)}p&&(t.off(e,"dragenter",a),t.off(e,"dragleave",s),t.off(e,"dragend",l),t.off(e,"dragover",u),t.off(e,"drop",c)),m&&(t.off(e,"dragstart",o),t.off(e,"mousedown",d),t.off(e,"dragend",l))}}},this._activeTargets[g]=h}return{key:g,dispose:function(){h&&h.dispose()}}},e.prototype.unsubscribe=function(e,t){var r=this._activeTargets[t];r&&r.dispose()},e.prototype._onDragEnd=function(e,t){var r=e.options;r.onDragEnd&&r.onDragEnd(r.context.data,t)},e.prototype._onMouseUp=function(e){if(this._isDragging=!1,this._dragData){for(var t=0,r=Object.keys(this._activeTargets);t<r.length;t++){var i=r[t],n=this._activeTargets[i];n.target.root&&(this._events.off(n.target.root,"mousemove"),this._events.off(n.target.root,"mouseleave"))}this._dragData.dropTarget&&(BM.raise(this._dragData.dropTarget.root,"dragleave"),BM.raise(this._dragData.dropTarget.root,"drop"))}this._dragData=null},e.prototype._onDocumentMouseUp=function(e){var t=uR();t&&e.target===t.documentElement&&this._onMouseUp(e)},e.prototype._onMouseMove=function(e,t){var r=t.buttons,i=void 0===r?1:r;if(this._dragData&&1!==i)this._onMouseUp(t);else{var n=e.root,o=e.key;this._isDragging&&this._isDroppable(e)&&this._dragData&&this._dragData.dropTarget&&this._dragData.dropTarget.key!==o&&!this._isChild(n,this._dragData.dropTarget.root)&&this._dragEnterCounts[this._dragData.dropTarget.key]>0&&(BM.raise(this._dragData.dropTarget.root,"dragleave"),BM.raise(n,"dragenter"),this._dragData.dropTarget=e)}},e.prototype._onMouseLeave=function(e,t){this._isDragging&&this._dragData&&this._dragData.dropTarget&&this._dragData.dropTarget.key===e.key&&(BM.raise(e.root,"dragleave"),this._dragData.dropTarget=void 0)},e.prototype._onMouseDown=function(e,t){if(0===t.button)if(this._isDraggable(e)){this._dragData={clientX:t.clientX,clientY:t.clientY,eventTarget:t.target,dragTarget:e};for(var r=0,i=Object.keys(this._activeTargets);r<i.length;r++){var n=i[r],o=this._activeTargets[n];o.target.root&&(this._events.on(o.target.root,"mousemove",this._onMouseMove.bind(this,o.target)),this._events.on(o.target.root,"mouseleave",this._onMouseLeave.bind(this,o.target)))}}else this._dragData=null},e.prototype._isChild=function(e,t){for(;t&&t.parentElement;){if(t.parentElement===e)return!0;t=t.parentElement}return!1},e.prototype._isDraggable=function(e){var t=e.options;return!(!t.canDrag||!t.canDrag(t.context.data))},e.prototype._isDroppable=function(e){var t=e.options,r=this._dragData&&this._dragData.dragTarget?this._dragData.dragTarget.options.context:void 0;return!(!t.canDrop||!t.canDrop(t.context,r))},e}(),SH=LB(),IH=function(e){return function(t){return t?t.column.isIconOnly?w.createElement("span",{className:e.accessibleLabel},t.column.name):w.createElement(w.Fragment,null,t.column.name):null}},AH=function(e){function t(t){var r=e.call(this,t)||this;return r._root=w.createRef(),r._tooltipRef=w.createRef(),r._onRenderFilterIcon=function(e){return function(e){var t=e.columnProps,r=nN(e,["columnProps"]),i=(null==t?void 0:t.useFastIcons)?iM:sM;return w.createElement(i,iN({},r))}},r._onRenderColumnHeaderTooltip=function(e){return w.createElement("span",{className:e.hostClassName},e.children)},r._onColumnClick=function(e){var t=r.props,i=t.onColumnClick,n=t.column;n.columnActionsMode!==Hj.disabled&&(n.onColumnClick&&n.onColumnClick(e,n),i&&i(e,n))},r._onColumnKeyDown=function(e){var t=r.props,i=t.onColumnKeyDown,n=t.column;n.onColumnKeyDown&&n.onColumnKeyDown(e,n),i&&i(e,n)},r._onColumnBlur=function(){r._tooltipRef.current&&r._tooltipRef.current.dismiss()},r._onColumnFocus=function(){r._tooltipRef.current&&r._tooltipRef.current.show()},r._onDragStart=function(e,t,i,n){var o=r._classNames;t&&(r._updateHeaderDragInfo(t),r._root.current.classList.add(o.borderWhileDragging),r._async.setTimeout(function(){r._root.current&&r._root.current.classList.add(o.noBorderWhileDragging)},20))},r._onDragEnd=function(e,t){var i=r._classNames;t&&r._updateHeaderDragInfo(-1,t),r._root.current.classList.remove(i.borderWhileDragging),r._root.current.classList.remove(i.noBorderWhileDragging)},r._updateHeaderDragInfo=function(e,t){r.props.setDraggedItemIndex&&r.props.setDraggedItemIndex(e),r.props.updateDragInfo&&r.props.updateDragInfo({itemIndex:e},t)},r._onColumnContextMenu=function(e){var t=r.props,i=t.onColumnContextMenu,n=t.column;n.onColumnContextMenu&&(n.onColumnContextMenu(n,e),e.preventDefault()),i&&(i(n,e),e.preventDefault())},r._onRootMouseDown=function(e){r.props.isDraggable&&0===e.button&&e.stopPropagation()},lM(r),r._async=new hM(r),r._events=new BM(r),r}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.column,r=e.parentId,i=e.isDraggable,n=e.styles,o=e.theme,s=e.cellStyleProps,a=void 0===s?pH:s,l=e.useFastIcons,c=void 0===l||l,u=this.props.onRenderColumnHeaderTooltip,d=void 0===u?this._onRenderColumnHeaderTooltip:u;this._classNames=SH(n,{theme:o,headerClassName:t.headerClassName,iconClassName:t.iconClassName,isActionable:t.columnActionsMode!==Hj.disabled,isEmpty:!t.name,isIconVisible:t.isSorted||t.isGrouped||t.isFiltered,isPadded:t.isPadded,isIconOnly:t.isIconOnly,cellStyleProps:a,transitionDurationDrag:200,transitionDurationDrop:1500});var m=this._classNames,p=c?iM:sM,h=t.onRenderFilterIcon?tL(t.onRenderFilterIcon,this._onRenderFilterIcon(this._classNames)):this._onRenderFilterIcon(this._classNames),f=t.onRenderHeader?tL(t.onRenderHeader,IH(this._classNames)):IH(this._classNames),g=t.columnActionsMode!==Hj.disabled&&(void 0!==t.onColumnClick||void 0!==this.props.onColumnClick),v=this.props.onRenderColumnHeaderTooltip?!t.ariaLabel:this._hasAccessibleDescription(),b={"aria-label":t.ariaLabel?t.ariaLabel:t.isIconOnly?t.name:void 0,"aria-labelledby":t.ariaLabel||t.isIconOnly?void 0:"".concat(r,"-").concat(t.key,"-name"),"aria-describedby":v?"".concat(r,"-").concat(t.key,"-tooltip"):void 0};return w.createElement(w.Fragment,null,w.createElement("div",iN({key:t.key,ref:this._root,role:"columnheader"},!g&&b,{"aria-sort":t.isSorted?t.isSortedDescending?"descending":"ascending":"none","data-is-focusable":g||t.columnActionsMode===Hj.disabled?void 0:"true",className:m.root,"data-is-draggable":i,draggable:i,style:{width:(t.calculatedWidth||0)+a.cellLeftPadding+a.cellRightPadding+(t.isPadded?a.cellExtraRightPadding:0)},"data-automationid":"ColumnsHeaderColumn","data-item-key":t.key,onBlur:this._onColumnBlur,onFocus:this._onColumnFocus}),i&&w.createElement(p,{iconName:"GripperBarVertical",className:m.gripperBarVerticalStyle}),d({hostClassName:m.cellTooltip,id:"".concat(r,"-").concat(t.key,"-tooltip"),setAriaDescribedBy:!1,column:t,componentRef:this._tooltipRef,content:t.columnActionsMode!==Hj.disabled?t.ariaLabel:"",children:w.createElement("span",iN({id:"".concat(r,"-").concat(t.key),className:m.cellTitle,"data-is-focusable":g&&t.columnActionsMode!==Hj.disabled?"true":void 0,role:g?"button":void 0},g&&b,{onContextMenu:this._onColumnContextMenu,onClick:this._onColumnClick,onKeyDown:this._onColumnKeyDown,"aria-haspopup":t.columnActionsMode===Hj.hasDropdown?"menu":void 0,"aria-expanded":t.columnActionsMode===Hj.hasDropdown?!!t.isMenuOpen:void 0}),w.createElement("span",{id:"".concat(r,"-").concat(t.key,"-name"),className:m.cellName},(t.iconName||t.iconClassName)&&w.createElement(p,{className:m.iconClassName,iconName:t.iconName}),f(this.props)),t.isFiltered&&w.createElement(p,{className:m.nearIcon,iconName:"Filter"}),(t.isSorted||t.showSortIconWhenUnsorted)&&w.createElement(p,{className:m.sortIcon,iconName:t.isSorted?t.isSortedDescending?"SortDown":"SortUp":"Sort"}),t.isGrouped&&w.createElement(p,{className:m.nearIcon,iconName:"GroupedDescending"}),t.columnActionsMode===Hj.hasDropdown&&!t.isIconOnly&&h({"aria-hidden":!0,columnProps:this.props,className:m.filterChevron,iconName:"ChevronDown"}))},this._onRenderColumnHeaderTooltip)),this.props.onRenderColumnHeaderTooltip?null:this._renderAccessibleDescription())},t.prototype.componentDidMount=function(){var e=this;this.props.dragDropHelper&&this.props.isDraggable&&this._addDragDropHandling();var t=this._classNames;this.props.isDropped&&(this._root.current&&(this._root.current.classList.add(t.borderAfterDropping),this._async.setTimeout(function(){e._root.current&&e._root.current.classList.add(t.noBorderAfterDropping)},20)),this._async.setTimeout(function(){e._root.current&&(e._root.current.classList.remove(t.borderAfterDropping),e._root.current.classList.remove(t.noBorderAfterDropping))},1520))},t.prototype.componentWillUnmount=function(){this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this._async.dispose(),this._events.dispose()},t.prototype.componentDidUpdate=function(){!this._dragDropSubscription&&this.props.dragDropHelper&&this.props.isDraggable&&this._addDragDropHandling(),this._dragDropSubscription&&!this.props.isDraggable&&(this._dragDropSubscription.dispose(),this._events.off(this._root.current,"mousedown"),delete this._dragDropSubscription)},t.prototype._getColumnDragDropOptions=function(){var e=this,t=this.props.columnIndex;return{selectionIndex:t,context:{data:t,index:t},canDrag:function(){return e.props.isDraggable},canDrop:function(){return!1},onDragStart:this._onDragStart,updateDropState:function(){},onDrop:function(){},onDragEnd:this._onDragEnd}},t.prototype._hasAccessibleDescription=function(){var e=this.props.column;return!!(e.filterAriaLabel||e.sortAscendingAriaLabel||e.sortDescendingAriaLabel||e.groupAriaLabel||e.sortableAriaLabel)},t.prototype._renderAccessibleDescription=function(){var e=this.props,t=e.column,r=e.parentId,i=this._classNames;return this._hasAccessibleDescription()&&!this.props.onRenderColumnHeaderTooltip?w.createElement("label",{key:"".concat(t.key,"_label"),id:"".concat(r,"-").concat(t.key,"-tooltip"),className:i.accessibleLabel,hidden:!0},t.isFiltered&&t.filterAriaLabel||null,(t.isSorted||t.showSortIconWhenUnsorted)&&(t.isSorted?t.isSortedDescending?t.sortDescendingAriaLabel:t.sortAscendingAriaLabel:t.sortableAriaLabel)||null,t.isGrouped&&t.groupAriaLabel||null):null},t.prototype._addDragDropHandling=function(){this._dragDropSubscription=this.props.dragDropHelper.subscribe(this._root.current,this._events,this._getColumnDragDropOptions()),this._events.on(this._root.current,"mousedown",this._onRootMouseDown)},t}(w.Component),OH={isActionable:"is-actionable",cellIsCheck:"ms-DetailsHeader-cellIsCheck",collapseButton:"ms-DetailsHeader-collapseButton",isCollapsed:"is-collapsed",isAllSelected:"is-allSelected",isSelectAllHidden:"is-selectAllHidden",isResizingColumn:"is-resizingColumn",isEmpty:"is-empty",isIconVisible:"is-icon-visible",cellSizer:"ms-DetailsHeader-cellSizer",isResizing:"is-resizing",dropHintCircleStyle:"ms-DetailsHeader-dropHintCircleStyle",dropHintLineStyle:"ms-DetailsHeader-dropHintLineStyle",cellTitle:"ms-DetailsHeader-cellTitle",cellName:"ms-DetailsHeader-cellName",filterChevron:"ms-DetailsHeader-filterChevron",gripperBarVerticalStyle:"ms-DetailsColumn-gripperBar",nearIcon:"ms-DetailsColumn-nearIcon"},NH=PB(AH,function(e){var t,r=e.theme,i=e.headerClassName,n=e.iconClassName,o=e.isActionable,s=e.isEmpty,a=e.isIconVisible,l=e.isPadded,c=e.isIconOnly,u=e.cellStyleProps,d=void 0===u?pH:u,m=e.transitionDurationDrag,p=e.transitionDurationDrop,h=r.semanticColors,f=r.palette,g=r.fonts,v=EP(OH,r),b={iconForegroundColor:h.bodySubtext,headerForegroundColor:h.bodyText,headerBackgroundColor:h.bodyBackground,dropdownChevronForegroundColor:f.neutralSecondary,resizerColor:f.neutralTertiaryAlt},y={color:b.iconForegroundColor,opacity:1,paddingLeft:8},_={outline:"1px solid ".concat(f.themePrimary)},x={outlineColor:"transparent"};return{root:[vH(e),g.small,o&&[v.isActionable,{selectors:{":hover":{color:h.bodyText,background:h.listHeaderBackgroundHovered},":active":{background:h.listHeaderBackgroundPressed}}}],s&&[v.isEmpty,{textOverflow:"clip"}],a&&v.isIconVisible,l&&{paddingRight:d.cellExtraRightPadding+d.cellRightPadding},{selectors:{':hover i[data-icon-name="GripperBarVertical"]':{display:"block"}}},i],gripperBarVerticalStyle:{display:"none",position:"absolute",textAlign:"left",color:f.neutralTertiary,left:1},nearIcon:[v.nearIcon,y],sortIcon:[y,{paddingLeft:4,position:"relative",top:1}],iconClassName:[{color:b.iconForegroundColor,opacity:1},n],filterChevron:[v.filterChevron,{color:b.dropdownChevronForegroundColor,paddingLeft:6,verticalAlign:"middle",fontSize:g.small.fontSize}],cellTitle:[v.cellTitle,DP(r),iN({display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",boxSizing:"border-box",overflow:"hidden",padding:"0 ".concat(d.cellRightPadding,"px 0 ").concat(d.cellLeftPadding,"px")},c?{alignContent:"flex-end",maxHeight:"100%",flexWrap:"wrap-reverse"}:{})],cellName:[v.cellName,{flex:"0 1 auto",overflow:"hidden",textOverflow:"ellipsis",fontWeight:xP.semibold,fontSize:g.medium.fontSize},c&&{selectors:(t={},t[".".concat(v.nearIcon)]={paddingLeft:0},t)}],cellTooltip:{display:"block",position:"absolute",top:0,left:0,bottom:0,right:0},accessibleLabel:kP,borderWhileDragging:_,noBorderWhileDragging:[x,{transition:"outline ".concat(m,"ms ease")}],borderAfterDropping:_,noBorderAfterDropping:[x,{transition:"outline  ".concat(p,"ms ease")}]}},void 0,{scope:"DetailsColumn"});!function(e){e[e.none=0]="none",e[e.hidden=1]="hidden",e[e.visible=2]="visible"}(kH||(kH={}));var RH=LB(),PH=[],DH=function(e){function t(t){var r=e.call(this,t)||this;return r._rootElement=w.createRef(),r._rootComponent=w.createRef(),r._draggedColumnIndex=-1,r._dropHintDetails={},r._updateDroppingState=function(e,t){r._draggedColumnIndex>=0&&"drop"!==t.type&&!e&&r._resetDropHints()},r._onDragOver=function(e,t){r._draggedColumnIndex>=0&&(t.stopPropagation(),r._computeDropHintToBeShown(t.clientX))},r._onDrop=function(e,t){var i=r._getColumnReorderProps();if(r._draggedColumnIndex>=0&&t){var n=r._draggedColumnIndex>r._currentDropHintIndex?r._currentDropHintIndex:r._currentDropHintIndex-1,o=r._isValidCurrentDropHintIndex();if(t.stopPropagation(),o)if(r._onDropIndexInfo.sourceIndex=r._draggedColumnIndex,r._onDropIndexInfo.targetIndex=n,i.onColumnDrop){var s={draggedIndex:r._draggedColumnIndex,targetIndex:n};i.onColumnDrop(s)}else i.handleColumnReorder&&i.handleColumnReorder(r._draggedColumnIndex,n)}r._resetDropHints(),r._dropHintDetails={},r._draggedColumnIndex=-1},r._computeColumnIndexOffset=function(e){var t=1;return e&&(t+=1),r.props.groupNestingDepth&&r.props.groupNestingDepth>0&&(t+=1),t},r._updateDragInfo=function(e,t){var i=r._getColumnReorderProps(),n=e.itemIndex;if(n>=0)r._draggedColumnIndex=n-r._computeColumnIndexOffset(!r._isCheckboxColumnHidden()),r._getDropHintPositions(),i.onColumnDragStart&&i.onColumnDragStart(!0);else if(t&&r._draggedColumnIndex>=0&&(r._resetDropHints(),r._draggedColumnIndex=-1,r._dropHintDetails={},i.onColumnDragEnd)){var o=r._isEventOnHeader(t);i.onColumnDragEnd({dropLocation:o},t)}},r._getDropHintPositions=function(){for(var e,t=r.props.columns,i=void 0===t?PH:t,n=r._getColumnReorderProps(),o=0,s=0,a=n.frozenColumnCountFromStart||0,l=n.frozenColumnCountFromEnd||0,c=a;c<i.length-l+1;c++)if(r._rootElement.current){var u=r._rootElement.current.querySelectorAll("#columnDropHint_"+c)[0];if(u)if(c===a)o=u.offsetLeft,s=u.offsetLeft,e=u;else{var d=(u.offsetLeft+o)/2;r._dropHintDetails[c-1]={originX:o,startX:s,endX:d,dropHintElementRef:e},s=d,e=u,o=u.offsetLeft,c===i.length-l&&(r._dropHintDetails[c]={originX:o,startX:s,endX:u.offsetLeft,dropHintElementRef:e})}}},r._computeDropHintToBeShown=function(e){var t=gR(r.props.theme);if(r._rootElement.current){var i=e-r._rootElement.current.getBoundingClientRect().left,n=r._currentDropHintIndex;if(r._isValidCurrentDropHintIndex()&&BH(t,i,r._dropHintDetails[n].startX,r._dropHintDetails[n].endX))return;var o=r.props.columns,s=void 0===o?PH:o,a=r._getColumnReorderProps(),l=a.frozenColumnCountFromStart||0,c=a.frozenColumnCountFromEnd||0,u=l,d=s.length-c,m=-1;if(MH(t,i,r._dropHintDetails[u].endX)?m=u:LH(t,i,r._dropHintDetails[d].startX)?m=d:r._isValidCurrentDropHintIndex()&&(r._dropHintDetails[n+1]&&BH(t,i,r._dropHintDetails[n+1].startX,r._dropHintDetails[n+1].endX)?m=n+1:r._dropHintDetails[n-1]&&BH(t,i,r._dropHintDetails[n-1].startX,r._dropHintDetails[n-1].endX)&&(m=n-1)),-1===m)for(var p=l,h=d;p<h;){var f=Math.ceil((h+p)/2);if(BH(t,i,r._dropHintDetails[f].startX,r._dropHintDetails[f].endX)){m=f;break}MH(t,i,r._dropHintDetails[f].originX)?h=f:LH(t,i,r._dropHintDetails[f].originX)&&(p=f)}m===r._draggedColumnIndex||m===r._draggedColumnIndex+1?r._isValidCurrentDropHintIndex()&&r._resetDropHints():n!==m&&m>=0&&(r._resetDropHints(),r._updateDropHintElement(r._dropHintDetails[m].dropHintElementRef,"inline-block"),r._currentDropHintIndex=m)}},r._renderColumnSizer=function(e){var t,i=e.columnIndex,n=r.props.columns,o=void 0===n?PH:n,s=o[i],a=r.state.columnResizeDetails,l=r._classNames;return s.isResizable?w.createElement("div",{key:"".concat(s.key,"_sizer"),"aria-hidden":!0,role:"button","data-is-focusable":!1,onClick:zH,"data-sizer-index":i,onBlur:r._onSizerBlur,className:vB(l.cellSizer,i<o.length-1?l.cellSizerStart:l.cellSizerEnd,(t={},t[l.cellIsResizing]=a&&a.columnIndex===i,t)),onDoubleClick:r._onSizerDoubleClick.bind(r,i)}):null},r._onRenderColumnHeaderTooltip=function(e){return w.createElement("span",{className:e.hostClassName},e.children)},r._onSelectAllClicked=function(){var e=r.props.selection;e&&e.toggleAllSelected()},r._onRootMouseDown=function(e){var t=e.target.getAttribute("data-sizer-index"),i=Number(t),n=r.props.columns,o=void 0===n?PH:n;null!==t&&0===e.button&&(r.setState({columnResizeDetails:{columnIndex:i,columnMinWidth:o[i].calculatedWidth,originX:e.clientX}}),e.preventDefault(),e.stopPropagation())},r._onRootMouseMove=function(e){var t=r.state,i=t.columnResizeDetails,n=t.isSizing;i&&!n&&e.clientX!==i.originX&&r.setState({isSizing:!0})},r._onRootKeyDown=function(e){var t=r.state,i=t.columnResizeDetails,n=t.isSizing,o=r.props,s=o.columns,a=void 0===s?PH:s,l=o.onColumnResized,c=e.target.getAttribute("data-sizer-index");if(c&&!n){var u=Number(c);if(i){var d=void 0;e.which===rR?(r.setState({columnResizeDetails:void 0}),e.preventDefault(),e.stopPropagation()):e.which===oR?d=gR(r.props.theme)?1:-1:e.which===aR&&(d=gR(r.props.theme)?-1:1),d&&(e.shiftKey||(d*=10),r.setState({columnResizeDetails:iN(iN({},i),{columnMinWidth:i.columnMinWidth+d})}),l&&l(a[u],i.columnMinWidth+d,u),e.preventDefault(),e.stopPropagation())}else e.which===rR&&(r.setState({columnResizeDetails:{columnIndex:u,columnMinWidth:a[u].calculatedWidth}}),e.preventDefault(),e.stopPropagation())}},r._onSizerMouseMove=function(e){var t=e.buttons,i=r.props,n=i.onColumnIsSizingChanged,o=i.onColumnResized,s=i.columns,a=void 0===s?PH:s,l=r.state.columnResizeDetails;if(void 0===t||1===t){if(e.clientX!==l.originX&&n&&n(a[l.columnIndex],!0),o){var c=e.clientX-l.originX;gR(r.props.theme)&&(c=-c),o(a[l.columnIndex],l.columnMinWidth+c,l.columnIndex)}}else r._onSizerMouseUp(e)},r._onSizerBlur=function(e){r.state.columnResizeDetails&&r.setState({columnResizeDetails:void 0,isSizing:!1})},r._onSizerMouseUp=function(e){var t=r.props,i=t.columns,n=void 0===i?PH:i,o=t.onColumnIsSizingChanged,s=r.state.columnResizeDetails;r.setState({columnResizeDetails:void 0,isSizing:!1}),o&&o(n[s.columnIndex],!1)},r._onToggleCollapseAll=function(){var e=r.props.onToggleCollapseAll,t=!r.state.isAllCollapsed;r.setState({isAllCollapsed:t}),e&&e(t)},lM(r),r._events=new BM(r),r.state={columnResizeDetails:void 0,isAllCollapsed:r.props.isAllCollapsed,isAllSelected:!!r.props.selection&&r.props.selection.isAllSelected()},r._onDropIndexInfo={sourceIndex:-1,targetIndex:-1},r._id=qD("header"),r._currentDropHintIndex=-1,r._dragDropHelper=new EH({selection:{getSelection:function(){}},minimumPixelsForDrag:r.props.minimumPixelsForDrag}),r}return rN(t,e),t.prototype.componentDidMount=function(){var e=this.props.selection;this._events.on(e,yH,this._onSelectionChanged),this._rootElement.current&&(this._events.on(this._rootElement.current,"mousedown",this._onRootMouseDown),this._events.on(this._rootElement.current,"keydown",this._onRootKeyDown),this._getColumnReorderProps()&&(this._subscriptionObject=this._dragDropHelper.subscribe(this._rootElement.current,this._events,this._getHeaderDragDropOptions())))},t.prototype.componentDidUpdate=function(e){if(this._getColumnReorderProps()?!this._subscriptionObject&&this._rootElement.current&&(this._subscriptionObject=this._dragDropHelper.subscribe(this._rootElement.current,this._events,this._getHeaderDragDropOptions())):this._subscriptionObject&&(this._subscriptionObject.dispose(),delete this._subscriptionObject),this.props!==e&&this._onDropIndexInfo.sourceIndex>=0&&this._onDropIndexInfo.targetIndex>=0){var t=e.columns,r=void 0===t?PH:t,i=this.props.columns,n=void 0===i?PH:i;r[this._onDropIndexInfo.sourceIndex].key===n[this._onDropIndexInfo.targetIndex].key&&(this._onDropIndexInfo={sourceIndex:-1,targetIndex:-1})}this.props.isAllCollapsed!==e.isAllCollapsed&&this.setState({isAllCollapsed:this.props.isAllCollapsed})},t.prototype.componentWillUnmount=function(){this._subscriptionObject&&(this._subscriptionObject.dispose(),delete this._subscriptionObject),this._dragDropHelper.dispose(),this._events.dispose()},t.prototype.render=function(){var e=this,t=this.props,r=t.columns,i=void 0===r?PH:r,n=t.ariaLabel,o=t.ariaLabelForToggleAllGroupsButton,s=t.ariaLabelForSelectAllCheckbox,a=t.selectAllVisibility,l=t.ariaLabelForSelectionColumn,c=t.indentWidth,u=t.onColumnClick,d=t.onColumnContextMenu,m=t.onRenderColumnHeaderTooltip,p=void 0===m?this._onRenderColumnHeaderTooltip:m,h=t.styles,f=t.selectionMode,g=t.theme,v=t.onRenderDetailsCheckbox,b=t.groupNestingDepth,y=t.useFastIcons,_=t.checkboxVisibility,x=t.className,C=this.state,k=C.isAllSelected,T=C.columnResizeDetails,E=C.isSizing,S=C.isAllCollapsed,I=a!==kH.none,A=a===kH.hidden,O=_===Wj.always,N=this._getColumnReorderProps(),R=N&&N.frozenColumnCountFromStart?N.frozenColumnCountFromStart:0,P=N&&N.frozenColumnCountFromEnd?N.frozenColumnCountFromEnd:0;this._classNames=RH(h,{theme:g,isAllSelected:k,isSelectAllHidden:a===kH.hidden,isResizingColumn:!!T&&E,isSizing:E,isAllCollapsed:S,isCheckboxHidden:A,className:x});var D=this._classNames,B=y?iM:sM,M=b>0,L=M&&this.props.collapseAllVisibility===rH.visible,z=this._computeColumnIndexOffset(I),F=gR(g);return w.createElement(BL,{role:"row","aria-label":n,className:D.root,componentRef:this._rootComponent,elementRef:this._rootElement,onMouseMove:this._onRootMouseMove,"data-automationid":"DetailsHeader",direction:rL.horizontal},I?[w.createElement("div",{key:"__checkbox",className:D.cellIsCheck,"aria-labelledby":"".concat(this._id,"-checkTooltip"),onClick:A?void 0:this._onSelectAllClicked,role:"columnheader"},p({hostClassName:D.checkTooltip,id:"".concat(this._id,"-checkTooltip"),setAriaDescribedBy:!1,content:s,children:w.createElement(TH,{id:"".concat(this._id,"-check"),"aria-label":f===aH.multiple?s:l,"data-is-focusable":!A||void 0,isHeader:!0,selected:k,anySelected:!1,canSelect:!A,className:D.check,onRenderDetailsCheckbox:v,useFastIcons:y,isVisible:O})},this._onRenderColumnHeaderTooltip)),this.props.onRenderColumnHeaderTooltip?null:s&&!A?w.createElement("label",{key:"__checkboxLabel",id:"".concat(this._id,"-checkTooltip"),className:D.accessibleLabel,"aria-hidden":!0},s):l&&A?w.createElement("label",{key:"__checkboxLabel",id:"".concat(this._id,"-checkTooltip"),className:D.accessibleLabel,"aria-hidden":!0},l):null]:null,L?w.createElement("div",{className:D.cellIsGroupExpander,onClick:this._onToggleCollapseAll,"data-is-focusable":!0,"aria-label":o,"aria-expanded":!S,role:"columnheader"},w.createElement(B,{className:D.collapseButton,iconName:F?"ChevronLeftMed":"ChevronRightMed"}),w.createElement("span",{className:D.accessibleLabel},o)):M?w.createElement("div",{className:D.cellIsGroupExpander,"data-is-focusable":!1,role:"columnheader"}):null,w.createElement(iH,{indentWidth:c,role:"gridcell",count:b-1}),i.map(function(t,r){var n=!!N&&r>=R&&r<i.length-P;return[N&&(n||r===i.length-P)&&e._renderDropHint(r),w.createElement(NH,{column:t,styles:t.styles,key:t.key,columnIndex:z+r,parentId:e._id,isDraggable:n,updateDragInfo:e._updateDragInfo,dragDropHelper:e._dragDropHelper,onColumnClick:u,onColumnContextMenu:d,onRenderColumnHeaderTooltip:e.props.onRenderColumnHeaderTooltip,isDropped:e._onDropIndexInfo.targetIndex===r,cellStyleProps:e.props.cellStyleProps,useFastIcons:y}),e._renderColumnDivider(r)]}),N&&0===P&&this._renderDropHint(i.length),E&&w.createElement(vF,null,w.createElement("div",{className:D.sizingOverlay,onMouseMove:this._onSizerMouseMove,onMouseUp:this._onSizerMouseUp})))},t.prototype.focus=function(){var e;return!!(null===(e=this._rootComponent.current)||void 0===e?void 0:e.focus())},t.prototype._getColumnReorderProps=function(){var e=this.props,t=e.columnReorderOptions;return e.columnReorderProps||t&&iN(iN({},t),{onColumnDragEnd:void 0})},t.prototype._getHeaderDragDropOptions=function(){return{selectionIndex:1,context:{data:this,index:0},canDrag:function(){return!1},canDrop:function(){return!0},onDragStart:function(){},updateDropState:this._updateDroppingState,onDrop:this._onDrop,onDragEnd:function(){},onDragOver:this._onDragOver}},t.prototype._isValidCurrentDropHintIndex=function(){return this._currentDropHintIndex>=0},t.prototype._isCheckboxColumnHidden=function(){var e=this.props,t=e.selectionMode,r=e.checkboxVisibility;return t===aH.none||r===Wj.hidden},t.prototype._resetDropHints=function(){this._currentDropHintIndex>=0&&(this._updateDropHintElement(this._dropHintDetails[this._currentDropHintIndex].dropHintElementRef,"none"),this._currentDropHintIndex=-1)},t.prototype._updateDropHintElement=function(e,t){e.childNodes[1].style.display=t,e.childNodes[0].style.display=t},t.prototype._isEventOnHeader=function(e){if(this._rootElement.current){var t=this._rootElement.current.getBoundingClientRect();if(e.clientX>t.left&&e.clientX<t.right&&e.clientY>t.top&&e.clientY<t.bottom)return Uj.header}},t.prototype._renderColumnDivider=function(e){var t=this.props.columns,r=(void 0===t?PH:t)[e],i=r.onRenderDivider;return i?i({column:r,columnIndex:e},this._renderColumnSizer):this._renderColumnSizer({column:r,columnIndex:e})},t.prototype._renderDropHint=function(e){var t=this._classNames,r=this.props.useFastIcons?iM:sM;return w.createElement("div",{key:"dropHintKey",className:t.dropHintStyle,id:"columnDropHint_".concat(e),"aria-hidden":!0},w.createElement("div",{role:"presentation",key:"dropHintCircleKey",className:t.dropHintCaretStyle,"data-is-focusable":!1,"data-sizer-index":e,"aria-hidden":!0},w.createElement(r,{iconName:"CircleShapeSolid"})),w.createElement("div",{key:"dropHintLineKey","aria-hidden":!0,"data-is-focusable":!1,"data-sizer-index":e,className:t.dropHintLineStyle}))},t.prototype._onSizerDoubleClick=function(e,t){var r=this.props,i=r.onColumnAutoResized,n=r.columns;i&&i((void 0===n?PH:n)[e],e)},t.prototype._onSelectionChanged=function(){var e=!!this.props.selection&&this.props.selection.isAllSelected();this.state.isAllSelected!==e&&this.setState({isAllSelected:e})},t.defaultProps={selectAllVisibility:kH.visible,collapseAllVisibility:rH.visible,useFastIcons:!0},t}(w.Component);function BH(e,t,r,i){return e?t<=r&&t>=i:t>=r&&t<=i}function MH(e,t,r){return e?t>=r:t<=r}function LH(e,t,r){return e?t<=r:t>=r}function zH(e){e.stopPropagation()}var FH=PB(DH,function(e){var t,r,i,n,o=e.theme,s=e.className,a=e.isAllSelected,l=e.isResizingColumn,c=e.isSizing,u=e.isAllCollapsed,d=e.cellStyleProps,m=void 0===d?pH:d,p=o.semanticColors,h=o.palette,f=o.fonts,g=EP(gH,o),v={iconForegroundColor:p.bodySubtext,headerForegroundColor:p.bodyText,headerBackgroundColor:p.bodyBackground,resizerColor:h.neutralTertiaryAlt},b={opacity:1,transition:"opacity 0.3s linear"},y=vH(e);return{root:[g.root,f.small,{display:"inline-block",background:v.headerBackgroundColor,position:"relative",minWidth:"100%",verticalAlign:"top",height:42,lineHeight:42,whiteSpace:"nowrap",boxSizing:"content-box",paddingBottom:"1px",paddingTop:"16px",borderBottom:"1px solid ".concat(p.bodyDivider),cursor:"default",userSelect:"none",selectors:(t={},t["&:hover .".concat(g.check)]={opacity:1},t["& .".concat(g.tooltipHost," .").concat(g.checkTooltip)]={display:"block"},t)},a&&g.isAllSelected,l&&g.isResizingColumn,s],check:[g.check,{height:42},{selectors:(r={},r[".".concat(OP," &:focus, :host(.").concat(OP,") &:focus")]={opacity:1},r)}],cellWrapperPadded:{paddingRight:m.cellExtraRightPadding+m.cellRightPadding},cellIsCheck:[y,g.cellIsCheck,{position:"relative",padding:0,margin:0,display:"inline-flex",alignItems:"center",border:"none"},a&&{opacity:1}],cellIsGroupExpander:[y,{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:f.small.fontSize,padding:0,border:"none",width:36,color:h.neutralSecondary,selectors:{":hover":{backgroundColor:h.neutralLighter},":active":{backgroundColor:h.neutralLight}}}],cellIsActionable:{selectors:{":hover":{color:p.bodyText,background:p.listHeaderBackgroundHovered},":active":{background:p.listHeaderBackgroundPressed}}},cellIsEmpty:{textOverflow:"clip"},cellSizer:[g.cellSizer,{selectors:{"&::-moz-focus-inner":{border:0},"&":{outline:"transparent"}}},{display:"inline-block",position:"relative",cursor:"ew-resize",bottom:0,top:0,overflow:"hidden",height:"inherit",background:"transparent",zIndex:1,width:16,selectors:(i={":after":{content:'""',position:"absolute",top:0,bottom:0,width:1,background:v.resizerColor,opacity:0,left:"50%"},":focus:after":b,":hover:after":b},i["&.".concat(g.isResizing,":after")]=[b,{boxShadow:"0 0 5px 0 rgba(0, 0, 0, 0.4)"}],i)}],cellIsResizing:g.isResizing,cellSizerStart:{margin:"0 -8px"},cellSizerEnd:{margin:0,marginLeft:-16},collapseButton:[g.collapseButton,{transformOrigin:"50% 50%",transition:"transform .1s linear"},u?[g.isCollapsed,{transform:"rotate(0deg)"}]:{transform:gR(o)?"rotate(-90deg)":"rotate(90deg)"}],checkTooltip:g.checkTooltip,sizingOverlay:c&&{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"ew-resize",background:"rgba(255, 255, 255, 0)",selectors:(n={},n[SP]=iN({background:"transparent"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),n)},accessibleLabel:kP,dropHintCircleStyle:[g.dropHintCircleStyle,{display:"inline-block",visibility:"hidden",position:"absolute",bottom:0,height:9,width:9,borderRadius:"50%",marginLeft:-5,top:34,overflow:"visible",zIndex:10,border:"1px solid ".concat(h.themePrimary),background:h.white}],dropHintCaretStyle:[g.dropHintCaretStyle,{display:"none",position:"absolute",top:-28,left:-6.5,fontSize:f.medium.fontSize,color:h.themePrimary,overflow:"visible",zIndex:10}],dropHintLineStyle:[g.dropHintLineStyle,{display:"none",position:"absolute",bottom:0,top:0,overflow:"hidden",height:42,width:1,background:h.themePrimary,zIndex:10}],dropHintStyle:{display:"inline-block",position:"absolute"}}},void 0,{scope:"DetailsHeader"}),jH=function(e){var t=e.columns,r=e.rowClassNames,i=e.cellStyleProps,n=void 0===i?pH:i,o=e.item,s=e.itemIndex,a=e.isSelected,l=e.onRenderItemColumn,c=e.getCellValueKey,u=e.onRenderField,d=e.cellsByColumn,m=e.enableUpdateAnimations,p=e.rowHeaderId,h=w.useRef(),f=h.current||(h.current={}),g=w.useCallback(function(e){var t=e.column,i=e.cellValueKey,o=e.className,s=e.onRender,a=e.item,l=e.itemIndex,c=void 0===t.calculatedWidth?"auto":t.calculatedWidth+n.cellLeftPadding+n.cellRightPadding+(t.isPadded?n.cellExtraRightPadding:0),u="".concat(t.key).concat(void 0!==i?"-".concat(i):"");return w.createElement("div",{key:u,id:t.isRowHeader?p:void 0,role:t.isRowHeader?"rowheader":"gridcell",className:vB(t.className,t.isMultiline&&r.isMultiline,t.isRowHeader&&r.isRowHeader,r.cell,t.isPadded?r.cellPadded:r.cellUnpadded,o),style:{width:c},"data-automationid":"DetailsRowCell","data-automation-key":t.key},s(a,l,t))},[r,n,p]);return w.createElement("div",{className:r.fields,"data-automationid":"DetailsRowFields",role:"presentation"},t.map(function(e){var t=e.getValueKey,i=void 0===t?c:t,n=d&&e.key in d&&function(){return d[e.key]}||e.onRender||l||HH,p=g;e.onRenderField&&(p=tL(e.onRenderField,p)),u&&(p=tL(u,p));var h=f[e.key],v=m&&i?i(o,s,e):void 0,b=!1;return void 0!==v&&void 0!==h&&v!==h&&(b=!0),f[e.key]=v,p({item:o,itemIndex:s,isSelected:a,column:e,cellValueKey:v,className:b?r.cellAnimation:void 0,onRender:n})}))};function HH(e,t,r){return e&&r?function(e,t){var r=e&&t&&t.fieldName?e[t.fieldName]:"";return null==r&&(r=""),"boolean"==typeof r?r.toString():r}(e,r):null}var qH=LB(),UH=[],GH=function(e){function t(t){var r=e.call(this,t)||this;return r._root=w.createRef(),r._cellMeasurer=w.createRef(),r._focusZone=w.createRef(),r._onSelectionChanged=function(){var e=WH(r.props);NM(e,r.state.selectionState)||r.setState({selectionState:e})},r._updateDroppingState=function(e,t){var i=r.state.isDropping,n=r.props,o=n.dragDropEvents,s=n.item;e?o.onDragEnter&&(r._droppingClassNames=o.onDragEnter(s,t)):o.onDragLeave&&o.onDragLeave(s,t),i!==e&&r.setState({isDropping:e})},lM(r),r._events=new BM(r),r.state={selectionState:WH(t),columnMeasureInfo:void 0,isDropping:!1},r._droppingClassNames="",r}return rN(t,e),t.getDerivedStateFromProps=function(e,t){return iN(iN({},t),{selectionState:WH(e)})},t.prototype.componentDidMount=function(){var e=this.props,t=e.dragDropHelper,r=e.selection,i=e.item,n=e.onDidMount;t&&this._root.current&&(this._dragDropSubscription=t.subscribe(this._root.current,this._events,this._getRowDragDropOptions())),r&&this._events.on(r,yH,this._onSelectionChanged),n&&i&&(this._onDidMountCalled=!0,n(this))},t.prototype.componentDidUpdate=function(e){var t=this.state,r=this.props,i=r.item,n=r.onDidMount,o=t.columnMeasureInfo;if(this.props.itemIndex===e.itemIndex&&this.props.item===e.item&&this.props.dragDropHelper===e.dragDropHelper||(this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this.props.dragDropHelper&&this._root.current&&(this._dragDropSubscription=this.props.dragDropHelper.subscribe(this._root.current,this._events,this._getRowDragDropOptions()))),o&&o.index>=0&&this._cellMeasurer.current){var s=this._cellMeasurer.current.getBoundingClientRect().width;o.onMeasureDone(s),this.setState({columnMeasureInfo:void 0})}i&&n&&!this._onDidMountCalled&&(this._onDidMountCalled=!0,n(this))},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.item,r=e.onWillUnmount;r&&t&&r(this),this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this._events.dispose()},t.prototype.shouldComponentUpdate=function(e,t){if(this.props.useReducedRowRenderer){var r=WH(e);return this.state.selectionState.isSelected!==r.isSelected||!NM(this.props,e)}return!0},t.prototype.render=function(){var e,t=this.props,r=t.className,i=t.columns,n=void 0===i?UH:i,o=t.dragDropEvents,s=t.item,a=t.itemIndex,l=t.id,c=t.flatIndexOffset,u=void 0===c?2:c,d=t.onRenderCheck,m=void 0===d?this._onRenderCheck:d,p=t.onRenderDetailsCheckbox,h=t.onRenderItemColumn,f=t.onRenderField,g=t.getCellValueKey,v=t.selectionMode,b=t.checkboxVisibility,y=t.getRowAriaLabel,_=t.getRowAriaDescription,x=t.getRowAriaDescribedBy,C=t.isGridRow,k=t.checkButtonAriaLabel,T=t.checkboxCellClassName,E=t.rowFieldsAs,S=t.selection,I=t.indentWidth,A=t.enableUpdateAnimations,O=t.compact,N=t.theme,R=t.styles,P=t.cellsByColumn,D=t.groupNestingDepth,B=t.useFastIcons,M=void 0===B||B,L=t.cellStyleProps,z=t.group,F=t.focusZoneProps,j=t.disabled,H=void 0!==j&&j,q=this.state,U=q.columnMeasureInfo,G=q.isDropping,W=this.state.selectionState,V=W.isSelected,K=void 0!==V&&V,$=W.isSelectionModal,Y=void 0!==$&&$,J=o?!(!o.canDrag||!o.canDrag(s)):void 0,X=G?this._droppingClassNames||"is-dropping":"",Z=y?y(s):void 0,Q=_?_(s):void 0,ee=x?x(s):void 0,te=!!S&&S.canSelectItem(s,a)&&!H,re=v===aH.multiple,ie=v!==aH.none&&b!==Wj.hidden,ne=v===aH.none?void 0:K,oe=z?a-z.startIndex+1:void 0,se=z?z.count:void 0,ae=F?F.direction:rL.horizontal;this._classNames=iN(iN({},this._classNames),qH(R,{theme:N,isSelected:K,canSelect:!re,anySelected:Y,checkboxCellClassName:T,droppingClassName:X,className:r,compact:O,enableUpdateAnimations:A,cellStyleProps:L,disabled:H}));var le={isMultiline:this._classNames.isMultiline,isRowHeader:this._classNames.isRowHeader,cell:this._classNames.cell,cellAnimation:this._classNames.cellAnimation,cellPadded:this._classNames.cellPadded,cellUnpadded:this._classNames.cellUnpadded,fields:this._classNames.fields};NM(this._rowClassNames||{},le)||(this._rowClassNames=le);var ce=E?qL(E,jH):jH,ue=w.createElement(ce,{rowClassNames:this._rowClassNames,rowHeaderId:"".concat(l,"-header"),cellsByColumn:P,columns:n,item:s,itemIndex:a,isSelected:K,columnStartIndex:(ie?1:0)+(D?1:0),onRenderItemColumn:h,onRenderField:f,getCellValueKey:g,enableUpdateAnimations:A,cellStyleProps:L}),de=this.props.role?this.props.role:"row";this._ariaRowDescriptionId=qD("DetailsRow-description");var me=n.some(function(e){return!!e.isRowHeader}),pe="".concat(l,"-checkbox")+(me?" ".concat(l,"-header"):""),he=C?{}:{"aria-level":D&&D+1||void 0,"aria-posinset":oe,"aria-setsize":se};return w.createElement(BL,iN({"data-is-focusable":!0},gB(this.props,fB),"boolean"==typeof J?{"data-is-draggable":J,draggable:J}:{},F,he,{direction:ae,elementRef:this._root,componentRef:this._focusZone,role:de,"aria-label":Z,"aria-disabled":H||void 0,"aria-describedby":Q?this._ariaRowDescriptionId:ee,className:this._classNames.root,"data-selection-index":a,"data-selection-touch-invoke":!0,"data-selection-disabled":null!==(e=this.props["data-selection-disabled"])&&void 0!==e?e:H||void 0,"data-item-index":a,"aria-rowindex":void 0===oe?a+u:void 0,"data-automationid":"DetailsRow","aria-selected":ne,allowFocusRoot:!0}),Q?w.createElement("span",{key:"description",role:"presentation",hidden:!0,id:this._ariaRowDescriptionId},Q):null,ie&&w.createElement("div",{role:"gridcell","data-selection-toggle":!0,className:this._classNames.checkCell},m({id:l?"".concat(l,"-checkbox"):void 0,selected:K,selectionMode:v,anySelected:Y,"aria-label":k,"aria-labelledby":l?pe:void 0,canSelect:te,compact:O,className:this._classNames.check,theme:N,isVisible:b===Wj.always,onRenderDetailsCheckbox:p,useFastIcons:M})),w.createElement(iH,{indentWidth:I,role:"gridcell",count:0===D?-1:D}),s&&ue,U&&w.createElement("span",{role:"presentation",className:vB(this._classNames.cellMeasurer,this._classNames.cell),ref:this._cellMeasurer},w.createElement(ce,{rowClassNames:this._rowClassNames,rowHeaderId:"".concat(l,"-header"),columns:[U.column],item:s,itemIndex:a,columnStartIndex:(ie?1:0)+(D?1:0)+n.length,onRenderItemColumn:h,getCellValueKey:g})))},t.prototype.measureCell=function(e,t){var r=this.props.columns,i=iN({},(void 0===r?UH:r)[e]);i.minWidth=0,i.maxWidth=999999,delete i.calculatedWidth,this.setState({columnMeasureInfo:{index:e,column:i,onMeasureDone:t}})},t.prototype.focus=function(e){var t;return void 0===e&&(e=!1),!!(null===(t=this._focusZone.current)||void 0===t?void 0:t.focus(e))},t.prototype._onRenderCheck=function(e){return w.createElement(TH,iN({},e))},t.prototype._getRowDragDropOptions=function(){var e=this.props,t=e.item,r=e.itemIndex,i=e.dragDropEvents;return{eventMap:e.eventsToRegister,selectionIndex:r,context:{data:t,index:r},canDrag:i.canDrag,canDrop:i.canDrop,onDragStart:i.onDragStart,updateDropState:this._updateDroppingState,onDrop:i.onDrop,onDragEnd:i.onDragEnd,onDragOver:i.onDragOver}},t}(w.Component);function WH(e){var t,r=e.itemIndex,i=e.selection;return{isSelected:!!(null==i?void 0:i.isIndexSelected(r)),isSelectionModal:!!(null===(t=null==i?void 0:i.isModal)||void 0===t?void 0:t.call(i))}}var VH=PB(GH,function(e){var t,r,i,n,o,s,a,l,c,u,d,m,p,h,f=e.theme,g=e.isSelected,v=e.canSelect,b=e.droppingClassName,y=e.isCheckVisible,_=e.checkboxCellClassName,x=e.compact,w=e.className,C=e.cellStyleProps,k=void 0===C?pH:C,T=e.enableUpdateAnimations,E=e.disabled,S=f.palette,I=f.fonts,A=S.neutralPrimary,O=S.white,N=S.neutralSecondary,R=S.neutralLighter,P=S.neutralLight,D=S.neutralDark,B=S.neutralQuaternaryAlt,M=f.semanticColors,L=M.focusBorder,z=M.linkHovered,F=EP(mH,f),j={defaultHeaderText:A,defaultMetaText:N,defaultBackground:O,defaultHoverHeaderText:D,defaultHoverMetaText:A,defaultHoverBackground:R,selectedHeaderText:D,selectedMetaText:A,selectedBackground:P,selectedHoverHeaderText:D,selectedHoverMetaText:A,selectedHoverBackground:B,focusHeaderText:D,focusMetaText:A,focusBackground:P,focusHoverBackground:B},H=[DP(f,{inset:-1,borderColor:L,outlineColor:O,highContrastStyle:{top:2,right:2,bottom:2,left:2},pointerEvents:"none"}),F.isSelected,{color:j.selectedMetaText,background:j.selectedBackground,borderBottom:"1px solid ".concat(O),selectors:(t={"&:before":{position:"absolute",display:"block",top:-1,height:1,bottom:0,left:0,right:0,content:"",borderTop:"1px solid ".concat(O)}},t[".".concat(F.cell," > .").concat(dH.root)]={color:z,selectors:(r={},r[SP]={color:"HighlightText"},r)},t["&:hover"]={background:j.selectedHoverBackground,color:j.selectedHoverMetaText,selectors:(i={},i[SP]={background:"Highlight",selectors:(n={},n[".".concat(F.cell)]={color:"HighlightText"},n[".".concat(F.cell," > .").concat(dH.root)]={forcedColorAdjust:"none",color:"HighlightText"},n)},i[".".concat(F.isRowHeader)]={color:j.selectedHoverHeaderText,selectors:(o={},o[SP]={color:"HighlightText"},o)},i)},t["&:focus"]={background:j.focusBackground,selectors:(s={},s[".".concat(F.cell)]={color:j.focusMetaText,selectors:(a={},a[SP]={color:"HighlightText",selectors:{"> a":{color:"HighlightText"}}},a)},s[".".concat(F.isRowHeader)]={color:j.focusHeaderText,selectors:(l={},l[SP]={color:"HighlightText"},l)},s[SP]={background:"Highlight"},s)},t[SP]=iN(iN({background:"Highlight",color:"HighlightText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),{selectors:{a:{color:"HighlightText"}}}),t["&:focus:hover"]={background:j.focusHoverBackground},t)}],q=[F.isContentUnselectable,{userSelect:"none",cursor:"default"}],U={minHeight:fH.compactRowHeight,border:0},G={minHeight:fH.compactRowHeight,paddingTop:fH.compactRowVerticalPadding,paddingBottom:fH.compactRowVerticalPadding,paddingLeft:"".concat(k.cellLeftPadding,"px")},W=[DP(f,{inset:-1}),F.cell,{display:"inline-block",position:"relative",boxSizing:"border-box",minHeight:fH.rowHeight,verticalAlign:"top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingTop:fH.rowVerticalPadding,paddingBottom:fH.rowVerticalPadding,paddingLeft:"".concat(k.cellLeftPadding,"px"),selectors:(c={"& > button":{maxWidth:"100%"}},c["[data-is-focusable='true']"]=DP(f,{inset:-1,borderColor:N,outlineColor:O}),c)},g&&{selectors:(u={},u[SP]=iN({background:"Highlight",color:"HighlightText"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),u)},x&&G,E&&{opacity:.5}];return{root:[F.root,CP.fadeIn400,b,f.fonts.small,y&&F.isCheckVisible,DP(f,{borderColor:L,outlineColor:O}),{borderBottom:"1px solid ".concat(R),background:j.defaultBackground,color:j.defaultMetaText,display:"inline-flex",minWidth:"100%",minHeight:fH.rowHeight,whiteSpace:"nowrap",padding:0,boxSizing:"border-box",verticalAlign:"top",textAlign:"left",selectors:(d={},d[".".concat(F.listCellFirstChild," &:before")]={display:"none"},d["&:hover"]={background:j.defaultHoverBackground,color:j.defaultHoverMetaText,selectors:(m={},m[".".concat(F.isRowHeader)]={color:j.defaultHoverHeaderText},m[".".concat(F.cell," > .").concat(dH.root)]={color:z},m)},d["&:hover .".concat(F.check)]={opacity:1},d[".".concat(OP," &:focus .").concat(F.check,", :host(.").concat(OP,") &:focus .").concat(F.check)]={opacity:1},d[".ms-GroupSpacer"]={flexShrink:0,flexGrow:0},d)},g&&H,!v&&q,x&&U,w],cellUnpadded:{paddingRight:"".concat(k.cellRightPadding,"px")},cellPadded:{paddingRight:"".concat(k.cellExtraRightPadding+k.cellRightPadding,"px"),selectors:(p={},p["&.".concat(F.cellCheck)]={paddingRight:0},p)},cell:W,cellAnimation:T&&mP.slideLeftIn40,cellMeasurer:[F.cellMeasurer,{overflow:"visible",whiteSpace:"nowrap"}],checkCell:[W,F.cellCheck,_,{padding:0,paddingTop:1,marginTop:-1,flexShrink:0}],fields:[F.fields,{display:"flex",alignItems:"stretch"}],isRowHeader:[F.isRowHeader,{color:j.defaultHeaderText,fontSize:I.medium.fontSize},g&&{color:j.selectedHeaderText,fontWeight:xP.semibold,selectors:(h={},h[SP]={color:"HighlightText"},h)}],isMultiline:[W,{whiteSpace:"normal",wordBreak:"break-word",textOverflow:"clip"}],check:[F.check]}},void 0,{scope:"DetailsRow"}),KH="data-selection-index",$H="data-selection-toggle",YH="data-selection-invoke",JH="data-selection-all-toggle",XH=function(e){function t(t){var r=e.call(this,t)||this;r._root=w.createRef(),r.ignoreNextFocus=function(){r._handleNextFocus(!1)},r._onSelectionChange=function(){var e=r.props.selection,t=e.isModal&&e.isModal();r.setState({isModal:t})},r._onMouseDownCapture=function(e){var t=e.target,i=mR(r._root.current),n=null==i?void 0:i.document;if((null==n?void 0:n.activeElement)===t||iL(null==n?void 0:n.activeElement,t)){if(iL(t,r._root.current))for(;t!==r._root.current;){if(r._hasAttribute(t,YH)){r.ignoreNextFocus();break}t=SM(t)}}else r.ignoreNextFocus()},r._onFocus=function(e){var t=e.target,i=r.props.selection,n=r._isCtrlPressed||r._isMetaPressed,o=r._getSelectionMode();if(r._shouldHandleFocus&&o!==aH.none){var s=r._hasAttribute(t,$H),a=r._findItemRoot(t);if(!s&&a){var l=r._getItemIndex(a);void 0===r._getItemSpan(a)&&(n?(i.setIndexSelected(l,i.isIndexSelected(l),!0),r.props.enterModalOnTouch&&r._isTouch&&i.setModal&&(i.setModal(!0),r._setIsTouch(!1))):r.props.isSelectedOnFocus&&r._onItemSurfaceClick("focus",l))}}r._handleNextFocus(!1)},r._onMouseDown=function(e){r._updateModifiers(e);var t=r.props.toggleWithoutModifierPressed,i=e.target,n=r._findItemRoot(i);if(!r._isSelectionDisabled(i))for(;i!==r._root.current&&!r._hasAttribute(i,JH);){if(n){if(r._hasAttribute(i,$H))break;if(r._hasAttribute(i,YH))break;if(!(i!==n&&!r._shouldAutoSelect(i)||r._isShiftPressed||r._isCtrlPressed||r._isMetaPressed||t)){r._onInvokeMouseDown(e,r._getItemIndex(n),r._getItemSpan(n));break}if(r.props.disableAutoSelectOnInputElements&&("A"===i.tagName||"BUTTON"===i.tagName||"INPUT"===i.tagName))return}i=SM(i)}},r._onTouchStartCapture=function(e){r._setIsTouch(!0)},r._onClick=function(e){var t=r.props.enableTouchInvocationTarget,i=void 0!==t&&t;r._updateModifiers(e);for(var n=e.target,o=r._findItemRoot(n),s=r._isSelectionDisabled(n);n!==r._root.current;){if(r._hasAttribute(n,JH)){s||r._onToggleAllClick(e);break}if(o){var a=r._getItemIndex(o),l=r._getItemSpan(o);if(r._hasAttribute(n,$H)){s||(r._isShiftPressed?r._onItemSurfaceClick("click",a,l):r._onToggleClick(e,a,l));break}if(r._isTouch&&i&&r._hasAttribute(n,"data-selection-touch-invoke")||r._hasAttribute(n,YH)){void 0===l&&r._onInvokeClick(e,a);break}if(n===o){s||r._onItemSurfaceClick("click",a,l);break}if("A"===n.tagName||"BUTTON"===n.tagName||"INPUT"===n.tagName)return}n=SM(n)}},r._onContextMenu=function(e){var t=e.target,i=r.props,n=i.onItemContextMenu,o=i.selection;if(n){var s=r._findItemRoot(t);if(s){var a=r._getItemIndex(s);r._onInvokeMouseDown(e,a),n(o.getItems()[a],a,e.nativeEvent)||e.preventDefault()}}},r._onDoubleClick=function(e){var t=e.target,i=r.props.onItemInvoked,n=r._findItemRoot(t);if(n&&i&&!r._isInputElement(t)){for(var o=r._getItemIndex(n);t!==r._root.current&&!r._hasAttribute(t,$H)&&!r._hasAttribute(t,YH);){if(t===n){r._onInvokeClick(e,o);break}t=SM(t)}t=SM(t)}},r._onKeyDownCapture=function(e){r._updateModifiers(e),r._handleNextFocus(!0)},r._onKeyDown=function(e){r._updateModifiers(e);var t=e.target,i=r._isSelectionDisabled(t),n=r.props,o=n.selection,s=n.selectionClearedOnEscapePress,a=65===e.which&&(r._isCtrlPressed||r._isMetaPressed),l=e.which===iR;if(!r._isInputElement(t)){var c=r._getSelectionMode();if(a&&c===aH.multiple&&!o.isAllSelected())return i||o.setAllSelected(!0),e.stopPropagation(),void e.preventDefault();if(s&&l&&o.getSelectedCount()>0)return i||o.setAllSelected(!1),e.stopPropagation(),void e.preventDefault();var u=r._findItemRoot(t);if(u)for(var d=r._getItemIndex(u),m=r._getItemSpan(u);t!==r._root.current&&!r._hasAttribute(t,$H);){if(r._shouldAutoSelect(t)){i||void 0!==m||r._onInvokeMouseDown(e,d,m);break}if(!(e.which!==rR&&e.which!==nR||"BUTTON"!==t.tagName&&"A"!==t.tagName&&"INPUT"!==t.tagName&&"SUMMARY"!==t.tagName))return!1;if(t===u){if(e.which===rR)return void(void 0===m&&(r._onInvokeClick(e,d),e.preventDefault()));if(e.which===nR)return i||r._onToggleClick(e,d,m),void e.preventDefault();break}t=SM(t)}}},r._events=new BM(r),r._async=new hM(r),lM(r);var i=r.props.selection,n=i.isModal&&i.isModal();return r.state={isModal:n},r}return rN(t,e),t.getDerivedStateFromProps=function(e,t){var r=e.selection.isModal&&e.selection.isModal();return iN(iN({},t),{isModal:r})},t.prototype.componentDidMount=function(){var e=mR(this._root.current),t=null==e?void 0:e.document;this._events.on(e,"keydown, keyup",this._updateModifiers,!0),this._events.on(t,"click",this._findScrollParentAndTryClearOnEmptyClick),this._events.on(null==t?void 0:t.body,"touchstart",this._onTouchStartCapture,!0),this._events.on(null==t?void 0:t.body,"touchend",this._onTouchStartCapture,!0),this._events.on(this.props.selection,"change",this._onSelectionChange)},t.prototype.render=function(){var e=this.state.isModal;return w.createElement("div",{className:vB("ms-SelectionZone",this.props.className,{"ms-SelectionZone--modal":!!e}),ref:this._root,onKeyDown:this._onKeyDown,onMouseDown:this._onMouseDown,onKeyDownCapture:this._onKeyDownCapture,onClick:this._onClick,role:"presentation",onDoubleClick:this._onDoubleClick,onContextMenu:this._onContextMenu,onMouseDownCapture:this._onMouseDownCapture,onFocusCapture:this._onFocus,"data-selection-is-modal":!!e||void 0},this.props.children,w.createElement(VM,null))},t.prototype.componentDidUpdate=function(e){var t=this.props.selection;t!==e.selection&&(this._events.off(e.selection),this._events.on(t,"change",this._onSelectionChange))},t.prototype.componentWillUnmount=function(){this._events.dispose(),this._async.dispose()},t.prototype._isSelectionDisabled=function(e){if(this._getSelectionMode()===aH.none)return!0;for(;e!==this._root.current;){if(this._hasAttribute(e,"data-selection-disabled"))return!0;e=SM(e)}return!1},t.prototype._onToggleAllClick=function(e){var t=this.props.selection;this._getSelectionMode()===aH.multiple&&(t.toggleAllSelected(),e.stopPropagation(),e.preventDefault())},t.prototype._onToggleClick=function(e,t,r){var i=this.props.selection,n=this._getSelectionMode();if(i.setChangeEvents(!1),this.props.enterModalOnTouch&&this._isTouch&&(void 0!==r?!i.isRangeSelected(t,r):!i.isIndexSelected(t))&&i.setModal&&(i.setModal(!0),this._setIsTouch(!1)),n===aH.multiple)void 0!==r?i.toggleRangeSelected(t,r):i.toggleIndexSelected(t);else{if(n!==aH.single)return void i.setChangeEvents(!0);if(void 0===r||1===r){var o=i.isIndexSelected(t),s=i.isModal&&i.isModal();i.setAllSelected(!1),i.setIndexSelected(t,!o,!0),s&&i.setModal&&i.setModal(!0)}}i.setChangeEvents(!0),e.stopPropagation()},t.prototype._onInvokeClick=function(e,t){var r=this.props,i=r.selection,n=r.onItemInvoked;n&&(n(i.getItems()[t],t,e.nativeEvent),e.preventDefault(),e.stopPropagation())},t.prototype._onItemSurfaceClick=function(e,t,r){var i,n=this.props,o=n.selection,s=n.toggleWithoutModifierPressed,a=this._isCtrlPressed||this._isMetaPressed,l=this._getSelectionMode();l===aH.multiple?this._isShiftPressed&&!this._isTabPressed?void 0!==r?null===(i=o.selectToRange)||void 0===i||i.call(o,t,r,!a):o.selectToIndex(t,!a):"click"===e&&(a||s)?void 0!==r?o.toggleRangeSelected(t,r):o.toggleIndexSelected(t):this._clearAndSelectIndex(t,r):l===aH.single&&this._clearAndSelectIndex(t,r)},t.prototype._onInvokeMouseDown=function(e,t,r){var i=this.props.selection;if(void 0!==r){if(i.isRangeSelected(t,r))return}else if(i.isIndexSelected(t))return;this._clearAndSelectIndex(t,r)},t.prototype._findScrollParentAndTryClearOnEmptyClick=function(e){var t=mR(this._root.current),r=null==t?void 0:t.document,i=yL(this._root.current);this._events.off(r,"click",this._findScrollParentAndTryClearOnEmptyClick),this._events.on(i,"click",this._tryClearOnEmptyClick),(i&&e.target instanceof Node&&i.contains(e.target)||i===e.target)&&this._tryClearOnEmptyClick(e)},t.prototype._tryClearOnEmptyClick=function(e){!this.props.selectionPreservedOnEmptyClick&&this._isNonHandledClick(e.target)&&this.props.selection.setAllSelected(!1)},t.prototype._clearAndSelectIndex=function(e,t){var r,i=this.props,n=i.selection,o=i.selectionClearedOnSurfaceClick,s=void 0===o||o;if((void 0!==t&&1!==t||1!==n.getSelectedCount()||!n.isIndexSelected(e))&&s){var a=n.isModal&&n.isModal();n.setChangeEvents(!1),n.setAllSelected(!1),void 0!==t?null===(r=n.setRangeSelected)||void 0===r||r.call(n,e,t,!0,!0):n.setIndexSelected(e,!0,!0),(a||this.props.enterModalOnTouch&&this._isTouch)&&(n.setModal&&n.setModal(!0),this._isTouch&&this._setIsTouch(!1)),n.setChangeEvents(!0)}},t.prototype._updateModifiers=function(e){this._isShiftPressed=e.shiftKey,this._isCtrlPressed=e.ctrlKey,this._isMetaPressed=e.metaKey;var t=e.keyCode;this._isTabPressed=!!t&&9===t},t.prototype._findItemRoot=function(e){for(var t=this.props.selection;e!==this._root.current;){var r=e.getAttribute(KH),i=Number(r);if(null!==r&&i>=0&&i<t.getItems().length)break;e=SM(e)}if(e!==this._root.current)return e},t.prototype._getItemIndex=function(e){var t,r=parseInt(null!==(t=e.getAttribute(KH))&&void 0!==t?t:"",10);return isNaN(r)?-1:r},t.prototype._getItemSpan=function(e){var t,r=parseInt(null!==(t=e.getAttribute("data-selection-span"))&&void 0!==t?t:"",10);return isNaN(r)?void 0:r},t.prototype._shouldAutoSelect=function(e){return this._hasAttribute(e,"data-selection-select")},t.prototype._hasAttribute=function(e,t){for(var r=!1;!r&&e!==this._root.current;){var i=e.getAttribute(t);if("false"===i){r=!1;break}r="true"===i,e=SM(e)}return r},t.prototype._isInputElement=function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"true"===e.getAttribute("contenteditable")||""===e.getAttribute("contenteditable")},t.prototype._isNonHandledClick=function(e){var t=uR();if(t&&e)for(;e&&e!==t.documentElement;){if(lL(e)||e.hasAttribute("data-selection-index"))return!1;e=SM(e)}return!0},t.prototype._handleNextFocus=function(e){var t=this;this._shouldHandleFocusTimeoutId&&(this._async.clearTimeout(this._shouldHandleFocusTimeoutId),this._shouldHandleFocusTimeoutId=void 0),this._shouldHandleFocus=e,e&&this._async.setTimeout(function(){t._shouldHandleFocus=!1},100)},t.prototype._setIsTouch=function(e){var t=this;this._isTouchTimeoutId&&(this._async.clearTimeout(this._isTouchTimeoutId),this._isTouchTimeoutId=void 0),this._isTouch=!0,e&&this._async.setTimeout(function(){t._isTouch=!1},300)},t.prototype._getSelectionMode=function(){var e=this.props.selection,t=this.props.selectionMode;return void 0===t?e?e.mode:aH.none:t},t.defaultProps={isSelectedOnFocus:!0,toggleWithoutModifierPressed:!1,selectionMode:aH.multiple,selectionClearedOnEscapePress:!0},t}(w.Component),ZH=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0]||{},i=r.onSelectionChanged,n=r.onItemsChanged,o=r.getKey,s=r.canSelectItem,a=void 0===s?function(){return!0}:s,l=r.items,c=r.selectionMode,u=void 0===c?aH.multiple:c;this.mode=u,this._getKey=o||QH,this._changeEventSuppressionCount=0,this._exemptedCount=0,this._anchoredIndex=0,this._unselectableCount=0,this._onSelectionChanged=i,this._onItemsChanged=n,this._canSelectItem=a,this._keyToIndexMap={},this._isModal=!1,this.setItems(l||[],!0),this.count=this.getSelectedCount()}return e.prototype.canSelectItem=function(e,t){return!("number"==typeof t&&t<0)&&this._canSelectItem(e,t)},e.prototype.getKey=function(e,t){var r=this._getKey(e,t);return"number"==typeof r||r?"".concat(r):""},e.prototype.setChangeEvents=function(e,t){this._changeEventSuppressionCount+=e?-1:1,0===this._changeEventSuppressionCount&&this._hasChanged&&(this._hasChanged=!1,t||this._change())},e.prototype.isModal=function(){return this._isModal},e.prototype.setModal=function(e){this._isModal!==e&&(this.setChangeEvents(!1),this._isModal=e,e||this.setAllSelected(!1),this._change(),this.setChangeEvents(!0))},e.prototype.setItems=function(e,t){void 0===t&&(t=!0);var r={},i={},n=!1;this.setChangeEvents(!1),this._unselectableCount=0;for(var o=!1,s=0;s<e.length;s++)(u=e[s])&&(g=this.getKey(u,s))&&(o||g in this._keyToIndexMap&&this._keyToIndexMap[g]===s||(o=!0),r[g]=s),i[s]=u&&!this.canSelectItem(u),i[s]&&this._unselectableCount++;(t||0===e.length)&&this._setAllSelected(!1,!0);var a={},l=0;for(var c in this._exemptedIndices)if(this._exemptedIndices.hasOwnProperty(c)){var u,d=Number(c),m=(u=this._items[d])?this.getKey(u,Number(d)):void 0,p=m?r[m]:d;void 0===p?n=!0:(a[p]=!0,l++,n=n||p!==d)}if(this._items&&0===this._exemptedCount&&e.length!==this._items.length&&this._isAllSelected&&(n=!0),!o)for(var h=0,f=Object.keys(this._keyToIndexMap);h<f.length;h++){var g;if(!((g=f[h])in r)){o=!0;break}}this._exemptedIndices=a,this._exemptedCount=l,this._keyToIndexMap=r,this._unselectableIndices=i,this._items=e,this._selectedItems=null,n&&this._updateCount(),o&&(BM.raise(this,"items-change"),this._onItemsChanged&&this._onItemsChanged()),n&&this._change(),this.setChangeEvents(!0)},e.prototype.getItems=function(){return this._items},e.prototype.getSelection=function(){if(!this._selectedItems){this._selectedItems=[];var e=this._items;if(e)for(var t=0;t<e.length;t++)this.isIndexSelected(t)&&this._selectedItems.push(e[t])}return this._selectedItems},e.prototype.getSelectedCount=function(){return this._isAllSelected?this._items.length-this._exemptedCount-this._unselectableCount:this._exemptedCount},e.prototype.getSelectedIndices=function(){if(!this._selectedIndices){this._selectedIndices=[];var e=this._items;if(e)for(var t=0;t<e.length;t++)this.isIndexSelected(t)&&this._selectedIndices.push(t)}return this._selectedIndices},e.prototype.getItemIndex=function(e){var t=this._keyToIndexMap[e];return null!=t?t:-1},e.prototype.isRangeSelected=function(e,t){if(0===t)return!1;for(var r=e+t,i=e;i<r;i++)if(!this.isIndexSelected(i))return!1;return!0},e.prototype.isAllSelected=function(){var e=this._items.length-this._unselectableCount;return this.mode===aH.single&&(e=Math.min(e,1)),this.count>0&&this._isAllSelected&&0===this._exemptedCount||!this._isAllSelected&&this._exemptedCount===e&&e>0},e.prototype.isKeySelected=function(e){var t=this._keyToIndexMap[e];return this.isIndexSelected(t)},e.prototype.isIndexSelected=function(e){return!!(this.count>0&&this._isAllSelected&&!this._exemptedIndices[e]&&!this._unselectableIndices[e]||!this._isAllSelected&&this._exemptedIndices[e])},e.prototype.setAllSelected=function(e){if(!e||this.mode===aH.multiple){var t=this._items?this._items.length-this._unselectableCount:0;this.setChangeEvents(!1),t>0&&(this._exemptedCount>0||e!==this._isAllSelected)&&(this._exemptedIndices={},(e!==this._isAllSelected||this._exemptedCount>0)&&(this._exemptedCount=0,this._isAllSelected=e,this._change()),this._updateCount()),this.setChangeEvents(!0)}},e.prototype.setKeySelected=function(e,t,r){var i=this._keyToIndexMap[e];i>=0&&this.setIndexSelected(i,t,r)},e.prototype.setIndexSelected=function(e,t,r){if(this.mode!==aH.none&&!((e=Math.min(Math.max(0,e),this._items.length-1))<0||e>=this._items.length)){this.setChangeEvents(!1);var i=this._exemptedIndices[e];!this._unselectableIndices[e]&&(t&&this.mode===aH.single&&this._setAllSelected(!1,!0),i&&(t&&this._isAllSelected||!t&&!this._isAllSelected)&&(delete this._exemptedIndices[e],this._exemptedCount--),!i&&(t&&!this._isAllSelected||!t&&this._isAllSelected)&&(this._exemptedIndices[e]=!0,this._exemptedCount++),r&&(this._anchoredIndex=e)),this._updateCount(),this.setChangeEvents(!0)}},e.prototype.setRangeSelected=function(e,t,r,i){if(this.mode!==aH.none&&(e=Math.min(Math.max(0,e),this._items.length-1),t=Math.min(Math.max(0,t),this._items.length-e),!(e<0||e>=this._items.length||0===t))){this.setChangeEvents(!1);for(var n=e,o=e+t-1,s=(this._anchoredIndex||0)>=o?n:o;n<=o;n++)this.setIndexSelected(n,r,!!i&&n===s);this.setChangeEvents(!0)}},e.prototype.selectToKey=function(e,t){this.selectToIndex(this._keyToIndexMap[e],t)},e.prototype.selectToRange=function(e,t,r){if(this.mode!==aH.none)if(this.mode!==aH.single){var i=this._anchoredIndex||0,n=Math.min(e,i),o=Math.max(e+t-1,i);for(this.setChangeEvents(!1),r&&this._setAllSelected(!1,!0);n<=o;n++)this.setIndexSelected(n,!0,!1);this.setChangeEvents(!0)}else 1===t&&this.setIndexSelected(e,!0,!0)},e.prototype.selectToIndex=function(e,t){if(this.mode!==aH.none)if(this.mode!==aH.single){var r=this._anchoredIndex||0,i=Math.min(e,r),n=Math.max(e,r);for(this.setChangeEvents(!1),t&&this._setAllSelected(!1,!0);i<=n;i++)this.setIndexSelected(i,!0,!1);this.setChangeEvents(!0)}else this.setIndexSelected(e,!0,!0)},e.prototype.toggleAllSelected=function(){this.setAllSelected(!this.isAllSelected())},e.prototype.toggleKeySelected=function(e){this.setKeySelected(e,!this.isKeySelected(e),!0)},e.prototype.toggleIndexSelected=function(e){this.setIndexSelected(e,!this.isIndexSelected(e),!0)},e.prototype.toggleRangeSelected=function(e,t){if(this.mode!==aH.none){var r=this.isRangeSelected(e,t),i=e+t;if(!(this.mode===aH.single&&t>1)){this.setChangeEvents(!1);for(var n=e;n<i;n++)this.setIndexSelected(n,!r,!1);this.setChangeEvents(!0)}}},e.prototype._updateCount=function(e){void 0===e&&(e=!1);var t=this.getSelectedCount();t!==this.count&&(this.count=t,this._change()),this.count||e||this.setModal(!1)},e.prototype._setAllSelected=function(e,t){if(void 0===t&&(t=!1),!e||this.mode===aH.multiple){var r=this._items?this._items.length-this._unselectableCount:0;this.setChangeEvents(!1),r>0&&(this._exemptedCount>0||e!==this._isAllSelected)&&(this._exemptedIndices={},(e!==this._isAllSelected||this._exemptedCount>0)&&(this._exemptedCount=0,this._isAllSelected=e,this._change()),this._updateCount(t)),this.setChangeEvents(!0)}},e.prototype._change=function(){0===this._changeEventSuppressionCount?(this._selectedItems=null,this._selectedIndices=void 0,BM.raise(this,yH),this._onSelectionChanged&&this._onSelectionChanged()):this._hasChanged=!0},e}();function QH(e,t){var r=(e||{}).key;return void 0===r?"".concat(t):r}var eq,tq,rq={root:"ms-GroupedList",compact:"ms-GroupedList--Compact",group:"ms-GroupedList-group",link:"ms-Link",listCell:"ms-List-cell"},iq={root:"ms-GroupHeader",compact:"ms-GroupHeader--compact",check:"ms-GroupHeader-check",dropIcon:"ms-GroupHeader-dropIcon",expand:"ms-GroupHeader-expand",isCollapsed:"is-collapsed",title:"ms-GroupHeader-title",isSelected:"is-selected",iconTag:"ms-Icon--Tag",group:"ms-GroupedList-group",isDropping:"is-dropping"},nq="cubic-bezier(0.390, 0.575, 0.565, 1.000)";!function(e){e[e.xSmall=0]="xSmall",e[e.small=1]="small",e[e.medium=2]="medium",e[e.large=3]="large"}(eq||(eq={})),function(e){e[e.normal=0]="normal",e[e.large=1]="large"}(tq||(tq={}));var oq=LB(),sq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.type,r=e.size,i=e.ariaLabel,n=e.ariaLive,o=e.styles,s=e.label,a=e.theme,l=e.className,c=e.labelPosition,u=i,d=gB(this.props,fB,["size"]),m=r;void 0===m&&void 0!==t&&(m=t===tq.large?eq.large:eq.medium);var p=oq(o,{theme:a,size:m,className:l,labelPosition:c});return w.createElement("div",iN({},d,{className:p.root}),w.createElement("div",{className:p.circle}),s&&w.createElement("div",{className:p.label},s),u&&w.createElement("div",{role:"status","aria-live":n},w.createElement(fM,null,w.createElement("div",{className:p.screenReaderText},u))))},t.defaultProps={size:eq.medium,ariaLive:"polite",labelPosition:"bottom"},t}(w.Component),aq={root:"ms-Spinner",circle:"ms-Spinner-circle",label:"ms-Spinner-label"},lq=ZN(function(){return CR({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}})}),cq=PB(sq,function(e){var t,r=e.theme,i=e.size,n=e.className,o=e.labelPosition,s=r.palette,a=EP(aq,r);return{root:[a.root,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"top"===o&&{flexDirection:"column-reverse"},"right"===o&&{flexDirection:"row"},"left"===o&&{flexDirection:"row-reverse"},n],circle:[a.circle,{boxSizing:"border-box",borderRadius:"50%",borderWidth:"1.5px",borderStyle:"solid",borderTopColor:s.themePrimary,borderRightColor:s.themeLight,borderBottomColor:s.themeLight,borderLeftColor:s.themeLight,animationName:lq(),animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.53,.21,.29,.67)",selectors:(t={},t[SP]=iN({borderTopColor:"Highlight"},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),t)},i===eq.xSmall&&["ms-Spinner--xSmall",{width:12,height:12}],i===eq.small&&["ms-Spinner--small",{width:16,height:16}],i===eq.medium&&["ms-Spinner--medium",{width:20,height:20}],i===eq.large&&["ms-Spinner--large",{width:28,height:28}]],label:[a.label,r.fonts.small,{color:s.themePrimary,margin:"8px 0 0",textAlign:"center"},"top"===o&&{margin:"0 0 8px"},"right"===o&&{margin:"0 0 0 8px"},"left"===o&&{margin:"0 8px 0 0"}],screenReaderText:kP}},void 0,{scope:"Spinner"}),uq=LB(),dq=function(e){function t(t){var r=e.call(this,t)||this;return r._toggleCollapse=function(){var e=r.props,t=e.group,i=e.onToggleCollapse,n=e.isGroupLoading,o=!r.state.isCollapsed,s=!o&&n&&n(t);r.setState({isCollapsed:o,isLoadingVisible:s}),i&&i(t)},r._onKeyUp=function(e){var t=r.props,i=t.group,n=t.onGroupHeaderKeyUp;if(n&&n(e,i),!e.defaultPrevented){var o=r.state.isCollapsed&&e.which===vR(aR,r.props.theme);(!r.state.isCollapsed&&e.which===vR(oR,r.props.theme)||o)&&(r._toggleCollapse(),e.stopPropagation(),e.preventDefault())}},r._onToggleClick=function(e){r._toggleCollapse(),e.stopPropagation(),e.preventDefault()},r._onHeaderClick=function(){var e=r.props,t=e.group,i=e.onGroupHeaderClick;i&&i(t)},r._onRenderTitle=function(e){if(!e.group)return null;var t=e.onRenderName?tL(e.onRenderName,r._onRenderName):r._onRenderName;return w.createElement("div",{className:r._classNames.title,id:r._id,onClick:r._onHeaderClick,role:"gridcell","aria-colspan":r.props.ariaColSpan,"data-selection-invoke":!0},t(e))},r._onRenderName=function(e){var t=e.group;return t?w.createElement(w.Fragment,null,w.createElement("span",null,t.name),w.createElement("span",{className:r._classNames.headerCount},"(",t.count,t.hasMoreData&&"+",")")):null},r._id=qD("GroupHeader"),r.state={isCollapsed:r.props.group&&r.props.group.isCollapsed,isLoadingVisible:!1},r}return rN(t,e),t.getDerivedStateFromProps=function(e,t){if(e.group){var r=e.group.isCollapsed,i=e.isGroupLoading,n=!r&&i&&i(e.group);return iN(iN({},t),{isCollapsed:r||!1,isLoadingVisible:n||!1})}return t},t.prototype.render=function(){var e=this.props,t=e.group,r=e.groupLevel,i=void 0===r?0:r,n=e.viewport,o=e.selectionMode,s=e.loadingText,a=e.isSelected,l=void 0!==a&&a,c=e.selected,u=void 0!==c&&c,d=e.indentWidth,m=e.onRenderGroupHeaderCheckbox,p=e.isCollapsedGroupSelectVisible,h=void 0===p||p,f=e.expandButtonProps,g=e.expandButtonIcon,v=e.selectAllButtonProps,b=e.theme,y=e.styles,_=e.className,x=e.compact,C=e.ariaLevel,k=e.ariaPosInSet,T=e.ariaSetSize,E=e.ariaRowIndex,S=e.useFastIcons,I=this.props.onRenderTitle?tL(this.props.onRenderTitle,this._onRenderTitle):this._onRenderTitle,A=S?this._fastDefaultCheckboxRender:this._defaultCheckboxRender,O=m?tL(m,A):A,N=this.state,R=N.isCollapsed,P=N.isLoadingVisible,D=o===aH.multiple,B=D&&(h||!(t&&t.isCollapsed)),M=u||l,L=gR(b);return this._classNames=uq(y,{theme:b,className:_,selected:M,isCollapsed:R,compact:x}),t?w.createElement("div",{className:this._classNames.root,style:n?{minWidth:n.width}:{},role:"row","aria-level":C,"aria-setsize":T,"aria-posinset":k,"aria-rowindex":E,"data-is-focusable":!0,onKeyUp:this._onKeyUp,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabel?void 0:this._id,"aria-expanded":!this.state.isCollapsed,"aria-selected":D?M:void 0,"data-selection-index":t.startIndex,"data-selection-span":t.count},w.createElement("div",{className:this._classNames.groupHeaderContainer,role:"presentation"},B?w.createElement("div",{role:"gridcell"},w.createElement("button",iN({"data-is-focusable":!1,type:"button",className:this._classNames.check,role:"checkbox",id:"".concat(this._id,"-check"),"aria-checked":M,"aria-labelledby":"".concat(this._id,"-check ").concat(this._id),"data-selection-toggle":!0},v),O({checked:M,theme:b},O))):o!==aH.none&&w.createElement(iH,{indentWidth:48,count:1}),w.createElement(iH,{indentWidth:d,count:i}),w.createElement("div",{className:this._classNames.dropIcon,role:"presentation"},w.createElement(sM,{iconName:"Tag"})),w.createElement("div",{role:"gridcell"},w.createElement("button",iN({"data-is-focusable":!1,"data-selection-disabled":!0,type:"button",className:this._classNames.expand,onClick:this._onToggleClick,"aria-expanded":!this.state.isCollapsed},f),w.createElement(sM,{className:this._classNames.expandIsCollapsed,iconName:g||(L?"ChevronLeftMed":"ChevronRightMed")}))),I(this.props),P&&w.createElement(cq,{label:s}))):null},t.prototype._defaultCheckboxRender=function(e){return w.createElement(uH,{checked:e.checked})},t.prototype._fastDefaultCheckboxRender=function(e){return w.createElement(mq,{theme:e.theme,checked:e.checked})},t.defaultProps={expandButtonProps:{"aria-label":"expand collapse group"}},t}(w.Component),mq=w.memo(function(e){return w.createElement(uH,{theme:e.theme,checked:e.checked,className:e.className,useFastIcons:!0})}),pq=PB(dq,function(e){var t,r,i,n,o,s=e.theme,a=e.className,l=e.selected,c=e.isCollapsed,u=e.compact,d=pH.cellLeftPadding,m=u?40:48,p=s.semanticColors,h=s.palette,f=s.fonts,g=EP(iq,s),v=[DP(s),{cursor:"default",background:"none",backgroundColor:"transparent",border:"none",padding:0}];return{root:[g.root,DP(s),s.fonts.medium,{borderBottom:"1px solid ".concat(p.listBackground),cursor:"default",userSelect:"none",selectors:(t={":hover":{background:p.listItemBackgroundHovered,color:p.actionLinkHovered}},t["&:hover .".concat(g.check)]={opacity:1},t[".".concat(OP," &:focus .").concat(g.check,", :host(.").concat(OP,") &:focus .").concat(g.check)]={opacity:1},t[":global(.".concat(g.group,".").concat(g.isDropping,")")]={selectors:(r={},r["& > .".concat(g.root," .").concat(g.dropIcon)]={transition:"transform ".concat(dP," ").concat("cubic-bezier(0.075, 0.820, 0.165, 1.000)"," ")+"opacity ".concat(lP," ").concat(nq),transitionDelay:uP,opacity:1,transform:"rotate(0.2deg) scale(1);"},r[".".concat(g.check)]={opacity:0},r)},t)},l&&[g.isSelected,{background:p.listItemBackgroundChecked,selectors:(i={":hover":{background:p.listItemBackgroundCheckedHovered}},i["".concat(g.check)]={opacity:1},i)}],u&&[g.compact,{border:"none"}],a],groupHeaderContainer:[{display:"flex",alignItems:"center",height:m}],headerCount:[{padding:"0px 4px"}],check:[g.check,v,{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:1,marginTop:-1,opacity:0,width:48,height:m,selectors:(n={},n[".".concat(OP," &:focus, :host(.").concat(OP,") &:focus")]={opacity:1},n)}],expand:[g.expand,v,{display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",fontSize:f.small.fontSize,width:36,height:m,color:l?h.neutralPrimary:h.neutralSecondary,selectors:{":hover":{backgroundColor:l?h.neutralQuaternary:h.neutralLight},":active":{backgroundColor:l?h.neutralTertiaryAlt:h.neutralQuaternaryAlt}}}],expandIsCollapsed:[c?[g.isCollapsed,{transform:"rotate(0deg)",transformOrigin:"50% 50%",transition:"transform .1s linear"}]:{transform:gR(s)?"rotate(-90deg)":"rotate(90deg)",transformOrigin:"50% 50%",transition:"transform .1s linear"}],title:[g.title,{paddingLeft:d,fontSize:u?f.medium.fontSize:f.mediumPlus.fontSize,fontWeight:c?xP.regular:xP.semibold,cursor:"pointer",outline:0,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}],dropIcon:[g.dropIcon,{position:"absolute",left:-26,fontSize:wP.large,color:h.neutralSecondary,transition:"transform ".concat(cP," ").concat("cubic-bezier(0.600, -0.280, 0.735, 0.045)",", ")+"opacity ".concat(dP," ").concat(nq),opacity:0,transform:"rotate(0.2deg) scale(0.65)",transformOrigin:"10px 10px",selectors:(o={},o[":global(.".concat(g.iconTag,")")]={position:"absolute"},o)}]}},void 0,{scope:"GroupHeader"}),hq={root:"ms-GroupShowAll",link:"ms-Link"},fq=LB(),gq=function(e,t){t.as;var r=t.disabled,i=t.target,n=t.href,o=(t.theme,t.getStyles,t.styles,t.componentRef,t.underline,nN(t,["as","disabled","target","href","theme","getStyles","styles","componentRef","underline"]));return"string"==typeof e?"a"===e?iN({target:i,href:r?void 0:n},o):"button"===e?iN({type:"button",disabled:r},o):iN(iN({},o),{disabled:r}):iN({target:i,href:n,disabled:r},o)},vq=w.forwardRef(function(e,t){var r=function(e,t){var r=e.as,i=e.className,n=e.disabled,o=e.href,s=e.onClick,a=e.styles,l=e.theme,c=e.underline,u=w.useRef(null),d=$B(u,t);(function(e,t){w.useImperativeHandle(e.componentRef,function(){return{focus:function(){t.current&&t.current.focus()}}},[t])})(e,u),WM(u);var m=fq(a,{className:i,isButton:!o,isDisabled:n,isUnderlined:c,theme:l}),p=r||(o?"a":"button");return{state:{},slots:{root:p},slotProps:{root:iN(iN({},gq(p,e)),{"aria-disabled":n,className:m.root,onClick:function(e){n?e.preventDefault():s&&s(e)},ref:d})}}}(e,t),i=r.slots,n=r.slotProps;return w.createElement(i.root,iN({},n.root))});vq.displayName="LinkBase";var bq=PB(vq,function(e){var t,r,i,n,o,s,a,l=e.className,c=e.isButton,u=e.isDisabled,d=e.isUnderlined,m=e.theme,p=m.semanticColors,h=p.link,f=p.linkHovered,g=p.disabledText,v=p.focusBorder,b=EP(dH,m);return{root:[b.root,m.fonts.medium,{color:h,outline:"none",fontSize:"inherit",fontWeight:"inherit",textDecoration:d?"underline":"none",selectors:(t={},t[".".concat(OP," &:focus, :host(.").concat(OP,") &:focus")]={boxShadow:"0 0 0 1px ".concat(v," inset"),outline:"1px auto ".concat(v),selectors:(r={},r[SP]={outline:"1px solid WindowText"},r)},t[SP]={borderBottom:"none"},t)},c&&{background:"none",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"inline",margin:0,overflow:"inherit",padding:0,textAlign:"left",textOverflow:"inherit",userSelect:"text",borderBottom:"1px solid transparent",selectors:(i={},i[SP]={color:"LinkText",forcedColorAdjust:"none"},i)},!c&&{selectors:(n={},n[SP]={MsHighContrastAdjust:"auto",forcedColorAdjust:"auto"},n)},u&&["is-disabled",{color:g,cursor:"default"},{selectors:(o={"&:link, &:visited":{pointerEvents:"none"}},o[SP]={color:"GrayText"},o)}],!u&&{selectors:{"&:active, &:hover, &:active:hover":{color:f,textDecoration:"underline",selectors:(s={},s[SP]={color:"LinkText"},s)},"&:focus":{color:h,selectors:(a={},a[SP]={color:"LinkText"},a)}}},b.root,l]}},void 0,{scope:"Link"}),yq=LB(),_q=PB(function(e){var t=e.group,r=e.groupLevel,i=e.showAllLinkText,n=void 0===i?"Show All":i,o=e.styles,s=e.theme,a=e.onToggleSummarize,l=yq(o,{theme:s}),c=w.useCallback(function(e){a(t),e.stopPropagation(),e.preventDefault()},[a,t]);return t?w.createElement("div",{className:l.root},w.createElement(iH,{count:r}),w.createElement(bq,{onClick:c},n)):null},function(e){var t,r=e.theme,i=r.fonts,n=EP(hq,r);return{root:[n.root,{position:"relative",padding:"10px 84px",cursor:"pointer",selectors:(t={},t[".".concat(n.link)]={fontSize:i.small.fontSize},t)}]}},void 0,{scope:"GroupShowAll"}),xq={root:"ms-groupFooter"},wq=LB(),Cq=PB(function(e){var t=e.group,r=e.groupLevel,i=e.footerText,n=e.indentWidth,o=e.styles,s=e.theme,a=wq(o,{theme:s});return t&&i?w.createElement("div",{className:a.root},w.createElement(iH,{indentWidth:n,count:r}),i):null},function(e){var t=e.theme,r=e.className,i=EP(xq,t);return{root:[t.fonts.medium,i.root,{position:"relative",padding:"5px 38px"},r]}},void 0,{scope:"GroupFooter"}),kq=function(e){if(void 0===e)return 0;var t=0;return"scrollTop"in e?t=e.scrollTop:"scrollY"in e&&(t=e.scrollY),Math.ceil(t)},Tq=function(e,t){"scrollTop"in e?e.scrollTop=t:"scrollY"in e&&e.scrollTo(e.scrollX,t)},Eq="spacer-",Sq=1/3,Iq={top:-1,bottom:-1,left:-1,right:-1,width:0,height:0},Aq=function(e){return e.getBoundingClientRect()},Oq=Aq,Nq=Aq,Rq=function(e){function t(t){var r=e.call(this,t)||this;return r._root=w.createRef(),r._surface=w.createRef(),r._pageRefs={},r._getDerivedStateFromProps=function(e,t){return e.items!==r.props.items||e.renderCount!==r.props.renderCount||e.startIndex!==r.props.startIndex||e.version!==r.props.version||!t.hasMounted&&r.props.renderEarly&&cR()?(r._resetRequiredWindows(),r._requiredRect=null,r._measureVersion++,r._invalidatePageCache(),r._updatePages(e,t)):t},r._onRenderRoot=function(e){var t=e.rootRef,r=e.surfaceElement,i=e.divProps;return w.createElement("div",iN({ref:t},i),r)},r._onRenderSurface=function(e){var t=e.surfaceRef,r=e.pageElements,i=e.divProps;return w.createElement("div",iN({ref:t},i),r)},r._onRenderPage=function(e,t){for(var i,n=r.props,o=n.onRenderCell,s=n.onRenderCellConditional,a=n.role,l=e.page,c=l.items,u=void 0===c?[]:c,d=l.startIndex,m=nN(e,["page"]),p=void 0===a?"listitem":"presentation",h=[],f=0;f<u.length;f++){var g=d+f,v=u[f],b=r.props.getKey?r.props.getKey(v,g):v&&v.key;null==b&&(b=g);var y=null!=s?s:o,_=null!==(i=null==y?void 0:y(v,g,r.props.ignoreScrollingState?void 0:r.state.isScrolling))&&void 0!==i?i:null;s&&!_||h.push(w.createElement("div",{role:p,className:"ms-List-cell",key:b,"data-list-index":g,"data-automationid":"ListCell"},_))}return w.createElement("div",iN({},m),h)},lM(r),r.state={pages:[],isScrolling:!1,getDerivedStateFromProps:r._getDerivedStateFromProps,hasMounted:!1},r._estimatedPageHeight=0,r._totalEstimates=0,r._requiredWindowsAhead=0,r._requiredWindowsBehind=0,r._measureVersion=0,r._cachedPageHeights={},r._estimatedPageHeight=0,r._focusedIndex=-1,r._pageCache={},r}return rN(t,e),t.getDerivedStateFromProps=function(e,t){return t.getDerivedStateFromProps(e,t)},Object.defineProperty(t.prototype,"pageRefs",{get:function(){return this._pageRefs},enumerable:!1,configurable:!0}),t.prototype.scrollToIndex=function(e,t,r){void 0===r&&(r=0);for(var i=this.props.startIndex,n=i+this._getRenderCount(),o=this._allowedRect,s=0,a=1,l=i;l<n;l+=a){var c=this._getPageSpecification(this.props,l,o),u=c.height;if(a=c.itemCount,l<=e&&l+a>e){if(t&&this._scrollElement){for(var d=Nq(this._scrollElement),m=kq(this._scrollElement),p={top:m,bottom:m+d.height},h=e-l,f=0;f<h;++f)s+=t(l+f);var g=s+t(e);switch(r){case 1:return void Tq(this._scrollElement,s);case 2:return void Tq(this._scrollElement,g-d.height);case 3:return void Tq(this._scrollElement,(s+g-d.height)/2)}if(s>=p.top&&g<=p.bottom)return;s<p.top||g>p.bottom&&(s=g-d.height)}return void(this._scrollElement&&Tq(this._scrollElement,s))}s+=u}},t.prototype.getStartItemIndexInView=function(e){for(var t=0,r=this.state.pages||[];t<r.length;t++){var i=r[t];if(!i.isSpacer&&(this._scrollTop||0)>=i.top&&(this._scrollTop||0)<=i.top+i.height){if(!e){var n=Math.floor(i.height/i.itemCount);return i.startIndex+Math.floor((this._scrollTop-i.top)/n)}for(var o=0,s=i.startIndex;s<i.startIndex+i.itemCount;s++){if(n=e(s),i.top+o<=this._scrollTop&&this._scrollTop<i.top+o+n)return s;o+=n}}}return 0},t.prototype.componentDidMount=function(){this._async=new hM(this),this._events=new BM(this),this._onAsyncScrollDebounced=this._async.debounce(this._onAsyncScroll,100,{leading:!1,maxWait:500}),this._onAsyncIdleDebounced=this._async.debounce(this._onAsyncIdle,200,{leading:!1}),this._onAsyncResizeDebounced=this._async.debounce(this._onAsyncResize,16,{leading:!1}),this._onScrollingDoneDebounced=this._async.debounce(this._onScrollingDone,500,{leading:!1}),this._scrollElement=yL(this._root.current),this._scrollTop=0,this.setState(iN(iN({},this._updatePages(this.props,this.state)),{hasMounted:!0})),this._measureVersion++;var e=function(e){var t;return null!==(t=null==e?void 0:e.window)&&void 0!==t?t:"undefined"!=typeof window?window:void 0}(this.context);this._events.on(e,"resize",this._onAsyncResizeDebounced),this._root.current&&this._events.on(this._root.current,"focus",this._onFocus,!0),this._scrollElement&&(this._events.on(this._scrollElement,"scroll",this._onScroll),this._events.on(this._scrollElement,"scroll",this._onAsyncScrollDebounced))},t.prototype.componentDidUpdate=function(e,t){var r=this.props,i=this.state;this.state.pagesVersion!==t.pagesVersion&&(r.getPageHeight?this._onAsyncIdleDebounced():this._updatePageMeasurements(i.pages)?(this._materializedRect=null,this._hasCompletedFirstRender?this._onAsyncScrollDebounced():(this._hasCompletedFirstRender=!0,this.setState(this._updatePages(r,i)))):this._onAsyncIdleDebounced(),r.onPagesUpdated&&r.onPagesUpdated(i.pages))},t.prototype.componentWillUnmount=function(){var e,t;null===(e=this._async)||void 0===e||e.dispose(),null===(t=this._events)||void 0===t||t.dispose(),delete this._scrollElement},t.prototype.shouldComponentUpdate=function(e,t){var r=this.state.pages,i=t.pages,n=!1;if(!t.isScrolling&&this.state.isScrolling)return!0;if(e.version!==this.props.version)return!0;if(e.className!==this.props.className)return!0;if(e.items===this.props.items&&r.length===i.length)for(var o=0;o<r.length;o++){var s=r[o],a=i[o];if(s.key!==a.key||s.itemCount!==a.itemCount){n=!0;break}}else n=!0;return n},t.prototype.forceUpdate=function(){this._invalidatePageCache(),this._updateRenderRects(this.props,this.state,!0),this.setState(this._updatePages(this.props,this.state)),this._measureVersion++,e.prototype.forceUpdate.call(this)},t.prototype.getTotalListHeight=function(){return this._surfaceRect.height},t.prototype.render=function(){for(var e=this.props,t=e.className,r=e.role,i=void 0===r?"list":r,n=e.onRenderSurface,o=e.onRenderRoot,s=this.state.pages,a=void 0===s?[]:s,l=[],c=gB(this.props,fB),u=0,d=a;u<d.length;u++){var m=d[u];l.push(this._renderPage(m))}var p=n?tL(n,this._onRenderSurface):this._onRenderSurface;return(o?tL(o,this._onRenderRoot):this._onRenderRoot)({rootRef:this._root,pages:a,surfaceElement:p({surfaceRef:this._surface,pages:a,pageElements:l,divProps:{role:"presentation",className:"ms-List-surface"}}),divProps:iN(iN({},c),{className:vB("ms-List",t),role:l.length>0?i:void 0,"aria-label":l.length>0?c["aria-label"]:void 0})})},t.prototype._shouldVirtualize=function(e){void 0===e&&(e=this.props);var t=e.onShouldVirtualize;return!t||t(e)},t.prototype._invalidatePageCache=function(){this._pageCache={}},t.prototype._renderPage=function(e){var t,r=this,i=this.props.usePageCache;if(i&&(t=this._pageCache[e.key])&&t.pageElement)return t.pageElement;var n=this._getPageStyle(e),o=this.props.onRenderPage,s=(void 0===o?this._onRenderPage:o)({page:e,className:"ms-List-page",key:e.key,ref:function(t){r._pageRefs[e.key]=t},style:n,role:"presentation"},this._onRenderPage);return i&&0===e.startIndex&&(this._pageCache[e.key]={page:e,pageElement:s}),s},t.prototype._getPageStyle=function(e){var t=this.props.getPageStyle;return iN(iN({},t?t(e):{}),e.items?{}:{height:e.height})},t.prototype._onFocus=function(e){for(var t=e.target;t!==this._surface.current;){var r=t.getAttribute("data-list-index");if(r){this._focusedIndex=Number(r);break}t=SM(t)}},t.prototype._onScroll=function(){this.state.isScrolling||this.props.ignoreScrollingState||this.setState({isScrolling:!0}),this._resetRequiredWindows(),this._onScrollingDoneDebounced()},t.prototype._resetRequiredWindows=function(){this._requiredWindowsAhead=0,this._requiredWindowsBehind=0},t.prototype._onAsyncScroll=function(){var e,t;this._updateRenderRects(this.props,this.state),this._materializedRect&&(e=this._requiredRect,t=this._materializedRect,e.top>=t.top&&e.left>=t.left&&e.bottom<=t.bottom&&e.right<=t.right)||this.setState(this._updatePages(this.props,this.state))},t.prototype._onAsyncIdle=function(){var e=this.props,t=e.renderedWindowsAhead,r=e.renderedWindowsBehind,i=this._requiredWindowsAhead,n=this._requiredWindowsBehind,o=Math.min(t,i+1),s=Math.min(r,n+1);o===i&&s===n||(this._requiredWindowsAhead=o,this._requiredWindowsBehind=s,this._updateRenderRects(this.props,this.state),this.setState(this._updatePages(this.props,this.state))),(t>o||r>s)&&this._onAsyncIdleDebounced()},t.prototype._onScrollingDone=function(){this.props.ignoreScrollingState||(this.setState({isScrolling:!1}),this._onAsyncIdle())},t.prototype._onAsyncResize=function(){this.forceUpdate()},t.prototype._updatePages=function(e,t){this._requiredRect||this._updateRenderRects(e,t);var r=this._buildPages(e,t),i=t.pages;return this._notifyPageChanges(i,r.pages,this.props),iN(iN(iN({},t),r),{pagesVersion:{}})},t.prototype._notifyPageChanges=function(e,t,r){var i=r.onPageAdded,n=r.onPageRemoved;if(i||n){for(var o={},s=0,a=e;s<a.length;s++)(u=a[s]).items&&(o[u.startIndex]=u);for(var l=0,c=t;l<c.length;l++){var u;(u=c[l]).items&&(o[u.startIndex]?delete o[u.startIndex]:this._onPageAdded(u))}for(var d in o)o.hasOwnProperty(d)&&this._onPageRemoved(o[d])}},t.prototype._updatePageMeasurements=function(e){var t=!1;if(!this._shouldVirtualize())return t;for(var r=0;r<e.length;r++){var i=e[r];i.items&&(t=this._measurePage(i)||t)}return t},t.prototype._measurePage=function(e){var t=!1,r=this._pageRefs[e.key],i=this._cachedPageHeights[e.startIndex];if(r&&this._shouldVirtualize()&&(!i||i.measureVersion!==this._measureVersion)){var n={width:r.clientWidth,height:r.clientHeight};(n.height||n.width)&&(t=e.height!==n.height,e.height=n.height,this._cachedPageHeights[e.startIndex]={height:n.height,measureVersion:this._measureVersion},this._estimatedPageHeight=Math.round((this._estimatedPageHeight*this._totalEstimates+n.height)/(this._totalEstimates+1)),this._totalEstimates++)}return t},t.prototype._onPageAdded=function(e){var t=this.props.onPageAdded;t&&t(e)},t.prototype._onPageRemoved=function(e){var t=this.props.onPageRemoved;t&&t(e)},t.prototype._buildPages=function(e,t){var r=e.renderCount,i=e.items,n=e.startIndex,o=e.getPageHeight;r=this._getRenderCount(e);for(var s=iN({},Iq),a=[],l=1,c=0,u=null,d=this._focusedIndex,m=n+r,p=this._shouldVirtualize(e),h=0===this._estimatedPageHeight&&!o,f=this._allowedRect,g=function(r){var o=v._getPageSpecification(e,r,f),g=o.height,b=o.data,y=o.key;l=o.itemCount;var _,x,w=c+g-1,C=function(e,t,r){void 0===r&&(r=0);for(var i=-1,n=r;e&&n<e.length;n++)if(t(e[n],n)){i=n;break}return i}(t.pages,function(e){return!!e.items&&e.startIndex===r})>-1,k=!f||w>=f.top&&c<=f.bottom,T=!v._requiredRect||w>=v._requiredRect.top&&c<=v._requiredRect.bottom;if(!h&&(T||k&&C)||!p||d>=r&&d<r+l||r===n){u&&(a.push(u),u=null);var E=Math.min(l,m-r),S=v._createPage(y,i.slice(r,r+E),r,void 0,void 0,b);S.top=c,S.height=g,v._visibleRect&&v._visibleRect.bottom&&(S.isVisible=w>=v._visibleRect.top&&c<=v._visibleRect.bottom),a.push(S),T&&v._allowedRect&&(_=s,x={top:c,bottom:w,height:g,left:f.left,right:f.right,width:f.width},_.top=x.top<_.top||-1===_.top?x.top:_.top,_.left=x.left<_.left||-1===_.left?x.left:_.left,_.bottom=x.bottom>_.bottom||-1===_.bottom?x.bottom:_.bottom,_.right=x.right>_.right||-1===_.right?x.right:_.right,_.width=_.right-_.left+1,_.height=_.bottom-_.top+1)}else u||(u=v._createPage(Eq+r,void 0,r,0,void 0,b,!0)),u.height=(u.height||0)+(w-c)+1,u.itemCount+=l;if(c+=w-c+1,h&&p)return"break"},v=this,b=n;b<m&&"break"!==g(b);b+=l);return u&&(u.key=Eq+"end",a.push(u)),this._materializedRect=s,iN(iN({},t),{pages:a,measureVersion:this._measureVersion})},t.prototype._getPageSpecification=function(e,t,r){var i=e.getPageSpecification;if(i){var n=i(t,r,e.items),o=n.itemCount,s=void 0===o?this._getItemCountForPage(t,r):o,a=n.height;return{itemCount:s,height:void 0===a?this._getPageHeight(t,r,s):a,data:n.data,key:n.key}}return{itemCount:s=this._getItemCountForPage(t,r),height:this._getPageHeight(t,r,s)}},t.prototype._getPageHeight=function(e,t,r){if(this.props.getPageHeight)return this.props.getPageHeight(e,t,r,this.props.items);var i=this._cachedPageHeights[e];return i?i.height:this._estimatedPageHeight||30},t.prototype._getItemCountForPage=function(e,t){return(this.props.getItemCountForPage?this.props.getItemCountForPage(e,t):10)||10},t.prototype._createPage=function(e,t,r,i,n,o,s){void 0===r&&(r=-1),void 0===i&&(i=t?t.length:0),void 0===n&&(n={}),e=e||"page-"+r;var a=this._pageCache[e];return a&&a.page?a.page:{key:e,startIndex:r,itemCount:i,items:t,style:n,top:0,height:0,data:o,isSpacer:s||!1}},t.prototype._getRenderCount=function(e){var t=e||this.props,r=t.items,i=t.startIndex,n=t.renderCount;return void 0===n?r?r.length-i:0:n},t.prototype._updateRenderRects=function(e,t,r){var i=e.renderedWindowsAhead,n=e.renderedWindowsBehind,o=t.pages;if(this._shouldVirtualize(e)){var s=this._surfaceRect||iN({},Iq),a=function(e){if(void 0===e)return 0;var t=0;return"scrollHeight"in e?t=e.scrollHeight:"document"in e&&(t=e.document.documentElement.scrollHeight),t}(this._scrollElement),l=kq(this._scrollElement);this._surface.current&&(r||!o||!this._surfaceRect||!a||a!==this._scrollHeight||Math.abs(this._scrollTop-l)>this._estimatedPageHeight*Sq)&&(s=this._surfaceRect=Oq(this._surface.current),this._scrollTop=l),!r&&a&&a===this._scrollHeight||this._measureVersion++,this._scrollHeight=a||0;var c=Math.max(0,-s.top),u=mR(this._root.current),d={top:c,left:s.left,bottom:c+u.innerHeight,right:s.right,width:s.width,height:u.innerHeight};this._requiredRect=Pq(d,this._requiredWindowsBehind,this._requiredWindowsAhead),this._allowedRect=Pq(d,n,i),this._visibleRect=d}},t.defaultProps={startIndex:0,onRenderCell:function(e,t,r){return w.createElement(w.Fragment,null,e&&e.name||"")},onRenderCellConditional:void 0,renderedWindowsAhead:2,renderedWindowsBehind:2},t.contextType=Sz,t}(w.Component);function Pq(e,t,r){var i=e.top-t*e.height,n=e.height+(t+r)*e.height;return{top:i,bottom:i+n,height:n,left:e.left,right:e.right,width:e.width}}var Dq=function(e){function t(r){var i=e.call(this,r)||this;i._root=w.createRef(),i._list=w.createRef(),i._subGroupRefs={},i._droppingClassName="",i._onRenderGroupHeader=function(e){return w.createElement(pq,iN({},e))},i._onRenderGroupShowAll=function(e){return w.createElement(_q,iN({},e))},i._onRenderGroupFooter=function(e){return w.createElement(Cq,iN({},e))},i._renderSubGroup=function(e,r){var n=i.props,o=n.dragDropEvents,s=n.dragDropHelper,a=n.eventsToRegister,l=n.getGroupItemLimit,c=n.groupNestingDepth,u=n.groupProps,d=n.items,m=n.headerProps,p=n.showAllProps,h=n.footerProps,f=n.listProps,g=n.onRenderCell,v=n.selection,b=n.selectionMode,y=n.viewport,_=n.onRenderGroupHeader,x=n.onRenderGroupShowAll,C=n.onRenderGroupFooter,k=n.onShouldVirtualize,T=n.group,E=n.compact,S=e.level?e.level+1:c;return!e||e.count>0||u&&u.showEmptyGroups?w.createElement(t,{ref:function(e){return i._subGroupRefs["subGroup_"+r]=e},key:i._getGroupKey(e,r),dragDropEvents:o,dragDropHelper:s,eventsToRegister:a,footerProps:h,getGroupItemLimit:l,group:e,groupIndex:r,groupNestingDepth:S,groupProps:u,headerProps:m,items:d,listProps:f,onRenderCell:g,selection:v,selectionMode:b,showAllProps:p,viewport:y,onRenderGroupHeader:_,onRenderGroupShowAll:x,onRenderGroupFooter:C,onShouldVirtualize:k,groups:T?T.children:[],compact:E}):null},i._getGroupDragDropOptions=function(){var e=i.props,t=e.group,r=e.groupIndex,n=e.dragDropEvents;return{eventMap:e.eventsToRegister,selectionIndex:-1,context:{data:t,index:r,isGroup:!0},updateDropState:i._updateDroppingState,canDrag:n.canDrag,canDrop:n.canDrop,onDrop:n.onDrop,onDragStart:n.onDragStart,onDragEnter:n.onDragEnter,onDragLeave:n.onDragLeave,onDragEnd:n.onDragEnd,onDragOver:n.onDragOver}},i._updateDroppingState=function(e,t){var r=i.state.isDropping,n=i.props,o=n.dragDropEvents,s=n.group;r!==e&&(r?o&&o.onDragLeave&&o.onDragLeave(s,t):o&&o.onDragEnter&&(i._droppingClassName=o.onDragEnter(s,t)),i.setState({isDropping:e}))};var n=r.selection,o=r.group;return lM(i),i._id=qD("GroupedListSection"),i.state={isDropping:!1,isSelected:!(!n||!o)&&n.isRangeSelected(o.startIndex,o.count)},i._events=new BM(i),i}return rN(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.dragDropHelper,r=e.selection;t&&this._root.current&&(this._dragDropSubscription=t.subscribe(this._root.current,this._events,this._getGroupDragDropOptions())),r&&this._events.on(r,yH,this._onSelectionChange)},t.prototype.componentWillUnmount=function(){this._events.dispose(),this._dragDropSubscription&&this._dragDropSubscription.dispose()},t.prototype.componentDidUpdate=function(e){this.props.group===e.group&&this.props.groupIndex===e.groupIndex&&this.props.dragDropHelper===e.dragDropHelper||(this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this.props.dragDropHelper&&this._root.current&&(this._dragDropSubscription=this.props.dragDropHelper.subscribe(this._root.current,this._events,this._getGroupDragDropOptions())))},t.prototype.render=function(){var e=this.props,t=e.getGroupItemLimit,r=e.group,i=e.groupIndex,n=e.headerProps,o=e.showAllProps,s=e.footerProps,a=e.viewport,l=e.selectionMode,c=e.onRenderGroupHeader,u=void 0===c?this._onRenderGroupHeader:c,d=e.onRenderGroupShowAll,m=void 0===d?this._onRenderGroupShowAll:d,p=e.onRenderGroupFooter,h=void 0===p?this._onRenderGroupFooter:p,f=e.onShouldVirtualize,g=e.groupedListClassNames,v=e.groups,b=e.compact,y=e.listProps,_=void 0===y?{}:y,x=this.state.isSelected,C=r&&t?t(r):1/0,k=r&&!r.children&&!r.isCollapsed&&!r.isShowingAll&&(r.count>C||r.hasMoreData),T=r&&r.children&&r.children.length>0,E=_.version,S={group:r,groupIndex:i,groupLevel:r?r.level:0,isSelected:x,selected:x,viewport:a,selectionMode:l,groups:v,compact:b},I={groupedListId:this._id,ariaLevel:(null==r?void 0:r.level)?r.level+1:1,ariaSetSize:v?v.length:void 0,ariaPosInSet:void 0!==i?i+1:void 0},A=iN(iN(iN({},n),S),I),O=iN(iN({},o),S),N=iN(iN({},s),S),R=!!this.props.dragDropHelper&&this._getGroupDragDropOptions().canDrag(r)&&!!this.props.dragDropEvents.canDragGroups;return w.createElement("div",iN({ref:this._root},R&&{draggable:!0},{className:vB(g&&g.group,this._getDroppingClassName()),role:"presentation"}),u(A,this._onRenderGroupHeader),r&&r.isCollapsed?null:T?w.createElement(Rq,{role:"presentation",ref:this._list,items:r?r.children:[],onRenderCell:this._renderSubGroup,getItemCountForPage:this._returnOne,onShouldVirtualize:f,version:E,id:this._id}):this._onRenderGroup(C),r&&r.isCollapsed?null:k&&m(O,this._onRenderGroupShowAll),h(N,this._onRenderGroupFooter))},t.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this.forceListUpdate()},t.prototype.forceListUpdate=function(){var e=this.props.group;if(this._list.current){if(this._list.current.forceUpdate(),e&&e.children&&e.children.length>0)for(var t=e.children.length,r=0;r<t;r++){var i;(i=this._list.current.pageRefs["subGroup_"+String(r)])&&i.forceListUpdate()}}else(i=this._subGroupRefs["subGroup_"+String(0)])&&i.forceListUpdate()},t.prototype._onSelectionChange=function(){var e=this.props,t=e.group,r=e.selection;if(r&&t){var i=r.isRangeSelected(t.startIndex,t.count);i!==this.state.isSelected&&this.setState({isSelected:i})}},t.prototype._onRenderGroupCell=function(e,t,r){return function(i,n){return e(t,i,n,r)}},t.prototype._onRenderGroup=function(e){var t=this.props,r=t.group,i=t.items,n=t.onRenderCell,o=t.listProps,s=t.groupNestingDepth,a=t.onShouldVirtualize,l=t.groupProps,c=r&&!r.isShowingAll?r.count:i.length,u=r?r.startIndex:0;return w.createElement(Rq,iN({role:l&&l.role?l.role:"rowgroup","aria-label":null==r?void 0:r.name,items:i,onRenderCell:this._onRenderGroupCell(n,s,r),ref:this._list,renderCount:Math.min(c,e),startIndex:u,onShouldVirtualize:a,id:this._id},o))},t.prototype._returnOne=function(){return 1},t.prototype._getGroupKey=function(e,t){return"group-"+(e&&e.key?e.key:String(e.level)+String(t))},t.prototype._getDroppingClassName=function(){var e=this.state.isDropping,t=this.props,r=t.group,i=t.groupedListClassNames;return vB((e=!(!r||!e))&&this._droppingClassName,e&&"is-dropping",e&&i&&i.groupIsDropping)},t}(w.Component),Bq=LB(),Mq=hH.rowHeight,Lq=hH.compactRowHeight,zq=function(e){function t(t){var r=e.call(this,t)||this;r._list=w.createRef(),r._renderGroup=function(e,t){var i=r.props,n=i.dragDropEvents,o=i.dragDropHelper,s=i.eventsToRegister,a=i.groupProps,l=i.items,c=i.listProps,u=i.onRenderCell,d=i.selectionMode,m=i.selection,p=i.viewport,h=i.onShouldVirtualize,f=i.groups,g=i.compact,v={onToggleSelectGroup:r._onToggleSelectGroup,onToggleCollapse:r._onToggleCollapse,onToggleSummarize:r._onToggleSummarize},b=iN(iN({},a.headerProps),v),y=iN(iN({},a.showAllProps),v),_=iN(iN({},a.footerProps),v),x=r._getGroupNestingDepth();if(!a.showEmptyGroups&&e&&0===e.count)return null;var C=iN(iN({},c||{}),{version:r.state.version});return w.createElement(Dq,{key:r._getGroupKey(e,t),dragDropEvents:n,dragDropHelper:o,eventsToRegister:s,footerProps:_,getGroupItemLimit:a&&a.getGroupItemLimit,group:e,groupIndex:t,groupNestingDepth:x,groupProps:a,headerProps:b,listProps:C,items:l,onRenderCell:u,onRenderGroupHeader:a.onRenderHeader,onRenderGroupShowAll:a.onRenderShowAll,onRenderGroupFooter:a.onRenderFooter,selectionMode:d,selection:m,showAllProps:y,viewport:p,onShouldVirtualize:h,groupedListClassNames:r._classNames,groups:f,compact:g})},r._getDefaultGroupItemLimit=function(e){return e.children&&e.children.length>0?e.children.length:e.count},r._getGroupItemLimit=function(e){var t=r.props.groupProps;return(t&&t.getGroupItemLimit?t.getGroupItemLimit:r._getDefaultGroupItemLimit)(e)},r._getGroupHeight=function(e){var t=r.props.compact?Lq:Mq;return t+(e.isCollapsed?0:t*r._getGroupItemLimit(e))},r._getPageHeight=function(e){var t=r.state.groups,i=r.props.getGroupHeight,n=void 0===i?r._getGroupHeight:i,o=t&&t[e];return o?n(o,e):0},r._onToggleCollapse=function(e){var t=r.props.groupProps,i=t&&t.headerProps&&t.headerProps.onToggleCollapse;e&&(i&&i(e),e.isCollapsed=!e.isCollapsed,r._updateIsSomeGroupExpanded(),r.forceUpdate())},r._onToggleSelectGroup=function(e){var t=r.props,i=t.selection,n=t.selectionMode;e&&i&&n===aH.multiple&&i.toggleRangeSelected(e.startIndex,e.count)},r._isInnerZoneKeystroke=function(e){return e.which===vR(aR)},r._onToggleSummarize=function(e){var t=r.props.groupProps,i=t&&t.showAllProps&&t.showAllProps.onToggleSummarize;i?i(e):(e&&(e.isShowingAll=!e.isShowingAll),r.forceUpdate())},r._getPageSpecification=function(e){var t=r.state.groups,i=t&&t[e];return{key:i&&i.key}},lM(r),r._isSomeGroupExpanded=r._computeIsSomeGroupExpanded(t.groups);var i=t.listProps,n=(void 0===i?{}:i).version,o=void 0===n?{}:n;return r.state={groups:t.groups,items:t.items,listProps:t.listProps,version:o},r}return rN(t,e),t.getDerivedStateFromProps=function(e,t){var r=e.groups,i=e.selectionMode,n=e.compact,o=e.items,s=e.listProps,a=s&&s.version,l=iN(iN({},t),{selectionMode:i,compact:n,groups:r,listProps:s,items:o}),c=!1;return a===(t.listProps&&t.listProps.version)&&o===t.items&&r===t.groups&&i===t.selectionMode&&n===t.compact||(c=!0),c&&(l=iN(iN({},l),{version:{}})),l},t.prototype.scrollToIndex=function(e,t,r){this._list.current&&this._list.current.scrollToIndex(e,t,r)},t.prototype.getStartItemIndexInView=function(){return this._list.current.getStartItemIndexInView()||0},t.prototype.componentDidMount=function(){var e=this.props,t=e.groupProps,r=e.groups,i=void 0===r?[]:r;t&&t.isAllGroupsCollapsed&&this._setGroupsCollapsedState(i,t.isAllGroupsCollapsed)},t.prototype.render=function(){var e=this.props,t=e.className,r=e.usePageCache,i=e.onShouldVirtualize,n=e.theme,o=e.role,s=void 0===o?"treegrid":o,a=e.styles,l=e.compact,c=e.focusZoneProps,u=void 0===c?{}:c,d=e.rootListProps,m=void 0===d?{}:d,p=this.state,h=p.groups,f=p.version;this._classNames=Bq(a,{theme:n,className:t,compact:l});var g=u.shouldEnterInnerZone,v=void 0===g?this._isInnerZoneKeystroke:g;return w.createElement(BL,iN({direction:rL.vertical,"data-automationid":"GroupedList","data-is-scrollable":"false",role:"presentation"},u,{shouldEnterInnerZone:v,className:vB(this._classNames.root,u.className)}),w.createElement(VM,null),h?w.createElement(Rq,iN({ref:this._list,role:s,items:h,onRenderCell:this._renderGroup,getItemCountForPage:this._returnOne,getPageHeight:this._getPageHeight,getPageSpecification:this._getPageSpecification,usePageCache:r,onShouldVirtualize:i,version:f},m)):this._renderGroup(void 0,0))},t.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this._forceListUpdates()},t.prototype.toggleCollapseAll=function(e){var t=this.state.groups,r=void 0===t?[]:t,i=this.props.groupProps,n=i&&i.onToggleCollapseAll;r.length>0&&(n&&n(e),this._setGroupsCollapsedState(r,e),this._updateIsSomeGroupExpanded(),this.forceUpdate())},t.prototype._setGroupsCollapsedState=function(e,t){for(var r=0;r<e.length;r++)e[r].isCollapsed=t},t.prototype._returnOne=function(){return 1},t.prototype._getGroupKey=function(e,t){return"group-"+(e&&e.key?e.key:String(t))},t.prototype._getGroupNestingDepth=function(){for(var e=0,t=this.state.groups;t&&t.length>0;)e++,t=t[0].children;return e},t.prototype._forceListUpdates=function(e){this.setState({version:{}})},t.prototype._computeIsSomeGroupExpanded=function(e){var t=this;return!(!e||!e.some(function(e){return e.children?t._computeIsSomeGroupExpanded(e.children):!e.isCollapsed}))},t.prototype._updateIsSomeGroupExpanded=function(){var e=this.state.groups,t=this.props.onGroupExpandStateChanged,r=this._computeIsSomeGroupExpanded(e);this._isSomeGroupExpanded!==r&&(t&&t(r),this._isSomeGroupExpanded=r)},t.defaultProps={selectionMode:aH.multiple,isHeaderVisible:!0,groupProps:{},compact:!1},t}(w.Component),Fq=PB(zq,function(e){var t,r,i=e.theme,n=e.className,o=e.compact,s=i.palette,a=EP(rq,i);return{root:[a.root,i.fonts.small,{position:"relative",selectors:(t={},t[".".concat(a.listCell)]={minHeight:38},t)},o&&[a.compact,{selectors:(r={},r[".".concat(a.listCell)]={minHeight:32},r)}],n],group:[a.group,{transition:"background-color ".concat(cP," ").concat("cubic-bezier(0.445, 0.050, 0.550, 0.950)")}],groupIsDropping:{backgroundColor:s.neutralLight}}},void 0,{scope:"GroupedList"});function jq(e,t){var r,i=(null!=t?t:!e||e&&e.hasOwnProperty("devicePixelRatio"))?mR():mR(e);return e&&(e===i?r={left:0,top:0,width:i.innerWidth,height:i.innerHeight,right:i.innerWidth,bottom:i.innerHeight}:e.getBoundingClientRect&&(r=e.getBoundingClientRect())),r}function Hq(e){return function(t){function r(e){var r=t.call(this,e)||this;return r._root=w.createRef(),r._registerResizeObserver=function(){var e=mR(r._root.current);r._viewportResizeObserver=new e.ResizeObserver(r._onAsyncResize),r._viewportResizeObserver.observe(r._root.current)},r._unregisterResizeObserver=function(){r._viewportResizeObserver&&(r._viewportResizeObserver.disconnect(),delete r._viewportResizeObserver)},r._updateViewport=function(e){var t=r.state.viewport,i=r._root.current,n=mR(i),o=jq(yL(i),n),s=jq(i,n);((s&&s.width)!==t.width||(o&&o.height)!==t.height)&&r._resizeAttempts<3&&s&&o?(r._resizeAttempts++,r.setState({viewport:{width:s.width,height:o.height}},function(){r._updateViewport(e)})):(r._resizeAttempts=0,e&&r._composedComponentInstance&&r._composedComponentInstance.forceUpdate())},r._async=new hM(r),r._events=new BM(r),r._resizeAttempts=0,r.state={viewport:{width:0,height:0}},r}return rN(r,t),r.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.delayFirstMeasure,i=t.disableResizeObserver,n=t.skipViewportMeasures,o=mR(this._root.current);this._onAsyncResize=this._async.debounce(this._onAsyncResize,500,{leading:!1}),n||(!i&&this._isResizeObserverAvailable()?this._registerResizeObserver():this._events.on(o,"resize",this._onAsyncResize),r?this._async.setTimeout(function(){e._updateViewport()},500):this._updateViewport())},r.prototype.componentDidUpdate=function(e){var t=e.skipViewportMeasures,r=this.props,i=r.disableResizeObserver,n=r.skipViewportMeasures,o=mR(this._root.current);n!==t&&(n?(this._unregisterResizeObserver(),this._events.off(o,"resize",this._onAsyncResize)):(!i&&this._isResizeObserverAvailable()?this._viewportResizeObserver||this._registerResizeObserver():this._events.on(o,"resize",this._onAsyncResize),this._updateViewport()))},r.prototype.componentWillUnmount=function(){this._events.dispose(),this._async.dispose(),this._unregisterResizeObserver()},r.prototype.render=function(){var t=this.state.viewport,r=t.width>0&&t.height>0?t:void 0;return w.createElement("div",{className:"ms-Viewport",ref:this._root,style:{minWidth:1,minHeight:1}},w.createElement(e,iN({ref:this._updateComposedComponentRef,viewport:r},this.props)))},r.prototype.forceUpdate=function(){this._updateViewport(!0)},r.prototype._onAsyncResize=function(){this._updateViewport()},r.prototype._isResizeObserverAvailable=function(){var e=mR(this._root.current);return e&&e.ResizeObserver},r}(XF)}var qq=LB(),Uq=100,Gq={tabIndex:0},Wq={},Vq=function(e){var t=e.selection,r=e.ariaLabelForListHeader,i=e.ariaLabelForSelectAllCheckbox,n=e.ariaLabelForSelectionColumn,o=e.className,s=e.checkboxVisibility,a=e.compact,l=e.constrainMode,c=e.dragDropEvents,u=e.groups,d=e.groupProps,m=e.indentWidth,p=e.items,h=e.isPlaceholderData,f=e.isHeaderVisible,g=e.layoutMode,v=e.onItemInvoked,b=e.onItemContextMenu,y=e.onColumnHeaderClick,_=e.onColumnHeaderContextMenu,x=e.selectionMode,C=void 0===x?t.mode:x,k=e.selectionPreservedOnEmptyClick,T=e.selectionZoneProps,E=e.ariaLabel,S=e.ariaLabelForGrid,I=e.rowElementEventMap,A=e.shouldApplyApplicationRole,O=void 0!==A&&A,N=e.getKey,R=e.listProps,P=e.usePageCache,D=e.onShouldVirtualize,B=e.viewport,M=e.minimumPixelsForDrag,L=e.getGroupHeight,z=e.styles,F=e.theme,j=e.cellStyleProps,H=void 0===j?pH:j,q=e.onRenderCheckbox,U=e.useFastIcons,G=e.dragDropHelper,W=e.adjustedColumns,V=e.isCollapsed,K=e.isSizing,$=e.isSomeGroupExpanded,Y=e.version,J=e.rootRef,X=e.listRef,Z=e.focusZoneRef,Q=e.columnReorderOptions,ee=e.groupedListRef,te=e.headerRef,re=e.onGroupExpandStateChanged,ie=e.onColumnIsSizingChanged,ne=e.onRowDidMount,oe=e.onRowWillUnmount,se=e.disableSelectionZone,ae=e.isSelectedOnFocus,le=void 0===ae||ae,ce=e.onColumnResized,ue=e.onColumnAutoResized,de=e.onToggleCollapse,me=e.onActiveRowChanged,pe=e.onBlur,he=e.rowElementEventMap,fe=e.onRenderMissingItem,ge=e.onRenderItemColumn,ve=e.onRenderField,be=e.getCellValueKey,ye=e.getRowAriaLabel,_e=e.getRowAriaDescribedBy,xe=e.checkButtonAriaLabel,we=e.checkButtonGroupAriaLabel,Ce=e.checkboxCellClassName,ke=e.useReducedRowRenderer,Te=e.enableUpdateAnimations,Ee=e.enterModalSelectionOnTouch,Se=e.onRenderDefaultRow,Ie=e.selectionZoneRef,Ae=e.focusZoneProps,Oe="grid",Ne=e.role?e.role:Oe,Re=qD("row"),Pe=function(e){for(var t=0,r=e;r&&r.length>0;)t++,r=r[0].children;return t}(u),De=function(e){return w.useMemo(function(){var t={};if(e)for(var r=1,i=1,n=0,o=e;n<o.length;n++){var s=o[n];t[s.key]={numOfGroupHeadersBeforeItem:i,totalRowCount:r},i++,r+=s.count+1}return t},[e])}(u),Be=w.useMemo(function(){return iN({renderedWindowsAhead:K?0:2,renderedWindowsBehind:K?0:2,getKey:N,version:Y},R)},[K,N,Y,R]),Me=kH.none;if(C===aH.single&&(Me=kH.hidden),C===aH.multiple){var Le=d&&d.headerProps&&d.headerProps.isCollapsedGroupSelectVisible;void 0===Le&&(Le=!0),Me=Le||!u||$?kH.visible:kH.hidden}s===Wj.hidden&&(Me=kH.none);var ze=w.useCallback(function(e){return w.createElement(FH,iN({},e))},[]),Fe=w.useCallback(function(){return null},[]),je=e.onRenderDetailsHeader,He=w.useMemo(function(){return je?tL(je,ze):ze},[je,ze]),qe=e.onRenderDetailsFooter,Ue=w.useMemo(function(){return qe?tL(qe,Fe):Fe},[qe,Fe]),Ge=w.useMemo(function(){return{columns:W,groupNestingDepth:Pe,selection:t,selectionMode:C,viewport:B,checkboxVisibility:s,indentWidth:m,cellStyleProps:H}},[W,Pe,t,C,B,s,m,H]),We=Q&&Q.onDragEnd,Ve=w.useCallback(function(e,t){var r=e.dropLocation,i=Uj.outside;if(We){if(r&&r!==Uj.header)i=r;else if(J.current){var n=J.current.getBoundingClientRect();t.clientX>n.left&&t.clientX<n.right&&t.clientY>n.top&&t.clientY<n.bottom&&(i=Uj.surface)}We(i)}},[We,J]),Ke=w.useMemo(function(){if(Q)return iN(iN({},Q),{onColumnDragEnd:Ve})},[Q,Ve]),$e=(f?1:0)+(e.onRenderDetailsFooter?1:0)+function(e){var t=0;if(e)for(var r=sN([],e,!0),i=void 0;r&&r.length>0;)++t,(i=r.pop())&&i.children&&r.push.apply(r,i.children);return t}(u)+(p?p.length:0),Ye=(Me!==kH.none?1:0)+(W?W.length:0)+(u?1:0),Je=w.useMemo(function(){return qq(z,{theme:F,compact:a,isFixed:g===Gj.fixedColumns,isHorizontalConstrained:l===qj.horizontalConstrained,className:o})},[z,F,a,g,l,o]),Xe=d&&d.onRenderFooter,Ze=w.useMemo(function(){return Xe?function(e,r){return Xe(iN(iN({},e),{columns:W,groupNestingDepth:Pe,indentWidth:m,selection:t,selectionMode:C,viewport:B,checkboxVisibility:s,cellStyleProps:H}),r)}:void 0},[Xe,W,Pe,m,t,C,B,s,H]),Qe=d&&d.onRenderHeader,et=w.useMemo(function(){return Qe?function(e,r){var i,n,o=e.groupIndex,a=void 0!==o?null===(n=null===(i=e.groups)||void 0===i?void 0:i[o])||void 0===n?void 0:n.key:void 0,l=void 0!==a&&De[a]?De[a].totalRowCount:0;return Qe(iN(iN({},e),{columns:W,groupNestingDepth:Pe,indentWidth:m,selection:t,selectionMode:s!==Wj.hidden?C:aH.none,viewport:B,checkboxVisibility:s,cellStyleProps:H,ariaColSpan:W.length,ariaLevel:void 0,ariaPosInSet:void 0,ariaSetSize:void 0,ariaRowCount:void 0,ariaRowIndex:void 0!==o?l+(f?1:0):void 0}),r)}:function(e,t){var r,i,n=e.groupIndex,o=void 0!==n?null===(i=null===(r=e.groups)||void 0===r?void 0:r[n])||void 0===i?void 0:i.key:void 0,s=void 0!==o&&De[o]?De[o].totalRowCount:0;return t(iN(iN({},e),{ariaColSpan:W.length,ariaLevel:void 0,ariaPosInSet:void 0,ariaSetSize:void 0,ariaRowCount:void 0,ariaRowIndex:void 0!==n?s+(f?1:0):void 0}))}},[Qe,W,Pe,m,f,t,C,B,s,H,De]),tt=w.useMemo(function(){var e;return iN(iN({},d),{role:Ne===Oe?"rowgroup":"presentation",onRenderFooter:Ze,onRenderHeader:et,headerProps:iN(iN({},null==d?void 0:d.headerProps),{selectAllButtonProps:iN({"aria-label":we},null===(e=null==d?void 0:d.headerProps)||void 0===e?void 0:e.selectAllButtonProps)})})},[d,Ze,et,we,Ne]),rt=Nz(function(){return ZN(function(e){var t=0;return e.forEach(function(e){return t+=e.calculatedWidth||e.minWidth}),t})}),it=d&&d.collapseAllVisibility,nt=w.useMemo(function(){return rt(W)},[W,rt]),ot=w.useCallback(function(r,i,n,o){var l=e.onRenderRow?tL(e.onRenderRow,Se):Se,u=o?o.key:void 0,d=u&&De[u]?De[u].numOfGroupHeadersBeforeItem:0,p=Ne===Oe?void 0:"presentation",h=n>0?Wq:Gq,g={item:i,itemIndex:n,flatIndexOffset:(f?2:1)+d,compact:a,columns:W,groupNestingDepth:r,id:"".concat(Re,"-").concat(n),selectionMode:C,selection:t,onDidMount:ne,onWillUnmount:oe,onRenderItemColumn:ge,onRenderField:ve,getCellValueKey:be,eventsToRegister:he,dragDropEvents:c,dragDropHelper:G,viewport:B,checkboxVisibility:s,collapseAllVisibility:it,getRowAriaLabel:ye,getRowAriaDescribedBy:_e,checkButtonAriaLabel:xe,checkboxCellClassName:Ce,useReducedRowRenderer:ke,indentWidth:m,cellStyleProps:H,onRenderDetailsCheckbox:q,enableUpdateAnimations:Te,rowWidth:nt,useFastIcons:U,role:p,isGridRow:!0,focusZoneProps:h};return i?l(g):fe?fe(n,g):null},[a,W,C,t,Re,ne,oe,ge,ve,be,he,c,G,B,s,it,ye,_e,f,xe,Ce,ke,m,H,q,Te,U,Se,fe,e.onRenderRow,nt,Ne,De]),st=w.useCallback(function(e){return function(t,r){return ot(e,t,r)}},[ot]),at=w.useCallback(function(e){return e.which===vR(aR,F)},[F]),lt=iN(iN({},Ae),{componentRef:Ae&&Ae.componentRef?Ae.componentRef:Z,className:Ae&&Ae.className?vB(Je.focusZone,Ae.className):Je.focusZone,direction:Ae?Ae.direction:rL.vertical,shouldEnterInnerZone:Ae&&Ae.shouldEnterInnerZone?Ae.shouldEnterInnerZone:at,onActiveElementChanged:Ae&&Ae.onActiveElementChanged?Ae.onActiveElementChanged:me,shouldRaiseClicksOnEnter:!1,onBlur:Ae&&Ae.onBlur?Ae.onBlur:pe}),ct=u&&(null==d?void 0:d.groupedListAs)?qL(d.groupedListAs,Fq):Fq,ut=u?w.createElement(ct,{focusZoneProps:lt,componentRef:ee,groups:u,groupProps:tt,items:p,onRenderCell:ot,role:"presentation",selection:t,selectionMode:s!==Wj.hidden?C:aH.none,dragDropEvents:c,dragDropHelper:G,eventsToRegister:I,listProps:Be,onGroupExpandStateChanged:re,usePageCache:P,onShouldVirtualize:D,getGroupHeight:L,compact:a}):w.createElement(BL,iN({},lt),w.createElement(Rq,iN({ref:X,role:"presentation",items:p,onRenderCell:st(0),usePageCache:P,onShouldVirtualize:D},Be))),dt=w.useCallback(function(e){e.which===lR&&Z.current&&Z.current.focus()&&(le&&0===t.getSelectedIndices().length&&t.setIndexSelected(0,!0,!1),e.preventDefault(),e.stopPropagation())},[t,Z,le]),mt=w.useCallback(function(e){e.which!==sR||e.altKey||te.current&&te.current.focus()&&(e.preventDefault(),e.stopPropagation())},[te]);return w.createElement("div",iN({ref:J,className:Je.root,"data-automationid":"DetailsList","data-is-scrollable":"false"},O?{role:"application"}:{}),w.createElement(VM,null),w.createElement("div",{role:Ne,"aria-label":S||E,"aria-rowcount":h?0:$e,"aria-colcount":Ye,"aria-busy":h},w.createElement("div",{onKeyDown:dt,role:"presentation",className:Je.headerWrapper},f&&He({componentRef:te,selectionMode:C,layoutMode:g,selection:t,columns:W,onColumnClick:y,onColumnContextMenu:_,onColumnResized:ce,onColumnIsSizingChanged:ie,onColumnAutoResized:ue,groupNestingDepth:Pe,isAllCollapsed:V,onToggleCollapseAll:de,ariaLabel:r,ariaLabelForSelectAllCheckbox:i,ariaLabelForSelectionColumn:n,selectAllVisibility:Me,collapseAllVisibility:d&&d.collapseAllVisibility,viewport:B,columnReorderProps:Ke,minimumPixelsForDrag:M,cellStyleProps:H,checkboxVisibility:s,indentWidth:m,onRenderDetailsCheckbox:q,rowWidth:rt(W),useFastIcons:U},He)),w.createElement("div",{onKeyDown:mt,role:"presentation",className:Je.contentWrapper},se?ut:w.createElement(XH,iN({ref:Ie,selection:t,selectionPreservedOnEmptyClick:k,selectionMode:C,isSelectedOnFocus:le,selectionClearedOnEscapePress:le,toggleWithoutModifierPressed:!le,onItemInvoked:v,onItemContextMenu:b,enterModalOnTouch:Ee},T||{}),ut)),Ue(iN({},Ge))))},Kq=function(e){function t(t){var r=e.call(this,t)||this;return r._root=w.createRef(),r._header=w.createRef(),r._groupedList=w.createRef(),r._list=w.createRef(),r._focusZone=w.createRef(),r._selectionZone=w.createRef(),r._onRenderRow=function(e,t){return w.createElement(VH,iN({},e))},r._getDerivedStateFromProps=function(e,t){var i=r.props,n=i.checkboxVisibility,o=i.items,s=i.setKey,a=i.selectionMode,l=void 0===a?r._selection.mode:a,c=i.columns,u=i.viewport,d=i.compact,m=i.dragDropEvents,p=(r.props.groupProps||{}).isAllGroupsCollapsed,h=void 0===p?void 0:p,f=e.viewport&&e.viewport.width||0,g=u&&u.width||0,v=e.setKey!==s||void 0===e.setKey,b=!1;e.layoutMode!==r.props.layoutMode&&(b=!0);var y=t;return v&&(r._initialFocusedIndex=e.initialFocusedIndex,y=iN(iN({},y),{focusedItemIndex:void 0!==r._initialFocusedIndex?r._initialFocusedIndex:-1})),r.props.disableSelectionZone||e.items===o||r._selection.setItems(e.items,v),e.checkboxVisibility===n&&e.columns===c&&f===g&&e.compact===d||(b=!0),y=iN(iN({},y),r._adjustColumns(e,y,!0)),e.selectionMode!==l&&(b=!0),void 0===h&&e.groupProps&&void 0!==e.groupProps.isAllGroupsCollapsed&&(y=iN(iN({},y),{isCollapsed:e.groupProps.isAllGroupsCollapsed,isSomeGroupExpanded:!e.groupProps.isAllGroupsCollapsed})),e.dragDropEvents!==m&&(r._dragDropHelper&&r._dragDropHelper.dispose(),r._dragDropHelper=e.dragDropEvents?new EH({selection:r._selection,minimumPixelsForDrag:e.minimumPixelsForDrag}):void 0,b=!0),b&&(y=iN(iN({},y),{version:{}})),y},r._onGroupExpandStateChanged=function(e){r.setState({isSomeGroupExpanded:e})},r._onColumnIsSizingChanged=function(e,t){r.setState({isSizing:t})},r._onRowDidMount=function(e){var t=e.props,i=t.item,n=t.itemIndex,o=r._getItemKey(i,n);r._activeRows[o]=e,r._setFocusToRowIfPending(e);var s=r.props.onRowDidMount;s&&s(i,n)},r._onRowWillUnmount=function(e){var t=r.props.onRowWillUnmount,i=e.props,n=i.item,o=i.itemIndex,s=r._getItemKey(n,o);delete r._activeRows[s],t&&t(n,o)},r._onToggleCollapse=function(e){r.setState({isCollapsed:e}),r._groupedList.current&&r._groupedList.current.toggleCollapseAll(e)},r._onColumnResized=function(e,t,i){var n=Math.max(e.minWidth||Uq,t);r.props.onColumnResize&&r.props.onColumnResize(e,n,i),r._rememberCalculatedWidth(e,n),r.setState(iN(iN({},r._adjustColumns(r.props,r.state,!0,i)),{version:{}}))},r._onColumnAutoResized=function(e,t){var i=0,n=0,o=Object.keys(r._activeRows).length;for(var s in r._activeRows)r._activeRows.hasOwnProperty(s)&&r._activeRows[s].measureCell(t,function(s){i=Math.max(i,s),++n===o&&r._onColumnResized(e,i,t)})},r._onActiveRowChanged=function(e,t){var i=r.props,n=i.items,o=i.onActiveItemChanged;if(e&&e.getAttribute("data-item-index")){var s=Number(e.getAttribute("data-item-index"));s>=0&&(o&&o(n[s],s,t),r.setState({focusedItemIndex:s}))}},r._onBlur=function(e){r.setState({focusedItemIndex:-1})},lM(r),r._async=new hM(r),r._activeRows={},r._columnOverrides={},r.state={focusedItemIndex:-1,lastWidth:0,adjustedColumns:r._getAdjustedColumns(t,void 0),isSizing:!1,isCollapsed:t.groupProps&&t.groupProps.isAllGroupsCollapsed,isSomeGroupExpanded:t.groupProps&&!t.groupProps.isAllGroupsCollapsed,version:{},getDerivedStateFromProps:r._getDerivedStateFromProps},r._selection=t.selection||new ZH({onSelectionChanged:void 0,getKey:t.getKey,selectionMode:t.selectionMode}),r.props.disableSelectionZone||r._selection.setItems(t.items,!1),r._dragDropHelper=t.dragDropEvents?new EH({selection:r._selection,minimumPixelsForDrag:t.minimumPixelsForDrag}):void 0,r._initialFocusedIndex=t.initialFocusedIndex,r}return rN(t,e),t.getDerivedStateFromProps=function(e,t){return t.getDerivedStateFromProps(e,t)},t.prototype.scrollToIndex=function(e,t,r){this._list.current&&this._list.current.scrollToIndex(e,t,r),this._groupedList.current&&this._groupedList.current.scrollToIndex(e,t,r)},t.prototype.focusIndex=function(e,t,r,i){void 0===t&&(t=!1);var n=this.props.items[e];if(n){this.scrollToIndex(e,r,i);var o=this._getItemKey(n,e),s=this._activeRows[o];s&&this._setFocusToRow(s,t)}},t.prototype.getStartItemIndexInView=function(){return this._list&&this._list.current?this._list.current.getStartItemIndexInView():this._groupedList&&this._groupedList.current?this._groupedList.current.getStartItemIndexInView():0},t.prototype.updateColumn=function(e,t){var r,i,n=this.props,o=n.columns,s=void 0===o?[]:o,a=n.selectionMode,l=n.checkboxVisibility,c=n.columnReorderOptions,u=t.width,d=t.newColumnIndex,m=s.findIndex(function(t){return t.key===e.key});if(u&&this._onColumnResized(e,u,m),void 0!==d&&c){var p=a===aH.none||l===Wj.hidden,h=(l!==Wj.hidden?2:1)+m,f=p?h-1:h-2,g=p?d-1:d-2,v=null!==(r=c.frozenColumnCountFromStart)&&void 0!==r?r:0,b=null!==(i=c.frozenColumnCountFromEnd)&&void 0!==i?i:0;if(g>=v&&g<s.length-b)if(c.onColumnDrop){var y={draggedIndex:f,targetIndex:g};c.onColumnDrop(y)}else c.handleColumnReorder&&c.handleColumnReorder(f,g)}},t.prototype.componentWillUnmount=function(){this._dragDropHelper&&this._dragDropHelper.dispose(),this._async.dispose()},t.prototype.componentDidUpdate=function(e,t){this._notifyColumnsResized();var r=Bz(this.context);if(void 0!==this._initialFocusedIndex&&(s=this.props.items[this._initialFocusedIndex])){var i=this._getItemKey(s,this._initialFocusedIndex);(n=this._activeRows[i])&&this._setFocusToRowIfPending(n)}if(this.props.items!==e.items&&this.props.items.length>0&&-1!==this.state.focusedItemIndex&&!iL(this._root.current,null==r?void 0:r.activeElement,!1)){var n,o=this.state.focusedItemIndex<this.props.items.length?this.state.focusedItemIndex:this.props.items.length-1,s=this.props.items[o];i=this._getItemKey(s,this.state.focusedItemIndex),(n=this._activeRows[i])?this._setFocusToRow(n):this._initialFocusedIndex=o}this.props.onDidUpdate&&this.props.onDidUpdate(this)},t.prototype.render=function(){return w.createElement(Vq,iN({},this.props,this.state,{selection:this._selection,dragDropHelper:this._dragDropHelper,rootRef:this._root,listRef:this._list,groupedListRef:this._groupedList,focusZoneRef:this._focusZone,headerRef:this._header,selectionZoneRef:this._selectionZone,onGroupExpandStateChanged:this._onGroupExpandStateChanged,onColumnIsSizingChanged:this._onColumnIsSizingChanged,onRowDidMount:this._onRowDidMount,onRowWillUnmount:this._onRowWillUnmount,onColumnResized:this._onColumnResized,onColumnAutoResized:this._onColumnAutoResized,onToggleCollapse:this._onToggleCollapse,onActiveRowChanged:this._onActiveRowChanged,onBlur:this._onBlur,onRenderDefaultRow:this._onRenderRow}))},t.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this._forceListUpdates()},t.prototype._getGroupNestingDepth=function(){for(var e=0,t=this.props.groups;t&&t.length>0;)e++,t=t[0].children;return e},t.prototype._setFocusToRowIfPending=function(e){var t=e.props.itemIndex;void 0!==this._initialFocusedIndex&&t===this._initialFocusedIndex&&(this._setFocusToRow(e),delete this._initialFocusedIndex)},t.prototype._setFocusToRow=function(e,t){void 0===t&&(t=!1),this._selectionZone.current&&this._selectionZone.current.ignoreNextFocus(),this._async.setTimeout(function(){e.focus(t)},0)},t.prototype._forceListUpdates=function(){this._groupedList.current&&this._groupedList.current.forceUpdate(),this._list.current&&this._list.current.forceUpdate()},t.prototype._notifyColumnsResized=function(){this.state.adjustedColumns.forEach(function(e){e.onColumnResize&&e.onColumnResize(e.currentWidth)})},t.prototype._adjustColumns=function(e,t,r,i){var n=this._getAdjustedColumns(e,t,r,i),o=this.props.viewport,s=o&&o.width?o.width:0;return iN(iN({},t),{adjustedColumns:n,lastWidth:s})},t.prototype._getAdjustedColumns=function(e,t,r,i){var n,o=this,s=e.items,a=e.layoutMode,l=e.selectionMode,c=e.viewport,u=c&&c.width?c.width:0,d=e.columns,m=this.props?this.props.columns:[],p=t?t.lastWidth:-1,h=t?t.lastSelectionMode:void 0;return r||p!==u||h!==l||m&&d!==m?(d=d||function(e){var t=[];if(e&&e.length){var r=e[0];for(var i in r)r.hasOwnProperty(i)&&t.push({key:i,name:i,fieldName:i,minWidth:Uq,maxWidth:300,isCollapsible:!!t.length,isMultiline:!1,isSorted:undefined===i,isSortedDescending:!1,isRowHeader:!1,columnActionsMode:Hj.clickable,isResizable:true,onColumnClick:undefined,isGrouped:undefined===i})}return t}(s),a===Gj.fixedColumns?(n=this._getFixedColumns(d,u,e)).forEach(function(e){o._rememberCalculatedWidth(e,e.calculatedWidth)}):(n=this._getJustifiedColumns(d,u,e)).forEach(function(e){o._getColumnOverride(e.key).currentWidth=e.calculatedWidth}),n):d||[]},t.prototype._getFixedColumns=function(e,t,r){var i=this,n=this.props,o=n.selectionMode,s=void 0===o?this._selection.mode:o,a=n.checkboxVisibility,l=n.flexMargin,c=n.skipViewportMeasures,u=t-(l||0),d=0;e.forEach(function(e){c||!e.flexGrow?u-=e.maxWidth||e.minWidth||Uq:(u-=e.minWidth||Uq,d+=e.flexGrow),u-=$q(e,r,!0)});var m=s!==aH.none&&a!==Wj.hidden?48:0,p=36*this._getGroupNestingDepth(),h=(u-=m+p)/d;return c||e.forEach(function(e){var t=iN(iN({},e),i._columnOverrides[e.key]);if(t.flexGrow&&t.maxWidth){var r=t.flexGrow*h+t.minWidth,n=r-t.maxWidth;n>0&&(u+=n,d-=n/(r-t.minWidth)*t.flexGrow)}}),h=u>0?u/d:0,e.map(function(e){var r=iN(iN({},e),i._columnOverrides[e.key]);return!c&&r.flexGrow&&u<=0&&0===t||r.calculatedWidth||(!c&&r.flexGrow?(r.calculatedWidth=r.minWidth+r.flexGrow*h,r.calculatedWidth=Math.min(r.calculatedWidth,r.maxWidth||Number.MAX_VALUE)):r.calculatedWidth=r.maxWidth||r.minWidth||Uq),r})},t.prototype._getJustifiedColumns=function(e,t,r){var i=this,n=r.selectionMode,o=void 0===n?this._selection.mode:n,s=r.checkboxVisibility,a=r.skipViewportMeasures,l=o!==aH.none&&s!==Wj.hidden?48:0,c=36*this._getGroupNestingDepth(),u=0,d=0,m=t-(l+c),p=e.map(function(e,t){var n=iN(iN({},e),{calculatedWidth:e.minWidth||Uq}),o=iN(iN({},n),i._columnOverrides[e.key]);return n.isCollapsible||n.isCollapsable||(d+=$q(n,r)),u+=$q(o,r),o});if(a)return p;for(var h=p.length-1;h>=0&&u>m;){var f=(y=p[h]).minWidth||Uq,g=u-m;if(y.calculatedWidth-f>=g||!y.isCollapsible&&!y.isCollapsable){var v=y.calculatedWidth;d<m&&(y.calculatedWidth=Math.max(y.calculatedWidth-g,f)),u-=v-y.calculatedWidth}else u-=$q(y,r),p.splice(h,1);h--}for(var b=0;b<p.length&&u<m;b++){var y=p[b],_=b===p.length-1,x=this._columnOverrides[y.key];if(!x||!x.calculatedWidth||_){var w=m-u,C=void 0;if(_)C=w;else{var k=y.maxWidth;f=y.minWidth||k||Uq,C=k?Math.min(w,k-f):w}y.calculatedWidth=y.calculatedWidth+C,u+=C}}return p},t.prototype._rememberCalculatedWidth=function(e,t){var r=this._getColumnOverride(e.key);r.calculatedWidth=t,r.currentWidth=t},t.prototype._getColumnOverride=function(e){return this._columnOverrides[e]=this._columnOverrides[e]||{}},t.prototype._getItemKey=function(e,t){var r=this.props.getKey,i=void 0;return e&&(i=e.key),r&&(i=r(e,t)),i||(i=t),i},t.defaultProps={layoutMode:Gj.justified,selectionMode:aH.multiple,constrainMode:qj.horizontalConstrained,checkboxVisibility:Wj.onHover,isHeaderVisible:!0,compact:!1,useFastIcons:!0},t.contextType=Sz,oN([Hq],t)}(w.Component);function $q(e,t,r){var i=t.cellStyleProps,n=void 0===i?pH:i;return(r?0:e.calculatedWidth)+n.cellLeftPadding+n.cellRightPadding+(e.isPadded?n.cellExtraRightPadding:0)}var Yq={root:"ms-DetailsList",compact:"ms-DetailsList--Compact",contentWrapper:"ms-DetailsList-contentWrapper",headerWrapper:"ms-DetailsList-headerWrapper",isFixed:"is-fixed",isHorizontalConstrained:"is-horizontalConstrained",listCell:"ms-List-cell"},Jq=PB(Kq,function(e){var t,r,i=e.theme,n=e.className,o=e.isHorizontalConstrained,s=e.compact,a=e.isFixed,l=i.semanticColors,c=EP(Yq,i);return{root:[c.root,i.fonts.small,{position:"relative",color:l.listText,selectors:(t={},t["& .".concat(c.listCell)]={minHeight:38,wordBreak:"break-word"},t)},a&&c.isFixed,s&&[c.compact,{selectors:(r={},r[".".concat(c.listCell)]={minHeight:32},r)}],o&&[c.isHorizontalConstrained,{overflowX:"auto",overflowY:"visible",WebkitOverflowScrolling:"touch"}],n],focusZone:[{display:"inline-block",minWidth:"100%",minHeight:1}],headerWrapper:c.headerWrapper,contentWrapper:c.contentWrapper}},void 0,{scope:"DetailsList"}),Xq=r(64583).Promise,Zq=function(e,t,r,i){return new(r||(r=Xq))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};const Qq=Kt({root:{width:"100%",maxWidth:"100%",minWidth:0,overflowX:"hidden"},mb8:{marginBottom:"8px"},mt8:{marginTop:"8px"},ml8:{marginLeft:"8px"},toolbar:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"8px","@media (max-width: 480px)":{flexDirection:"column",alignItems:"stretch"}},search:{width:"100%"},titleCell:{display:"block",whiteSpace:"normal",wordBreak:"break-word",lineHeight:1.3},cell:{fontSize:"12px",lineHeight:"16px",padding:"4px 8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:{fontSize:"12px",lineHeight:"16px",padding:"4px 8px",whiteSpace:"normal",wordBreak:"keep-all",overflowWrap:"anywhere",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical",overflow:"hidden"},authorBold:{fontWeight:600},yearChip:{display:"inline-block",minWidth:"44px",maxWidth:"56px",textAlign:"center",padding:"0 6px",lineHeight:"18px",height:"18px",borderRadius:"9px",background:"#f2f2f2",color:"#333",fontSize:"11px",marginLeft:"6px"},stackedMain:{display:"flex",alignItems:"center",gap:"4px"},stackedSub:{color:"#666",fontSize:"11px",lineHeight:"14px",marginTop:"2px"},cellContent:{display:"flex",flexDirection:"column",width:"100%",flex:"1 1 auto",minWidth:0},primary:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal",wordBreak:"break-word"},secondary:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal",wordBreak:"break-word"},yearChipMargin:{marginLeft:"6px",color:"#666"},listHost:{width:"100%",minWidth:"280px",overflowX:"hidden"},debug:{fontSize:"11px",opacity:.6},empty:{padding:"12px",color:"#666"},oneLineCell:{display:"flex",flexDirection:"row",alignItems:"baseline",width:"100%",minWidth:0,gap:"4px",lineHeight:1.35},ay:{flex:"0 0 auto",fontWeight:600,whiteSpace:"nowrap",minWidth:0},year:{opacity:.8},sep:{flex:"0 0 auto",opacity:.6,whiteSpace:"nowrap"},title1line:{flex:"1 1 auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"normal",overflowWrap:"normal"}}),eU=Kt({root:{width:"100%",maxWidth:"100%",minWidth:0,overflowX:"hidden"},cell:{fontSize:"12px",lineHeight:"16px",padding:"2px 8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},titleCell:{fontSize:"12px",lineHeight:"16px",padding:"2px 8px",whiteSpace:"normal",wordBreak:"break-word"},yearChip:{display:"inline-block",minWidth:"44px",maxWidth:"52px",textAlign:"center",padding:"0 6px",lineHeight:"18px",height:"18px",borderRadius:"9px",background:"#f2f2f2",color:"#333",fontSize:"11px"},stackedMain:{fontWeight:600},stackedSub:{color:"#666",fontSize:"11px",lineHeight:"14px",marginTop:"2px"},yearChipMargin:{marginLeft:"6px",color:"#666"}});var tU=({onItemSelect:e})=>{var t,r;const i=Qq(),[n,o]=(eU(),(0,w.useState)([])),[s,a]=(0,w.useState)([]),[l,c]=(0,w.useState)(""),[u,d]=w.useState("narrow"),[m,p]=(0,w.useState)("narrow"),[h,f]=(0,w.useState)({asc:!0}),[g,v]=(0,w.useState)(new Map),b=(0,w.useCallback)((e,t)=>{if(!t)return;const r=h.key===t.key?{key:t.key,asc:!h.asc}:{key:t.key,asc:!0};f(r)},[h]),y=((0,w.useCallback)(e=>w.createElement("span",null,w.createElement("span",{className:i.authorBold},e.author),w.createElement("span",{className:i.yearChipMargin},"(",e.year,")")),[i]),(0,w.useCallback)(e=>`${e.author}、${e.year}年、${e.title}`,[])),_=(0,w.useCallback)((e,t,r)=>w.createElement("div",{className:i.oneLineCell,"aria-label":y(e)},w.createElement("span",{className:i.ay},e.author," ",w.createElement("span",{className:i.year},"(",e.year,")")),w.createElement("span",{className:i.sep}," · "),w.createElement("span",{className:i.title1line},e.title)),[i,y]),[x,C]=(0,w.useState)([{key:"doc",name:"文献",fieldName:"title",minWidth:280,maxWidth:4096,isResizable:!1,isMultiline:!1,isPadded:!0,onRender:_}]),[k,T]=(0,w.useState)([{key:"stack",name:"文献",fieldName:"title",minWidth:280,isResizable:!0,isMultiline:!1,isPadded:!0,onRender:_}]),E=w.useRef(null);function S(){return Zq(this,void 0,void 0,function*(){const e=(yield Bl.loadLibrary()).map(e=>{var t,r,i,n,o,s,a,l,c,u,d,m,p,h,f;const g=Sb.stableKey(e),v=null!==(s=null!==(i=null===(r=null===(t=null==e?void 0:e.author)||void 0===t?void 0:t[0])||void 0===r?void 0:r.family)&&void 0!==i?i:null===(o=null===(n=null==e?void 0:e.author)||void 0===n?void 0:n[0])||void 0===o?void 0:o.literal)&&void 0!==s?s:"",b=null!==(u=null===(c=null===(l=null===(a=null==e?void 0:e.issued)||void 0===a?void 0:a["date-parts"])||void 0===l?void 0:l[0])||void 0===c?void 0:c[0])&&void 0!==u?u:"";return{key:g,title:null!==(d=e.title)&&void 0!==d?d:"(無題)",author:v,year:String(b),type:null!==(m=e.type)&&void 0!==m?m:"article-journal",containerTitle:null!==(p=e["container-title"])&&void 0!==p?p:"",doi:null!==(h=e.DOI)&&void 0!==h?h:"",isbn:null!==(f=e.ISBN)&&void 0!==f?f:""}});o(e),a(e);const t=new Map;e.forEach(e=>{const r=`${e.title} ${e.author} ${e.year} ${e.doi} ${e.isbn}`.toLowerCase();for(let i=0;i<r.length-2;i++){const n=r.substring(i,i+3);t.has(n)||t.set(n,new Set),t.get(n).add(e.key)}}),v(t)})}w.useEffect(()=>{if(!E.current)return;const e=new ResizeObserver(([e])=>{const t=Math.max(280,Math.floor(e.contentRect.width));t<360?(d("narrow"),p("narrow")):t<480?(d("medium"),p("medium")):(d("wide"),p("wide")),C(e=>{const r=[...e];return r[0]=Object.assign(Object.assign({},r[0]),{calculatedWidth:t}),r}),T(e=>{const r=[...e];return r[0]=Object.assign(Object.assign({},r[0]),{calculatedWidth:t}),r})});return e.observe(E.current),()=>e.disconnect()},[]),(0,w.useEffect)(()=>{S()},[]),(0,w.useEffect)(()=>{if(l.length<3)return void a(n);const e=l.toLowerCase(),t=new Set;for(let r=0;r<e.length-2;r++){const i=e.substring(r,r+3),n=g.get(i);n&&n.forEach(e=>t.add(e))}const r=n.filter(e=>t.has(e.key));a(r)},[l,n,g]);const I=(0,w.useMemo)(()=>{const e=[...s];return e.sort((e,t)=>{const r=(e.author||"").localeCompare(t.author||"","ja");if(r)return r;return String(e.year||"").localeCompare(String(t.year||""))||(e.title||"").localeCompare(t.title||"","ja")}),e},[s]),A=(0,w.useMemo)(()=>{if(!h.key)return I;const e=h.key,t=[...I];return t.sort((t,r)=>String(t[e]||"").localeCompare(String(r[e]||""),"ja")*(h.asc?1:-1)),t},[I,h]),O=(0,w.useMemo)(()=>({root:{width:"100%",minWidth:0},contentWrapper:{selectors:{".ms-DetailsRow":{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:"32px"},".ms-DetailsRow:hover":{background:"rgba(0,0,0,0.03)"},".ms-DetailsRow-cell":{padding:"4px 8px",fontSize:"12px",lineHeight:"16px"}}}}),[]);return w.createElement(SB,{verticalFill:!0,styles:{root:{minWidth:0,minHeight:0}}},w.createElement(SB.Item,{grow:!0,disableShrink:!0,styles:{root:{minWidth:0,minHeight:0,display:"flex"}}},w.createElement("div",{ref:E,className:i.root},w.createElement("div",{className:i.toolbar},w.createElement(TM,{className:i.search,value:l,onChange:(e,t)=>c(t||""),placeholder:"検索 (タイトル/著者/年/DOI/ISBN)"}),w.createElement(tH,{onClick:function(){return Zq(this,void 0,void 0,function*(){try{const e=[{id:"yamada2020",type:"article-journal",title:"日本語処理の最前線",author:[{family:"山田",given:"太郎"}],issued:{"date-parts":[[2020]]},"container-title":"言語情報処理",DOI:"10.1234/abc.2020.1"},{id:"suzuki2021",type:"article-journal",title:"Citation管理の実践",author:[{family:"鈴木",given:"花子"}],issued:{"date-parts":[[2021]]},"container-title":"情報システム論集",DOI:"10.1234/abc.2021.5"},{id:"doe2019",type:"book",title:"Writing with CSL",author:[{family:"Doe",given:"John"}],issued:{"date-parts":[[2019]]},ISBN:"978-4-0000-0000-0"}];yield Bl.saveLibrary(e),yield S(),YO("サンプル文献を読み込みました","success")}catch(e){console.error(e),YO("サンプル投入に失敗しました","error")}})},disabled:n.length>0},"サンプル投入"),w.createElement(tH,{onClick:()=>{}},"追加")),0===A.length&&w.createElement("div",{className:i.empty},"文献がありません。右上の「サンプル投入」でデモデータを読み込めます。"),w.createElement("div",{className:i.debug},"host=",null!==(r=null===(t=E.current)||void 0===t?void 0:t.clientWidth)&&void 0!==r?r:0,"px / mode=",m),w.createElement(Jq,{items:A,columns:"narrow"===u?k:x,onColumnHeaderClick:b,onItemInvoked:e,layoutMode:Gj.justified,constrainMode:qj.unconstrained,compact:!0,checkboxVisibility:2,selectionMode:0,setKey:m,styles:O,onRenderDetailsHeader:(e,t)=>e?t(Object.assign(Object.assign({},e),{styles:{root:{borderBottom:"1px solid rgba(0,0,0,0.1)"},cellSizerEnd:{display:"none"},cellTitle:{fontWeight:600}}})):null}))))};const rU=yn({base:{mc9l5x:"ftuwxu6",B7ck84d:"f1ewtqcl",qhf8xq:"f10pi13n",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1yiegib",jrapky:0,Frg6f3:0,t21cq0:0,B6of3ja:0,B74szlk:"f1s184ao",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",ha4doy:"f12kltsn"},disabled:{De3pzq:"f1c21dwh",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"ff3nzm7",Bjwas2f:"fg455y9",Bn1d65q:["f1rvyvqg","f14g86mu"],Bxeuatn:"f1cwzwz",n51gp8:["f14g86mu","f1rvyvqg"]},interactive:{li1rpt:"f1gw3sf2",Bsft5z2:"f13zj6fq",E3zdtr:"f1mdlcz9",Eqx8gd:["f1a7op3","f1cjjd47"],By385i5:"f1gboi2j",B1piin3:["f1cjjd47","f1a7op3"],Dlnsje:"ffyw7fx",d9w3h3:["f1kp91vd","f1ibwz09"],B3778ie:["f1ibwz09","f1kp91vd"],B1q35kw:0,Bw17bha:0,Bcgy8vk:0,Bjuhk93:"f1mnjydx",Gjdm7m:"fj2g8qd",b1kco5:"f1yk9hq",Ba2ppi3:"fhwpy7i",F2fol1:"f14ee0xe",lck23g:"f1xhbsuh",df92cz:"fv8e3ye",I188md:"ftb5wc6",umuwi5:"fjw5xc1",Blcqepd:"f1xdyd5c",nplu4u:"fatpbeo",Bioka5o:"fb7uyps",H713fs:"f1cmft4k",B9ooomg:"f1x58t8o",Bercvud:"f1ibeo51",Bbr2w1p:"f1vnc8sk",Bduesf4:"f3e99gv",Bpq79vn:"fhljsf7"},filled:{Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f88035w",q7v0qe:"ftmjh5b",kmh5ft:["f17blpuu","fsrcdbj"],nagaa4:"f1tpwn32",B1yhkcb:["fsrcdbj","f17blpuu"]},"filled-darker":{De3pzq:"f16xq7d1"},"filled-lighter":{De3pzq:"fxugw4r"},"filled-darker-shadow":{De3pzq:"f16xq7d1",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f1gmd7mu",E5pizo:"fyed02w"},"filled-lighter-shadow":{De3pzq:"fxugw4r",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f1gmd7mu",E5pizo:"fyed02w"},outline:{De3pzq:"fxugw4r",Bgfg5da:0,B9xav0g:"f1c1zstj",oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fhz96rm"},outlineInteractive:{kzujx5:0,oetu4i:"f1l4zc64",gvrnp0:0,xv9156:0,jek2p4:0,gg5e9n:0,Beu9t3s:0,dt87k2:0,Bt1vbvt:0,Bwzppfd:0,Bop6t4b:0,B2zwrfe:0,Bwp2tzp:0,Bgoe8wy:0,Bf40cpq:0,ckks6v:0,Baalond:"f9mts5e",v2iqwr:0,wmxk5l:"f1z0osm6",Bj33j0h:0,Bs0cc2w:0,qwjtx1:0,B50zh58:0,f7epvg:0,e1hlit:0,B7mkhst:0,ak43y8:0,Bbcopvn:0,Bvecx4l:0,lwioe0:0,B6oc9vd:0,e2sjt0:0,uqwnxt:0,asj8p9:"f1acnei2",Br8fjdy:0,zoxjo1:"f1so894s",Bt3ojkv:0,B7pmvfx:0,Bfht2n1:0,an54nd:0,t1ykpo:0,Belqbek:0,bbt1vd:0,Brahy3i:0,r7b1zc:0,rexu52:0,ovtnii:0,Bvq3b66:0,Bawrxx6:0,Bbs6y8j:0,B2qpgjt:"f19ezbcq"},invalid:{tvckwq:"fs4k3qj",gk2u95:["fcee079","fmyw78r"],hhx65j:"f1fgmyf4",Bxowmz0:["fmyw78r","fcee079"]}},{d:[".ftuwxu6{display:inline-flex;}",".f1ewtqcl{box-sizing:border-box;}",".f10pi13n{position:relative;}",[".f1yiegib{padding:0 0 var(--strokeWidthThick) 0;}",{p:-1}],[".f1s184ao{margin:0;}",{p:-1}],[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".f12kltsn{vertical-align:top;}",".f1c21dwh{background-color:var(--colorTransparentBackground);}",[".ff3nzm7{border:var(--strokeWidthThin) solid var(--colorNeutralStrokeDisabled);}",{p:-2}],".f1gw3sf2::after{box-sizing:border-box;}",'.f13zj6fq::after{content:"";}',".f1mdlcz9::after{position:absolute;}",".f1a7op3::after{left:-1px;}",".f1cjjd47::after{right:-1px;}",".f1gboi2j::after{bottom:-1px;}",".ffyw7fx::after{height:max(var(--strokeWidthThick), var(--borderRadiusMedium));}",".f1kp91vd::after{border-bottom-left-radius:var(--borderRadiusMedium);}",".f1ibwz09::after{border-bottom-right-radius:var(--borderRadiusMedium);}",[".f1mnjydx::after{border-bottom:var(--strokeWidthThick) solid var(--colorCompoundBrandStroke);}",{p:-1}],".fj2g8qd::after{clip-path:inset(calc(100% - var(--strokeWidthThick)) 0 0 0);}",".f1yk9hq::after{transform:scaleX(0);}",".fhwpy7i::after{transition-property:transform;}",".f14ee0xe::after{transition-duration:var(--durationUltraFast);}",".f1xhbsuh::after{transition-delay:var(--curveAccelerateMid);}",[".f88035w{border:var(--strokeWidthThin) solid var(--colorTransparentStroke);}",{p:-2}],".f16xq7d1{background-color:var(--colorNeutralBackground3);}",".fxugw4r{background-color:var(--colorNeutralBackground1);}",[".f1gmd7mu{border:var(--strokeWidthThin) solid var(--colorTransparentStrokeInteractive);}",{p:-2}],".fyed02w{box-shadow:var(--shadow2);}",[".f1gmd7mu{border:var(--strokeWidthThin) solid var(--colorTransparentStrokeInteractive);}",{p:-2}],[".fhz96rm{border:var(--strokeWidthThin) solid var(--colorNeutralStroke1);}",{p:-2}],".f1c1zstj{border-bottom-color:var(--colorNeutralStrokeAccessible);}",".fs4k3qj:not(:focus-within),.fs4k3qj:hover:not(:focus-within){border-top-color:var(--colorPaletteRedBorder2);}",".fcee079:not(:focus-within),.fcee079:hover:not(:focus-within){border-right-color:var(--colorPaletteRedBorder2);}",".fmyw78r:not(:focus-within),.fmyw78r:hover:not(:focus-within){border-left-color:var(--colorPaletteRedBorder2);}",".f1fgmyf4:not(:focus-within),.f1fgmyf4:hover:not(:focus-within){border-bottom-color:var(--colorPaletteRedBorder2);}"],m:[["@media (forced-colors: active){.fg455y9{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f14g86mu{border-left-color:GrayText;}.f1rvyvqg{border-right-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1cwzwz{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media screen and (prefers-reduced-motion: reduce){.fv8e3ye::after{transition-duration:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.ftb5wc6::after{transition-delay:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.f1cmft4k:focus-within::after{transition-duration:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.f1x58t8o:focus-within::after{transition-delay:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}]],w:[".fjw5xc1:focus-within::after{transform:scaleX(1);}",".f1xdyd5c:focus-within::after{transition-property:transform;}",".fatpbeo:focus-within::after{transition-duration:var(--durationNormal);}",".fb7uyps:focus-within::after{transition-delay:var(--curveDecelerateMid);}",".f1ibeo51:focus-within:active::after{border-bottom-color:var(--colorCompoundBrandStrokePressed);}",".f1vnc8sk:focus-within{outline-width:var(--strokeWidthThick);}",".f3e99gv:focus-within{outline-style:solid;}",".fhljsf7:focus-within{outline-color:transparent;}",[".f19ezbcq:focus-within{border:var(--strokeWidthThin) solid var(--colorNeutralStroke1Pressed);}",{p:-2}],".f1so894s:focus-within{border-bottom-color:var(--colorCompoundBrandStroke);}"],h:[".ftmjh5b:hover,.ftmjh5b:focus-within{border-top-color:var(--colorTransparentStrokeInteractive);}",".f17blpuu:hover,.f17blpuu:focus-within{border-right-color:var(--colorTransparentStrokeInteractive);}",".fsrcdbj:hover,.fsrcdbj:focus-within{border-left-color:var(--colorTransparentStrokeInteractive);}",".f1tpwn32:hover,.f1tpwn32:focus-within{border-bottom-color:var(--colorTransparentStrokeInteractive);}",[".f9mts5e:hover{border:var(--strokeWidthThin) solid var(--colorNeutralStroke1Hover);}",{p:-2}],".f1l4zc64:hover{border-bottom-color:var(--colorNeutralStrokeAccessibleHover);}"],a:[[".f1acnei2:active{border:var(--strokeWidthThin) solid var(--colorNeutralStroke1Pressed);}",{p:-2}],".f1z0osm6:active{border-bottom-color:var(--colorNeutralStrokeAccessiblePressed);}"]}),iU=yn({base:{icvyot:"f1ern45e",vrafjx:["f1n71otn","f1deefiw"],oivjwe:"f1h8hb77",wvpqe5:["f1deefiw","f1n71otn"],jrapky:0,Frg6f3:0,t21cq0:0,B6of3ja:0,B74szlk:"f1s184ao",De3pzq:"f3rmtva",B7ck84d:"f1ewtqcl",sj55zd:"f19n0e5",Bh6795r:"fqerorx",Bahqtrf:"fk6fouc",Bqenvij:"f1l02sjl",yvdlaj:"fwyc1cq",B3o7kgh:"f13ta7ih",oeaueh:"f1s6fcnf"},disabled:{sj55zd:"f1s2aq7o",Bceei9c:"fdrzuqr",yvdlaj:"fahhnxm"},small:{sshi5w:"f1w5jphr",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1pnffij",Bxyxcbc:"f192z54u",Bahqtrf:"fk6fouc",Be2twd7:"fy9rknc",Bhrd7zp:"figsok6",Bg96gwp:"fwrc4pm"},medium:{sshi5w:"fvmd9f",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1ww82xo",Bxyxcbc:"f1if7ixc",Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"figsok6",Bg96gwp:"f1i3iumi"},large:{sshi5w:"f1kfson",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f15hvtkj",Bxyxcbc:"f3kip1f",Bahqtrf:"fk6fouc",Be2twd7:"fod5ikn",Bhrd7zp:"figsok6",Bg96gwp:"faaz57k"}},{d:[".f1ern45e{border-top-style:none;}",".f1n71otn{border-right-style:none;}",".f1deefiw{border-left-style:none;}",".f1h8hb77{border-bottom-style:none;}",[".f1s184ao{margin:0;}",{p:-1}],".f3rmtva{background-color:transparent;}",".f1ewtqcl{box-sizing:border-box;}",".f19n0e5{color:var(--colorNeutralForeground1);}",".fqerorx{flex-grow:1;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".f1l02sjl{height:100%;}",".fwyc1cq::-webkit-input-placeholder{color:var(--colorNeutralForeground4);}",".fwyc1cq::-moz-placeholder{color:var(--colorNeutralForeground4);}",".f13ta7ih::-webkit-input-placeholder{opacity:1;}",".f13ta7ih::-moz-placeholder{opacity:1;}",".f1s6fcnf{outline-style:none;}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".fdrzuqr{cursor:not-allowed;}",".fahhnxm::-webkit-input-placeholder{color:var(--colorNeutralForegroundDisabled);}",".fahhnxm::-moz-placeholder{color:var(--colorNeutralForegroundDisabled);}",".f1w5jphr{min-height:40px;}",[".f1pnffij{padding:var(--spacingVerticalXS) calc(var(--spacingHorizontalSNudge) + var(--spacingHorizontalXXS));}",{p:-1}],".f192z54u{max-height:200px;}",".fy9rknc{font-size:var(--fontSizeBase200);}",".figsok6{font-weight:var(--fontWeightRegular);}",".fwrc4pm{line-height:var(--lineHeightBase200);}",".fvmd9f{min-height:52px;}",[".f1ww82xo{padding:var(--spacingVerticalSNudge) calc(var(--spacingHorizontalMNudge) + var(--spacingHorizontalXXS));}",{p:-1}],".f1if7ixc{max-height:260px;}",".fkhj508{font-size:var(--fontSizeBase300);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",".f1kfson{min-height:64px;}",[".f15hvtkj{padding:var(--spacingVerticalS) calc(var(--spacingHorizontalM) + var(--spacingHorizontalXXS));}",{p:-1}],".f3kip1f{max-height:320px;}",".fod5ikn{font-size:var(--fontSizeBase400);}",".faaz57k{line-height:var(--lineHeightBase400);}"]}),nU=yn({none:{B3rzk8w:"f1o1s39h"},both:{B3rzk8w:"f1pxm0xe"},horizontal:{B3rzk8w:"fq6nmtn"},vertical:{B3rzk8w:"f1f5ktr4"}},{d:[".f1o1s39h{resize:none;}",".f1pxm0xe{resize:both;}",".fq6nmtn{resize:horizontal;}",".f1f5ktr4{resize:vertical;}"]}),oU=w.forwardRef((e,t)=>{const r=((e,t)=>{e=Kn(e,{supportsLabelFor:!0,supportsRequired:!0,supportsSize:!0});const r=Jn();var i;const{size:n="medium",appearance:o=(null!==(i=r.inputDefaultAppearance)&&void 0!==i?i:"outline"),resize:s="none",onChange:a}=e,[l,c]=Oi({state:e.value,defaultState:e.defaultValue,initialState:void 0}),u=en({props:e,primarySlotTagName:"textarea",excludedPropNames:["onChange","value","defaultValue"]}),d={size:n,appearance:o,resize:s,components:{root:"span",textarea:"textarea"},textarea:Mi(e.textarea,{defaultProps:{ref:t,...u.primary},elementType:"textarea"}),root:Mi(e.root,{defaultProps:u.root,elementType:"span"})};return d.textarea.value=l,d.textarea.onChange=Ri(e=>{const t=e.target.value;null==a||a(e,{value:t}),c(t)}),d})(e,t);return(e=>{const{size:t,appearance:r,resize:i}=e,n=e.textarea.disabled,o="true"==`${e.textarea["aria-invalid"]}`,s=r.startsWith("filled"),a=rU();e.root.className=xn("fui-Textarea",a.base,n&&a.disabled,!n&&s&&a.filled,!n&&a[r],!n&&a.interactive,!n&&"outline"===r&&a.outlineInteractive,!n&&o&&a.invalid,e.root.className);const l=iU(),c=nU();e.textarea.className=xn("fui-Textarea__textarea",l.base,l[t],c[i],n&&l.disabled,e.textarea.className)})(r),En("useTextareaStyles_unstable")(r),(e=>cn(e.root,{children:cn(e.textarea,{})}))(r)});var sU;oU.displayName="Textarea",function(e){e[e.normal=0]="normal",e[e.largeHeader=1]="largeHeader",e[e.close=2]="close"}(sU||(sU={}));var aU=function(e){for(var t=e.activeElement;null==t?void 0:t.shadowRoot;)t=t.shadowRoot.activeElement;return t},lU=function(e){var t=e.target;return t&&t.shadowRoot&&(t=e.composedPath()[0]),t};function cU(e){var t=w.useRef(function(){throw new Error("Cannot call an event handler while rendering")});return KB(function(){t.current=e},[e]),Nz(function(){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.current.apply(void 0,e)}})}var uU=function(e){var t=w.useRef(e);t.current=e,w.useEffect(function(){return function(){var e;null===(e=t.current)||void 0===e||e.call(t)}},[])},dU={disabled:!1,disableFirstFocus:!1,forceFocusInsideTrap:!0,isClickableOutsideFocusTrap:!1,"data-tabster":'{"uncontrolled": {"completely": true}}'},mU=w.forwardRef(function(e,t){var r,i=w.useRef(null),n=w.useRef(null),o=w.useRef(null),s=$B(i,t),a=function(){var e;return null===(e=w.useContext(Sz).window)||void 0===e?void 0:e.document}(),l=Dz(),c=!!Oj(),u=null===(r=FF(!1))||void 0===r||r,d=zL(dU,e),m=Nz({hasFocus:!1,focusStackId:GD("ftz-",d.id)}),p=d.children,h=d.componentRef,f=d.disabled,g=d.disableFirstFocus,v=d.forceFocusInsideTrap,b=d.focusPreviouslyFocusedInnerElement,y=d.firstFocusableSelector,_=d.firstFocusableTarget,x=d.disableRestoreFocus,C=void 0===x?d.ignoreExternalFocusing:x,k=d.isClickableOutsideFocusTrap,T=d.enableAriaHiddenSiblings,E={"aria-hidden":!0,style:{pointerEvents:"none",position:"fixed"},tabIndex:f?-1:0,"data-is-visible":!0,"data-is-focus-trap-zone-bumper":!0},S=w.useCallback(function(e){e!==n.current&&e!==o.current&&hL(e)},[]),I=cU(function(){if(i.current){var e=m.previouslyFocusedElementInTrapZone;if(b&&e&&iL(i.current,e))S(e);else{var t=null;if("string"==typeof _)t=i.current.querySelector(_);else if(_)t=_(i.current);else if(y){var r="string"==typeof y?y:y();t=i.current.querySelector("."+r)}t||(t=oL(i.current,i.current.firstChild,!1,!1,!1,!0,void 0,void 0,void 0,c)),t&&S(t)}}}),A=function(e){if(!f&&i.current){var t=e===m.hasFocus?function(e,t,r,i,n){return void 0===i&&(i=!0),nL(e,t,i,!1,!0,!0,!1,!0,n)}(i.current,o.current,0,!1,c):function(e,t,r,i,n){return void 0===i&&(i=!0),oL(e,t,i,!1,!1,!0,!1,!0,void 0,n)}(i.current,n.current,0,!1,c);t&&(t===n.current||t===o.current?I():t.focus())}},O=cU(function(e){if(mU.focusStack=mU.focusStack.filter(function(e){return m.focusStackId!==e}),a){var t=a.activeElement;C||"function"!=typeof(null==e?void 0:e.focus)||!iL(i.current,t)&&t!==a.body&&!t.shadowRoot||S(e)}}),N=cU(function(e){if(!f&&m.focusStackId===mU.focusStack.slice(-1)[0]){var t=lU(e);t&&!iL(i.current,t)&&(a&&aU(a)===a.body?setTimeout(function(){a&&aU(a)===a.body&&(I(),m.hasFocus=!0)},0):(I(),m.hasFocus=!0),e.preventDefault(),e.stopPropagation())}});return w.useEffect(function(){var e=[];return v&&e.push(KL(l,"focus",N,!0)),k||e.push(KL(l,"click",N,!0)),function(){e.forEach(function(e){return e()})}},[v,k,l]),w.useEffect(function(){if(!f&&(u||v)&&i.current){mU.focusStack.push(m.focusStackId);var e=d.elementToFocusOnDismiss||aU(a);return g||iL(i.current,e)||I(),function(){return O(e)}}},[v,f]),w.useEffect(function(){if(!f&&T)return kz(i.current)},[f,T,i]),uU(function(){delete m.previouslyFocusedElementInTrapZone}),function(e,t,r){w.useImperativeHandle(e,function(){return{get previouslyFocusedElement(){return t},focus:r}},[r,t])}(h,m.previouslyFocusedElementInTrapZone,I),w.createElement("div",iN({"aria-labelledby":d.ariaLabelledBy},gB(d,fB),{ref:s,onFocusCapture:function(e){var t;null===(t=d.onFocusCapture)||void 0===t||t.call(d,e),e.target===n.current?A(!0):e.target===o.current&&A(!1),m.hasFocus=!0,e.target!==e.currentTarget&&e.target!==n.current&&e.target!==o.current&&(m.previouslyFocusedElementInTrapZone=lU(e.nativeEvent))},onBlurCapture:function(e){var t;null===(t=d.onBlurCapture)||void 0===t||t.call(d,e);var r=e.relatedTarget;null===e.relatedTarget&&(r=aU(a)),iL(i.current,r)||(m.hasFocus=!1)}}),w.createElement("div",iN({},E,{ref:n})),p,w.createElement("div",iN({},E,{ref:o})))});mU.displayName="FocusTrapZone",mU.focusStack=[];var pU=cP,hU={root:"ms-Modal",main:"ms-Dialog-main",scrollableContent:"ms-Modal-scrollableContent",isOpen:"is-open",layer:"ms-Modal-Layer"},fU=LB(),gU=function(e){function t(t){var r=e.call(this,t)||this;lM(r);var i=r.props.allowTouchBodyScroll,n=void 0!==i&&i;return r._allowTouchBodyScroll=n,r}return rN(t,e),t.prototype.componentDidMount=function(){var e;!this._allowTouchBodyScroll&&((e=uR())&&e.body&&!fL&&(e.body.classList.add(gL),e.body.addEventListener("touchmove",bL,{passive:!1,capture:!1})),fL++)},t.prototype.componentWillUnmount=function(){!this._allowTouchBodyScroll&&function(){if(fL>0){var e=uR();e&&e.body&&1===fL&&(e.body.classList.remove(gL),e.body.removeEventListener("touchmove",bL)),fL--}}()},t.prototype.render=function(){var e=this.props,t=e.isDarkThemed,r=e.className,i=e.theme,n=e.styles,o=gB(this.props,fB),s=fU(n,{theme:i,className:r,isDark:t});return w.createElement("div",iN({},o,{className:s.root}))},t}(w.Component),vU={root:"ms-Overlay",rootDark:"ms-Overlay--dark"},bU=PB(gU,function(e){var t,r=e.className,i=e.theme,n=e.isNone,o=e.isDark,s=i.palette,a=EP(vU,i);return{root:[a.root,i.fonts.medium,{backgroundColor:s.whiteTranslucent40,top:0,right:0,bottom:0,left:0,position:"absolute",selectors:(t={},t[SP]={border:"1px solid WindowText",opacity:0},t)},n&&{visibility:"hidden"},o&&[a.rootDark,{backgroundColor:s.blackTranslucent40}],r]}},void 0,{scope:"Overlay"}),yU=ZN(function(e,t){return{root:GN(e,t&&{touchAction:"none",selectors:{"& *":{userSelect:"none"}}})}}),_U={start:"touchstart",move:"touchmove",stop:"touchend"},xU={start:"mousedown",move:"mousemove",stop:"mouseup"},wU=function(e){function t(t){var r=e.call(this,t)||this;return r._currentEventType=xU,r._events=[],r._onMouseDown=function(e){var t=w.Children.only(r.props.children).props.onMouseDown;return t&&t(e),r._currentEventType=xU,r._onDragStart(e)},r._onMouseUp=function(e){var t=w.Children.only(r.props.children).props.onMouseUp;return t&&t(e),r._currentEventType=xU,r._onDragStop(e)},r._onTouchStart=function(e){var t=w.Children.only(r.props.children).props.onTouchStart;return t&&t(e),r._currentEventType=_U,r._onDragStart(e)},r._onTouchEnd=function(e){var t=w.Children.only(r.props.children).props.onTouchEnd;t&&t(e),r._currentEventType=_U,r._onDragStop(e)},r._onDragStart=function(e){if("number"==typeof e.button&&0!==e.button)return!1;if(!(r.props.handleSelector&&!r._matchesSelector(e.target,r.props.handleSelector)||r.props.preventDragSelector&&r._matchesSelector(e.target,r.props.preventDragSelector))){r._touchId=r._getTouchId(e);var t=r._getControlPosition(e);if(void 0!==t){var i=r._createDragDataFromPosition(t);r.props.onStart&&r.props.onStart(e,i),r.setState({isDragging:!0,lastPosition:t});var n=Bz(r.context);r._events=[KL(n.body,r._currentEventType.move,r._onDrag,!0),KL(n.body,r._currentEventType.stop,r._onDragStop,!0)]}}},r._onDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=r._getControlPosition(e);if(t){var i=r._createUpdatedDragData(r._createDragDataFromPosition(t)),n=i.position;r.props.onDragChange&&r.props.onDragChange(e,i),r.setState({position:n,lastPosition:t})}},r._onDragStop=function(e){if(r.state.isDragging){var t=r._getControlPosition(e);if(t){var i=r._createDragDataFromPosition(t);r.setState({isDragging:!1,lastPosition:void 0}),r.props.onStop&&r.props.onStop(e,i),r.props.position&&r.setState({position:r.props.position}),r._events.forEach(function(e){return e()})}}},r.state={isDragging:!1,position:r.props.position||{x:0,y:0},lastPosition:void 0},r}return rN(t,e),t.prototype.componentDidUpdate=function(e){!this.props.position||e.position&&this.props.position===e.position||this.setState({position:this.props.position})},t.prototype.componentWillUnmount=function(){this._events.forEach(function(e){return e()})},t.prototype.render=function(){var e=w.Children.only(this.props.children),t=e.props,r=this.props.position,i=this.state,n=i.position,o=i.isDragging,s=n.x,a=n.y;return r&&!o&&(s=r.x,a=r.y),w.cloneElement(e,{style:iN(iN({},t.style),{transform:"translate(".concat(s,"px, ").concat(a,"px)")}),className:yU(t.className,this.state.isDragging).root,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onTouchStart:this._onTouchStart,onTouchEnd:this._onTouchEnd})},t.prototype._getControlPosition=function(e){var t=this._getActiveTouch(e);if(void 0===this._touchId||t){var r=t||e;return{x:r.clientX,y:r.clientY}}},t.prototype._getActiveTouch=function(e){return e.targetTouches&&this._findTouchInTouchList(e.targetTouches)||e.changedTouches&&this._findTouchInTouchList(e.changedTouches)},t.prototype._getTouchId=function(e){var t=e.targetTouches&&e.targetTouches[0]||e.changedTouches&&e.changedTouches[0];if(t)return t.identifier},t.prototype._matchesSelector=function(e,t){var r;if(!e||e===(null===(r=Bz(this.context))||void 0===r?void 0:r.body))return!1;var i=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return!!i&&(i.call(e,t)||this._matchesSelector(e.parentElement,t))},t.prototype._findTouchInTouchList=function(e){if(void 0!==this._touchId)for(var t=0;t<e.length;t++)if(e[t].identifier===this._touchId)return e[t]},t.prototype._createDragDataFromPosition=function(e){var t=this.state.lastPosition;return void 0===t?{delta:{x:0,y:0},lastPosition:e,position:e}:{delta:{x:e.x-t.x,y:e.y-t.y},lastPosition:t,position:e}},t.prototype._createUpdatedDragData=function(e){var t=this.state.position;return{position:{x:t.x+e.delta.x,y:t.y+e.delta.y},delta:e.delta,lastPosition:t}},t.contextType=Sz,t}(w.Component),CU=function(){var e=Nz({});return w.useEffect(function(){return function(){for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];clearTimeout(i)}}},[e]),Nz({setTimeout:function(t,r){var i=setTimeout(t,r);return e[i]=1,i},clearTimeout:function(t){delete e[t],clearTimeout(t)}})},kU={x:0,y:0},TU={isOpen:!1,isDarkOverlay:!0,className:"",containerClassName:"",enableAriaHiddenSiblings:!0},EU=LB(),SU=w.forwardRef(function(e,t){var r,i,n,o,s,a=zL(TU,e),l=a.allowTouchBodyScroll,c=a.className,u=a.children,d=a.containerClassName,m=a.scrollableContentClassName,p=a.elementToFocusOnDismiss,h=a.firstFocusableSelector,f=a.focusTrapZoneProps,g=a.forceFocusInsideTrap,v=a.disableRestoreFocus,b=void 0===v?a.ignoreExternalFocusing:v,y=a.isBlocking,_=a.isAlert,x=a.isClickableOutsideFocusTrap,C=a.isDarkOverlay,k=a.onDismiss,T=a.layerProps,E=a.overlay,S=a.isOpen,I=a.titleAriaId,A=a.styles,O=a.subtitleAriaId,N=a.theme,R=a.topOffsetFixed,P=a.responsiveMode,D=a.onLayerDidMount,B=a.isModeless,M=a.dragOptions,L=a.onDismissed,z=a.enableAriaHiddenSiblings,F=a.popupProps,j=w.useRef(null),H=w.useRef(null),q=$B(H,null==f?void 0:f.componentRef),U=w.useRef(null),G=$B(j,t),W=oj(G),V=GD("ModalFocusTrapZone",null==f?void 0:f.id),K=Iz(),$=CU(),Y=$.setTimeout,J=$.clearTimeout,X=w.useState(S),Z=X[0],Q=X[1],ee=w.useState(S),te=ee[0],re=ee[1],ie=w.useState(kU),ne=ie[0],oe=ie[1],se=w.useState(),ae=se[0],le=se[1],ce=function(){var e=w.useState(!1),t=e[0],r=e[1];return[t,{setTrue:Nz(function(){return function(){r(!0)}}),setFalse:Nz(function(){return function(){r(!1)}}),toggle:Nz(function(){return function(){r(function(e){return!e})}})}]}(),ue=ce[0],de=ce[1],me=de.toggle,pe=de.setFalse,he=Nz(function(){return{onModalCloseTimer:0,allowTouchBodyScroll:l,scrollableContent:null,lastSetCoordinates:kU,events:new BM({})}}),fe=(M||{}).keepInBounds,ge=null!=_?_:y&&!B,ve=void 0===T?"":T.className,be=EU(A,{theme:N,className:c,containerClassName:d,scrollableContentClassName:m,isOpen:S,isVisible:te,hasBeenOpened:he.hasBeenOpened,modalRectangleTop:ae,topOffsetFixed:R,isModeless:B,layerClassName:ve,windowInnerHeight:null==K?void 0:K.innerHeight,isDefaultDragHandle:M&&!M.dragHandleSelector}),ye=iN(iN({eventBubblingEnabled:!1},T),{onLayerDidMount:T&&T.onLayerDidMount?T.onLayerDidMount:D,insertFirst:(null==T?void 0:T.insertFirst)||B,className:be.layer}),_e=w.useCallback(function(e){var t,r;e?he.allowTouchBodyScroll?(t=e,r=he.events,t&&r.on(t,"touchmove",function(e){e.stopPropagation()},{passive:!1})):function(e,t){var r=mR(e);if(e&&r){var i=0,n=null,o=r.getComputedStyle(e);t.on(e,"touchstart",function(e){1===e.targetTouches.length&&(i=e.targetTouches[0].clientY)},{passive:!1}),t.on(e,"touchmove",function(e){if(1===e.targetTouches.length&&(e.stopPropagation(),n)){var t=e.targetTouches[0].clientY-i,s=yL(e.target);s&&n!==s&&(n=s,o=r.getComputedStyle(n));var a=n.scrollTop,l="column-reverse"===(null==o?void 0:o.flexDirection);0===a&&(l?t<0:t>0)&&e.preventDefault(),n.scrollHeight-Math.abs(Math.ceil(a))<=n.clientHeight&&(l?t>0:t<0)&&e.preventDefault()}},{passive:!1}),n=e}}(e,he.events):he.events.off(he.scrollableContent),he.scrollableContent=e},[he]),xe=function(){var e=U.current,t=null==e?void 0:e.getBoundingClientRect();t&&(R&&le(t.top),fe&&(he.minPosition={x:-t.left,y:-t.top},he.maxPosition={x:t.left,y:t.top}))},we=w.useCallback(function(e,t){var r=he.minPosition,i=he.maxPosition;return fe&&r&&i&&(t=Math.max(r[e],t),t=Math.min(i[e],t)),t},[fe,he]),Ce=function(){var e;he.lastSetCoordinates=kU,pe(),he.isInKeyboardMoveMode=!1,Q(!1),oe(kU),null===(e=he.disposeOnKeyUp)||void 0===e||e.call(he),null==L||L()},ke=w.useCallback(function(){pe(),he.isInKeyboardMoveMode=!1},[he,pe]),Te=w.useCallback(function(e,t){oe(function(e){return{x:we("x",e.x+t.delta.x),y:we("y",e.y+t.delta.y)}})},[we]),Ee=w.useCallback(function(){H.current&&H.current.focus()},[]);w.useEffect(function(){var e;J(he.onModalCloseTimer),S&&(requestAnimationFrame(function(){return Y(xe,0)}),Q(!0),M&&(e=function(e){e.altKey&&e.ctrlKey&&e.keyCode===nR&&iL(he.scrollableContent,e.target)&&(me(),e.preventDefault(),e.stopPropagation())},he.disposeOnKeyUp||(he.events.on(K,"keyup",e,!0),he.disposeOnKeyUp=function(){he.events.off(K,"keyup",e,!0),he.disposeOnKeyUp=void 0})),he.hasBeenOpened=!0,re(!0)),!S&&Z&&(he.onModalCloseTimer=Y(Ce,1e3*parseFloat(pU)),re(!1))},[Z,S]),uU(function(){he.events.dispose(),he.onModalCloseTimer&&(J(he.onModalCloseTimer),he.onModalCloseTimer=0)}),function(e,t){w.useImperativeHandle(e.componentRef,function(){return{focus:function(){t.current&&t.current.focus()}}},[t])}(a,H);var Se=w.createElement(mU,iN({},f,{id:V,ref:U,componentRef:q,className:vB(be.main,null==f?void 0:f.className),elementToFocusOnDismiss:null!==(r=null==f?void 0:f.elementToFocusOnDismiss)&&void 0!==r?r:p,isClickableOutsideFocusTrap:null!==(i=null==f?void 0:f.isClickableOutsideFocusTrap)&&void 0!==i?i:B||x||!y,disableRestoreFocus:null!==(n=null==f?void 0:f.disableRestoreFocus)&&void 0!==n?n:b,forceFocusInsideTrap:(null!==(o=null==f?void 0:f.forceFocusInsideTrap)&&void 0!==o?o:g)&&!B,firstFocusableSelector:(null==f?void 0:f.firstFocusableSelector)||h,focusPreviouslyFocusedInnerElement:null===(s=null==f?void 0:f.focusPreviouslyFocusedInnerElement)||void 0===s||s,onBlur:he.isInKeyboardMoveMode?function(e){var t,r;null===(t=null==f?void 0:f.onBlur)||void 0===t||t.call(f,e),he.lastSetCoordinates=kU,he.isInKeyboardMoveMode=!1,null===(r=he.disposeOnKeyDown)||void 0===r||r.call(he)}:void 0}),M&&he.isInKeyboardMoveMode&&w.createElement("div",{className:be.keyboardMoveIconContainer},M.keyboardMoveIconProps?w.createElement(sM,iN({},M.keyboardMoveIconProps)):w.createElement(sM,{iconName:"move",className:be.keyboardMoveIcon})),w.createElement("div",{ref:_e,className:be.scrollableContent,"data-is-scrollable":!0},M&&ue&&w.createElement(M.menu,{items:[{key:"move",text:M.moveMenuItemText,onClick:function(){var e=function(e){if(e.altKey&&e.ctrlKey&&e.keyCode===nR)return e.preventDefault(),void e.stopPropagation();var t=e.altKey||e.keyCode===iR;if(ue&&t&&pe(),!he.isInKeyboardMoveMode||e.keyCode!==iR&&e.keyCode!==rR||(he.isInKeyboardMoveMode=!1,e.preventDefault(),e.stopPropagation()),he.isInKeyboardMoveMode){var r=!0,i=function(e){var t=10;return e.shiftKey?e.ctrlKey||(t=50):e.ctrlKey&&(t=1),t}(e);switch(e.keyCode){case iR:oe(he.lastSetCoordinates);case rR:he.lastSetCoordinates=kU;break;case sR:oe(function(e){return{x:e.x,y:we("y",e.y-i)}});break;case lR:oe(function(e){return{x:e.x,y:we("y",e.y+i)}});break;case oR:oe(function(e){return{x:we("x",e.x-i),y:e.y}});break;case aR:oe(function(e){return{x:we("x",e.x+i),y:e.y}});break;default:r=!1}r&&(e.preventDefault(),e.stopPropagation())}};he.lastSetCoordinates=ne,pe(),he.isInKeyboardMoveMode=!0,he.events.on(K,"keydown",e,!0),he.disposeOnKeyDown=function(){he.events.off(K,"keydown",e,!0),he.disposeOnKeyDown=void 0}}},{key:"close",text:M.closeMenuItemText,onClick:Ce}],onDismiss:pe,alignTargetEdge:!0,coverTarget:!0,directionalHint:0,directionalHintFixed:!0,shouldFocusOnMount:!0,target:he.scrollableContent}),u));return Z&&W>=(P||VF.small)&&w.createElement(vF,iN({ref:G},ye),w.createElement(Oz,iN({role:ge?"alertdialog":"dialog",ariaLabelledBy:I,ariaDescribedBy:O,onDismiss:k,shouldRestoreFocus:!b,enableAriaHiddenSiblings:z,"aria-modal":!B},F),w.createElement("div",{className:be.root,role:B?void 0:"document"},!B&&w.createElement(bU,iN({"aria-hidden":!0,isDarkThemed:C,onClick:y?void 0:k,allowTouchBodyScroll:l},E)),M?w.createElement(wU,{handleSelector:M.dragHandleSelector||"#".concat(V),preventDragSelector:"button",onStart:ke,onDragChange:Te,onStop:Ee,position:ne},Se):Se)))||null});SU.displayName="Modal";var IU=PB(SU,function(e){var t,r=e.className,i=e.containerClassName,n=e.scrollableContentClassName,o=e.isOpen,s=e.isVisible,a=e.hasBeenOpened,l=e.modalRectangleTop,c=e.theme,u=e.topOffsetFixed,d=e.isModeless,m=e.layerClassName,p=e.isDefaultDragHandle,h=e.windowInnerHeight,f=c.palette,g=c.effects,v=c.fonts,b=EP(hU,c);return{root:[b.root,v.medium,{backgroundColor:"transparent",position:"fixed",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,pointerEvents:"none",transition:"opacity ".concat(pU)},u&&"number"==typeof l&&a&&{alignItems:"flex-start"},o&&b.isOpen,s&&{opacity:1},s&&!d&&{pointerEvents:"auto"},r],main:[b.main,{boxShadow:g.elevation64,borderRadius:g.roundedCorner2,backgroundColor:f.white,boxSizing:"border-box",position:"relative",textAlign:"left",outline:"3px solid transparent",maxHeight:"calc(100% - 32px)",maxWidth:"calc(100% - 32px)",minHeight:"176px",minWidth:"288px",overflowY:"auto",zIndex:d?AP.Layer:void 0},d&&{pointerEvents:"auto"},u&&"number"==typeof l&&a&&{top:l},p&&{cursor:"move"},i],scrollableContent:[b.scrollableContent,{overflowY:"auto",flexGrow:1,maxHeight:"100vh",selectors:(t={},t["@supports (-webkit-overflow-scrolling: touch)"]={maxHeight:h},t)},n],layer:d&&[m,b.layer,{pointerEvents:"none"}],keyboardMoveIconContainer:{position:"absolute",display:"flex",justifyContent:"center",width:"100%",padding:"3px 0px"},keyboardMoveIcon:{fontSize:v.xLargePlus.fontSize,width:"24px"}}},void 0,{scope:"Modal",fields:["theme","styles","enableAriaHiddenSiblings"]});IU.displayName="Modal";var AU=LB(),OU=function(e){function t(t){var r=e.call(this,t)||this;return lM(r),r}return rN(t,e),t.prototype.render=function(){var e=this.props,t=e.className,r=e.styles,i=e.theme;return this._classNames=AU(r,{theme:i,className:t}),w.createElement("div",{className:this._classNames.actions},w.createElement("div",{className:this._classNames.actionsRight},this._renderChildrenAsActions()))},t.prototype._renderChildrenAsActions=function(){var e=this;return w.Children.map(this.props.children,function(t){return t?w.createElement("span",{className:e._classNames.action},t):null})},t}(w.Component),NU={actions:"ms-Dialog-actions",action:"ms-Dialog-action",actionsRight:"ms-Dialog-actionsRight"},RU=PB(OU,function(e){var t=e.className,r=e.theme,i=EP(NU,r);return{actions:[i.actions,{position:"relative",width:"100%",minHeight:"24px",lineHeight:"24px",margin:"16px 0 0",fontSize:"0",selectors:{".ms-Button":{lineHeight:"normal",verticalAlign:"middle"}}},t],action:[i.action,{margin:"0 4px"}],actionsRight:[i.actionsRight,{alignItems:"center",display:"flex",fontSize:"0",justifyContent:"flex-end",marginRight:"-4px"}]}},void 0,{scope:"DialogFooter"});RU.displayName="DialogFooter";var PU=LB(),DU=w.createElement(RU,null).type,BU=function(e){function t(t){var r=e.call(this,t)||this;return lM(r),r}return rN(t,e),t.prototype.render=function(){var e,t=this.props,r=t.showCloseButton,i=t.className,n=t.closeButtonAriaLabel,o=t.onDismiss,s=t.subTextId,a=t.subText,l=t.titleProps,c=void 0===l?{}:l,u=t.titleId,d=t.title,m=t.type,p=t.styles,h=t.theme,f=t.draggableHeaderClassName,g=PU(p,{theme:h,className:i,isLargeHeader:m===sU.largeHeader,isClose:m===sU.close,draggableHeaderClassName:f}),v=this._groupChildren();return a&&(e=w.createElement("p",{className:g.subText,id:s},a)),w.createElement("div",{className:g.content},w.createElement("div",{className:g.header},w.createElement("div",iN({id:u,role:"heading","aria-level":1},c,{className:vB(g.title,c.className)}),d),w.createElement("div",{className:g.topButton},this.props.topButtonsProps.map(function(e,t){return w.createElement(Qj,iN({key:e.uniqueId||t},e))}),(m===sU.close||r&&m!==sU.largeHeader)&&w.createElement(Qj,{className:g.button,iconProps:{iconName:"Cancel"},ariaLabel:n,onClick:o}))),w.createElement("div",{className:g.inner},w.createElement("div",{className:g.innerContent},e,v.contents),v.footers))},t.prototype._groupChildren=function(){var e={footers:[],contents:[]};return w.Children.map(this.props.children,function(t){"object"==typeof t&&null!==t&&t.type===DU?e.footers.push(t):e.contents.push(t)}),e},t.defaultProps={showCloseButton:!1,className:"",topButtonsProps:[],closeButtonAriaLabel:"Close"},oN([rj],t)}(w.Component),MU={contentLgHeader:"ms-Dialog-lgHeader",close:"ms-Dialog--close",subText:"ms-Dialog-subText",header:"ms-Dialog-header",headerLg:"ms-Dialog--lgHeader",button:"ms-Dialog-button ms-Dialog-button--close",inner:"ms-Dialog-inner",content:"ms-Dialog-content",title:"ms-Dialog-title"},LU=PB(BU,function(e){var t,r,i,n=e.className,o=e.theme,s=e.isLargeHeader,a=e.isClose,l=e.hidden,c=e.isMultiline,u=e.draggableHeaderClassName,d=o.palette,m=o.fonts,p=o.effects,h=o.semanticColors,f=EP(MU,o);return{content:[s&&[f.contentLgHeader,{borderTop:"4px solid ".concat(d.themePrimary)}],a&&f.close,{flexGrow:1,overflowY:"hidden"},n],subText:[f.subText,m.medium,{margin:"0 0 24px 0",color:h.bodySubtext,lineHeight:"1.5",wordWrap:"break-word",fontWeight:xP.regular}],header:[f.header,{position:"relative",width:"100%",boxSizing:"border-box"},a&&f.close,u&&[u,{cursor:"move"}]],button:[f.button,l&&{selectors:{".ms-Icon.ms-Icon--Cancel":{color:h.buttonText,fontSize:wP.medium}}}],inner:[f.inner,{padding:"0 24px 24px",selectors:(t={},t["@media (min-width: ".concat(320,"px) and (max-width: ").concat(479,"px)")]={padding:"0 16px 16px"},t)}],innerContent:[f.content,{position:"relative",width:"100%"}],title:[f.title,m.xLarge,{color:h.bodyText,margin:"0",minHeight:m.xLarge.fontSize,padding:"16px 46px 20px 24px",lineHeight:"normal",selectors:(r={},r["@media (min-width: ".concat(320,"px) and (max-width: ").concat(479,"px)")]={padding:"16px 46px 16px 16px"},r)},s&&{color:h.menuHeader},c&&{fontSize:m.xxLarge.fontSize}],topButton:[{display:"flex",flexDirection:"row",flexWrap:"nowrap",position:"absolute",top:"0",right:"0",padding:"15px 15px 0 0",selectors:(i={"> *":{flex:"0 0 auto"},".ms-Dialog-button":{color:h.buttonText},".ms-Dialog-button:hover":{color:h.buttonTextHovered,borderRadius:p.roundedCorner2}},i["@media (min-width: ".concat(320,"px) and (max-width: ").concat(479,"px)")]={padding:"15px 8px 0 0"},i)}]}},void 0,{scope:"DialogContent"});LU.displayName="DialogContent";var zU=LB(),FU={isDarkOverlay:!1,isBlocking:!1,className:"",containerClassName:"",topOffsetFixed:!1,enableAriaHiddenSiblings:!0},jU={type:sU.normal,className:"",topButtonsProps:[]},HU=function(e){function t(t){var r=e.call(this,t)||this;return r._getSubTextId=function(){var e=r.props,t=e.ariaDescribedById,i=e.modalProps,n=e.dialogContentProps,o=e.subText,s=i&&i.subtitleAriaId||t;return s||(s=(n&&n.subText||o)&&r._defaultSubTextId),s},r._getTitleTextId=function(){var e=r.props,t=e.ariaLabelledById,i=e.modalProps,n=e.dialogContentProps,o=e.title,s=i&&i.titleAriaId||t;return s||(s=(n&&n.title||o)&&r._defaultTitleTextId),s},r._id=qD("Dialog"),r._defaultTitleTextId=r._id+"-title",r._defaultSubTextId=r._id+"-subText",r}return rN(t,e),t.prototype.render=function(){var e,t,r,i,n,o=this.props,s=o.className,a=o.containerClassName,l=o.contentClassName,c=o.elementToFocusOnDismiss,u=o.firstFocusableSelector,d=o.forceFocusInsideTrap,m=o.styles,p=o.hidden,h=o.disableRestoreFocus,f=void 0===h?o.ignoreExternalFocusing:h,g=o.isBlocking,v=o.isClickableOutsideFocusTrap,b=o.isDarkOverlay,y=o.isOpen,_=void 0===y?!p:y,x=o.onDismiss,C=o.onDismissed,k=o.onLayerDidMount,T=o.responsiveMode,E=o.subText,S=o.theme,I=o.title,A=o.topButtonsProps,O=o.type,N=o.minWidth,R=o.maxWidth,P=o.modalProps,D=iN({onLayerDidMount:k},null==P?void 0:P.layerProps);(null==P?void 0:P.dragOptions)&&!(null===(e=P.dragOptions)||void 0===e?void 0:e.dragHandleSelector)&&(i="ms-Dialog-draggable-header",(n=iN({},P.dragOptions)).dragHandleSelector=".".concat(i));var B=iN(iN(iN(iN({},FU),{elementToFocusOnDismiss:c,firstFocusableSelector:u,forceFocusInsideTrap:d,disableRestoreFocus:f,isClickableOutsideFocusTrap:v,responsiveMode:T,className:s,containerClassName:a,isBlocking:g,isDarkOverlay:b,onDismissed:C}),P),{dragOptions:n,layerProps:D,isOpen:_}),M=iN(iN(iN({className:l,subText:E,title:I,topButtonsProps:A,type:O},jU),o.dialogContentProps),{draggableHeaderClassName:i,titleProps:iN({id:(null===(t=o.dialogContentProps)||void 0===t?void 0:t.titleId)||this._defaultTitleTextId},null===(r=o.dialogContentProps)||void 0===r?void 0:r.titleProps)}),L=zU(m,{theme:S,className:B.className,containerClassName:B.containerClassName,hidden:p,dialogDefaultMinWidth:N,dialogDefaultMaxWidth:R});return w.createElement(IU,iN({},B,{className:L.root,containerClassName:L.main,onDismiss:x||B.onDismiss,subtitleAriaId:this._getSubTextId(),titleAriaId:this._getTitleTextId()}),w.createElement(LU,iN({subTextId:this._defaultSubTextId,showCloseButton:B.isBlocking,onDismiss:x},M),o.children))},t.defaultProps={hidden:!0},oN([rj],t)}(w.Component),qU={root:"ms-Dialog"},UU=PB(HU,function(e){var t,r=e.className,i=e.containerClassName,n=e.dialogDefaultMinWidth,o=void 0===n?"288px":n,s=e.dialogDefaultMaxWidth,a=void 0===s?"340px":s,l=e.hidden,c=e.theme;return{root:[EP(qU,c).root,c.fonts.medium,r],main:[{width:o,outline:"3px solid transparent",selectors:(t={},t["@media (min-width: ".concat(480,"px)")]={width:"auto",maxWidth:a,minWidth:o},t)},!l&&{display:"flex"},i]}},void 0,{scope:"Dialog"});UU.displayName="Dialog";var GU=r(64583).Promise,WU=function(e,t,r,i){return new(r||(r=GU))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};const VU=Km({type:gm().min(1,"タイプは必須です"),title:gm().min(1,"タイトルは必須です"),author:Wm(Km({family:gm().optional(),given:gm().optional()})).optional(),issued:Km({"date-parts":Wm(Wm(function(e,t){return new e({type:"number",checks:[],...Mc(t)})}(Lm,$U)))}).optional(),language:gm().optional(),DOI:gm().optional(),URL:gm().optional(),ISBN:gm().optional(),"container-title":gm().optional(),publisher:gm().optional(),"publisher-place":gm().optional(),page:gm().optional(),volume:gm().optional(),issue:gm().optional(),genre:gm().optional(),"archive-location":gm().optional(),version:gm().optional(),note:gm().optional()}).refine(e=>"article-journal"===e.type?e["container-title"]&&e["container-title"].length>0:"book"!==e.type||e.publisher&&e.publisher.length>0||e.ISBN&&e.ISBN.length>0,{message:"タイプに応じた必須フィールドが不足しています",path:["type"]}),KU=Kt({root:{padding:"8px 12px",width:"100%",maxWidth:"100%",boxSizing:"border-box",overflowX:"hidden"},field:{marginBottom:"16px"},label:{display:"block",marginBottom:"4px",fontWeight:"bold"},authorList:{border:"1px solid #ddd",padding:"8px",maxHeight:"200px",overflowY:"auto"},authorItem:{display:"flex",alignItems:"center",marginBottom:"8px"},buttons:{display:"flex",gap:"8px",marginTop:"16px"}});var $U,YU=({selectedItem:e,onBack:t})=>{var r,i,n;const o=KU(),[s,a]=w.useState(e||{type:"article-journal"}),[l,c]=w.useState((null==e?void 0:e.author)||[]),[u,d]=w.useState(!1);w.useEffect(()=>{e?(a(e),c(e.author||[])):(a({type:"article-journal"}),c([]))},[e]);const m=(e,t,r)=>{const i=[...l];i[e]=Object.assign(Object.assign({},i[e]),{[t]:r}),c(i)};return w.createElement("div",{className:o.root},w.createElement("h2",null,"文献詳細"),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"タイプ"),w.createElement(gl,{value:s.type,onOptionSelect:(e,t)=>a(Object.assign(Object.assign({},s),{type:t.optionValue}))},w.createElement(bl,{value:"article-journal"},"論文"),w.createElement(bl,{value:"book"},"書籍"),w.createElement(bl,{value:"chapter"},"章"),w.createElement(bl,{value:"paper-conference"},"会議論文"),w.createElement(bl,{value:"thesis"},"学位論文"),w.createElement(bl,{value:"report"},"レポート"),w.createElement(bl,{value:"webpage"},"ウェブページ"),w.createElement(bl,{value:"dataset"},"データセット"),w.createElement(bl,{value:"software"},"ソフトウェア"))),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"タイトル *"),w.createElement(no,{value:s.title||"",onChange:e=>a(Object.assign(Object.assign({},s),{title:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"著者"),w.createElement("div",{className:o.authorList},l.map((e,t)=>w.createElement("div",{key:t,className:o.authorItem},w.createElement(no,{placeholder:"姓",value:e.family||"",onChange:e=>m(t,"family",e.target.value)}),w.createElement(no,{placeholder:"名",value:e.given||"",onChange:e=>m(t,"given",e.target.value),style:{marginLeft:"8px"}}),w.createElement(Ol,{onClick:()=>(e=>{c(l.filter((t,r)=>r!==e))})(t),style:{marginLeft:"8px"}},"削除"))),w.createElement(Ol,{onClick:()=>{c([...l,{family:"",given:""}])}},"著者を追加"))),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"発行年 *"),w.createElement(no,{value:(null===(n=null===(i=null===(r=s.issued)||void 0===r?void 0:r["date-parts"])||void 0===i?void 0:i[0])||void 0===n?void 0:n[0])||"",onChange:e=>a(Object.assign(Object.assign({},s),{issued:{"date-parts":[[parseInt(e.target.value)]]}}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"言語"),w.createElement(no,{value:s.language||"",onChange:e=>a(Object.assign(Object.assign({},s),{language:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"DOI"),w.createElement(no,{value:s.DOI||"",onChange:e=>a(Object.assign(Object.assign({},s),{DOI:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"URL"),w.createElement(no,{value:s.URL||"",onChange:e=>a(Object.assign(Object.assign({},s),{URL:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"ISBN"),w.createElement(no,{value:s.ISBN||"",onChange:e=>a(Object.assign(Object.assign({},s),{ISBN:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"コンテナタイトル (雑誌名など)"),w.createElement(no,{value:s["container-title"]||"",onChange:e=>a(Object.assign(Object.assign({},s),{"container-title":e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"出版社"),w.createElement(no,{value:s.publisher||"",onChange:e=>a(Object.assign(Object.assign({},s),{publisher:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"出版社場所"),w.createElement(no,{value:s["publisher-place"]||"",onChange:e=>a(Object.assign(Object.assign({},s),{"publisher-place":e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"ページ"),w.createElement(no,{value:s.page||"",onChange:e=>a(Object.assign(Object.assign({},s),{page:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"巻"),w.createElement(no,{value:s.volume||"",onChange:e=>a(Object.assign(Object.assign({},s),{volume:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"号"),w.createElement(no,{value:s.issue||"",onChange:e=>a(Object.assign(Object.assign({},s),{issue:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"ジャンル (学位種別など)"),w.createElement(no,{value:s.genre||"",onChange:e=>a(Object.assign(Object.assign({},s),{genre:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"アーカイブ場所"),w.createElement(no,{value:s["archive-location"]||"",onChange:e=>a(Object.assign(Object.assign({},s),{"archive-location":e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"バージョン"),w.createElement(no,{value:s.version||"",onChange:e=>a(Object.assign(Object.assign({},s),{version:e.target.value}))})),w.createElement("div",{className:o.field},w.createElement("label",{className:o.label},"ノート"),w.createElement(oU,{value:s.note||"",onChange:e=>a(Object.assign(Object.assign({},s),{note:e.target.value}))})),w.createElement("div",{className:o.buttons},w.createElement(Ol,{onClick:()=>WU(void 0,void 0,void 0,function*(){var e;try{const r=Object.assign(Object.assign({},s),{author:l}),i=VU.safeParse(r);if(!i.success){const e=i.error.format();return void YO(Object.values(e).flat().filter(e=>"object"==typeof e&&null!==e&&"message"in e).map(e=>e.message).join(", "),"error")}const n=yield Bl.loadLibrary(),o=n.findIndex(e=>Sb.stableKey(e)===Sb.stableKey(r));o>=0?n[o]=r:n.push(r),yield Bl.saveLibrary(n),YO("保存しました","success"),t&&t();const a=yield Bl.loadSettings();(null===(e=null==a?void 0:a.sharedLibrary)||void 0===e?void 0:e.enabled)&&(yield $O.saveToFolder(a.sharedLibrary.filename))}catch(e){console.error(e),YO("保存に失敗しました","error")}})},"保存"),w.createElement(Ol,{onClick:()=>{const e=Object.assign(Object.assign({},s),{title:`${s.title} (コピー)`});a(e),c([...l])}},"複製"),w.createElement(Ol,{onClick:()=>d(!0)},"削除"),w.createElement(Ol,{onClick:()=>{a({type:"article-journal"}),c([]),null==t||t()}},"閉じる")),w.createElement(UU,{hidden:!u,onDismiss:()=>d(!1),dialogContentProps:{title:"削除確認",subText:"本当に削除してもよろしいですか？"}},w.createElement(RU,null,w.createElement(eH,{onClick:()=>WU(void 0,void 0,void 0,function*(){d(!1);try{const e=(yield Bl.loadLibrary()).filter(e=>Sb.stableKey(e)!==Sb.stableKey(s));yield Bl.saveLibrary(e),YO("削除しました","success"),a({type:"article-journal"}),c([])}catch(e){console.error(e),YO("削除に失敗しました","error")}}),text:"はい"}),w.createElement(Kj,{onClick:()=>d(!1),text:"いいえ"}))))},JU=r(64583).Promise,XU=function(e,t,r,i){return new(r||(r=JU))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};class ZU{static init(){return XU(this,void 0,void 0,function*(){yield Rb.initOnce(),this.engine=Rb.engine})}static rebuild(){return XU(this,void 0,void 0,function*(){const e=yield jl.findOrCreateBibliographyCC(),t=yield jl.enumerateCiteCCs(),r=new Set,i=[];for(const e of t)JSON.parse(e.tag).keys.forEach(e=>{r.has(e)||(r.add(e),i.push(e))});const n=yield Bl.loadSettings();"numeric"===((null==n?void 0:n.style)||"author-date")&&i.sort((e,r)=>{var i,n;return(((null===(i=t.find(t=>JSON.parse(t.tag).keys.includes(e)))||void 0===i?void 0:i.tag)?JSON.parse(t.find(t=>JSON.parse(t.tag).keys.includes(e)).tag).seq:0)||0)-(((null===(n=t.find(e=>JSON.parse(e.tag).keys.includes(r)))||void 0===n?void 0:n.tag)?JSON.parse(t.find(e=>JSON.parse(e.tag).keys.includes(r)).tag).seq:0)||0)});const o=yield ZU.engine.formatBibliography(i);e.insertHtml(o,Word.InsertLocation.replace),yield Word.run(e=>XU(this,void 0,void 0,function*(){yield e.sync()}))})}static formatBibliography(e){return XU(this,void 0,void 0,function*(){this.engine||(yield Rb.initOnce(),this.engine=Rb.engine);const t=yield Bl.loadSettings(),r=(null==t?void 0:t.style)||"author-date";return yield this.engine.formatBibliography(e,r)})}static updateBibliographyInDocument(e){return XU(this,void 0,void 0,function*(){const t=(yield Bl.loadSettings())||{};t.style=e,yield Bl.saveSettings(t),yield Rb.initOnce(),yield this.rebuild()})}}var QU=r(64583).Promise,eG=function(e,t,r,i){return new(r||(r=QU))(function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};const tG=Kt({root:{padding:"8px 12px",display:"flex",flexDirection:"column",height:"100%",width:"100%",maxWidth:"100%",boxSizing:"border-box",overflowX:"hidden"},controls:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},preview:{flex:1,border:"1px solid #ddd",padding:"8px",overflowY:"auto",backgroundColor:"#f9f9f9",lineHeight:"1.6",fontFamily:"monospace"},buttons:{display:"flex",gap:"8px",marginTop:"16px"}});var rG=()=>{const e=tG(),[t,r]=w.useState("jis-like"),[i,n]=w.useState("");w.useEffect(()=>{o()},[t]);const o=()=>eG(void 0,void 0,void 0,function*(){try{const e=(yield Bl.loadLibrary()).map(e=>e.id||e.DOI||"unknown"),t=yield ZU.formatBibliography(e);n(t)}catch(e){console.error(e),n("<p>プレビュー生成に失敗しました</p>")}});return w.createElement("div",{className:e.root},w.createElement("h2",null,"参考文献プレビュー"),w.createElement("div",{className:e.controls},w.createElement("label",null,"スタイル:"),w.createElement(gl,{value:t,onOptionSelect:(e,t)=>{return i=t.optionValue,void r(i);var i}},w.createElement(bl,{value:"jis-like"},"JIS"),w.createElement(bl,{value:"apa"},"APA"),w.createElement(bl,{value:"mla"},"MLA"),w.createElement(bl,{value:"chicago-author-date"},"Chicago (Author-Date)"),w.createElement(bl,{value:"chicago-notes-bibliography"},"Chicago (Notes)"),w.createElement(bl,{value:"ieee"},"IEEE"),w.createElement(bl,{value:"vancouver"},"Vancouver"),w.createElement(bl,{value:"ama"},"AMA"),w.createElement(bl,{value:"harvard"},"Harvard"))),w.createElement("div",{className:e.preview,dangerouslySetInnerHTML:{__html:i}}),w.createElement("div",{className:e.buttons},w.createElement(Ol,{onClick:()=>eG(void 0,void 0,void 0,function*(){try{yield navigator.clipboard.writeText(i),YO("コピーしました","success")}catch(e){console.error(e),YO("コピーに失敗しました","error")}})},"コピー"),w.createElement(Ol,{onClick:()=>eG(void 0,void 0,void 0,function*(){try{yield ZU.updateBibliographyInDocument(t),YO("参考文献を本文に反映しました","success")}catch(e){console.error(e),YO("反映に失敗しました","error")}})},"本文に反映")))};const iG=Kt({root:{minHeight:"100vh",display:"flex",flexDirection:"column",width:"100%",maxWidth:"100%",minWidth:0,overflowX:"hidden",boxSizing:"border-box"},tabContent:{flex:1,padding:"8px 12px",overflowY:"auto",overflowX:"hidden",width:"100%",maxWidth:"100%",minWidth:0,boxSizing:"border-box"}});var nG=()=>{const e=iG(),[t,r]=w.useState("library"),[i,n]=w.useState(null),[o,s]=w.useState("jis-like");return w.createElement("div",{className:e.root},w.createElement(eN,{onGlobalSearch:e=>{console.log("Global search:",e)},onStyleChange:e=>{s(e)},onSync:()=>{}}),w.createElement(Sn,{selectedValue:t,onTabSelect:(e,t)=>r(t.value)},w.createElement(Wn,{value:"library"},"ライブラリ"),w.createElement(Wn,{value:"detail"},"詳細編集"),w.createElement(Wn,{value:"bibliography"},"参考文献")),w.createElement("div",{className:e.tabContent},"library"===t&&w.createElement(tU,{onItemSelect:e=>{n(e),r("detail")}}),"detail"===t&&w.createElement(YU,{selectedItem:i,onBack:()=>r("library")}),"bibliography"===t&&w.createElement(rG,null)))};const oG=w.createContext(void 0),sG=oG.Provider,aG=w.createContext(void 0).Provider,lG="fui-FluentProvider",cG=bn({root:{sj55zd:"f19n0e5",De3pzq:"fxugw4r",fsow6f:["f1o700av","fes3tcz"],Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"figsok6",Bg96gwp:"f1i3iumi"}},{d:[".f19n0e5{color:var(--colorNeutralForeground1);}",".fxugw4r{background-color:var(--colorNeutralBackground1);}",".f1o700av{text-align:left;}",".fes3tcz{text-align:right;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".fkhj508{font-size:var(--fontSizeBase300);}",".figsok6{font-weight:var(--fontWeightRegular);}",".f1i3iumi{line-height:var(--lineHeightBase300);}"]}),uG=C.useInsertionEffect?C.useInsertionEffect:Ti,dG={},mG={},pG=(e,t)=>{const r=wi(),i=w.useContext(oG),n=Jn(),o=w.useContext(Cn)||dG,{applyStylesToPortals:s=!0,customStyleHooks_unstable:a,dir:l=r.dir,targetDocument:c=r.targetDocument,theme:u,overrides_unstable:d={}}=e,m=hG(i,u),p=hG(n,d),h=hG(o,a),f=Ut();var g;const{styleTagId:v,rule:b}=(e=>{const{targetDocument:t,theme:r,rendererAttributes:i}=e,n=w.useRef(),o=Va(lG),s=i,a=w.useMemo(()=>function(e,t){return t?`${e} { ${Object.keys(t).reduce((e,r)=>`${e}--${r}: ${t[r]}; `,"")} }`:`${e} {}`}(`.${o}`,r),[r,o]);return function(e,t){w.useState(()=>{if(!e)return;const r=e.getElementById(t);r&&e.head.append(r)})}(t,o),uG(()=>{const e=null==t?void 0:t.getElementById(o);return e?n.current=e:(n.current=((e,t)=>{if(!(null==e?void 0:e.head))return;const r=e.createElement("style");return Object.keys(t).forEach(e=>{r.setAttribute(e,t[e])}),e.head.appendChild(r),r})(t,{...s,id:o}),n.current&&((e,t)=>{const r=e.sheet;r&&(r.cssRules.length>0&&r.deleteRule(0),r.insertRule(t,0))})(n.current,a)),()=>{var e;null===(e=n.current)||void 0===e||e.remove()}},[o,t,a,s]),{styleTagId:o,rule:a}})({theme:m,targetDocument:c,rendererAttributes:null!==(g=f.styleElementAttributes)&&void 0!==g?g:mG});return{applyStylesToPortals:s,customStyleHooks_unstable:h,dir:l,targetDocument:c,theme:m,overrides_unstable:p,themeClassName:v,components:{root:"div"},root:Mi(tn("div",{...e,dir:l,ref:rn(t,nl({targetDocument:c}))}),{elementType:"div"}),serverStyleProps:{cssRule:b,attributes:{...f.styleElementAttributes,id:v}}}};function hG(e,t){return e&&t?{...e,...t}:e||t}const fG=w.forwardRef((e,t)=>{const r=pG(e,t);(e=>{const t=Ut(),r=cG({dir:e.dir,renderer:t});e.root.className=xn(lG,e.themeClassName,r.root,e.root.className)})(r);const i=function(e){const{applyStylesToPortals:t,customStyleHooks_unstable:r,dir:i,root:n,targetDocument:o,theme:s,themeClassName:a,overrides_unstable:l}=e,c=w.useMemo(()=>({dir:i,targetDocument:o}),[i,o]),[u]=w.useState(()=>({})),d=w.useMemo(()=>({textDirection:i}),[i]);return{customStyleHooks_unstable:r,overrides_unstable:l,provider:c,textDirection:i,iconDirection:d,tooltip:u,theme:s,themeClassName:t?n.className:a}}(r);return((e,t)=>cn(xi,{value:t.provider,children:cn(sG,{value:t.theme,children:cn(el,{value:t.themeClassName,children:cn(Tn,{value:t.customStyleHooks_unstable,children:cn(aG,{value:t.tooltip,children:cn(Wt,{dir:t.textDirection,children:cn(yo,{value:t.iconDirection,children:cn(Yn,{value:t.overrides_unstable,children:un(e.root,{children:[ki()?null:cn("style",{dangerouslySetInnerHTML:{__html:e.serverStyleProps.cssRule},...e.serverStyleProps.attributes}),e.root.children]})})})})})})})})}))(r,i)});fG.displayName="FluentProvider";const gG="#242424",vG="#424242",bG="#616161",yG="#bdbdbd",_G="#e0e0e0",xG="#e6e6e6",wG="#ebebeb",CG="#f0f0f0",kG="#f5f5f5",TG="#fafafa",EG="rgba(255, 255, 255, 0.4)",SG="rgba(255, 255, 255, 0.5)",IG="rgba(0, 0, 0, 0.05)",AG="rgba(0, 0, 0, 0.1)",OG="#ffffff",NG={shade50:"#200205",shade40:"#3b0509",shade30:"#6e0811",shade20:"#960b18",shade10:"#b10e1c",primary:"#c50f1f",tint10:"#cc2635",tint20:"#d33f4c",tint30:"#dc626d",tint40:"#eeacb2",tint50:"#f6d1d5",tint60:"#fdf3f4"},RG={shade50:"#031403",shade40:"#052505",shade30:"#094509",shade20:"#0c5e0c",shade10:"#0e700e",primary:"#107c10",tint10:"#218c21",tint20:"#359b35",tint30:"#54b054",tint40:"#9fd89f",tint50:"#c9eac9",tint60:"#f1faf1"},PG={red:{shade50:"#210809",shade40:"#3f1011",shade30:"#751d1f",shade20:"#9f282b",shade10:"#bc2f32",primary:"#d13438",tint10:"#d7494c",tint20:"#dc5e62",tint30:"#e37d80",tint40:"#f1bbbc",tint50:"#f8dadb",tint60:"#fdf6f6"},green:RG,darkOrange:{shade50:"#230900",shade40:"#411200",shade30:"#7a2101",shade20:"#a62d01",shade10:"#c43501",primary:"#da3b01",tint10:"#de501c",tint20:"#e36537",tint30:"#e9835e",tint40:"#f4bfab",tint50:"#f9dcd1",tint60:"#fdf6f3"},yellow:{shade50:"#282400",shade40:"#4c4400",shade30:"#817400",shade20:"#c0ad00",shade10:"#e4cc00",primary:"#fde300",tint10:"#fde61e",tint20:"#fdea3d",tint30:"#feee66",tint40:"#fef7b2",tint50:"#fffad6",tint60:"#fffef5"},berry:{shade50:"#1f091d",shade40:"#3a1136",shade30:"#6d2064",shade20:"#932b88",shade10:"#af33a1",primary:"#c239b3",tint10:"#c94cbc",tint20:"#d161c4",tint30:"#da7ed0",tint40:"#edbbe7",tint50:"#f5daf2",tint60:"#fdf5fc"},lightGreen:{shade50:"#031a02",shade40:"#063004",shade30:"#0b5a08",shade20:"#0e7a0b",shade10:"#11910d",primary:"#13a10e",tint10:"#27ac22",tint20:"#3db838",tint30:"#5ec75a",tint40:"#a7e3a5",tint50:"#cef0cd",tint60:"#f2fbf2"},marigold:{shade50:"#251a00",shade40:"#463100",shade30:"#835b00",shade20:"#b27c00",shade10:"#d39300",primary:"#eaa300",tint10:"#edad1c",tint20:"#efb839",tint30:"#f2c661",tint40:"#f9e2ae",tint50:"#fcefd3",tint60:"#fefbf4"}},DG={darkRed:{shade50:"#130204",shade40:"#230308",shade30:"#420610",shade20:"#590815",shade10:"#690a19",primary:"#750b1c",tint10:"#861b2c",tint20:"#962f3f",tint30:"#ac4f5e",tint40:"#d69ca5",tint50:"#e9c7cd",tint60:"#f9f0f2"},cranberry:NG,pumpkin:{shade50:"#200d03",shade40:"#3d1805",shade30:"#712d09",shade20:"#9a3d0c",shade10:"#b6480e",primary:"#ca5010",tint10:"#d06228",tint20:"#d77440",tint30:"#df8e64",tint40:"#efc4ad",tint50:"#f7dfd2",tint60:"#fdf7f4"},peach:{shade50:"#291600",shade40:"#4d2a00",shade30:"#8f4e00",shade20:"#c26a00",shade10:"#e67e00",primary:"#ff8c00",tint10:"#ff9a1f",tint20:"#ffa83d",tint30:"#ffba66",tint40:"#ffddb3",tint50:"#ffedd6",tint60:"#fffaf5"},gold:{shade50:"#1f1900",shade40:"#3a2f00",shade30:"#6c5700",shade20:"#937700",shade10:"#ae8c00",primary:"#c19c00",tint10:"#c8a718",tint20:"#d0b232",tint30:"#dac157",tint40:"#ecdfa5",tint50:"#f5eece",tint60:"#fdfbf2"},brass:{shade50:"#181202",shade40:"#2e2103",shade30:"#553e06",shade20:"#745408",shade10:"#89640a",primary:"#986f0b",tint10:"#a47d1e",tint20:"#b18c34",tint30:"#c1a256",tint40:"#e0cea2",tint50:"#efe4cb",tint60:"#fbf8f2"},brown:{shade50:"#170e07",shade40:"#2b1a0e",shade30:"#50301a",shade20:"#6c4123",shade10:"#804d29",primary:"#8e562e",tint10:"#9c663f",tint20:"#a97652",tint30:"#bb8f6f",tint40:"#ddc3b0",tint50:"#edded3",tint60:"#faf7f4"},forest:{shade50:"#0c1501",shade40:"#162702",shade30:"#294903",shade20:"#376304",shade10:"#427505",primary:"#498205",tint10:"#599116",tint20:"#6ba02b",tint30:"#85b44c",tint40:"#bdd99b",tint50:"#dbebc7",tint60:"#f6faf0"},seafoam:{shade50:"#002111",shade40:"#003d20",shade30:"#00723b",shade20:"#009b51",shade10:"#00b85f",primary:"#00cc6a",tint10:"#19d279",tint20:"#34d889",tint30:"#5ae0a0",tint40:"#a8f0cd",tint50:"#cff7e4",tint60:"#f3fdf8"},darkGreen:{shade50:"#021102",shade40:"#032003",shade30:"#063b06",shade20:"#085108",shade10:"#0a5f0a",primary:"#0b6a0b",tint10:"#1a7c1a",tint20:"#2d8e2d",tint30:"#4da64d",tint40:"#9ad29a",tint50:"#c6e7c6",tint60:"#f0f9f0"},lightTeal:{shade50:"#001d1f",shade40:"#00373a",shade30:"#00666d",shade20:"#008b94",shade10:"#00a5af",primary:"#00b7c3",tint10:"#18bfca",tint20:"#32c8d1",tint30:"#58d3db",tint40:"#a6e9ed",tint50:"#cef3f5",tint60:"#f2fcfd"},teal:{shade50:"#001516",shade40:"#012728",shade30:"#02494c",shade20:"#026467",shade10:"#037679",primary:"#038387",tint10:"#159195",tint20:"#2aa0a4",tint30:"#4cb4b7",tint40:"#9bd9db",tint50:"#c7ebec",tint60:"#f0fafa"},steel:{shade50:"#000f12",shade40:"#001b22",shade30:"#00333f",shade20:"#004555",shade10:"#005265",primary:"#005b70",tint10:"#0f6c81",tint20:"#237d92",tint30:"#4496a9",tint40:"#94c8d4",tint50:"#c3e1e8",tint60:"#eff7f9"},blue:{shade50:"#001322",shade40:"#002440",shade30:"#004377",shade20:"#005ba1",shade10:"#006cbf",primary:"#0078d4",tint10:"#1a86d9",tint20:"#3595de",tint30:"#5caae5",tint40:"#a9d3f2",tint50:"#d0e7f8",tint60:"#f3f9fd"},royalBlue:{shade50:"#000c16",shade40:"#00172a",shade30:"#002c4e",shade20:"#003b6a",shade10:"#00467e",primary:"#004e8c",tint10:"#125e9a",tint20:"#286fa8",tint30:"#4a89ba",tint40:"#9abfdc",tint50:"#c7dced",tint60:"#f0f6fa"},cornflower:{shade50:"#0d1126",shade40:"#182047",shade30:"#2c3c85",shade20:"#3c51b4",shade10:"#4760d5",primary:"#4f6bed",tint10:"#637cef",tint20:"#778df1",tint30:"#93a4f4",tint40:"#c8d1fa",tint50:"#e1e6fc",tint60:"#f7f9fe"},navy:{shade50:"#00061d",shade40:"#000c36",shade30:"#001665",shade20:"#001e89",shade10:"#0023a2",primary:"#0027b4",tint10:"#173bbd",tint20:"#3050c6",tint30:"#546fd2",tint40:"#a3b2e8",tint50:"#ccd5f3",tint60:"#f2f4fc"},lavender:{shade50:"#120f25",shade40:"#221d46",shade30:"#3f3682",shade20:"#5649b0",shade10:"#6656d1",primary:"#7160e8",tint10:"#8172eb",tint20:"#9184ee",tint30:"#a79cf1",tint40:"#d2ccf8",tint50:"#e7e4fb",tint60:"#f9f8fe"},purple:{shade50:"#0f0717",shade40:"#1c0e2b",shade30:"#341a51",shade20:"#46236e",shade10:"#532982",primary:"#5c2e91",tint10:"#6b3f9e",tint20:"#7c52ab",tint30:"#9470bd",tint40:"#c6b1de",tint50:"#e0d3ed",tint60:"#f7f4fb"},grape:{shade50:"#160418",shade40:"#29072e",shade30:"#4c0d55",shade20:"#671174",shade10:"#7a1589",primary:"#881798",tint10:"#952aa4",tint20:"#a33fb1",tint30:"#b55fc1",tint40:"#d9a7e0",tint50:"#eaceef",tint60:"#faf2fb"},lilac:{shade50:"#1c0b1f",shade40:"#35153a",shade30:"#63276d",shade20:"#863593",shade10:"#9f3faf",primary:"#b146c2",tint10:"#ba58c9",tint20:"#c36bd1",tint30:"#cf87da",tint40:"#e6bfed",tint50:"#f2dcf5",tint60:"#fcf6fd"},pink:{shade50:"#24091b",shade40:"#441232",shade30:"#80215d",shade20:"#ad2d7e",shade10:"#cd3595",primary:"#e43ba6",tint10:"#e750b0",tint20:"#ea66ba",tint30:"#ef85c8",tint40:"#f7c0e3",tint50:"#fbddf0",tint60:"#fef6fb"},magenta:{shade50:"#1f0013",shade40:"#390024",shade30:"#6b0043",shade20:"#91005a",shade10:"#ac006b",primary:"#bf0077",tint10:"#c71885",tint20:"#ce3293",tint30:"#d957a8",tint40:"#eca5d1",tint50:"#f5cee6",tint60:"#fcf2f9"},plum:{shade50:"#13000c",shade40:"#240017",shade30:"#43002b",shade20:"#5a003b",shade10:"#6b0045",primary:"#77004d",tint10:"#87105d",tint20:"#98246f",tint30:"#ad4589",tint40:"#d696c0",tint50:"#e9c4dc",tint60:"#faf0f6"},beige:{shade50:"#141313",shade40:"#252323",shade30:"#444241",shade20:"#5d5958",shade10:"#6e6968",primary:"#7a7574",tint10:"#8a8584",tint20:"#9a9594",tint30:"#afabaa",tint40:"#d7d4d4",tint50:"#eae8e8",tint60:"#faf9f9"},mink:{shade50:"#0f0e0e",shade40:"#1c1b1a",shade30:"#343231",shade20:"#474443",shade10:"#54514f",primary:"#5d5a58",tint10:"#706d6b",tint20:"#84817e",tint30:"#9e9b99",tint40:"#cecccb",tint50:"#e5e4e3",tint60:"#f8f8f8"},platinum:{shade50:"#111314",shade40:"#1f2426",shade30:"#3b4447",shade20:"#505c60",shade10:"#5f6d71",primary:"#69797e",tint10:"#79898d",tint20:"#89989d",tint30:"#a0adb2",tint40:"#cdd6d8",tint50:"#e4e9ea",tint60:"#f8f9fa"},anchor:{shade50:"#090a0b",shade40:"#111315",shade30:"#202427",shade20:"#2b3135",shade10:"#333a3f",primary:"#394146",tint10:"#4d565c",tint20:"#626c72",tint30:"#808a90",tint40:"#bcc3c7",tint50:"#dbdfe1",tint60:"#f6f7f8"}},BG={cranberry:NG,green:RG,orange:{shade50:"#271002",shade40:"#4a1e04",shade30:"#8a3707",shade20:"#bc4b09",shade10:"#de590b",primary:"#f7630c",tint10:"#f87528",tint20:"#f98845",tint30:"#faa06b",tint40:"#fdcfb4",tint50:"#fee5d7",tint60:"#fff9f5"}},MG={success:"green",warning:"orange",danger:"cranberry"},LG=["red","green","darkOrange","yellow","berry","lightGreen","marigold"].reduce((e,t)=>{const r=t.slice(0,1).toUpperCase()+t.slice(1),i={[`colorPalette${r}Background1`]:PG[t].tint60,[`colorPalette${r}Background2`]:PG[t].tint40,[`colorPalette${r}Background3`]:PG[t].primary,[`colorPalette${r}Foreground1`]:PG[t].shade10,[`colorPalette${r}Foreground2`]:PG[t].shade30,[`colorPalette${r}Foreground3`]:PG[t].primary,[`colorPalette${r}BorderActive`]:PG[t].primary,[`colorPalette${r}Border1`]:PG[t].tint40,[`colorPalette${r}Border2`]:PG[t].primary};return Object.assign(e,i)},{});LG.colorPaletteYellowForeground1=PG.yellow.shade30,LG.colorPaletteRedForegroundInverted=PG.red.tint20,LG.colorPaletteGreenForegroundInverted=PG.green.tint20,LG.colorPaletteYellowForegroundInverted=PG.yellow.tint40;const zG=["darkRed","cranberry","pumpkin","peach","gold","brass","brown","forest","seafoam","darkGreen","lightTeal","teal","steel","blue","royalBlue","cornflower","navy","lavender","purple","grape","lilac","pink","magenta","plum","beige","mink","platinum","anchor"].reduce((e,t)=>{const r=t.slice(0,1).toUpperCase()+t.slice(1),i={[`colorPalette${r}Background2`]:DG[t].tint40,[`colorPalette${r}Foreground2`]:DG[t].shade30,[`colorPalette${r}BorderActive`]:DG[t].primary};return Object.assign(e,i)},{}),FG={...LG,...zG},jG=Object.entries(MG).reduce((e,[t,r])=>{const i=t.slice(0,1).toUpperCase()+t.slice(1),n={[`colorStatus${i}Background1`]:BG[r].tint60,[`colorStatus${i}Background2`]:BG[r].tint40,[`colorStatus${i}Background3`]:BG[r].primary,[`colorStatus${i}Foreground1`]:BG[r].shade10,[`colorStatus${i}Foreground2`]:BG[r].shade30,[`colorStatus${i}Foreground3`]:BG[r].primary,[`colorStatus${i}ForegroundInverted`]:BG[r].tint30,[`colorStatus${i}BorderActive`]:BG[r].primary,[`colorStatus${i}Border1`]:BG[r].tint40,[`colorStatus${i}Border2`]:BG[r].primary};return Object.assign(e,n)},{});jG.colorStatusDangerBackground3Hover=BG[MG.danger].shade10,jG.colorStatusDangerBackground3Pressed=BG[MG.danger].shade20,jG.colorStatusWarningForeground1=BG[MG.warning].shade20,jG.colorStatusWarningForeground3=BG[MG.warning].shade20,jG.colorStatusWarningBorder2=BG[MG.warning].shade20;const HG={borderRadiusNone:"0",borderRadiusSmall:"2px",borderRadiusMedium:"4px",borderRadiusLarge:"6px",borderRadiusXLarge:"8px",borderRadiusCircular:"10000px"},qG={fontSizeBase100:"10px",fontSizeBase200:"12px",fontSizeBase300:"14px",fontSizeBase400:"16px",fontSizeBase500:"20px",fontSizeBase600:"24px",fontSizeHero700:"28px",fontSizeHero800:"32px",fontSizeHero900:"40px",fontSizeHero1000:"68px"},UG={lineHeightBase100:"14px",lineHeightBase200:"16px",lineHeightBase300:"20px",lineHeightBase400:"22px",lineHeightBase500:"28px",lineHeightBase600:"32px",lineHeightHero700:"36px",lineHeightHero800:"40px",lineHeightHero900:"52px",lineHeightHero1000:"92px"},GG={fontWeightRegular:400,fontWeightMedium:500,fontWeightSemibold:600,fontWeightBold:700},WG={fontFamilyBase:"'Segoe UI', 'Segoe UI Web (West European)', -apple-system, BlinkMacSystemFont, Roboto, 'Helvetica Neue', sans-serif",fontFamilyMonospace:"Consolas, 'Courier New', Courier, monospace",fontFamilyNumeric:"Bahnschrift, 'Segoe UI', 'Segoe UI Web (West European)', -apple-system, BlinkMacSystemFont, Roboto, 'Helvetica Neue', sans-serif"},VG={strokeWidthThin:"1px",strokeWidthThick:"2px",strokeWidthThicker:"3px",strokeWidthThickest:"4px"};function KG(e,t,r=""){return{[`shadow2${r}`]:`0 0 2px ${e}, 0 1px 2px ${t}`,[`shadow4${r}`]:`0 0 2px ${e}, 0 2px 4px ${t}`,[`shadow8${r}`]:`0 0 2px ${e}, 0 4px 8px ${t}`,[`shadow16${r}`]:`0 0 2px ${e}, 0 8px 16px ${t}`,[`shadow28${r}`]:`0 0 8px ${e}, 0 14px 28px ${t}`,[`shadow64${r}`]:`0 0 8px ${e}, 0 32px 64px ${t}`}}const $G={durationUltraFast:"50ms",durationFaster:"100ms",durationFast:"150ms",durationNormal:"200ms",durationGentle:"250ms",durationSlow:"300ms",durationSlower:"400ms",durationUltraSlow:"500ms"},YG={curveAccelerateMax:"cubic-bezier(0.9,0.1,1,0.2)",curveAccelerateMid:"cubic-bezier(1,0,1,1)",curveAccelerateMin:"cubic-bezier(0.8,0,0.78,1)",curveDecelerateMax:"cubic-bezier(0.1,0.9,0.2,1)",curveDecelerateMid:"cubic-bezier(0,0,0,1)",curveDecelerateMin:"cubic-bezier(0.33,0,0.1,1)",curveEasyEaseMax:"cubic-bezier(0.8,0,0.2,1)",curveEasyEase:"cubic-bezier(0.33,0,0.67,1)",curveLinear:"cubic-bezier(0,0,1,1)"},JG="10px",XG="12px",ZG="16px",QG="20px",eW="24px",tW="32px",rW={spacingHorizontalNone:"0",spacingHorizontalXXS:"2px",spacingHorizontalXS:"4px",spacingHorizontalSNudge:"6px",spacingHorizontalS:"8px",spacingHorizontalMNudge:JG,spacingHorizontalM:XG,spacingHorizontalL:ZG,spacingHorizontalXL:QG,spacingHorizontalXXL:eW,spacingHorizontalXXXL:tW},iW={spacingVerticalNone:"0",spacingVerticalXXS:"2px",spacingVerticalXS:"4px",spacingVerticalSNudge:"6px",spacingVerticalS:"8px",spacingVerticalMNudge:JG,spacingVerticalM:XG,spacingVerticalL:ZG,spacingVerticalXL:QG,spacingVerticalXXL:eW,spacingVerticalXXXL:tW},nW=(()=>{const e=(e=>({colorNeutralForeground1:gG,colorNeutralForeground1Hover:gG,colorNeutralForeground1Pressed:gG,colorNeutralForeground1Selected:gG,colorNeutralForeground2:vG,colorNeutralForeground2Hover:gG,colorNeutralForeground2Pressed:gG,colorNeutralForeground2Selected:gG,colorNeutralForeground2BrandHover:e[80],colorNeutralForeground2BrandPressed:e[70],colorNeutralForeground2BrandSelected:e[80],colorNeutralForeground3:bG,colorNeutralForeground3Hover:vG,colorNeutralForeground3Pressed:vG,colorNeutralForeground3Selected:vG,colorNeutralForeground3BrandHover:e[80],colorNeutralForeground3BrandPressed:e[70],colorNeutralForeground3BrandSelected:e[80],colorNeutralForeground4:"#707070",colorNeutralForegroundDisabled:yG,colorNeutralForegroundInvertedDisabled:EG,colorBrandForegroundLink:e[70],colorBrandForegroundLinkHover:e[60],colorBrandForegroundLinkPressed:e[40],colorBrandForegroundLinkSelected:e[70],colorNeutralForeground2Link:vG,colorNeutralForeground2LinkHover:gG,colorNeutralForeground2LinkPressed:gG,colorNeutralForeground2LinkSelected:gG,colorCompoundBrandForeground1:e[80],colorCompoundBrandForeground1Hover:e[70],colorCompoundBrandForeground1Pressed:e[60],colorBrandForeground1:e[80],colorBrandForeground2:e[70],colorBrandForeground2Hover:e[60],colorBrandForeground2Pressed:e[30],colorNeutralForeground1Static:gG,colorNeutralForegroundStaticInverted:OG,colorNeutralForegroundInverted:OG,colorNeutralForegroundInvertedHover:OG,colorNeutralForegroundInvertedPressed:OG,colorNeutralForegroundInvertedSelected:OG,colorNeutralForegroundInverted2:OG,colorNeutralForegroundOnBrand:OG,colorNeutralForegroundInvertedLink:OG,colorNeutralForegroundInvertedLinkHover:OG,colorNeutralForegroundInvertedLinkPressed:OG,colorNeutralForegroundInvertedLinkSelected:OG,colorBrandForegroundInverted:e[100],colorBrandForegroundInvertedHover:e[110],colorBrandForegroundInvertedPressed:e[100],colorBrandForegroundOnLight:e[80],colorBrandForegroundOnLightHover:e[70],colorBrandForegroundOnLightPressed:e[50],colorBrandForegroundOnLightSelected:e[60],colorNeutralBackground1:OG,colorNeutralBackground1Hover:kG,colorNeutralBackground1Pressed:_G,colorNeutralBackground1Selected:wG,colorNeutralBackground2:TG,colorNeutralBackground2Hover:CG,colorNeutralBackground2Pressed:"#dbdbdb",colorNeutralBackground2Selected:xG,colorNeutralBackground3:kG,colorNeutralBackground3Hover:wG,colorNeutralBackground3Pressed:"#d6d6d6",colorNeutralBackground3Selected:_G,colorNeutralBackground4:CG,colorNeutralBackground4Hover:TG,colorNeutralBackground4Pressed:kG,colorNeutralBackground4Selected:OG,colorNeutralBackground5:wG,colorNeutralBackground5Hover:kG,colorNeutralBackground5Pressed:CG,colorNeutralBackground5Selected:TG,colorNeutralBackground6:xG,colorNeutralBackgroundInverted:"#292929",colorNeutralBackgroundStatic:"#333333",colorNeutralBackgroundAlpha:SG,colorNeutralBackgroundAlpha2:"rgba(255, 255, 255, 0.8)",colorSubtleBackground:"transparent",colorSubtleBackgroundHover:kG,colorSubtleBackgroundPressed:_G,colorSubtleBackgroundSelected:wG,colorSubtleBackgroundLightAlphaHover:"rgba(255, 255, 255, 0.7)",colorSubtleBackgroundLightAlphaPressed:SG,colorSubtleBackgroundLightAlphaSelected:"transparent",colorSubtleBackgroundInverted:"transparent",colorSubtleBackgroundInvertedHover:AG,colorSubtleBackgroundInvertedPressed:"rgba(0, 0, 0, 0.3)",colorSubtleBackgroundInvertedSelected:"rgba(0, 0, 0, 0.2)",colorTransparentBackground:"transparent",colorTransparentBackgroundHover:"transparent",colorTransparentBackgroundPressed:"transparent",colorTransparentBackgroundSelected:"transparent",colorNeutralBackgroundDisabled:CG,colorNeutralBackgroundInvertedDisabled:"rgba(255, 255, 255, 0.1)",colorNeutralStencil1:xG,colorNeutralStencil2:TG,colorNeutralStencil1Alpha:AG,colorNeutralStencil2Alpha:IG,colorBackgroundOverlay:"rgba(0, 0, 0, 0.4)",colorScrollbarOverlay:"rgba(0, 0, 0, 0.5)",colorBrandBackground:e[80],colorBrandBackgroundHover:e[70],colorBrandBackgroundPressed:e[40],colorBrandBackgroundSelected:e[60],colorCompoundBrandBackground:e[80],colorCompoundBrandBackgroundHover:e[70],colorCompoundBrandBackgroundPressed:e[60],colorBrandBackgroundStatic:e[80],colorBrandBackground2:e[160],colorBrandBackground2Hover:e[150],colorBrandBackground2Pressed:e[130],colorBrandBackground3Static:e[60],colorBrandBackground4Static:e[40],colorBrandBackgroundInverted:OG,colorBrandBackgroundInvertedHover:e[160],colorBrandBackgroundInvertedPressed:e[140],colorBrandBackgroundInvertedSelected:e[150],colorNeutralCardBackground:TG,colorNeutralCardBackgroundHover:OG,colorNeutralCardBackgroundPressed:kG,colorNeutralCardBackgroundSelected:wG,colorNeutralCardBackgroundDisabled:CG,colorNeutralStrokeAccessible:bG,colorNeutralStrokeAccessibleHover:"#575757",colorNeutralStrokeAccessiblePressed:"#4d4d4d",colorNeutralStrokeAccessibleSelected:e[80],colorNeutralStroke1:"#d1d1d1",colorNeutralStroke1Hover:"#c7c7c7",colorNeutralStroke1Pressed:"#b3b3b3",colorNeutralStroke1Selected:yG,colorNeutralStroke2:_G,colorNeutralStroke3:CG,colorNeutralStrokeSubtle:_G,colorNeutralStrokeOnBrand:OG,colorNeutralStrokeOnBrand2:OG,colorNeutralStrokeOnBrand2Hover:OG,colorNeutralStrokeOnBrand2Pressed:OG,colorNeutralStrokeOnBrand2Selected:OG,colorBrandStroke1:e[80],colorBrandStroke2:e[140],colorBrandStroke2Hover:e[120],colorBrandStroke2Pressed:e[80],colorBrandStroke2Contrast:e[140],colorCompoundBrandStroke:e[80],colorCompoundBrandStrokeHover:e[70],colorCompoundBrandStrokePressed:e[60],colorNeutralStrokeDisabled:_G,colorNeutralStrokeInvertedDisabled:EG,colorTransparentStroke:"transparent",colorTransparentStrokeInteractive:"transparent",colorTransparentStrokeDisabled:"transparent",colorNeutralStrokeAlpha:IG,colorNeutralStrokeAlpha2:"rgba(255, 255, 255, 0.2)",colorStrokeFocus1:OG,colorStrokeFocus2:"#000000",colorNeutralShadowAmbient:"rgba(0,0,0,0.12)",colorNeutralShadowKey:"rgba(0,0,0,0.14)",colorNeutralShadowAmbientLighter:"rgba(0,0,0,0.06)",colorNeutralShadowKeyLighter:"rgba(0,0,0,0.07)",colorNeutralShadowAmbientDarker:"rgba(0,0,0,0.20)",colorNeutralShadowKeyDarker:"rgba(0,0,0,0.24)",colorBrandShadowAmbient:"rgba(0,0,0,0.30)",colorBrandShadowKey:"rgba(0,0,0,0.25)"}))({10:"#061724",20:"#082338",30:"#0a2e4a",40:"#0c3b5e",50:"#0e4775",60:"#0f548c",70:"#115ea3",80:"#0f6cbd",90:"#2886de",100:"#479ef5",110:"#62abf5",120:"#77b7f7",130:"#96c6fa",140:"#b4d6fa",150:"#cfe4fa",160:"#ebf3fc"});return{...HG,...qG,...UG,...WG,...GG,...VG,...rW,...iW,...$G,...YG,...e,...FG,...jG,...KG(e.colorNeutralShadowAmbient,e.colorNeutralShadowKey),...KG(e.colorBrandShadowAmbient,e.colorBrandShadowKey,"Brand")}})(),oW=document.getElementById("container"),sW=oW?(0,k.H)(oW):void 0;Office.onReady(()=>{null==sW||sW.render(w.createElement(fG,{theme:nW},w.createElement(nG,null)))})},21020:function(e,t,r){"use strict";var i=r(96540),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var i,o={},c=null,u=null;for(i in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:n,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},22799:function(e,t){"use strict";if("function"==typeof Symbol&&Symbol.for){var r=Symbol.for;r("react.element"),r("react.portal"),r("react.fragment"),r("react.strict_mode"),r("react.profiler"),r("react.provider"),r("react.context"),r("react.forward_ref"),r("react.suspense"),r("react.suspense_list"),r("react.memo"),r("react.lazy"),r("react.block"),r("react.server.block"),r("react.fundamental"),r("react.debug_trace_mode"),r("react.legacy_hidden")}},31202:function(e,t){"use strict";function r(e,t,r){if(e.length>=t)return e;for(;e.length<t;)e=r+e;return e.slice(-t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t="-"){if(!e["date-parts"])return e.raw;const i=e["date-parts"][0].map(e=>e.toString());switch(i.length){case 3:i[2]=r(i[2],2,"0");case 2:i[1]=r(i[1],2,"0");case 1:i[0]=r(i[0],4,"0")}return i.join(t)}},37828:function(e){"use strict";var t,r,i,n,o,s,a,l,c,u,d={PROCESSOR_VERSION:"1.4.61",error:function(e){throw"undefined"==typeof Error?new Error("citeproc-js error: "+e):"citeproc-js error: "+e},debug:function(e){"undefined"==typeof console?dump("CSL: "+e+"\n"):console.log("citeproc-js warning: "+e)},toLocaleUpperCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleUpperCase(t)}catch(t){e=e.toUpperCase()}return e},toLocaleLowerCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleLowerCase(t)}catch(t){e=e.toLowerCase()}return e},LOCATOR_LABELS_REGEXP:new RegExp("^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"vrs.":"verse","sv.":"sub-verbo","subpara.":"subparagraph","op.":"opus","subch.":"subchapter","add.":"addendum","amend.":"amendment","annot.":"annotation","app.":"appendix","art.":"article","bibliog.":"bibliography","bk.":"book","ch.":"chapter","cl.":"clause","col.":"column","cmt.":"comment","dec.":"decision","dept.":"department","ex.":"example","fig.":"figure","fld.":"field","fol.":"folio","n.":"note","hypo.":"hypothetical","illus.":"illustration","intro.":"introduction","l.":"line","no.":"issue","p.":"page","pp.":"page","para.":"paragraph","pt.":"part","pmbl.":"preamble","princ.":"principle","pub.":"publication","r.":"rule","rn.":"randnummer","sched.":"schedule","sec.":"section","ser.":"series,","subdiv.":"subdivision","subsec.":"subsection","supp.":"supplement","tbl.":"table","tit.":"title","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{verse:"vrs.","sub-verbo":"sv.","sub verbo":"sv.",subparagraph:"subpara.",opus:"op.",subchapter:"subch.",addendum:"add.",amendment:"amend.",annotation:"annot.",appendix:"app.",article:"art.",bibliography:"bibliog.",book:"bk.",chapter:"ch.",clause:"cl.",column:"col.",comment:"cmt.",decision:"dec.",department:"dept.",example:"ex.",figure:"fig.",field:"fld.",folio:"fol.",note:"n.",hypothetical:"hypo.",illustration:"illus.",introduction:"intro.",line:"l.",issue:"no.",page:"p.",paragraph:"para.",part:"pt.",preamble:"pmbl.",principle:"princ.",publication:"pub.",rule:"r.",randnummer:"rn.",schedule:"sched.",section:"sec.","series,":"ser.",subdivision:"subdiv.",subsection:"subsec.",supplement:"supp.",table:"tbl.",title:"tit.",volume:"vol."},LOCATOR_LABELS_MAP:{vrs:"verse",sv:"sub-verbo",subpara:"subparagraph",op:"opus",subch:"subchapter",add:"addendum",amend:"amendment",annot:"annotation",app:"appendix",art:"article",bibliog:"bibliography",bk:"book",ch:"chapter",cl:"clause",col:"column",cmt:"comment",dec:"decision",dept:"department",ex:"example",fig:"figure",fld:"field",fol:"folio",n:"note",hypo:"hypothetical",illus:"illustration",intro:"introduction",l:"line",no:"issue",p:"page",pp:"page",para:"paragraph",pt:"part",pmbl:"preamble",princ:"principle",pub:"publication",r:"rule",rn:"randnummer",sched:"schedule",sec:"section",ser:"series,",subdiv:"subdivision",subsec:"subsection",supp:"supplement",tbl:"table",tit:"title",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0,locator:!0},checkNestedBrace:function(e){"note"===e.opt.xclass?(this.depth=0,this.update=function(e){for(var t=(e=e||"").split(/([\(\)])/),r=1,i=t.length;r<i;r+=2)"("===t[r]?(1==this.depth%2&&(t[r]="["),this.depth+=1):")"===t[r]&&(0==this.depth%2&&(t[r]="]"),this.depth-=1);return t.join("")}):this.update=function(e){return e}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},getAbbrevsDomain:function(e,t,r){var i=null;if(e.opt.availableAbbrevDomains&&t&&"default"!==t){var n=e.locale[e.opt.lang].opts["jurisdiction-preference"],o=null;if(e.locale[r]&&(o=e.locale[r].opts["jurisdiction-preference"]),o)for(var s=o.length-1;s>-1;s--)if(e.opt.availableAbbrevDomains[t].indexOf(o[s])>-1){i=o[s];break}if(!i&&n)for(s=n.length-1;s>-1;s--)if(e.opt.availableAbbrevDomains[t].indexOf(n[s])>-1){i=n[s];break}}return i},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"container-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(e){if(this.opt.development_extensions.locator_date_and_revision&&e.locator){e.locator=""+e.locator;var t=e.locator.indexOf("|");if(t>-1){var r=e.locator;e.locator=r.slice(0,t);var i=(r=r.slice(t+1)).match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);i&&(e["locator-date"]=this.fun.dateparser.parseDateToObject(i[1]),r=r.slice(i[1].length)),e["locator-extra"]=r.replace(/^\s+/,"").replace(/\s+$/,"")}}return e.locator&&(e.locator=(""+e.locator).replace(/\s+$/,"")),e},normalizeLocaleStr:function(e){if(e){var t=e.split("-");return t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),t.join("-")}},parseNoteFieldHacks:function(e,t,r){if("string"==typeof e.note){for(var i=[],n=e.note.split("\n"),o=0,s=n.length;o<s;o++){i=[];var a=(h=n[o]).match(d.NOTE_FIELDS_REGEXP);if(a){for(var l=h.split(d.NOTE_FIELDS_REGEXP),c=0,u=l.length-1;c<u;c++)i.push(l[c]),i.push(a[c]);for(i.push(l[l.length-1]),c=1,u=i.length;c<u&&(!i[c-1].trim()||!(o>0||c>1)||i[c-1].match(d.NOTE_FIELD_REGEXP));c+=2)i[c]="\n"+i[c].slice(2,-1).trim()+"\n";n[o]=i.join("")}}var m=0,p={};for(o=0,s=(n=n.join("\n").split("\n")).length;o<s;o++){var h,f=(h=n[o]).match(d.NOTE_FIELD_REGEXP);if(h.trim()){if(!f){if(0===o)continue;m=o;break}var g=f[1],v=f[2].replace(/^\s+/,"").replace(/\s+$/,"");if("type"===g)e.type=v,n[o]="";else if(d.DATE_VARIABLES.indexOf(g.replace(/^alt-/,""))>-1)e[g]&&!r||(e[g]=d.DateParser.parseDateToArray(v),(!t||t[g]&&this.isDateString(v))&&(n[o]=""));else if(!e[g]){if(d.NAME_VARIABLES.indexOf(g.replace(/^alt-/,""))>-1){p[g]||(p[g]=[]);var b=v.split(/\s*\|\|\s*/);if(1===b.length)p[g].push({literal:b[0]});else if(2===b.length){var y={family:b[0],given:b[1]};d.parseParticles(y),p[g].push(y)}}else e[g]=v;t&&!t[g]||(n[o]="")}}}for(var g in p)e[g]=p[g];if(t)for(n[m].trim()&&(n[m]="\n"+n[m]),o=m-1;o>-1;o--)n[o].trim()||(n=n.slice(0,o).concat(n.slice(o+1)));e.note=n.join("\n").trim()}},checkPrefixSpaceAppend:function(e,t){t||(t="");var r="",i=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),n=i.slice(-1);return(i.match(d.ENDSWITH_ROMANESQUE_REGEXP)||d.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(n)>-1||n.match(/[\)\],0-9]/))&&(r=" "),(t+r).replace(/\s+/g," ")},checkIgnorePredecessor:function(e,t){var r=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,"").slice(-1);return d.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(r)>-1&&t.trim().indexOf(" ")>-1&&(e.tmp.term_predecessor=!1,!0)},checkSuffixSpacePrepend:function(e,t){return t?((t.match(d.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(t.slice(0,1))>-1)&&(t=" "+t),t):""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_CONTAINER_SUBSEQUENT:4,POSITION_MAP:{0:0,4:1,1:2,2:3,3:4},POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","first-container-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],CREATORS:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","part-number","printing-number","section","supplement-number","version","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(e){for(var t=["title","short","main","sub","subjoin"],r={},i=0,n=t.length;i<n;i++)r[t[i]]=e+"title"+("title"===t[i]?"":"-"+t[i]);return r},demoteNoiseWords:function(e,t,r){var i=e.locale[e.opt.lang].opts["leading-noise-words"];if(t&&r){(t=t.split(/\s+/)).reverse();for(var n=[],o=t.length-1;o>-1&&i.indexOf(t[o].toLowerCase())>-1;o+=-1)n.push(t.pop());t.reverse();var s=t.join(" "),a=n.join(" ");"drop"!==r&&a?"demote"===r&&(t=[s,a].join(", ")):t=s}return t},extractTitleAndSubtitle:function(e,t){var r=t?" ":"",i=[""];this.opt.development_extensions.split_container_title&&i.push("container-");for(var n=0,o=i.length;n<o;n++){var s=i[n],a=d.TITLE_FIELD_SPLITS(s),l=[!1];if(e.multi)for(var c in e.multi._keys[a.short])l.push(c);for(var u=0,m=l.length;u<m;u++){var p={};(c=l[u])?(e.multi._keys[a.title]&&(p[a.title]=e.multi._keys[a.title][c]),e.multi._keys[a.short]&&(p[a.short]=e.multi._keys[a.short][c])):(p[a.title]=e[a.title],p[a.short]=e[a.short]),p[a.main]=p[a.title],p[a.sub]=!1;var h=p[a.short];if(p[a.title]){if(h&&h.toLowerCase()===p[a.title].toLowerCase())p[a.main]=p[a.title],p[a.subjoin]="",p[a.sub]="";else if(h){var f=p[a.title].slice(h.replace(/[\?\!]+$/,"").length),g=p[a.title].replace(f.replace(/^[\?\!]+/,""),"").trim();(y=d.TITLE_SPLIT_REGEXP.matchfirst.exec(f))&&g.toLowerCase()===h.toLowerCase()?(p[a.main]=g,p[a.subjoin]=y[1].replace(/[\?\!]+(\s*)$/,"$1"),p[a.sub]=f.replace(d.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(p[a.short]=p[a.main])):3==(v=d.TITLE_SPLIT(p[a.title])).length?(p[a.main]=v[0],p[a.subjoin]=v[1],p[a.sub]=v[2]):(p[a.main]=p[a.title],p[a.subjoin]="",p[a.sub]="")}else{var v;if(3==(v=d.TITLE_SPLIT(p[a.title])).length){if(p[a.main]=v[0],p[a.subjoin]=v[1],p[a.sub]=v[2],this.opt.development_extensions.implicit_short_title&&"legal_case"!==e.type&&!e[a.short]&&!p[a.main].match(/^[\-\.[0-9]+$/)){var b=p[a.subjoin].trim();-1===["?","!"].indexOf(b)&&(b=""),p[a.short]=p[a.main]+b}}else p[a.main]=p[a.title],p[a.subjoin]="",p[a.sub]=""}if(p[a.subjoin]&&p[a.subjoin].match(/([\?\!])/)){var y=p[a.subjoin].match(/(\s*)$/);p[a.main]=p[a.main]+r+p[a.subjoin].trim(),p[a.subjoin]=y[1]}}if(p[a.subjoin]&&(p[a.subjoin].indexOf(":")>-1&&(p[a.subjoin]=r+": "),(p[a.subjoin].indexOf("-")>-1||p[a.subjoin].indexOf("—")>-1)&&(p[a.subjoin]="—")),c)for(var _ in p)e.multi._keys[_]||(e.multi._keys[_]={}),e.multi._keys[_][c]=p[_];else for(var _ in p)e[_]=p[_]}}},titlecaseSentenceOrNormal:function(e,t,r,i,n){var o=d.TITLE_FIELD_SPLITS(r),s={};if(i&&t.multi?(t.multi._keys[o.title]&&(s[o.title]=t.multi._keys[o.title][i]),t.multi._keys[o.main]&&(s[o.main]=t.multi._keys[o.main][i]),t.multi._keys[o.sub]&&(s[o.sub]=t.multi._keys[o.sub][i]),t.multi._keys[o.subjoin]&&(s[o.subjoin]=t.multi._keys[o.subjoin][i])):(s[o.title]=t[o.title],s[o.main]=t[o.main],s[o.sub]=t[o.sub],s[o.subjoin]=t[o.subjoin]),s[o.main]&&s[o.sub]){var a=s[o.main],l=s[o.subjoin],c=s[o.sub];return n?(a=d.Output.Formatters.sentence(e,a),c=d.Output.Formatters.sentence(e,c)):e.opt.development_extensions.uppercase_subtitles&&(c=d.Output.Formatters["capitalize-first"](e,c)),[a,l,c].join("")}if(s[o.title]){if(n)return d.Output.Formatters.sentence(e,s[o.title]);if(e.opt.development_extensions.uppercase_subtitles){for(var u=d.TITLE_SPLIT(s[o.title]),m=0,p=u.length;m<p;m+=2)u[m]=d.Output.Formatters["capitalize-first"](e,u[m]);for(m=1,p=u.length-1;m<p;m+=2){var h=u[m].match(/([:\?\!] )/);if(h){var f="fr"===e.opt["default-locale"][0].slice(0,2).toLowerCase()?" ":"";u[m]=f+h[1]}(u[m].indexOf("-")>-1||u[m].indexOf("—")>-1)&&(u[m]="—")}return s[o.title]=u.join(""),s[o.title]}return s[o.title]}return""},getSafeEscape:function(e){if(["bibliography","citation"].indexOf(e.tmp.area)>-1){var t=[];return e.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===e.opt.mode&&t.push(function(e){return e.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),t.length?function(r){for(var i=0,n=t.length;i<n;i+=1)r=t[i](r);return d.Output.Formats[e.opt.mode].text_escape(r)}:d.Output.Formats[e.opt.mode].text_escape}return function(e){return e}},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-à-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokmål)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{"ª":"a","²":"2","³":"3","¹":"1","º":"o","ʰ":"h","ʱ":"ɦ","ʲ":"j","ʳ":"r","ʴ":"ɹ","ʵ":"ɻ","ʶ":"ʁ","ʷ":"w","ʸ":"y","ˠ":"ɣ","ˡ":"l","ˢ":"s","ˣ":"x","ˤ":"ʕ","ᴬ":"A","ᴭ":"Æ","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴲ":"Ǝ","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴽ":"Ȣ","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ᵂ":"W","ᵃ":"a","ᵄ":"ɐ","ᵅ":"ɑ","ᵆ":"ᴂ","ᵇ":"b","ᵈ":"d","ᵉ":"e","ᵊ":"ə","ᵋ":"ɛ","ᵌ":"ɜ","ᵍ":"g","ᵏ":"k","ᵐ":"m","ᵑ":"ŋ","ᵒ":"o","ᵓ":"ɔ","ᵔ":"ᴖ","ᵕ":"ᴗ","ᵖ":"p","ᵗ":"t","ᵘ":"u","ᵙ":"ᴝ","ᵚ":"ɯ","ᵛ":"v","ᵜ":"ᴥ","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"φ","ᵡ":"χ","⁰":"0","ⁱ":"i","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"−","⁼":"=","⁽":"(","⁾":")","ⁿ":"n","℠":"SM","™":"TM","㆒":"一","㆓":"二","㆔":"三","㆕":"四","㆖":"上","㆗":"中","㆘":"下","㆙":"甲","㆚":"乙","㆛":"丙","㆜":"丁","㆝":"天","㆞":"地","㆟":"人","ˀ":"ʔ","ˁ":"ʕ","ۥ":"و","ۦ":"ي"},SUPERSCRIPTS_REGEXP:new RegExp("[ª²³¹ºʰʱʲʳʴʵʶʷʸˠˡˢˣˤᴬᴭᴮᴰᴱᴲᴳᴴᴵᴶᴷᴸᴹᴺᴼᴽᴾᴿᵀᵁᵂᵃᵄᵅᵆᵇᵈᵉᵊᵋᵌᵍᵏᵐᵑᵒᵓᵔᵕᵖᵗᵘᵙᵚᵛᵜᵝᵞᵟᵠᵡ⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ℠™㆒㆓㆔㆕㆖㆗㆘㆙㆚㆛㆜㆝㆞㆟ˀˁۥۦ]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(e,t,r,i,n){if(e.opt.use_context_condition){var o=e.tmp.group_context.tip;o.condition?(o.condition.termtxt||(o.condition.termtxt=t,o.condition.valueTerm=r),o.value_seen||"comma-safe-numbers-only"!==o.condition.test||n&&(o.value_seen=!0,n.match(/^[0-9]/)||(e.tmp.just_did_number=!1))):i&&i.decorations.filter(e=>"@vertical-align"===e[0]).length>0||i&&i.strings.suffix?e.tmp.just_did_number=!1:t&&(t.match(/[0-9]$/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)}},EVALUATE_GROUP_CONDITION:function(e,t){if(e.opt.use_context_condition){var r,i="comma-safe-numbers-only"===t.condition.test;if("empty-label"===t.condition.test)r=!t.condition.termtxt;else if("empty-label-no-decor"===t.condition.test)r=!t.condition.termtxt||t.condition.termtxt.indexOf("%s")>-1;else if(["comma-safe","comma-safe-numbers-only"].indexOf(t.condition.test)>-1){var n=t.condition.termtxt,o=!1;t.condition.termtxt&&(o=t.condition.termtxt.slice(0,1).match(d.ALL_ROMANESQUE_REGEXP)),r=e.tmp.just_did_number?t.condition.valueTerm?!i:!n||(o?!i:["always","after-number"].indexOf(e.opt.require_comma_on_symbol)>-1):!t.condition.valueTerm&&!!n&&(o?!i:"always"===e.opt.require_comma_on_symbol)}if(r)var s=!1;else s=!0;return t.condition.not&&(s=!s),s}},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title","split_container_title"],TITLE_SPLIT_REGEXP:(t=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*—\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"],{match:new RegExp("("+t.join("|")+")","g"),matchfirst:new RegExp("^("+t.join("|")+")"),split:new RegExp("(?:"+t.join("|")+")")}),TITLE_SPLIT:function(e){if(!e)return e;for(var t=e.match(d.TITLE_SPLIT_REGEXP.match),r=e.split(d.TITLE_SPLIT_REGEXP.split),i=r.length-2;i>-1;i--)r[i]=r[i].trim(),r[i]&&r[i].slice(-1).toLowerCase()!==r[i].slice(-1)?(r[i]=r[i]+t[i]+r[i+1],r=r.slice(0,i+1).concat(r.slice(i+2))):r=r.slice(0,i+1).concat([t[i]]).concat(r.slice(i+1));return r},GET_COURT_CLASS:function(e,t,r){var i="",n=null,o=t.jurisdiction?t.jurisdiction.split(":")[0]:null,s="court_condition_classes";return r&&(s="court_key_classes"),o&&t.authority&&("string"==typeof t.authority?n=t.authority:t.authority[0]&&t.authority[0].literal&&(n=t.authority[0].literal)),n&&(this.lang&&e.locale[this.lang].opts[s]&&e.locale[this.lang].opts[s][o]&&e.locale[this.lang].opts[s][o][n]?i=e.locale[this.lang].opts[s][o][n]:e.locale[e.opt["default-locale"][0]].opts[s]&&e.locale[e.opt["default-locale"][0]].opts[s][o]&&e.locale[e.opt["default-locale"][0]].opts[s][o][n]&&(i=e.locale[e.opt["default-locale"][0]].opts[s][o][n])),i},SET_COURT_CLASSES:function(e,t,r,i){for(var n=r.getNodesByName(i,"court-class"),o=0,s=r.numberofnodes(n);o<s;o+=1){var a=n[o],l=r.attributes(a),c=l["@name"],u=l["@country"],d=l["@courts"],m="court_key_classes";if(e.registry&&(m="court_condition_classes"),c&&u&&d){d=d.trim().split(/\s+/),e.locale[t].opts[m]||(e.locale[t].opts[m]={}),e.locale[t].opts[m][u]||(e.locale[t].opts[m][u]={});for(var p=0,h=d.length;p<h;p++)e.locale[t].opts[m][u][d[p]]=c}}},INIT_JURISDICTION_MACROS:function(e,t,r,i){if(t["best-jurisdiction"])return!0;if(!e.sys.retrieveStyleModule||!d.MODULE_MACROS[i]||!t.jurisdiction)return!1;var n=e.getJurisdictionList(t.jurisdiction);if(!e.opt.jurisdictions_seen[n[0]]){var o=e.retrieveAllStyleModules(n);for(var s in o){var a=e.loadStyleModule(s,o[s]);a&&(o[a]||(Object.assign(o,e.retrieveAllStyleModules([a])),e.loadStyleModule(a,o[a],!0)))}}n=e.getJurisdictionList(t.jurisdiction),e.opt.parallel.enable&&(e.parallel||(e.parallel=new d.Parallel(e)));for(var l=0,c=n.length;l<c;l++)if(s=n[l],r&&e.juris[s]&&!r["best-jurisdiction"]&&e.juris[s].types.locator&&(t["best-jurisdiction"]=s),e.juris[s]&&e.juris[s].types[t.type])return t["best-jurisdiction"]=s,!0;return!1},XmlJSON:function(e){this.dataObj=e,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", "},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}}};d.XmlJSON.prototype.clean=function(e){return e},d.XmlJSON.prototype.getStyleId=function(e,t){var r="id";t&&(r="title");for(var i="",n=e.children,o=0,s=n.length;o<s;o++)if("info"===n[o].name)for(var a=n[o].children,l=0,c=a.length;l<c;l++)a[l].name===r&&(i=a[l].children[0]);return i},d.XmlJSON.prototype.children=function(e){return!(!e||!e.children.length)&&e.children.slice()},d.XmlJSON.prototype.nodename=function(e){return e?e.name:null},d.XmlJSON.prototype.attributes=function(e){var t={};for(var r in e.attrs)t["@"+r]=e.attrs[r];return t},d.XmlJSON.prototype.content=function(e){var t="";if(!e||!e.children)return t;for(var r=0,i=e.children.length;r<i;r+=1)"string"==typeof e.children[r]&&(t+=e.children[r]);return t},d.XmlJSON.prototype.namespace={},d.XmlJSON.prototype.numberofnodes=function(e){return e&&"number"==typeof e.length?e.length:0},d.XmlJSON.prototype.getAttributeValue=function(e,t,r){var i="";return r&&(t=r+":"+t),e&&e.attrs&&(i=e.attrs[t]?e.attrs[t]:""),i},d.XmlJSON.prototype.getNodeValue=function(e,t){var r="";if(t)for(var i=0,n=e.children.length;i<n;i+=1)e.children[i].name===t&&(r=e.children[i].children.length?e.children[i]:"");else e&&(r=e);return r&&r.children&&1==r.children.length&&"string"==typeof r.children[0]&&(r=r.children[0]),r},d.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,r,i,n){"@"===i.slice(0,1)&&(i=i.slice(1));for(var o=0,s=e.children.length;o<s;o+=1)e.children[o].name===t&&e.children[o].attrs.name===r&&(e.children[o].attrs[i]=n)},d.XmlJSON.prototype.deleteNodeByNameAttribute=function(e,t){var r,i;for(r=0,i=e.children.length;r<i;r+=1)e.children[r]&&"string"!=typeof e.children[r]&&e.children[r].attrs.name==t&&(e.children=e.children.slice(0,r).concat(e.children.slice(r+1)))},d.XmlJSON.prototype.deleteAttribute=function(e,t){void 0!==e.attrs[t]&&e.attrs.pop(t)},d.XmlJSON.prototype.setAttribute=function(e,t,r){return e.attrs[t]=r,!1},d.XmlJSON.prototype.nodeCopy=function(e,t){if(t||(t={}),"object"==typeof t&&void 0===t.length)for(var r in e)"string"==typeof e[r]?t[r]=e[r]:"object"==typeof e[r]&&(void 0===e[r].length?t[r]=this.nodeCopy(e[r],{}):t[r]=this.nodeCopy(e[r],[]));else for(var i=0,n=e.length;i<n;i+=1)"string"==typeof e[i]?t[i]=e[i]:t[i]=this.nodeCopy(e[i],{});return t},d.XmlJSON.prototype.getNodesByName=function(e,t,r,i){if(i||(i=[]),!e||!e.children)return i;t===e.name&&(r?r===e.attrs.name&&i.push(e):i.push(e));for(var n=0,o=e.children.length;n<o;n+=1)"object"==typeof e.children[n]&&this.getNodesByName(e.children[n],t,r,i);return i},d.XmlJSON.prototype.nodeNameIs=function(e,t){return void 0!==e&&t==e.name},d.XmlJSON.prototype.makeXml=function(e){return"string"==typeof e&&(e="<"===e.slice(0,1)?this.jsonStringWalker.walkToObject(e):JSON.parse(e)),e},d.XmlJSON.prototype.insertChildNodeAfter=function(e,t,r,i){for(var n=0,o=e.children.length;n<o;n+=1)if(t===e.children[n]){e.children=e.children.slice(0,n).concat([i]).concat(e.children.slice(n+1));break}return e},d.XmlJSON.prototype.insertPublisherAndPlace=function(e){if("group"===e.name){for(var t=!0,r=["publisher","publisher-place"],i=0,n=e.children.length;i<n;i+=1){var o=r.indexOf(e.children[i].attrs.variable);if(!("text"===e.children[i].name&&o>-1)||e.children[i].attrs.prefix||e.children[i].attrs.suffix){t=!1;break}r=r.slice(0,o).concat(r.slice(o+1))}t&&!r.length&&(e.attrs["has-publisher-and-publisher-place"]=!0)}for(i=0,n=e.children.length;i<n;i+=1)"object"==typeof e.children[i]&&this.insertPublisherAndPlace(e.children[i])},d.XmlJSON.prototype.isChildOfSubstitute=function(e){if(e.length>0){var t=e.slice();return"substitute"===t.pop()||this.isChildOfSubstitute(t)}return!1},d.XmlJSON.prototype.addMissingNameNodes=function(e,t){if(t||(t=[]),"names"===e.name&&!this.isChildOfSubstitute(t)){for(var r=!0,i=0,n=e.children.length;i<n;i++)if("name"===e.children[i].name){r=!1;break}r&&(e.children=[{name:"name",attrs:{},children:[]}].concat(e.children))}for(t.push(e.name),i=0,n=e.children.length;i<n;i+=1)"object"==typeof e.children[i]&&this.addMissingNameNodes(e.children[i],t);t.pop()},d.XmlJSON.prototype.addInstitutionNodes=function(e){if("names"===e.name){for(var t={},r=-1,i=0,n=e.children.length;i<n;i+=1){if("name"==e.children[i].name){for(var o in e.children[i].attrs)t[o]=e.children[i].attrs[o];t.delimiter=e.children[i].attrs.delimiter,t.and=e.children[i].attrs.and,r=i;for(var s=0,a=e.children[i].children.length;s<a;s+=1)if("family"===e.children[i].children[s].attrs.name)for(var o in e.children[i].children[s].attrs)t[o]=e.children[i].children[s].attrs[o]}if("institution"==e.children[i].name){r=-1;break}}if(r>-1){var l=this.nodeCopy(this.institution);for(i=0,n=d.INSTITUTION_KEYS.length;i<n;i+=1){var c=d.INSTITUTION_KEYS[i];void 0!==t[c]&&(l.children[0].attrs[c]=t[c]),t.delimiter&&(l.attrs.delimiter=t.delimiter),t.and&&(l.attrs.and=t.and)}e.children=e.children.slice(0,r+1).concat([l]).concat(e.children.slice(r+1))}}for(i=0,n=e.children.length;i<n;i+=1)"string"!=typeof e.children[i]&&this.addInstitutionNodes(e.children[i])},d.XmlJSON.prototype.flagDateMacros=function(e){for(var t=0,r=e.children.length;t<r;t+=1)"macro"===e.children[t].name&&this.inspectDateMacros(e.children[t])&&(e.children[t].attrs["macro-has-date"]="true")},d.XmlJSON.prototype.inspectDateMacros=function(e){if(!e||!e.children)return!1;if("date"===e.name)return!0;for(var t=0,r=e.children.length;t<r;t+=1)if(this.inspectDateMacros(e.children[t]))return!0;return!1},d.stripXmlProcessingInstruction=function(e){return e?e=(e=(e=(e=e.replace(/^<\?[^?]+\?>/,"")).replace(/<!--[^>]+-->/g,"")).replace(/^\s+/g,"")).replace(/\s+$/g,""):e},d.parseXml=function(e){var t={children:[]},r=[t.children];function i(e){return e.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(e,t){var r=parseInt(t,10);return String.fromCharCode(r)}).replace(/&#x([a-f0-9]{1,6});/gi,function(e,t){var r=parseInt(t,16);return String.fromCharCode(r)})}function n(e,t){var r=RegExp("^.*[\t ]+"+t+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),i=e.match(r);return i?i[1].slice(1,-1):null}function o(e){var t=RegExp("^<([^\t />]+)"),r=e.match(t);return r?r[1]:null}function s(e){var t={};t.name=o(e),t.attrs={};var r=function(e){var t=e.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(t)for(var r=0,i=t.length;r<i;r++)t[r]=t[r].replace(/=.*/,"");return t}(e);if(r)for(var s=0,a=r.length;s<a;s++){var l={name:r[s],value:n(e,r[s])};t.attrs[l.name]=i(l.value)}return t.children=[],t}function a(e){return i(e.match(/^.*>([^<]*)<.*$/)[1])}function l(e){r.slice(-1)[0].push(e)}function c(e){var t;e.slice(1).indexOf("<")>-1?((t=s(e.slice(0,e.indexOf(">")+1))).children=[a(e)],l(t)):"/>"===e.slice(-2)?(t=s(e),"term"===o(e)&&t.children.push(""),l(t)):"</"===e.slice(0,2)?r.pop():(l(t=s(e)),function(e){r.push(e.children)}(t))}for(var u=function(e){for(var t=(e=e.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),r=null,i=0,n=t.length;i<n;i++)i>0&&(t[i]="<"+t[i]),i<t.length-1&&(t[i]=t[i]+">"),"number"!=typeof r&&("<style "!==t[i].slice(0,7)&&"<locale "!=t[i].slice(0,8)||(r=i));for(i=(t=t.slice(r)).length-2;i>-1;i--)if(-1===t[i].slice(1).indexOf("<")){var o=t[i].slice(0,5);"/>"!==t[i].slice(-2)&&("<term"===o?"</term"===t[i+1].slice(0,6)&&(t[i]=t[i]+t[i+1],t=t.slice(0,i+1).concat(t.slice(i+2))):["<sing","<mult"].indexOf(o)>-1&&"/>"!==t[i].slice(-2)&&"<"===t[i+1].slice(0,1)&&(t[i]=t[i]+t[i+1],t=t.slice(0,i+1).concat(t.slice(i+2))))}return t}(e),d=0,m=u.length;d<m;d++)c(u[d]);return t.children[0]},d.XmlDOM=function(e){this.dataObj=e,"undefined"==typeof DOMParser?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e,t){var r;return"undefined"!=typeof ActiveXObject?((r=new ActiveXObject("MSXML.DomDocument")).async=!1,r.loadXML(e),r):"undefined"!=typeof XMLHttpRequest?(t||(t="text/xml"),(r=new XMLHttpRequest).open("GET","data:"+t+";charset=utf-8,"+encodeURIComponent(e),!1),r.overrideMimeType&&r.overrideMimeType(t),r.send(null),r.responseXML):"undefined"!=typeof marknote?(new marknote.Parser).parse(e):void 0},this.hasAttributes=function(e){return!(!e.attributes||!e.attributes.length)}):this.hasAttributes=function(e){return!(!e.attributes||!e.attributes.length)},this.importNode=function(e,t){return void 0===e.importNode?this._importNode(e,t,!0):e.importNode(t,!0)},this._importNode=function(e,t,r){if(1===t.nodeType){var i=e.createElement(t.nodeName);if(t.attributes&&t.attributes.length>0)for(var n=0,o=t.attributes.length;n<o;)i.setAttribute(t.attributes[n].nodeName,t.getAttribute(t.attributes[n++].nodeName));if(r&&t.childNodes&&t.childNodes.length>0)for(n=0,o=t.childNodes.length;n<o;)i.appendChild(this._importNode(e,t.childNodes[n++],r));return i}},this.parser=new DOMParser;var t=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),r=t.getElementsByTagName("institution");this.institution=r.item(0);var i=t.getElementsByTagName("institution-part");this.institutionpart=i.item(0),this.ns="http://purl.org/net/xbiblio/csl"},d.XmlDOM.prototype.clean=function(e){return(e=(e=(e=(e=e.replace(/<\?[^?]+\?>/g,"")).replace(/<![^>]+>/g,"")).replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^\n*/,"")},d.XmlDOM.prototype.getStyleId=function(e,t){var r="",i="id";t&&(i="title");var n=e.getElementsByTagName(i);return n&&n.length&&(n=n.item(0)),n&&(r=n.textContent),r||(r=n.innerText),r||(r=n.innerHTML),r},d.XmlDOM.prototype.children=function(e){var t,r,i,n;if(e){for(n=[],r=0,i=(t=e.childNodes).length;r<i;r+=1)"#text"!=t[r].nodeName&&n.push(t[r]);return n}return[]},d.XmlDOM.prototype.nodename=function(e){return e.nodeName},d.XmlDOM.prototype.attributes=function(e){var t,r,i,n,o;if(t=new Object,e&&this.hasAttributes(e))for(n=0,o=(r=e.attributes).length;n<o;n+=1)t["@"+(i=r[n]).name]=i.value;return t},d.XmlDOM.prototype.content=function(e){return void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.txt},d.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},d.XmlDOM.prototype.numberofnodes=function(e){return e?e.length:0},d.XmlDOM.prototype.getAttributeName=function(e){return e.name},d.XmlDOM.prototype.getAttributeValue=function(e,t,r){var i="";return r&&(t=r+":"+t),e&&this.hasAttributes(e)&&e.getAttribute(t)&&(i=e.getAttribute(t)),i},d.XmlDOM.prototype.getNodeValue=function(e,t){var r=null;if(t){var i=e.getElementsByTagName(t);i.length>0&&(r=void 0!==i[0].textContent?i[0].textContent:void 0!==i[0].innerText?i[0].innerText:i[0].text)}return null===r&&e&&e.childNodes&&(0==e.childNodes.length||1==e.childNodes.length&&"#text"==e.firstChild.nodeName)&&(r=void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.text),null===r&&(r=e),r},d.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,r,i,n){var o,s,a,l;for("@"===i.slice(0,1)&&(i=i.slice(1)),o=0,s=(a=e.getElementsByTagName(t)).length;o<s;o+=1)(l=a[o]).getAttribute("name")==r&&l.setAttribute(i,n)},d.XmlDOM.prototype.deleteNodeByNameAttribute=function(e,t){var r,i,n,o;for(r=0,i=(o=e.childNodes).length;r<i;r+=1)(n=o[r])&&n.nodeType!=n.TEXT_NODE&&this.hasAttributes(n)&&n.getAttribute("name")==t&&e.removeChild(o[r])},d.XmlDOM.prototype.deleteAttribute=function(e,t){e.removeAttribute(t)},d.XmlDOM.prototype.setAttribute=function(e,t,r){return e.ownerDocument||(e=e.firstChild),["function","unknown"].indexOf(typeof e.setAttribute)>-1&&e.setAttribute(t,r),!1},d.XmlDOM.prototype.nodeCopy=function(e){return e.cloneNode(!0)},d.XmlDOM.prototype.getNodesByName=function(e,t,r){var i,n,o,s,a;for(i=[],s=0,a=(n=e.getElementsByTagName(t)).length;s<a;s+=1)o=n.item(s),(!r||this.hasAttributes(o)&&o.getAttribute("name")==r)&&i.push(o);return i},d.XmlDOM.prototype.nodeNameIs=function(e,t){return t==e.nodeName},d.XmlDOM.prototype.makeXml=function(e){return e||(e="<docco><bogus/></docco>"),e=e.replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(e,"application/xml").firstChild},d.XmlDOM.prototype.insertChildNodeAfter=function(e,t,r,i){var n;return n=this.importNode(t.ownerDocument,i),e.replaceChild(n,t),e},d.XmlDOM.prototype.insertPublisherAndPlace=function(e){for(var t=e.getElementsByTagName("group"),r=0,i=t.length;r<i;r+=1){for(var n=t.item(r),o=[],s=0,a=n.childNodes.length;s<a;s+=1)1!==n.childNodes.item(s).nodeType&&o.push(s);if(n.childNodes.length-o.length===2){var l=[];for(s=0,a=2;s<a;s+=1)if(!(o.indexOf(s)>-1)){for(var c=n.childNodes.item(s),u=[],d=0,m=c.childNodes.length;d<m;d+=1)1!==c.childNodes.item(d).nodeType&&u.push(d);if(c.childNodes.length-u.length===0&&(l.push(c.getAttribute("variable")),c.getAttribute("suffix")||c.getAttribute("prefix"))){l=[];break}}l.indexOf("publisher")>-1&&l.indexOf("publisher-place")>-1&&n.setAttribute("has-publisher-and-publisher-place",!0)}}},d.XmlDOM.prototype.isChildOfSubstitute=function(e){return!!e.parentNode&&("substitute"===e.parentNode.tagName.toLowerCase()||this.isChildOfSubstitute(e.parentNode))},d.XmlDOM.prototype.addMissingNameNodes=function(e){for(var t=e.getElementsByTagName("names"),r=0,i=t.length;r<i;r+=1){var n=t.item(r),o=n.getElementsByTagName("name");if(!(o&&0!==o.length||this.isChildOfSubstitute(n))){var s=n.ownerDocument.createElement("name");n.appendChild(s)}}},d.XmlDOM.prototype.addInstitutionNodes=function(e){var t,r,i,n,o,s,a,l;for(a=0,l=(t=e.getElementsByTagName("names")).length;a<l;a+=1)if(0!=(o=(r=t.item(a)).getElementsByTagName("name")).length&&0==r.getElementsByTagName("institution").length){n=(i=this.importNode(e.ownerDocument,this.institution)).getElementsByTagName("institution-part").item(0),s=o.item(0),r.insertBefore(i,s.nextSibling);for(var c=0,u=d.INSTITUTION_KEYS.length;c<u;c+=1){var m=d.INSTITUTION_KEYS[c];(g=s.getAttribute(m))&&n.setAttribute(m,g)}var p=s.getElementsByTagName("name-part");for(c=0,u=p.length;c<u;c+=1)if("family"===p[c].getAttribute("name"))for(var h=0,f=d.INSTITUTION_KEYS.length;h<f;h+=1){var g;m=d.INSTITUTION_KEYS[h],(g=p[c].getAttribute(m))&&n.setAttribute(m,g)}}},d.XmlDOM.prototype.flagDateMacros=function(e){var t,r,i,n=e.getElementsByTagName("macro");for(t=0,r=n.length;t<r;t+=1)(i=n.item(t)).getElementsByTagName("date").length&&i.setAttribute("macro-has-date","true")},d.setupXml=function(e){var t={},r=null;return void 0!==e?"string"==typeof e?(t="<"===(e=e.replace("^\ufeff","").replace(/^\s+/,"")).slice(0,1)?d.parseXml(e):JSON.parse(e),r=new d.XmlJSON(t)):r=void 0!==e.getAttribute?new d.XmlDOM(e):void 0!==e.toXMLString?new d.XmlE4X(e):new d.XmlJSON(e):d.error("unable to parse XML input"),r||d.error("citeproc-js error: unable to parse CSL style or locale object"),r},d.getSortCompare=function(e){if(d.stringCompare)return d.stringCompare;var t,r=this,i={sensitivity:"base",ignorePunctuation:!0,numeric:!0};e||(e="en-US");var n=function(e){return e.replace(/^[\[\]\'\"]*/g,"")},o=!!(t=function(t,n){return d.toLocaleLowerCase.call(r,t).localeCompare(d.toLocaleLowerCase.call(r,n),e,i)})("[x","x")&&function(e,r){return t(n(e),n(r))};return function(e,r){return o?o(e,r):t(e,r)}},d.ambigConfigDiff=function(e,t){var r,i,n,o;if(e.names.length!==t.names.length)return 1;for(r=0,i=e.names.length;r<i;r+=1){if(e.names[r]!==t.names[r])return 1;for(n=0,o=e.givens[r];n<o;n+=1)if(e.givens[r][n]!==t.givens[r][n])return 1}return e.disambiguate!=t.disambiguate||e.year_suffix!==t.year_suffix?1:0},d.cloneAmbigConfig=function(e,t){var r,i,n,o,s,a={names:[],givens:[],year_suffix:!1,disambiguate:!1};for(r=0,i=e.names.length;r<i;r+=1)s=e.names[r],a.names[r]=s;for(r=0,i=e.givens.length;r<i;r+=1){for(s=[],n=0,o=e.givens[r].length;n<o;n+=1)s.push(e.givens[r][n]);a.givens.push(s)}return t?(a.year_suffix=t.year_suffix,a.disambiguate=t.disambiguate):(a.year_suffix=e.year_suffix,a.disambiguate=e.disambiguate),a},d.getAmbigConfig=function(){var e;return(e=this.tmp.disambig_request)||(e=this.tmp.disambig_settings),d.cloneAmbigConfig(e)},d.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},d.getMinVal=function(){return this.tmp["et-al-min"]},d.tokenExec=function(e,t,r){var i,n;i=e.next,n=!1,e.test&&(i=function(t){return t?(this.tmp.jump.replace("succeed"),e.succeed):(this.tmp.jump.replace("fail"),e.fail)}.call(this,e.test(t,r)));for(var o=0,s=e.execs.length;o<s;o++)(n=e.execs[o].call(e,this,t,r))&&(i=n);return i},d.expandMacro=function(e,t){var r,i,n;r=e.postponed_macro;var o=e.strings.sort_direction;e=new d.Token("group",d.START);var s=!1,a=!1;(i=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",r)).length&&(a=this.cslXml.getAttributeValue(i[0],"cslid"),s=this.cslXml.getAttributeValue(i[0],"macro-has-date")),s&&(r=r+"@"+this.build.current_default_locale,u=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!0)},e.execs.push(u)),this.build.macro_stack.indexOf(r)>-1?d.error('CSL processor error: call to macro "'+r+'" would cause an infinite loop'):this.build.macro_stack.push(r),e.cslid=a,d.MODULE_MACROS[r]&&(e.juris=r,this.opt.update_mode=d.POSITION),d.Node.group.build.call(e,this,t,!0),this.cslXml.getNodeValue(i)||d.error('CSL style error: undefined macro "'+r+'"');var l,c=d.getMacroTarget.call(this,r);if(c&&(d.buildMacro.call(this,c,i),d.configureMacro.call(this,c)),!this.build.extension){var u=(l=r,function(e,t,r){for(var i=0;i<e.macros[l].length;)i=d.tokenExec.call(e,e.macros[l][i],t,r)}),m=new d.Token("text",d.SINGLETON);m.execs.push(u),t.push(m)}(n=new d.Token("group",d.END)).strings.sort_direction=o,s&&(u=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!1)},n.execs.push(u)),e.juris&&(n.juris=r),d.Node.group.build.call(n,this,t,!0),this.build.macro_stack.pop()},d.getMacroTarget=function(e){var t=!1;return this.build.extension?t=this[this.build.root+this.build.extension].tokens:this.macros[e]||(t=[],this.macros[e]=t),t},d.buildMacro=function(e,t){d.makeBuilder(this,e)(void 0===t.length?t:t[0])},d.configureMacro=function(e){this.build.extension||this.configureTokenList(e)},d.XmlToToken=function(e,t,r,i){var n,o,s,a,l,c;if(n=e.cslXml.nodename(this),!e.build.skip||e.build.skip===n)if(n){if(d.Node[e.cslXml.nodename(this)]||d.error('Undefined node name "'+n+'".'),s=e.cslXml.attributes(this),a=d.setDecorations.call(this,e,s),l=new d.Token(n,t),t!==d.END||"if"===n||"else-if"===n||"layout"===n){for(var u in s)if(s.hasOwnProperty(u)){if(t===d.END&&"@language"!==u&&"@locale"!==u)continue;if(s.hasOwnProperty(u))if(d.Attributes[u])try{d.Attributes[u].call(l,e,""+s[u])}catch(e){d.error(u+" attribute: "+e)}else d.debug('warning: undefined attribute "'+u+'" in style')}l.decorations=a,d.DATE_VARIABLES.indexOf(s["@variable"])>-1&&i.push(l.variables)}else t===d.END&&s["@variable"]&&(l.hasVariable=!0,d.DATE_VARIABLES.indexOf(s["@variable"])>-1&&(l.variables=i.pop()));c=r||e[e.build.area].tokens,d.Node[n].build.call(l,e,c,!0)}else(o=e.cslXml.content(this))&&(e.build.text=o)},d.DateParser=function(){for(var e=[["明治",1867],["大正",1911],["昭和",1925],["平成",1988]],t={},r=0,i=e.length;r<i;r++){var n=e[r][0],o=e[r][1];t[n]=o}var s=[],a={};for(r=0,i=e.length;r<i;r++){var l=e[r];o=l[0],s.push(o),a[l[0]]=l[1]}var c=s.join("|"),u=new RegExp("(?:"+c+")(?:[0-9]+)"),m=new RegExp("(?:"+c+")(?:[0-9]+)","g"),p=/(\u6708|\u5E74)/g,h=/\u65E5/g,f=/\u301c/g,g="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",v=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),b=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),y=new RegExp(g.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var e=0,t=this.monthStrings.length;e<t;e++)this.monthSets.push([this.monthStrings[e]]);for(this.monthAbbrevs=[],e=0,t=this.monthSets.length;e<t;e++){this.monthAbbrevs.push([]);for(var r=0,i=this.monthSets[e].length;r<i;r++)this.monthAbbrevs[e].push(this.monthSets[e][0].slice(0,3))}for(this.monthRexes=[],e=0,t=this.monthAbbrevs.length;e<t;e++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[e].join("|")+")"))},this.addDateParserMonths=function(e){if("string"==typeof e&&(e=e.split(/\s+/)),12===e.length||16===e.length){for(var t=0,r=e.length;t<r;t++){for(var i=null,n=!1,o=3,s={},a=0,l=this.monthAbbrevs.length;a<l;a++){if(s[a]={},a===t){for(var c=0,u=this.monthAbbrevs[t].length;c<u;c++)if(this.monthAbbrevs[t][c]===e[t].slice(0,this.monthAbbrevs[t][c].length)){n=!0;break}}else for(c=0,u=this.monthAbbrevs[a].length;c<u;c++)if(i=this.monthAbbrevs[a][c].length,this.monthAbbrevs[a][c]===e[t].slice(0,i)){for(;this.monthSets[a][c].slice(0,i)===e[t].slice(0,i);){if(i>e[t].length||i>this.monthSets[a][c].length){d.debug("unable to disambiguate month string in date parser: "+e[t]);break}i+=1}o=i,s[a][c]=i}for(var m in s)for(var p in s[m])i=s[m][p],m=parseInt(m,10),p=parseInt(p,10),this.monthAbbrevs[m][p]=this.monthSets[m][p].slice(0,i)}n||(this.monthSets[t].push(e[t]),this.monthAbbrevs[t].push(e[t].slice(0,o)))}for(this.monthRexes=[],this.monthRexStrs=[],t=0,r=this.monthAbbrevs.length;t<r;t++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[t].join("|")+")");if(18===this.monthAbbrevs.length)for(t=12,r=14;t<r;t++)this.monthRexes[t+4]=new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")"),this.monthRexStrs[t+4]="^(?:"+this.monthAbbrevs[t].join("|")+")"}else d.debug("month [+season] list of "+e.length+", expected 12 or 16. Ignoring.")},this.convertDateObjectToArray=function(e){e["date-parts"]=[],e["date-parts"].push([]);for(var t,r=0,i=0,n=3;i<n&&e[t=["year","month","day"][i]];i++)r+=1,e["date-parts"][0].push(e[t]),delete e[t];for(e["date-parts"].push([]),i=0,n=r;i<n&&e[t=["year_end","month_end","day_end"][i]];i++)e["date-parts"][1].push(e[t]),delete e[t];return e["date-parts"][0].length!==e["date-parts"][1].length&&e["date-parts"].pop(),e},this.convertDateObjectToString=function(e){for(var t=[],r=0;r<3&&e[d.DATE_PARTS_ALL[r]];r+=1)t.push(e[d.DATE_PARTS_ALL[r]]);return t.join("-")},this._parseNumericDate=function(e,t,r,i){r||(r="");for(var n=i.split(t),o=0,s=n.length;o<s;o++)if(4===n[o].length){e["year"+r]=n[o].replace(/^0*/,""),n=o?n.slice(0,o):n.slice(1);break}for(o=0,s=n.length;o<s;o++)n[o]=parseInt(n[o],10);if(1===n.length||2===n.length&&!n[1])(a=n[0])&&(e["month"+r]=""+n[0]);else if(2===n.length)if(n[this.monthGuess]>12){var a=n[this.dayGuess],l=n[this.monthGuess];a&&(e["month"+r]=""+a,l&&(e["day"+r]=""+l))}else a=n[this.monthGuess],l=n[this.dayGuess],a&&(e["month"+r]=""+a,l&&(e["day"+r]=""+l))},this.parseDateToObject=function(e){var t,r=e,i=-1,n=-1,o=!1;if(e){if("-"===(e=e.replace(/^(.*[0-9])T[0-9].*/,"$1")).slice(0,1)&&(o=!0,e=e.slice(1)),e.match(/^[0-9]{1,3}$/))for(;e.length<4;)e="0"+e;if(I=(e=(e=""+e).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(p)){var s=(e=(e=(e=(e=(e=(e=e.replace(/\s+/g,"")).replace(h,"")).replace(p,"-")).replace(f,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(u);t=[];var l=e.match(m);if(l){for(var c=[],g=0,_=l.length;g<_;g++)c=c.concat(l[g].match(/([^0-9]+)([0-9]+)/).slice(1));for(g=0,_=s.length;g<_;g++)if(t.push(s[g]),g!==_-1){var x=2*g;t.push(c[x]),t.push(c[x+1])}}else t=s;for(g=1,_=t.length;g<_;g+=3)t[g+1]=a[t[g]]+parseInt(t[g+1],10),t[g]="";i=(e=(e=(e=(e=t.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),n=e.indexOf("-")}}var w,C,k="",T="",E={};if('"'===(e=e.replace(/([A-Za-z])\./g,"$1")).slice(0,1)&&'"'===e.slice(-1))return E.literal=e.slice(1,-1),E;i>-1&&n>-1?e.split("/").length>3?(w="-",C="/",t=(e=e.replace(/\_/g,"-")).split(y)):(w="/",C="-",t=(e=e.replace(/\_/g,"/")).split(b)):(w="-",C="-",t=(e=(e=e.replace(/\//g,"-")).replace(/\_/g,"-")).split(v));var S=[];for(g=0,_=t.length;g<_;g++){var I;(I=t[g].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/))&&S.push(I[1])}var A=S.indexOf(w),O=[],N=!1;A>-1?(O.push([0,A]),O.push([A+1,S.length]),N=!0):O.push([0,S.length]);var R="";for(g=0,_=O.length;g<_;g++){var P=O[g],D=S.slice(P[0],P[1]);e:for(var B=0,M=D.length;B<M;B++){var L=D[B];if(L.indexOf(C)>-1)this._parseNumericDate(E,C,R,L);else if(L.match(/[0-9]{4}/))E["year"+R]=L.replace(/^0*/,"");else{("~"===L||"?"===L||"c"===L||L.match(/^cir/))&&(E.circa=!0);for(var z=0,F=this.monthRexes.length;z<F;z++)if(L.toLocaleLowerCase().match(this.monthRexes[z])){E["month"+R]=""+(parseInt(z,10)+1);continue e}L.match(/^[0-9]+$/)&&(k=L),L.toLocaleLowerCase().match(/^bc/)&&k?(E["year"+R]=""+-1*k,k=""):L.toLocaleLowerCase().match(/^ad/)&&k?(E["year"+R]=""+k,k=""):!L.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)||E["season"+R]||(T=L)}}k&&(E["day"+R]=k,k=""),T&&!E["season"+R]&&(E["season"+R]=T.trim(),T=""),R="_end"}if(N)for(B=0,M=d.DATE_PARTS_ALL.length;B<M;B++){var j=d.DATE_PARTS_ALL[B];E[j]&&!E[j+"_end"]?E[j+"_end"]=E[j]:!E[j]&&E[j+"_end"]&&(E[j]=E[j+"_end"])}(!E.year||E.year&&E.day&&!E.month)&&(E={literal:r});var H=["year","month","day","year_end","month_end","day_end"];for(g=0,_=H.length;g<_;g++){var q=H[g];"string"==typeof E[q]&&E[q].match(/^[0-9]+$/)&&(E[q]=parseInt(E[q],10))}return o&&Object.keys(E).indexOf("year")>-1&&(E.year=-1*E.year),E},this.parseDateToArray=function(e){return this.convertDateObjectToArray(this.parseDateToObject(e))},this.parseDateToString=function(e){return this.convertDateObjectToString(this.parseDateToObject(e))},this.parse=function(e){return this.parseDateToObject(e)},this.setOrderMonthDay(),this.resetDateParserMonths()},d.DateParser=new d.DateParser,d.Engine=function(e,t,r,i){var n,o;for(var s in this.processor_version=d.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=e,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},writable:!0,configurable:!0}),e.variableWrapper&&(d.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(d.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),d.retrieveStyleModule&&(this.sys.retrieveStyleModule=d.retrieveStyleModule),d.getAbbreviation&&(this.sys.getAbbreviation=d.getAbbreviation),this.sys.stringCompare&&(d.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=d.AbbreviationSegments,this.transform=new d.Transform(this),this.setParseNames=function(e){this.opt["parse-names"]=e},this.opt=new d.Engine.Opt,this.tmp=new d.Engine.Tmp,this.build=new d.Engine.Build,this.fun=new d.Engine.Fun(this),this.configure=new d.Engine.Configure,this.citation_sort=new d.Engine.CitationSort,this.bibliography_sort=new d.Engine.BibliographySort,this.citation=new d.Engine.Citation(this),this.bibliography=new d.Engine.Bibliography,this.intext=new d.Engine.InText,this.output=new d.Output.Queue(this),this.dateput=new d.Output.Queue(this),this.cslXml=d.setupXml(t),d.SYS_OPTIONS){var a=d.SYS_OPTIONS[s];"boolean"==typeof this.sys[a]&&(this.opt.development_extensions[a]=this.sys[a])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(e,t){var r=this.cslXml.children(e);this.cslXml.setAttribute(e,"cslid",this.build.cslNodeId),this.opt.nodenames.push(t),this.build.cslNodeId+=1;for(var i=0,n=this.cslXml.numberofnodes(r);i<n;i+=1)(t=this.cslXml.nodename(r[i]))&&this.setCslNodeIds(r[i],t)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),void 0===this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.consolidate_legal_items=!0,this.opt.development_extensions.consolidate_container_items=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0,this.opt.development_extensions.force_title_abbrev_fallback=!0),r&&(r=r.replace("_","-"),r=d.normalizeLocaleStr(r)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=d.normalizeLocaleStr(this.opt["default-locale"][0])),r&&i&&(this.opt["default-locale"]=[r]),r&&!i&&this.opt["default-locale"][0]&&(r=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(r||(r="en-US"),this.opt["default-locale"].push("en-US")),r||(r=this.opt["default-locale"][0]),n=d.localeResolve(r),this.opt.lang=n.best,this.opt["default-locale"][0]=n.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(n),this.locale[this.opt.lang].opts["skip-words-regexp"]=(o=(o=this.locale[this.opt.lang].opts["skip-words"]).slice(),new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+o.join("|")+")(?=[!?:]*\\s+|-|$))","g")),this.output.adjust=new d.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new d.Registry(this),this.macros={},this.build.area="citation";var l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(l,this[this.build.area].tokens),this.build.area="bibliography",l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area),this.buildTokenLists(l,this[this.build.area].tokens),this.build.area="intext",l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area),this.buildTokenLists(l,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new d.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new d.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=d.DateParser,this.fun.flipflopper=new d.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=d.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=d.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},d.Engine.prototype.setCloseQuotesArray=function(){var e;(e=[]).push(this.getTerm("close-quote")),e.push(this.getTerm("close-inner-quote")),e.push('"'),e.push("'"),this.opt.close_quotes_array=e},d.makeBuilder=function(e,t){var r=[],i=[];function n(n){i.push(n),d.XmlToToken.call(n,e,d.START,t,r)}function o(){var n=i.pop();d.XmlToToken.call(n,e,d.END,t,r)}function s(i){d.XmlToToken.call(i,e,d.SINGLETON,t,r)}return function t(r,i,a){a||(a=[]),r||(r=[]),void 0===r.length&&(r=[r]);for(var l=0;l<r.length;l++){var c=r[l];null!==e.cslXml.nodename(c)&&(i&&"date"===e.cslXml.nodename(c)&&(d.Util.fixDateNode.call(e,i,l,c),c=e.cslXml.children(i)[l]),e.cslXml.numberofnodes(e.cslXml.children(c))?(n(c),t(e.cslXml.children(c),c,a),o()):s(c))}}},d.Engine.prototype.buildTokenLists=function(e,t){this.cslXml.getNodeValue(e)&&d.makeBuilder(this,t)(void 0===e.length?e:e[0])},d.Engine.prototype.setStyleAttributes=function(){var e,t,r={};for(t in r.name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj))e.hasOwnProperty(t)&&d.Attributes[t].call(r,this,e[t])},d.Engine.prototype.getTerm=function(e,t,r,i,n,o){var s;e&&e.match(/[A-Z]/)&&e===e.toUpperCase()&&(d.debug("Warning: term key is in uppercase form: "+e),e=e.toLowerCase()),s=o?this.opt["default-locale"][0]:this.opt.lang;var a=d.Engine.getField(d.LOOSE,this.locale[s].terms,e,t,r,i);return a||"range-delimiter"!==e||(a="–"),void 0===a&&(n===d.STRICT?d.error('Error in getTerm: term "'+e+'" does not exist.'):n===d.TOLERANT&&(a="")),a&&(this.tmp.cite_renders_content=!0),a},d.Engine.prototype.getDate=function(e,t){var r;return r=t?this.opt["default-locale"]:this.opt.lang,!!this.locale[r].dates[e]&&this.locale[r].dates[e]},d.Engine.prototype.getOpt=function(e){return void 0!==this.locale[this.opt.lang].opts[e]&&this.locale[this.opt.lang].opts[e]},d.Engine.prototype.getVariable=function(e,t,r,i){return d.Engine.getField(d.LOOSE,e,t,r,i)},d.Engine.prototype.getDateNum=function(e,t){return void 0===e?0:e[t]},d.Engine.getField=function(e,t,r,i,n,o){var s,a,l,c,u,m;if(s="",void 0===t[r]){if(e!==d.STRICT)return;d.error('Error in getField: term "'+r+'" does not exist.')}for(m=o&&t[r][o]?t[r][o]:t[r],a=[],"symbol"===i?a=["symbol","short"]:"verb-short"===i?a=["verb-short","verb"]:"long"!==i&&(a=[i]),u=(a=a.concat(["long"])).length,c=0;c<u;c+=1)if(l=a[c],"string"==typeof m||"number"==typeof m)s=m;else if(void 0!==m[l]){s="string"==typeof m[l]||"number"==typeof m[l]?m[l]:"number"==typeof n?m[l][n]:m[l][0];break}return s},d.Engine.prototype.configureTokenLists=function(){var e,t;for(t=d.AREAS.length,e=0;e<t;e+=1){var r=this[d.AREAS[e]].tokens;this.configureTokenList(r)}return this.version=d.version,this.state},d.Engine.prototype.configureTokenList=function(e){var t,r,i,n,o,s;for(t=["year","month","day"],n=e.length-1;n>-1;n+=-1){if("date"===(r=e[n]).name&&d.END===r.tokentype&&(i=[]),"date-part"===r.name&&r.strings.name)for(s=t.length,o=0;o<s;o+=1)t[o]===r.strings.name&&i.push(r.strings.name);"date"===r.name&&d.START===r.tokentype&&(i.reverse(),r.dateparts=i),r.next=n+1,r.name&&d.Node[r.name].configure&&d.Node[r.name].configure.call(r,this,n)}},d.Engine.prototype.refetchItems=function(e){for(var t=[],r=0,i=e.length;r<i;r+=1)t.push(this.refetchItem(""+e[r]));return t},d.ITERATION=0,d.Engine.prototype.retrieveItem=function(e){var t,r;if(this.tmp.loadedItemIDs[e])return this.registry.refhash[e];if(this.tmp.loadedItemIDs[e]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var i=0,n=this.opt["default-locale"].length;i<n;i+=1)this.opt["default-locale"][i]=this.opt["default-locale"][i].toLowerCase();for(i=0,n=this.opt["locale-translit"].length;i<n;i+=1)this.opt["locale-translit"][i]=this.opt["locale-translit"][i].toLowerCase();for(i=0,n=this.opt["locale-translat"].length;i<n;i+=1)this.opt["locale-translat"][i]=this.opt["locale-translat"][i].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(d.ITERATION+=1,t=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+e))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(t.multi){if(t.multi._keys)for(var o in t.multi._keys)for(var s in t.multi._keys[o])s!==s.toLowerCase()&&(t.multi._keys[o][s.toLowerCase()]=t.multi._keys[o][s],delete t.multi._keys[o][s]);if(t.multi.main)for(var o in t.multi.main)t.multi.main[o]=t.multi.main[o].toLowerCase()}for(i=0,n=d.NAME_VARIABLES.length;i>n;i+=1){var a=d.NAME_VARIABLES[i];if(t[a]&&t[a].multi)for(var l=0,c=t[a].length;l<c;l+=1){var u=t[a][l];if(u.multi){if(u.multi._key)for(var s in u.multi._key)s!==s.toLowerCase()&&(u.multi._key[s.toLowerCase()]=u.multi._key[s],delete u.multi._key[s]);u.multi.main&&(u.multi.main=u.multi.main.toLowerCase())}}}}for(var s in t.language&&t.language.match(/[><]/)&&("<"===(r=t.language.match(/(.*?)([<>])(.*)/))[2]?(t["language-name"]=r[1],t["language-name-original"]=r[3]):(t["language-name"]=r[3],t["language-name-original"]=r[1]),this.opt.multi_layout?t["language-name-original"]&&(t.language=t["language-name-original"]):t["language-name"]&&(t.language=t["language-name"])),t.page&&(t["page-first"]=t.page,"\\"!==(r=(""+t.page).split(/\s*(?:&|, |-|\u2013)\s*/))[0].slice(-1)&&(t["page-first"]=r[0])),this.opt.development_extensions.field_hack&&t.note&&d.parseNoteFieldHacks(t,!1,this.opt.development_extensions.allow_field_hack_date_override),t)if(d.DATE_VARIABLES.indexOf(s.replace(/^alt-/,""))>-1){var m=t[s];m&&(this.opt.development_extensions.raw_date_parsing&&(!m.raw||m["date-parts"]&&0!==m["date-parts"].length||(m=this.fun.dateparser.parseDateToObject(m.raw))),t[s]=this.dateParseArray(m))}if(this.opt.development_extensions.consolidate_legal_items&&t.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1){var p=[];for(i=0,n=(g=["type","title","jurisdiction","genre","volume","container-title"]).length;i<n;i+=1)t[f=g[i]]&&p.push(t[f]);for(i=0,n=(g=["original-date","issued"]).length;i<n;i+=1)if(t[f=g[i]]&&t[f].year){var h=t[f].year;p.push(h);break}t.legislation_id=p.join("::")}if(this.bibliography.opt.track_container_items&&this.bibliography.opt.track_container_items.indexOf(t.type)>-1){var f,g,v=[];for(i=0,n=(g=["type","container-title","publisher","edition"]).length;i<n;i+=1)t[f=g[i]]&&v.push(t[f]);t.container_id=v.join("::")}if(this.opt.development_extensions.force_jurisdiction&&"string"==typeof t.authority&&(t.authority=[{literal:t.authority,multi:{_key:{}}}],t.multi&&t.multi._keys&&t.multi._keys.authority))for(var s in t.authority[0].multi._key={},t.multi._keys.authority)t.authority[0].multi._key[s]={literal:t.multi._keys.authority[s]};if(t["title-short"]||(t["title-short"]=t.shortTitle),this.opt.development_extensions.main_title_from_short_title){var b="fr"===this.opt["default-locale"][0].slice(0,2).toLowerCase();d.extractTitleAndSubtitle.call(this,t,b)}var y,_=["bill","legal_case","legislation","gazette","regulation"].indexOf(t.type)>-1;if(this.opt.development_extensions.force_jurisdiction&&_&&(t.jurisdiction||(t.jurisdiction="us")),!_&&t.title&&this.sys.getAbbreviation){t.jurisdiction,y=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey("title",t.title):t.title;var x=this.transform.loadAbbreviation(t.jurisdiction,"title",y,t.language);this.transform.abbrevs[x].title&&this.transform.abbrevs[x].title[y]&&(t["title-short"]=this.transform.abbrevs[x].title[y])}if(t["container-title-short"]||(t["container-title-short"]=t.journalAbbreviation),t["container-title"]&&this.sys.getAbbreviation&&(y=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(t["container-title"]):t["container-title"],x=this.transform.loadAbbreviation(t.jurisdiction,"container-title",y,t.language),this.transform.abbrevs[x]["container-title"]&&this.transform.abbrevs[x]["container-title"][y]&&(t["container-title-short"]=this.transform.abbrevs[x]["container-title"][y])),t.jurisdiction&&(t.country=t.jurisdiction.split(":")[0]),this.registry.refhash[e]){if(JSON.stringify(this.registry.refhash[e])!=JSON.stringify(t)){for(var s in this.registry.refhash[e])delete this.registry.refhash[e][s];this.tmp.taintedItemIDs[t.id]=!0,Object.assign(this.registry.refhash[e],t)}}else this.registry.refhash[e]=t;return this.registry.refhash[e]},d.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]},d.Engine.prototype.setOpt=function(e,t,r){"style"===e.name||"cslstyle"===e.name?(this.opt.inheritedAttributes[t]=r,this.citation.opt.inheritedAttributes[t]=r,this.bibliography.opt.inheritedAttributes[t]=r):["citation","bibliography"].indexOf(e.name)>-1?this[e.name].opt.inheritedAttributes[t]=r:e.strings[t]=r},d.Engine.prototype.inheritOpt=function(e,t,r,i){if(void 0!==e.strings[t])return e.strings[t];var n=this[this.tmp.root].opt.inheritedAttributes[r||t];return void 0!==n?n:i},d.Engine.prototype.remapSectionVariable=function(e){for(var t=0,r=e.length;t<r;t+=1){var i=e[t][0],n=e[t][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(i.type)>-1){n.locator&&(n.locator=n.locator.trim(),(s=n.locator.match(d.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))||(n.label?n.locator=d.STATUTE_SUBDIV_STRINGS_REVERSE[n.label]+" "+n.locator:n.locator="p. "+n.locator));var o=null;if(i.section&&(i.section=i.section.trim(),(s=i.section.match(d.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))?o=s[0].trim():(i.section="sec. "+i.section,o="sec.")),i.section)if(n.locator){var s,a=" ";(s=n.locator.match(/^([^ ]*)\s*(.*)/))?("p."===s[1]&&"p."!==o&&(n.locator=s[2]),["[","(",".",",",";",":","?"].indexOf(n.locator.slice(0,1))>-1&&(a="")):a="",n.locator=i.section+a+n.locator}else n.locator=i.section;n.label=""}}},d.Engine.prototype.setNumberLabels=function(e){if(e.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)>-1&&this.opt.development_extensions.consolidate_legal_items&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var t=""+e.number,r=(t=t.split("\\").join("")).split(/\s+/)[0],i=d.STATUTE_SUBDIV_STRINGS[r];if(i){var n=t.split(d.STATUTE_SUBDIV_PLAIN_REGEX);if(n.length>1){for(var o=[],s=1,a=n.length;s<a;s+=1)o.push(n[s].replace(/\s*$/,"").replace(/^\s*/,""));t=o.join(" ")}else t=n[0];this.tmp.shadow_numbers.number.label=i,this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!0}},d.substituteOne=function(e){return function(t,r){return r?e.replace("%%STRING%%",r):""}},d.substituteTwo=function(e){return function(t){var r=e.replace("%%PARAM%%",t);return function(e,t){return t?r.replace("%%STRING%%",t):""}}},d.Mode=function(e){var t,r,i,n,o,s;for(i in t={},r=d.Output.Formats[e])"@"===i.slice(0,1)?(n=!1,o=r[i],s=i.split("/"),"string"==typeof o&&o.indexOf("%%STRING%%")>-1?n=o.indexOf("%%PARAM%%")>-1?d.substituteTwo(o):d.substituteOne(o):"boolean"!=typeof o||o?"function"==typeof o?n=o:d.error("Bad "+e+" config entry for "+i+": "+o):n=d.Output.Formatters.passthrough,1===s.length?t[s[0]]=n:2===s.length&&(t[s[0]]||(t[s[0]]={}),t[s[0]][s[1]]=n)):t[i]=r[i];return t},d.setDecorations=function(e,t){var r,i;for(i in r=[],d.FORMAT_KEY_SEQUENCE){var n;t[n=d.FORMAT_KEY_SEQUENCE[i]]&&(r.push([n,t[n]]),delete t[n])}return r},d.Doppeler=function(e,t){var r=new RegExp("("+e+")","g"),i=new RegExp(e,"g");this.split=function(e){t&&(e=t(e));var n=e.match(r);if(!n)return{tags:[],strings:[e]};for(var o=e.split(i),s=n.length-1;s>-1;s--)"number"==typeof n[s]&&(n[s]=""),"'"===n[s]&&o[s+1].length>0&&(o[s+1]=n[s]+o[s+1],n[s]="");return{tags:n,strings:o,origStrings:o.slice()}},this.join=function(e){for(var t=e.strings.slice(-1),r=e.tags.length-1;r>-1;r--)t.push(e.tags[r]),t.push(e.strings[r]);return t.reverse(),t.join("")}},d.Engine.prototype.normalDecorIsOrphan=function(e,t){if("normal"===t[1]){for(var r,i=!1,n=(r="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(e.alldecor):e.alldecor).length-1;n>-1;n+=-1)for(var o=r[n].length-1;o>-1;o+=-1)r[n][o][0]===t[0]&&"normal"!==r[n][o][1]&&(i=!0);if(!i)return!0}return!1},d.Engine.prototype.getCitationLabel=function(e){var t="",r=this.getTrigraphParams(),i=r[0],n=this.getTerm("reference","short",0);void 0===n&&(n="reference"),n=(n=n.replace(".","")).slice(0,1).toUpperCase()+n.slice(1);for(var o=0,s=d.NAME_VARIABLES.length;o<s;o+=1){var a=d.NAME_VARIABLES[o];if(e[a]){var l=e[a];i=l.length>r.length?r[r.length-1]:r[l.length-1];for(var c=0,u=l.length;c<u&&c!==i.authors.length;c+=1){var m=this.nameOutput.getName(l[c],"locale-translit",!0).name;m&&m.family?n=(n=m.family).replace(/^([ \'\u2019a-z]+\s+)/,""):m&&m.literal&&(n=m.literal);var p=n.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(p&&(n=n.slice(p[1].length)),!(n=n.replace(d.ROMANESQUE_NOT_REGEXP,"")))break;(n=n.slice(0,i.authors[c])).length>1?n=n.slice(0,1).toUpperCase()+n.slice(1).toLowerCase():1===n.length&&(n=n.toUpperCase()),t+=n}break}}if(!t&&e.title){var h=this.locale[this.opt.lang].opts["skip-words"],f=e.title.split(/\s+/);for(o=f.length-1;o>-1;o--)h.indexOf(f[o])>-1&&(f=f.slice(0,o).concat(f.slice(o+1)));var g=f.join("");(g=g.slice(0,r[0].authors[0])).length>1?g=g.slice(0,1).toUpperCase()+g.slice(1).toLowerCase():1===g.length&&(g=g.toUpperCase()),t=g}var v="0000";return e.issued&&e.issued.year&&(v=""+e.issued.year),t+v.slice(-1*i.year)},d.Engine.prototype.getTrigraphParams=function(){var e=[],t=this.opt.trigraph.split(":");this.opt.trigraph&&"A"===this.opt.trigraph.slice(0,1)||d.error("Bad trigraph definition: "+this.opt.trigraph);for(var r=0,i=t.length;r<i;r+=1){for(var n=t[r],o={authors:[],year:0},s=0,a=n.length;s<a;s+=1)switch(n.slice(s,s+1)){case"A":o.authors.push(1);break;case"a":o.authors[o.authors.length-1]+=1;break;case"0":o.year+=1;break;default:d.error("Invalid character in trigraph definition: "+this.opt.trigraph)}e.push(o)}return e},d.Engine.prototype.setOutputFormat=function(e){this.opt.mode=e,this.fun.decorate=d.Mode(e),this.output[e]||(this.output[e]={},this.output[e].tmp={})},d.Engine.prototype.getSortFunc=function(){return function(e,t){return e=e.split("-"),t=t.split("-"),e.length<t.length?1:e.length>t.length?-1:(e=e.slice(-1)[0],t=t.slice(-1)[0],e.length<t.length?1:e.length>t.length?-1:0)}},d.Engine.prototype.setLangTagsForCslSort=function(e){var t,r;if(e)for(this.opt["locale-sort"]=[],t=0,r=e.length;t<r;t+=1)this.opt["locale-sort"].push(e[t]);this.opt["locale-sort"].sort(this.getSortFunc())},d.Engine.prototype.setLangTagsForCslTransliteration=function(e){var t,r;if(this.opt["locale-translit"]=[],e)for(t=0,r=e.length;t<r;t+=1)this.opt["locale-translit"].push(e[t]);this.opt["locale-translit"].sort(this.getSortFunc())},d.Engine.prototype.setLangTagsForCslTranslation=function(e){var t,r;if(this.opt["locale-translat"]=[],e)for(t=0,r=e.length;t<r;t+=1)this.opt["locale-translat"].push(e[t]);this.opt["locale-translat"].sort(this.getSortFunc())},d.Engine.prototype.setLangPrefsForCites=function(e,t){var r=this.opt["cite-lang-prefs"];t||(t=function(e){return e.toLowerCase()});for(var i=["Persons","Institutions","Titles","Journals","Publishers","Places"],n=0,o=i.length;n<o;n+=1){var s=t(i[n]),a=i[n].toLowerCase();if(e[s]){for(var l=[];e[s].length>1;)l.push(e[s].pop());var c={orig:1,translit:2,translat:3};for(2===l.length&&c[l[0]]<c[l[1]]&&l.reverse();l.length;)e[s].push(l.pop());for(var u=r[a];u.length;)u.pop();for(var d=0,m=e[s].length;d<m;d+=1)u.push(e[s][d])}}},d.Engine.prototype.setLangPrefsForCiteAffixes=function(e){if(e&&48===e.length){for(var t,r=this.opt.citeAffixes,i=0,n=["persons","institutions","titles","journals","publishers","places"],o=["translit","orig","translit","translat"],s=0,a=n.length;s<a;s+=1)for(var l=0,c=o.length;l<c;l+=1)t="",i%8==4&&(r[n[s]]["locale-"+o[l]].prefix||r[n[s]]["locale-"+o[l]].suffix)||(t=e[i]?e[i]:"",r[n[s]]["locale-"+o[l]].prefix=t,t=e[i]?e[i+1]:"",r[n[s]]["locale-"+o[l]].suffix=t),i+=2;this.opt.citeAffixes=r}},d.Engine.prototype.setAutoVietnameseNamesOption=function(e){this.opt["auto-vietnamese-names"]=!!e},d.Engine.prototype.setAbbreviations=function(e){this.sys.setAbbreviations&&this.sys.setAbbreviations(e)},d.Engine.prototype.setSuppressTrailingPunctuation=function(e){this.citation.opt.suppressTrailingPunctuation=!!e},d.Output={},d.Output.Queue=function(e){this.levelname=["top"],this.state=e,this.queue=[],this.empty=new d.Token("empty");var t={};t.empty=this.empty,this.formats=new d.Stack(t),this.current=new d.Stack(this.queue)},d.Output.Queue.prototype.pop=function(){var e=this.current.value();return e.length?e.pop():e.blobs.pop()},d.Output.Queue.prototype.getToken=function(e){return this.formats.value()[e]},d.Output.Queue.prototype.mergeTokenStrings=function(e,t){var r,i,n;if(n=r=this.formats.value()[e],i=this.formats.value()[t]){r||((r=new d.Token(e,d.SINGLETON)).decorations=[]),n=new d.Token(e,d.SINGLETON);var o="";for(var o in r.strings)r.strings.hasOwnProperty(o)&&(n.strings[o]=r.strings[o]);for(var o in i.strings)i.strings.hasOwnProperty(o)&&(n.strings[o]=i.strings[o]);n.decorations=r.decorations.concat(i.decorations)}return n},d.Output.Queue.prototype.addToken=function(e,t,r){var i,n;if(i=new d.Token("output"),"string"==typeof r&&(r=this.formats.value()[r]),r&&r.strings){for(n in r.strings)r.strings.hasOwnProperty(n)&&(i.strings[n]=r.strings[n]);i.decorations=r.decorations}"string"==typeof t&&(i.strings.delimiter=t),this.formats.value()[e]=i},d.Output.Queue.prototype.pushFormats=function(e){e||(e={}),e.empty=this.empty,this.formats.push(e)},d.Output.Queue.prototype.popFormats=function(){this.formats.pop()},d.Output.Queue.prototype.startTag=function(e,t){var r={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(t=this.empty,e="empty"),r[e]=t,this.pushFormats(r),this.openLevel(e)},d.Output.Queue.prototype.endTag=function(e){this.closeLevel(e),this.popFormats()},d.Output.Queue.prototype.openLevel=function(e){var t,r;"object"==typeof e?t=new d.Blob(void 0,e):void 0===e?t=new d.Blob(void 0,this.formats.value().empty,"empty"):(this.formats.value()&&this.formats.value()[e]||d.error('CSL processor error: call to nonexistent format token "'+e+'"'),t=new d.Blob(void 0,this.formats.value()[e],e)),r=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.prefix=this.checkNestedBrace.update(t.strings.prefix)),r.push(t),this.current.push(t)},d.Output.Queue.prototype.closeLevel=function(e){e&&e!==this.current.value().levelname&&d.error("Level mismatch error:  wanted "+e+" but found "+this.current.value().levelname);var t=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.suffix=this.checkNestedBrace.update(t.strings.suffix))},d.Output.Queue.prototype.append=function(e,t,r,i,n){var o,s,a,l=!0;if(r&&(i=!0),this.state.tmp["doing-macro-with-date"]&&!r){if("macro-with-date"!==t)return!1;"macro-with-date"===t&&(t="empty")}if(void 0===e)return!1;if("number"==typeof e&&(e=""+e),!r&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value())return!1;if(s=!1,t?"literal"===t?(o=!0,l=!1):o="string"==typeof t?this.formats.value()[t]:t:o=this.formats.value().empty,o||d.error("CSL processor error: unknown format token name: "+t),o.strings&&void 0===o.strings.delimiter&&(o.strings.delimiter=""),"string"==typeof e&&e.length&&(e=e.replace(/ ([:;?!\u00bb])/g," $1").replace(/\u00ab /g,"« "),this.last_char_rendered=e.slice(-1),e=e.replace(/\s+'/g," '"),r||(e=e.replace(/^'/g," '")),i?r&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),s=new d.Blob(e,o),void 0===(a=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),a=this.current.value()),"string"==typeof s.blobs&&(i?r&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),"string"==typeof e){if("string"==typeof s.blobs&&" "!==s.blobs.slice(0,1)){for(var c="",u=s.blobs;d.TERMINAL_PUNCTUATION.indexOf(u.slice(0,1))>-1;)c+=u.slice(0,1),u=u.slice(1);u&&c&&(s.strings.prefix=s.strings.prefix+c,s.blobs=u)}s.strings["text-case"]&&(s.blobs=d.Output.Formatters[s.strings["text-case"]](this.state,e)),this.state.tmp.strip_periods&&!n&&(s.blobs=s.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var m=s.decorations.length-1;m>-1;m+=-1)"@quotes"===s.decorations[m][0]&&"false"!==s.decorations[m][1]&&(s.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),s.blobs.match(d.ROMANESQUE_REGEXP)||"@font-style"===s.decorations[m][0]&&(s.decorations=s.decorations.slice(0,m).concat(s.decorations.slice(m+1)));a.push(s),this.state.fun.flipflopper.processTags(s)}else l?a.push(s):a.push(e);return!0},d.Output.Queue.prototype.string=function(e,t,r){var i,n=d.getSafeEscape(this.state),o=t.slice(),s=[];if(0===o.length)return s;var a,l,c,u,m="";r?m=r.strings.delimiter:(e.tmp.count_offset_characters=!1,e.tmp.offset_characters=0),r&&r.new_locale&&(r.old_locale=e.opt.lang,e.opt.lang=r.new_locale);for(var p=0,h=o.length;p<h;p+=1){if((a=o[p]).strings.first_blob&&(e.tmp.count_offset_characters=a.strings.first_blob),"string"==typeof a.blobs){if("number"==typeof a.num)s.push(a);else if(a.blobs){a.particle&&(a.blobs=a.particle+a.blobs,a.particle="");var f=(i=n(a.blobs)).length;if(!e.tmp.suppress_decorations)for(b=0,y=a.decorations.length;b<y;b+=1)"@showid"!==(u=a.decorations[b])[0]&&(e.normalDecorIsOrphan(a,u)||(i=e.fun.decorate[u[0]][u[1]].call(a,e,i,u[2])));if(i&&i.length){if(i=n(a.strings.prefix)+i+n(a.strings.suffix),e.opt.development_extensions.csl_reverse_lookup_support&&!e.tmp.suppress_decorations)for(b=0,y=a.decorations.length;b<y;b+=1)"@showid"===(u=a.decorations[b])[0]&&(i=e.fun.decorate[u[0]][u[1]].call(a,e,i,u[2]));s.push(i),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=f+a.strings.suffix.length+a.strings.prefix.length)}}}else if(a.blobs.length){var g=e.output.string(e,a.blobs,a);if(r&&"string"!==g&&g.length>1&&a.strings.delimiter)for(var v=!1,b=0,y=g.length;b<y;b++)"string"!=typeof g[b]?v=!0:v&&(g[b]=a.strings.delimiter+g[b]);s=s.concat(g)}a.strings.first_blob&&e.registry.registry[a.strings.first_blob]&&(e.registry.registry[a.strings.first_blob].offset=e.tmp.offset_characters,e.tmp.count_offset_characters=!1)}for(p=0,h=s.length-1;p<h;p+=1)"number"!=typeof s[p].num||"number"!=typeof s[p+1].num||s[p+1].UGLY_DELIMITER_SUPPRESS_HACK||(s[p].strings.suffix=s[p].strings.suffix+(m||""),s[p+1].successor_prefix="",s[p+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);var _=0;for(p=0,h=s.length;p<h;p+=1)"string"==typeof s[p]&&(_=parseInt(p,10)+1,p<s.length-1&&"object"==typeof s[p+1]&&(m&&!s[p+1].UGLY_DELIMITER_SUPPRESS_HACK&&(s[p]+=n(m)),s[p+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(r&&(r.decorations.length||r.strings.suffix))_=s.length;else if(r&&r.strings.prefix)for(p=0,h=s.length;p<h;p++)if(void 0!==s[p].num){_=p,0===p&&(s[p].strings.prefix=r.strings.prefix+s[p].strings.prefix);break}var x=e.output.renderBlobs(s.slice(0,_),m,!1,r);if(x&&r&&(r.decorations.length||r.strings.suffix||r.strings.prefix)){if(!e.tmp.suppress_decorations)for(p=0,h=r.decorations.length;p<h;p+=1)u=r.decorations[p],["@cite","@bibliography","@display","@showid"].indexOf(u[0])>-1||e.normalDecorIsOrphan(a,u)||u[0]&&"string"==typeof x&&(x=e.fun.decorate[u[0]][u[1]].call(r,e,x,u[2]));if(i=x,l=r.strings.suffix,i&&i.length&&(i=n(c=r.strings.prefix)+i+n(l),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=c.length+l.length)),x=i,!e.tmp.suppress_decorations)for(p=0,h=r.decorations.length;p<h;p+=1)u=r.decorations[p],-1!==["@cite","@bibliography","@display","@showid"].indexOf(u[0])&&"string"==typeof x&&(x=e.fun.decorate[u[0]][u[1]].call(r,e,x,u[2]))}var w=s.slice(_,s.length);return!w.length&&x?s=[x]:w.length&&!x?s=w:x&&w.length&&(s=[x].concat(w)),void 0===r?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),e.tmp.suppress_decorations&&(s=e.output.renderBlobs(s,void 0,!1))):"boolean"==typeof r&&(s=e.output.renderBlobs(s,void 0,!0)),r&&r.new_locale&&(e.opt.lang=r.old_locale),s},d.Output.Queue.prototype.clearlevel=function(){var e,t,r;for(r=(e=this.current.value()).blobs.length,t=0;t<r;t+=1)e.blobs.pop()},d.Output.Queue.prototype.renderBlobs=function(e,t,r,i){var n,o,s,a,l,c,u,m,p,h,f;if(f=d.getSafeEscape(this.state),t||(t=""),n=this.state,o="",s="",c=e.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===c&&"object"==typeof e[0]&&i)return e[0].strings.prefix=i.strings.prefix+e[0].strings.prefix,e[0].strings.suffix=e[0].strings.suffix+i.strings.suffix,e[0].decorations=e[0].decorations.concat(i.decorations),e[0].params=i.params,e[0];var g=!0;for(l=0;l<c;l+=1)e[l].checkNext?(e[l].checkNext(e[l+1],g),g=!1):g=!e[l+1]||!e[l+1].splice_prefix;var v=!0;for(l=e.length-1;l>0;l+=-1)e[l].checkLast?v&&e[l].checkLast(e[l-1])&&(v=!1):v=!0;for(c=e.length,l=0;l<c;l+=1)if(o&&(s=t),"string"==typeof(a=e[l]))o+=f(s),o+=a,n.tmp.count_offset_characters&&(n.tmp.offset_characters+=s.length);else if(r)o=o?[o,a]:[a];else if(a.status!==d.SUPPRESS){var b=(p=a.particle?a.particle+a.num:a.formatter.format(a.num,a.gender)).replace(/<[^>]*>/g,"").length;this.append(p,"empty",!0);var y=this.pop(),_=n.tmp.count_offset_characters;if(p=this.string(n,[y],!1),n.tmp.count_offset_characters=_,a.strings["text-case"]&&(p=d.Output.Formatters[a.strings["text-case"]](this.state,p)),p&&this.state.tmp.strip_periods&&(p=p.replace(/\.([^a-z]|$)/g,"$1")),!n.tmp.suppress_decorations)for(m=a.decorations.length,u=0;u<m;u+=1)h=a.decorations[u],n.normalDecorIsOrphan(a,h)||(p=n.fun.decorate[h[0]][h[1]].call(a,n,p,h[2]));p=f(a.strings.prefix)+p+f(a.strings.suffix);var x="";a.status===d.END?x=f(a.range_prefix):a.status===d.SUCCESSOR?x=f(a.successor_prefix):a.status===d.START?x=l>0&&!a.suppress_splice_prefix?f(a.splice_prefix):"":a.status===d.SEEN&&(x=f(a.splice_prefix)),o+=x,o+=p,n.tmp.count_offset_characters&&(n.tmp.offset_characters+=x.length+a.strings.prefix.length+b+a.strings.suffix.length)}return o},d.Output.Queue.purgeEmptyBlobs=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;t>-1;t--){d.Output.Queue.purgeEmptyBlobs(e.blobs[t]);var r=e.blobs[t];if(!r||!r.blobs||!r.blobs.length){for(var i=[];e.blobs.length-1>t;)i.push(e.blobs.pop());for(e.blobs.pop();i.length;)e.blobs.push(i.pop())}}},d.Output.Queue.adjust=function(e){var t={";":!0,":":!0},r={".":!0,"!":!0,"?":!0},i={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},n={},o={},s={},a={};for(var l in i)s[l]=!0,a[l]=!0,t[l]||(n[l]=!0),r[l]||(o[l]=!0);a[" "]=!0,a[" "]=!0;var c={};for(var l in i)for(var u in i[l])c[u]||(c[u]={}),c[u][l]=i[l][u];function d(e){return"number"==typeof e.num||e.blobs&&1===e.blobs.length&&"number"==typeof e.blobs[0].num}function m(e){return"number"==typeof e.num||!(!e.blobs||"object"!=typeof e.blobs)&&(!!m(e.blobs[e.blobs.length-1])||void 0)}function p(e,t){var r=!1,i=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(t&&i.push("@quotes"),e.decorations)for(var n=0,o=e.decorations.length;n<o;n++)if(i.indexOf(e.decorations[n][0])>-1){r=!0;break}return r}function h(e){if(e.decorations)for(var t=0,r=e.decorations.length;t<r;t++)if("@quotes"===e.decorations[t][0]&&"false"!==e.decorations[t][1])return!0;return"object"==typeof e.blobs&&h(e.blobs[e.blobs.length-1])}function f(e,t){var r=t.strings.suffix.slice(-1);r||"string"!=typeof t.blobs||(r=t.blobs.slice(-1));var i=c[e][r];return!(!i||1!==i.length)||"object"==typeof t.blobs&&!!f(e,t.blobs[t.blobs.length-1])}function g(e,t){if(!s[t])return!1;if("string"==typeof e.blobs)return e.blobs.slice(-1)===t;var r=e.blobs[e.blobs.length-1];return!!r&&(r.strings.suffix.slice(-1)?r.strings.suffix.slice(-1)==t:g(r,t))}function v(e,t,r,n,o){var s="blobs"===t?e:e.strings,a="blobs"===n?r:r.strings,l=s[t].slice(-1),u=a[n].slice(0,1);function d(){a[n]=a[n].slice(1)}function m(){s[t]=s[t].slice(0,-1)}function p(e){a[n]=e+a[n]}function h(e){s[t]+=e}var f=o?function(){return i[l]}:function(){return c[u]},g=o?function(){var e=i[l][u];"string"==typeof e?(m(),d(),p(e)):(p(l),m())}:function(){var e=c[u][l];"string"==typeof e?(m(),d(),h(e)):(h(u),d())};l===u?(o?m:d)():f()&&g()}function b(e){var t=e.strings.suffix.slice(0,1);if("string"==typeof e.blobs)for(;n[t];)v(e,"blobs",e,"suffix"),t=e.strings.suffix.slice(0,1);else for(;n[t];)v(e.blobs[e.blobs.length-1],"suffix",e,"suffix"),t=e.strings.suffix.slice(0,1)}function y(e){if("string"==typeof e.blobs)for(var t=e.blobs.slice(-1);o[t];)v(e,"blobs",e,"suffix",!0),t=e.blobs.slice(-1);else for(t=e.blobs[e.blobs.length-1].strings.suffix.slice(-1);o[t];)v(e.blobs[e.blobs.length-1],"suffix",e,"suffix",!0),t=e.blobs[e.blobs.length-1].strings.suffix.slice(-1)}this.upward=function(e){if(e.blobs&&"string"==typeof e.blobs)s[e.strings.suffix.slice(0,1)]&&e.strings.suffix.slice(0,1)===e.blobs.slice(-1)&&(e.strings.suffix=e.strings.suffix.slice(1));else if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=p(e,!0),r=e.blobs.length-1;r>-1;r--){this.upward(e.blobs[r]);var i=e.strings,n=e.blobs[r].strings;if(0===r){" "===i.prefix.slice(-1)&&" "===n.prefix.slice(0,1)&&(n.prefix=n.prefix.slice(1));var o=n.prefix.slice(0,1);t||!a[o]||i.prefix||(i.prefix+=o,n.prefix=n.prefix.slice(1))}r===e.blobs.length-1&&(o=n.suffix.slice(-1),!t&&[" "].indexOf(o)>-1&&(i.suffix.slice(0,1)!==o&&(i.suffix=o+i.suffix),n.suffix=n.suffix.slice(0,-1))),i.delimiter&&r>0&&a[i.delimiter.slice(-1)]&&i.delimiter.slice(-1)===n.prefix.slice(0,1)&&(n.prefix=n.prefix.slice(1))}},this.leftward=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;t>-1;t--)if(this.leftward(e.blobs[t]),t<e.blobs.length-1&&!e.strings.delimiter){var r=e.blobs[t],i=r.strings.suffix.slice(-1),n=e.blobs[t+1],o=n.strings.prefix.slice(0,1),a="number"==typeof i||"number"==typeof o;if(!p(r)&&!p(n)&&!a&&s[o]&&!a){var l=o===r.strings.suffix.slice(-1),c=!r.strings.suffix&&"string"==typeof r.blobs&&r.blobs.slice(-1)===o;l||c?n.strings.prefix=n.strings.prefix.slice(1):v(r,"suffix",n,"prefix")}}},this.downward=function(t){if(t.blobs&&"string"==typeof t.blobs)s[t.strings.suffix.slice(0,1)]&&t.strings.suffix.slice(0,1)===t.blobs.slice(-1)&&(t.strings.suffix=t.strings.suffix.slice(1));else if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var r=t.strings,i=0,n=t.blobs.length;i<n&&!d(t.blobs[i]);i++);if(r.delimiter&&s[r.delimiter.slice(0,1)]){var o=r.delimiter.slice(0,1);for(i=t.blobs.length-2;i>-1;i--)(c=t.blobs[i].strings).suffix.slice(-1)!==o&&(c.suffix+=o);r.delimiter=r.delimiter.slice(1)}for(i=t.blobs.length-1;i>-1;i--){var l=t.blobs[i],c=t.blobs[i].strings,u=p(l,!0),b=d(l);if(i===t.blobs.length-1){var y=r.suffix.slice(0,1),_=!1;s[y]&&!(_=f(y,l))&&e&&(_=h(l)),_&&s[y]&&(m(l)||("string"==typeof l.blobs?v(l,"blobs",t,"suffix"):v(l,"suffix",t,"suffix"),"."===r.suffix.slice(0,1)&&(c.suffix+=r.suffix.slice(0,1),r.suffix=r.suffix.slice(1))))," "===c.suffix.slice(-1)&&" "===r.suffix.slice(0,1)&&(r.suffix=r.suffix.slice(1)),a[c.suffix.slice(0,1)]&&("string"==typeof l.blobs&&l.blobs.slice(-1)===c.suffix.slice(0,1)&&(c.suffix=c.suffix.slice(1)),c.suffix.slice(-1)===r.suffix.slice(0,1)&&(r.suffix=r.suffix.slice(0,-1))),g(t,t.strings.suffix.slice(0,1))&&(t.strings.suffix=t.strings.suffix.slice(1))}else if(r.delimiter)a[r.delimiter.slice(0,1)]&&r.delimiter.slice(0,1)===c.suffix.slice(-1)&&(t.blobs[i].strings.suffix=t.blobs[i].strings.suffix.slice(0,-1));else{var x=t.blobs[i+1].strings;d(l)||u||!a[c.suffix.slice(-1)]||c.suffix.slice(-1)!==x.prefix.slice(0,1)||(x.prefix=x.prefix.slice(1))}b||u||!s[c.suffix.slice(0,1)]||"string"!=typeof l.blobs||v(l,"blobs",l,"suffix"),this.downward(t.blobs[i])}}},this.fix=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var r,i=0,n=t.blobs.length;i<n;i++){for(var o=t.blobs[i],s=!1,a=0,l=o.decorations.length;a<l;a++){var c=o.decorations[a];"@quotes"===c[0]&&"false"!==c[1]&&(s=!0)}s&&(e?b(o):y(o)),r=this.fix(t.blobs[i]),o.blobs&&"string"==typeof o.blobs&&(r=o.blobs.slice(-1))}return r}}},d.Engine.Opt=function(){this.parallel={enable:!1},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=d.NONE,this.bib_mode=d.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.disable_duplicate_year_suppression=[],this.use_context_condition=!1,this.jurisdiction_fallbacks={},this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.consolidate_legal_items=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1,this.development_extensions.force_title_abbrev_fallback=!1,this.development_extensions.split_container_title=!1,this.development_extensions.legacy_institution_name_ordering=!1,this.development_extensions.etal_min_etal_usefirst_hack=!1},d.Engine.Tmp=function(){this.names_max=new d.Stack,this.names_base=new d.Stack,this.givens_base=new d.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new d.Stack(0,d.LITERAL),this.element_rendered_ok=!1,this.element_trace=new d.Stack("style"),this.nameset_counter=0,this.group_context=new d.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_first:void 0,parallel_last:void 0,parallel_delimiter_override:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new d.Stack(0,d.LITERAL),this.decorations=new d.Stack,this.tokenstore_stack=new d.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new d.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new d.AmbigConfig,this.bib_sort_keys=[],this.prefix=new d.Stack("",d.LITERAL),this.suffix=new d.Stack("",d.LITERAL),this.delimiter=new d.Stack("",d.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]},d.Engine.Fun=function(e){this.match=new d.Util.Match,this.suffixator=new d.Util.Suffixator(d.SUFFIX_CHARS),this.romanizer=new d.Util.Romanizer,this.ordinalizer=new d.Util.Ordinalizer(e),this.long_ordinalizer=new d.Util.LongOrdinalizer},d.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new d.Stack(0,d.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0},d.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]},d.Engine.Citation=function(e){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new d.Registry.Comparifier(e,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},d.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},d.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=d.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"},d.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},d.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"},d.Engine.prototype.previewCitationCluster=function(e,t,r,i){var n=this.opt.mode;this.setOutputFormat(i),e.citationID&&delete e.citationID;var o=this.processCitationCluster(e,t,r,d.PREVIEW);return this.setOutputFormat(n),o[1]},d.Engine.prototype.appendCitationCluster=function(e){for(var t=[],r=this.registry.citationreg.citationByIndex.length,i=0;i<r;i+=1){var n=this.registry.citationreg.citationByIndex[i];t.push([""+n.citationID,n.properties.noteIndex])}return this.processCitationCluster(e,t,[])[1]},d.Engine.prototype.processCitationCluster=function(e,t,r,i){var n,o,s,a,l,c,u,m,p,h,f,g,v,b,y,_,x;if(this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(e),i===d.PREVIEW){this.debug&&d.debug("****** start state save *********"),y=this.registry.citationreg.citationByIndex.slice(),_=this.registry.reflist.slice();for(var w=t.concat(r),C={},k=[],T=0,E=w.length;T<E;T+=1)for(a=0,l=(n=this.registry.citationreg.citationById[w[T][0]]).citationItems.length;a<l;a+=1)C[n.citationItems[a].id]=!0,k.push(""+n.citationItems[a].id);for(a=0,l=e.citationItems.length;a<l;a+=1)C[e.citationItems[a].id]=!0,k.push(""+e.citationItems[a].id);for(x={},T=0,E=_.length;T<E;T+=1)if(!C[_[T].id]){var S=this.registry.registry[_[T].id].ambig,I=this.registry.ambigcites[S];if(I)for(a=0,l=I.length;a<l;a+=1)x[I[a]]=d.cloneAmbigConfig(this.registry.registry[I[a]].disambig)}this.debug&&d.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};var A=[],O={};for(T=0,E=e.citationItems.length;T<E;T+=1){for(var N in f={},e.citationItems[T])f[N]=e.citationItems[T][N];var R;if((h=this.retrieveItem(""+f.id)).id&&this.transform.loadAbbreviation("default","hereinafter",h.id,h.language),f=d.parseLocator.call(this,f),this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable([[h,f]]),this.opt.development_extensions.locator_label_parse&&f.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(h.type)&&(!f.label||"page"===f.label)&&(R=d.LOCATOR_LABELS_REGEXP.exec(f.locator))){var P=d.LOCATOR_LABELS_MAP[R[2]];this.getTerm(P)&&(f.label=P,f.locator=R[3])}var D=[h,f];A.push(D),e.citationItems[T].item=h}e.sortedItems=A;var B,M=[],L={};for(T=0,E=t.length;T<E;T+=1)o=t[T],this.opt.development_extensions.strict_inputs&&(L[o[0]]&&d.error("Previously referenced citationID "+o[0]+" encountered in citationsPre"),o[1]&&(B>o[1]&&d.debug("Note index sequence is not sane at citationsPre["+T+"]"),B=o[1])),this.registry.citationreg.citationById[o[0]].properties.noteIndex=o[1],M.push(this.registry.citationreg.citationById[o[0]]),L[o[0]]=this.registry.citationreg.citationById[o[0]];for(e.properties||(e.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(L[e.citationID]&&d.error("Citation with previously referenced citationID "+e.citationID),e.properties.noteIndex&&(B>e.properties.noteIndex&&d.debug("Note index sequence is not sane for citation "+e.citationID),B=e.properties.noteIndex)),M.push(e),L[e.citationID]=e,T=0,E=r.length;T<E;T+=1)s=r[T],this.opt.development_extensions.strict_inputs&&(L[s[0]]&&d.error("Previously referenced citationID "+s[0]+" encountered in citationsPost"),s[1]&&(B>s[1]&&d.debug("Note index sequence is not sane at postCitation["+T+"]"),B=s[1])),this.registry.citationreg.citationById[s[0]].properties.noteIndex=s[1],M.push(this.registry.citationreg.citationById[s[0]]),L[s[0]]=this.registry.citationreg.citationById[s[0]];this.registry.citationreg.citationByIndex=M,this.registry.citationreg.citationById=L,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===d.POSITION&&(v=[],g=[],b={});var z,F=[];for(T=0,E=M.length;T<E;T+=1){for(M[T].properties.index=T,a=0,l=M[T].sortedItems.length;a<l;a+=1)f=M[T].sortedItems[a],this.registry.citationreg.citationsByItemId[f[1].id]||(this.registry.citationreg.citationsByItemId[f[1].id]=[],F.push(""+f[1].id)),-1===this.registry.citationreg.citationsByItemId[f[1].id].indexOf(M[T])&&this.registry.citationreg.citationsByItemId[f[1].id].push(M[T]);this.opt.update_mode===d.POSITION&&(M[T].properties.noteIndex?g.push(M[T]):(M[T].properties.noteIndex=0,v.push(M[T])))}if(i!==d.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&d.debug("****** start update items *********"),this.updateItems(F,null,null,!0),this.debug&&d.debug("****** endo update items *********")),!this.opt.citation_number_sort&&A&&A.length>1&&this.citation_sort.tokens.length>0){for(T=0,E=A.length;T<E;T+=1)A[T][1].sortkeys=d.getSortKeys.call(this,A[T][0],"citation_sort");if(this.opt.grouped_sort&&!e.properties.unsorted){for(T=0,E=A.length;T<E;T+=1){var j=A[T][1].sortkeys;this.tmp.authorstring_request=!0;var H=this.registry.registry[A[T][0].id].disambig;this.tmp.authorstring_request=!0,d.getAmbiguousCite.call(this,A[T][0],H);var q=this.registry.authorstrings[A[T][0].id];this.tmp.authorstring_request=!1,A[T][1].sortkeys=[q].concat(j)}A.sort(this.citation.srt.compareCompositeKeys);var U=!1,G=!1,W=!1;for(T=0,E=A.length;T<E;T+=1)A[T][1].sortkeys[0]!==U&&(W=A[T][1].sortkeys[0],G=A[T][1].sortkeys[1]),A[T][1].sortkeys[0]=""+G+T,U=W}e.properties.unsorted||A.sort(this.citation.srt.compareCompositeKeys)}if(this.opt.parallel.enable&&this.parallel.StartCitation(e.sortedItems),this.opt.update_mode===d.POSITION)for(T=0;T<2;T+=1){var V={},K={},$={};for(a=0,l=(z=[v,g][T]).length;a<l;a+=1){var Y=z[a];for(z[a].properties.noteIndex||(z[a].properties.noteIndex=0),z[a].properties.noteIndex=parseInt(z[a].properties.noteIndex,10),a>0&&Y.properties.noteIndex&&z[a-1].properties.noteIndex>Y.properties.noteIndex&&(b={},V={},K={},$={}),c=0,u=Y.sortedItems.length;c<u;c+=1)Y.sortedItems[c][1].parallel&&"first"!==Y.sortedItems[c][1].parallel||(b[Y.properties.noteIndex]?b[Y.properties.noteIndex]+=1:b[Y.properties.noteIndex]=1);for(c=0,u=z[a].sortedItems.length;c<u;c+=1){var J,X,Z=(f=z[a].sortedItems[c])[0].id,Q=f[0].legislation_id?f[0].legislation_id:f[0].id,ee=f[0].legislation_id?f[0].legislation_id:f[0].container_id?f[0].container_id:f[0].id,te=f[1]["locator-extra"],re=f[1].locator,ie=f[1].label;if(c>0)if(Y.sortedItems[c-1][0].legislation_id)J=Y.sortedItems[c-1][0].legislation_id;else{J=Y.sortedItems[c-1][1].id,X=Y.sortedItems[c-1][1]["locator-extra"];for(var ne=c-2;ne>-1;ne--)"first"===Y.sortedItems[ne][1].parallel&&(J=Y.sortedItems[ne][1].id,X=Y.sortedItems[ne][1]["locator-extra"])}if(i!==d.PREVIEW||Y.citationID==e.citationID){var oe,se,ae={};if(ae.position=f[1].position,ae["first-reference-note-number"]=f[1]["first-reference-note-number"],ae["first-container-reference-note-number"]=f[1]["first-container-reference-note-number"],ae["near-note"]=f[1]["near-note"],f[1]["first-reference-note-number"]=0,f[1]["first-container-reference-note-number"]=0,f[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[Z]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var le=this.registry.registry[f[0].id]["citation-count"],ce=this.registry.citationreg.citationsByItemId[Z].length;if(this.registry.registry[f[0].id]["citation-count"]=this.registry.citationreg.citationsByItemId[Z].length,"number"==typeof le){if(le<2!=ce<2){ne=0;for(var ue=this.registry.citationreg.citationsByItemId[Z].length;ne<ue;ne++)O[this.registry.registry[f[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[Z][ne].citationID]=!0}}else for(ne=0,ue=this.registry.citationreg.citationsByItemId[Z].length;ne<ue;ne++)O[this.registry.registry[f[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[Z][ne].citationID]=!0}if(void 0===K[ee]&&"author-only"!==Y.properties.mode)V[Q]=Y.properties.noteIndex,K[ee]=Y.properties.noteIndex,$[ee]=Y.properties.noteIndex,f[1].position=d.POSITION_FIRST;else{var de=!1,me=!1,pe=null;a>0&&(pe=z[a-1]);var he,fe,ge,ve,be=z[a];if(a>0){var ye=1;"author-only"===pe.properties.mode&&a>1&&(ye=2);var _e=a-ye;z[_e].sortedItems.length&&(oe=z[_e].sortedItems.slice(-1)[0][1].id,se=z[a-ye].sortedItems.slice(-1)[0][1]["locator-extra"]),pe.sortedItems.length&&pe.sortedItems[0].slice(-1)[0].legislation_id&&(oe=pe.sortedItems[0].slice(-1)[0].legislation_id)}if(a>0&&0===c&&pe.properties.noteIndex!==be.properties.noteIndex){var xe=!1,we=pe.sortedItems[0][0].id;if(pe.sortedItems[0][0].legislation_id&&(we=pe.sortedItems[0][0].legislation_id),we==Q&&pe.properties.noteIndex>=be.properties.noteIndex-1){var Ce=pe.sortedItems[0][1]["locator-extra"],ke=be.sortedItems[0][1]["locator-extra"];1!==b[pe.properties.noteIndex]&&0!==pe.properties.noteIndex||Ce!==ke||(xe=!0)}xe?de=!0:me=!0}else c>0&&J==Q&&X==te||0===c&&a>0&&pe.properties.noteIndex==be.properties.noteIndex&&pe.sortedItems.length&&oe==Q&&se==te?de=!0:me=!0;de&&((he=c>0?Y.sortedItems[c-1][1]:z[a-1].sortedItems[0][1]).locator?(ge=he.label?he.label:"",fe=""+he.locator+ge):fe=he.locator,ve=re?""+re+(ie||""):re),de&&fe&&!ve&&(de=!1,me=!0),de&&(!fe&&ve?f[1].position=d.POSITION_IBID_WITH_LOCATOR:fe||ve?fe&&ve===fe?f[1].position=d.POSITION_IBID:fe&&ve&&ve!==fe?f[1].position=d.POSITION_IBID_WITH_LOCATOR:(de=!1,me=!0):f[1].position=d.POSITION_IBID),me&&(f[1].position=d.POSITION_CONTAINER_SUBSEQUENT,void 0===V[Q]?V[Q]=Y.properties.noteIndex:f[1].position=d.POSITION_SUBSEQUENT),(me||de)&&("author-only"===Y.properties.mode&&(f[1].position=d.POSITION_FIRST),$[ee]!=Y.properties.noteIndex&&(f[1]["first-container-reference-note-number"]=$[ee],this.registry.registry[f[0].id]&&(this.registry.registry[f[0].id]["first-container-reference-note-number"]=$[ee])),V[Q]!=Y.properties.noteIndex&&(f[1]["first-reference-note-number"]=V[Q],this.registry.registry[f[0].id]&&(this.registry.registry[f[0].id]["first-reference-note-number"]=V[Q])))}if(Y.properties.noteIndex){var Te=parseInt(Y.properties.noteIndex,10)-parseInt(K[ee],10);f[1].position!==d.POSITION_FIRST&&Te<=this.citation.opt["near-note-distance"]&&(f[1]["near-note"]=!0),K[ee]=Y.properties.noteIndex}else f[1].position!==d.POSITION_FIRST&&(f[1]["near-note"]=!0);if(Y.citationID!=e.citationID)for(m=0,p=d.POSITION_TEST_VARS.length;m<p;m+=1){var Ee=d.POSITION_TEST_VARS[m];f[1][Ee]!==ae[Ee]&&(this.registry.registry[f[0].id]&&"first-reference-note-number"===Ee&&(O[this.registry.registry[f[0].id].ambig]=!0,this.tmp.taintedItemIDs[f[0].id]=!0),this.tmp.taintedCitationIDs[Y.citationID]=!0)}this.sys.variableWrapper&&(f[1].index=Y.properties.index,f[1].noteIndex=Y.properties.noteIndex)}else void 0===V[f[1].id]?(V[Q]=Y.properties.noteIndex,K[ee]=Y.properties.noteIndex):K[ee]=Y.properties.noteIndex}}}if(this.opt.citation_number_sort&&A&&A.length>1&&this.citation_sort.tokens.length>0&&!e.properties.unsorted){for(T=0,E=A.length;T<E;T+=1)A[T][1].sortkeys=d.getSortKeys.call(this,A[T][0],"citation_sort");A.sort(this.citation.srt.compareCompositeKeys)}for(var N in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(N)&&(z=this.registry.citationreg.citationsByItemId[N]))for(T=0,E=z.length;T<E;T+=1)this.tmp.taintedCitationIDs[z[T].citationID]=!0;var Se=[];if(i===d.PREVIEW){this.debug&&d.debug("****** start run processor *********");try{Se=this.process_CitationCluster.call(this,e.sortedItems,e)}catch(e){d.error("Error running CSL processor for preview: "+e)}for(this.debug&&(d.debug("****** end run processor *********"),d.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=y,this.registry.citationreg.citationById={},T=0,E=y.length;T<E;T+=1)this.registry.citationreg.citationById[y[T].citationID]=y[T];this.debug&&d.debug("****** start final update *********");var Ie=[];for(T=0,E=_.length;T<E;T+=1)Ie.push(""+_[T].id);for(var N in this.updateItems(Ie,null,null,!0),this.debug&&d.debug("****** end final update *********"),x)x.hasOwnProperty(N)&&(this.registry.registry[N].disambig=x[N]);this.debug&&d.debug("****** end state restore *********")}else{for(var Ae in O)this.disambiguate.run(Ae,e);var Oe;for(var N in this.tmp.taintedCitationIDs)if(N!=e.citationID){var Ne=this.registry.citationreg.citationById[N];if(!Ne.properties.unsorted){for(T=0,E=Ne.sortedItems.length;T<E;T+=1)Ne.sortedItems[T][1].sortkeys=d.getSortKeys.call(this,Ne.sortedItems[T][0],"citation_sort");Ne.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=Ne.properties.index,this.tmp.citation_note_index=Ne.properties.noteIndex,this.tmp.citation_id=""+Ne.citationID,(Oe=[]).push(Ne.properties.index),Oe.push(this.process_CitationCluster.call(this,Ne.sortedItems,Ne)),Oe.push(Ne.citationID),Se.push(Oe)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=e.properties.index,this.tmp.citation_note_index=e.properties.noteIndex,this.tmp.citation_id=""+e.citationID,(Oe=[]).push(t.length),Oe.push(this.process_CitationCluster.call(this,A,e)),Oe.push(e.citationID),Se.push(Oe),Se.sort(function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,Se]},d.Engine.prototype.process_CitationCluster=function(e,t){var r="";if(t&&t.properties&&"composite"===t.properties.mode){t.properties.mode="author-only";var i=d.getCitationCluster.call(this,e,t);t.properties.mode="suppress-author";var n="";t.properties.infix&&(this.output.append(t.properties.infix),"object"==typeof(n=this.output.string(this,this.output.queue))&&(n=n.join("")));var o=d.getCitationCluster.call(this,e,t);t.properties.mode="composite",i&&n&&d.SWAPPING_PUNCTUATION.concat(["’","'"]).indexOf(n[0])>-1&&(i+=n,n=!1),r=[i,n,o].filter(function(e){return e}).join(" ")}else r=d.getCitationCluster.call(this,e,t);return r},d.Engine.prototype.makeCitationCluster=function(e){var t,r,i,n,o,s;for(t=[],n=e.length,i=0;i<n;i+=1){for(var a in o={},e[i])o[a]=e[i][a];if(s=this.retrieveItem(""+o.id),this.opt.development_extensions.locator_label_parse&&o.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(s.type)&&(!o.label||"page"===o.label)){var l=d.LOCATOR_LABELS_REGEXP.exec(o.locator);if(l){var c=d.LOCATOR_LABELS_MAP[l[2]];this.getTerm(c)&&(o.label=c,o.locator=l[3])}}o.locator&&(o.locator=(""+o.locator).replace(/\s+$/,"")),r=[s,o],t.push(r)}if(this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable(t),t&&t.length>1&&this.citation_sort.tokens.length>0){for(n=t.length,i=0;i<n;i+=1)t[i][1].sortkeys=d.getSortKeys.call(this,t[i][0],"citation_sort");t.sort(this.citation.srt.compareCompositeKeys)}return this.tmp.citation_errors=[],d.getCitationCluster.call(this,t)},d.getAmbiguousCite=function(e,t,r,i){var n=this.tmp.group_context.tip,o={term_intended:n.term_intended,variable_attempt:n.variable_attempt,variable_success:n.variable_success,output_tip:n.output_tip,label_form:n.label_form,non_parallel:n.non_parallel,parallel_last:n.parallel_last,parallel_first:n.parallel_first,parallel_last_override:n.parallel_last_override,parallel_delimiter_override:n.parallel_delimiter_override,parallel_delimiter_override_on_suppress:n.parallel_delimiter_override_on_suppress,condition:n.condition,force_suppress:n.force_suppress,done_vars:n.done_vars.slice()};this.tmp.disambig_request=t||!1;var s={position:d.POSITION_SUBSEQUENT,"near-note":!0};i&&(s.locator=i.locator,s.label=i.label),this.registry.registry[e.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[e.id]&&this.registry.citationreg.citationsByItemId[e.id].length&&r&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(s["first-reference-note-number"]=this.registry.registry[e.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation";var a=this.tmp.suppress_decorations;this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,d.getCite.call(this,e,s,null,!1);for(var l=0,c=this.output.queue.length;l<c;l+=1)d.Output.Queue.purgeEmptyBlobs(this.output.queue[l]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var u=0,m=this.output.queue.length;u<m;u+=1)this.output.adjust.upward(this.output.queue[u]),this.output.adjust.leftward(this.output.queue[u]),this.output.adjust.downward(this.output.queue[u]),this.output.adjust.fix(this.output.queue[u]);var p=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=a,this.tmp.group_context.replace(o),p},d.getSpliceDelimiter=function(e,t,r){if(void 0!==this.citation.opt["after-collapse-delimiter"])e||t&&!this.tmp.have_collapsed?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:t||this.tmp.have_collapsed||"year-suffix"===this.citation.opt.collapse?this.tmp.splice_delimiter=this.citation.opt.layout_delimiter:this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"];else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==d.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[r-1]){var i=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[r-1]];i&&i.delimiter&&(this.tmp.splice_delimiter=i.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter},d.getCitationCluster=function(e,t){var r,i,n,o,s,a,l,c,u,m,p,h,f,g,v,b,y,_,x,w,C,k="";this.output.checkNestedBrace=new d.checkNestedBrace(this),t&&(x=t.citationID,w="author-only"===t.properties.mode&&!!t.properties.mode,"note"!==this.opt.xclass&&(C="suppress-author"===t.properties.mode&&!!t.properties.mode),t.properties.prefix&&(k=d.checkPrefixSpaceAppend(this,t.properties.prefix))),e=e||[],this.tmp.last_primary_names_string=!1,y=d.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",r="",i=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.tmp.just_looking||(this.tmp.abbrev_trimmer={QUASHES:{}});var T=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+k),E=!1;if(this.citation.opt.suppressTrailingPunctuation&&(E=!0),x&&this.registry.citationreg.citationById[x].properties["suppress-trailing-punctuation"]&&(E=!0),"note"===this.opt.xclass){for(var S=[],I=!1,A=!1,O=[],N=0,R=e.length;N<R;N+=1){var P=e[N][0].type,D=e[N][0].title,B=e[N][1].position,M=e[N][0].id;D&&"legal_case"===P&&M!==A&&B&&(D===I&&0!==S.length||(O=[],S.push(O)),O.push(e[N][1])),I=D,A=M}for(N=0,R=S.length;N<R;N+=1)if(!((O=S[N]).length<2)){var L=O.slice(-1)[0].locator;if(L)for(var z=0,F=O.length-1;z<F;z+=1)O[z].locator&&(L=!1);L&&(O[0].locator=L,delete O.slice(-1)[0].locator,O[0].label=O.slice(-1)[0].label,O.slice(-1)[0].label&&delete O.slice(-1)[0].label)}}for(n=[],o=e.length,e[0]&&e[0][1]&&(w?(delete e[0][1]["suppress-author"],e[0][1]["author-only"]=!0):C&&(delete e[0][1]["author-only"],e[0][1]["suppress-author"]=!0)),this.opt.parallel.enable&&this.parallel.StartCitation(e),s=0;s<o;s+=1){this.tmp.cite_index=s,h=e[s][0],a=e[s][1],a=d.parseLocator.call(this,a),l=this.tmp.have_collapsed;var j=!1;if(s>0&&e[s-1][1]&&(j=!!e[s-1][1].locator),c={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var H=this.output;this.output=new d.Output.Queue(this),this.output.adjust=new d.Output.Queue.adjust,d.getAmbiguousCite.call(this,h,null,!1,a),this.output=H}if(this.tmp.in_cite_predecessor=!1,s>0?d.getCite.call(this,h,a,""+e[s-1][0].id,!0):(this.tmp.term_predecessor=!1,d.getCite.call(this,h,a,null,!0)),this.tmp.cite_renders_content||(_={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+h.id,citationItems_pos:s,error_code:d.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(_)),c.splice_delimiter=d.getSpliceDelimiter.call(this,j,l,s),a&&a["author-only"]&&(this.tmp.suppress_decorations=!0),s>0){var q=(b=e[s-1][1]).suffix&&[";",".",","].indexOf(b.suffix.slice(-1))>-1,U=!b.suffix&&a.prefix&&[";",".",","].indexOf(a.prefix.slice(0,1))>-1;if(q||U){var G=c.splice_delimiter.indexOf(" ");c.splice_delimiter=G>-1&&!U?c.splice_delimiter.slice(G):""}}if(c.suppress_decorations=this.tmp.suppress_decorations,c.have_collapsed=this.tmp.have_collapsed,n.push(c),a["author-only"])break}p=this.output.queue.slice();var W="";t&&(W=d.checkSuffixSpacePrepend(this,t.properties.suffix));var V=this.citation.opt.layout_suffix,K=this.tmp.cite_locales[this.tmp.cite_locales.length-1];for(K&&this.tmp.cite_affixes[this.tmp.area][K]&&this.tmp.cite_affixes[this.tmp.area][K].suffix&&(V=this.tmp.cite_affixes[this.tmp.area][K].suffix),d.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(V.slice(0,1))>-1&&(V=V.slice(0,1)),V=this.output.checkNestedBrace.update(W+V),N=0,R=this.output.queue.length;N<R;N+=1)d.Output.Queue.purgeEmptyBlobs(this.output.queue[N]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(E||(this.output.queue[this.output.queue.length-1].strings.suffix=V),this.output.queue[0].strings.prefix=T)),this.opt.development_extensions.clean_up_csl_flaws)for(z=0,F=this.output.queue.length;z<F;z+=1)this.output.adjust.upward(this.output.queue[z]),this.output.adjust.leftward(this.output.queue[z]),this.output.adjust.downward(this.output.queue[z]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[z]);for(s=0,o=p.length;s<o;s+=1){var $=[];if(this.output.queue=[p[s]],this.tmp.suppress_decorations=n[s].suppress_decorations,this.tmp.splice_delimiter=n[s].splice_delimiter,p[s].parallel_delimiter&&(this.tmp.splice_delimiter=p[s].parallel_delimiter),this.tmp.have_collapsed=n[s].have_collapsed,u=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof u)return this.tmp.suppress_decorations=!1,u||(this.opt.development_extensions.throw_on_empty?d.error("Citation would render no content"):u="[NO_PRINTED_FORM]"),u;if("object"==typeof u&&0===u.length&&!a["suppress-author"])if(0===s){var Y=0===s?y(this.citation.opt.layout_prefix):"",J=s===p.length-1?y(this.citation.opt.layout_suffix):"";u.push(Y+"[CSL STYLE ERROR: reference with no printed form.]"+J)}else if(s===p.length-1){var X=i[i.length-1];"string"==typeof X?i[i.length-1]+=y(this.citation.opt.layout_suffix):"object"==typeof X&&(X.strings.suffix+=y(this.citation.opt.layout_suffix))}if($.length&&"string"==typeof u[0]){u.reverse();var Z=u.pop();Z&&","===Z.slice(0,1)?$.push(Z):"string"==typeof $.slice(-1)[0]&&","===$.slice(-1)[0].slice(-1)?$.push(" "+Z):Z&&$.push(y(this.tmp.splice_delimiter)+Z)}else u.reverse(),void 0!==(m=u.pop())&&($.length&&"string"==typeof $[$.length-1]&&($[$.length-1]+=m.successor_prefix),$.push(m));for(f=u.length,g=0;g<f;g+=1)"string"!=typeof(v=u[g])?void 0!==(m=u.pop())&&$.push(m):$.push(y(this.tmp.splice_delimiter)+v);0!==$.length||e[s][1]["suppress-author"],$.length>1&&"string"!=typeof $[0]&&($=[this.output.renderBlobs($)]),$.length&&("string"==typeof $[0]?s>0&&($[0]=y(this.tmp.splice_delimiter)+$[0]):$[0].splice_prefix=s>0?this.tmp.splice_delimiter:""),i=i.concat($)}if((r+=this.output.renderBlobs(i))&&!this.tmp.suppress_decorations)for(o=this.citation.opt.layout_decorations.length,s=0;s<o;s+=1)"normal"!==(c=this.citation.opt.layout_decorations[s])[1]&&(a&&a["author-only"]||(r=this.fun.decorate[c[0]][c[1]](this,r)));return this.tmp.suppress_decorations=!1,r||(this.opt.development_extensions.throw_on_empty?d.error("Citation would render no content"):r="[NO_PRINTED_FORM]"),r},d.getCite=function(e,t,r,i){var n,o,s=this.tmp.area;for(t&&t["author-only"]&&this.intext&&this.intext.tokens.length>0&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,this.tmp.prevItemID=r,d.citeStart.call(this,e,t,i),n=0,this.tmp.name_node={},this.nameOutput=new d.NameOutput(this,e,t);n<this[this.tmp.area].tokens.length;)n=d.tokenExec.call(this,this[this.tmp.area].tokens[n],e,t);return d.citeEnd.call(this,e,t),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"===this.tmp.area&&(o={index:this.tmp.bibliography_pos,itemID:""+e.id,error_code:d.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(o)),this.tmp.area=s,""+e.id},d.citeStart=function(e,t,r){if(this.tmp.lang_array=[],e.language){var i=e.language.match(/^([a-zA-Z]+).*/);i&&this.tmp.lang_array.push(i[1].toLowerCase())}if(this.tmp.lang_array.push(this.opt.lang),r||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[e.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[e.id].disambig,this.tmp.disambig_settings=this.registry.registry[e.id].disambig):this.tmp.disambig_settings=new d.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[e.id]){if(this.tmp.disambig_restore=d.cloneAmbigConfig(this.registry.registry[e.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[e.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[e.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[e.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[e.id].disambig.givens.slice();for(var n=0,o=this.tmp.disambig_settings.givens.length;n<o;n+=1)this.tmp.disambig_settings.givens[n]=this.registry.registry[e.id].disambig.givens[n].slice();for(n=0,o=this.tmp.disambig_request.givens.length;n<o;n+=1)this.tmp.disambig_request.givens[n]=this.registry.registry[e.id].disambig.givens[n].slice()}}else this.tmp.disambig_restore=new d.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.just_looking||t&&"first"!==t.parallel&&t.parallel||(this.tmp.abbrev_trimmer={QUASHES:{}}),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&t&&!t.position&&this.registry.registry[e.id]&&(this.tmp.disambig_restore=d.cloneAmbigConfig(this.registry.registry[e.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},d.citeEnd=function(e,t){if(this.tmp.disambig_restore&&this.registry.registry[e.id]){this.registry.registry[e.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[e.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var r=0,i=this.registry.registry[e.id].disambig.givens.length;r<i;r+=1)this.registry.registry[e.id].disambig.givens[r]=this.tmp.disambig_restore.givens[r].slice()}if(this.tmp.disambig_restore=!1,t&&t.suffix?this.tmp.last_suffix_used=t.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){var n=[];for(r=this.tmp.issued_date.list.length-1;r>this.tmp.issued_date.pos;r+=-1)n.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),r=n.length-1;r>-1;r+=-1)this.tmp.issued_date.list.push(n.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},d.Engine.prototype.makeBibliography=function(e){var t,r,i,n,o,s,a;if(!e&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(e={exclude:[]},this.bibliography.opt.exclude_types)for(var l in this.bibliography.opt.exclude_types){var c=this.bibliography.opt.exclude_types[l];e.exclude.push({field:"type",value:c})}if(this.bibliography.opt.exclude_with_fields)for(var l in this.bibliography.opt.exclude_with_fields){var u=this.bibliography.opt.exclude_with_fields[l];e.exclude.push({field:u,value:!0})}}if(!this.bibliography.tokens.length)return!1;"string"==typeof e&&(this.opt.citation_number_slug=e,e=!1),s=(t=d.getBibliographyEntries.call(this,e))[0],a=t[1];var m=t[2];for(r={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:s,bibliography_errors:this.tmp.bibliography_errors.slice(),done:m},this.bibliography.opt["second-field-align"]&&(r["second-field-align"]=this.bibliography.opt["second-field-align"]),n=this.registry.reflist.length,o=0;o<n;o+=1)(i=this.registry.reflist[o]).offset>r.maxoffset&&(r.maxoffset=i.offset);return this.bibliography.opt.hangingindent&&(r.hangingindent=this.bibliography.opt.hangingindent),r.bibstart=this.fun.decorate.bibstart,r.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[r,a]},d.getBibliographyEntries=function(e){var t,r,i,n,o,s,a,l,c,u,m,p,h,f,g,v,b,y,_,x;function w(e,t){return e===t}function C(e,t){return"boolean"!=typeof e&&e?"string"==typeof t?w(e,t):!!t&&function(e,t){for(u=t.length,m=0;m<u;m+=1)if(w(e,t[m]))return!0;return!1}(e,t):e?!!t:!t}if(t=[],_=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,r=e&&e.page_start&&e.page_length?this.registry.getSortedIds():this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,b={},e&&e.page_start&&e.page_length&&(x=0,!0!==e.page_start))for(f=0,g=r.length;f<g&&(b[r[f]]=!0,e.page_start!=r[f]);f+=1);var k=[],T={};for(this.tmp.container_item_count={},r=r.filter(e=>{var t=e;return e.legislation_id?T[e.legislation_id]?t=!1:T[e.legislation_id]=!0:e.container_id&&(this.tmp.container_item_count[e.container_id]||(this.tmp.container_item_count[e.container_id]=0),this.tmp.container_item_count[e.container_id]++,this.bibliography.opt.consolidate_containers.indexOf(e.type)>-1&&(T[e.container_id]?t=!1:T[e.container_id]=!0)),t}),this.tmp.container_item_pos={},f=0,g=r.length;f<g;f+=1){if(e&&e.page_start&&e.page_length){if(b[r[f]])continue;if(l=this.refetchItem(r[f]),x===e.page_length)break}else if(b[(l=r[f]).id])continue;if(e){if(i=!0,e.include){for(i=!1,E=0,S=e.include.length;E<S;E+=1)if(C((c=e.include[E]).value,l[c.field])){i=!0;break}}else if(e.exclude){for(n=!1,E=0,S=e.exclude.length;E<S;E+=1)if(C((c=e.exclude[E]).value,l[c.field])){n=!0;break}n&&(i=!1)}else if(e.select){for(i=!1,o=!0,E=0,S=e.select.length;E<S;E+=1)C((c=e.select[E]).value,l[c.field])||(o=!1);o&&(i=!0)}if(e.quash){for(o=!0,E=0,S=e.quash.length;E<S;E+=1)C((c=e.quash[E]).value,l[c.field])||(o=!1);o&&(i=!1)}if(!i)continue}if(l.container_id&&(this.tmp.container_item_pos[l.container_id]||(this.tmp.container_item_pos[l.container_id]=0),this.tmp.container_item_pos[l.container_id]++),(s=new d.Token("group",d.START)).decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",s),l.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=l.system_id:this.output.current.value().system_id=l.id,h=[],!this.registry.registry[l.id].master||e&&e.page_start&&e.page_length)this.registry.registry[l.id].siblings||(this.tmp.term_predecessor=!1,this.tmp.cite_index=0,h.push(""+d.getCite.call(this,l)),e&&e.page_start&&e.page_length&&(x+=1));else{y=[[l,{id:l.id}]];for(var E=0,S=(v=this.registry.registry[l.id].siblings).length;E<S;E++)y.push([this.refetchItem(v[E]),{id:v[E]}]);for(this.parallel.StartCitation(y),this.registry.registry[l.id].parallel_delimiter_override?this.output.queue[0].strings.delimiter=this.registry.registry[l.id].parallel_delimiter_override:this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,this.tmp.cite_index=0,E=0,S=y.length;E<S;E+=1)E<y.length-1?this.tmp.parallel_and_not_last=!0:delete this.tmp.parallel_and_not_last,h.push(""+d.getCite.call(this,y[E][0],y[E][1])),this.tmp.cite_index++,b[y[E][0].id]=!0}for(_.push(""),this.tmp.bibliography_pos+=1,k.push(h),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&((p=this.output.queue[0].blobs[0].blobs[0].strings?this.output.queue[0].blobs[0].blobs:this.output.queue[0].blobs)[0].strings.prefix=this.bibliography.opt.layout_prefix+p[0].strings.prefix),E=0,S=this.output.queue.length;E<S;E+=1)d.Output.Queue.purgeEmptyBlobs(this.output.queue[E]);for(E=0,S=this.output.queue.length;E<S;E+=1)this.output.adjust.upward(this.output.queue[E]),this.output.adjust.leftward(this.output.queue[E]),this.output.adjust.downward(this.output.queue[E],!0),this.output.adjust.fix(this.output.queue[E]);if(!(a=this.output.string(this,this.output.queue)[0])&&this.opt.update_mode===d.NUMERIC){var I=t.length+1+". [CSL STYLE ERROR: reference with no printed form.]";a=d.Output.Formats[this.opt.mode]["@bibliography/entry"](this,I)}a&&t.push(a)}var A=!1;if(e&&e.page_start&&e.page_length){var O=r.slice(-1)[0],N=k.slice(-1)[0];O&&N&&O!=N||(A=!0)}return this.tmp.disambig_override=!1,[k,t,A]},d.Engine.prototype.setCitationId=function(e,t){var r,i,n;if(r=!1,!e.citationID||t){for(i=Math.floor(1e14*Math.random());;){if(n=0,!this.registry.citationreg.citationById[i]){e.citationID="a"+i.toString(32);break}i+=1==(n=!n&&i<5e13?1:-1)?1:-1}r=""+i}return this.registry.citationreg.citationById[e.citationID]=e,r},d.Engine.prototype.rebuildProcessorState=function(e,t,r){e||(e=[]),t||(t="html");for(var i={},n=[],o=0,s=e.length;o<s;o+=1)for(var a=0,l=e[o].citationItems.length;a<l;a+=1){var c=""+e[o].citationItems[a].id;i[c]||n.push(c),i[c]=!0}this.updateItems(n);var u=[],m=[],p=[],h=this.opt.mode;for(this.setOutputFormat(t),o=0,s=e.length;o<s;o+=1){var f=this.processCitationCluster(e[o],u,m,d.ASSUME_ALL_ITEMS_REGISTERED);for(u.push([e[o].citationID,e[o].properties.noteIndex]),a=0,l=f[1].length;a<l;a+=1){var g=f[1][a][0];p[g]=[u[g][0],u[g][1],f[1][a][1]]}}return this.updateUncitedItems(r),this.setOutputFormat(h),p},d.Engine.prototype.restoreProcessorState=function(e){var t,r,i,n,o,s,a,l,c,u;l=[],c=[],e||(e=[]);var m=[],p={};for(t=0,r=e.length;t<r;t+=1)p[e[t].citationID]&&this.setCitationId(e[t],!0),p[e[t].citationID]=!0,m.push(e[t].properties.index);var h=e.slice();for(h.sort(function(e,t){return e.properties.index<t.properties.index?-1:e.properties.index>t.properties.index?1:0}),t=0,r=h.length;t<r;t+=1)h[t].properties.index=t;for(t=0,r=h.length;t<r;t+=1){for(u=[],i=0,n=h[t].citationItems.length;i<n;i+=1)void 0===(o=h[t].citationItems[i]).sortkeys&&(o.sortkeys=[]),a=[s=this.retrieveItem(""+o.id),o],u.push(a),h[t].citationItems[i].item=s,c.push(""+o.id);h[t].properties.unsorted||u.sort(this.citation.srt.compareCompositeKeys),h[t].sortedItems=u,this.registry.citationreg.citationById[h[t].citationID]=h[t]}for(this.updateItems(c),t=0,r=e.length;t<r;t+=1)l.push([""+e[t].citationID,e[t].properties.noteIndex]);var f=[];return e&&e.length?f=this.processCitationCluster(e[0],[],l.slice(1)):(this.registry=new d.Registry(this),this.tmp=new d.Engine.Tmp,this.disambiguate=new d.Disambiguation(this)),f},d.Engine.prototype.updateItems=function(e,t,r,i){var n=this.tmp.area,o=this.tmp.root,s=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",i||(this.tmp.loadedItemIDs={}),this.registry.init(e),r)for(var a in this.registry.ambigcites)this.registry.ambigsTouched[a]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=s,this.tmp.area=n,this.tmp.root=o,this.registry.getSortedIds()},d.Engine.prototype.updateUncitedItems=function(e,t){var r,i=this.tmp.area,n=this.tmp.root,o=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},e||(e=[]),"object"==typeof e)if(void 0===e.length)for(var s in r=e,e=[],r)e.push(s);else if("number"==typeof e.length){r={};for(var a=0,l=e.length;a<l;a+=1)r[e[a]]=!0}return this.registry.init(e,!0),this.registry.dopurge(r),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=o,this.tmp.area=i,this.tmp.root=n,this.registry.getSortedIds()},d.localeResolve=function(e,t){var r,i;return t||(t="en-US"),e||(e=t),r={},i=e.split(/[\-_]/),r.base=d.LANG_BASES[i[0]],void 0===r.base?{base:t,best:e,bare:i[0]}:(1===i.length&&(r.generic=!0),1===i.length||"x"===i[1]?r.best=r.base.replace("_","-"):r.best=i.slice(0,2).join("-"),r.base=r.base.replace("_","-"),r.bare=i[0],r)},d.Engine.prototype.localeConfigure=function(e,t){var r;if((!t||!this.locale[e.best])&&("en-US"===e.best?(r=d.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(r,"en-US",e.best)):"en-US"!==e.best&&(e.base!==e.best&&(r=d.setupXml(this.sys.retrieveLocale(e.base)),this.localeSet(r,e.base,e.best)),r=d.setupXml(this.sys.retrieveLocale(e.best)),this.localeSet(r,e.best,e.best)),this.localeSet(this.cslXml,"",e.best),this.localeSet(this.cslXml,e.bare,e.best),e.base!==e.best&&this.localeSet(this.cslXml,e.base,e.best),this.localeSet(this.cslXml,e.best,e.best),void 0===this.locale[e.best].terms["page-range-delimiter"]&&(["fr","pt"].indexOf(e.best.slice(0,2).toLowerCase())>-1?this.locale[e.best].terms["page-range-delimiter"]="-":this.locale[e.best].terms["page-range-delimiter"]="–"),void 0===this.locale[e.best].terms["year-range-delimiter"]&&(this.locale[e.best].terms["year-range-delimiter"]="–"),void 0===this.locale[e.best].terms["citation-range-delimiter"]&&(this.locale[e.best].terms["citation-range-delimiter"]="–"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var i=["default-locale","locale-sort","locale-translit","locale-translat"],n=0,o=i.length;n<o;n+=1)for(var s=0,a=this.opt[i[n]].length;s<a;s+=1)this.opt[i[n]][s]=this.opt[i[n]][s].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},d.Engine.prototype.localeSet=function(e,t,r){var i,n,o,s,a,l,c,u,m,p,h,f;if(t=t.replace("_","-"),r=r.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(t=t.toLowerCase(),r=r.toLowerCase()),this.locale[r]||(this.locale[r]={},this.locale[r].terms={},this.locale[r].opts={},this.locale[r].opts["skip-words"]=d.SKIP_WORDS,this.locale[r].opts["leading-noise-words"]||(this.locale[r].opts["leading-noise-words"]=[]),this.locale[r].dates={},this.locale[r].ord={"1.0.1":!1,keys:{}},this.locale[r]["noun-genders"]={}),n=e.makeXml(),e.nodeNameIs(e.dataObj,"locale"))n=e.dataObj;else{o=e.getNodesByName(e.dataObj,"locale");var g=!1;for(a=0,h=e.numberofnodes(o);a<h;a+=1)if(i=o[a],g||e.getAttributeValue(i,"lang","xml")!==t){var v=e.getAttributeValue(i,"lang","xml"),b=e.getNodesByName(i,"style-options");if(v&&b&&b.length){var y=e.getAttributeValue(b[0],"jurisdiction-preference");y&&(this.locale[v]||(this.locale[v]={opts:{}}),this.locale[v].opts["jurisdiction-preference"]=y.split(/\s+/))}}else n=i,g=!0}for(o=e.getNodesByName(n,"type"),L=0,z=e.numberofnodes(o);L<z;L+=1){var _=o[L],x=e.getAttributeValue(_,"name"),w=e.getAttributeValue(_,"gender");this.opt.gender[x]=w}if(e.getNodesByName(n,"term","ordinal").length){for(var C in this.locale[r].ord.keys)delete this.locale[r].terms[C];this.locale[r].ord={"1.0.1":!1,keys:{}}}o=e.getNodesByName(n,"term");var k={"last-digit":{},"last-two-digits":{},"whole-number":{}},T=!1,E={};for(a=0,h=e.numberofnodes(o);a<h;a+=1){if(l=o[a],"sub verbo"===(u=e.getAttributeValue(l,"name"))&&(u="sub-verbo"),"ordinal"===u.slice(0,7)){if("ordinal"===u)T=!0;else{var S,I=e.getAttributeValue(l,"match"),A=u.slice(8);(S=e.getAttributeValue(l,"gender-form"))||(S="neuter"),I||(I="last-two-digits","0"===A.slice(0,1)&&(I="last-digit")),"0"===A.slice(0,1)&&(A=A.slice(1)),k[I][A]||(k[I][A]={}),k[I][A][S]=u}this.locale[r].ord.keys[u]=!0}void 0===this.locale[r].terms[u]&&(this.locale[r].terms[u]={}),c="long",S=!1,e.getAttributeValue(l,"form")&&(c=e.getAttributeValue(l,"form")),e.getAttributeValue(l,"gender-form")&&(S=e.getAttributeValue(l,"gender-form")),e.getAttributeValue(l,"gender")&&(this.locale[r]["noun-genders"][u]=e.getAttributeValue(l,"gender")),S?(this.locale[r].terms[u][S]={},this.locale[r].terms[u][S][c]=[],f=this.locale[r].terms[u][S],E[u]=!0):(this.locale[r].terms[u][c]=[],f=this.locale[r].terms[u]),e.numberofnodes(e.getNodesByName(l,"multiple"))?(f[c][0]=e.getNodeValue(l,"single"),f[c][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),f[c][1]=e.getNodeValue(l,"multiple"),f[c][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(f[c]=e.getNodeValue(l),f[c].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[r].terms.supplement||(this.locale[r].terms.supplement={}),this.locale[r].terms.supplement.long||(this.locale[r].terms.supplement.long=["supplement","supplements"]),T){for(var O in E){var N={},R=0;for(var P in this.locale[r].terms[O])["masculine","feminine"].indexOf(P)>-1?N[P]=this.locale[r].terms[O][P]:R+=1;if(!R)if(N.feminine)for(var P in N.feminine)this.locale[r].terms[O][P]=N.feminine[P];else if(N.masculine)for(var P in N.masculine)this.locale[r].terms[O][P]=N.masculine[P]}this.locale[r].ord["1.0.1"]=k}for(u in this.locale[r].terms)for(L=0,z=2;L<z;L+=1)if(S=d.GENDERS[L],this.locale[r].terms[u][S])for(c in this.locale[r].terms[u])this.locale[r].terms[u][S][c]||(this.locale[r].terms[u][S][c]=this.locale[r].terms[u][c]);for(o=e.getNodesByName(n,"style-options"),a=0,h=e.numberofnodes(o);a<h;a+=1)for(p in m=o[a],s=e.attributes(m))if(s.hasOwnProperty(p))if("@punctuation-in-quote"===p||"@limit-day-ordinals-to-day-1"===p)"true"===s[p]?this.locale[r].opts[p.slice(1)]=!0:this.locale[r].opts[p.slice(1)]=!1;else if("@jurisdiction-preference"===p){var D=s[p].split(/\s+/);this.locale[r].opts[p.slice(1)]=D}else if("@skip-words"===p){var B=s[p].split(/\s*,\s*/);this.locale[r].opts[p.slice(1)]=B}else if("@leading-noise-words"===p){var M=s[p].split(/\s*,\s*/);this.locale[r].opts["leading-noise-words"]=M}else if("@name-as-sort-order"===p){this.locale[r].opts["name-as-sort-order"]={};for(var L=0,z=(F=s[p].split(/\s+/)).length;L<z;L+=1)this.locale[r].opts["name-as-sort-order"][F[L]]=!0}else if("@name-as-reverse-order"===p)for(this.locale[r].opts["name-as-reverse-order"]={},L=0,z=(F=s[p].split(/\s+/)).length;L<z;L+=1)this.locale[r].opts["name-as-reverse-order"][F[L]]=!0;else if("@name-never-short"===p){var F;for(this.locale[r].opts["name-never-short"]={},L=0,z=(F=s[p].split(/\s+/)).length;L<z;L+=1)this.locale[r].opts["name-never-short"][F[L]]=!0}for(o=e.getNodesByName(n,"date"),a=0,h=e.numberofnodes(o);a<h;a+=1){var j=o[a];this.locale[r].dates[e.getAttributeValue(j,"form")]=j}d.SET_COURT_CLASSES(this,r,e,n)},d.getLocaleNames=function(e,t){var r=d.setupXml(e);function i(e,t){var r=["base","best"];if(t)for(var i=d.localeResolve(t),n=0,o=r.length;n<o;n++)i[r[n]]&&-1===e.indexOf(i[r[n]])&&e.push(i[r[n]])}var n=["en-US"];function o(e){for(var t=r.getNodesByName(r.dataObj,e),i=0,o=t.length;i<o;i++){var s=r.getAttributeValue(t[i],"locale");if(s)for(var a=0,l=(s=s.split(/ +/)).length;a<l;a++)this.extendLocaleList(n,s[a])}}i(n,t);var s=r.getNodesByName(r.dataObj,"style")[0],a=r.getAttributeValue(s,"default-locale");i(n,a);for(var l=0;l<4;l++)o(r);return n},d.Node={},d.Node.bibliography={build:function(e,t){this.tokentype===d.START&&(e.build.area="bibliography",e.build.root="bibliography",e.build.extension="",this.execs.push(function(e){e.tmp.area="bibliography",e.tmp.root="bibliography",e.tmp.extension=""})),t.push(this)}},d.Node.choose={build:function(e,t){var r;this.tokentype===d.START&&(r=function(e){e.tmp.jump.push(void 0,d.LITERAL)}),this.tokentype===d.END&&(r=function(e){e.tmp.jump.pop()}),this.execs.push(r),t.push(this)},configure:function(e,t){this.tokentype===d.END?(e.configure.fail.push(t),e.configure.succeed.push(t)):(e.configure.fail.pop(),e.configure.succeed.pop())}},d.Node.citation={build:function(e,t){if(this.tokentype===d.START&&(e.build.area="citation",e.build.root="citation",e.build.extension="",this.execs.push(function(e){e.tmp.area="citation",e.tmp.root="citation",e.tmp.extension=""})),this.tokentype===d.END){if(e.opt.grouped_sort="in-text"===e.opt.xclass&&e.citation.opt.collapse&&e.citation.opt.collapse.length||e.citation.opt.cite_group_delimiter&&e.citation.opt.cite_group_delimiter.length&&e.opt.update_mode!==d.POSITION&&e.opt.update_mode!==d.NUMERIC,e.opt.grouped_sort&&e.citation_sort.opt.sort_directions.length){var r=e.citation_sort.opt.sort_directions[0].slice();e.citation_sort.opt.sort_directions=[r].concat(e.citation_sort.opt.sort_directions)}e.citation.srt=new d.Registry.Comparifier(e,"citation_sort")}t.push(this)}},d.Node["#comment"]={build:function(){}},d.Node.date={build:function(e,t){var r,i,n,o,s,a,l,c,u,m;this.tokentype!==d.START&&this.tokentype!==d.SINGLETON||(e.dateput.string(e,e.dateput.queue),e.tmp.date_token=d.Util.cloneToken(this),e.tmp.date_token.strings.prefix="",e.tmp.date_token.strings.suffix="",e.dateput.openLevel(this),e.build.date_parts=[],e.build.date_variables=this.variables,e.build.extension||d.Util.substituteStart.call(this,e,t),r=e.build.extension?d.dateMacroAsSortKey:function(e,t,r){var d;if(e.tmp.element_rendered_ok=!1,e.tmp.donesies=[],e.tmp.dateparts=[],d=[],!this.variables.length||e.tmp.just_looking&&"accessed"===this.variables[0])e.tmp.date_object=!1;else{for(void 0===(i=t[this.variables[0]])&&(i={"date-parts":[[0]]},e.opt.development_extensions.locator_date_and_revision&&r&&"locator-date"===this.variables[0]&&r["locator-date"]&&(i=r["locator-date"])),e.tmp.date_object=i,n=this.dateparts.length,o=0;o<n;o+=1)s=this.dateparts[o],(void 0!==e.tmp.date_object[s+"_end"]||"month"===s&&void 0!==e.tmp.date_object.season_end)&&d.push(s);for(a=[],n=(l=["year","month","day"]).length,o=0;o<n;o+=1)d.indexOf(l[o])>-1&&a.push(l[o]);for(d=a.slice(),c=2,n=d.length,o=0;o<n;o+=1)if(s=d[o],u=e.tmp.date_object[s],m=e.tmp.date_object[s+"_end"],u!==m){c=o;break}e.tmp.date_collapse_at=d.slice(c)}},this.execs.push(r),r=function(e,t){if(t[this.variables[0]]&&(e.output.startTag("date",this),"issued"===this.variables[0]&&("legal_case"===t.type||"legislation"===t.type)&&-1===e.opt.disable_duplicate_year_suppression.indexOf(t.country)&&!e.tmp.extension&&""+t["collection-number"]==""+e.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0]))for(var r in e.tmp.date_object)if(e.tmp.date_object.hasOwnProperty(r)&&"year"===r.slice(0,4)){e.tmp.issued_date={};var i=e.output.current.mystack.slice(-2)[0].blobs;e.tmp.issued_date.list=i,e.tmp.issued_date.pos=i.length-1}},this.execs.push(r)),e.build.extension||this.tokentype!==d.END&&this.tokentype!==d.SINGLETON||(r=function(e,t){t[this.variables[0]]&&e.output.endTag()},this.execs.push(r)),t.push(this),this.tokentype!==d.END&&this.tokentype!==d.SINGLETON||e.build.extension||d.Util.substituteEnd.call(this,e,t)}},d.Node["date-part"]={build:function(e,t){var r,i,n,o,s,a,l,c,u,m,p,h,f,g,v,b,y,_,x,w;this.strings.form||(this.strings.form="long"),e.build.date_parts.push(this.strings.name);var C=e.build.date_variables[0];function k(t,r,i){if(!i)return i;if(i=""+d.Util.Dates[this.strings.name][t](e,i,r,this.default_locale),"month"===this.strings.name)if(e.tmp.strip_periods)i=i.replace(/\./g,"");else for(var n=0,o=this.decorations.length;n<o;n+=1)if("@strip-periods"===this.decorations[n][0]&&"true"===this.decorations[n][1]){i=i.replace(/\./g,"");break}return i}r=function(e,t){if(e.tmp.date_object){e.tmp.probably_rendered_something=!0;var r="";if(o=!0,s="",a="",e.tmp.donesies.push(this.strings.name),e.tmp.date_object.literal&&"year"===this.strings.name&&(r=e.tmp.date_object.literal,e.output.append(e.tmp.date_object.literal,this)),e.tmp.date_object&&(s=e.tmp.date_object[this.strings.name],a=e.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==s||e.tmp.suppress_decorations||(s=!1),l=!e.tmp.suppress_decorations,c=e.tmp.have_collapsed,u="year-suffix"===e[e.tmp.area].opt.collapse||"year-suffix-ranged"===e[e.tmp.area].opt.collapse,m=e.opt["disambiguate-add-year-suffix"],l&&m&&u&&(e.tmp.years_used.push(s),e.tmp.last_years_used.length>=e.tmp.years_used.length&&c&&e.tmp.last_years_used[e.tmp.years_used.length-1]===s&&(s=!1)),void 0!==s){p=!1,h=!1,"year"===this.strings.name&&(parseInt(s,10)<500&&parseInt(s,10)>0&&(h=e.getTerm("ad")),parseInt(s,10)<0&&(p=e.getTerm("bc"),s=-1*parseInt(s,10)),a&&(parseInt(a,10)<500&&parseInt(a,10)>0&&e.getTerm("ad"),parseInt(a,10)<0&&(e.getTerm("bc"),a=-1*parseInt(a,10))));for(var T=""+e.tmp.date_object.month;T.length<2;)T="0"+T;T="month-"+T;var E=e.locale[e.opt.lang]["noun-genders"][T];if(this.strings.form){var S=this.strings.form,I=this.strings.form;"day"===this.strings.name&&"ordinal"===S&&e.locale[e.opt.lang].opts["limit-day-ordinals-to-day-1"]&&(1!=s&&(S="numeric"),1!=a&&(I="numeric")),s=k.call(this,S,E,s),a=k.call(this,I,E,a)}if(e.output.openLevel("empty"),e.tmp.date_collapse_at.length){for(f=!0,n=e.tmp.date_collapse_at.length,i=0;i<n;i+=1)if(x=e.tmp.date_collapse_at[i],-1===e.tmp.donesies.indexOf(x)){f=!1;break}if(f){if(""+a!="0"){if(0===e.dateput.queue.length&&(o=!0),e.opt["year-range-format"]&&"expanded"!==e.opt["year-range-format"]&&!e.tmp.date_object.day&&!e.tmp.date_object.month&&!e.tmp.date_object.season&&"year"===this.strings.name&&s&&a){a=e.fun.year_mangler(s+"-"+a,!0);var A=e.getTerm("year-range-delimiter");a=a.slice(a.indexOf(A)+1)}r=a,e.dateput.append(a,this),o&&(w=e.dateput.current.value().blobs[0])&&(w.strings.prefix="")}r=s,e.output.append(s,this),g=e.output.current.value(),(w=g.blobs[g.blobs.length-1])&&(w.strings.suffix=""),this.strings["range-delimiter"]?e.output.append(this.strings["range-delimiter"]):e.output.append(e.getTerm("year-range-delimiter"),"empty"),e.dateput.closeLevel(),v=e.dateput.current.value(),g.blobs=g.blobs.concat(v),e.dateput.string(e,e.dateput.queue),e.dateput.openLevel(e.tmp.date_token),e.tmp.date_collapse_at=[]}else r=s,e.output.append(s,this),e.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+a!="0"&&(0===e.dateput.queue.length&&(o=!0),e.dateput.openLevel("empty"),r=a,e.dateput.append(a,this),o&&(w=e.dateput.current.value().blobs[0])&&(w.strings.prefix=""),p&&(r=p,e.dateput.append(p)),h&&(r=h,e.dateput.append(h)),e.dateput.closeLevel())}else r=s,e.output.append(s,this);p&&(r=p,e.output.append(p)),h&&(r=h,e.output.append(h)),e.output.closeLevel()}else"month"===this.strings.name&&e.tmp.date_object.season&&((s=""+e.tmp.date_object.season)&&s.match(/^[1-4]$/)?(e.tmp.group_context.tip.variable_success=!0,r="winter",e.output.append(e.getTerm("season-0"+s),this)):s&&(r=s,e.output.append(s,this)));e.tmp.value=[],!t[C]||!s&&!e.tmp.have_collapsed||e.opt.has_year_suffix||"year"!==this.strings.name||e.tmp.just_looking||e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.has_done_year_suffix&&(e.tmp.has_done_year_suffix=!0,r="x",y=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),b=new d.NumericBlob(e,!1,y,this,t.id),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,_=new d.Util.Suffixator(d.SUFFIX_CHARS),b.setFormatter(_),"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(b.range_prefix=e.getTerm("citation-range-delimiter")),e[e.tmp.area].opt.cite_group_delimiter?b.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter:e[e.tmp.area].opt["year-suffix-delimiter"]?b.successor_prefix=e[e.tmp.area].opt["year-suffix-delimiter"]:b.successor_prefix=e[e.tmp.area].opt.layout_delimiter,b.UGLY_DELIMITER_SUPPRESS_HACK=!0,e.output.append(b,"literal")),r&&!e.tmp.group_context.tip.condition&&(e.tmp.just_did_number=r.match(/[0-9]$/),e.output.current.tip.strings.suffix&&(e.tmp.just_did_number=!1))}},this.execs.push(r),t.push(this)}},d.Node["else-if"]={build:function(e,t){d.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){d.Conditions.Configure.call(this,e,t)}},d.Node.else={build:function(e,t){t.push(this)},configure:function(e,t){this.tokentype===d.START&&(e.configure.fail[e.configure.fail.length-1]=t)}},d.Node["et-al"]={build:function(e,t){"citation"!==e.build.area&&"bibliography"!==e.build.area||this.execs.push(function(e){e.tmp.etal_node=this,"string"==typeof this.strings.term&&(e.tmp.etal_term=this.strings.term)}),t.push(this)}},d.Node.group={build:function(e,t,r){var i,n,o;if(this.realGroup=r,this.tokentype===d.START&&(d.Util.substituteStart.call(this,e,t),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()+1),this.juris||t.push(this),i=function(e){if(e.output.startTag("group",this),this.strings.label_form_override&&(e.tmp.group_context.tip.label_form||(e.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.strings.label_capitalize_if_first_override&&(e.tmp.group_context.tip.label_capitalize_if_first||(e.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override)),this.realGroup){e.tmp.group_context.tip.condition&&d.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.prefix,null,this);var t=!1,r=!1;e.tmp.group_context.mystack.length&&(e.output.current.value().parent=e.tmp.group_context.tip.output_tip);var i=e.tmp.group_context.tip.label_form;i||(i=this.strings.label_form_override);var n=e.tmp.group_context.tip.label_capitalize_if_first;n||(n=this.strings.label_capitalize_if_first),e.tmp.group_context.tip.condition?(t=e.tmp.group_context.tip.condition,r=e.tmp.group_context.tip.force_suppress):this.strings.reject?t={test:this.strings.reject,not:!0}:this.strings.require&&(t={test:this.strings.require,not:!1});var o={old_term_predecessor:e.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:e.tmp.group_context.tip.variable_success,output_tip:e.output.current.tip,label_form:i,label_static:e.tmp.group_context.tip.label_static,label_capitalize_if_first:n,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_delimiter_override_on_suppress:this.strings.set_parallel_delimiter_override_on_suppress,condition:t,force_suppress:r,done_vars:e.tmp.group_context.tip.done_vars.slice()};if(this.non_parallel){var s=e.tmp.group_context.tip.non_parallel;s||(s={}),Object.assign(s,this.non_parallel),o.non_parallel=s}if(this.parallel_first){var a=e.tmp.group_context.tip.parallel_first;a||(a={}),Object.assign(a,this.parallel_first),o.parallel_first=a}if(this.parallel_last){var l=e.tmp.group_context.tip.parallel_last;l||(l={}),Object.assign(l,this.parallel_last),o.parallel_last=l}if(e.tmp.abbrev_trimmer&&e.tmp.abbrev_trimmer.LAST_TO_FIRST&&o.parallel_last)for(var c in o.parallel_first||(o.parallel_first={}),e.tmp.abbrev_trimmer.LAST_TO_FIRST)o.parallel_last[c]&&(o.parallel_first[c]=!0,delete o.parallel_last[c]);if(e.tmp.group_context.push(o),e.tmp.abbrev_trimmer&&this.parallel_last_to_first)for(var c in e.tmp.abbrev_trimmer.LAST_TO_FIRST||(e.tmp.abbrev_trimmer.LAST_TO_FIRST={}),this.parallel_last_to_first)e.tmp.abbrev_trimmer.LAST_TO_FIRST[c]=!0}},(n=[]).push(i),this.execs=n.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(e.build["publisher-special"]=!0,this.strings["subgroup-delimiter"]&&(i=function(e,t){if(t.publisher&&t["publisher-place"]){var r=t.publisher.split(/;\s*/),i=t["publisher-place"].split(/;\s*/);r.length>1&&r.length===i.length&&(e.publisherOutput=new d.PublisherOutput(e,this),e.publisherOutput["publisher-list"]=r,e.publisherOutput["publisher-place-list"]=i)}},this.execs.push(i))),this.juris)){var s=new d.Token("choose",d.START);d.Node.choose.build.call(s,e,t);var a=new d.Token("if",d.START);o=this.juris,i=function(t,r){return d.INIT_JURISDICTION_MACROS(e,t,r,o)},a.tests||(a.tests=[]),a.tests.push(i),a.test=e.fun.match.any(a,e,a.tests),t.push(a);var l=new d.Token("text",d.SINGLETON);i=function(e,t,r){var i=t;r&&r["best-jurisdiction"]&&"juris-locator"===this.juris&&(i=r);var n=0;if(e.juris[i["best-jurisdiction"]][this.juris])for(;n<e.juris[i["best-jurisdiction"]][this.juris].length;)n=d.tokenExec.call(e,e.juris[i["best-jurisdiction"]][this.juris][n],t,r)},l.juris=this.juris,l.execs.push(i),t.push(l);var c=new d.Token("if",d.END);d.Node.if.build.call(c,e,t);var u=new d.Token("else",d.START);d.Node.else.build.call(u,e,t)}if(this.tokentype===d.END&&(e.build["publisher-special"]&&(e.build["publisher-special"]=!1,i=function(e){e.publisherOutput&&(e.publisherOutput.render(),e.publisherOutput=!1)},this.execs.push(i)),i=function(e,t,r){if(e.tmp.group_context.tip.condition||e.output.current.tip.strings.suffix&&(e.tmp.just_did_number=!1),e.output.endTag(),this.realGroup){var i=e.tmp.group_context.pop();if(i.parallel_delimiter_override&&(e.tmp.group_context.tip.parallel_delimiter_override=i.parallel_delimiter_override,!e.tmp.just_looking&&e.registry.registry[t.id].master&&(e.registry.registry[t.id].parallel_delimiter_override=i.parallel_delimiter_override)),i.parallel_delimiter_override_on_suppress&&(e.tmp.group_context.tip.parallel_delimiter_override_on_suppress=i.parallel_delimiter_override_on_suppress),"bibliography_sort"===e.tmp.area){var n=i.done_vars.indexOf("citation-number");this.strings.sort_direction&&n>-1&&1==e.tmp.group_context.length()&&(this.strings.sort_direction===d.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=d.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=d.ASCENDING,i.done_vars=i.done_vars.slice(0,n).concat(i.done_vars.slice(n+1)))}if(i.condition&&(i.force_suppress=d.EVALUATE_GROUP_CONDITION(e,i)),e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.force_suppress=i.force_suppress),!i.force_suppress&&(i.variable_success||i.term_intended&&!i.variable_attempt)){this.isJurisLocatorLabel||(e.tmp.group_context.tip.variable_success=!0);var o=e.output.current.value().blobs;if(e.output.current.value().blobs.length,!e.tmp.just_looking&&(i.non_parallel||i.parallel_last||i.parallel_first||i.parallel_delimiter_override||i.parallel_delimiter_override_on_suppress)){var s=e.parallel.checkRepeats(i);if(s&&o&&o.pop(),e.tmp.cite_index>0&&(s||!i.parallel_first&&!i.parallel_last&&!i.non_parallel)){var a=e.tmp.suppress_repeats[e.tmp.cite_index-1];s&&i.parallel_delimiter_override_on_suppress&&(a.SIBLING||a.ORPHAN)?e.output.queue.slice(-1)[0].parallel_delimiter=i.parallel_delimiter_override_on_suppress:i.parallel_delimiter_override&&a.SIBLING&&(e.output.queue.slice(-1)[0].parallel_delimiter=i.parallel_delimiter_override)}}}else{if(e.tmp.term_predecessor=i.old_term_predecessor,e.tmp.group_context.tip.variable_attempt=i.variable_attempt,i.force_suppress&&!e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.variable_attempt=!0,e.tmp.group_context.tip.variable_success=i.variable_success_parent),i.force_suppress)for(var l=0,c=i.done_vars.length;l<c;l++)for(var u=i.done_vars[l],m=0,p=e.tmp.done_vars.length;m<p;m++)e.tmp.done_vars[m]===u&&(e.tmp.done_vars=e.tmp.done_vars.slice(0,m).concat(e.tmp.done_vars.slice(m+1)));e.output.current.value().blobs&&e.output.current.value().blobs.pop()}}},this.execs.push(i),this.juris)){var m=new d.Token("else",d.END);d.Node.else.build.call(m,e,t);var p=new d.Token("choose",d.END);d.Node.choose.build.call(p,e,t)}this.tokentype===d.END&&(this.juris||t.push(this),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()-1),d.Util.substituteEnd.call(this,e,t))}},d.Node.if={build:function(e,t){d.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){d.Conditions.Configure.call(this,e,t)}},d.Node.conditions={build:function(e){this.tokentype===d.START&&e.tmp.conditions.addMatch(this.match),this.tokentype===d.END&&e.tmp.conditions.matchCombine()}},d.Node.condition={build:function(e){if(this.tokentype===d.SINGLETON){var t=e.fun.match[this.match](this,e,this.tests);e.tmp.conditions.addTest(t)}}},d.Conditions={},d.Conditions.TopNode=function(e){var t;this.tokentype!==d.START&&this.tokentype!==d.SINGLETON||(this.locale&&(e.opt.lang=this.locale),this.tests&&this.tests.length?this.test=e.fun.match[this.match](this,e,this.tests):e.tmp.conditions=new d.Conditions.Engine(e,this),0===e.build.substitute_level.value()&&(t=function(e){e.tmp.condition_counter++},this.execs.push(t))),this.tokentype!==d.END&&this.tokentype!==d.SINGLETON||(0===e.build.substitute_level.value()&&(t=function(e){e.tmp.condition_counter--,e.tmp.condition_lang_counter_arr.length>0&&e.tmp.condition_lang_counter_arr.slice(-1)[0]===e.tmp.condition_counter&&(e.opt.lang=e.tmp.condition_lang_val_arr.pop(),e.tmp.condition_lang_counter_arr.pop()),this.locale_default&&(e.output.current.value().old_locale=this.locale_default,e.output.closeLevel("empty"),e.opt.lang=this.locale_default)},this.execs.push(t)),t=function(e){return this[e.tmp.jump.value()]},this.execs.push(t),this.locale_default&&(e.opt.lang=this.locale_default))},d.Conditions.Configure=function(e,t){this.tokentype===d.START?(this.fail=e.configure.fail.slice(-1)[0],this.succeed=this.next,e.configure.fail[e.configure.fail.length-1]=t):this.tokentype===d.SINGLETON?(this.fail=this.next,this.succeed=e.configure.succeed.slice(-1)[0],e.configure.fail[e.configure.fail.length-1]=t):(this.succeed=e.configure.succeed.slice(-1)[0],this.fail=this.next)},d.Conditions.Engine=function(e,t){this.token=t,this.state=e},d.Conditions.Engine.prototype.addTest=function(e){this.token.tests||(this.token.tests=[]),this.token.tests.push(e)},d.Conditions.Engine.prototype.addMatch=function(e){this.token.match=e},d.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},d.Node.info={build:function(e){this.tokentype===d.START?e.build.skip="info":e.build.skip=!1}},d.Node.institution={build:function(e,t){[d.SINGLETON,d.START].indexOf(this.tokentype)>-1&&this.execs.push(function(e){"string"==typeof this.strings.delimiter?e.tmp.institution_delimiter=this.strings.delimiter:e.tmp.institution_delimiter=e.tmp.name_delimiter,"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")?e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&":"none"===e.inheritOpt(this,"and")&&(this.and_term=e.tmp.institution_delimiter),void 0===this.and_term&&e.tmp.and_term&&(this.and_term=e.tmp.and_term),d.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.institution_delimiter&&(this.and_prefix_multiple=e.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.institution_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},void 0!==this.and_term?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new d.Blob(e.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new d.Blob(e.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),e.nameOutput.institution=this}),t.push(this)},configure:function(e){[d.SINGLETON,d.START].indexOf(this.tokentype)>-1&&(e.build.has_institution=!0)}},d.Node["institution-part"]={build:function(e,t){var r;"long"===this.strings.name?r=this.strings["if-short"]?function(e){e.nameOutput.institutionpart["long-with-short"]=this}:function(e){e.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(r=function(e){e.nameOutput.institutionpart.short=this}),this.execs.push(r),t.push(this)}},d.Node.key={build:function(e,t){var r;t=e[e.build.root+"_sort"].tokens;var i=new d.Token("key",d.START);e.tmp.root=e.build.root,i.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),i.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),i.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),r=function(e){e.tmp.done_vars=[]},i.execs.push(r),r=function(e){e.output.openLevel("empty")},i.execs.push(r);var n=[];if(this.strings.sort_direction===d.DESCENDING?(n.push(1),n.push(-1)):(n.push(-1),n.push(1)),e[e.build.area].opt.sort_directions.push(n),d.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(e.build.date_key=!0),r=function(e){e.tmp.sort_key_flag=!0,e.inheritOpt(this,"et-al-min")&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),e.inheritOpt(this,"et-al-use-first")&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),"boolean"==typeof e.inheritOpt(this,"et-al-use-last")&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"))},i.execs.push(r),t.push(i),this.variables.length){var o=this.variables[0];if(d.NAME_VARIABLES.indexOf(o)>-1){var s=new d.Token("names",d.START);s.tokentype=d.START,s.variables=this.variables,d.Node.names.build.call(s,e,t);var a=new d.Token("name",d.SINGLETON);a.tokentype=d.SINGLETON,a.strings["name-as-sort-order"]="all",a.strings["sort-separator"]=" ",a.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),a.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),a.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),d.Node.name.build.call(a,e,t);var l=new d.Token("institution",d.SINGLETON);l.tokentype=d.SINGLETON,d.Node.institution.build.call(l,e,t);var c=new d.Token("names",d.END);c.tokentype=d.END,d.Node.names.build.call(c,e,t)}else{var u=new d.Token("text",d.SINGLETON);u.strings.sort_direction=this.strings.sort_direction,u.dateparts=this.dateparts,d.NUMERIC_VARIABLES.indexOf(o)>-1?r="citation-number"===o?function(e,t){if("bibliography_sort"===e.tmp.area&&(this.strings.sort_direction===d.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=d.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=d.ASCENDING),"citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map)var r=e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq];else r=e.registry.registry[t.id].seq;r&&(r=d.Util.padding(""+r)),e.output.append(r,this)}:function(e,t){var r=!1;(r=t[o])&&(r=d.Util.padding(r)),e.output.append(r,this)}:"citation-label"===o?r=function(e,t){var r=e.getCitationLabel(t);e.output.append(r,this)}:d.DATE_VARIABLES.indexOf(o)>-1?(r=d.dateAsSortKey,u.variables=this.variables):r="title"===o?e.transform.getOutputFunction(this.variables,"title",!1,!1,!0):"court-class"===o?function(e,t,r){d.INIT_JURISDICTION_MACROS(e,t,r,"juris-main");var i=d.GET_COURT_CLASS(e,t,!0);e.output.append(i,"empty")}:function(e,t){var r=t[o];e.output.append(r,"empty")},u.execs.push(r),t.push(u)}}else{var m=new d.Token("text",d.SINGLETON);m.strings.sort_direction=this.strings.sort_direction,m.postponed_macro=this.postponed_macro,d.expandMacro.call(e,m,t)}var p=new d.Token("key",d.END);r=function(e){var t=e.output.string(e,e.output.queue);e.sys.normalizeUnicode&&(t=e.sys.normalizeUnicode(t)),""===(t=t?t.split(" ").join(e.opt.sort_sep)+e.opt.sort_sep:"")&&(t=void 0),"string"!=typeof t&&(t=void 0),e[e[e.tmp.area].root+"_sort"].keys.push(t),e.tmp.value=[]},p.execs.push(r),e.build.date_key&&("citation"===e.build.area&&"_sort"===e.build.extension&&(e[e.build.area].opt.sort_directions.push([-1,1]),r=function(e,t){var r=e.registry.registry[t.id].disambig.year_suffix;r||(r=0);var i=d.Util.padding(""+r);e[e.tmp.area].keys.push(i)},p.execs.push(r)),e.build.date_key=!1),r=function(e){e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-use-last"]=void 0,e.tmp.sort_key_flag=!1},p.execs.push(r),t.push(p)}},d.Node.label={build:function(e,t){if(this.strings.term)this.execs.push(function(e,t,r){var i=d.evaluateLabel(this,e,t,r);r&&"locator"===this.strings.term&&(r.section_form_override=this.strings.form),i&&(e.tmp.group_context.tip.term_intended=!0),d.UPDATE_GROUP_CONTEXT_CONDITION(e,i,null,this),-1===i.indexOf("%s")&&(this.strings.capitalize_if_first&&(e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area||(i=d.Output.Formatters["capitalize-first"](e,i))),e.output.append(i,this))});else{this.strings.form||(this.strings.form="long");for(var r=e.build.names_variables[e.build.names_variables.length-1],i=e.build.name_label[e.build.name_label.length-1],n=0,o=r.length;n<o;n+=1)i[r[n]]||(i[r[n]]={});if(e.build.name_flag)for(n=0,o=r.length;n<o;n+=1)i[r[n]].after=this;else for(n=0,o=r.length;n<o;n+=1)i[r[n]].before=this}t.push(this)}},d.Node.layout={build:function(e,t){var r,i,n,o,s;function a(){"bibliography"===e.build.area&&(n=new d.Token("text",d.SINGLETON),r=function(e){if(!e.tmp.parallel_and_not_last){var t;t=e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale]?e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale].suffix:e.bibliography.opt.layout_suffix;var r=e.output.current.value();e.opt.using_display?r.blobs[r.blobs.length-1].strings.suffix=t:r.strings.suffix=t}e.bibliography.opt["second-field-align"]&&e.output.endTag("bib_other")},n.execs.push(r),t.push(n))}if(this.tokentype===d.START&&(this.locale_raw?e.build.current_default_locale=this.locale_raw:e.build.current_default_locale=e.opt["default-locale"],r=function(e,t,r){if(e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area){var i=new d.Token("group",d.START);i.decorations=[["@cite","entry"]],e.output.startTag("cite_entry",i),e.output.current.value().item_id=t.system_id,r&&(e.output.current.value().locator_txt=r.locator_txt,e.output.current.value().suffix_txt=r.suffix_txt)}},this.execs.push(r)),this.tokentype!==d.START||e.tmp.cite_affixes[e.build.area]||(r=function(e,t,r){if(e.tmp.done_vars=[],r&&r["author-only"]&&e.tmp.done_vars.push("locator"),e.opt.suppressedJurisdictions[t.country]&&t.country&&-1===["treaty","patent"].indexOf(t.type)&&e.tmp.done_vars.push("country"),!e.tmp.just_looking&&e.registry.registry[t.id]&&e.registry.registry[t.id].parallel&&e.tmp.done_vars.push("first-reference-note-number"),!e.tmp.just_looking&&e.tmp.abbrev_trimmer&&t.jurisdiction)for(var i in e.tmp.abbrev_trimmer.QUASHES[t.jurisdiction])e.tmp.done_vars.push(i);e.tmp.rendered_name=!1},this.execs.push(r),r=function(e){e.tmp.sort_key_flag=!1},this.execs.push(r),r=function(e){e.tmp.nameset_counter=0},this.execs.push(r),r=function(e,t){var r=new d.Token;e.output.openLevel(r)},this.execs.push(r),t.push(this),"citation"===e.build.area&&(i=new d.Token("text",d.SINGLETON),r=function(e,t,r){if(r&&r.prefix){var i=d.checkPrefixSpaceAppend(e,r.prefix);e.tmp.just_looking||(i=e.output.checkNestedBrace.update(i));var n=d.checkIgnorePredecessor(e,i);e.output.append(i,this,!1,n)}},i.execs.push(r),t.push(i))),this.locale_raw&&((s=new d.Token("dummy",d.START)).locale=this.locale_raw,s.strings.delimiter=this.strings.delimiter,s.strings.suffix=this.strings.suffix,e.tmp.cite_affixes[e.build.area]||(e.tmp.cite_affixes[e.build.area]={})),this.tokentype===d.START&&(e.build.layout_flag=!0,this.locale_raw||(e[e.tmp.area].opt.topdecor=[this.decorations],e[e.tmp.area+"_sort"].opt.topdecor=[this.decorations],e[e.build.area].opt.layout_prefix=this.strings.prefix,e[e.build.area].opt.layout_suffix=this.strings.suffix,e[e.build.area].opt.layout_delimiter=this.strings.delimiter,e[e.build.area].opt.layout_decorations=this.decorations,e.tmp.cite_affixes[e.build.area]&&(o=new d.Token("else",d.START),d.Node.else.build.call(o,e,t))),this.locale_raw)){if(e.build.layout_locale_flag)s.name="else-if",d.Attributes["@locale-internal"].call(s,e,this.locale_raw),d.Node["else-if"].build.call(s,e,t);else{var l=new d.Token("choose",d.START);d.Node.choose.build.call(l,e,t),s.name="if",d.Attributes["@locale-internal"].call(s,e,this.locale_raw),d.Node.if.build.call(s,e,t)}e.tmp.cite_affixes[e.build.area][s.locale]={},e.tmp.cite_affixes[e.build.area][s.locale].delimiter=this.strings.delimiter,e.tmp.cite_affixes[e.build.area][s.locale].suffix=this.strings.suffix}this.tokentype===d.END&&(this.locale_raw&&(a(),e.build.layout_locale_flag?(s.name="else-if",s.tokentype=d.END,d.Attributes["@locale-internal"].call(s,e,this.locale_raw),d.Node["else-if"].build.call(s,e,t)):(s.name="if",s.tokentype=d.END,d.Attributes["@locale-internal"].call(s,e,this.locale_raw),d.Node.if.build.call(s,e,t),e.build.layout_locale_flag=!0)),this.locale_raw||(a(),e.tmp.cite_affixes[e.build.area]&&e.build.layout_locale_flag&&(o=new d.Token("else",d.END),d.Node.else.build.call(o,e,t),o=new d.Token("choose",d.END),d.Node.choose.build.call(o,e,t)),e.build_layout_locale_flag=!0,"citation"===e.build.area&&(n=new d.Token("text",d.SINGLETON),r=function(e,t,r){if(r&&r.suffix){var i=d.checkSuffixSpacePrepend(e,r.suffix);e.tmp.just_looking||(i=e.output.checkNestedBrace.update(i)),e.output.append(i,this)}},n.execs.push(r),t.push(n)),r=function(e){e.output.closeLevel()},this.execs.push(r),r=function(e,t){e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area&&e.output.endTag()},this.execs.push(r),t.push(this),e.build.layout_flag=!1,e.build.layout_locale_flag=!1))}},d.Node.macro={build:function(){}},d.Node.alternative={build:function(e,t){if(this.tokentype===d.START){var r=new d.Token("choose",d.START);d.Node.choose.build.call(r,e,t);var i=new d.Token("if",d.START);d.Attributes["@alternative-node-internal"].call(i,e),d.Node.if.build.call(i,e,t);var n=function(e,t){if(e.tmp.oldItem=t,e.tmp.oldLang=e.opt.lang,e.tmp.abort_alternative=!0,t["language-name"]&&t["language-name-original"]){var r=JSON.parse(JSON.stringify(t));r.language=r["language-name"];var i=d.localeResolve(r.language,e.opt["default-locale"][0]);if(e.opt.multi_layout)for(var n in e.opt.multi_layout){var o=e.opt.multi_layout[n],s=!1;for(var a in o){var l=o[a];if(i.best===l.best||i.base===l.base||i.bare===l.bare){s=o[0].best;break}}s||(s=e.opt["default-locale"][0]),e.opt.lang=s}for(var c in r)if(-1===["id","type","language","multi"].indexOf(c)&&"alt-"!==c.slice(0,4))if(r.multi&&r.multi._keys[c]){var u=!0;for(var m in r.multi._keys[c])if(i.bare===m.replace(/^([a-zA-Z]+).*/,"$1")){u=!1;break}u&&delete r[c]}else delete r[c];for(var c in r)"alt-"===c.slice(0,4)?(r[c.slice(4)]=r[c],e.tmp.abort_alternative=!1):r.multi&&r.multi._keys&&!r["alt-"+c]&&r.multi._keys[c]&&(r.multi._keys[c][i.best]?(r[c]=r.multi._keys[c][i.best],e.tmp.abort_alternative=!1):r.multi._keys[c][i.base]?(r[c]=r.multi._keys[c][i.base],e.tmp.abort_alternative=!1):r.multi._keys[c][i.bare]&&(r[c]=r.multi._keys[c][i.bare],e.tmp.abort_alternative=!1))}e.output.openLevel(this),e.registry.refhash[t.id]=r,e.nameOutput=new d.NameOutput(e,r)};this.execs.push(n),t.push(this),r=new d.Token("choose",d.START),d.Node.choose.build.call(r,e,t),i=new d.Token("if",d.START),d.Attributes["@alternative-node-internal"].call(i,e),n=function(e){e.tmp.abort_alternative=!0},i.execs.push(n),d.Node.if.build.call(i,e,t)}else this.tokentype===d.END&&(i=new d.Token("if",d.END),d.Node.if.build.call(i,e,t),r=new d.Token("choose",d.END),d.Node.choose.build.call(r,e,t),n=function(e,t){e.output.closeLevel(),e.registry.refhash[t.id]=e.tmp.oldItem,e.opt.lang=e.tmp.oldLang,e.nameOutput=new d.NameOutput(e,e.tmp.oldItem),e.tmp.abort_alternative=!1},this.execs.push(n),t.push(this),i=new d.Token("if",d.END),d.Node.if.build.call(i,e,t),r=new d.Token("choose",d.END),d.Node.choose.build.call(r,e,t))}},d.Node["alternative-text"]={build:function(e,t){this.tokentype===d.SINGLETON&&this.execs.push(function(e,t){t=e.refetchItem(t.id),d.getCite.call(e,t)}),t.push(this)}},d.NameOutput=function(e,t,r){this.debug=!1,this.state=e,this.debug&&this.state.sys.print("(1)"),this.Item=t,this.item=r,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},d.NameOutput.prototype.init=function(e){this.requireMatch=e.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=e,this.variables=e.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var t=0,r=this.variables.length;t<r;t+=1)this.Item[this.variables[t]]&&this.Item[this.variables[t]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[t]]));if(this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length&&this.checkCommonAuthor(this.requireMatch)){for(var t in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var i=this.state.tmp.done_vars.indexOf(this.variables[t]);i>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,i).concat(this.state.tmp.done_vars.slice(t+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}},d.NameOutput.prototype.reinit=function(e,t){if(this.requireMatch=e.requireMatch,this.labelVariable=t,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=e.variables;var r=this.state.tmp.value.slice();this.state.tmp.value=[];for(var i=0,n=this.variables.length;i<n;i+=1)this.Item[this.variables[i]]&&this.Item[this.variables[i]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[i]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,d.LITERAL),this.state.tmp.value=r}if(this.checkCommonAuthor(this.requireMatch)){for(var i in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var o=this.state.tmp.done_vars.indexOf(this.variables[i]);o>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,o).concat(this.state.tmp.done_vars.slice(i+1)))}this.variables=[]}},d.NameOutput.prototype.outputNames=function(){var e=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=d.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",h=0,f=this.family.execs.length;h<f;h+=1)this.family.execs[h].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=d.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",h=0,f=this.given.execs.length;h<f;h+=1)this.given.execs[h].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&this.state.sys.print("(2)"),this.getEtAlConfig(),this.debug&&this.state.sys.print("(3)"),this.divideAndTransliterateNames(),this.debug&&this.state.sys.print("(4)"),this.truncatePersonalNameLists(),this.debug&&this.state.sys.print("(5)"),this.debug&&this.state.sys.print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&this.state.sys.print("(7)"),"count"!==this.name.strings.form){this.debug&&this.state.sys.print("(8)"),this.setEtAlParameters(),this.debug&&this.state.sys.print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&this.state.sys.print("(10)"),this.renderAllNames(),this.debug&&this.state.sys.print("(11)");var t=[];for(h=0,f=e.length;h<f;h+=1){var r=e[h],i=[],n=!1,o=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){this.debug&&this.state.sys.print("(11a)");for(var s=0,a=this.institutions[r].length;s<a;s+=1)i.push(this.joinPersonsAndInstitutions([this.persons[r][s],this.institutions[r][s]]));if(this.debug&&this.state.sys.print("(11b)"),this.institutions[r].length){var l=this.nameset_base+this.variable_offset[r];this.freeters[r].length&&(l+=1),n=this.joinInstitutionSets(i,l)}this.debug&&this.state.sys.print("(11c)"),o=this.joinFreetersAndInstitutionSets([this.freeters[r],n]),this.debug&&this.state.sys.print("(11d)")}else o=this._join([this.freeters[r]],"");if(o&&(this.state.tmp.extension||(o=this._applyLabels(o,r)),t.push(o)),this.debug&&this.state.sys.print("(11e)"),this.common_term)break}for(this.debug&&this.state.sys.print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&this.state.sys.print("(13)"),h=0,f=t.length;h<f;h+=1)this.state.output.append(t[h],"literal",!0);!this.state.tmp.just_looking&&t.length>0&&(this.state.tmp.probably_rendered_something=!0),this.debug&&this.state.sys.print("(14)"),this.state.output.closeLevel("empty"),this.debug&&this.state.sys.print("(15)");var c=this.state.output.pop();this.state.tmp.name_node.top=c,this.debug&&this.state.sys.print("(16)");var u=d.Util.cloneToken(this.names);if(this.state.tmp.group_context.tip.condition&&d.UPDATE_GROUP_CONTEXT_CONDITION(this.state,this.names.strings.prefix,null,this.names),this.state.output.append(c,u),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&this.state.sys.print("(17)"),this.debug&&this.state.sys.print("(18)"),"authority"!==e[0]){var m=[],p=this.Item[e[0]];if(p)for(var h=0,f=p.length;h<f;h+=1){var g=d.Util.Names.getRawName(p[h]);g&&m.push(g)}(m=m.join(", "))&&(this.state.tmp.name_node.string=m)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type&&this.state.tmp.first_name_string){var v=[];v.push(this.state.tmp.first_name_string),this.Item.title&&v.push(this.Item.title),(v=v.join(", "))&&this.state.sys.getAbbreviation&&(this.state.sys.normalizeAbbrevsKey&&(v=this.state.sys.normalizeAbbrevsKey("classic",v)),this.state.transform.loadAbbreviation("default","classic",v,this.Item.language),this.state.transform.abbrevs.default.classic[v]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[v],"empty",!0),c=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(c)))}this._collapseAuthor(),this.variables=[],this.state.tmp.authority_stop_last=0,this.debug&&this.state.sys.print("(19)")}else(this.state.tmp.extension||0!=this.names_count)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0)},d.NameOutput.prototype._applyLabels=function(e,t){var r;if(!this.label||!this.label[this.labelVariable])return e;var i=0,n=this.freeters_count[t]+this.institutions_count[t];if(n>1)i=1;else{for(var o=0,s=this.persons[t].length;o<s;o+=1)n+=this.persons_count[t][o];n>1&&(i=1)}return this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(i=this.label[this.labelVariable].before.strings.plural),r=this._buildLabel(t,i,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(r,this.label[this.labelVariable].before,!0),this.state.output.append(e,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(i=this.label[this.labelVariable].after.strings.plural),r=this._buildLabel(t,i,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(e,"literal",!0),this.state.output.append(r,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()),e},d.NameOutput.prototype._buildLabel=function(e,t,r,i){this.common_term&&(e=this.common_term);var n=!1,o=this.label[i][r];return o&&(n=d.castLabel(this.state,o,e,t,d.TOLERANT)),n},d.NameOutput.prototype._collapseAuthor=function(){var e,t,r;0!==this.state.tmp.name_node.top.blobs.length&&(0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,r=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),this.state.tmp.offset_characters=r,this.state.registry.authorstrings[this.Item.id]=t):this.state.tmp.just_looking||this.state.tmp.suppress_decorations||!(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)||(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,r=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),t===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=r),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=t,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=r,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1)))))},d.NameOutput.prototype.isPerson=function(e){return!(e.literal||!e.given&&e.family&&e.isInstitution)},d.NameOutput.prototype.truncatePersonalNameLists=function(){var e,t,r,i;for(e in this.freeters_count={},this.persons_count={},this.institutions_count={},this.freeters)this.freeters.hasOwnProperty(e)&&(this.freeters_count[e]=this.freeters[e].length,this.freeters[e]=this._truncateNameList(this.freeters,e));for(e in this.persons)if(this.persons.hasOwnProperty(e))for(this.institutions_count[e]=this.institutions[e].length,this._truncateNameList(this.institutions,e),this.persons[e]=this.persons[e].slice(0,this.institutions[e].length),this.persons_count[e]=[],n=0,o=this.persons[e].length;n<o;n+=1)this.persons_count[e][n]=this.persons[e][n].length,this.persons[e][n]=this._truncateNameList(this.persons,e,n);if((i=!(!this.state.opt.development_extensions.etal_min_etal_usefirst_hack||1!==this.etal_min||1!==this.etal_use_first||this.state.tmp.extension||this.state.tmp.just_looking)&&e)||this._please_chop)for(t=0,r=this.variables.length;t<r;t+=1){e=this.variables[t],this.freeters[e].length&&(this._please_chop===e?(this.freeters[e]=this.freeters[e].slice(1),this.freeters_count[e]+=-1,this._please_chop=!1):i&&!this._please_chop&&(this.freeters[e]=this.freeters[e].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=i));for(var n=0,o=this.persons[e].length;n<o;n++)if(this.persons[e][n].length){if(this._please_chop===e){this.persons[e][n]=this.persons[e][n].slice(1),this.persons_count[e][n]+=-1,this._please_chop=!1;break}if(i&&!this._please_chop){this.freeters[e]=this.persons[e][n].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=i;break}}this.institutions[e].length&&(this._please_chop===e?(this.institutions[e]=this.institutions[e].slice(1),this.institutions_count[e]+=-1,this._please_chop=!1):i&&!this._please_chop&&(this.institutions[e]=this.institutions[e].slice(0,1),this.institutions_count[e]=1,this._please_chop=i))}for(t=0,r=this.variables.length;t<r;t+=1)for(this.institutions[e].length&&(this.nameset_offset+=1),n=0,o=this.persons[e].length;n<o;n++)this.persons[e][n].length&&(this.nameset_offset+=1)},d.NameOutput.prototype._truncateNameList=function(e,t,r){var i;if(i=void 0===r?e[t]:e[t][r],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&i.length>50&&i.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var n=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;i=i.slice(0,n+1).concat(i.slice(-1))}return i},d.NameOutput.prototype.divideAndTransliterateNames=function(){var e,t,r,i,n=this.Item,o=this.variables;for(this.varnames=o.slice(),this.freeters={},this.persons={},this.institutions={},e=0,t=o.length;e<t;e+=1){var s=o[e];this.variable_offset[s]=this.nameset_offset;var a=this._normalizeVariableValue(n,s);if(this.name.strings["suppress-min"]&&a.length>=this.name.strings["suppress-min"]&&(a=[]),this.name.strings["suppress-max"]&&a.length<=this.name.strings["suppress-max"]&&(a=[]),this._getFreeters(s,a),this._getPersonsAndInstitutions(s,a),this.state.opt.development_extensions.spoof_institutional_affiliations)if(0===this.name.strings["suppress-min"])for(this.freeters[s]=[],r=0,i=this.persons[s].length;r<i;r+=1)this.persons[s][r]=[];else if(0===this.institution.strings["suppress-min"]){for(this.institutions[s]=[],this.freeters[s]=this.freeters[s].concat(this.persons[s]),r=0,i=this.persons[s].length;r<i;r+=1)for(var l=0,c=this.persons[s][r].length;l<c;l+=1)this.freeters[s].push(this.persons[s][r][l]);this.persons[s]=[]}}},d.NameOutput.prototype._normalizeVariableValue=function(e,t){var r;return"string"==typeof e[t]||"number"==typeof e[t]?(d.debug('name variable "'+t+'" is string or number, not array. Attempting to fix.'),r=[{literal:e[t]+""}]):e[t]?"number"!=typeof e[t].length?(d.debug('name variable "'+t+'" is object, not array. Attempting to fix.'),e[t]=[e[t]],r=e[t].slice()):r=e[t].slice():r=[],r},d.NameOutput.prototype._getFreeters=function(e,t){if(this.freeters[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var r=t.length-1;r>-1&&this.isPerson(t[r]);r--)(i=this._checkNickname(t.pop()))&&this.freeters[e].push(i);else for(r=t.length-1;r>-1;r--){var i=t.pop();this.isPerson(i)&&(i=this._checkNickname(i)),this.freeters[e].push(i)}this.freeters[e].reverse(),this.freeters[e].length&&(this.nameset_offset+=1)},d.NameOutput.prototype._getPersonsAndInstitutions=function(e,t){if(this.persons[e]=[],this.institutions[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var r=[],i=!1,n=!0,o=t.length-1;o>-1;o+=-1)if(this.isPerson(t[o])){var s=this._checkNickname(t[o]);s&&r.push(s)}else i=!0,this.institutions[e].push(t[o]),n||(r.reverse(),this.persons[e].push(r),r=[]),n=!1;i&&(r.reverse(),this.persons[e].push(r),this.persons[e].reverse(),this.institutions[e].reverse())}},d.NameOutput.prototype._clearValues=function(e){for(var t=e.length-1;t>-1;t+=-1)e.pop()},d.NameOutput.prototype._checkNickname=function(e){var t;if(["interview","personal_communication"].indexOf(this.Item.type)>-1&&((t=d.Util.Names.getRawName(e))&&this.state.sys.getAbbreviation&&(!this.item||!this.item["suppress-author"]))){var r=t;this.state.sys.normalizeAbbrevsKey&&(r=this.state.sys.normalizeAbbrevsKey("author",t)),this.state.transform.loadAbbreviation("default","nickname",r,this.Item.language);var i=this.state.transform.abbrevs.default.nickname[r];i&&(e="!here>>>"!==i&&{family:i,given:""})}return e},d.NameOutput.prototype._purgeEmptyBlobs=function(e){for(var t=e.length-1;t>-1;t+=-1)e[t]&&0!==e[t].length&&e[t].blobs.length||(e=e.slice(0,t).concat(e.slice(t+1)));return e},d.NameOutput.prototype.joinPersons=function(e,t,r,i){return e=this._purgeEmptyBlobs(e),i||(i="name"),void 0===r?1===this.etal_spec[t].freeters?this._joinEtAl(e):2===this.etal_spec[t].freeters?this._joinEllipsis(e):this.state.tmp.sort_key_flag?this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(e):1===this.etal_spec[t].persons[r]?this._joinEtAl(e):2===this.etal_spec[t].persons[r]?this._joinEllipsis(e):this.state.tmp.sort_key_flag?this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(e)},d.NameOutput.prototype.joinInstitutionSets=function(e,t){return e=this._purgeEmptyBlobs(e),1===this.etal_spec[t].institutions?this._joinEtAl(e,"institution"):2===this.etal_spec[t].institutions?this._joinEllipsis(e,"institution"):this._joinAnd(e)},d.NameOutput.prototype.joinPersonsAndInstitutions=function(e){e=this._purgeEmptyBlobs(e);var t=this._join(e,this.state.tmp.name_delimiter);return t.isInstitution=!0,t},d.NameOutput.prototype.joinFreetersAndInstitutionSets=function(e){return e=this._purgeEmptyBlobs(e),this._join(e,"[never here]",this.with.single,this.with.multiple)},d.NameOutput.prototype._getAfterInvertedName=function(e,t,r){if(r&&e.length>1&&"after-inverted-name"===this.state.inheritOpt(this.name,"delimiter-precedes-last")){var i=e[e.length-2];i.blobs.length>0&&i.blobs[0].isInverted&&(r.strings.prefix=t)}return r},d.NameOutput.prototype._getAndJoin=function(e,t){var r=!1;if(e.length>1){var i="single";e.length>2&&(i="multiple"),r=e[e.length-1].isInstitution?this.institution.and[i]:this.name.and[i],r=JSON.parse(JSON.stringify(r)),r=this._getAfterInvertedName(e,t,r)}return r},d.NameOutput.prototype._joinEtAl=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=this._join(e,t);return this.state.output.openLevel(this._getToken("name")),this.state.output.current.value().strings.delimiter="",this.state.output.append(r,"literal",!0),e.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):1===e.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},d.NameOutput.prototype._joinEllipsis=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=!1;if(e.length>1){var i="single";e.length>2&&(i="multiple"),r=JSON.parse(JSON.stringify(this.name.ellipsis[i])),r=this._getAfterInvertedName(e,t,r)}return this._join(e,t,r)},d.NameOutput.prototype._joinAnd=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=this._getAndJoin(e,t);return this._join(e,t,r)},d.NameOutput.prototype._join=function(e,t,r){if(!e)return!1;if(!(e=this._purgeEmptyBlobs(e)).length)return!1;if(e.length>1)if(2===e.length)r?e=[e[0],r,e[1]]:e[0].strings.suffix+=t;else{var i;i=r?1:0;for(var n=e.pop(),o=0,s=e.length-i;o<s;o++)e[o].strings.suffix+=t;e.push(r),e.push(n)}for(this.state.output.openLevel(),o=0,s=e.length;o<s;o+=1)this.state.output.append(e[o],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},d.NameOutput.prototype._getToken=function(e){var t=this[e];return"institution"===e?new d.Token:t},d.NameOutput.prototype.checkCommonAuthor=function(e){if(!e)return!1;var t=!1;if(2===this.variables.length){var r=this.variables.slice();r.sort(),t=r.join("")}if(!t)return!1;var i=!1;if(this.state.locale[this.state.opt.lang].terms[t]&&(i=!0),!i)return this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),!1;var n=this.Item[this.variables[0]],o=this.Item[this.variables[1]],s=this._compareNamesets(n,o);return!0===s&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),!s},d.NameOutput.prototype.setCommonTerm=function(){var e=this.variables.slice();if(e.sort(),this.common_term=e.join(""),this.common_term){var t=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?t=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(t=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!t||this.variables.length<2)this.common_term=!1;else for(var r=0,i=this.variables.length-1;r<i;r+=1){var n=this.variables[r],o=this.variables[r+1];if((this.freeters[n].length||this.freeters[o].length)&&(this.etal_spec[n].freeters!==this.etal_spec[o].freeters||!this._compareNamesets(this.freeters[n],this.freeters[o])))return void(this.common_term=!1);if(this.persons[n].length!==this.persons[o].length)return void(this.common_term=!1);for(var s=0,a=this.persons[n].length;s<a;s+=1)if(this.etal_spec[n].persons[s]!==this.etal_spec[o].persons[s]||!this._compareNamesets(this.persons[n][s],this.persons[o][s]))return void(this.common_term=!1)}}},d.NameOutput.prototype._compareNamesets=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0,i=t.length;r<i;r+=1)for(var n=0,o=d.NAME_PARTS.length;n<o;n+=1){var s=d.NAME_PARTS[n];if(!e[r]||e[r][s]!=t[r][s])return!1}return!0},d.NameOutput.prototype.constrainNames=function(){var e;this.names_count=0;for(var t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];e=this.nameset_base+t,this.freeters[i].length&&(this.state.tmp.names_max.push(this.freeters[i].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,i,e),this.names_count+=this.freeters[i].length),this.institutions[i].length&&(this.state.tmp.names_max.push(this.institutions[i].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,i,e),this.persons[i]=this.persons[i].slice(0,this.institutions[i].length),this.names_count+=this.institutions[i].length);for(var n=0,o=this.persons[i].length;n<o;n+=1)this.persons[i][n].length&&(this.state.tmp.names_max.push(this.persons[i][n].length,"literal"),this._imposeNameConstraints(this.persons[i],this.persons_count[i],n,e),this.names_count+=this.persons[i][n].length)}},d.NameOutput.prototype._imposeNameConstraints=function(e,t,r,i){var n=e[r],o=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[i]?o=this.state.tmp.disambig_request.names[i]:t[r]>=this.etal_min&&(o=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[i]>this.etal_use_first?o=t[r]<this.etal_min?t[r]:this.state.tmp.disambig_request.names[i]:t[r]>=this.etal_min&&(o=this.etal_use_first),this.etal_use_last&&o>this.etal_min-2&&(o=this.etal_min-2));var s=this.etal_min>=this.etal_use_first,a=t[r]>o;o>t[r]&&(o=n.length),s&&a&&(this.etal_use_last?e[r]=n.slice(0,o).concat(n.slice(-1)):e[r]=n.slice(0,o)),this.state.tmp.disambig_settings.names[i]=e[r].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},d.NameOutput.prototype.disambigNames=function(){for(var e,t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];if(e=this.nameset_base+t,this.freeters[i].length&&this._runDisambigNames(this.freeters[i],e),this.institutions[i].length){void 0===this.state.tmp.disambig_settings.givens[e]&&(this.state.tmp.disambig_settings.givens[e]=[]);for(var n=0,o=this.institutions[i].length;n<o;n+=1)void 0===this.state.tmp.disambig_settings.givens[e][n]&&this.state.tmp.disambig_settings.givens[e].push(2)}for(n=0,o=this.persons[i].length;n<o;n+=1)this.persons[i][n].length&&this._runDisambigNames(this.persons[i][n],e)}},d.NameOutput.prototype._runDisambigNames=function(e,t){var r,i,n,o,s,a;for(o=0,s=e.length;o<s;o+=1)if(e[o].given||e[o].family){if(i=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,e[o],o),void 0===this.state.tmp.disambig_settings.givens[t])for(var l=0,c=t+1;l<c;l+=1)this.state.tmp.disambig_settings.givens[l]||(this.state.tmp.disambig_settings.givens[l]=[]);if(void 0===this.state.tmp.disambig_settings.givens[t][o]&&(r=this.state.inheritOpt(this.name,"form","name-form","long"),n=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,r,i),this.state.tmp.disambig_settings.givens[t].push(n)),r=this.state.inheritOpt(this.name,"form","name-form","long"),a=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,r,i),this.state.tmp.disambig_request){var u=this.state.tmp.disambig_settings.givens[t][o];1!==u||"by-cite"!==this.state.citation.opt["givenname-disambiguation-rule"]||void 0!==this.state.inheritOpt(this.name,"initialize-with")&&void 0!==e[o].given||(u=2),n=u,this.state.opt["disambiguate-add-givenname"]&&e[o].given&&(n=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,n,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))}else n=a;!this.state.tmp.just_looking&&this.item&&this.item.position===d.POSITION_FIRST&&a>n&&(n=a),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[t][o]=n,"string"!=typeof i||void 0!==this.name.strings.initialize&&!0!==this.name.strings.initialize||(this.state.tmp.disambig_settings.use_initials=!0))}},d.NameOutput.prototype.getEtAlConfig=function(){var e=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,void 0===e&&(e={}),e.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},d.NameOutput.prototype.setEtAlParameters=function(){var e,t,r,i;for(e=0,t=this.variables.length;e<t;e+=1){var n=this.variables[e];for(void 0===this.etal_spec[n]&&(this.etal_spec[n]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+e]=this.etal_spec[n],this.freeters[n].length&&this._setEtAlParameter("freeters",n),r=0,i=this.persons[n].length;r<i;r+=1)void 0===this.etal_spec[n][r]&&(this.etal_spec[n].persons[r]=0),this._setEtAlParameter("persons",n,r);this.institutions[n].length&&this._setEtAlParameter("institutions",n)}},d.NameOutput.prototype._setEtAlParameter=function(e,t,r){var i,n;"persons"===e?(i=this.persons[t][r],n=this.persons_count[t][r]):(i=this[e][t],n=this[e+"_count"][t]),i.length<n&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===e?this.etal_spec[t].persons[r]=2:this.etal_spec[t][e]=2:"persons"===e?this.etal_spec[t].persons[r]=1:this.etal_spec[t][e]=1:"persons"===e?this.etal_spec[t].persons[r]=0:this.etal_spec[t][e]=0},d.NameOutput.prototype.renderAllNames=function(){for(var e,t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];(this.freeters[i].length||this.institutions[i].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),e=this.nameset_base+t,this.freeters[i].length&&(this.freeters[i]=this._renderNames(i,this.freeters[i],e));for(var n=0,o=this.institutions[i].length;n<o;n+=1)this.persons[i][n]=this._renderNames(i,this.persons[i][n],e,n)}this.renderInstitutionNames()},d.NameOutput.prototype.renderInstitutionNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1)for(var r=this.variables[e],i=0,n=this.institutions[r].length;i<n;i+=1){var o,s=this.institutions[r][i],a={primary:"locale-orig",secondary:!1,tertiary:!1};if(o=this.state.tmp.extension?["sort"]:s.isInstitution||s.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var l=["primary","secondary","tertiary"],c=0,u=l.length;c<u&&!(o.length-1<c);c+=1)o[c]&&(a[l[c]]="locale-"+o[c]);else a.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(a.secondary=!1,a.tertiary=!1),this.setRenderedName(s);var d=this._renderInstitutionName(r,s,a,i);this.institutions[r][i]=d}},d.NameOutput.prototype._renderInstitutionName=function(e,t,r,i){var n,o,s,a,l,c=this.getName(t,r.primary,!0),u=c.name,d=c.usedOrig;if(u&&(u=this.fixupInstitution(u,e,i)),m=!1,r.secondary){var m=(c=this.getName(t,r.secondary,!1,d)).name;d=c.usedOrig,m&&(m=this.fixupInstitution(m,e,i))}n=!1,r.tertiary&&(n=(c=this.getName(t,r.tertiary,!1,d)).name)&&(n=this.fixupInstitution(n,e,i));var p={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(u&&(p.l.pri=u.long,p.s.pri=u.short.length?u.short:u.long),m&&(p.l.sec=m.long,p.s.sec=m.short.length?m.short:m.long),n&&(p.l.ter=n.long,p.s.ter=n.short.length?n.short:n.long),this.institution.strings["institution-parts"]){case"short":u.short.length?(s=this._getShortStyle(),a=[this._composeOneInstitutionPart([p.s.pri,p.s.sec,p.s.ter],r,s,e)]):(o=this._getLongStyle(u,e,i),a=[this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],r,o,e)]);break;case"short-long":o=this._getLongStyle(u,e,i),s=this._getShortStyle(),a=[l=this._renderOneInstitutionPart(u.short,s),this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],r,o,e)];break;case"long-short":o=this._getLongStyle(u,e,i),s=this._getShortStyle(),l=this._renderOneInstitutionPart(u.short,s),a=[this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],r,o,e),l];break;default:o=this._getLongStyle(u,e,i),a=[this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],r,o,e)]}var h=this._join(a," ");return h&&(h.isInstitution=!0),this.state.tmp.name_node.children.push(h),h},d.NameOutput.prototype._composeOneInstitutionPart=function(e,t,r){var i,n,o,s,a=!1,l=!1,c=!1;if(e[0]){if(i=d.Util.cloneToken(r),this.state.opt.citeAffixes[t.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[t.primary].prefix){for(var u=!1,m=0,p=i.decorations.length;m<p;m+=1)"@font-style"===r.decorations[m][0]&&"italic"===i.decorations[m][1]&&(u=!0);u||i.decorations.push(["@font-style","italic"])}a=this._renderOneInstitutionPart(e[0],i)}if(e[1]&&(l=this._renderOneInstitutionPart(e[1],r)),e[2]&&(c=this._renderOneInstitutionPart(e[2],r)),l||c){this.state.output.openLevel("empty"),this.state.output.append(a),n=d.Util.cloneToken(r),t.secondary&&(n.strings.prefix=this.state.opt.citeAffixes.institutions[t.secondary].prefix,n.strings.suffix=this.state.opt.citeAffixes.institutions[t.secondary].suffix,n.strings.prefix||(n.strings.prefix=" "));var h=new d.Token;h.decorations.push(["@font-style","normal"]),h.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(h),this.state.output.append(l,n),this.state.output.closeLevel(),o=d.Util.cloneToken(r),t.tertiary&&(o.strings.prefix=this.state.opt.citeAffixes.institutions[t.tertiary].prefix,o.strings.suffix=this.state.opt.citeAffixes.institutions[t.tertiary].suffix,o.strings.prefix||(o.strings.prefix=" "));var f=new d.Token;f.decorations.push(["@font-style","normal"]),f.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(f),this.state.output.append(c,o),this.state.output.closeLevel(),this.state.output.closeLevel(),s=this.state.output.pop()}else s=a;return s},d.NameOutput.prototype._renderOneInstitutionPart=function(e,t){for(var r=0,i=e.length;r<i;r+=1)if(e[r]){var n=e[r];if(this.state.tmp.strip_periods)n=n.replace(/\./g,"");else for(var o=0,s=t.decorations.length;o<s;o+=1)if("@strip-periods"===t.decorations[o][0]&&"true"===t.decorations[o][1]){n=n.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,d.LITERAL),"!here>>>"===n?e[r]=!1:(this.state.output.append(n,t,!0),e[r]=this.state.output.pop())}return void 0===this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(e,this.institution.strings["part-separator"])},d.NameOutput.prototype._renderNames=function(e,t,r,i){var n=!1;if(t.length){for(var o=[],s=0,a=t.length;s<a;s+=1){var l,c=t[s],u={primary:"locale-orig",secondary:!1,tertiary:!1};if(l=this.state.tmp.extension?["sort"]:c.isInstitution||c.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var m=["primary","secondary","tertiary"],p=0,h=m.length;p<h&&!(l.length-1<p);p+=1)u[m[p]]="locale-"+l[p];else u.primary="locale-translat";if((this.state.tmp.sort_key_flag||"bibliography"!==this.state.tmp.area&&("citation"!==this.state.tmp.area||"note"!==this.state.opt.xclass||!this.item||this.item.position))&&(u.secondary=!1,u.tertiary=!1),this.setRenderedName(c),c.literal||c.isInstitution)o.push(this._renderInstitutionName(e,c,u,i));else{var f=this._renderPersonalName(e,c,u,r,s,i),g=d.Util.cloneToken(this.name);this.state.output.append(f,g,!0),o.push(this.state.output.pop())}}n=this.joinPersons(o,r,i)}return n},d.NameOutput.prototype._renderPersonalName=function(e,t,r,i,n,o){var s=this.getName(t,r.primary,!0),a=this._renderOnePersonalName(s.name,i,n,o),l=!1;r.secondary&&(s=this.getName(t,r.secondary,!1,s.usedOrig)).name&&(l=this._renderOnePersonalName(s.name,i,n,o));var c,u=!1;if(r.tertiary&&(s=this.getName(t,r.tertiary,!1,s.usedOrig)).name&&(u=this._renderOnePersonalName(s.name,i,n,o)),l||u){this.state.output.openLevel("empty"),this.state.output.append(a);var m=new d.Token;r.secondary&&(m.strings.prefix=this.state.opt.citeAffixes.persons[r.secondary].prefix,m.strings.suffix=this.state.opt.citeAffixes.persons[r.secondary].suffix,m.strings.prefix||(m.strings.prefix=" ")),this.state.output.append(l,m);var p=new d.Token;r.tertiary&&(p.strings.prefix=this.state.opt.citeAffixes.persons[r.tertiary].prefix,p.strings.suffix=this.state.opt.citeAffixes.persons[r.tertiary].suffix,p.strings.prefix||(p.strings.prefix=" ")),this.state.output.append(u,p),this.state.output.closeLevel(),c=this.state.output.pop()}else c=a;return c},d.NameOutput.prototype._isRomanesque=function(e){var t,r=2;return e.family.replace(/\"/g,"").match(d.ROMANESQUE_REGEXP)||(r=0),!r&&e.given&&e.given.match(d.STARTSWITH_ROMANESQUE_REGEXP)&&(r=1),2==r&&(e.multi&&e.multi.main?t=e.multi.main.slice(0,2):this.Item.language&&(t=this.Item.language.slice(0,2)),["ja","zh"].indexOf(t)>-1&&(r=1)),r},d.NameOutput.prototype._renderOnePersonalName=function(e,t,r,i){var n=e,o=this._droppingParticle(n,t,i),s=this._familyName(n),a=this._nonDroppingParticle(n),l=this._givenName(n,t,r),c=l.blob,u=this._nameSuffix(n);!1===c&&(o=!1,u=!1);var m,p=this.state.inheritOpt(this.name,"sort-separator");p||(p=""),m=n["comma-suffix"]?", ":" ";var h,f,g,v,b,y=this._isRomanesque(n),_=function e(t){return!!t&&("string"==typeof t.blobs?["’","'","-"," "].indexOf(t.blobs.slice(-1))>-1:e(t.blobs[t.blobs.length-1]))}(a);if(h=["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1?" ":" ",0===y)f=this._join([a,s,c],"");else if(1===y||n["static-ordering"])g=this._join([a,s],h),f=this._join([g,c]," ");else if(n["reverse-ordering"])g=this._join([a,s],h),f=this._join([c,g]," ");else if(this.state.tmp.sort_key_flag)"never"===this.state.opt["demote-non-dropping-particle"]?(g=this._join([a,s],h),g=this._join([g,o]," "),g=this._join([g,c],this.state.opt.sort_sep),f=this._join([g,u]," ")):(b=this._join([c,o,a]," "),g=this._join([s,b],this.state.opt.sort_sep),f=this._join([g,u]," "));else if("all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===r&&(0===i||void 0===i))["Lord","Lady"].indexOf(n.given)>-1&&(p=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(b=this._join([c,o],n["comma-dropping-particle"]+" "),(b=this._join([b,a]," "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),s&&this.family&&(s.strings.prefix=this.family.strings.prefix,s.strings.suffix=this.family.strings.suffix),g=this._join([s,b],p),f=this._join([g,u],p)):((v=_?this._join([a,s],""):this._join([a,s],h))&&this.family&&(v.strings.prefix=this.family.strings.prefix,v.strings.suffix=this.family.strings.suffix),(b=this._join([c,o],n["comma-dropping-particle"]+" "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),g=this._join([v,b],p),f=this._join([g,u],p)),f.isInverted=!0;else{if(n["dropping-particle"]&&n.family&&!n["non-dropping-particle"]){var x=n["dropping-particle"];["'","ʼ","’","-"].indexOf(x.slice(-1))>-1&&"de"!==x.slice(0,-1)&&(s=this._join([o,s],""),o=!1)}var w;_?(b=this._join([a,s],""),b=this._join([o,b],h)):b=this._join([o,a,s],h),(b=this._join([b,u],m))&&this.family&&(b.strings.prefix=this.family.strings.prefix,b.strings.suffix=this.family.strings.suffix),c&&this.given&&(c.strings.prefix=this.given.strings.prefix,c.strings.suffix=this.given.strings.suffix),b.strings.prefix&&(n["comma-dropping-particle"]=""),w=this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&1===l.initializationLevel?h:" ",f=this._join([c,b],n["comma-dropping-particle"]+w)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,d.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(f),f},d.NameOutput.prototype._normalizeNameInput=function(e){var t={literal:e.literal,family:e.family,isInstitution:e.isInstitution,given:e.given,suffix:e.suffix,"comma-suffix":e["comma-suffix"],"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],"static-ordering":e["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":e["reverse-ordering"],"full-form-always":e["full-form-always"],"parse-names":e["parse-names"],"comma-dropping-particle":"",block_initialize:e.block_initialize,multi:e.multi};return this._parseName(t),t},d.NameOutput.prototype._stripPeriods=function(e,t){var r=this[e+"_decor"];if(t)if(this.state.tmp.strip_periods)t=t.replace(/\./g,"");else if(r)for(var i=0,n=r.decorations.length;i<n;i+=1)if("@strip-periods"===r.decorations[i][0]&&"true"===r.decorations[i][1]){t=t.replace(/\./g,"");break}return t},d.NameOutput.prototype._nonDroppingParticle=function(e){var t=e["non-dropping-particle"];t&&this.state.tmp.sort_key_flag&&(t=t.replace(/[\'\u2019]/,""));var r=this._stripPeriods("family",t);return!!this.state.output.append(r,this.family_decor,!0)&&this.state.output.pop()},d.NameOutput.prototype._droppingParticle=function(e,t,r){var i=e["dropping-particle"];i&&this.state.tmp.sort_key_flag&&(i=i.replace(/[\'\u2019]/,""));var n=this._stripPeriods("given",i);if(e["dropping-particle"]&&e["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===r?this.etal_spec[t].freeters=2:this.etal_spec[t].persons=2:void 0===r?this.etal_spec[t].freeters=1:this.etal_spec[t].persons=1,e["comma-dropping-particle"]="";else if(this.state.output.append(n,this.given_decor,!0))return this.state.output.pop();return!1},d.NameOutput.prototype._familyName=function(e){var t=this._stripPeriods("family",e.family);return!!this.state.output.append(t,this.family_decor,!0)&&this.state.output.pop()},d.NameOutput.prototype._givenName=function(e,t,r){var i,n,o="long"!==this.state.inheritOpt(this.name,"form","name-form","long"),s=!1!==this.state.inheritOpt(this.name,"initialize"),a="string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&!e.block_initialize;if(e["full-form-always"])n=2;else{i=o?0:a?1:2;var l=this.state.tmp.disambig_settings.givens[t][r];n=l>i?l:i}var c=this.state.citation.opt["givenname-disambiguation-rule"];if(c&&"-with-initials"===c.slice(-14)&&(a=!0),e.family&&1===n)if(a){var u=this.state.inheritOpt(this.name,"initialize-with",!1,"");e.given=d.Util.Names.initializeWith(this.state,e.given,u,!s)}else e.given=d.Util.Names.unInitialize(this.state,e.given);else{if(0===n)return{blob:!1};2===n&&(e.given=d.Util.Names.unInitialize(this.state,e.given))}var m=this._stripPeriods("given",e.given);return this.state.output.append(m,this.given_decor,!0)?{blob:this.state.output.pop(),initializationLevel:n}:{blob:!1}},d.NameOutput.prototype._nameSuffix=function(e){var t,r=e.suffix;r&&"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(r=d.Util.Names.initializeWith(this.state,r,this.state.inheritOpt(this.name,"initialize-with"),!0));var i="";return(r=this._stripPeriods("family",r))&&"."===r.slice(-1)&&(r=r.slice(0,-1),i="."),!!this.state.output.append(r,"empty",!0)&&((t=this.state.output.pop()).strings.suffix=i+t.strings.suffix,t)},d.NameOutput.prototype._getLongStyle=function(e){var t;return(t=e.short.length&&this.institutionpart["long-with-short"]?this.institutionpart["long-with-short"]:this.institutionpart.long)||(t=new d.Token),t},d.NameOutput.prototype._getShortStyle=function(){return this.institutionpart.short?this.institutionpart.short:new d.Token},d.NameOutput.prototype._parseName=function(e){if(!e["parse-names"]&&void 0!==e["parse-names"])return e;var t;e.family&&!e.given&&e.isInstitution&&(e.literal=e.family,e.family=void 0,e.isInstitution=void 0),e.family&&'"'===e.family.slice(0,1)&&'"'===e.family.slice(-1)||!e["parse-names"]&&void 0!==e["parse-names"]?(e.family=e.family.slice(1,-1),t=!0,e["parse-names"]=0):t=!1,this.state.opt.development_extensions.parse_names&&!e["non-dropping-particle"]&&e.family&&!t&&e.given&&(e["static-particles"]||d.parseParticles(e,!0))},d.NameOutput.prototype.getName=function(e,t,r,i){if(i&&"locale-orig"===t)return{name:!1,usedOrig:i};e.family||(e.family=""),e.given||(e.given="");var n={};n["static-ordering"]=this.getStaticOrder(e);var o,s=!0;if("locale-orig"!==t&&(s=!1,e.multi))for(var a=this.state.opt[t],l=0,c=a.length;l<c;l+=1)if(o=a[l],e.multi._key[o]){s=!0;var u=e.isInstitution;(e=e.multi._key[o]).isInstitution=u,(n=this.getNameParams(o)).transliterated=!0;break}return s||(o=!1,e.multi&&e.multi.main?o=e.multi.main:this.Item.language&&(o=this.Item.language),o&&(n=this.getNameParams(o))),r||s?(e.family||(e.family=""),e.given||(e.given=""),e.literal&&(delete e.family,delete e.given),!(e={family:e.family,given:e.given,"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],suffix:e.suffix,"static-ordering":n["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":n["reverse-ordering"],"full-form-always":n["full-form-always"],"parse-names":e["parse-names"],"comma-suffix":e["comma-suffix"],"comma-dropping-particle":e["comma-dropping-particle"],transliterated:n.transliterated,block_initialize:n["block-initialize"],literal:e.literal,isInstitution:e.isInstitution,multi:e.multi}).literal&&!e.given&&e.family&&e.isInstitution&&(e.literal=e.family),e.literal&&(delete e.family,delete e.given),{name:e=this._normalizeNameInput(e),usedOrig:i||!s}):{name:!1,usedOrig:i}},d.NameOutput.prototype.getNameParams=function(e){var t={},r=d.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),i=this.state.locale[r.best]?r.best:this.state.opt["default-locale"][0],n=this.state.locale[i].opts["name-as-sort-order"],o=this.state.locale[i].opts["name-as-reverse-order"],s=this.state.locale[i].opts["name-never-short"],a=e.split("-")[0];return n&&n[a]&&(t["static-ordering"]=!0,t["reverse-ordering"]=!1),o&&o[a]&&(t["reverse-ordering"]=!0,t["static-ordering"]=!1),s&&s[a]&&(t["full-form-always"]=!0),t["static-ordering"]&&(t["block-initialize"]=!0),t},d.NameOutput.prototype.setRenderedName=function(e){if("bibliography"===this.state.tmp.area){for(var t="",r=0,i=d.NAME_PARTS.length;r<i;r+=1)e[d.NAME_PARTS[r]]&&(t+=e[d.NAME_PARTS[r]]);this.state.tmp.rendered_name.push(t)}},d.NameOutput.prototype.fixupInstitution=function(e,t,r){!e.literal&&e.family&&(e.literal=e.family,delete e.family);var i=e.literal,n=i,o={long:i.split(/\s*\|\s*/),short:n.split(/\s*\|\s*/)};if(this.state.sys.getAbbreviation){if("short"===this.institution.strings.form){let e=this.Item.jurisdiction;e=this.state.transform.loadAbbreviation(e,"institution-entire",i,this.Item.language),this.state.transform.abbrevs[e]["institution-entire"][i]?i=this.state.transform.abbrevs[e]["institution-entire"][i]:(e=this.Item.jurisdiction,e=this.state.transform.loadAbbreviation(e,"institution-part",i,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][i]&&(i=this.state.transform.abbrevs[e]["institution-part"][i])),i=this._quashChecks(e,i)}if(["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1){let e=this.Item.jurisdiction;e=this.state.transform.loadAbbreviation(e,"institution-part",n,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][n]&&(n=this.state.transform.abbrevs[e]["institution-part"][n]),n=this._quashChecks(e,n),["short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1&&n===i&&(n="")}if(o.long=i.split(/\s*\|\s*/),o.short=n.split(/\s*\|\s*/),["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1)for(var s=o.short.length-1;s>-1;s--){let e=this.Item.jurisdiction;var a=o.short[s];if(e=this.state.transform.loadAbbreviation(e,"institution-part",a,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][a]&&(o.short[s]=this.state.transform.abbrevs[e]["institution-part"][a]),o.short[s].indexOf("|")>-1){let e=o.short,t=e[s].split(/\s*\|\s*/);o.short=e.slice(0,s).concat(t).concat(e.slice(s+1))}}if(this.state.opt.development_extensions.legacy_institution_name_ordering&&o.short.reverse(),o.short=this._trimInstitution(o.short),this.institution.strings["reverse-order"]&&o.short.reverse(),!this.state.tmp.just_looking&&this.Item.jurisdiction){let e=this.Item.jurisdiction;var l=this.state.tmp.abbrev_trimmer;if(l&&l[e]&&l[e][t])for(var c=0,u=o.short.length;c<u;c++){var d=o.short[c];o.short[c]=d.replace(l[e][t],"").trim()}}}return this.state.opt.development_extensions.legacy_institution_name_ordering&&o.long.reverse(),o.long=this._trimInstitution(o.long),this.institution.strings["reverse-order"]&&o.long.reverse(),o},d.NameOutput.prototype.getStaticOrder=function(e,t){var r=!1;return(!t&&e["static-ordering"]||0===this._isRomanesque(e)||(!e.multi||!e.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1||e.multi&&e.multi.main&&["vi","hu"].indexOf(e.multi.main.slice(0,2))>-1||this.state.opt["auto-vietnamese-names"]&&d.VIETNAMESE_NAMES.exec(e.family+" "+e.given)&&d.VIETNAMESE_SPECIALS.exec(e.family+e.given))&&(r=!0),r},d.NameOutput.prototype._quashChecks=function(e,t){var r=(t=this.state.transform.quashCheck(e,t)).split(/>>[0-9]{4}>>/),i=t.match(/>>([0-9]{4})>>/);t=r.pop();var n=this.Item["original-date"]?this.Item["original-date"]:this.Item.issued;if(n&&(n=parseInt(n.year,10),n=!isNaN(n)&&n),n){if(r.length>0)for(var o=i.length-1;o>0&&!(n>=parseInt(i[o],10));o--)t=r.pop();t=t.replace(/\s*\|\s*/g,"|")}return t},d.NameOutput.prototype._trimInstitution=function(e){var t=!1,r=!1,i=!1,n=!1,o=e.slice();if(this.institution){if(void 0!==this.institution.strings["use-first"]&&(t=this.institution.strings["use-first"]),void 0!==this.institution.strings["use-last"]&&(i=this.institution.strings["use-last"]),void 0!==this.institution.strings["stop-first"]&&(n=this.institution.strings["stop-first"]),void 0!==this.institution.strings["stop-last"]&&(r=this.institution.strings["stop-last"]),t&&(r&&(o=o.slice(0,-1*r)),o=o.slice(0,t)),i){var s=e.slice();t?n=t:o=[],n&&(s=s.slice(n)),s=s.slice(-1*i),o=o.concat(s)}e=o}return e},d.PublisherOutput=function(e,t){this.state=e,this.group_tok=t,this.varlist=[]},d.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},d.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var e=!1;"text"===this.group_tok.strings.and?e=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(e="&");var t=new d.Token;t.strings.suffix=" ",t.strings.prefix=" ",this.state.output.append(e,t,!0);var r=this.state.output.pop();t.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(e,t,!0);var i=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,e&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=i:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=r,this.and_blob.multiple=r):(this.and_blob.single=r,this.and_blob.multiple=i))},d.PublisherOutput.prototype.composeElements=function(){for(var e=0;e<2;e+=1)for(var t=["publisher","publisher-place"][e],r=0,i=this["publisher-list"].length;r<i;r+=1){var n=this[t+"-list"][r],o=this[t+"-token"];this.state.output.append(n,o,!0),this[t+"-list"][r]=this.state.output.pop()}},d.PublisherOutput.prototype.composePublishers=function(){for(var e,t=0,r=this["publisher-list"].length;t<r;t+=1)e=[this[this.varlist[0]+"-list"][t],this[this.varlist[1]+"-list"][t]],this["publisher-list"][t]=this._join(e,this.group_tok.strings.delimiter)},d.PublisherOutput.prototype.joinPublishers=function(){var e=this["publisher-list"],t=this._join(e,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(t,"literal")},d.PublisherOutput.prototype._join=d.NameOutput.prototype._join,d.PublisherOutput.prototype._getToken=d.NameOutput.prototype._getToken,d.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},d.evaluateLabel=function(e,t,r,i){var n;"locator"===e.strings.term?(i&&i.label&&(n="sub verbo"===i.label?"sub-verbo":i.label),n||(n="page")):n=e.strings.term;var o=e.strings.plural;if("number"!=typeof o){var s=i&&"locator"===e.strings.term?i:r;s[e.strings.term]&&(t.processNumber(!1,s,e.strings.term,r.type),o=t.tmp.shadow_numbers[e.strings.term].plural,t.tmp.shadow_numbers[e.strings.term].labelForm||t.tmp.shadow_numbers[e.strings.term].labelDecorations||(e.strings.form?t.tmp.shadow_numbers[e.strings.term].labelForm=e.strings.form:t.tmp.group_context.tip.label_form&&(t.tmp.shadow_numbers[e.strings.term].labelForm=t.tmp.group_context.tip.label_form),t.tmp.shadow_numbers[e.strings.term].labelCapitalizeIfFirst=e.strings.capitalize_if_first,t.tmp.shadow_numbers[e.strings.term].labelDecorations=e.decorations.slice()),["locator","number","page"].indexOf(e.strings.term)>-1&&t.tmp.shadow_numbers[e.strings.term].label&&(n=t.tmp.shadow_numbers[e.strings.term].label),e.decorations&&t.opt.development_extensions.csl_reverse_lookup_support&&(e.decorations.reverse(),e.decorations.push(["@showid","true",e.cslid]),e.decorations.reverse()))}return d.castLabel(t,e,n,o,d.TOLERANT)},d.castLabel=function(e,t,r,i,n){var o=t.strings.form,s=t.strings.capitalize_if_first;e.tmp.group_context.tip.label_form&&("static"===o?e.tmp.group_context.tip.label_static=!0:o=e.tmp.group_context.tip.label_form),e.tmp.group_context.tip.label_capitalize_if_first&&(s=e.tmp.group_context.tip.label_capitalize_if_first);var a=e.getTerm(r,o,i,!1,n,t.default_locale);if(s&&(a=d.Output.Formatters["capitalize-first"](e,a)),e.tmp.strip_periods)a=a.replace(/\./g,"");else for(var l=0,c=t.decorations.length;l<c;l+=1)if("@strip-periods"===t.decorations[l][0]&&"true"===t.decorations[l][1]){a=a.replace(/\./g,"");break}return a},d.Node.name={build:function(e,t){var r,i;[d.SINGLETON,d.START].indexOf(this.tokentype)>-1&&(void 0===e.tmp.root?(i=void 0,e.tmp.root="citation"):i=e.tmp.root,e.inheritOpt(this,"et-al-subsequent-min")&&e.inheritOpt(this,"et-al-subsequent-min")!==e.inheritOpt(this,"et-al-min")&&(e.opt.update_mode=d.POSITION),e.inheritOpt(this,"et-al-subsequent-use-first")&&e.inheritOpt(this,"et-al-subsequent-use-first")!==e.inheritOpt(this,"et-al-use-first")&&(e.opt.update_mode=d.POSITION),e.tmp.root=i,r=function(e){e.tmp.etal_term="et-al",e.tmp.name_delimiter=e.inheritOpt(this,"delimiter","name-delimiter",", "),e.tmp["delimiter-precedes-et-al"]=e.inheritOpt(this,"delimiter-precedes-et-al"),"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")&&(e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&"),e.tmp.and_term=this.and_term,d.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.name_delimiter&&(this.and_prefix_multiple=e.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.name_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===e.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=e.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},e.inheritOpt(this,"and")?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):e.tmp.name_delimiter&&(this.and.single=new d.Blob(e.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new d.Blob(e.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},e.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="…",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=e.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new d.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new d.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),void 0===e.tmp["et-al-min"]&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),void 0===e.tmp["et-al-use-first"]&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),void 0===e.tmp["et-al-use-last"]&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last")),e.nameOutput.name=this},e.build.name_flag=!0,this.execs.push(r)),t.push(this)}},d.Node["name-part"]={build:function(e){e.build[this.strings.name]=this}},d.Node.names={build:function(e,t){var r;if(this.tokentype!==d.START&&this.tokentype!==d.SINGLETON||(d.Util.substituteStart.call(this,e,t),e.build.substitute_level.push(1)),this.tokentype===d.SINGLETON){for(var i in e.build.names_variables[e.build.names_variables.length-1].concat(this.variables),this.variables){var n=this.variables[i],o=e.build.name_label[e.build.name_label.length-1];Object.keys(o).length&&(o[n]=o[Object.keys(o)[0]])}r=function(e){e.nameOutput.reinit(this,this.variables_real[0])},this.execs.push(r)}if(this.tokentype===d.START&&(e.build.names_flag=!0,e.build.name_flag=!1,e.build.names_level+=1,e.build.names_variables.push(this.variables),e.build.name_label.push({}),r=function(e){e.tmp.can_substitute.push(!0),e.tmp.name_node={},e.tmp.name_node.children=[],e.nameOutput.init(this)},this.execs.push(r)),this.tokentype===d.END){for(i=0;i<3;i+=1){var s=["family","given","et-al"][i];this[s]=e.build[s],1===e.build.names_level&&(e.build[s]=void 0)}this.label=e.build.name_label[e.build.name_label.length-1],e.build.names_level+=-1,e.build.names_variables.pop(),e.build.name_label.pop(),r=function(e){e.tmp.etal_node?this.etal_style=e.tmp.etal_node:this.etal_style="empty",this.etal_term=e.getTerm(e.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=e.tmp.name_delimiter,"always"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=e.tmp.name_delimiter:"never"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===e.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=e.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",d.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(" "===this.etal_prefix_single&&(this.etal_prefix_single="")," "===this.etal_prefix_multiple&&(this.etal_prefix_multiple="")," "===this.etal_suffix&&(this.etal_suffix=""));for(var t=0;t<3;t+=1){var r=["family","given"][t];e.nameOutput[r]=this[r]}e.nameOutput.with=this.with;var i="with",n="",o="";d.STARTSWITH_ROMANESQUE_REGEXP.test(i)&&(n=" ",o=" ");var s={};s.single=new d.Blob(i),s.single.strings.suffix=o,s.multiple=new d.Blob(i),s.multiple.strings.suffix=o,"always"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(s.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),s.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(s.single.strings.prefix=n,s.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"after-inverted-name"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(s.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),s.multiple.strings.prefix=n):(s.single.strings.prefix=n,s.multiple.strings.prefix=n),e.nameOutput.with=s,e.nameOutput.label=this.label,e.nameOutput.etal_style=this.etal_style,e.nameOutput.etal_term=this.etal_term,e.nameOutput.etal_prefix_single=this.etal_prefix_single,e.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,e.nameOutput.etal_suffix=this.etal_suffix,e.nameOutput.outputNames(),e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-last"]=void 0},this.execs.push(r),r=function(e){e.tmp.can_substitute.pop()||e.tmp.can_substitute.replace(!1,d.LITERAL),1===e.tmp.can_substitute.mystack.length&&(e.tmp.can_block_substitute=!1)},this.execs.push(r),e.build.name_flag=!1}t.push(this),this.tokentype!==d.END&&this.tokentype!==d.SINGLETON||(e.build.substitute_level.pop(),d.Util.substituteEnd.call(this,e,t))}},d.Node.number={build:function(e,t){var r;d.Util.substituteStart.call(this,e,t),"roman"===this.strings.form?this.formatter=e.fun.romanizer:"ordinal"===this.strings.form?this.formatter=e.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=e.fun.long_ordinalizer),void 0===this.successor_prefix&&(this.successor_prefix=e[e.build.area].opt.layout_delimiter),void 0===this.splice_prefix&&(this.splice_prefix=e[e.build.area].opt.layout_delimiter),r=function(e,t,r){if(0!==this.variables.length){var i;if(i=this.variables[0],void 0===r&&(r={}),["locator","locator-extra"].indexOf(i)>-1){if(e.tmp.just_looking)return;if(!r[i])return}else if(!t[i])return;"collection-number"===i&&"legal_case"===t.type&&(e.tmp.renders_collection_number=!0);var n=this;if(e.tmp.group_context.tip.force_suppress)return!1;if(["locator","locator-extra"].indexOf(i)>-1?e.processNumber.call(e,n,r,i,t.type):(!e.tmp.group_context.tip.condition&&t[i]&&(e.tmp.just_did_number=(""+t[i]).match(/[0-9]$/)),e.processNumber.call(e,n,t,i,t.type)),this.substring){var o=t[i].slice(this.substring);e.output.append(o,n)}else d.Util.outputNumericField(e,i,t.id);["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!e.tmp.just_looking&&(e.tmp.done_vars.push(this.variables_real[0]),e.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}},this.execs.push(r),t.push(this),d.Util.substituteEnd.call(this,e,t)}},d.Node.sort={build:function(e,t){if(t=e[e.build.root+"_sort"].tokens,this.tokentype===d.START){"citation"===e.build.area&&(e.opt.sort_citations=!0),e.build.area=e.build.root+"_sort",e.build.extension="_sort";var r=function(e,t){if(e.opt.has_layout_locale){for(var r,i=d.localeResolve(t.language,e.opt["default-locale"][0]),n=e[e.tmp.area.slice(0,-5)].opt.sort_locales,o=0,s=n.length;o<s&&((r=n[o][i.bare])||(r=n[o][i.best]),!r);o+=1);r||(r=e.opt["default-locale"][0]),e.tmp.lang_sort_hold=e.opt.lang,e.opt.lang=r}};this.execs.push(r)}this.tokentype===d.END&&(e.build.area=e.build.root,e.build.extension="",r=function(e){e.opt.has_layout_locale&&(e.opt.lang=e.tmp.lang_sort_hold,delete e.tmp.lang_sort_hold)},this.execs.push(r)),t.push(this)}},d.Node.substitute={build:function(e,t){var r;if(this.tokentype===d.START){var i=new d.Token("choose",d.START);d.Node.choose.build.call(i,e,t);var n=new d.Token("if",d.SINGLETON);r=function(){return!(!e.tmp.value.length||e.tmp.common_term_match_fail)},n.tests=[r],n.test=e.fun.match.any(n,e,n.tests),t.push(n),r=function(e){e.tmp.can_block_substitute=!0,e.tmp.value.length&&!e.tmp.common_term_match_fail&&e.tmp.can_substitute.replace(!1,d.LITERAL),e.tmp.common_term_match_fail=!1},this.execs.push(r),t.push(this)}if(this.tokentype===d.END){t.push(this);var o=new d.Token("choose",d.END);d.Node.choose.build.call(o,e,t)}}},d.Node.text={build:function(e,t){var r,i,n,o,s,a,l,c,u,m,p;if(this.postponed_macro){var h=d.Util.cloneToken(this);h.name="group",h.tokentype=d.START,d.Node.group.build.call(h,e,t),d.expandMacro.call(e,this,t);var f=d.Util.cloneToken(this);f.name="group",f.tokentype=d.END,"juris-locator-label"===this.postponed_macro&&(f.isJurisLocatorLabel=!0),d.Node.group.build.call(f,e,t)}else{if(d.Util.substituteStart.call(this,e,t),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),i="long",n=0,this.strings.form&&(i=this.strings.form),this.strings.plural&&(n=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0])"citation-number"===this.variables_real[0]?("citation"===e.build.root&&(e.opt.update_mode=d.NUMERIC),"bibliography"===e.build.root&&(e.opt.bib_mode=d.NUMERIC),"citation-number"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,r=function(e,t,r){if(o=""+t.id,!e.tmp.just_looking){if("_sort"===e.tmp.area.slice(-5)&&"citation-number"===this.variables[0]){if("bibliography_sort"===e.tmp.area&&e.tmp.group_context.tip.done_vars.push("citation-number"),"citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map)var i=e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq];else i=e.registry.registry[t.id].seq;return i&&(i=d.Util.padding(""+i)),void e.output.append(i,this)}r&&r["author-only"]&&e.tmp.element_trace.replace("suppress-me"),i="bibliography_sort"!==e.tmp.area&&e.bibliography_sort.tmp.citation_number_map&&e.bibliography_sort.opt.citation_number_sort_direction===d.DESCENDING?e.bibliography_sort.tmp.citation_number_map[e.registry.registry[o].seq]:e.registry.registry[o].seq,e.opt.citation_number_slug?e.output.append(e.opt.citation_number_slug,this):(a=new d.NumericBlob(e,!1,i,this,t.id),e.tmp.in_cite_predecessor&&(a.suppress_splice_prefix=!0),e.output.append(a,"literal"))}},this.execs.push(r)):"year-suffix"===this.variables_real[0]?(e.opt.has_year_suffix=!0,"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,e[e.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=e[e.build.area].opt["year-suffix-delimiter"]),r=function(e,t){if(e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.just_looking){s=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),e[e.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter),a=new d.NumericBlob(e,!1,s,this,t.id),l=new d.Util.Suffixator(d.SUFFIX_CHARS),a.setFormatter(l),e.output.append(a,"literal"),c=!1;for(var r=0,i=e.tmp.group_context.mystack.length;r<i;r++){var n=e.tmp.group_context.mystack[r];if(!n.variable_success&&(n.variable_attempt||!n.variable_attempt&&!n.term_intended)){c=!0;break}}u=e[e.tmp.area].opt["year-suffix-delimiter"],c&&u&&!e.tmp.sort_key_flag&&(e.tmp.splice_delimiter=e[e.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(r)):"citation-label"===this.variables_real[0]&&("bibliography"===e.build.root&&(e.opt.bib_mode=d.TRIGRAPH),e.opt.has_year_suffix=!0,r=function(e,t){(m=t["citation-label"])||(m=e.getCitationLabel(t)),e.tmp.just_looking||(p="",e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&(s=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),p=e.fun.suffixator.format(s)),m+=p),e.output.append(m,this)},this.execs.push(r));else if(this.strings.term)r=function(e,t){var r,o=e.opt.gender[t.type],s=this.strings.term;if(""!==(s=e.getTerm(s,i,n,o,d.TOLERANT,this.default_locale))&&(e.tmp.group_context.tip.term_intended=!0),d.UPDATE_GROUP_CONTEXT_CONDITION(e,s,null,this),r=e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area?s:d.Output.Formatters["capitalize-first"](e,s),e.tmp.strip_periods)r=r.replace(/\./g,"");else for(var a=0,l=this.decorations.length;a<l;a+=1)if("@strip-periods"===this.decorations[a][0]&&"true"===this.decorations[a][1]){r=r.replace(/\./g,"");break}e.output.append(r,this),e.tmp.can_block_substitute&&e.tmp.can_substitute.replace(!1,d.LITERAL)},this.execs.push(r),e.build.term=!1,e.build.form=!1,e.build.plural=!1;else if(this.variables_real.length){if(r=function(e,t){"locator"!==this.variables_real[0]&&(e.tmp.have_collapsed=!1),!e.tmp.group_context.tip.condition&&t[this.variables[0]]&&(e.tmp.just_did_number=!1);var r=t[this.variables[0]];r&&!e.tmp.group_context.tip.condition&&((""+r).slice(-1).match(/[0-9]/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)},this.execs.push(r),d.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||this.variables_real[0].indexOf("-main")>-1||this.variables_real[0].indexOf("-sub")>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var g=this.variables[0],v=!1,b=!1,y=!1;"short"===i?"-short"!==this.variables_real[0].slice(-6)&&(b=this.variables_real[0]+"-short"):g=!1,e.build.extension?y=!0:(y=!0,v=!0),r=e.transform.getOutputFunction(this.variables,g,v,b,y)}else r=d.CITE_FIELDS.indexOf(this.variables_real[0])>-1?function(e,t,r){r&&r[this.variables[0]]&&(e.processNumber(this,r,this.variables[0],t.type),d.Util.outputNumericField(e,this.variables[0],t.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!e.tmp.just_looking&&e.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?function(e,t){e.processNumber(this,t,this.variables[0],t.type),d.Util.outputNumericField(e,this.variables[0],t.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?function(e,t){var r;if(this.variables[0]&&(r=e.getVariable(t,this.variables[0],i)))if("URL"===this.variables[0]&&"short"===i&&(r=r.replace(/(.*\.[^\/]+)\/.*/,"$1")).match(/\/\/www\./)&&(r=r.replace(/https?:\/\//,"")),e.opt.development_extensions.wrap_url_and_doi)if(this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0])e.output.append(r,this,!1,!1,!0);else{var n=d.Util.cloneToken(this),o=new d.Blob(null,null,"url-wrapper");if(o.decorations.push(["@DOI","true"]),"DOI"===this.variables_real[0]){var s;this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(s=(r=r.replace(/^https?:\/\/doi\.org\//,"")).match(/^https?:\/\//)?"":"https://doi.org/",n.strings.prefix=this.strings.prefix.slice(0,n.strings.prefix.length-16));var a=new d.Blob(s),l=new d.Blob(r);o.push(a),o.push(l),e.output.append(o,n,!1,!1,!0)}else l=new d.Blob(r),o.push(l),e.output.append(o,n,!1,!1,!0)}else{if(this.decorations.length)for(var c=this.decorations.length-1;c>-1;c--)this.decorations[c][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,c).concat(this.decorations.slice(c+1)));e.output.append(r,this,!1,!1,!0)}}:"section"===this.variables_real[0]?function(e,t){var r;(r=e.getVariable(t,this.variables[0],i))&&e.output.append(r,this)}:"hereinafter"===this.variables_real[0]?function(e,t){var r=e.transform.abbrevs.default.hereinafter[t.id];r&&(e.output.append(r,this),e.tmp.group_context.tip.variable_success=!0)}:function(e,t){var r;this.variables[0]&&(r=e.getVariable(t,this.variables[0],i))&&(r=(r=""+r).split("\\").join(""),e.output.append(r,this))};this.execs.push(r)}else this.strings.value&&(r=function(e){e.tmp.group_context.tip.term_intended=!0,d.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.value,!0,this),e.output.append(this.strings.value,this),e.tmp.can_block_substitute&&e.tmp.can_substitute.replace(!1,d.LITERAL)},this.execs.push(r));t.push(this),d.Util.substituteEnd.call(this,e,t)}}},d.Node.intext={build:function(e,t){this.tokentype===d.START&&(e.build.area="intext",e.build.root="intext",e.build.extension="",this.execs.push(function(e,t){e.tmp.area="intext",e.tmp.root="intext",e.tmp.extension=""})),this.tokentype===d.END&&(e.intext_sort={opt:{sort_directions:e.citation_sort.opt.sort_directions}},e.intext.srt=e.citation.srt),t.push(this)}},d.Attributes={},d.Attributes["@disambiguate"]=function(e,t){if(this.tests||(this.tests=[]),"true"===t){e.opt.has_disambiguate=!0;var r=function(t){if("bibliography"===e.tmp.area){if(e.tmp.disambiguate_count<e.registry.registry[t.id].disambig.disambiguate)return e.tmp.disambiguate_count+=1,!0}else if(e.tmp.disambiguate_maxMax+=1,e.tmp.disambig_settings.disambiguate&&e.tmp.disambiguate_count<e.tmp.disambig_settings.disambiguate)return e.tmp.disambiguate_count+=1,!0;return!1};this.tests.push(r)}else"check-ambiguity-and-backreference"===t&&(r=function(t){return!!(e.registry.registry[t.id].disambig.disambiguate&&e.registry.registry[t.id]["citation-count"]>1)},this.tests.push(r))},d.Attributes["@is-numeric"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(t){return function(r,i){var n=r;if(i&&["locator","locator-extra"].indexOf(t)>-1&&(n=i),!n[t])return!1;if(d.NUMERIC_VARIABLES.indexOf(t)>-1){if(e.tmp.shadow_numbers[t]||e.processNumber(!1,n,t,r.type),e.tmp.shadow_numbers[t].numeric)return!0}else if(["title","version"].indexOf(t)>-1&&n[t].slice(-1)===""+parseInt(n[t].slice(-1),10))return!0;return!1}},n=0;n<r.length;n+=1)this.tests.push(i(r[n]))},d.Attributes["@is-uncertain-date"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(e){return function(t){return!(!t[e]||!t[e].circa)}},n=0,o=r.length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@locator"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.replace("sub verbo","sub-verbo"),i=function(t){return function(r,i){var n;return e.processNumber(!1,i,"locator"),!(!(n=e.tmp.shadow_numbers.locator.label)||t!==n)}},n=0,o=(r=r.split(/\s+/)).length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@position"]=function(e,t){this.tests||(this.tests=[]),e.opt.update_mode=d.POSITION;for(var r=t.split(/\s+/),i=function(e,t){return!!(t&&d.POSITION_MAP[t.position]>=d.POSITION_MAP[d.POSITION_SUBSEQUENT]&&t["near-note"])},n=function(e,t){return!(!t||d.POSITION_MAP[t.position]!=d.POSITION_MAP[d.POSITION_SUBSEQUENT]||t["near-note"])},o=function(t){return function(r,i){if("bibliography"===e.tmp.area)return!1;if(i&&void 0===i.position&&(i.position=0),i&&"number"==typeof i.position){if(0===i.position&&0===t)return!0;if(t>0&&d.POSITION_MAP[i.position]>=d.POSITION_MAP[t])return!0}else if(0===t)return!0;return!1}},s=0,a=r.length;s<a;s+=1){var l;"first"===(l=r[s])?l=d.POSITION_FIRST:"container-subsequent"===l?l=d.POSITION_CONTAINER_SUBSEQUENT:"subsequent"===l?l=d.POSITION_SUBSEQUENT:"ibid"===l?l=d.POSITION_IBID:"ibid-with-locator"===l&&(l=d.POSITION_IBID_WITH_LOCATOR),"near-note"===l?this.tests.push(i):"far-note"===l?this.tests.push(n):this.tests.push(o(l))}},d.Attributes["@type"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(e){return function(t){return!(t.type!==e)}},n=[],o=0,s=r.length;o<s;o+=1)n.push(i(r[o]));this.tests.push(e.fun.match.any(this,e,n))},d.Attributes["@variable"]=function(e,t){var r;if(this.tests||(this.tests=[]),this.variables=t.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)r=function(e,t,r){for(var i=this.variables.length-1;i>-1;i+=-1)this.variables.pop();i=0;for(var n=this.variables_real.length;i<n;i++)-1===e.tmp.done_vars.indexOf(this.variables_real[i])&&this.variables.push(this.variables_real[i]),e.tmp.can_block_substitute&&e.tmp.done_vars.push(this.variables_real[i])},this.execs.push(r),r=function(e,t,r){for(var i=!1,n=0,o=this.variables.length;n<o;n++){var s=this.variables[n];if(["authority","committee"].indexOf(s)>-1&&"string"==typeof t[s]&&"names"===this.name){var a=!0,l=t[s].split(/\s*;\s*/),c={};if(t.multi&&t.multi._keys[s])for(var u in t.multi._keys[s])if(c[u]=t.multi._keys[s][u].split(/\s*;\s*/),c[u].length!==l.length){a=!1;break}a||(l=[t[s]],c=t.multi._keys[s]);for(var m=0,p=l.length;m<p;m++){var h={literal:l[m],multi:{_key:{}}};for(var u in c){var f={literal:c[u][m]};h.multi._key[u]=f}l[m]=h}t[s]=l}if("short"!==this.strings.form||t[s]||("title"===s?s="title-short":"container-title"===s&&(s="container-title-short")),"year-suffix"===s){i=!0;break}if(d.DATE_VARIABLES.indexOf(s)>-1){if(e.opt.development_extensions.locator_date_and_revision&&"locator-date"===s){i=!0;break}if(t[s]){for(var g in t[s])if((-1!==this.dateparts.indexOf(g)||"literal"===g)&&t[s][g]){i=!0;break}if(i)break}}else{if("locator"===s){r&&r.locator&&(i=!0);break}if("locator-extra"===s){r&&r["locator-extra"]&&(i=!0);break}if(["citation-number","citation-label"].indexOf(s)>-1){i=!0;break}if("first-reference-note-number"===s){r&&r["first-reference-note-number"]&&(i=!0);break}if("first-container-reference-note-number"===s){r&&r["first-container-reference-note-number"]&&(i=!0);break}if("hereinafter"===s){e.transform.abbrevs.default.hereinafter[t.id]&&e.sys.getAbbreviation&&t.id&&(i=!0);break}if("object"==typeof t[s])break;if("string"==typeof t[s]&&t[s]){i=!0;break}if("number"==typeof t[s]){i=!0;break}}if(i)break}if(i){for(n=0,o=this.variables_real.length;n<o;n++)"citation-number"===(s=this.variables_real[n])&&"bibliography"===e.tmp.area||(e.tmp.cite_renders_content=!0),e.tmp.group_context.tip.variable_success=!0,e.tmp.can_substitute.value()&&"bibliography"===e.tmp.area&&"string"==typeof t[s]&&(e.tmp.name_node.top=e.output.current.value(),e.tmp.rendered_name.push(t[s]));e.tmp.can_substitute.replace(!1,d.LITERAL)}else e.tmp.group_context.tip.variable_attempt=!0},this.execs.push(r);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var i=function(t){return function(r,i){var n=r;if(i&&["locator","locator-extra","first-reference-note-number","first-container-reference-note-number","locator-date"].indexOf(t)>-1&&(n=i),"hereinafter"===t&&e.sys.getAbbreviation&&n.id){if(e.transform.abbrevs.default.hereinafter[n.id])return!0}else if(n[t]){if("number"==typeof n[t]||"string"==typeof n[t])return!0;if("object"==typeof n[t])for(var o in n[t])if(n[t][o])return!0}return!1}},n=0,o=this.variables.length;n<o;n+=1)this.tests.push(i(this.variables[n]))},d.Attributes["@page"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.replace("sub verbo","sub-verbo"),i=function(t){return function(r){var i;return e.processNumber(!1,r,"page",r.type),i=e.tmp.shadow_numbers.page.label?"sub verbo"===e.tmp.shadow_numbers.page.label?"sub-verbo":e.tmp.shadow_numbers.page.label:"page",e.tmp.shadow_numbers.page.values.length>0&&e.tmp.shadow_numbers.page.values[0].gotosleepability&&(e.tmp.shadow_numbers.page.values[0].labelVisibility=!1),t===i}},n=0,o=(r=r.split(/\s+/)).length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@number"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(t){return function(r){var i;return e.processNumber(!1,r,"number",r.type),i=e.tmp.shadow_numbers.number.label?e.tmp.shadow_numbers.number.label:"number",t===i}},n=0,o=r.length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@jurisdiction"]=function(e,t){this.tests||(this.tests=[]);var r=t.split(/\s+/);this.tests.push(function(e){return function(t){if(!t.jurisdiction)return!1;for(var r=t.jurisdiction,i=0,n=e.length;i<n;i++)if(r===e[i])return!0;return!1}}(r))},d.Attributes["@country"]=function(e,t){this.tests||(this.tests=[]);var r=t.split(/\s+/);this.tests.push(function(e){return function(t){if(!t.country)return!1;for(var r=t.country,i=0,n=e.length;i<n;i++)if(r===e[i])return!0;return!1}}(r))},d.Attributes["@context"]=function(e,t){this.tests||(this.tests=[]),this.tests.push(function(){return["bibliography","citation"].indexOf(t)>-1?e.tmp.area.slice(0,t.length)===t:"alternative"===t?!!e.tmp.abort_alternative:void 0})},d.Attributes["@has-year-only"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(e){return function(t){var r=t[e];return!(!r||r.month||r.season)}},n=0,o=r.length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@has-to-month-or-season"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(e){return function(t){var r=t[e];return!(!r||!r.month&&!r.season||r.day)}},n=0,o=r.length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@has-day"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(e){return function(t){var r=t[e];return!(!r||!r.day)}},n=0,o=r.length;n<o;n+=1)this.tests.push(i(r[n]))},d.Attributes["@is-plural"]=function(e,t){this.tests||(this.tests=[]),this.tests.push(function(r){var i=r[t];if(i&&i.length){for(var n=0,o=0,s=!1,a=0,l=i.length;a<l;a+=1)e.opt.development_extensions.spoof_institutional_affiliations&&(i[a].literal||i[a].isInstitution&&i[a].family&&!i[a].given)?(o+=1,s=!1):(n+=1,s=!0);if(n>1)return!0;if(o>1)return!0;if(o&&s)return!0}return!1})},d.Attributes["@is-multiple"]=function(e,t){this.tests||(this.tests=[]),this.tests.push(function(e){return(""+e[t]).split(/(?:,\s|\s(?:tot\sen\smet|līdz|oraz|and|bis|έως|και|och|až|do|en|et|in|ir|ja|og|sa|to|un|und|és|și|i|u|y|à|e|a|и|-|–)\s|—|\&)/).length>1})},d.Attributes["@locale"]=function(e,t){var r,i,n;this.tests||(this.tests=[]);var o=e.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=t,this.tokentype===d.START){e.opt.multi_layout||(e.opt.multi_layout=[]);var s=[],a=t.split(/\s+/),l={},c=d.localeResolve(a[0],o);s.push(c),c.generic?l[c.generic]=c.best:l[c.best]=c.best;for(var u=1,m=a.length;u<m;u+=1){var p=d.localeResolve(a[u],o);s.push(p),p.generic?l[p.generic]=c.best:l[p.best]=c.best}e[e.build.area].opt.sort_locales.push(l),e.opt.multi_layout.push(s)}e.opt.has_layout_locale=!0}else{n=t.split(/\s+/);var h=[];for(u=0,m=n.length;u<m;u+=1)i=n[u],r=d.localeResolve(i,o),2===n[u].length&&h.push(r.bare),e.localeConfigure(r,!0),n[u]=r;var f=n.slice();this.tests.push(function(t,r,i){return function(n){var o,s,a;for(o=!1,a=n.language?n.language:r,s=d.localeResolve(a,r),u=0,m=t.length;u<m;u+=1)if(s.best===t[u].best){e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=t[0].best,o=!0;break}return!o&&i.indexOf(s.bare)>-1&&(e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=t[0].best,o=!0),o}}(f,o,h))}},d.Attributes["@alternative-node-internal"]=function(e){this.tests||(this.tests=[]),this.tests.push(function(){return!e.tmp.abort_alternative})},d.Attributes["@locale-internal"]=function(e,t){var r,i,n,o,s,a;for(this.tests||(this.tests=[]),n=t.split(/\s+/),this.locale_bares=[],o=0,s=n.length;o<s;o+=1)i=n[o],r=d.localeResolve(i,e.opt["default-locale"][0]),2===n[o].length&&this.locale_bares.push(r.bare),e.localeConfigure(r),n[o]=r;this.locale_default=e.opt["default-locale"][0],this.locale=n[0].best,this.locale_list=n.slice(),this.tests.push((a=this,function(t){var r;r=!1;var n=!1;if(t.language&&(i=t.language,(n=d.localeResolve(i,e.opt["default-locale"][0])).best===e.opt["default-locale"][0]&&(n=!1)),n){for(o=0,s=a.locale_list.length;o<s;o+=1)if(n.best===a.locale_list[o].best){e.opt.lang=a.locale,e.tmp.last_cite_locale=a.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=a.locale,r=!0;break}!r&&a.locale_bares.indexOf(n.bare)>-1&&(e.opt.lang=a.locale,e.tmp.last_cite_locale=a.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=a.locale,r=!0)}return r}))},d.Attributes["@court-class"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(t){return function(r){return d.GET_COURT_CLASS(e,r)===t}},n=0,o=r.length;n<o;n++)this.tests.push(i(r[n]))},d.Attributes["@container-multiple"]=function(e,t){this.tests||(this.tests=[]);var r="true"===t;this.tests.push(function(t){return function(r){return e.tmp.container_item_count[r.container_id]&&e.tmp.container_item_count[r.container_id]>1?t:!t}}(r))},d.Attributes["@container-subsequent"]=function(e,t){this.tests||(this.tests=[]);var r="true"===t;this.tests.push(function(t){return function(r){return e.tmp.container_item_pos[r.container_id]>1?t:!t}}(r))},d.Attributes["@has-subunit"]=function(e,t){var r;this.tests||(this.tests=[]),this.tests.push((r=t,function(e){var t=0;for(var i in e[r]){var n=e[r][i];if(!n.given){var o=(n.literal?n.literal:n.family).split("|").length;(0===t||o<t)&&(t=o)}}return t>1}))},d.Attributes["@cite-form"]=function(e,t){var r;this.tests||(this.tests=[]),this.tests.push((r=t,function(e){return e["cite-form"]===r}))},d.Attributes["@disable-duplicate-year-suppression"]=function(e,t){e.opt.disable_duplicate_year_suppression=t.split(/\s+/)},d.Attributes["@consolidate-containers"]=function(e,t){d.Attributes["@track-containers"](e,t);var r=t.split(/\s+/);e.bibliography.opt.consolidate_containers=r},d.Attributes["@track-containers"]=function(e,t){var r=t.split(/\s+/);e.bibliography.opt.track_container_items||(e.bibliography.opt.track_container_items=[]),e.bibliography.opt.consolidate_containers||(e.bibliography.opt.consolidate_containers=[]),e.bibliography.opt.track_container_items=e.bibliography.opt.track_container_items.concat(r)},d.Attributes["@parallel-first"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);for(var i in e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_first={},r){var n=r[i];this.parallel_first[n]=!0,e.opt.track_repeat[n]=!0}},d.Attributes["@parallel-last"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);for(var i in e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_last={},r){var n=r[i];this.parallel_last[n]=!0,e.opt.track_repeat[n]=!0}},d.Attributes["@parallel-last-to-first"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);this.parallel_last_to_first={};for(var i=0,n=r.length;i<n;i++)this.parallel_last_to_first[r[i]]=!0},d.Attributes["@parallel-delimiter-override"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override=t},d.Attributes["@parallel-delimiter-override-on-suppress"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override_on_suppress=t},d.Attributes["@no-repeat"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);for(var i in e.opt.track_repeat||(e.opt.track_repeat={}),this.non_parallel={},r){var n=r[i];this.non_parallel[n]=!0,e.opt.track_repeat[n]=!0}},d.Attributes["@require"]=function(e,t){e.opt.use_context_condition=!0,this.strings.require=t},d.Attributes["@reject"]=function(e,t){e.opt.use_context_condition=!0,this.strings.reject=t},d.Attributes["@require-comma-on-symbol"]=function(e,t){e.opt.require_comma_on_symbol=t},d.Attributes["@gender"]=function(e,t){this.gender=t},d.Attributes["@cslid"]=function(e,t){this.cslid=parseInt(t,10)},d.Attributes["@capitalize-if-first"]=function(e,t){this.strings.capitalize_if_first_override=t},d.Attributes["@label-capitalize-if-first"]=function(e,t){this.strings.label_capitalize_if_first_override=t},d.Attributes["@label-form"]=function(e,t){this.strings.label_form_override=t},d.Attributes["@part-separator"]=function(e,t){this.strings["part-separator"]=t},d.Attributes["@leading-noise-words"]=function(e,t){this["leading-noise-words"]=t},d.Attributes["@name-never-short"]=function(e,t){this["name-never-short"]=t},d.Attributes["@class"]=function(e,t){e.opt.class=t},d.Attributes["@version"]=function(e,t){e.opt.version=t},d.Attributes["@value"]=function(e,t){this.strings.value=t},d.Attributes["@name"]=function(e,t){this.strings.name=t},d.Attributes["@form"]=function(e,t){this.strings.form=t},d.Attributes["@date-parts"]=function(e,t){this.strings["date-parts"]=t},d.Attributes["@range-delimiter"]=function(e,t){this.strings["range-delimiter"]=t},d.Attributes["@macro"]=function(e,t){this.postponed_macro=t},d.Attributes["@term"]=function(e,t){this.strings.term="sub verbo"===t?"sub-verbo":t},d.Attributes["@xmlns"]=function(){},d.Attributes["@lang"]=function(e,t){t&&(e.build.lang=t)},d.Attributes["@lingo"]=function(){},d.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0},d.Attributes["@suffix"]=function(e,t){this.strings.suffix=t},d.Attributes["@prefix"]=function(e,t){this.strings.prefix=t},d.Attributes["@delimiter"]=function(e,t){this.strings.delimiter=t},d.Attributes["@match"]=function(e,t){this.match=t},d.Attributes["@names-min"]=function(e,t){var r=parseInt(t,10);e[e.build.area].opt.max_number_of_names<r&&(e[e.build.area].opt.max_number_of_names=r),this.strings["et-al-min"]=r},d.Attributes["@names-use-first"]=function(e,t){this.strings["et-al-use-first"]=parseInt(t,10)},d.Attributes["@names-use-last"]=function(e,t){this.strings["et-al-use-last"]="true"===t},d.Attributes["@sort"]=function(e,t){"descending"===t&&(this.strings.sort_direction=d.DESCENDING)},d.Attributes["@plural"]=function(e,t){"always"===t||"true"===t?this.strings.plural=1:"never"===t||"false"===t?this.strings.plural=0:"contextual"===t&&(this.strings.plural=!1)},d.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0},d.Attributes["@publisher-delimiter-precedes-last"]=function(e,t){this.strings["publisher-delimiter-precedes-last"]=t},d.Attributes["@publisher-delimiter"]=function(e,t){this.strings["publisher-delimiter"]=t},d.Attributes["@publisher-and"]=function(e,t){this.strings["publisher-and"]=t},d.Attributes["@givenname-disambiguation-rule"]=function(e,t){d.GIVENNAME_DISAMBIGUATION_RULES.indexOf(t)>-1&&(e.citation.opt["givenname-disambiguation-rule"]=t)},d.Attributes["@collapse"]=function(e,t){t&&(e[this.name].opt.collapse=t)},d.Attributes["@cite-group-delimiter"]=function(e,t){t&&(e[e.tmp.area].opt.cite_group_delimiter=t)},d.Attributes["@names-delimiter"]=function(e,t){e.setOpt(this,"names-delimiter",t)},d.Attributes["@name-form"]=function(e,t){e.setOpt(this,"name-form",t)},d.Attributes["@subgroup-delimiter"]=function(e,t){this.strings["subgroup-delimiter"]=t},d.Attributes["@subgroup-delimiter-precedes-last"]=function(e,t){this.strings["subgroup-delimiter-precedes-last"]=t},d.Attributes["@name-delimiter"]=function(e,t){e.setOpt(this,"name-delimiter",t)},d.Attributes["@et-al-min"]=function(e,t){var r=parseInt(t,10);e[e.build.area].opt.max_number_of_names<r&&(e[e.build.area].opt.max_number_of_names=r),e.setOpt(this,"et-al-min",r)},d.Attributes["@et-al-use-first"]=function(e,t){e.setOpt(this,"et-al-use-first",parseInt(t,10))},d.Attributes["@et-al-use-last"]=function(e,t){"true"===t?e.setOpt(this,"et-al-use-last",!0):e.setOpt(this,"et-al-use-last",!1)},d.Attributes["@et-al-subsequent-min"]=function(e,t){var r=parseInt(t,10);e[e.build.area].opt.max_number_of_names<r&&(e[e.build.area].opt.max_number_of_names=r),e.setOpt(this,"et-al-subsequent-min",r)},d.Attributes["@et-al-subsequent-use-first"]=function(e,t){e.setOpt(this,"et-al-subsequent-use-first",parseInt(t,10))},d.Attributes["@suppress-min"]=function(e,t){this.strings["suppress-min"]=parseInt(t,10)},d.Attributes["@suppress-max"]=function(e,t){this.strings["suppress-max"]=parseInt(t,10)},d.Attributes["@and"]=function(e,t){e.setOpt(this,"and",t)},d.Attributes["@delimiter-precedes-last"]=function(e,t){e.setOpt(this,"delimiter-precedes-last",t)},d.Attributes["@delimiter-precedes-et-al"]=function(e,t){e.setOpt(this,"delimiter-precedes-et-al",t)},d.Attributes["@initialize-with"]=function(e,t){e.setOpt(this,"initialize-with",t)},d.Attributes["@initialize"]=function(e,t){"false"===t&&e.setOpt(this,"initialize",!1)},d.Attributes["@name-as-reverse-order"]=function(e,t){this["name-as-reverse-order"]=t},d.Attributes["@name-as-sort-order"]=function(e,t){"style-options"===this.name?this["name-as-sort-order"]=t:e.setOpt(this,"name-as-sort-order",t)},d.Attributes["@sort-separator"]=function(e,t){e.setOpt(this,"sort-separator",t)},d.Attributes["@require-match"]=function(e,t){"true"===t&&(this.requireMatch=!0)},d.Attributes["@exclude-types"]=function(e,t){e.bibliography.opt.exclude_types=t.split(/\s+/)},d.Attributes["@exclude-with-fields"]=function(e,t){e.bibliography.opt.exclude_with_fields=t.split(/\s+/)},d.Attributes["@year-suffix-delimiter"]=function(e,t){e[this.name].opt["year-suffix-delimiter"]=t},d.Attributes["@after-collapse-delimiter"]=function(e,t){e[this.name].opt["after-collapse-delimiter"]=t},d.Attributes["@subsequent-author-substitute"]=function(e,t){e[this.name].opt["subsequent-author-substitute"]=t},d.Attributes["@subsequent-author-substitute-rule"]=function(e,t){e[this.name].opt["subsequent-author-substitute-rule"]=t},d.Attributes["@disambiguate-add-names"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-names"]=!0)},d.Attributes["@disambiguate-add-givenname"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-givenname"]=!0)},d.Attributes["@disambiguate-add-year-suffix"]=function(e,t){"true"===t&&"numeric"!==e.opt.xclass&&(e.opt["disambiguate-add-year-suffix"]=!0)},d.Attributes["@second-field-align"]=function(e,t){"flush"!==t&&"margin"!==t||(e[this.name].opt["second-field-align"]=t)},d.Attributes["@hanging-indent"]=function(e,t){"true"===t&&(e.opt.development_extensions.hanging_indent_legacy_number?e[this.name].opt.hangingindent=2:e[this.name].opt.hangingindent=!0)},d.Attributes["@line-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["line-spacing"]=parseFloat(t,10))},d.Attributes["@entry-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["entry-spacing"]=parseFloat(t,10))},d.Attributes["@near-note-distance"]=function(e,t){e[this.name].opt["near-note-distance"]=parseInt(t,10)},d.Attributes["@substring"]=function(e,t){this.substring=parseInt(t,10)},d.Attributes["@text-case"]=function(e,t){this.execs.push(function(e,r){"normal"===t?this.text_case_normal=!0:(this.strings["text-case"]=t,"title"===t&&r.jurisdiction&&(this.strings["text-case"]="passthrough"))})},d.Attributes["@page-range-format"]=function(e,t){e.opt["page-range-format"]=t},d.Attributes["@year-range-format"]=function(e,t){e.opt["year-range-format"]=t},d.Attributes["@default-locale"]=function(e,t){if("style"===this.name){var r,i,n,o,s;if(s=t.match(/-x-(sort|translit|translat)-/g))for(n=0,i=s.length;n<i;n+=1)s[n]=s[n].replace(/^-x-/,"").replace(/-$/,"");for(o=[(r=t.split(/-x-(?:sort|translit|translat)-/))[0]],n=1,i=r.length;n<i;n+=1)o.push(s[n-1]),o.push(r[n]);for(i=(r=o.slice()).length,n=1;n<i;n+=2)e.opt["locale-"+r[n]].push(r[n+1].replace(/^\s*/g,"").replace(/\s*$/g,""));r.length?e.opt["default-locale"]=r.slice(0,1):e.opt["default-locale"]=["en"]}else"true"===t&&(this.default_locale=!0)},d.Attributes["@default-locale-sort"]=function(e,t){e.opt["default-locale-sort"]=t},d.Attributes["@demote-non-dropping-particle"]=function(e,t){e.opt["demote-non-dropping-particle"]=t},d.Attributes["@initialize-with-hyphen"]=function(e,t){"false"===t&&(e.opt["initialize-with-hyphen"]=!1)},d.Attributes["@institution-parts"]=function(e,t){this.strings["institution-parts"]=t},d.Attributes["@if-short"]=function(e,t){"true"===t&&(this.strings["if-short"]=!0)},d.Attributes["@substitute-use-first"]=function(e,t){this.strings["substitute-use-first"]=parseInt(t,10)},d.Attributes["@use-first"]=function(e,t){this.strings["use-first"]=parseInt(t,10)},d.Attributes["@use-last"]=function(e,t){this.strings["use-last"]=parseInt(t,10)},d.Attributes["@stop-first"]=function(e,t){this.strings["stop-first"]=parseInt(t,10)},d.Attributes["@stop-last"]=function(e,t){this.strings["stop-last"]=-1*parseInt(t,10)},d.Attributes["@reverse-order"]=function(e,t){"true"===t&&(this.strings["reverse-order"]=!0)},d.Attributes["@display"]=function(e,t){2===e.bibliography.tokens.length&&(e.opt.using_display=!0),this.strings.cls=t},d.Stack=function(e,t){this.mystack=[],(t||e)&&this.mystack.push(e),this.tip=this.mystack[0]},d.Stack.prototype.push=function(e,t){t||e?this.mystack.push(e):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},d.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},d.Stack.prototype.replace=function(e,t){0===this.mystack.length&&d.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+e),this.mystack[this.mystack.length-1]=t||e?e:"",this.tip=this.mystack[this.mystack.length-1]},d.Stack.prototype.pop=function(){var e=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},e},d.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},d.Stack.prototype.length=function(){return this.mystack.length},d.Parallel=function(e){this.state=e},d.Parallel.prototype.StartCitation=function(e,t){if(this.state.tmp.suppress_repeats=[],!(e.length<2)){for(var r=0,i=!1,n=[],o=0,s=e.length-1;o<s;o++){var a=e[o][0],l=e[o+1][0],c=!1,u={};if(e[o][0].seeAlso&&e[o][0].seeAlso.length>0&&!i){c=!0;var d=(i=[e[o][0].id].concat(e[o][0].seeAlso)).slice(),m=e.slice(o);m[0][1].parallel="first";for(var p=0,h=m.length;p<h;p++){var f=m[p][0].id,g=d.indexOf(f);if(r=!1,-1===g?r=o+p-1:o+p===e.length-1&&(r=o+p),r){n.push([o,r]);break}d=d.slice(0,g).concat(d.slice(g+1))}}for(var v in o>0&&c&&(this.state.tmp.suppress_repeats[o-1].START=!0,c=!1),this.state.opt.track_repeat)if(a[v]&&l[v])if("string"==typeof l[v]||"number"==typeof l[v]){if("title"===v&&a["title-short"]&&l["title-short"])var b=a["title-short"],y=l["title-short"];else b=a[v],y=l[v];u[v]=b==y}else if(void 0===a[v].length){u[v]=!1;var _=a[v].year,x=l[v].year;_&&x&&_==x&&(u[v]=!0)}else b=JSON.stringify(a[v]),y=JSON.stringify(l[v]),u[v]=b===y;else u[v]=!1;i||(u.ORPHAN=!0),r===o&&(u.END=!0,i=!1),this.state.tmp.suppress_repeats.push(u)}for(p=0,h=n.length;p<h;p++){var w=e[n[p][0]][0].id;this.state.registry.registry[w].master=!0,this.state.registry.registry[w].siblings=[];for(var C=n[p][0],k=n[p][1],T=C;T<k;T++){this.state.tmp.suppress_repeats[T].SIBLING=!0;var E=e[T+1][0].id;e[T+1][1].parallel="other",this.state.registry.registry[w].siblings.push(E)}}}},d.Parallel.prototype.checkRepeats=function(e){var t=this.state.tmp.cite_index;if(this.state.tmp.suppress_repeats){if(e.parallel_first&&Object.keys(e.parallel_first).length>0){var r=[{}].concat(this.state.tmp.suppress_repeats),i=!0;for(var n in e.parallel_first)r[t][n]&&!r[t].START||(i=!1);return i}if(e.parallel_last&&Object.keys(e.parallel_last).length>0){for(var n in r=this.state.tmp.suppress_repeats.concat([{}]),i=Object.keys(e.parallel_last).length>0,e.parallel_last)r[t][n]&&!r[t].END||(i=!1);return i}if(e.non_parallel&&Object.keys(e.non_parallel).length>0){for(var n in r=[{}].concat(this.state.tmp.suppress_repeats),i=!0,e.non_parallel)r[t][n]||(i=!1);return i}}return!1},d.Util={},d.Util.Match=function(){this.any=function(e,t,r){return function(e,t){for(var i=0,n=r.length;i<n;i+=1)if(r[i](e,t))return!0;return!1}},this.none=function(e,t,r){return function(e,t){for(var i=0,n=r.length;i<n;i+=1)if(r[i](e,t))return!1;return!0}},this.all=function(e,t,r){return function(e,t){for(var i=0,n=r.length;i<n;i+=1)if(!r[i](e,t))return!1;return!0}},this[void 0]=this.all,this.nand=function(e,t,r){return function(e,t){for(var i=0,n=r.length;i<n;i+=1)if(!r[i](e,t))return!0;return!1}}},d.Transform=function(e){function t(t,r,i){var n="";return e.sys.getHumanForm&&("country"===t?n=(n=e.sys.getHumanForm(r.toLowerCase(),!1,!0)).split("|")[0]:"jurisdiction"===t&&(n=e.sys.getHumanForm(r.toLowerCase(),!1,!0),n=i?"":n.split("|").slice(1).join(", "))),n}function r(e,r,i,n,o,s,a){var l,c="",u=d.FIELD_CATEGORY_REMAP[s];if(!u)return o;var m=s,p=o;e.sys.normalizeAbbrevsKey&&(p=e.sys.normalizeAbbrevsKey(s,o));var h=!1;if("jurisdiction"===m&&p&&(h=-1===p.indexOf(":")),["jurisdiction","country"].indexOf(s)>-1&&o===o.toLowerCase()&&(p=o.toUpperCase()),e.sys.getAbbreviation){l=["jurisdiction","country","language-name","language-name-original"].indexOf(m)>-1?"default":i.jurisdiction?i.jurisdiction:"default";var f=e.transform.loadAbbreviation(l,u,p,i.language);if(e.transform.abbrevs[f][u]&&p){var g=e.transform.abbrevs[f][u][p];c="short"===r.strings.form&&g?h?"":g:t(m,p,h)}}return c||e.opt.development_extensions.require_explicit_legal_case_title_short&&"legal_case"===i.type||!n||!i[n]||!a||(c=i[n]),c||e.sys.getAbbreviation||!e.sys.getHumanForm||(c=t(m,p,h)),c||h||e.sys.getHumanForm&&"jurisdiction"===m||(c=o),e.opt.development_extensions.force_title_abbrev_fallback&&"title"===m&&c===o&&i["title-short"]&&(c=i["title-short"]),c}function i(t,r){var i,n=e.opt["default-locale"][0].slice(0,2);if(i=e.opt.development_extensions.strict_text_case_locales?new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),t.language){var o=(""+t.language).match(i);n=o?o[1]:"tlh"}return t.multi&&t.multi&&t.multi.main&&t.multi.main[r]&&(n=t.multi.main[r]),e.opt.development_extensions.strict_text_case_locales&&!e.opt.development_extensions.normalize_lang_keys_to_lowercase||(n=n.toLowerCase()),n}function n(t,r,n,o,s,a){var l,c,u,m,p=s,h=!1;if(!t[r])return{name:"",usedOrig:s,token:d.Util.cloneToken(this)};var f=!1;d.VARIABLES_WITH_SHORT_FORM.indexOf(r)>-1&&a&&(r+="-short",f=!0);var g=!1,v=null,b=[];"-short"===r.slice(-6)?(b.push(r),b.push(r.slice(0,-6))):b.push(r);for(var y=0,_=b.length;y<_;y++){var x=!1;u={name:"",usedOrig:s,locale:i(t,r=b[y])},m=e.opt[n]?e.opt[n].slice():[];var w=!1;if("locale-orig"===n?(s||(u.name=t[r],u.usedOrig=!1),w=!0,h=!0):!o||void 0!==m&&0!==m.length||(u.name=t[r],u.usedOrig=!0,w=!0,h=!0),!w){for(var C=0,k=m.length;C<k;C+=1){if(c=(l=m[C]).split(/[\-_]/)[0],l&&t.multi&&t.multi._keys[r]&&t.multi._keys[r][l]){u.name=t.multi._keys[r][l],u.locale=l,w=!0,x=!0,h=!1;break}if(c&&t.multi&&t.multi._keys[r]&&t.multi._keys[r][c]){u.name=t.multi._keys[r][c],u.locale=c,w=!0,x=!0,h=!1;break}}!u.name&&o&&(u={name:t[r],usedOrig:!0,locale:i(t,r)},h=!0)}if(u.token=d.Util.cloneToken(this),0===y?(x&&(u.found_variant_ok=!0),v=u,f||void 0!==m&&0!==m.length||(g=!0),x&&(g=!0)):f||x||!v?x&&(u.found_variant_ok=!0):(u=v,r=b[0]),["title","container-title"].indexOf(r)>-1&&!(p||u.token.strings["text-case"]&&"sentence"!==u.token.strings["text-case"]&&"normal"!==u.token.strings["text-case"])){var T;e.opt.lang,T=!h&&u.locale;var E=r.slice(0,-5),S="sentence"===u.token.strings["text-case"];u.name=d.titlecaseSentenceOrNormal(e,t,E,T,S),delete u.token.strings["text-case"]}if(g)break}return u}function o(t,i,n,o){var s=t.variables[0];if(e.publisherOutput&&n){if(-1===["publisher","publisher-place"].indexOf(s))return!1;e.publisherOutput[s+"-token"]=t,e.publisherOutput.varlist.push(s);var a=n.split(/;\s*/);a.length===e.publisherOutput[s+"-list"].length&&(e.publisherOutput[s+"-list"]=a);for(var l=0,c=a.length;l<c;l+=1)a[l]=r(e,t,i,!1,a[l],o,!0);return e.tmp[s+"-token"]=t,!0}return!1}function s(t,r){var i=r.match(/^(?:#[0-9]+)*(?:!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*))*>>>/);if(i&&(r=r.slice(i[0].length),i[1]))for(var n=i[1].split(","),o=0,s=n.length;o<s;o+=1){var a=n[o].match(/^([-_a-z]+)(?:\:(.*))*$/),l=a[1],c=e.tmp.abbrev_trimmer;a[2]?c&&t&&(c[t]||(c[t]={}),c[t][l]=a[2]):-1===e.tmp.done_vars.indexOf(l)&&(c&&t&&(c.QUASHES[t]||(c.QUASHES[t]={}),c.QUASHES[t][l]=!0),e.tmp.done_vars.push(l))}return r}this.abbrevs={},this.abbrevs.default=new e.sys.AbbreviationSegments,this.getTextSubField=n,this.loadAbbreviation=function(t,r,i,n){t||(t="default");var o=t.split(":")[0],s=d.getAbbrevsDomain(e,o,n);return s&&(t+="@"+s),i?(e.sys.getAbbreviation&&((t=e.sys.getAbbreviation(e.opt.styleID,e.transform.abbrevs,t,r,i))||(t="default",s&&(t+="@"+s))),t):(e.transform.abbrevs[t]||(e.transform.abbrevs[t]=new e.sys.AbbreviationSegments),e.transform.abbrevs[t][r]||(e.transform.abbrevs[t][r]={}),t)},this.quashCheck=s,this.getOutputFunction=function(t,i,a,l){var c,u=d.LangPrefsMap[t[0]];return c=!!u&&e.opt["cite-lang-prefs"][u],function(e,a,m){var p,h,f,g,v,b;if(!t[0]||!a[t[0]]&&!a[l])return null;if(!e.tmp.just_looking&&m&&m["suppress-author"]&&!e.tmp.probably_rendered_something&&e.tmp.can_substitute.length()>1)return null;var y={primary:!1,secondary:!1,tertiary:!1};if("_sort"===e.tmp.area.slice(-5))y.primary="locale-sort";else if(c&&1===c.length&&"locale-orig"===c[0])y.primary="locale-orig",c=!1;else if(c&&!e.tmp.multi_layout)for(var _=["primary","secondary","tertiary"],x=0,w=_.length;x<w&&!(c.length-1<x);x+=1)c[x]&&(y[_[x]]="locale-"+c[x]);else y.primary="locale-orig";if("title-short"!==t[0]&&("bibliography"===e.tmp.area||"citation"===e.tmp.area&&"note"===e.opt.xclass&&m&&!m.position)||(y.secondary=!1,y.tertiary=!1),e.tmp.multi_layout&&(y.secondary=!1,y.tertiary=!1),e.tmp["publisher-list"])return"publisher"===t[0]?e.tmp["publisher-token"]=this:"publisher-place"===t[0]&&(e.tmp["publisher-place-token"]=this),null;var C=e.tmp.lang_array.slice(),k=n.call(this,a,t[0],y.primary,!0,null,i);p=k.name,h=k.locale;var T,E,S,I=k.token,A=k.usedOrig;if(i&&!k.found_variant_ok&&(p=r(e,I,a,l,p,i,!0))&&(function(e,t){var r=t.match(/^#([0-9]+).*>>>/);r&&r[1]&&(e["cite-form"]=r[1])}(a,p),e.tmp.just_looking||(p=s(a.jurisdiction,p))),o(this,a,p,i))return e.tmp.lang_array=C,null;if(f=!1,v=!1,y.secondary&&(f=(k=n.call(this,a,t[0],y.secondary,!1,k.usedOrig,null,i)).name,g=k.locale,T=k.token,i&&!k.found_variant_ok&&f&&(f=r(e,T,a,!1,f,i,!0))),y.tertiary&&(v=(k=n.call(this,a,t[0],y.tertiary,!1,k.usedOrig,null,i)).name,b=k.locale,E=k.token,i&&!k.found_variant_ok&&v&&(v=r(e,E,a,!1,v,i,!0))),"locale-translit"===y.primary&&(S=e.opt.citeAffixes[u][y.primary].prefix),"<i>"===S&&"title"===t[0]&&!A){var O=!1;for(x=0,w=I.decorations.length;x<w;x+=1)"@font-style"===I.decorations[x][0]&&"italic"===I.decorations[x][1]&&(O=!0);O||I.decorations.push(["@font-style","italic"])}if("en"!==h&&"title"===I.strings["text-case"]&&(I.strings["text-case"]="passthrough"),"title"===t[0]&&(p=d.demoteNoiseWords(e,p,this["leading-noise-words"])),f||v){if(e.output.openLevel("empty"),I.strings.suffix=I.strings.suffix.replace(/[ .,]+$/,""),h&&(e.tmp.lang_array=[h].concat(C)),d.UPDATE_GROUP_CONTEXT_CONDITION(e,null,null,I,I.strings.prefix+p),e.output.append(p,I),e.tmp.probably_rendered_something=!0,p===f&&(f=!1),f){for(T.strings.prefix=e.opt.citeAffixes[u][y.secondary].prefix,T.strings.suffix=e.opt.citeAffixes[u][y.secondary].suffix,T.strings.prefix||(T.strings.prefix=" "),x=T.decorations.length-1;x>-1;x+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(T.decorations[x].join("/"))>-1&&(T.decorations=T.decorations.slice(0,x).concat(T.decorations.slice(x+1)));"en"!==g&&"title"===T.strings["text-case"]&&(T.strings["text-case"]="passthrough"),g&&(e.tmp.lang_array=[g].concat(C));var N=new d.Token;N.decorations.push(["@font-style","normal"]),N.decorations.push(["@font-weight","normal"]),e.output.openLevel(N),e.output.append(f,T),e.output.closeLevel(),e.output.current.value(),e.output.current.value().blobs.length}if(p===v&&(v=!1),v){for(E.strings.prefix=e.opt.citeAffixes[u][y.tertiary].prefix,E.strings.suffix=e.opt.citeAffixes[u][y.tertiary].suffix,E.strings.prefix||(E.strings.prefix=" "),x=E.decorations.length-1;x>-1;x+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(E.decorations[x].join("/"))>-1&&(E.decorations=E.decorations.slice(0,x).concat(E.decorations.slice(x+1)));"en"!==b&&"title"===E.strings["text-case"]&&(E.strings["text-case"]="passthrough"),b&&(e.tmp.lang_array=[b].concat(C));var R=new d.Token;R.decorations.push(["@font-style","normal"]),R.decorations.push(["@font-weight","normal"]),e.output.openLevel(R),e.output.append(v,E),e.output.closeLevel(),e.output.current.value(),e.output.current.value().blobs.length}e.output.closeLevel()}else h&&(e.tmp.lang_array=[h].concat(C)),d.UPDATE_GROUP_CONTEXT_CONDITION(e,null,null,I,I.strings.prefix+p),e.output.append(p,I),e.tmp.probably_rendered_something=!0;return e.tmp.lang_array=C,e.tmp.can_block_substitute&&e.tmp.name_node.children.push(e.output.current.value()),null}}},d.Token=function(e,t,r){this.name=e,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=t},d.Util.cloneToken=function(e){var t,r,i;if("string"==typeof e)return e;for(var n in t=new d.Token(e.name,e.tokentype),e.strings)e.strings.hasOwnProperty(n)&&(t.strings[n]=e.strings[n]);if(e.decorations)for(t.decorations=[],r=0,i=e.decorations.length;r<i;r+=1)t.decorations.push(e.decorations[r].slice());return e.variables&&(t.variables=e.variables.slice()),e.execs&&(t.execs=e.execs.slice(),e.tests&&(t.tests=e.tests.slice())),t},d.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},d.Blob=function(e,t,r){var i,n;if(this.levelname=r,t){for(var o in this.strings={prefix:"",suffix:""},t.strings)t.strings.hasOwnProperty(o)&&(this.strings[o]=t.strings[o]);for(this.decorations=[],i=void 0===t.decorations?0:t.decorations.length,n=0;n<i;n+=1)this.decorations.push(t.decorations[n].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];this.blobs="string"==typeof e?e:e?[e]:[],this.alldecor=[this.decorations]},d.Blob.prototype.push=function(e){"string"==typeof this.blobs?d.error("Attempt to push blob onto string object"):!1!==e&&(e.alldecor=e.alldecor.concat(this.alldecor),this.blobs.push(e))},d.NumericBlob=function(e,t,r,i,n){if(this.id=n,this.alldecor=[],this.num=r,this.particle=t,this.blobs=r.toString(),this.status=d.START,this.strings={},i){if(i.strings["text-case"]){var o=i.strings["text-case"];this.particle=d.Output.Formatters[o](e,this.particle),this.blobs=d.Output.Formatters[o](e,this.blobs)}this.gender=i.gender,this.decorations=i.decorations,this.strings.prefix=i.strings.prefix,this.strings.suffix=i.strings.suffix,this.strings["text-case"]=i.strings["text-case"],this.successor_prefix=i.successor_prefix,this.range_prefix=i.range_prefix,this.splice_prefix=i.splice_prefix,this.formatter=i.formatter,this.formatter||(this.formatter=new d.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))}else this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new d.Output.DefaultFormatter},d.NumericBlob.prototype.setFormatter=function(e){this.formatter=e,this.type=this.formatter.format(1)},d.Output.DefaultFormatter=function(){},d.Output.DefaultFormatter.prototype.format=function(e){return e.toString()},d.NumericBlob.prototype.checkNext=function(e,t){t?(this.status=d.START,"object"==typeof e&&(e.num===this.num+1?e.status=d.SUCCESSOR:e.status=d.SEEN)):e&&e.num&&this.type===e.type&&e.num===this.num+1?this.status===d.START||this.status===d.SEEN?e.status=d.SUCCESSOR:this.status!==d.SUCCESSOR&&this.status!==d.SUCCESSOR_OF_SUCCESSOR||(this.range_prefix?(e.status=d.SUCCESSOR_OF_SUCCESSOR,this.status=d.SUPPRESS):e.status=d.SUCCESSOR):(this.status===d.SUCCESSOR_OF_SUCCESSOR&&(this.status=d.END),"object"==typeof e&&(e.status=d.SEEN))},d.NumericBlob.prototype.checkLast=function(e){return(this.status===d.SEEN||e.num!==this.num-1&&this.status===d.SUCCESSOR)&&(this.status=d.SUCCESSOR,!0)},d.Util.fixDateNode=function(e,t,r){var i,n,o,s,a,l,c,u,d,m,p,h,f,g=this.cslXml.getAttributeValue(r,"lingo"),v=this.cslXml.getAttributeValue(r,"default-locale");if(this.build.date_key=!0,i=this.cslXml.getAttributeValue(r,"form"),g=v?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(r,"lingo"),!this.getDate(i,v))return e;var b=this.cslXml.getAttributeValue(r,"date-parts");for(var y in n=this.cslXml.getAttributeValue(r,"variable"),u=this.cslXml.getAttributeValue(r,"prefix"),d=this.cslXml.getAttributeValue(r,"suffix"),h=this.cslXml.getAttributeValue(r,"display"),f=this.cslXml.getAttributeValue(r,"cslid"),o=this.cslXml.nodeCopy(this.getDate(i,v)),this.cslXml.setAttribute(o,"lingo",this.opt.lang),this.cslXml.setAttribute(o,"form",i),this.cslXml.setAttribute(o,"date-parts",b),this.cslXml.setAttribute(o,"cslid",f),this.cslXml.setAttribute(o,"variable",n),this.cslXml.setAttribute(o,"default-locale",v),u&&this.cslXml.setAttribute(o,"prefix",u),d&&this.cslXml.setAttribute(o,"suffix",d),h&&this.cslXml.setAttribute(o,"display",h),m=this.cslXml.children(o))s=m[y],"date-part"===this.cslXml.nodename(s)&&(a=this.cslXml.getAttributeValue(s,"name"),v&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(o,"date-part",a,"@default-locale","true"));for(var y in m=this.cslXml.children(r))if(s=m[y],"date-part"===this.cslXml.nodename(s))for(l in a=this.cslXml.getAttributeValue(s,"name"),p=this.cslXml.attributes(s))"@name"!==l&&(g&&g!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(l)>-1||(c=p[l],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(o,"date-part",a,l,c)));if("year"===this.cslXml.getAttributeValue(r,"date-parts"))this.cslXml.deleteNodeByNameAttribute(o,"month"),this.cslXml.deleteNodeByNameAttribute(o,"day");else if("year-month"===this.cslXml.getAttributeValue(r,"date-parts"))this.cslXml.deleteNodeByNameAttribute(o,"day");else if("month-day"===this.cslXml.getAttributeValue(r,"date-parts")){for(var _=this.cslXml.children(o),x=1,w=this.cslXml.numberofnodes(_);x<w;x++)if("year"===this.cslXml.getAttributeValue(_[x],"name")){this.cslXml.setAttribute(_[x-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(o,"year")}return this.cslXml.insertChildNodeAfter(e,r,t,o)},d.dateMacroAsSortKey=function(e,t){d.dateAsSortKey.call(this,e,t,!0)},d.dateAsSortKey=function(e,t,r){var i,n,o,s,a,l,c,u=this.variables[0],m="empty";if(r&&e.tmp.extension&&(m="macro-with-date"),void 0===(i=t[u])&&(i={"date-parts":[[0]]}),void 0===this.dateparts&&(this.dateparts=["year","month","day"]),i.raw?i=e.fun.dateparser.parseDateToArray(i.raw):i["date-parts"]&&(i=e.dateParseArray(i)),void 0===i&&(i={}),i.year)for(l=0,c=d.DATE_PARTS_INTERNAL.length;l<c;l+=1)if(o=0,"_end"===(s=n=d.DATE_PARTS_INTERNAL[l]).slice(-4)&&(s=s.slice(0,-4)),i[n]&&this.dateparts.indexOf(s)>-1&&(o=i[n]),"year"===n.slice(0,4)){var p="1";"-"===(a=d.Util.Dates[s].numeric(e,o))[0]&&(p="0",a=a.slice(1),a=9999-parseInt(a,10)),e.output.append(d.Util.Dates[n.slice(0,4)].numeric(e,p+a),m)}else(o=d.Util.Dates[s]["numeric-leading-zeros"](e,o))||(o="00"),e.output.append(o,m)},d.Engine.prototype.dateParseArray=function(e){var t,r,i,n;for(r in t={},e)if("date-parts"===r){(i=e["date-parts"]).length>1&&i[0].length!==i[1].length&&d.error("CSL data error: element mismatch in date range input."),n=["","_end"];for(var o=0,s=i.length;o<s;o+=1)for(var a=0,l=d.DATE_PARTS.length;a<l;a+=1)isNaN(parseInt(i[o][a],10))?t[d.DATE_PARTS[a]+n[o]]=void 0:t[d.DATE_PARTS[a]+n[o]]=parseInt(i[o][a],10)}else e.hasOwnProperty(r)&&("literal"===r&&"object"==typeof e.literal&&"string"==typeof e.literal.part?(d.debug("Warning: fixing up weird literal date value"),t.literal=e.literal.part):t[r]=e[r]);return t},d.Util.Names={},d.Util.Names.compareNamesets=d.NameOutput.prototype._compareNamesets,d.Util.Names.unInitialize=function(e,t){var r,i,n,o,s;if(!t)return"";for(n=t.split(/(?:\-|\s+)/),o=t.match(/(\-|\s+)/g),s="",r=0,i=n.length;r<i;r+=1)s+=n[r],r<i-1&&(s+=o[r]);return s},d.Util.Names.initializeWith=function(e,t,r,i){var n;if(!t)return"";if(r||(r=""),["Lord","Lady"].indexOf(t)>-1||!t.replace(/^(?:<[^>]+>)*/,"").match(d.STARTSWITH_ROMANESQUE_REGEXP)&&!r.match("%s"))return t;!1===e.opt["initialize-with-hyphen"]&&(t=t.replace(/\-/g," "));for(var o=(t=(t=t.replace(/\s*\-\s*/g,"-").replace(/\s+/g," ")).replace(/-([a-z])/g,"–$1")).length-2;o>-1;o+=-1)"."===t.slice(o,o+1)&&" "!==t.slice(o+1,o+2)&&(t=t.slice(0,o)+". "+t.slice(o+1));var s=d.Output.Formatters.nameDoppel.split(t),a=[];if(a=[s.strings[0]],0===s.tags.length){var l=a[0].match(/[^\.]+$/);l&&1===l[0].length&&l[0]!==l[0].toLowerCase()&&(a[0]+=".")}for(o=1,n=s.strings.length;o<n;o+=1)a.push(s.tags[o-1]),a.push(s.strings[o]);return(i?this.doNormalize(e,a,r):this.doInitialize(e,a,r)).replace(/\u2013([a-z])/g,"-$1")},d.Util.Names.notag=function(e){return e.replace(/^(?:<[^>]+>)*/,"")},d.Util.Names.mergetag=function(e,t,r){var i=t.match(/(?:-*<[^>]+>-*)/g);return i?(t=i.join(""),(i=r.match(/^(.*[^\s])*(\s+)$/))?(i[1]=i[1]?i[1]:"",r=i[1]+t+i[2]):r+=t,r):r},d.Util.Names.tagonly=function(e,t){var r=t.match(/(?:<[^>]+>)+/);return r?r.join(""):t},d.Util.Names.doNormalize=function(e,t,r){var i,n;r=r||"";var o=[];for(i=0,n=t.length;i<n;i+=1)this.notag(t[i]).length>1&&"."===this.notag(t[i]).slice(-1)?(t[i]=t[i].replace(/^(.*)\.(.*)$/,"$1$2"),o.push(!0)):1===t[i].length&&t[i].toUpperCase()===t[i]?o.push(!0):o.push(!1);for(i=0,n=t.length;i<n;i+=2)o[i]&&(i<t.length-2&&(t[i+1]=this.tagonly(e,t[i+1]),o[i+2]||(t[i+1]=this.tagonly(e,t[i+1])+" "),t[i+2].length>1?t[i+1]=r.replace(/\ufeff$/,"")+t[i+1]:t[i+1]=this.mergetag(e,t[i+1],r)),i===t.length-1&&(t[i]=t[i]+r));return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},d.Util.Names.doInitialize=function(e,t,r){var i,n,o,s,a,l,c;for(i=0,n=t.length;i<n;i+=2)if(c=t[i])if(!(o=c.match(d.NAME_INITIAL_REGEXP))&&!c.match(d.STARTSWITH_ROMANESQUE_REGEXP)&&c.length>1&&r.match("%s")&&(o=c.match(/(.)(.*)/)),o&&o[2]&&o[3]&&(o[1]=o[1]+o[2],o[2]=""),o&&o[1].slice(0,1)===o[1].slice(0,1).toUpperCase()){var u="";if(o[2]){var m="";for(s=0,a=(l=o[2].split("")).length;s<a;s+=1){var p=l[s];if(p!==p.toUpperCase())break;m+=p}m.length<o[2].length&&(u=d.toLocaleLowerCase.call(e,m))}t[i]=o[1]+u,i<n-1?r.match("%s")?t[i]=r.replace("%s",t[i]):t[i+1].indexOf("-")>-1?t[i+1]=this.mergetag(e,t[i+1].replace("-",""),r)+"-":t[i+1]=this.mergetag(e,t[i+1],r):r.match("%s")?t[i]=r.replace("%s",t[i]):t.push(r)}else!c.match(d.ROMANESQUE_REGEXP)||o&&o[3]||(t[i]=" "+c);var h=t.join("");return h.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},d.Util.Names.getRawName=function(e){var t=[];return e.literal?t.push(e.literal):(e.given&&t.push(e.given),e.family&&t.push(e.family)),t.join(" ")},d.Util.Dates={},d.Util.Dates.year={},d.Util.Dates.year.long=function(e,t){return t||(t="boolean"==typeof t?"":0),t.toString()},d.Util.Dates.year.imperial=function(e,t,r){var i="";t||(t="boolean"==typeof t?"":0),r=r?"_end":"";var n=e.tmp.date_object["month"+r];for(n=n?""+n:"1";n.length<2;)n="0"+n;var o=e.tmp.date_object["day"+r];for(o=o?""+o:"1";o.length<2;)o="0"+o;var s,a,l=parseInt(t+n+o,10);if(l>=18680908&&l<19120730?(s="明治",a=1867):l>=19120730&&l<19261225?(s="大正",a=1911):l>=19261225&&l<19890108?(s="昭和",a=1925):l>=19890108&&(s="平成",a=1988),s&&a){var c=s;e.sys.normalizeAbbrevsKey&&(c=e.sys.normalizeAbbrevsKey("number",s)),e.transform.abbrevs.default.number[c]||e.transform.loadAbbreviation("default","number",c,null),e.transform.abbrevs.default.number[c]&&(s=e.transform.abbrevs.default.number[c]),i=s+(t-a)}return i},d.Util.Dates.year.short=function(e,t){if((t=t.toString())&&4===t.length)return t.substr(2)},d.Util.Dates.year.numeric=function(e,t){var r,i;for((i=(t=""+t).match(/([0-9]*)$/))?(r=t.slice(0,-1*i[1].length),t=i[1]):(r=t,t="");t.length<4;)t="0"+t;return r+t},d.Util.Dates.normalizeMonth=function(e,t){var r;if(e||(e=0),(e=""+e).match(/^[0-9]+$/)||(e=0),e=parseInt(e,10),t){var i={stub:"month-",num:e};if(i.num<1||i.num>24)i.num=0;else{for(;i.num>16;)i.num=i.num-4;i.num>12&&(i.stub="season-",i.num=i.num-12)}r=i}else(e<1||e>12)&&(e=0),r=e;return r},d.Util.Dates.month={},d.Util.Dates.month.numeric=function(e,t){return(t=d.Util.Dates.normalizeMonth(t))||(t=""),t},d.Util.Dates.month["numeric-leading-zeros"]=function(e,t){if(t=d.Util.Dates.normalizeMonth(t))for(t=""+t;t.length<2;)t="0"+t;else t="";return t},d.Util.Dates.month.long=function(e,t,r,i){var n=d.Util.Dates.normalizeMonth(t,!0);if(t=n.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(n.stub+t,"long",0,0,!1,i)}else t="";return t},d.Util.Dates.month.short=function(e,t,r,i){var n=d.Util.Dates.normalizeMonth(t,!0);if(t=n.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(n.stub+t,"short",0,0,!1,i)}else t="";return t},d.Util.Dates.day={},d.Util.Dates.day.numeric=function(e,t){return t.toString()},d.Util.Dates.day.long=d.Util.Dates.day.numeric,d.Util.Dates.day["numeric-leading-zeros"]=function(e,t){for(t||(t=0),t=t.toString();t.length<2;)t="0"+t;return t.toString()},d.Util.Dates.day.ordinal=function(e,t,r){return e.fun.ordinalizer.format(t,r)},d.Util.Sort={},d.Util.Sort.strip_prepositions=function(e){var t;return"string"==typeof e&&(t=e.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\s+)/)),t&&(e=e.substr(t[1].length)),e},d.Util.substituteStart=function(e,t){var r,i,n,o,s,a,l;o=function(e,t,r){for(var i=0,n=this.decorations.length;i<n;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){e.tmp.strip_periods+=1;break}},this.execs.push(o),this.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),l=["number","date","names"],("text"===this.name&&!this.postponed_macro||l.indexOf(this.name)>-1)&&(r=function(e,t,r){"author"===e.tmp.element_trace.value()||"names"===this.name?(!e.tmp.just_looking&&r&&r["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"),!e.tmp.just_looking&&r&&r["suppress-author"]&&(e.tmp.probably_rendered_something||e.tmp.element_trace.push("suppress-me"))):"date"===this.name?!e.tmp.just_looking&&r&&r["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"):!e.tmp.just_looking&&r&&r["author-only"]&&"intext"!==e.tmp.area?!e.tmp.probably_rendered_something&&e.tmp.can_block_substitute||e.tmp.element_trace.push("suppress-me"):r&&r["suppress-author"]&&e.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(r)),i=this.strings.cls,this.strings.cls=!1,0===e.build.render_nesting_level&&("bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]?((n=new d.Token("group",d.START)).decorations=[["@display","left-margin"]],o=function(e,t){e.tmp.render_seen||(n.strings.first_blob=t.id,e.output.startTag("bib_first",n))},n.execs.push(o),t.push(n)):d.DISPLAY_CLASSES.indexOf(i)>-1&&((n=new d.Token("group",d.START)).decorations=[["@display",i]],o=function(e,t){n.strings.first_blob=t.id,e.output.startTag("bib_first",n)},n.execs.push(o),t.push(n)),e.build.cls=i),e.build.render_nesting_level+=1,1===e.build.substitute_level.value()&&(s=new d.Token("choose",d.START),d.Node.choose.build.call(s,e,t),o=function(){return!!e.tmp.can_substitute.value()},(a=new d.Token("if",d.START)).tests||(a.tests=[]),a.tests.push(o),a.test=e.fun.match.any(this,e,a.tests),t.push(a)),e.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(o=function(e,t,r){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){var i=new d.Token("text",d.START);i.decorations=[["@showid","true"]],e.output.startTag("variable_entry",i);var n=null;r&&(n=r.position),n||(n=0);var o=0;r&&r.noteIndex&&(o=r.noteIndex);var s=0;r&&r["first-reference-note-number"]&&(s=r["first-reference-note-number"]);var a=0;r&&r["first-container-reference-note-number"]&&(a=r["first-container-reference-note-number"]);var l=0;r&&r["citation-number"]&&(l=r["citation-number"]);var c=0;r&&r.index&&(c=r.index);var u={itemData:t,variableNames:this.variables,context:e.tmp.area,xclass:e.opt.xclass,position:["first","container-subsequent","subsequent","ibid","ibid-with-locator"][n],"note-number":o,"first-reference-note-number":s,"first-container-reference-note-number":a,"citation-number":l,index:c,mode:e.opt.mode};e.output.current.value().params=u}},this.execs.push(o))},d.Util.substituteEnd=function(e,t){var r,i,n,o,s,a;if(e.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(r=function(e){e.tmp.just_looking||e.tmp.suppress_decorations||e.output.endTag("variable_entry")},this.execs.push(r)),r=function(e){for(var t=0,r=this.decorations.length;t<r;t+=1)if("@strip-periods"===this.decorations[t][0]&&"true"===this.decorations[t][1]){e.tmp.strip_periods+=-1;break}},this.execs.push(r),e.build.render_nesting_level+=-1,0===e.build.render_nesting_level&&(e.build.cls?(r=function(e){e.output.endTag("bib_first")},this.execs.push(r),e.build.cls=!1):"bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]&&(r=function(e){e.tmp.render_seen||e.output.endTag("bib_first")},(i=new d.Token("group",d.END)).execs.push(r),t.push(i),(n=new d.Token("group",d.START)).decorations=[["@display","right-inline"]],r=function(e){e.tmp.render_seen||(e.tmp.render_seen=!0,e.output.startTag("bib_other",n))},n.execs.push(r),t.push(n))),1===e.build.substitute_level.value()&&(o=new d.Token("if",d.END),t.push(o),s=new d.Token("choose",d.END),d.Node.choose.build.call(s,e,t)),"names"===this.name||"text"===this.name&&"title"!==this.variables_real){new d.Token("text",d.SINGLETON);var l=this.name;r=function(e,t){if("bibliography"===e.tmp.area&&"string"==typeof e.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||t[this.variables_real])&&(!this.variables_real||"names"!==l)){var r,i,n=e.bibliography.opt["subsequent-author-substitute-rule"];if(!e.tmp.suppress_decorations&&e.tmp.subsequent_author_substitute_ok&&e.tmp.rendered_name){if("partial-each"===n||"partial-first"===n){var o=!0,s=[];for(r=0,i=e.tmp.name_node.children.length;r<i;r+=1){var c=e.tmp.rendered_name[r];o&&e.tmp.last_rendered_name&&e.tmp.last_rendered_name.length>r-1&&c&&!c.localeCompare(e.tmp.last_rendered_name[r])?(a=new d.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[r].blobs=[a],"partial-first"===n&&(o=!1)):o=!1,s.push(c)}e.tmp.last_rendered_name=s}else if("complete-each"===n){if(s=e.tmp.rendered_name.join(",")){if(e.tmp.last_rendered_name&&!s.localeCompare(e.tmp.last_rendered_name))for(r=0,i=e.tmp.name_node.children.length;r<i;r+=1)a=new d.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[r].blobs=[a];e.tmp.last_rendered_name=s}}else(s=e.tmp.rendered_name.join(","))&&(e.tmp.last_rendered_name&&!s.localeCompare(e.tmp.last_rendered_name)&&(a=new d.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.label_blob?e.tmp.name_node.top.blobs=[a,e.tmp.label_blob]:e.tmp.name_node.top.blobs.length?e.tmp.name_node.top.blobs[0].blobs=[a]:e.tmp.name_node.top.blobs=[a],e.tmp.substituted_variable=l),e.tmp.last_rendered_name=s);e.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(r)}("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(r=function(e,t){e.tmp.element_trace.mystack.length>1&&e.tmp.element_trace.pop()},this.execs.push(r))},d.Util.padding=function(e){var t=e.match(/\s*(-{0,1}[0-9]+)/);if(t)for((e=parseInt(t[1],10))<0&&(e=1e20+e),e=""+e;e.length<20;)e="0"+e;return e},d.Util.LongOrdinalizer=function(){},d.Util.LongOrdinalizer.prototype.init=function(e){this.state=e},d.Util.LongOrdinalizer.prototype.format=function(e,t){e<10&&(e="0"+e);var r=d.Engine.getField(d.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+e,"long",0,t);return r||(r=this.state.fun.ordinalizer.format(e,t)),this.state.tmp.cite_renders_content=!0,r},d.Util.Ordinalizer=function(e){this.state=e,this.suffixes={}},d.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var e=0;e<3;e+=1){var t=[void 0,"masculine","feminine"][e];this.suffixes[this.state.opt.lang][t]=[];for(var r=1;r<5;r+=1){var i=this.state.getTerm("ordinal-0"+r,"long",!1,t);if(void 0===i){delete this.suffixes[this.state.opt.lang][t];break}this.suffixes[this.state.opt.lang][t].push(i)}}}},d.Util.Ordinalizer.prototype.format=function(e,t){var r;r=""+(e=parseInt(e,10));var i="",n=[];if(t&&n.push(t),n.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){var o;i=this.state.getTerm("ordinal",!1,0,t);for(var s=0,a=n.length;s<a;s+=1){o=n[s];var l=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(l["whole-number"][r]&&l["whole-number"][r][o]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][r][o],!1,0,t):l["last-two-digits"][r.slice(r.length-2)]&&l["last-two-digits"][r.slice(r.length-2)][o]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][r.slice(r.length-2)][o],!1,0,t):l["last-digit"][r.slice(r.length-1)]&&l["last-digit"][r.slice(r.length-1)][o]&&(i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][r.slice(r.length-1)][o],!1,0,t)),i)break}}else t||(t=void 0),this.state.fun.ordinalizer.init(),i=e/10%10==1||e>10&&e<20?this.suffixes[this.state.opt.lang][t][3]:e%10==1&&e%100!=11?this.suffixes[this.state.opt.lang][t][0]:e%10==2&&e%100!=12?this.suffixes[this.state.opt.lang][t][1]:e%10==3&&e%100!=13?this.suffixes[this.state.opt.lang][t][2]:this.suffixes[this.state.opt.lang][t][3];return r+i},d.Util.Romanizer=function(){},d.Util.Romanizer.prototype.format=function(e){var t,r,i,n,o;if(t="",e<6e3)for((n=e.toString().split("")).reverse(),r=0,i=0,o=n.length,r=0;r<o;r+=1)i=parseInt(n[r],10),t=d.ROMAN_NUMERALS[r][i]+t;return t},d.Util.Suffixator=function(e){e||(e=d.SUFFIX_CHARS),this.slist=e.split(",")},d.Util.Suffixator.prototype.format=function(e){var t;e+=1;var r="";do{t=e%26==0?26:e%26,r=this.slist[t-1]+r,e=(e-t)/26}while(0!==e);return r},d.Engine.prototype.processNumber=function(e,t,r){var i,n=this,o=r;r="page-first"===r?"page":r;var s=",\\s+and\\s+|\\s+and\\s+";"en"!==this.opt.lang.slice(0,2)&&(s+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+");var a="\\s*&\\s*",l=new RegExp("^"+a+"$"),c=new RegExp("("+a+"|"+s+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),u=new RegExp("(?:"+a+"|"+s+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)"),m=this.getTerm("and"),p=this.getTerm("and","symbol");function h(e,t,i,n,s){n=n||"";var a={};if(t||d.STATUTE_SUBDIV_STRINGS_REVERSE[r]||(t="var:"+r),t){var l=t.match(/(\s*)([^\s]+)(\s*)/);"page"===o&&0===s&&-1===["p.","pp."].indexOf(l[2])?(a.gotosleepability=!0,a.labelVisibility=!0):a.labelVisibility=!1,a.label=l[2],a.origLabel=e,a.labelSuffix=l[3]?l[3]:"",a.plural=0}return(l=i.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/))?(a.particle=l[1]?l[1]:"",a.value=l[2]):(a.particle="",a.value=i),a.joiningSuffix=n.replace(/\s*-\s*/,"-"),a}function f(e,t,r){var i=e[r.pos],n=e[t].value,o="\\-"===i.joiningSuffix;n.particle&&n.particle!==i.particle&&(r.collapsible=!1);var s=n.match(/^[0-9]+([-,:a-zA-Z]*)$/),a=i.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\-[\-0-9]+)$/);if(n&&s&&a&&!o||(r.collapsible=!1,n&&a||(r.numeric=!1),o&&r.count--),(s&&s[1]||a&&a[1])&&(r.collapsible=!1),void 0===e[t].collapsible){for(var l=t,c=t+r.count;l<c;l++)isNaN(parseInt(e[l].value))&&!e[l].value.match(/^[ivxlcmIVXLCM]+$/)?e[l].collapsible=!1:e[l].collapsible=!0;r.collapsible=e[t].collapsible}var u=r.collapsible;for(l=r.pos,c=r.pos+r.count;l<c;l++)r.count>1&&u&&(e[l].plural=1),e[l].numeric=r.numeric,e[l].collapsible=r.collapsible}function g(e,t,i){"var:"!==i.label.slice(0,4)&&(0===i.pos?(["locator","number","locator-extra","page"].indexOf(r)>-1&&void 0===n.getTerm(d.STATUTE_SUBDIV_STRINGS[i.label])&&(e[i.pos].labelVisibility=!0),-1===["locator","number","locator-extra","page"].indexOf(r)&&d.STATUTE_SUBDIV_STRINGS[i.label]!==r&&(e[0].labelVisibility=!0)):e[i.pos].labelVisibility=!0)}function v(e){return e.replace("\\-","-")}function b(t){var r=d.Util.cloneToken(e),i=new d.Token;n.tmp.just_looking||(i.decorations=r.decorations,r.decorations=[],i.strings.prefix=r.strings.prefix,r.strings.prefix="",i.strings.suffix=r.strings.suffix,r.strings.suffix="");var o=t.length?t[0].label:null;if(t.length){for(var s=0,a=t.length;s<a;s++){var l=t[s],c=d.Util.cloneToken(r);c.gender=e.gender,o===l.label&&(c.formatter=e.formatter),l.numeric&&(c.successor_prefix=l.successor_prefix),c.strings.suffix=c.strings.suffix+v(l.joiningSuffix),l.styling=c}n.tmp.just_looking||'"'===t[0].value.slice(0,1)&&'"'===t[t.length-1].value.slice(-1)&&(t[0].value=t[0].value.slice(1),t[t.length-1].value=t[t.length-1].value.slice(0,-1),i.decorations.push(["@quotes",!0]))}return i}function y(e,t){return"page"===e||["locator","locator-extra"].indexOf(e)>-1&&(["p."].indexOf(t.label)>-1||["p."].indexOf(t.origLabel)>-1)}function _(e,t,r,i){var o=y(e,t),s=function(e,t){var r,i=!0;return["locator","locator-extra","page"].indexOf(e)>-1&&(r=t.origLabel?t.origLabel:t.label,i=!!n.getTerm(d.STATUTE_SUBDIV_STRINGS[r])),i}(e,t);return s&&"-"===r&&i&&((o||["locator","locator-extra","issue","volume","edition","number"].indexOf(e)>-1)&&((r=n.getTerm("page-range-delimiter"))||(r="–")),"collection-number"===e&&((r=n.getTerm("year-range-delimiter"))||(r="–"))),r}function x(e,t,i){if(!(t<1)&&2===i.count&&e[t-1].particle===e[t].particle)if("-"===e[t-1].joiningSuffix)if(!n.opt["page-range-format"]&&parseInt(e[t-1].value,10)>parseInt(e[t].value,10))e[t-1].joiningSuffix=_(r,e[t],e[t-1].joiningSuffix,!0);else{var o,s=e[t];!y(r,s)||isNaN(parseInt(e[t-1].value))||isNaN(parseInt(e[t].value))?((""+e[t-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+e[t].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(e[t-1].joiningSuffix=n.getTerm("page-range-delimiter")),o=e[t-1].value+v(e[t-1].joiningSuffix)+e[t].value):(o=e[t-1].particle+e[t-1].value+" - "+e[t].particle+e[t].value,o=n.fun.page_mangler(o));var a=o.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);if(a){var l=a[3];l=_(r,s,l,e[t].numeric),e[t-1].particle=a[1],e[t-1].value=a[2],e[t-1].joiningSuffix=l,e[t].particle=a[4],e[t].value=a[5]}i.count=0}else i.count=1}function w(t){if(e&&-1!==["page","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(r)){for(var i={count:0,label:null,lastHadRangeDelimiter:!1},n=0,o=t.length;n<o;n++){var s=t[n];if(s.collapsible)i.label===s.label&&"-"===s.joiningSuffix?i.count=1:i.label===s.label&&"-"!==s.joiningSuffix?(i.count++,2===i.count&&x(t,n,i)):i.label!==s.label?(i.label=s.label,i.count=1):(i.count=1,i.label=s.label);else{i.count=0,i.label=null;var a=s.numeric;s.joiningSuffix=_(r,s,s.joiningSuffix,a)}}2===i.count&&x(t,t.length-1,i)}}if(m===p&&(p="&"),e&&this.tmp.shadow_numbers[o]&&this.tmp.shadow_numbers[o].values.length)return w(I=this.tmp.shadow_numbers[o].values),void(this.tmp.shadow_numbers[o].masterStyling=b(I));if(this.tmp.shadow_numbers[o]||(this.tmp.shadow_numbers[o]={values:[]}),t){var C=d.LangPrefsMap[r];if(C){var k=this.opt["cite-lang-prefs"][C][0];i=(i=this.transform.getTextSubField(t,o,"locale-"+k,!0)).name}else i=t[o];if(i&&"number"===o&&"legal_case"===t.type&&(i=i.replace(/[\\]*-/g,"\\-")),i&&this.sys.getAbbreviation){if(this.sys.normalizeAbbrevsKey)var T=this.sys.normalizeAbbrevsKey(o,i);else T=i;var E=this.transform.loadAbbreviation(t.jurisdiction,"number",T,t.language);this.transform.abbrevs[E].number&&(this.transform.abbrevs[E].number[T]?i=this.transform.abbrevs[E].number[T]:void 0!==this.transform.abbrevs[E].number[T]&&delete this.transform.abbrevs[E].number[T])}if(void 0!==i&&("string"==typeof i||"number"==typeof i)){"number"==typeof i&&(i=""+i);var S=d.STATUTE_SUBDIV_STRINGS_REVERSE[r];if(0===this.tmp.shadow_numbers[o].values.length){var I=function(e,i){var o,s,a;if(i=i||"",e=function(e){var i=(e=e.trim()).match(/^([^ ]+)/);if(i&&!d.STATUTE_SUBDIV_STRINGS[i[1]]){var n;(n=["locator","locator-extra","page"].indexOf(r)>-1?t.label?d.STATUTE_SUBDIV_STRINGS_REVERSE[t.label]:"p.":d.STATUTE_SUBDIV_STRINGS_REVERSE[r])&&(e=n+" "+e)}return e}(e),"page"===r&&e.indexOf("–")>-1&&(e=e.replace(/\u2013/g,"-")),e.indexOf("\\-")>-1){o=new RegExp(c.source.replace("\\-","")),s=new RegExp(u.source.replace("\\-",""));for(var m=0,f=(v=e.split("\\-")).length;m<f;m++)v[m]=v[m].replace(/\-/g,"–");a=(a=v.join("\\-")).replace(/\\/g,"")}else o=c,s=u,a=e;var g=[];if(x=a.match(o)){var v=a.split(s);for(m=0,f=x.length;m<f;m++)x[m].match(l)&&(v[m].match(/[a-zA-Z]$/)&&v[m].match(/^[a-zA-Z]/)?x[m]=p:x[m]=" "+p+" ");for(var m in v)if((""+v[m]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;for(m=0,f=v.length-1;m<f;m++)g.push(v[m]),g.push(x[m]);g.push(v[v.length-1]),g=function(e){for(var t=e.length-2;t>-1;t-=2)"-"===e[t]&&e[t-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&e[t+1].match(/^[,a-zA-Z]+$/)&&(e[t-1]=e.slice(t-1,t+2).join(""),e=e.slice(0,t).concat(e.slice(t+2)));return e}(g)}else g=[a];var b=[],y=i,_="";for(m=0,f=g.length;m<f;m+=2){var x;if(x=g[m].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/g)){for(var w=(v=g[m].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/)).length-1;w>0;w--)!v[w-1]||v[w].match(/^[0-9]+([-;,:a-zA-Z]*)$/)&&v[w-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||(v[w-1]=v[w-1]+x[w-1]+v[w],v=v.slice(0,w).concat(v.slice(w+1)),x=x.slice(0,w-1).concat(x.slice(w)));if(x.length>0){var C=x[0].trim();!d.STATUTE_SUBDIV_STRINGS[C]||void 0===n.getTerm(d.STATUTE_SUBDIV_STRINGS[C])||-1===["locator","number","locator-extra","page"].indexOf(r)&&d.STATUTE_SUBDIV_STRINGS[C]!==r?0===m&&(x=x.slice(1),v[0]=v[0]+" "+C+" "+v[1],v=v.slice(0,1).concat(v.slice(2))):_=C}w=0;for(var k=v.length;w<k;w++)(v[w]||w===v.length-1)&&(T=_===(y=x[w-1]?x[w-1]:y).trim()?"":_,a=v[w]?v[w].trim():"",w===v.length-1?b.push(h(T,y,a,g[m+1],m)):b.push(h(T,y,a,null,m)))}else{var T;T=_===y.trim()?"":_,b.push(h(T,y,g[m],g[m+1]))}}return b}(i,S);for(var A of(function(e){for(var t=0,r=e.length-1;t<r;t++)!e[t].joiningSuffix&&e[t+1].label&&(e[t].joiningSuffix=" ")}(I),function(e){if(0!==e.length){for(var i=0,n=1,s=1,a=e.length;s<a;s++){var l=e[s-1],c=e[s];l.label===c.label&&l.particle==l.particle?n++:((u=JSON.parse(JSON.stringify(e[i]))).pos=i,u.count=n,u.numeric=!0,f(e,i,u),l.label!==c.label&&g(e,0,u),i=s,n=1)}var u;(u=JSON.parse(JSON.stringify(e[i]))).pos=i,u.count=n,u.numeric=!0,f(e,i,u),g(e,0,u),e.length&&e[0].numeric&&"number-of-"===r.slice(0,10)&&parseInt(t[o],10)>1&&(e[0].plural=1)}}(I),I))A.numeric||(A.plural=0);this.tmp.shadow_numbers[o].values=I,e&&(w(I),this.tmp.shadow_numbers[o].masterStyling=b(I)),function(e,t,i){var o=e[t];i.length&&(o.numeric=i[0].numeric,o.collapsible=i[0].collapsible,o.plural=i[0].plural,o.label=d.STATUTE_SUBDIV_STRINGS[i[0].label],"number"===r&&"issue"===o.label&&n.getTerm("number")&&(o.label="number"))}(this.tmp.shadow_numbers,o,I)}var O=this.tmp.shadow_numbers[o];"number"===r&&1===O.values.length&&O.values[0].value.indexOf("|")>-1&&(O.values[0].value=O.values[0].value.replace(/\|/g,", "),O.values[0].numeric=!0,O.values[0].plural=1,O.values[0].collapsible=!1,O.numeric=!0,O.plural=1,O.collapsible=!1),1===O.values.length&&O.values[0].value.match(/^[0-9]+(?:\/[0-9]+)+$/)&&(O.values[0].numeric=!0,O.values[0].plural=0,O.values[0].collapsible=!1,O.numeric=!0,O.plural=0,O.collapsible=!1),"page"===r&&O.values.length>0&&O.values[0].gotosleepability&&(O.labelForm="short")}}},d.Util.outputNumericField=function(e,t,r){e.output.openLevel(e.tmp.shadow_numbers[t].masterStyling);var i,n=e.tmp.shadow_numbers[t].masterStyling,o=e.tmp.shadow_numbers[t].values,s=o.length?o[0].label:null,a=e.tmp.shadow_numbers[t].labelForm,l=e.tmp.group_context.tip.label_static;i=a||"short";for(var c=e.tmp.shadow_numbers[t].labelCapitalizeIfFirst,u=e.tmp.shadow_numbers[t].labelDecorations,m=null,p=0,h=o.length;p<h;p++){var f,g=o[p],v="";g.label&&(f="var:"===g.label.slice(0,4)?g.label.slice(4):d.STATUTE_SUBDIV_STRINGS[g.label])&&(g.label===s?(l&&-1===(v=e.getTerm(f,"static",g.plural)).indexOf("%s")&&(v=""),v||(v=e.getTerm(f,a,g.plural))):(l&&-1===(v=e.getTerm(f,"static",g.plural)).indexOf("%s")&&(v=""),v||(v=e.getTerm(f,i,g.plural))),c&&(v=d.Output.Formatters["capitalize-first"](e,v)));var b=-1;v&&(b=v.indexOf("%s"));var y,_=d.Util.cloneToken(g.styling);if(_.formatter=g.styling.formatter,_.type=g.styling.type,_.num=g.styling.num,_.gender=g.styling.gender,b>0&&b<v.length-2)_.strings.prefix+=v.slice(0,b),_.strings.suffix=v.slice(b+2)+_.strings.suffix;else if(g.labelVisibility)if(v||(v=g.label,f=g.label),b>0){var x=new d.Token;x.decorations=u,e.output.append(v.slice(0,b),x)}else b!==v.length-2&&-1!==b||e.output.append(v+g.labelSuffix,"empty");if(d.UPDATE_GROUP_CONTEXT_CONDITION(e,n.strings.prefix,null,n,`${g.particle}${g.value}`),g.collapsible?(void 0===(y=g.value.match(/^[1-9][0-9]*$/)&&Number.isSafeInteger(parseInt(g.value,10))?new d.NumericBlob(e,g.particle,parseInt(g.value,10),_,r):new d.NumericBlob(e,g.particle,g.value,_,r)).gender&&(y.gender=e.locale[e.opt.lang]["noun-genders"][t]),e.output.append(y,"literal")):e.output.append(g.particle+g.value,_),0===b&&b<v.length-2&&(null===m&&(m=f),f!==m||p===o.length-1)){var w=new d.Token;w.decorations=u,e.output.append(v.slice(b+2),w)}m=f,e.tmp.term_predecessor=!0}e.output.closeLevel()},d.Util.PageRangeMangler={},d.Util.PageRangeMangler.getFunction=function(e,t){var r,i,n,o,s,a,l,c,u,d,m,p,h,f,g,v,b,y,_=e.getTerm(t+"-range-delimiter");r=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,o=function(r){for(n=r.length,i=1;i<n;i+=2)"object"==typeof r[i]&&(r[i]=r[i].join(""));var o=r.join("");return o.replace(/([^\\])\-/g,"$1"+e.getTerm(t+"-range-delimiter"))},s=function(e){var t,r,o,s="\\s+\\-\\s+",a=new RegExp("([^\\\\])[-"+("-"===_?"":_)+"\\u2013]","g");e=e.replace(a,"$1 - ").replace(/\s+-\s+/g," - ");var l=new RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+s+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g"),c=new RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+s+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*");if(t=e.match(l),0===(r=e.split(c)).length)o=t;else for(o=[r[0]],i=1,n=r.length;i<n;i+=1)o.push(t[i-1].replace(/\s*\-\s*/g,"-")),o.push(r[i]);return o},a=function(e){for(m=s(e=""+e),n=m.length,i=1;i<n;i+=2)(p=m[i].match(r))&&(p[3]&&p[1]!==p[3]||(p[4].length<p[2].length&&(p[4]=p[2].slice(0,p[2].length-p[4].length)+p[4]),parseInt(p[2],10)<parseInt(p[4],10)&&(p[3]=_+(p[1]?p[1]:""),m[i]=p.slice(1)))),"string"==typeof m[i]&&(m[i]=m[i].replace(/\-/g,_));return m},l=function(e,t,r){n=e.length;for(var i=1,s=e.length;i<s;i+=2)"object"==typeof e[i]&&(e[i][3]=c(e[i][1],e[i][3],t,r),e[i][2].slice(1)===e[i][0]&&(e[i][2]=_));return o(e)},c=function(e,t,r,i){if(r||(r=0),h=(""+e).split(""),f=(""+t).split(""),(g=f.slice()).reverse(),h.length===f.length)for(var n=0,o=h.length;n<o;n+=1){if(!(h[n]===f[n]&&g.length>r)){if(r&&i&&3===g.length){var s=h.slice(0,n);s.reverse(),g=g.concat(s)}break}g.pop()}return g.reverse(),g.join("")},u=function(e){for(n=e.length,i=1;i<n;i+=2)"object"==typeof e[i]&&(p=e[i],v=parseInt(p[1],10),b=parseInt(p[3],10),v>100&&v%100&&parseInt(v/100,10)===parseInt(b/100,10)?p[3]=""+b%100:v>=1e4&&(p[3]=""+b%1e3)),p[2].slice(1)===p[0]&&(p[2]=_);return o(e)},d=function(e){for(n=e.length,i=1;i<n;i+=2){if("object"==typeof e[i]&&(p=e[i],v=parseInt(p[1],10),b=parseInt(p[3],10),f=""+b,v>100&&v%100))for(var t=2;t<f.length;t++){var r=Math.pow(10,t);if(Math.floor(v/r)===Math.floor(b/r)){p[3]=""+b%r;break}}p[2].slice(1)===p[0]&&(p[2]=_)}return o(e)};var x=function(e,t,r,i){return t(a(e=""+e),r,i)};return e.opt[t+"-range-format"]?"expanded"===e.opt[t+"-range-format"]?y=function(e){return x(e,o)}:"minimal"===e.opt[t+"-range-format"]?y=function(e){return x(e,l)}:"minimal-two"===e.opt[t+"-range-format"]?y=function(e,t){return x(e,l,2,t)}:"chicago"===e.opt[t+"-range-format"]||"chicago-15"===e.opt[t+"-range-format"]?y=function(e){return x(e,u)}:"chicago-16"===e.opt[t+"-range-format"]&&(y=function(e){return x(e,d)}):y=function(e){return x(e,o)},y},d.Util.FlipFlopper=function(e){var t=[],r={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};r['("']=r[' "'],r["('"]=r[" '"];var i=e.getTerm("open-quote"),n=e.getTerm("close-quote"),o=e.getTerm("open-inner-quote"),s=e.getTerm("close-inner-quote");function a(e){r[e].outer="true",r[{" '":' "',' "':" '",'("':"('","('":'("'}[e]].outer="inner"}function l(e){for(var t=[],i=Object.keys(r),n=0,o=i.length;n<o;n++){var s=i[n];"quote"===r[e].type&&r[e]||t.push(s)}var a=r[e];return a.opener=new RegExp("^(?:"+t.map(function(e){return e.replace("(","\\(")}).join("|")+")"),a}i&&n&&-1===[' "'," '",'"',"'"].indexOf(i)&&(r[i]=JSON.parse(JSON.stringify(r[' "'])),r[i].opener=i,r[i].closer=n),o&&s&&-1===[' "'," '",'"',"'"].indexOf(o)&&(r[o]=JSON.parse(JSON.stringify(r[" '"])),r[o].opener=o,r[o].closer=s);var c=function(){for(var e={},t=Object.keys(r),i=0,n=t.length;i<n;i++){var o=t[i];e[o]=l(o)}return e}(),u=function(){var e=[],t=[],r={};for(var i in c)e.push(i),r[c[i].closer]=!0;for(var n=Object.keys(r),o=0,s=n.length;o<s;o++){var a=n[o];t.push(a)}var l=e.concat(t).map(function(e){return e.replace("(","\\(")}).join("|");return{matchAll:new RegExp("((?:"+l+"))","g"),splitAll:new RegExp("(?:"+l+")","g"),open:new RegExp("(^(?:"+e.map(function(e){return e.replace("(","\\(")}).join("|")+")$)"),close:new RegExp("(^(?:"+t.join("|")+")$)")}}();function m(e,r){return e.match(u.open)?function(e,r){var i=t[t.length-1];return!i||e.match(i.opener)?(t.push({type:c[e].type,opener:c[e].opener,closer:c[e].closer,pos:r}),!1):(t.pop(),t.push({type:c[e].type,opener:c[e].opener,closer:c[e].closer,pos:r}),{fixtag:i.pos})}(e,r):function(e,r){var i=t[t.length-1];return i&&e===i.closer?(t.pop(),"nocase"===i.type&&{nocase:{open:i.pos,close:r}}):i?{fixtag:i.pos}:{fixtag:r}}(e,r)}var p=function(t){var i=[];this.set=function(n){for(var o=r[n].attr,s=null,a=i.length-1;a>-1;a--)if((d=i[a])[0]===o){s=d;break}if(!s){var l=[e[e.tmp.area].opt.layout_decorations].concat(t.alldecor);e:for(a=l.length-1;a>-1;a--){var c=l[a];if(c)for(var u=c.length-1;u>-1;u--){var d;if((d=c[u])[0]===o){s=d;break e}}}}s=s?[o,r[n].flipflop[s[1]]]:[o,r[n].outer],i.push(s)},this.pair=function(){return i[i.length-1]},this.pop=function(){i.pop()}};function h(e,t){if("'"===e){if(t&&t.match(/^[^\,\.\?\:\;\ ]/))return"’"}else if(" '"===e&&t&&t.match(/^[\ ]/))return" ’";return!1}this.processTags=function(i){var n=!1;" "!==(g=i.blobs).slice(0,1)||g.match(/^\s+[\'\"]/)||(n=!0);var o=new RegExp("("+d.ROMANESQUE_REGEXP.source+")’("+d.ROMANESQUE_REGEXP.source+")","g"),s=function(e){var t=[],i=(e=(e=e.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(u.matchAll);if(!i)return{tags:[],strings:[e],forcedSpaces:[]};for(var n=e.split(u.splitAll),o=0,s=i.length-1;o<s;o++)r[i[o]]&&(""===n[o+1]&&['"',"'"].indexOf(i[o+1])>-1?(i[o+1]=" "+i[o+1],t.push(!0)):t.push(!1));return{tags:i,strings:n,forcedSpaces:t}}(g=" "+g.replace(o,"$1'$2"));if(0!==s.tags.length){for(var l=!1,c=0,f=s.tags.length;c<f;c++){var g,v=h(x=s.tags[c],g=s.strings[c+1]);if(v)s.strings[c+1]=v+s.strings[c+1],s.tags[c]="";else{for(var b;b=m(x,c);){if(!(Object.keys(b).indexOf("fixtag")>-1)){if(b.nocase){s.tags[b.nocase.open]="",s.tags[b.nocase.close]="";break}break}if(x.match(u.close)&&"'"===x)s.strings[c+1]="’"+s.strings[c+1],s.tags[c]="";else{var y=s.tags[b.fixtag];s.forcedSpaces[b.fixtag-1]&&(y=y.slice(1)),s.strings[b.fixtag+1]=y+s.strings[b.fixtag+1],s.tags[b.fixtag]=""}if(!(t.length>0))break;if("'"===x)break;t.pop()}b&&(b.fixtag||0===b.fixtag)&&(s.strings[c+1]=s.tags[c]+s.strings[c+1],s.tags[c]="")}}for(c=t.length-1;c>-1;c--){var _=t[c].pos,x=s.tags[_];s.strings[_+1]=" '"===x||"'"===x?" ’"+s.strings[_+1]:s.tags[_]+s.strings[_+1],s.tags[_]="",t.pop()}for(c=s.tags.length-1;c>-1;c--)s.tags[c]||(s.tags=s.tags.slice(0,c).concat(s.tags.slice(c+1)),s.strings[c]=s.strings[c]+s.strings[c+1],s.strings=s.strings.slice(0,c+1).concat(s.strings.slice(c+2)));for(c=0,f=s.tags.length;c<f;c++){x=s.tags[c];var w=s.forcedSpaces[c-1];[' "'," '",'("',"('"].indexOf(x)>-1&&(l||(a(x),l=!0),w||(s.strings[c]+=x.slice(0,1)))}!function(t,r,i){var n=!0,o=new p(t);t.blobs=[];var s=new function(t){this.stack=[t],this.latest=t,this.addStyling=function(t,r){if(n&&(" "===t.slice(0,1)&&(t=t.slice(1))," "===t.slice(0,1)&&(t=t.slice(1)),n=!1),this.latest=this.stack[this.stack.length-1],r){"string"==typeof this.latest.blobs&&((h=new d.Blob).blobs=this.latest.blobs,h.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[h]);var i,o=new d.Token;if((i=new d.Blob(null,o)).alldecor=this.latest.alldecor.slice(),"@class"===r[0]&&"nodecor"===r[1]){for(var s=[],a={},l=[e[e.tmp.area].opt.layout_decorations].concat(i.alldecor),c=l.length-1;c>-1;c--){var u=l[c];if(u)for(var m=u.length-1;m>-1;m--){var p=u[m];["@font-weight","@font-style","@font-variant"].indexOf(p[0])>-1&&!a[p[0]]&&("normal"!==r[1]&&(i.decorations.push([p[0],"normal"]),s.push([p[0],"normal"])),a[p[0]]=!0)}}i.alldecor.push(s)}else i.decorations.push(r),i.alldecor.push([r]);this.latest.blobs.push(i),this.stack.push(i),this.latest=i,t&&(o=new d.Token,(i=new d.Blob(null,o)).blobs=t,i.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(i))}else{var h;t&&((h=new d.Blob).blobs=t,h.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(h))}},this.popStyling=function(){this.stack.pop()}}(t);if(r.strings.length){var a=r.strings[0];i&&(a=" "+a),s.addStyling(a)}for(var l=0,c=r.tags.length;l<c;l++){var m=r.tags[l];a=r.strings[l+1],m.match(u.open)?(o.set(m),s.addStyling(a,o.pair())):(o.pop(),s.popStyling(),s.addStyling(a))}}(i,s,n)}}},d.Output.Formatters=function(){var e=new d.Doppeler('(?:‘|’|“|”| "| \'|"|\'|[-–—/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',function(e){return e.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),t=new d.Doppeler('(?:[-\\s]*<\\/*(?:spans+class="no(?:case|decor)"|i|sc|b|sub|sup)>[-\\s]*|[-\\s]+)'),r=new d.Doppeler("(?:[    -​ 　]+)"),i={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"};function n(e){var t=e.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return!t||t[2].match(/^[\u0370-\u03FF]$/)&&!t[3]?e:t[1]+d.toLocaleUpperCase.call(this,t[2])+t[3]}function o(t,o){if(!o)return"";t.doppel=e.split(o);var s={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"‘":{opener:"‘",closer:"’"},"“":{opener:"“",closer:"”"}};function a(e,r){var i=e.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(i)return function(e,r){return["“","‘",' "'," '"].indexOf(e)>-1?function(e,r){if(0===t.quoteState.length||e===t.quoteState[t.quoteState.length-1].opener)return t.quoteState.push({opener:s[e].opener,closer:s[e].closer,pos:r}),!1;var i=t.quoteState[t.quoteState.length-1].pos;return t.quoteState.pop(),t.quoteState.push({opener:s[e].opener,closer:s[e].closer,positions:r}),i}(e,r):function(e,r){if(!(t.quoteState.length>0&&e===t.quoteState[t.quoteState.length-1].closer))return r;t.quoteState.pop()}(e,r)}(i[1],r)}t.doppel.strings.length&&t.doppel.strings[0].trim()&&(t.doppel.strings[0]=t.capitaliseWords(t.doppel.strings[0],0,t.doppel.tags[0]));for(var l=0,c=t.doppel.tags.length;l<c;l++){var u=t.doppel.tags[l],m=t.doppel.strings[l+1];if(null!==t.tagState&&(i[u]?t.tagState.push(i[u]):t.tagState.length&&u===t.tagState[t.tagState.length-1]&&t.tagState.pop()),null!==t.afterPunct&&u.match(/[\!\?\:]$/)&&(t.afterPunct=!0),0===t.tagState.length?t.doppel.strings[l+1]=t.capitaliseWords(m,l+1,t.doppel,t.doppel.tags[l+1]):t.doppel.strings[l+1].trim()&&(t.lastWordPos=null),null!==t.quoteState&&((h=a(u,l))||0===h)){var p=t.doppel.origStrings[h+1].slice(0,1);t.doppel.strings[h+1]=p+t.doppel.strings[h+1].slice(1),t.lastWordPos=null}t.isFirst&&m.trim()&&(t.isFirst=!1),t.afterPunct&&m.trim()&&(t.afterPunct=!1)}if(t.quoteState)for(l=0,c=t.quoteState.length;l<c;l++){var h;void 0!==(h=t.quoteState[l].pos)&&(p=t.doppel.origStrings[h+1].slice(0,1),t.doppel.strings[h+1]=p+t.doppel.strings[h+1].slice(1))}if(t.lastWordPos){var f=r.split(t.doppel.strings[t.lastWordPos.strings]),g=f.strings[t.lastWordPos.words];g.length>1&&d.toLocaleLowerCase.call(this,g).match(t.skipWordsRex)&&(g=n.call(this,g),f.strings[t.lastWordPos.words]=g),t.doppel.strings[t.lastWordPos.strings]=r.join(f)}return e.join(t.doppel)}return{nameDoppel:t,passthrough:function(e,t){return t},lowercase:function(e,t){var r={quoteState:null,capitaliseWords:function(t){for(var r=t.split(" "),i=0,n=r.length;i<n;i++){var o=r[i];o&&(r[i]=d.toLocaleLowerCase.call(e,o))}return r.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return o.call(e,r,t)},uppercase:function(e,t){var r={quoteState:null,capitaliseWords:function(t){for(var r=t.split(" "),i=0,n=r.length;i<n;i++){var o=r[i];o&&(r[i]=d.toLocaleUpperCase.call(e,o))}return r.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return o.call(e,r,t)},sentence:function(e,t){var r={quoteState:[],capitaliseWords:function(t){for(var i=t.split(" "),o=0,s=i.length;o<s;o++){var a=i[o];a&&(r.isFirst?(i[o]=n.call(e,a),r.isFirst=!1):i[o]=d.toLocaleLowerCase.call(e,a))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return o.call(e,r,t)},title:function(e,t){var i={quoteState:[],capitaliseWords:function(t,o,s){if(t.trim()){for(var a=r.split(t),l=a.strings,c=0,u=l.length;c<u;c++){var m=l[c];if(!m)continue;let t=d.toLocaleLowerCase.call(e,m),r=!1;(m.length>1&&!t.match(i.skipWordsRex)||c===l.length-1&&"-"===s||i.isFirst||i.afterPunct)&&(r=!0),r&&m===t&&(l[c]=n.call(e,m)),i.afterPunct=!1,i.isFirst=!1,i.lastWordPos={strings:o,words:c}}t=r.join(a)}return t},skipWordsRex:e.locale[e.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return o.call(e,i,t)},"capitalize-first":function(e,t){var i={quoteState:[],capitaliseWords:function(t){for(var o=r.split(t),s=o.strings,a=0,l=s.length;a<l;a++){var c=s[a];if(c&&i.isFirst){c===d.toLocaleLowerCase.call(e,c)&&(s[a]=n.call(e,c)),i.isFirst=!1;break}}return r.join(o)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return o.call(e,i,t)},"capitalize-all":function(e,t){var i={quoteState:[],capitaliseWords:function(t){for(var i=r.split(t),o=i.strings,s=0,a=o.length;s<a;s++){var l=o[s];l&&l===d.toLocaleLowerCase.call(e,l)&&(o[s]=n.call(e,l))}return r.join(i)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return o.call(e,i,t)}}}(),d.Output.Formats=function(){},d.Output.Formats.prototype.html={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"  ").replace(d.SUPERSCRIPTS_REGEXP,function(e){return"<sup>"+d.SUPERSCRIPTS[e]+"</sup>"})},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":d.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":d.Output.Formatters.passthrough,"@strip-periods/false":d.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var r="";return e.sys.embedBibliographyEntry&&(r=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'  <div class="csl-entry">'+t+"</div>\n"+r},"@display/block":function(e,t){return'\n\n    <div class="csl-block">'+t+"</div>\n"},"@display/left-margin":function(e,t){return'\n    <div class="csl-left-margin">'+t+"</div>"},"@display/right-inline":function(e,t){return'<div class="csl-right-inline">'+t+"</div>\n  "},"@display/indent":function(e,t){return'<div class="csl-indent">'+t+"</div>\n  "},"@showid/true":function(e,t,r){if(e.tmp.just_looking||e.tmp.suppress_decorations)return t;if(r)return'<span class="'+e.opt.nodenames[r]+'" cslid="'+r+'">'+t+"</span>";if(this.params&&"string"==typeof t){var i="";if(t){var n=t.match(d.VARIABLE_WRAPPER_PREPUNCT_REX);i=n[1],t=n[2]}var o="";return t&&d.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(o=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,o)}return t},"@URL/true":function(e,t){return'<a href="'+t+'">'+t+"</a>"},"@DOI/true":function(e,t){var r=t;return t.match(/^https?:\/\//)||(r="https://doi.org/"+t),'<a href="'+r+'">'+t+"</a>"}},d.Output.Formats.prototype.text={text_escape:function(e){return e||(e=""),e},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":d.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":d.Output.Formatters.passthrough,"@strip-periods/false":d.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t+" "},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},d.Output.Formats.prototype.rtf={text_escape:function(e){return e||(e=""),e.replace(/([\\{}])/g,"\\$1").replace(d.SUPERSCRIPTS_REGEXP,function(e){return"\\super "+d.SUPERSCRIPTS[e]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(e){return"\\uc0\\u"+e.charCodeAt(0).toString()+"{}"}).split("\t").join("\\tab{}")},"@passthrough/true":d.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":d.Output.Formatters.passthrough,"@strip-periods/false":d.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?d.Output.Formats.rtf.text_escape(e.getTerm("open-quote")):d.Output.Formats.rtf.text_escape(e.getTerm("open-quote"))+t+d.Output.Formats.rtf.text_escape(e.getTerm("close-quote"))},"@quotes/inner":function(e,t){return void 0===t?d.Output.Formats.rtf.text_escape("’"):d.Output.Formats.rtf.text_escape(e.getTerm("open-inner-quote"))+t+d.Output.Formats.rtf.text_escape(e.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t},"@display/left-margin":function(e,t){return t+"\\tab "},"@display/right-inline":function(e,t){return t+"\r\n"},"@display/indent":function(e,t){return"\n\\tab "+t+"\\line\r\n"},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations)return t;var r="";if(t){var i=t.match(d.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var n="";return t&&d.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(n=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,n)},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},d.Output.Formats.prototype.asciidoc={text_escape:function(e){return e||(e=""),e.replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(d.SUPERSCRIPTS_REGEXP,function(e){return"^"+d.SUPERSCRIPTS[e]+"^"})},bibstart:"",bibend:"","@passthrough/true":d.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":d.Output.Formatters.passthrough,"@strip-periods/false":d.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?"``":"``"+t+"''"},"@quotes/inner":function(e,t){return void 0===t?"`":"`"+t+"'"},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return" "+t},"@display/indent":function(e,t){return" "+t},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t)return t;var r="";if(t){var i=t.match(d.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var n="";return t&&d.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(n=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,n)},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){var r=t;return t.match(/^https?:\/\//)||(r="https://doi.org/"+t),r+"["+t+"]"}},d.Output.Formats.prototype.fo={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(d.SUPERSCRIPTS_REGEXP,function(e){return'<fo:inline vertical-align="super">'+d.SUPERSCRIPTS[e]+"</fo:inline>"})},bibstart:"",bibend:"","@passthrough/true":d.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":d.Output.Formatters.passthrough,"@strip-periods/false":d.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var r="";if(e.bibliography&&e.bibliography.opt&&e.bibliography.opt.hangingindent){var i=e.bibliography.opt.hangingindent;r=' start-indent="'+i+'em" text-indent="-'+i+'em"'}var n="";return e.sys.embedBibliographyEntry&&(n=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'<fo:block id="'+this.system_id+'"'+r+">"+t+"</fo:block>\n"+n},"@display/block":function(e,t){return"\n  <fo:block>"+t+"</fo:block>\n"},"@display/left-margin":function(e,t){return'\n  <fo:table table-layout="fixed" width="100%">\n    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>\n    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>\n    <fo:table-body>\n      <fo:table-row>\n        <fo:table-cell>\n          <fo:block>'+t+"</fo:block>\n        </fo:table-cell>\n        "},"@display/right-inline":function(e,t){return"<fo:table-cell>\n          <fo:block>"+t+"</fo:block>\n        </fo:table-cell>\n      </fo:table-row>\n    </fo:table-body>\n  </fo:table>\n"},"@display/indent":function(e,t){return'<fo:block margin-left="2em">'+t+"</fo:block>\n"},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t)return t;var r="";if(t){var i=t.match(d.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var n="";return t&&d.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(n=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,n)},"@URL/true":function(e,t){return"<fo:basic-link external-destination=\"url('"+t+"')\">"+t+"</fo:basic-link>"},"@DOI/true":function(e,t){var r=t;return t.match(/^https?:\/\//)||(r="https://doi.org/"+t),"<fo:basic-link external-destination=\"url('"+r+"')\">"+t+"</fo:basic-link>"}},d.Output.Formats.prototype.latex={text_escape:function(e){return e||(e=""),e},bibstart:"\\begin{thebibliography}{4}",bibend:"\\end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":d.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":d.Output.Formatters.passthrough,"@strip-periods/false":d.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return"\\bibitem{"+e.sys.embedBibliographyEntry(this.item_id)+"}\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t,r){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},d.Output.Formats=new d.Output.Formats,d.Registry=function(e){this.debug=!1,this.state=e,this.registry={},this.reflist=[],this.refhash={},this.namereg=new d.Registry.NameReg(e),this.citationreg=new d.Registry.CitationReg(e),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new d.Registry.Comparifier(e,"bibliography_sort"),this.getSortedIds=function(){for(var e=[],t=0,r=this.reflist.length;t<r;t+=1)e.push(""+this.reflist[t].id);return e},this.getSortedRegistryItems=function(){for(var e=[],t=0,r=this.reflist.length;t<r;t+=1)e.push(this.reflist[t]);return e}},d.Registry.prototype.init=function(e,t){if(this.oldseq={},t){this.uncited={};for(var r=0,i=e.length;r<i;r+=1)this.myhash[e[r]]||this.mylist.push(""+e[r]),this.uncited[e[r]]=!0,this.myhash[e[r]]=!0}else{for(var n in this.uncited)e.push(n);var o={};for(r=e.length-1;r>-1;r+=-1)o[e[r]]?e=e.slice(0,r).concat(e.slice(r+1)):o[e[r]]=!0;this.mylist=e,this.myhash=o}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},d.Registry.prototype.dopurge=function(e){for(var t=this.mylist.length-1;t>-1;t+=-1)this.citationreg.citationsByItemId&&(this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[this.mylist[t]]||e[this.mylist[t]]||(delete this.myhash[this.mylist[t]],delete this.uncited[this.mylist[t]],this.mylist=this.mylist.slice(0,t).concat(this.mylist.slice(t+1))));this.dodeletes(this.myhash)},d.Registry.prototype.dodeletes=function(e){var t,r,i,n,o,s,a;if("string"==typeof e){var l=e;(e={})[l]=!0}for(var l in this.registry)if(!e[l]){if(this.uncited[l])continue;for(o in this.namereg.delitems(l))this.refreshes[o]=!0;for(t=this.registry[l].ambig,(s=this.ambigcites[t].indexOf(l))>-1&&(n=this.ambigcites[t].slice(),this.ambigcites[t]=n.slice(0,s).concat(n.slice(s+1,n.length)),this.ambigresets[t]=this.ambigcites[t].length),i=this.ambigcites[t].length,r=0;r<i;r+=1)a=""+this.ambigcites[t][r],this.refreshes[a]=!0;if(this.registry[l].siblings)if(1==this.registry[l].siblings.length){var c=this.registry[l].siblings[0];this.registry[c].siblings&&(this.registry[c].siblings.pop(),this.registry[c].master=!0)}else if(this.registry[l].siblings.length>1){var u=[l];if(this.registry[l].master){var d=this.registry[l].siblings[0];this.registry[d].master=!0,u.push(d)}for(var m=[],p=this.registry[l].siblings.length-1;p>-1;p+=-1){var h=this.registry[l].siblings.pop();-1===u.indexOf(h)&&m.push(h)}for(p=m.length-1;p>-1;p+=-1)this.registry[l].siblings.push(m[p])}for(var f=this.reflist.length-1;f>-1;f--)this.reflist[f].id===l&&(this.reflist=this.reflist.slice(0,f).concat(this.reflist.slice(f+1)));delete this.registry[l],delete this.refhash[l],this.return_data.bibchange=!0}},d.Registry.prototype.doinserts=function(e){var t,r,i,n,o;"string"==typeof e&&(e=[e]);for(var s=0,a=e.length;s<a;s+=1)t=e[s],this.registry[t]||(r=this.state.retrieveItem(t),i=d.getAmbiguousCite.call(this.state,r),this.ambigsTouched[i]=!0,r.legislation_id||(this.akeys[i]=!0),n={id:""+t,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:r,newItem:!0},this.registry[t]=n,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[t]&&(this.registry[t]["first-reference-note-number"]=this.citationreg.citationsByItemId[t][0].properties.noteIndex),o=d.getAmbigConfig.call(this.state),this.registerAmbigToken(i,t,o),this.touched[t]=!0,this.return_data.bibchange=!0)},d.Registry.prototype.rebuildlist=function(e){var t,r,i,n;if(e)for(this.reflist=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],n=this.registry[i],this.reflist.push(n),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=r+1;else for(this.reflist_inserts=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],(n=this.registry[i]).newItem&&this.reflist_inserts.push(n),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=r+1},d.Registry.prototype.dorefreshes=function(){var e;for(var t in this.refreshes)if(e=this.registry[t]){e.sortkeys=void 0,o=this.state.refetchItem(t);var r=e.ambig;for(var i in void 0===r&&(this.state.tmp.disambig_settings=!1,r=d.getAmbiguousCite.call(this.state,o),s=d.getAmbigConfig.call(this.state),this.registerAmbigToken(r,t,s)),this.ambigresets)if(1===this.ambigresets[i]){var n=this.ambigcites[r][0],o=this.state.refetchItem(n);this.registry[n].disambig=new d.AmbigConfig,this.state.tmp.disambig_settings=!1,r=d.getAmbiguousCite.call(this.state,o);var s=d.getAmbigConfig.call(this.state);this.registerAmbigToken(r,n,s)}this.state.tmp.taintedItemIDs[t]=!0,this.ambigsTouched[r]=!0,o.legislation_id||(this.akeys[r]=!0),this.touched[t]=!0}},d.Registry.prototype.setdisambigs=function(){for(var e in this.ambigsTouched)this.state.disambiguate.run(e);this.ambigsTouched={},this.akeys={}},d.Registry.prototype.renumber=function(){var e,t,r;for(this.state.bibliography_sort.opt.citation_number_sort_direction===d.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),e=this.reflist.length,t=0;t<e;t+=1)(r=this.reflist[t]).seq=t+1,this.state.bibliography_sort.opt.citation_number_sort_direction===d.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[r.seq]=this.reflist.length-r.seq+1),this.state.opt.update_mode===d.NUMERIC&&r.seq!=this.oldseq[r.id]&&(this.state.tmp.taintedItemIDs[r.id]=!0),r.seq!=this.oldseq[r.id]&&(this.return_data.bibchange=!0)},d.Registry.prototype.setsortkeys=function(){for(var e=0,t=this.mylist.length;e<t;e+=1){var r=this.mylist[e];(this.touched[r]||this.state.tmp.taintedItemIDs[r]||!this.registry[r].sortkeys)&&(this.registry[r].sortkeys=d.getSortKeys.call(this.state,this.state.retrieveItem(r),"bibliography_sort"))}},d.Registry.prototype._insertItem=function(e,t){return t.splice(this._locationOf(e,t)+1,0,e),t},d.Registry.prototype._locationOf=function(e,t,r,i){if(0===t.length)return-1;var n=(r=r||0)+(i=i||t.length)>>1,o=this.sorter.compareKeys(e,t[n]);if(i-r<=1)return-1==o?n-1:n;switch(o){case-1:return this._locationOf(e,t,r,n);case 0:return n;case 1:return this._locationOf(e,t,n,i)}},d.Registry.prototype.sorttokens=function(e){var t,r,i;if(!e){for(this.reflist_inserts=[],t=this.mylist.length,i=0;i<t;i+=1)r=this.mylist[i],(a=this.registry[r]).newItem&&this.reflist_inserts.push(a);for(var n in this.state.tmp.taintedItemIDs)if(this.registry[n]&&!this.registry[n].newItem)for(var o=this.reflist.length-1;o>-1;o--)this.reflist[o].id===n&&(this.reflist_inserts.push(this.reflist[o]),this.reflist=this.reflist.slice(0,o).concat(this.reflist.slice(o+1)));o=0;for(var s=this.reflist_inserts.length;o<s;o++){var a;delete(a=this.reflist_inserts[o]).newItem,this.reflist=this._insertItem(a,this.reflist)}for(i=0;i<t;i+=1)r=this.mylist[i],a=this.registry[r],this.registry[r].seq=i+1}},d.Registry.Comparifier=function(e,t){var r,i,n,o,s=d.getSortCompare.call(e,e.opt["default-locale-sort"]);r=e[t].opt.sort_directions,this.compareKeys=function(e,t){for(i=e.sortkeys?e.sortkeys.length:0,n=0;n<i;n+=1){var o;if(0<(o=e.sortkeys[n]===t.sortkeys[n]?0:void 0===e.sortkeys[n]?r[n][1]:void 0===t.sortkeys[n]?r[n][0]:s(e.sortkeys[n],t.sortkeys[n])))return r[n][1];if(0>o)return r[n][0]}return e.seq>t.seq?1:e.seq<t.seq?-1:0},o=this.compareKeys,this.compareCompositeKeys=function(e,t){return o(e[1],t[1])}},d.Registry.prototype.compareRegistryTokens=function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0},d.Registry.prototype.registerAmbigToken=function(e,t,r){if(this.registry[t]||d.debug("Warning: unregistered item: itemID=("+t+"), akey=("+e+")"),this.registry[t]&&this.registry[t].disambig&&this.registry[t].disambig.names)for(var i=0,n=r.names.length;i<n;i+=1)if(r.names[i]!==this.registry[t].disambig.names[i])this.state.tmp.taintedItemIDs[t]=!0;else if(r.givens[i])for(var o=0,s=r.givens[i].length;o<s;o+=1)r.givens[i][o]!==this.registry[t].disambig.givens[i][o]&&(this.state.tmp.taintedItemIDs[t]=!0);this.ambigcites[e]||(this.ambigcites[e]=[]),-1===this.ambigcites[e].indexOf(""+t)&&this.ambigcites[e].push(""+t),this.registry[t].ambig=e,this.registry[t].disambig=d.cloneAmbigConfig(r)},d.getSortKeys=function(e,t){var r,i,n,o,s,a;for(r=this.tmp.area,i=this.tmp.root,n=this.tmp.extension,o=d.Util.Sort.strip_prepositions,this.tmp.area=t,this.tmp.root=t.indexOf("_")>-1?t.slice(0,-5):t,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,d.getCite.call(this,e),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,s=this[t].keys.length,a=0;a<s;a+=1)this[t].keys[a]=o(this[t].keys[a]);return this.tmp.area=r,this.tmp.root=i,this.tmp.extension=n,this[t].keys},d.Registry.NameReg=function(e){var t,r,i,n,o,s,a,l,c,u,m,p;this.state=e,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},a=function(e){return e||(e=""),e.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},l=function(e,n,o){t=a(o.family),"never"===e.opt["demote-non-dropping-particle"]&&o["non-dropping-particle"]&&o.family&&(t=`${t} ${o["non-dropping-particle"]}`);var s=(i=a(o.given)).match(/[,\!]* ([^,]+)$/);s&&s[1]===s[1].toLowerCase()&&(i=i.replace(/[,\!]* [^,]+$/,"")),r=d.Util.Names.initializeWith(e,i,"%s"),"by-cite"===e.citation.opt["givenname-disambiguation-rule"]&&(t=""+n+t)},c=function(i,s,a,c,u,d){var m;if("bibliography"===e.tmp.area.slice(0,12)&&!u)return"string"==typeof d?1:2;s=e.nameOutput.getName(s,"locale-translit",!0).name,l(this.state,""+i,s),m=2,n=e.opt["disambiguate-add-givenname"];var p=o=e.citation.opt["givenname-disambiguation-rule"];return"by-cite"===o&&(o="all-names"),"short"===u?m=0:"string"==typeof d&&(m=1),void 0===this.namereg[t]||void 0===this.namereg[t].ikey[r]?m:"by-cite"===p&&m<=c?c:n?"string"==typeof o&&"primary-name"===o.slice(0,12)&&a>0?m:(o&&"all-names"!==o&&"primary-name"!==o?"all-names-with-initials"!==o&&"primary-name-with-initials"!==o||(m=this.namereg[t].count>1?1:0):(this.namereg[t].count>1&&(m=1),(this.namereg[t].ikey&&this.namereg[t].ikey[r].count>1||this.namereg[t].count>1&&"string"!=typeof d)&&(m=2)),e.registry.registry[i]?m:"short"==u?0:"string"==typeof d?1:void 0):m},u=function(n){var o,a,l,c,u;for("string"!=typeof n&&"number"!=typeof n||(n=[""+n]),a=n.length,o=0;o<a;o+=1)if(c=""+n[o],this.nameind[c]){for(u in this.nameind[c])if(this.nameind[c].hasOwnProperty(u)){var d=u.split("::");if(t=d[0],r=d[1],i=d[2],void 0===this.namereg[t])continue;if(s=this.namereg[t].items,i&&this.namereg[t].ikey[r]&&this.namereg[t].ikey[r].skey[i]&&((l=(p=this.namereg[t].ikey[r].skey[i].items).indexOf(""+c))>-1&&(this.namereg[t].ikey[r].skey[i].items=p.slice(0,l).concat(p.slice([l+1]))),0===this.namereg[t].ikey[r].skey[i].items.length&&(delete this.namereg[t].ikey[r].skey[i],this.namereg[t].ikey[r].count+=-1,this.namereg[t].ikey[r].count<2)))for(var m=0,h=this.namereg[t].ikey[r].items.length;m<h;m+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[r].items[m]]=!0;if(r&&this.namereg[t].ikey[r]&&((l=this.namereg[t].ikey[r].items.indexOf(""+c))>-1&&(s=this.namereg[t].ikey[r].items.slice(),this.namereg[t].ikey[r].items=s.slice(0,l).concat(s.slice([l+1]))),0===this.namereg[t].ikey[r].items.length&&(delete this.namereg[t].ikey[r],this.namereg[t].count+=-1,this.namereg[t].count<2)))for(m=0,h=this.namereg[t].items.length;m<h;m+=1)e.tmp.taintedItemIDs[this.namereg[t].items[m]]=!0;t&&((l=this.namereg[t].items.indexOf(""+c))>-1&&(s=this.namereg[t].items.slice(),this.namereg[t].items=s.slice(0,l).concat(s.slice([l+1],s.length))),this.namereg[t].items.length<2&&delete this.namereg[t]),delete this.nameind[c][u]}delete this.nameind[c],delete this.nameindpkeys[c]}return{}},m=function(n,o,s){if(o=e.nameOutput.getName(o,"locale-translit",!0).name,!e.citation.opt["givenname-disambiguation-rule"]||"primary-"!==e.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===s){if(l(this.state,""+n,o),t&&(void 0===this.namereg[t]?(this.namereg[t]={},this.namereg[t].count=0,this.namereg[t].ikey={},this.namereg[t].items=[n]):-1===this.namereg[t].items.indexOf(n)&&this.namereg[t].items.push(n)),t&&r)if(void 0===this.namereg[t].ikey[r]){if(this.namereg[t].ikey[r]={},this.namereg[t].ikey[r].count=0,this.namereg[t].ikey[r].skey={},this.namereg[t].ikey[r].items=[n],this.namereg[t].count+=1,2===this.namereg[t].count)for(var a=0,c=this.namereg[t].items.length;a<c;a+=1)e.tmp.taintedItemIDs[this.namereg[t].items[a]]=!0}else-1===this.namereg[t].ikey[r].items.indexOf(n)&&this.namereg[t].ikey[r].items.push(n);if(t&&r&&i)if(void 0===this.namereg[t].ikey[r].skey[i]){if(this.namereg[t].ikey[r].skey[i]={},this.namereg[t].ikey[r].skey[i].items=[n],this.namereg[t].ikey[r].count+=1,2===this.namereg[t].ikey[r].count)for(a=0,c=this.namereg[t].ikey[r].items.length;a<c;a+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[r].items[a]]=!0}else-1===this.namereg[t].ikey[r].skey[i].items.indexOf(n)&&this.namereg[t].ikey[r].skey[i].items.push(n);void 0===this.nameind[n]&&(this.nameind[n]={},this.nameindpkeys[n]={}),t&&(this.nameind[n][t+"::"+r+"::"+i]=!0,this.nameindpkeys[n][t]=this.namereg[t])}},this.addname=m,this.delitems=u,this.evalname=c},d.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]},d.Disambiguation=function(e){this.state=e,this.sys=this.state.sys,this.registry=e.registry.registry,this.ambigcites=e.registry.ambigcites,this.configModes(),this.debug=!1},d.Disambiguation.prototype.run=function(e){this.modes.length&&(this.debug&&this.state.sys.print("[A] === RUN ==="),this.akey=e,this.initVars(e)&&this.runDisambig())},d.Disambiguation.prototype.runDisambig=function(){var e;for(this.debug&&this.state.sys.print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),e=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(e);this.lists=this.lists.slice(1)}},d.Disambiguation.prototype.scanItems=function(e){var t;this.debug&&this.state.sys.print("[2] === scanItems() ==="),this.Item=e[1][0],this.ItemCite=d.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=e[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var r=0,i=1,n=e[1].length;i<n;i+=1){t=e[1][i];var o=d.getAmbiguousCite.call(this.state,t,this.base,!0);this.debug&&i>1&&this.state.sys.print("  -----------"),this.ItemCite===o?(this.debug&&(this.state.sys.print("  [CLASH]--\x3e "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+t.id+": "+o)),r+=1,this.partners.push(t)):(this.debug&&(this.state.sys.print("  [clear]--\x3e "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+t.id+": "+o)),this.nonpartners.push(t))}this.clashes[0]=this.clashes[1],this.clashes[1]=r},d.Disambiguation.prototype.evalScan=function(e){this[this.modes[this.modeindex]](e),e&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},d.Disambiguation.prototype.disNames=function(e){if(this.debug&&this.state.sys.print("[3] == disNames() =="),0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [a]: lone partner, one nonpartner"),this.state.sys.print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),this.state.sys.print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),this.state.sys.print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&this.state.sys.print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&this.state.sys.print("  ** RESOLUTION [e]: no improvement, and clashes remain"),e&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&this.state.sys.print("     (registering clashing entries because we've run out of options)");for(var t=0,r=this.partners.length;t<r;t+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[t].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},d.Disambiguation.prototype.disExtraText=function(){this.debug&&this.state.sys.print("[3] === disExtraText ==");var e=!1;if(0===this.clashes[1]&&this.nonpartners.length<2&&(e=!0),e||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(e||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(e||this.modeindex===this.modes.length-1){var t=this.lists[this.listpos][0];for(r=0,i=this.lists[this.listpos][1].length;r<i;r+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][r].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][r].id,t);this.lists[this.listpos]=[this.betterbase,[]]}else for(this.modeindex=this.modes.length-1,(t=this.lists[this.listpos][0]).disambiguate=!0,r=0,i=this.lists[this.listpos][1].length;r<i;r+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][r].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][r].id,t)}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var r=0,i=this.lists[this.listpos][1].length;r<i;r+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][r].id]=!0}},d.Disambiguation.prototype.disYears=function(){var e;this.debug&&this.state.sys.print("[3] === disYears =="),e=[];var t=this.lists[this.listpos][0];if(this.clashes[1])for(var r=0,i=this.state.registry.mylist.length;r<i;r+=1)for(var n=this.state.registry.mylist[r],o=0,s=this.lists[this.listpos][1].length;o<s;o+=1){var a;if((a=this.lists[this.listpos][1][o]).id==n){e.push(this.registry[a.id]);break}}e.sort(this.state.registry.sorter.compareKeys);for(var l=0,c=e.length;l<c;l+=1){t.year_suffix=""+l;var u=this.state.registry.registry[e[l].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+e[l].id,t),d.ambigConfigDiff(u,t)&&(this.state.tmp.taintedItemIDs[e[l].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},d.Disambiguation.prototype.incrementDisambig=function(){if(this.debug&&this.state.sys.print("\n[1] === incrementDisambig() ==="),this.initGivens)return this.initGivens=!1,!1;var e=!1,t=!0;if("disNames"===this.modes[this.modeindex]){t=!1,"number"!=typeof this.givensMax&&(t=!0);var r=!1;"number"!=typeof this.namesMax&&(r=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:t=!0),"number"==typeof this.namesMax&&t&&(this.state.opt["disambiguate-add-names"]?(r=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):r=!0):r=!0),"number"==typeof this.namesetsMax&&r&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(this.state.sys.print("    ------------------"),this.state.sys.print("    incremented values"),this.state.sys.print("    ------------------"),this.state.sys.print("    | gnameset: "+this.gnameset),this.state.sys.print("    | gname: "+this.gname),this.state.sys.print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?this.state.sys.print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):this.state.sys.print("    | givens value: nil"),this.state.sys.print("    | namesetsMax: "+this.namesetsMax),this.state.sys.print("    | namesMax: "+this.namesMax),this.state.sys.print("    | givensMax: "+this.givensMax)),"number"==typeof this.namesetsMax&&-1!==this.namesetsMax&&this.gnameset!==this.namesetsMax||this.state.opt["disambiguate-add-names"]&&"number"==typeof this.namesMax&&this.gname!==this.namesMax||"number"==typeof this.givensMax&&void 0!==this.base.givens[this.gnameset]&&void 0!==this.base.givens[this.gnameset][this.gname]&&this.base.givens[this.gnameset][this.gname]!==this.givensMax||(e=!0,this.debug&&this.state.sys.print("    MAXED"))}else"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return e},d.Disambiguation.prototype.initVars=function(e){var t,r,i;if(this.debug&&this.state.sys.print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=e,this.maxNamesByItemId={},r=[],!(t=this.ambigcites[e])||!t.length)return!1;var n=this.state.refetchItem(""+t[0]);if(this.getCiteData(n),this.base=d.getAmbigConfig.call(this.state),t&&t.length>1){r.push([this.maxNamesByItemId[n.id],n]);for(var o=1,s=t.length;o<s;o+=1)n=this.state.refetchItem(""+t[o]),this.getCiteData(n,this.base),r.push([this.maxNamesByItemId[n.id],n]);r.sort(function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:e[1].id>t[1].id?1:e[1].id<t[1].id?-1:0}),i=[];for(o=0,s=r.length;o<s;o+=1)i.push(r[o][1]);this.lists.push([this.base,i]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+t[0]);return this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],this.namesMax=this.maxNamesByItemId[this.Item.id][0],this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},d.Disambiguation.prototype.padBase=function(e){for(var t=0,r=e.names.length;t<r;t+=1){e.givens[t]||(e.givens[t]=[]);for(var i=0,n=e.names[t];i<n;i+=1)e.givens[t][i]||(e.givens[t][i]=0)}},d.Disambiguation.prototype.configModes=function(){var e,t;this.modes=[],e=this.state.opt["disambiguate-add-givenname"],t=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||e&&"by-cite"===t)&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))},d.Disambiguation.prototype.getCiteData=function(e,t){if(!this.maxNamesByItemId[e.id]){d.getAmbiguousCite.call(this.state,e,t),t=d.getAmbigConfig.call(this.state),this.maxNamesByItemId[e.id]=d.getMaxVals.call(this.state),this.state.registry.registry[e.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var r=0,i=this.state.registry.registry[e.id].disambig.givens.length;r<i;r+=1)this.state.registry.registry[e.id].disambig.givens[r]=this.state.tmp.disambig_settings.givens[r].slice();for(this.namesetsMax=this.state.registry.registry[e.id].disambig.names.length-1,this.base||(this.base=t,this.betterbase=d.cloneAmbigConfig(t)),t.names.length<this.base.names.length&&(this.base=t),r=0,i=t.names.length;r<i;r+=1)t.names[r]>this.base.names[r]&&(this.base.givens[r]=t.givens[r].slice(),this.base.names[r]=t.names[r],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var n=0,o=this.base.givens.length;n<o;n+=1)this.betterbase.givens[n]=this.base.givens[n].slice()}},d.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&void 0!==this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},d.Engine.prototype.getJurisdictionList=function(e){for(var t=[],r=e.split(":"),i=r.length;i>0;i--){var n=r.slice(0,i).join(":");if(t.push(n),this.opt.jurisdiction_fallbacks[n]){var o=this.opt.jurisdiction_fallbacks[n];t.push(o)}}return-1===t.indexOf("us")&&t.push("us"),t},d.Engine.prototype.loadStyleModule=function(e,t,r){var i=null;this.juris[e]={};var n=d.setupXml(t);n.addMissingNameNodes(n.dataObj),n.addInstitutionNodes(n.dataObj),n.insertPublisherAndPlace(n.dataObj),n.flagDateMacros(n.dataObj);for(var o=0,s=(u=n.getNodesByName(n.dataObj,"law-module")).length;o<s;o++){var a=n.getAttributeValue(u[o],"types");if(a){this.juris[e].types={};for(var l=0,c=(a=a.split(/\s+/)).length;l<c;l++)this.juris[e].types[a[l]]=!0}r||(i=n.getAttributeValue(u[o],"fallback"))&&"us"!==e&&(this.opt.jurisdiction_fallbacks[e]=i)}var u,m=this.opt.lang?this.opt.lang:this.opt["default-locale"][0];for(d.SET_COURT_CLASSES(this,m,n,n.dataObj),this.juris[e].types||(this.juris[e].types=d.MODULE_TYPES),o=0,s=(u=n.getNodesByName(n.dataObj,"macro")).length;o<s;o++){var p=n.getAttributeValue(u[o],"name");d.MODULE_MACROS[p]?(this.juris[e][p]=[],this.buildTokenLists(u[o],this.juris[e][p]),this.configureTokenList(this.juris[e][p])):d.debug('CSL: skipping non-modular macro name "'+p+'" in module context')}return i},d.Engine.prototype.retrieveAllStyleModules=function(e){for(var t={},r=this.locale[this.opt.lang].opts["jurisdiction-preference"],i=(r=[""].concat(r=r||[])).length-1;i>-1;i--)for(var n=r[i],o=0,s=e.length;o<s;o++){var a=e[o];if(!this.opt.jurisdictions_seen[a]){var l=this.sys.retrieveStyleModule(a,n);(!l&&!n||l)&&(this.opt.jurisdictions_seen[a]=!0),l&&(t[a]=l)}}return t},d.ParticleList=[["'s",i=[[null,[0,1]]]],["'s-",i],["'t",i],["a",i],["aan 't",n=[[null,[0,2]]]],["aan de",n],["aan den",n],["aan der",n],["aan het",n],["aan t",n],["aan",i],["ad-",s=[[null,[0,1]],[[0,1],null]]],["adh-",s],["af",s],["al",s],["al-",s],["am de",n],["am",i],["an-",s],["ar-",s],["as-",s],["ash-",s],["at-",s],["ath-",s],["auf dem",c=[[[0,2],null],[null,[0,2]]]],["auf den",c],["auf der",c],["auf ter",n],["auf",l=[[[0,1],null],[null,[0,1]]]],["aus 'm",c],["aus dem",c],["aus den",c],["aus der",c],["aus m",c],["aus",l],["aus'm",c],["az-",s],["aš-",s],["aḍ-",s],["aḏ-",s],["aṣ-",s],["aṭ-",s],["aṯ-",s],["aẓ-",s],["ben",i],["bij 't",n],["bij de",n],["bij den",n],["bij het",n],["bij t",n],["bij",i],["bin",i],["boven d",n],["boven d'",n],["d",i],["d'",s],["da",s],["dal",i],["dal'",i],["dall'",i],["dalla",i],["das",s],["de die le",o=[[null,[0,3]]]],["de die",n],["de l",n],["de l'",n],["de la",u=[[null,[0,2]],[[0,1],[1,2]]]],["de las",u],["de le",n],["de li",a=[[null,[0,2]],[[0,2],null]]],["de van der",o],["de",s],["de'",s],["deca",i],["degli",s],["dei",s],["del",s],["dela",r=[[[0,1],null]]],["dell'",s],["della",s],["delle",s],["dello",s],["den",s],["der",s],["des",s],["di",s],["die le",n],["do",i],["don",i],["dos",s],["du",s],["ed-",s],["edh-",s],["el",s],["el-",s],["en-",s],["er-",s],["es-",s],["esh-",s],["et-",s],["eth-",s],["ez-",s],["eš-",s],["eḍ-",s],["eḏ-",s],["eṣ-",s],["eṭ-",s],["eṯ-",s],["eẓ-",s],["het",i],["i",i],["il",r],["im",i],["in 't",n],["in de",n],["in den",n],["in der",a],["in het",n],["in t",n],["in",i],["l",i],["l'",i],["la",i],["las",i],["le",i],["les",s],["lo",s],["los",i],["lou",i],["of",i],["onder 't",n],["onder de",n],["onder den",n],["onder het",n],["onder t",n],["onder",i],["op 't",n],["op de",a],["op den",n],["op der",n],["op gen",n],["op het",n],["op t",n],["op ten",n],["op",i],["over 't",n],["over de",n],["over den",n],["over het",n],["over t",n],["over",i],["s",i],["s'",i],["sen",r],["t",i],["te",i],["ten",i],["ter",i],["tho",i],["thoe",i],["thor",i],["to",i],["toe",i],["tot",i],["uijt 't",n],["uijt de",n],["uijt den",n],["uijt te de",o],["uijt ten",n],["uijt",i],["uit 't",n],["uit de",n],["uit den",n],["uit het",n],["uit t",n],["uit te de",o],["uit ten",n],["uit",i],["unter",i],["v",i],["v.",i],["v.d.",i],["van 't",n],["van de l",o],["van de l'",o],["van de",n],["van de",n],["van den",n],["van der",n],["van gen",n],["van het",n],["van la",n],["van t",n],["van ter",n],["van van de",o],["van",s],["vander",i],["vd",i],["ver",i],["vom und zum",[[[0,3],null]]],["vom",s],["von 't",n],["von dem",c],["von den",c],["von der",c],["von t",n],["von und zu",[[[0,3],null],[null,[0,3]]]],["von zu",c],["von",l],["voor 't",n],["voor de",n],["voor den",n],["voor in 't",o],["voor in t",o],["voor",i],["vor der",c],["vor",l],["z",r],["ze",r],["zu",l],["zum",s],["zur",s]],d.parseParticles=function(){function e(e,t,r){var i=e;e=r?e.toLowerCase():e;var n,o,s=[];t?(e=e.split("").reverse().join(""),n=d.PARTICLE_GIVEN_REGEXP):n=d.PARTICLE_FAMILY_REGEXP;for(var a=e.match(n);a;){var l,c=t?a[1].split("").reverse().join(""):a[1];if(!(o=!!(l=!!(l=!!a&&c)&&c.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"))&&l.toUpperCase()!==l))break;t?(s.push(i.slice(-1*c.length)),i=i.slice(0,-1*c.length)):(s.push(i.slice(0,c.length)),i=i.slice(c.length)),a=(e=a[2]).match(n)}if(t){e=e.split("").reverse().join(""),s.reverse();for(var u=1,m=s.length;u<m;u++)" "==s[u].slice(0,1)&&(s[u-1]+=" ");for(u=0,m=s.length;u<m;u++)" "==s[u].slice(0,1)&&(s[u]=s[u].slice(1));e=i.slice(0,e.length)}else e=i.slice(-1*e.length);return[o,e,s]}return function(t){var r=(a=e(t.family))[1],i=a[2];t.family=r;var n,o,s=(o=(n=i.join("")).slice(-1),n=n.trim()," "===o&&["'","’"].indexOf(n.slice(-1))>-1&&(n+=" "),n);s&&(t["non-dropping-particle"]=s),function(e){if(!e.suffix&&e.given){var t=e.given.match(/(\s*,!*\s*)/);if(t){var r=e.given.indexOf(t[1]),i=e.given.slice(r+t[1].length),n=e.given.slice(r,r+t[1].length).replace(/\s*/g,"");"et al"!==i.replace(/\./g,"")||e["dropping-particle"]?(2===n.length&&(e["comma-suffix"]=!0),e.suffix=i):(e["dropping-particle"]=i,e["comma-dropping-particle"]=","),e.given=e.given.slice(0,r)}}}(t);var a,l=(a=e(t.given,!0))[1],c=a[2];t.given=l;var u=c.join("").trim();u&&(t["dropping-particle"]=u)}}(),e.exports=d},39046:function(e,t,r){"use strict";new URL(r(70181),r.b)},42681:function(e,t,r){var i;!function(n){"use strict";function o(e){var r=e&&e.Promise||n.Promise,i=e&&e.XMLHttpRequest||n.XMLHttpRequest;return function(){var e=Object.create(n,{fetch:{value:void 0,writable:!0}});return function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,a="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),l="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function m(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function p(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(e){if(e.bodyUsed)return r.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new r(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function b(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:l&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||d(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return r.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return r.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return r.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?r.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):r.resolve(this._bodyArrayBuffer)):this.blob().then(b)}),this.text=function(){var e,t,i,n=g(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,i=v(t),t.readAsText(e),i;if(this._bodyArrayBuffer)return r.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return r.resolve(this._bodyText)},l&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=m(e),t=p(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[m(e)]},f.prototype.get=function(e){return e=m(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(m(e))},f.prototype.set=function(e,t){this.map[m(e)]=p(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),h(e)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},f.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),h(e)},s&&(f.prototype[Symbol.iterator]=f.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,n=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=t.method||this.method||"GET",i=r.toUpperCase(),x.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function C(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function k(e,t){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},_.call(w.prototype),_.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];k.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,o){return new r(function(r,s){var l=new w(e,o);if(l.signal&&l.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new i;function d(){u.abort()}u.onload=function(){var e,t,i={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();t.append(i,n)}}),t)};i.url="responseURL"in u?u.responseURL:i.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout(function(){r(new k(n,i))},0)},u.onerror=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){s(new t.DOMException("Aborted","AbortError"))},0)},u.open(l.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(a?u.responseType="blob":c&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!o||"object"!=typeof o.headers||o.headers instanceof f?l.headers.forEach(function(e,t){u.setRequestHeader(t,e)}):Object.getOwnPropertyNames(o.headers).forEach(function(e){u.setRequestHeader(e,p(o.headers[e]))}),l.signal&&(l.signal.addEventListener("abort",d),u.onreadystatechange=function(){4===u.readyState&&l.signal.removeEventListener("abort",d)}),u.send(void 0===l._bodyInit?null:l._bodyInit)})}E.polyfill=!0,n.fetch||(n.fetch=E,n.Headers=f,n.Request=w,n.Response=k),t.Headers=f,t.Request=w,t.Response=k,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}(t),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response,DOMException:e.DOMException}}()}void 0===(i=function(){return o}.call(t,r,t,e))||(e.exports=i)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==r.g?r.g:this)},44363:function(e,t,r){"use strict";r(22799)},46859:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=["dropping-particle","given"],i=["suffix"],n=["non-dropping-particle","family"];t.default=function(e,t=!1){const o=t=>t.map(t=>e[t]||"").filter(Boolean).join(" ");if(e.literal)return e.literal;if(t){const e=o(i)?`, ${o(i)}`:"",t=o(r)?`, ${o(r)}`:"";return o(n)+e+t}return`${o([...r,...i,...n])}`}},48287:function(e,t,r){"use strict";var i=r(67526),n=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|f(e,t),i=a(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,r);var n=function(e){if(l.isBuffer(e)){var t=0|h(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?a(0):m(e):"Buffer"===e.type&&Array.isArray(e.data)?m(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|h(e))}function m(e){for(var t=e.length<0?0:0|h(e.length),r=a(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,l.prototype),i}function h(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(n)return i?-1:z(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function b(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){var o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var u=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var d=!0,m=0;m<l;m++)if(c(e,o+m)!==c(t,m)){d=!1;break}if(d)return o}return-1}function _(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(q(a))return s;e[r+s]=a}return s}function x(e,t,r,i){return j(z(t,e.length-r),e,r,i)}function w(e,t,r,i){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function C(e,t,r,i){return j(F(t),e,r,i)}function k(e,t,r,i){return j(function(e,t){for(var r,i,n,o=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function T(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o,s,a,l,c=e[n],u=null,d=c>239?4:c>223?3:c>191?2:1;if(n+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[n+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[n+1],s=e[n+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[n+1],s=e[n+2],a=e[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=d}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=S));return r}(i)}t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(H(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=l.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(H(o,Uint8Array))n+o.length>i.length?l.from(o).copy(i,n):Uint8Array.prototype.set.call(i,o,n);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n)}n+=o.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,i,n){if(H(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(i,n),u=e.slice(t,r),d=0;d<a;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function I(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function A(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function O(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=U[e[o]];return n}function N(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length-1;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,i,n,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function D(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,i,o){return t=+t,r>>>=0,o||D(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function M(e,t,r,i,o){return t=+t,r>>>=0,o||D(e,0,r,8),n.write(e,t,r,i,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||P(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||P(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var n=e.charCodeAt(0);("utf8"===i&&n<128||"latin1"===i)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=l.isBuffer(e)?e:l.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var L=/[^+/0-9A-Za-z-_]/g;function z(e,t){var r;t=t||1/0;for(var i=e.length,n=null,o=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var U=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var i=16*r,n=0;n<16;++n)t[i+n]=e[r]+e[n];return t}()},50311:function(e,t,r){"use strict";Object.defineProperty(t,"GP",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"qg",{enumerable:!0,get:function(){return i.default}});var i=o(r(76127)),n=o(r(31202));function o(e){return e&&e.__esModule?e:{default:e}}},67526:function(e,t){"use strict";t.byteLength=function(e){var t=a(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],l=o[1],c=new n(function(e,t,r){return 3*(t+r)/4-r}(0,s,l)),u=0,d=l>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===l&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=16383,a=0,l=i-n;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));return 1===n?(t=e[i-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(l(i));return n.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},69982:function(e,t,r){"use strict";e.exports=r(7463)},70181:function(e,t,r){"use strict";e.exports=r.p+"ae2798fa9b7c3af86bbe.css"},70887:function(e,t){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function i(e){return e&&"[object RegExp]"===t.call(e)}function n(e){return e&&"object"==typeof e&&!i(e)&&!Array.isArray(e)}function o(e){return new RegExp("|"+e).exec("").length-1}function s(e){return"("+e+")"}function a(e){return e.length?"(?:"+e.map(function(e){return"(?:"+e+")"}).join("|")+")":"(?!)"}function l(e){if("string"==typeof e)return"(?:"+(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")");if(i(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function c(e,t){return e.length>t?e:Array(t-e.length+1).join(" ")+e}function u(t,r){if(n(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var o={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var s in r)e.call(r,s)&&(o[s]=r[s]);if("string"==typeof o.type&&t!==o.type)throw new Error("Type transform cannot be a string (type '"+o.type+"' for token '"+t+"')");var a=o.match;return o.match=Array.isArray(a)?a:a?[a]:[],o.match.sort(function(e,t){return i(e)&&i(t)?0:i(t)?-1:i(e)?1:t.length-e.length}),o}function d(e){return Array.isArray(e)?function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(i.include)for(var n=[].concat(i.include),o=0;o<n.length;o++)t.push({include:n[o]});else{if(!i.type)throw new Error("Rule has no type: "+JSON.stringify(i));t.push(u(i.type,i))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),r=[],i=0;i<t.length;i++){var o=t[i],s=e[o],a=[].concat(s);if("include"!==o){var l=[];a.forEach(function(e){n(e)?(l.length&&r.push(u(o,l)),r.push(u(o,e)),l=[]):l.push(e)}),l.length&&r.push(u(o,l))}else for(var c=0;c<a.length;c++)r.push({include:a[c]})}return r}(e)}var m=u("error",{lineBreaks:!0,shouldThrow:!0});function p(e,t){for(var n=null,c=Object.create(null),u=!0,d=null,p=[],h=[],f=0;f<e.length;f++)e[f].fallback&&(u=!1);for(f=0;f<e.length;f++){var g=e[f];if(g.include)throw new Error("Inheritance is not allowed in stateless lexers");if(g.error||g.fallback){if(n)throw!g.fallback==!n.fallback?new Error("Multiple "+(g.fallback?"fallback":"error")+" rules not allowed (for token '"+g.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+g.defaultType+"')");n=g}var v=g.match.slice();if(u)for(;v.length&&"string"==typeof v[0]&&1===v[0].length;)c[v.shift().charCodeAt(0)]=g;if(g.pop||g.push||g.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+g.defaultType+"')");if(g.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+g.defaultType+"')")}if(0!==v.length){u=!1,p.push(g);for(var b=0;b<v.length;b++){var y=v[b];if(i(y))if(null===d)d=y.unicode;else if(d!==y.unicode&&!1===g.fallback)throw new Error("If one rule is /u then all must be")}var _=a(v.map(l)),x=new RegExp(_);if(x.test(""))throw new Error("RegExp matches empty string: "+x);if(o(_)>0)throw new Error("RegExp has capture groups: "+x+"\nUse (?: … ) instead");if(!g.lineBreaks&&x.test("\n"))throw new Error("Rule should declare lineBreaks: "+x);h.push(s(_))}}var w=n&&n.fallback,C=r&&!w?"ym":"gm",k=r||w?"":"|";return!0===d&&(C+="u"),{regexp:new RegExp(a(h)+k,C),groups:p,fast:c,error:n||m}}function h(e,t,r){var i=e&&(e.push||e.next);if(i&&!r[i])throw new Error("Missing state '"+i+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!==+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var f=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};f.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedText=t?t.queuedText:"",this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},f.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},f.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},f.prototype.popState=function(){this.setState(this.stack.pop())},f.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var g=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function v(){return this.value}if(f.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},f.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(s=this.fast[r.charCodeAt(e)])return this._token(s,r.charAt(e),e);var i=this.re;i.lastIndex=e;var n=g(i,r),o=this.error;if(null==n)return this._token(o,r.slice(e,r.length),e);var s=this._getGroup(n),a=n[0];return o.fallback&&n.index!==e?(this.queuedGroup=s,this.queuedText=a,this._token(o,r.slice(e,n.index),e)):this._token(s,a,e)}},f.prototype._token=function(e,t,r){var i=0;if(e.lineBreaks){var n=/\n/g,o=1;if("\n"===t)i=1;else for(;n.exec(t);)i++,o=n.lastIndex}var s={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:v,offset:r,lineBreaks:i,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=i,0!==i?this.col=a-o+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(s,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),s},"undefined"!=typeof Symbol&&Symbol.iterator){var b=function(e){this.lexer=e};b.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},b.prototype[Symbol.iterator]=function(){return this},f.prototype[Symbol.iterator]=function(){return new b(this)}}return f.prototype.formatError=function(e,t){if(null==e){var r=this.buffer.slice(this.index);e={text:r,offset:this.index,lineBreaks:-1===r.indexOf("\n")?0:1,line:this.line,col:this.col}}var i=Math.max(e.line-2,1),n=e.line+2,o=String(n).length,s=function(e,t){for(var r=e.length,i=0;;){var n=e.lastIndexOf("\n",r-1);if(-1===n)break;if(r=n,++i===t)break;if(0===r)break}var o=i<t?0:r+1;return e.substring(o).split("\n")}(this.buffer,this.line-e.line+2+1).slice(0,5),a=[];a.push(t+" at line "+e.line+" col "+e.col+":"),a.push("");for(var l=0;l<s.length;l++){var u=s[l],d=i+l;a.push(c(String(d),o)+"  "+u),d===e.line&&a.push(c("",o+e.col+1)+"^")}return a.join("\n")},f.prototype.clone=function(){return new f(this.states,this.state)},f.prototype.has=function(e){return!0},{compile:function(e){var t=p(d(e));return new f({start:t},"start")},states:function(e,t){var r=e.$all?d(e.$all):[];delete e.$all;var i=Object.getOwnPropertyNames(e);t||(t=i[0]);for(var n=Object.create(null),o=0;o<i.length;o++)n[y=i[o]]=d(e[y]).concat(r);for(o=0;o<i.length;o++)for(var s=n[y=i[o]],a=Object.create(null),l=0;l<s.length;l++){var c=s[l];if(c.include){var u=[l,1];if(c.include!==y&&!a[c.include]){a[c.include]=!0;var m=n[c.include];if(!m)throw new Error("Cannot include nonexistent state '"+c.include+"' (in state '"+y+"')");for(var g=0;g<m.length;g++){var v=m[g];-1===s.indexOf(v)&&u.push(v)}}s.splice.apply(s,u),l--}}var b=Object.create(null);for(o=0;o<i.length;o++){var y;b[y=i[o]]=p(n[y],!0)}for(o=0;o<i.length;o++){var _=i[o],x=b[_],w=x.groups;for(l=0;l<w.length;l++)h(w[l],_,b);var C=Object.getOwnPropertyNames(x.fast);for(l=0;l<C.length;l++)h(x.fast[C[l]],_,b)}return new f(b,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t="undefined"!=typeof Map,r=t?new Map:Object.create(null),i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++){var o=i[n],s=e[o];(Array.isArray(s)?s:[s]).forEach(function(e){if("string"!=typeof e)throw new Error("keyword must be string (in keyword '"+o+"')");t?r.set(e,o):r[e]=o})}return function(e){return t?r.get(e):r[e]}}}})?r.apply(t,[]):r)||(e.exports=i)},74848:function(e,t,r){"use strict";e.exports=r(21020)},76127:function(e,t){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){a=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},o=/ (?:to|[-/]) | ?(?:--|[–—]) ?/,s=/^(\d{4}-\d{2}-\d{2})\/(\d{4}-\d{2}-\d{2})$/;function a(e){return n[e.toLowerCase().slice(0,3)]}function l(e){const t=function(e){const t=new Date(e);return"number"!=typeof e||isNaN(t.valueOf())?null:[t.getFullYear(),t.getMonth()+1,t.getDate()]}(e)||function(e){const t=/^(\d{4}|[-+]\d{6,})-(\d{2})(?:-(\d{2}))?/;if("string"!=typeof e||!t.test(e))return null;const i=r(e.match(t),4),n=i[1],o=i[2],s=i[3];return+o?+s?[n,o,s]:[n,o]:[n]}(e)||function(e){const t=/^(?:[a-z]{3},\s*)?(\d{1,2}) ([a-z]{3}) (\d{4,})/i;if("string"!=typeof e||!t.test(e))return null;let i=r(e.match(t),4),n=i[1],o=i[2],s=i[3];return o=a(o),o?[s,o,n]:null}(e)||function(e){const t=/^(\d{1,2})\/(\d{1,2})\/(\d{2}(?:\d{2})?)/;if("string"!=typeof e||!t.test(e))return null;const i=r(e.match(t),4),n=i[1],o=i[2],s=i[3];return new Date(s,n,o).getMonth()===parseInt(n)?[s,n,o]:null}(e)||function(e){const t=/^(\d{1,2})[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](-?\d+)/i,i=/^(-?\d+)[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](\d{1,2})/i;let n,o,s;if("string"!=typeof e)return null;if(t.test(e)){var l=r(e.match(t),4);s=l[1],o=l[2],n=l[3]}else{if(!i.test(e))return null;var c=r(e.match(i),4);n=c[1],o=c[2],s=c[3]}if(a(o))o=a(o);else if(isNaN(o))return null;return[n,o,s]}(e)||function(e){const t=/^([a-z]{3,10}|-?\d+)[^\w-]+([a-z]{3,10}|-?\d+)$/i;if("string"==typeof e&&t.test(e)){const r=e.match(t).slice(1,3);let i;if(a(r[1]))i=a(r.pop());else if(a(r[0]))i=a(r.shift());else{if(r.some(isNaN)||r.every(e=>+e<0))return null;i=+r[0]<0||+r[0]>+r[1]&&+r[1]>0?r.pop():r.shift()}return[r.pop(),i]}return null}(e)||function(e){if("string"!=typeof e)return null;const t=e.match(/^(\d+) ?(a\.?d\.?|b\.?c\.?)$/i);if(t){const e=r(t.slice(1),2);return[e[0]*("a"===e[1].toLowerCase()[0]?1:-1)]}return/^-?\d+$/.test(e)?[e]:null}(e);return t&&t.map(e=>parseInt(e))}t.default=function(e,t){const r=[],i="string"==typeof e&&function(e){return s.test(e)?e.match(s).slice(1,3):e.split(o)}(e);t?r.push(e,t):i&&2===i.length?r.push(...i):r.push(e);const n=r.map(l);return n.filter(Boolean).length===r.length?{"date-parts":n}:{raw:t?r.join("/"):e}}},79272:function(e,t){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.parse=t.types=t.scope=void 0;const i=e=>e.replace(/$|( )|(?!^)(?=[A-Z])/g,"\\.?$1"),n=e=>`(?:${e.join("|")})\\b`,o=(e,t)=>new RegExp(`(?:^| )(${e}$)`,t),s=n(["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr"].map(i)),a=n(["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","Ph\\.D","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"].map(i)),l=n(["Vere","Von","Van","De","Del","Della","Di","Da","Pietro","Vanden","Du","St.","St","La","Lo","Ter","O","O'","Mac","Fitz"]),c=new RegExp(`^((?:${s} )*)(.*)$`,"i"),u=o(`(?:${a}, )*(?:${a})`,"i"),d=o(`${/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])/.source}.*`),m=o(`(?:${/(?:[a-z\xAA\xB5\xBA\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0371\u0373\u0377\u037A-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1DBF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u2071\u207F\u2090-\u209C\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2170-\u217F\u2184\u24D0-\u24E9\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7D\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B-\uA69D\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])/.source}.*|${l}.*|\\S*)`);t.default=t.parse=function(e=""){"string"!=typeof e&&(e+="");let t="",i="",n="";if(/[^.], /.test(e)){const r=e.split(", ");n=r.shift();const o=RegExp(a).exec(r.join(", "));t=r.splice(o&&0!==o.index?0:-1,1)[0],i=r.join(", ")}else{const r=e.split(u,2),o=r.shift().split(m,2);t=o[0],n=o[1],i=r.pop()}const o=r(t.match(c),3),s=o[1],l=o[2],p=i,h=r(n.split(d,2).reverse(),2),f=h[0],g=h[1];if(!l&&f)return f.includes(" ")?{literal:f}:{family:f};if(f){const e={"dropping-particle":s,given:l,suffix:p,"non-dropping-particle":g,family:f};return Object.keys(e).forEach(t=>{e[t]||delete e[t]}),e}return{literal:e}},t.scope="@name",t.types="@name"},81411:function(e,t,r){const{Buffer:i}=r(48287);function n(...e){const t=new n.Request(...e),r=new XMLHttpRequest;r.withCredentials="include"===t.credentials,r.timeout=t[o].timeout,r.open(t.method,t.url,!1);let s=!1;try{r.responseType="arraybuffer"}catch(e){r.overrideMimeType("text/plain; charset=x-user-defined"),s=!0}for(const e of t.headers)r.setRequestHeader(...e);r.send(t.body||null);let a=r.getAllResponseHeaders();a=a&&a.split("\r\n").filter(Boolean).map(e=>e.split(": ",2));let l=r.response;if(s){const e=i.alloc(l.length);for(let t=0;t<l.length;t++)e[t]=255&l.charCodeAt(t);l=e}const c=new n.Response(l,{headers:a,status:r.status,statusText:r.statusText});return c[o].url=r.responseURL,c[o].redirected=r.responseURL!==t.url,c}const o=Symbol("SyncFetch Internals"),s=["mode","cache","redirect","referrer","integrity"],a={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};class l{constructor(e,t={}){for(const e of s)if(e in t)throw new TypeError(`option ${e} not supported`);if("same-origin"===t.credentials)throw new TypeError("option credentials with value 'same-origin' not supported");if(this[o]={method:t.method||"GET",headers:new n.Headers(t.headers),body:t.body?i.from(t.body):null,credentials:t.credentials||"omit",timeout:t.timeout||0},"string"==typeof e)this[o].url=e;else{if(!(e instanceof l))throw new TypeError("Request input should be a URL string or a Request object");this[o].url=e.url,t.method||(this[o].method=e.method),t.headers||(this[o].headers=e.headers),t.body||(this[o].body=e[o].body),t.credentials||(this[o].credentials=e.credentials)}}get cache(){return"default"}get credentials(){return this[o].credentials}get destination(){return""}get headers(){return this[o].headers}get integrity(){return""}get method(){return this[o].method}get mode(){return"cors"}get priority(){return"auto"}get redirect(){return"follow"}get referrer(){return"about:client"}get referrerPolicy(){return""}get url(){return this[o].url}clone(){return d(this),new l(this.url,this[o])}}class c{constructor(e,t={}){this[o]={body:e?i.from(e):null,bodyUsed:!1,headers:new n.Headers(t.headers),status:t.status,statusText:t.statusText}}get headers(){return this[o].headers}get ok(){const e=this[o].status;return e>=200&&e<300}get redirected(){return this[o].redirected}get status(){return this[o].status}get statusText(){return this[o].statusText}get url(){return this[o].url}clone(){return this.redirect(this[o].url,this[o].status)}redirect(e,t){d(this);const r=new c(this[o].body,{headers:this[o].headers,status:t||this[o].status,statusText:a[t]||this[o].statusText});return r[o].url=e||this[o].url,r[o].redirected=this[o].redirected,r}}class u{constructor(e){this[o]={body:i.from(e),bodyUsed:!1}}get bodyUsed(){return this[o].bodyUsed}static mixin(e){for(const t of Object.getOwnPropertyNames(u.prototype)){if("constructor"===t)continue;const r=Object.getOwnPropertyDescriptor(u.prototype,t);Object.defineProperty(e,t,{...r,enumerable:!0})}}arrayBuffer(){const e=m(this);return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}blob(){const e=this.headers&&this.headers.get("content-type");return new Blob([m(this)],e&&{type:e})}text(){return m(this).toString()}json(){try{return JSON.parse(m(this).toString())}catch(e){throw new TypeError(`invalid json response body at ${this.url} reason: ${e.message}`,"invalid-json")}}buffer(){return m(this).clone()}}function d(e){if(e.bodyUsed)throw new TypeError(`body used already for: ${e.url}`)}function m(e){return d(e),e[o].bodyUsed=!0,e[o].body||i.alloc(0)}u.mixin(l.prototype),u.mixin(c.prototype);class p{constructor(e){if(e instanceof n.Headers)this[o]={...e[o]};else if(this[o]={},Array.isArray(e))for(const[t,r]of e)this.append(t,r);else if("object"==typeof e)for(const t in e)this.set(t,e[t])}append(e,t){e=e.toLowerCase(),this[o][e]||(this[o][e]=[]),this[o][e].push(t)}delete(e){delete this[o][e.toLowerCase()]}set(e,t){this[o][e.toLowerCase()]=[t]}entries(){const e=[];for(const t in this[o])for(const r of this[o][t])e.push([t,r]);return e}get(e){return(e=e.toLowerCase())in this[o]?this[o][e].join(", "):null}keys(){return Object.keys(this[o])}has(e){return e.toLowerCase()in this[o]}values(){const e=[];for(const t in this[o])for(const r of this[o][t])e.push(r);return e}*[Symbol.iterator](){for(const e in this[o])for(const t of this[o][e])yield[e,t]}}n.Headers=p,n.Request=l,n.Response=c,e.exports=n}},function(e){var t=function(t){return e(e.s=t)};t(14306),t(39046)}]);
//# sourceMappingURL=taskpane.js.map